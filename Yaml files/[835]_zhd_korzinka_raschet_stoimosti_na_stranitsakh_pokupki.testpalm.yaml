feature: ЖД
type: Выбор мест
description: |-
  Перейти на вкладку Ж/Д билеты
  Выполнить поиск Москва - Санкт-Петербург
  Для любого поезда с местами в плацкарт и кликнуть по кнопке покупки
specs:
  'ЖД: Корзинка "Расчет стоимости" на страницах покупки':
    - do: Перейти на покупку для поезда из подготовки
    - assert: >-
        Открылась страница выбора мест

        Справа присутствует пустая корзина с заголовком "Стоимость билетов",
        текстом "Будет известна после выбора мест." и кнопкой "Указать
        пассажиров"
    - do: |-
        В контролах количества билетов выбрать значения:
        * **1 взрослый**
        * **1 детский с местом**
        * **1 детский без места**
        Выбрать любой класс в плацкарте
        Выбрать на схеме вагона место №10
    - assert: >-
        В корзине появилась информация о выбранном месте и стоимости билета для
        ребенка от 5 до 10 лет

        Также появился чекбокс для выбора постельного белья, по умолчанию
        установлен

        https://jing.yandex-team.ru/files/arhey/2022-01-14T08:48:01Z.710821c.png
    - do: Кликнуть **Указать пассажиров**
    - assert: |-
        Над кнопкой появился поп-ап с текстом **“Выберите еще 1 место”**
        По клику вне поп-апа, он скрывается
    - do: Выбрать еще место №11 на схеме
    - assert: >-
        В корзине добавилась информация о выбранных билетах, стало:
        * **Взрослый**
        * **Ребёнок (от 5 до 10 лет)**
        * **Ребёнок без места (до 5 лет)**
        Стоимость детского билета (от 5 до 10 лет) всегда меньше взрослого
        Стоимость детского билета (до 5 лет) равна 0
        Для взрослого билета и билета ребенка от 5 до 10 лет есть указание
        номера места, для ребенка без места приписка "без места"
    - do: 'Проскроллить страницу до упора вниз, затем вверх'
    - assert: Корзина залипает на странице
    - do: Кликнуть Указать пассажиров
    - assert: >-
        * Произошел переход на страницу ввода данных
        * Данные в корзине не изменились, кнопка теперь называется "Проверить
        заказ и купить"
    - do: |-
        Корректно заполнить данные пассажиров
        Кликнуть **Проверить заказ и купить**
    - assert: >-
        Открывается страница покупки билетов на вкладке **Подтверждение**
        В корзине добавился блок **Добавить страховку**
        Вся информация в корзинке соответствует корзинке на предыдущих шагах
        (цены на подтверждении могут отличаться от цен на предыдущей странице)
        Кнопка _Проверить заказ и купить_ изменилась на **Ввести карту и
        оплатить**
        https://jing.yandex-team.ru/files/arhey/2022-01-14T08:50:08Z.eb37a10.png
manual: true
Функциональность: Разное по странице выбора мест
Устройство: Десктоп
Страница: Выбор мест
Сервис: ЖД
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Tag: Smoke
Автор: shenfeld
