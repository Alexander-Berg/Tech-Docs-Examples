feature: Отели
type: Бронирование отелей

specs:
    Обработка ошибки при доплате брони:
        - condition: Быть залогиненным.
        - do: Перейти на страницу бронирования отеля c параметрами
              | бесплатная отмена
              | 1 ночь
              | 2 взрослых
        - do: Выбрать чекбокс "Оплатить позже".
        - assert: Чекбокс рассрочки должен содержать текст "Оплатить позже".
        - do: В корзинке над рассрочками активировать чекбокс "У меня есть промокод" и ввести промокод "SUCCESS" и нажать "Применить".
        - do: Заполнить валидными данными гостей и контактную инфу и нажать "Забронировать".
        - do: Перейти по ссылке на страницу заказа.
        - do: Кликнуть на кнопку "Доплатить".
        - do: Оплатить заказ картой с ошибкой (указать CVN карты 228).
        - assert: Остались на странице с трастом.
        - assert: Показался попап "Ошибка оплаты. Проверьте данные карты, пополните баланс или используйте другую карту."
        - assert: В попапе две кнопки "Отмена" и "Попробовать еще раз".
        - assert: Цена доплаты в попапе совпадает с ценой на бронировании.
        - do: Нажать на кнопку "Отмена".
        - assert: Попап закрылся.
        - assert: Открылась страница заказа.
        - assert: Есть кнопка доплатить и информация о доплате.
        - do: Кликнуть на кнопку "Доплатить".
        - do: Оплатить заказ картой с ошибкой (указать CVN карты 228).
        - assert: Остались на странице с трастом.
        - assert: Показался попап "Ошибка оплаты. Проверьте данные карты, пополните баланс или используйте другую карту."
        - assert: В попапе две кнопки "Отмена" и "Попробовать еще раз".
        - assert: Цена доплаты в попапе совпадает с ценой на бронировании.
        - do: Нажать на кнопку "Попробовать еще раз".
        - assert: В заголовке отображается "Доплата".
        - assert: Цена доплаты на странице оплаты совпадает с ценой на странице бронирования.
        - do: Ввести данные карты и нажать "Оплатить".
        - assert: После прокрутки всех необходимых лоадеров произошел переход на HappyPage.
        - assert: В заголовке отображается "Отель оплачен полностью".
        - assert: Информация про внесении доплаты отсутствует.

files:
    - tests/common/hotels/book/deferredPayment/paymentFail-deferredPayment.hermione.ts

Сервис: Отели
Страница: Бронирование
Автор: iliasova
Устройство:
    - Тач
    - Десктоп
Функциональность:
    - Рассрочки
    - Промокод
Окружение:
    - Testing
    - Production
Тестирование асессорами: Нет
