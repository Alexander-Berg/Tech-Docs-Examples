feature: ЖД
type: Страница заказа
description: >-
    Также невозвратные можно поискать на:

    Москва - Санкт-Петербург, поезд 726Ч, вагон 1

    Москва - Адлер поезд 104В, вагон 9

    Москва - Ростов-на-Дону, поезд 020С, класс 2Э, вагон 4.


    НО: Поскольку невозвратный тариф - это акционная вещь, то самые актуальные
    данные по ним будут у РЖД: https://www.rzd.ru/ru/9332


    **Асессорам:** Если не удалось найти указанный в шагах тариф, повторите кейс
    для данных, которые будут по ссылке.
specs:
    'ЖД: Покупка с невозвратным тарифом':
        - do: |-
              Перейти на вкладку ЖД
              Сделать поиск Москва - Санкт-Петербург через неделю
              Для поезда 020У кликнуть по кнопке покупки
        - assert: '- Произошел переход на страницу выбора мест'
        - do: >-
              Выбрать класс 1У (в СВ), вагон номер 5

              На схеме выбрать любое место в этом вагоне

              скрин:
              https://jing.yandex-team.ru/files/shenfeld/2021-01-14_12.19.33-ah25y.png
        - assert: >-
              - Выбранное место окрасилось в желтый

              - В корзине появилась информация о тарифе (в десктопе корзина справа, в
              таче появляется по тапу на иконку со знаком вопроса

              скрин десктоп:
              https://jing.yandex-team.ru/files/shenfeld/2021-03-24_15.30.23-fre19.png

              скрин тач:
              https://jing.yandex-team.ru/files/shenfeld/2021-03-24_15.31.29-83kzi.png

              - В корзине есть баттон для переключения невозвратного/обычного тарифа

              - По умолчанию выбран возвратный тариф
        - do: |-
              Выбрать невозвратный тариф
              Нажать Указать пассажиров
              Ввести любые валидные данные пассажира
              Нажать Проверить заказ и купить
        - assert: >-
              - Произошел переход на страницу подтверждения

              - В корзине указано выбранное место, и есть информация, что это место по
              невозвратному тарифу
        - do: |-
              Нажать Ввести карту и оплатить
              Ввести данные тестовой карты (асессорам не надо)
              Нажать Оплатить (асессорам не надо)
              На хэппи пейдж нажать на кнопку "Подробнее о заказе"
        - assert: >-
              - Произошел переход на страницу полного заказа

              - На странице есть текст на желтом фоне "В вашем заказе есть билеты по
              невозвратному тарифу. При сдаче такого билета деньги вернутся не
              полностью. Возврат полной стоимости возможен только в определенных
              случаях."
        - do: Нажать по ссылке "Возврат" в тексте
        - assert: >-
              - Произошел переход на страницу поддержки с информацией о правилах
              возврата
        - do: |-
              Вернуться на Яндекс.Путешествия
              Нажать Сдать билет
        - assert: '- Появилось модальное окно с суммой к возврату'
        - do: |-
              Запомнить сумму
              Нажать Подтвердить
        - assert: |-
              - Через несколько секунд осуществился возврат
              - Рядом с билетом появился статус "Возврат"
              - Сумма к возврату совпадает с суммой в модальном окне
              - Текст на желтом фоне про возврат пропал
manual: true
Функциональность: Действия с заказом
Устройство:
    - Тач
    - Десктоп
Страница: Страница заказа
Сервис: ЖД
Тестирование асессорами: Да
Окружение: Testing
Автор: shenfeld
