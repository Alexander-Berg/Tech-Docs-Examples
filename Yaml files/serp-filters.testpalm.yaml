feature: Отели
type: Поиск отелей
description: ''
specs:
  Фильтры на странице поиска отелей:
    - do: >-
        Перейти на страницу поиска отелей с любыми датами и кол-вом гостей в
        Москве (но 2 ночами минимум) (geoid=213)
    - assert: >-
        * Открылась страница поиска отелей

        * В выдаче есть карточки с отелями

        * Вверху под хедером есть строка с быстрым фильтром и кнопкой
        "Все фильтры" (в тачах иконкой)
    - do: >-
        В быстрых фильтрах нажать на "Кешбэк плюса" (в тачах вместо названия иконка плюса)
    - assert: >-
        - При нажатии на фильтр он подсвечивается желтым

        - На время загрузки отображаются скелетоны -
        https://jing.yandex-team.ru/files/rifat-k/2019-12-18_19-38-46.png

        - По завершению скелетоны заменяются карточками

    - do: Справа от быстрых фильтров попередвигать значения бегунков цены
    - assert: >-
        При изменении минимального и максимального значения выдача на странице
        соответственно меняется.

        Если в карточке указано несколько цен от партнеров, то при изменении
        фильтра, в карточке остаются только предложения, удовлетворяющие рамкам
        фильтра
    - do: |-
        Вернуть бегунки цены в изначальное положение
        Нажать на кнопку “Все фильтры”
    - assert: >-
        * Раскрылась панель со списком фильтров

        * Разделы в фильтрах
            * Звездность
            * Рейтинг
            * Опции
            * Удобства
            * Питание
            * Тип размещения
            * До центра
            * Рядом
            * Партнёры **(только на тестовом домене)**

        * В каждом разделе есть варианты с чекбоксами или радиобаттонами

        * В разделе Питание активированы чекбоксы Оплата на Я.Путешествиях

        * В правом нижнем углу отображены кнопки "Сбросить фильтры" и "Искать
        цены в Y отелях", где Y - количество отелей в выдаче

        * Кнопка сброса фильтров активна
    - do: В разделе питания активировать чекбокс "Завтрак"
    - assert: |-
        ![image](https://jing.yandex-team.ru/files/gouken67/travel_622.png)
        * На кнопке “Искать цены в Y отелях” изменилась цифра
        * Кнопка Сбросить фильтры стала активной
    - do: Нажать на кнопку "Искать цены в Y отелях"
    - assert: |-
        * Панель с фильтрами скрылась
        * На экране отобразились скелетоны с картой
        * После отобразилась выдача с карточками отелей
        * В каждой карточке есть информация про завтрак
    - do: Перейти на следующую страницу по кнопке "Далее"
    - assert: >-
        * На экране отобразился лоадер загрузки

        * После отобразился перечень с карточками отелей

        * Список отелей не совпадает со списком на первой странице

        * В каждой карточке есть оффер от яндекса (под ценой), бэйдж акции МИР и
        инфа про завтрак
    - do: >-
        Нажать на кнопку Все фильтры и в появившемся окне нажать на активную
        кнопку Сбросить фильтры
    - assert: >-
        - 1-2 секунды форма фильтров некликабельна

        - Далее форма активна, все ранее выделенные фильтры сняты

        - На кнопке "Все фильтры" пропал счетчик

        - В кнопка "Искать цены в Y отелях" цифра становится исходной и равна
        максимальному количеству отелей на данной выдаче
    - do: Нажать на кнопку Искать цены в Y отелях
    - assert: >-
        - На экране отобразилась страница поиска отеля

        - Вверху быстрые фильтры не активированы, кнопка Все фильтры без цифр

        - Под быстрыми фильтрами есть надпись "Нашлось Y отелей", где Y
        соответствует значению на кнопке выше
    - do: Вновь нажать на Все фильтры
    - assert: |-
        - Открылось окно фильтров
        - Все чекбоксы и радиобатоны пустые

Tag:
    - Smoke
    - automation (in progress)
Функциональность: Бронирование отелей
Устройство: Десктоп
Страница: Выдача
Сервис: Отели
Тестирование асессорами: Да
Окружение: Testing

Автор: iliasova
