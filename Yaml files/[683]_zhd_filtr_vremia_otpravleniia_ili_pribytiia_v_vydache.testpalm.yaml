feature: ЖД
type: Выдача
description: >-
  Фильтр отображается, если есть сниппеты с несколькими временными зонами,
  например ночь и утро.


  Фильтр Время отправления/прибытия выглядит так:
  https://jing.yandex-team.ru/files/shenfeld/2020-12-03_15.00.06-fcvtp.png

  Перейти на главную сервиса

  Перейти на вкладку Ж/Д билеты
specs:
  'ЖД: Фильтр Время отправления/прибытия в выдаче':
    - do: Открыть выдачу Москва - Санкт-Петербург на завтра
    - assert: >-
        * На выдаче есть фильтр Время отправления/прибытия

        * В фильтре есть блоки: Отправление/Прибытие и чекбоксы в каждом из них
        в таком порядке: Ночь, Утро, День, Вечер
    - do: В фильтре выбрать Утро
    - assert: >-
        * На выдаче остались только те сниппеты, которые отходят в утренние
        часы: 6:00 до 12:00

        * Кнопка фильтра стала Оранжевой

        * Изменился урл страницы: добавилось departure=morning
    - do: В фильтре снять Утро и выбрать День
    - assert: >-
        * На выдаче остались только те сниппеты, которые отходят в дневные часы:
        12:00 до 18:00

        * Кнопка фильтра оранжевая

        * Изменился урл страницы: добавилось departure=day
    - do: В фильтре снять День и выбрать Вечер
    - assert: >-
        * На выдаче остались только те сниппеты, которые отходят в вечерние
        часы: 18:00 до 04:00

        * Кнопка фильтра оранжевая

        * Изменился урл страницы: добавилось departure=evening
    - do: В фильтре снять Вечер и выбрать Ночь
    - assert: >-
        * На выдаче остались только те сниппеты, которые отходят в ночные часы:
        00:00 до 6:00

        * Кнопка фильтра оранжевая

        * Изменился урл страницы: добавилось departure=night
    - do: В фильтре установить Утро и Ночь
    - assert: >-
        * На выдаче остались только те сниппеты, которые отходят в утренние и
        ночные часы: 6:00 до 12:00 и с 00:00 до 6:00

        * Кнопка фильтра оранжевая

        * Изменился урл страницы: добавилось departure=morning и departure=night
    - do: 'В фильтре снять Утро и Ночь, выбрать Прибытие, Утро'
    - assert: >-
        * На выдаче остались только те сниппеты, которые прибывают в утренние
        часы: 6:00 до 12:00

        * Кнопка фильтра оранжевая

        * Изменился урл страницы, добавилось arrival=morning
    - do: В фильтре снять Утро и выбрать День
    - assert: >-
        * На выдаче остались только те сниппеты, которые прибывают в дневные
        часы: 12:00 до 18:00

        * Кнопка фильтра оранжевая

        * Изменился урл страницы, добавилось arrival=day
    - do: В фильтре снять День и выбрать Вечер
    - assert: >-
        * На выдаче остались только те сниппеты, которые прибывают в вечерние
        часы: 18:00 до 00:00

        * Кнопка фильтра оранжевая

        * Изменился урл страницы, добавилось arrival=evening
    - do: В фильтре снять Вечер и выбрать Ночь
    - assert: >-
        * На выдаче остались только те сниппеты, которые прибывают в ночные
        часы: 00:00 до 6:00

        * Кнопка фильтра оранжевая

        * Изменился урл страницы, добавилось arrival=night
    - do: В фильтре установить Ночь и День
    - assert: >-
        * На выдаче остались только те сниппеты, которые прибывают в дневные и
        ночные часы: 12:00 до 18:00 и 00:00 до 6:00

        * Кнопка фильтра оранжевая

        * Изменился урл страницы, добавилось arrival=night и arrival=day
    - do: В фильтре снять все изменения
    - assert: |-
        * Выдача вернулась к первоначальному состоянию
        * Кнопка фильтра стала серой
        * Урл вернулся к первоначальному состоянию
    - do: >-
        Открыть выдачу Ижевск - Пермь на завтра с прописанным параметром для
        метрики  _ym_debug=1 (если фильтра нет, открыть выдачу на другую дату,
        чтобы он был)
    - assert: >-
        * На выдаче есть фильтр Время отправления/прибытия

        * На выдаче нет сниппетов с утренними и дневными рейсами

        * В консоли браузера есть события показа фильтра: filter_arrival_show и
        filter_departure_show, отправляемое в метрику

        * Фильтры Утро и День для Отправления окрашены в серый цвет и недоступны
        для выбора
    - do: В фильтре кликнуть по кнопке Утро для Отправления
    - assert: |-
        * Клика по кнопке не происходит
        * Кнопка серая
        * Выдача не изменилась
    - do: Для Прибытия кликнуть по кнопке Вечер
    - assert: |-
        * Клика по кнопке не происходит
        * Кнопка серая
        * Выдача не изменилась
manual: true
Функциональность: Фильтры и сортировки
Устройство: Десктоп
Страница: Выдача
Сервис: ЖД
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Автор: shenfeld
