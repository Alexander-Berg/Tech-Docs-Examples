feature: Автобусы
type: Happy Page
description: |
  В тестинге автобусов мало данных, можно попробовать поискать https://testing.backend.internal.bus.yandex.net/api/popular

  Направления, которые чаще всего есть в тестинге:
  Москва - Санкт-Петербург,
  Москва - Воронеж,
  Москва - Богучар

  Перейти Яндекс.Путешествия, вкладка «Автобусы»

specs:
  Автобусы. Проверка работы координат:
    - do: Сформировать поисковую выдачу на направлении "Москва - Великий Новгород" на завтра
    - assert: |
        Пункт отправления или прибытия содержит координаты остановки:
        В десктопе он будет подсвечен синим шрифтом, см. скрин https://jing.yandex-team.ru/files/frangetta/2021-02-18_14.54.45-27wiY.png
        В таче будет выводиться ссылка "Станции на карте", см. скрин https://jing.yandex-team.ru/files/frangetta/2021-02-18_15.38.04-yeNVZ.png
    - do: Кликнуть на подсвеченный пункт прибытия, либо ссылку "Станции на карте" (тач).
    - assert: |
        Открылась модальное окно с картой
        В десктопе модалка выглядит так: https://jing.yandex-team.ru/files/arhey/2021-12-08T14:30:11Z.75971ac.png
        В таче модалка выглядит так: https://jing.yandex-team.ru/files/arhey/2021-12-08T14:30:11Z.75971ac.png
    - do: |
        Закрыть модалку.
        На десктопе: по крестику и по клику мимо окна.
        На таче: переходом назад по ссылке Назад, либо аппаратной кнопкой
    - assert: Модалка закрывается корректно
    - do: Нажать "Выбрать" и перейти на шаг ввода пассажирских данных
    - assert: Обратить внимание, что в блоке "Информация о рейсе" пункт отправления или прибытия содержит координаты остановки
    - do: Кликнуть на подсвеченный пункт прибытия, либо ссылку "Станции на карте" (тач). Проверить, что поведение не изменилось.
    - do: Закрыть модальное окно
    - do: Заполнить данные пассажира валидными данными, указать контактную информацию и нажать "ввести карту и оплатить"
    - assert: |
        Перешли на Happy Page.
        Обратить внимание, что на happy Page пункт отправления или прибытия содержит координаты остановки
    - do: Нажать "Подробнее о заказе" и перейти на страницу заказа
    - assert: Обратить внимание, что на happy Page пункт отправления или прибытия содержит координаты остановки
    - do: Кликнуть на подсвеченный пункт прибытия, либо ссылку "Станции на карте" (тач). Проверить, что открылось модальное окно.
    - do: Кликнуть по ссылке "Построить маршрут до остановки", либо кнопку "Как добраться" (тач)
    - assert: |
        Открывается новое окно яндекс карт
        В пункте "Куда" подставлен адрес остановки, например автовокзал "Великий Новгород"
        На Яндекс.Карте город, в котором лоцируется пользователь, проходящий кейс


manual: true
Функциональность: Координаты остановки
Устройство:
  - Десктоп
  - Тач
Страница: Happy Page
Сервис: Автобусы
Тестирование асессорами: Нет
Tag: Smoke
Автор: arhey
Окружение:
  - Production
  - Testing
