feature: Авиа
type: Выдача
description: ''
specs:
  'Авиа: Проверка динамики цен со страницы выдачи':
    - do: открыть главную страницу путешествий, вкладка Авиабилеты
    - do: |-
        Заполнить форму поиска билетов
        Откуда: Екатеринбург
        Куда: Санкт-Петербург
        Туда: 5 число следующего месяца, дату обратно не ставить.
        Пассажиры: 1 взрослых
        Класс: Эконом
    - do: Нажать кнопку “Найти”
    - assert: Открылась страница выдачи
    - do: |-
        Проскролить выдачу до блока “Динамика цен”
        Нажать на кнопку “Смотреть весь календарь”
        https://jing.yandex-team.ru/files/kuklina/2022-04-08_21-48-18.png
    - assert: >-
        Общий фон страницы затемнился.
        По центру страницы появилось модальное окно динамики цены.
        1) Выбрана таблица цен
        2) Есть фильтры "Без пересадок", “С Багажом”, “Пересадки”, “Время”
        3) Есть переключатель на График цен
        Отображается строка в виде кнопок, где:
        * Выбран день вылета, кнопка жёлтого цвета
        * Автоматически происходит опрос партнёров (если изначально нет цен на
        какие-то даты) для +- 3 дня от выбранной даты - отображаются лоадеры на
        кнопках
        * Дни, для которых цена известна, содержат ету цену в кнопке. Дни, для которых неизвестна -
        содержат либо примерную цену, либо иконку лупы.

        Screen:
          https://jing.yandex-team.ru/files/gouken67/983_2.png
    - do: >-
        Выбрать день, для которого нет цены. Нажать на кнопку этого дня.
        (При необходимости можно листать календарь боковыми кнопками-стрелочками.)
    - assert: >-
        Запустился опрос партнёров. На кнопке появился лоадер.
        После опроса лоадер исчезает, на кнопке указана цена.
    - do: Нажать ещё раз на эту кнопку
    - assert: Открылась страница выдачи. Варианты для указанного направления. Дата соответствует выбранной в динамике.
    - do: |
        Снова нажать на кнопку “Смотреть весь календарь” Динамики цен
        Перейти на График цен
    - assert: |
        Отображается график в виде гистограммы, где:
        1) Выбран день вылета, столбец жёлтого цвета
        2) Автоматически происходит опрос партнёров (если изначально нет цен на
        какие-то даты) для +- 3 дня от выбранной даты - отображаются лоадеры на
        столбиках
        3) Дни, для которых цена известна, светло серого цвета, под столбцами
        указана цена. Дни, для которых цена не известна, - в полосочку, под
        столбцами - кнопка "Найти"
        4) Есть ватерлиния - пунктирная линия, построенная относительно
        выбранного столбца
        Screen:
        https://jing.yandex-team.ru/files/tcheremnykh/2020-01-28_16-30-08.png
    - do: Выбрать день, для которого нет цены. Нажать на столбик этого дня.
    - assert: >-
        Запустился опрос партнёров. На столбике появился лоадер. Высота
        столбика меняется в зависимости от минимальной полученной цены. После
        опроса лоадер исчезает, столбик остаётся серым, под ним указана цена.
    - do: Нажать ещё раз на этот столбик
    - assert: Прошлый столбик стал серым, выбранный столбик стал жёлтым
    - do: Выбрать другой день и нажать на стоимость под столбиком
    - assert: >-
        Открылась страница выдачи. Варианты для указанного направления.
        Дата соответствует выбранной в динамике.
manual: true
Функциональность: Динамика
Устройство: Десктоп
Страница: Выдача
tlds: ru
Сервис: Авиа
Тестирование асессорами: Да
Окружение:
  - Testing
  - Production
Tag: Smoke
