feature: ЖД
type: Страница заказа
description: >-
  **Информация для асессоров: форма оплаты с полями ввода данных карты в
  тестинге намеренно пропускается. Шаги, где требуется ввести данные карты и
  нажать кнопку Оплатить, нужно пропустить.**


  Кейс проверяет случай, когда в одном заказе есть билеты с разным статусом ЭР.
  Особенность случаев в том, что когда ЭР отменена, билет можно сдать в любое
  время до отправления со станции посдки пассажира, а когда ЭР есть, билет можно
  сдать не позднее, чем за час до отправления поезда с начальной станции.

  Перейти на главную сервиса

  Перейти на вкладку Ж/Д билеты


  Создать заказ для двух взрослых на сегодняшнюю дату, чтобы до отправления
  поезда оставалось чуть больше часа.

  Для этого:

  * Зайти на выдачу

  * Кликнуть по кнопке покупки (кнопка может называть по разному, сейчас -
  “Выбрать место”)

  * Дальше следовать по страницам покупки до хэппи пейдж

  * Нажать на кнопку "Подробнее о заказе"

  * Для одного из билетов отменить ЭР - это можно сделать, нажав на гамбургер
  рядом с кнопкой Сдать около информации о пассажире - появится действие
  Отменить ЭР.


  Для заполнения форм на странице оплаты использовать тестовую карту:

  Номер карты: 5100003697253468

  CVN: 090

  Дата: 12/24
specs:
  'ЖД: Невозможность возврата билетов для заказа с билетами с разными статусами ЭР':
    - do: 'Дождаться, когда до отправления поезда останется 1 час и 15 минут'
    - assert: >-
        * Не появляется желтого предупреждения о том, что скоро вернуть билеты
        будет нельзя

        * Доступны действия смены статуса ЭР и возврата билетов
    - do: |-
        Дождаться, когда до отправления поезда останется 1 час
        Обновить страницу
    - assert: >-
        * Для билета, у которого есть ЭР, кнопка Сдать билет сменилась на ссылку
        Можно сдать в кассе

        * Для билета, у которого нет ЭР, есть кнопка Сдать билет

        * Для обоих билетов и в общих действиях по заказу (рядом с кнопками
        Скачать и Распечатать) пропали действия смены статуса ЭР
    - do: 'Дождаться, когда до отправления поезда останется 15 минут'
    - assert: >-
        * Появилось предупреждение на желтом фоне  “Через 15 минут вернуть билет
        онлайн будет нельзя. Вы сможете [сдать его только в кассе].”

        * Время меняется соответственно отсчету
    - do: 'Дождаться, когда до отправления поезда останется 0 минут'
    - assert: >-
        * Предупреждение сменилось на ”Вернуть билет онлайн на этот поезд
        нельзя, поскольку он уже отправился со станции [НазваниеСтанции]. Вы
        можете сдать билет в кассе вокзала."

        * Для обоих билетов нет кнопки Сдать билет, вместо нее ссылка Можно
        сдать в кассе

        * Для обоих билетов нет действия смены статуса ЭР

        * В общих действиях нет кнопок возврата и смены статуса ЭР
manual: true
Функциональность: Действия с заказом
Устройство: Десктоп
Страница: Страница заказа
Сервис: ЖД
Тестирование асессорами: Да
Окружение: Testing
Автор: shenfeld
