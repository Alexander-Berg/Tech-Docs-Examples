feature: Записная книжка
type: Пассажиры
description: >-
  Необходимо авторизоваться. Можно использовать учетную запись:
  vladlen@yandex.ru password: v12345678


  **Для Асессоров: Выполнить вход удается ТОЛЬКО через кнопку Мои поездки (рядом с
  кнопкой Войти) > кликнуть Войдите в аккаунт > Авторизоваться тестовым
  аккаунтом (ссылка ведет на passport-test.yandex.ru). Важно чтобы это был
  именно тестовый аккаунт, т.к. через свой аккаунт не впустит**

  ![image](https://jing.yandex-team.ru/files/gouken67/Новый%20вход%20в%20ЛК.png)
specs:
  'Телефон, почта и галка согласия в форме добавления пассажира':
    - do: >-
        Перейти в Мои Поездки по иконке на главной (находится в правом верхнем углу,
        рядом с кнопкой Войти)

        Перейти на вкладку Пассажиры (на тачах Пассажиры находятся внутри бургера)

        Нажать кнопку Добавить
    - assert: >-
        * Открылась форма добавления пассажира

        * Есть поля Электронная почта, Телефон, чекбокс "Я хочу получать
        уведомления от РЖД об изменении в расписании поездов"
    - do: |-
        Заполнить поле почты значением "1"
        Остальные поля заполнить любыми валидными данными
        Установить галку согласия
        Кликнуть Сохранить
    - assert: >-
        * У поля почты появилась красная обводка и попап с текстом "Это не
        похоже на электронный адрес"
    - do: |-
        Заполнить поле почты валидным значением, например "noemail@yandex.ru"
        Поле телефона заполнить значением "1"
        Кликнуть Сохранить
    - assert: >-
        * У поля телефона появилась красная обводка и попап с текстом "Номер
        указан неправильно. Укажите номер в формате +73333333333"
    - do: |-
        Поменять поле с телефоном на валидное значение, например, "+71111111111"
        Кликнуть Добавить
    - assert: >-
        * Форма добавления пассажира скрылась

        * Десктоп: открыта карточка созданного пассажира, отображаются
        контактные данные

        https://jing.yandex-team.ru/files/shenfeld/2020-03-25_18.06.04-qqfqr.png

        * Тач: в карточке пассажира отображаются контактные данные. Чтобы
        увидеть, нужно пролистать список пассажиров (или воспользоваться поиском
        вверху) и перейти в созданного пассажира.

        https://jing.yandex-team.ru/files/shenfeld/2020-03-25_18.07.52-r17zd.png
    - do: >-
        Кликнуть по иконке редактирования пассажира (карандаш рядом с ФИО вверху
        страницы)
    - assert: >-
        * Открылась форма редактирования, телефон и почта заполнены, галка
        согласия установлена
    - do: |-
        Стереть телефон и почту, оставить галку
        Кликнуть Сохранить
    - assert: >-
        * Поля почты и телефона обведены красным

        * Для поля почты появилась подсказка "Введите электронную почту или
        телефон"
    - do: |-
        Ввести только почту
        Кликнуть Сохранить
    - assert: |-
        * Форма добавления пассажира скрылась
        * В информации о пассажире есть почта, нет телефона
manual: true
Функциональность: Действия в записной книжке
Устройство:
  - Десктоп
  - Тач
Страница: Пассажиры
Сервис: Записная книжка
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Автор: shenfeld
