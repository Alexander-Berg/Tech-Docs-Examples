feature: Авиабилеты
type: Выдача
description: ''
specs:
    'Проверка выбора тарифов на выдаче в таче':
        - do: |-
              Зайти на главную,
              На вкладке авиа ввести в поля
              * откуда - Екатеринбург
              * куда - Москва
              * туда - 5 число следующего месяца
              * обратно не заполняем
              Кликнуть "Найти"
        - assert: Произошел переход на страницу выдачи
        - do: |
              Убедиться, что выбрана сортировка Сначала рекомендуемые, по возрастанию
              Применить фильтр Авиакомпания = Уральские авиалинии, чекбокс Комбинации авиакомпаний снять
        - assert: На выдаче остались варианты от авиакомпании Уральские авиалинии
        - do: Тапнуть по значению багажной информации для первого сниппета
        - assert: |
              Открывается шторка с выбором тарифа
              Значения выбранного тарифа соответствуют тому, что было указано на сниппете
              В каждом пункте выбора тарифа указаны:
              * Жёлтая кнопка с ценой предложения и названием партнёра
              * Надпись Ещё n предложений под жёлтой кнопкой (может отсутствовать)
              * Значение ручной клади
              * Значение багажа
              * Значение возвратности
        - assert: |
              Также отображается подробная информация о перелёте:
              * Направление рейса
              * Дата вылета
              * Авиакомпании
              * Детали перелёта: время вылета, прилёта, время в пути, пункт вылета, прилёта, пересадки (ели есть)
              https://jing.yandex-team.ru/files/gouken67/Тарифы%20выдача%20тач.png
        - do: Проскроллить варианты тарифов в шторке
        - assert: Варианты скроллятся корректно
        - do: Закрыть шторку свайпом вниз
        - assert: |
              Шторка корректно закрывается
              Значения багажности/возврата не изменились
        - do: |
              Открыть тарифную шторку снова
              Кликнуть по ссылке Ещё n вариантов для первого сниппета (если нет ссылки - пропустить шаг)
        - assert: |
              Открывается шторка с предложениями от партнёров
              https://jing.yandex-team.ru/files/gouken67/Шторка%20партнёров%20в%20тарифах.png
        - do: Кликнуть по кнопке Купить для любого предложения партнёра
        - assert: |
              Происходит редирект к партнёру в новой вкладке
              Стоимость у партнёра совпадает с тем, что было указано на выдаче
        - do: Вернуться на вкладку с выдачей Авиа в Путешествиях
        - assert: Шторка с предложениями партнеров открыта
        - do: Тапнуть по экрану за пределами шторки
        - assert:  |
              Шторка с предложениями партнеров закрывается
              Остается открытой шторка с тарифами
        - do: |
              Проскроллить шторку тарифов до второго варианта
              Кликнуть по жёлтой кнопке с ценой
        - assert: |
              Происходит редирект к партнёру
              Стоимость у партнёра совпадает с тем, что было указано на выдаче (за вычетом страхования и СМС-информирования - эти доп. услуги добавляет сам партнёр)

files:
    - tests/touch/avia/serp/serp-all-tariffs-touch.hermione.ts

Функциональность: Содержание выдачи
Устройство:
    - Тач
Страница: Выдача
Сервис: Авиа
Тестирование асессорами: Да
Окружение:
    - Testing
    - Production
Автор: gouken67
Tag:
    - Smoke
