feature: ЖД
type: Подтверждение
description: >-
  Для асессоров: чтобы выполнить кейс, нужно будет выждать 30 минут на шаге 7.
  Можно открыть нужную страницу в отдельной вкладке и пока ждете, выполнять
  другие кейсы.


  События в метрику проверять только в десктопе.

  Перейти на главную сервиса

  Перейти на вкладку Ж/Д билеты
specs:
  'ЖД: Отображение попапа с подсказкой после того, как время бронирования истекло':
    - do: >-
        Открыть выдачу Москва - Казань на завтра с прописанным параметром в
        метрику &_ym_debug=1 (как это сделать см инструкцию)
    - do: Для одного из поездов кликнуть кнопку покупки
    - assert: '* Осуществился переход на страницу выбора мест'
    - do: >-
        Выбрать место в любом вагоне, кликнуть по кнопке  перехода на следущий
        шаг покупки. (Кнопка может называться по разному, сейчас называется
        "Указать пассажиров"
    - do: Заполнить все поля валидными данными
    - do: Кликнуть по кнопке Проверить заказ и купить
    - assert: |-
        * Произошел переход на страницу подтверждения
        * Время на оплату 30 минут
    - do: Открыть консоль
    - do: Подождать 30 минут
    - assert: >-
        * В консоли появилось событие в метрику на показ попапа
        trains_order_payment_timeout

        * Появился попап с подсказкой:
         "Вы долго не могли решиться, поэтому выбранные места теперь может забронировать кто-то другой" и кнопкой "Выбрать места заново"
    - do: Обновить страницу
    - assert: '* Страница обновилась, отображается попап с подсказкой'
    - do: Кликнуть по кнопке "Перейти к выбору мест"
    - assert: >-
        * В консоли появилось событие в метрику на клик по кнопке "Перейти к
        выбору мест" trains_cancel-order-by-tab

        * Осуществился переход на страницу выбора мест
manual: true
Функциональность: Действия на подтверждении
Устройство:
  - Десктоп
  - Тач
Страница: Подтверждение
Сервис: ЖД
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Автор: shenfeld
