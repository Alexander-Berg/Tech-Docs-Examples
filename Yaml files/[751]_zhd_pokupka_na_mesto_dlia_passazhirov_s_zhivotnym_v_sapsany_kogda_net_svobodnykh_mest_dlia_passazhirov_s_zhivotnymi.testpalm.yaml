feature: ЖД
type: Подтверждение
description: >-
  Такой случай возможен, если, пока пользователь оформлял билет, другие
  пользователи забронировали все места для пассажиров с животными в этом вагоне.

  Перейти на главную сервиса

  Перейти на вкладку Ж/Д билеты
specs:
  'ЖД: Покупка на место для пассажиров с животным в сапсаны, когда нет свободных мест для пассажиров с животными':
    - do: Открыть выдачу Москва - Санкт-Петербург на завтра
    - do: Установить фильтр Скоростные поезда -> Сапсан
    - do: >-
        Для одного из сапсанов кликнуть кнопку покупки (может называться по
        разному, сейчас называется "Выбрать место")
    - assert: '* Осуществился переход на страницу выбора мест'
    - do: Открыть ту же страницу выбора мест в новой вкладке
    - do: >-
        Для обеих страниц раскрыть класс, у которого есть подпись "Места для
        пассажиров с животными"
    - assert: >-
        * В этом вагоне 4 или меньше свободных места (если какие-то
        забронированы)
    - do: >-
        Для первой вкладки в блоке выбора пассажиров установить столько
        пассажиров, сколько cвободных мест в вагоне для пассажиров с животными
    - do: Выбрать все свободные места для пассажиров с животными
    - do: >-
        Кликнуть по кнопке  перехода на следущий шаг покупки. (Кнопка может
        называться по разному, сейчас называется "Указать пассажиров"
    - do: Заполнить все поля валидными данными
    - do: Кликнуть кнопку "Проверить заказ"
    - assert: |-
        * Осуществился переход на страницу "Подтверждение данных"
        * Данные прогрузились, ошибок нет
    - do: Вернуться ко второй вкладке
    - do: Выбрать в том же вагоне для пассажиров с животными одно место
    - do: >-
        Кликнуть по кнопке  перехода на следущий шаг покупки. (Кнопка может
        называться по разному, сейчас называется "Указать пассажиров"
    - do: Заполнить все поля валидными данными
    - do: Кликнуть кнопку "Проверить заказ"
    - assert: >-
        * Перехода на страницу "Подтверждение данных" не осуществилось

        * Появилось окошко с ошибкой: "По данным требованиям мест нет,
        попробуйте изменить требования к местам", либо "На заданном направлении
        (или поезде) мест нет"


        ![image](https://jing.yandex-team.ru/files/tyrande/Zapolnenie_dannyh_passazhirov_v_poezde_752A_Moskva__Sankt-Peterburg_iz_Moskvy_v_Sankt-Peterburg_na_29_aprelya__Yandeks.Raspisaniya_2018-04-28_10-35-57.jpg)
manual: true
Функциональность: Бронь с разными условиями
Устройство: Десктоп
Страница: Подтверждение
Сервис: ЖД
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Автор: shenfeld
