feature: ЖД
type: Страница заказа
description: >-
  **Информация для асессоров: форма оплаты с полями ввода данных карты в
  тестинге намеренно пропускается. Шаги в кейсе, где требуется ввести данные
  карты и нажать кнопку Оплатить, нужно пропустить.**


  Все скрины в кейсе соответствуют десктопной версии. В тач-версии отображение
  отличается, но суть меняться не должна.

  Перейти на главную сервиса

  Перейти на вкладку Ж/Д билеты
specs:
  'ЖД: Беспересадочные вагоны на страницах покупки':
    - do: Открыть выдачу Усинск - Микунь через неделю
    - assert: >-
        * На выдаче есть поезд, у которого возможно разное время прибытия

        ![image](https://jing.yandex-team.ru/files/shenfeld/2021-04-16_16.53.43-4f8ow.png)
    - do: Кликнуть по кнопке покупки для этого поезда
    - assert: >-
        * Осуществился переход на страницу выбора мест

        * В блоке информации о поезде вверху страницы есть время в пути, оно
        посчитано верно относительно времени отправления и прибытия

        * У некоторых вагонов при раскрытии класса есть красная приписка
        "беспересадочный: прибывает в ...", указанное здесь время отличается от
        основного времени прибытия (которое отображается вверху страницы в блоке
        с маршрутом)

        * У вагонов, где время прибытия совпадает с основным временем прибытия,
        отображается только черная приписка "прибывает в ..." после номера
        вагона
    - do: Выбрать место в одном из беспересадочных вагонов
    - do: >-
        Кликнуть по кнопке  перехода на следущий шаг покупки. (Кнопка может
        называться по-разному, сейчас называется "Указать пассажиров"
    - assert: >-
        * Осуществился переход на страницу ввода данных

        * Основное время прибытия в блоке с маршрутом изменилось на выбранное

        * Время в пути изменилось, посчитано верно, учитывая новое время
        прибытия

        * Появился блок с текстом "Вы выбрали беспересадочный вагон, поэтому
        время прибытия изменилось 14:40 → 13:18"


        ![image](https://jing.yandex-team.ru/files/semirka/Screenshot_72.png)
    - do: >-
        Заполнить поля валидными данными, для тестинга в поле с почтой ввести
        почту на yandex-team
    - do: >-
        Кликнуть по кнопке перехода на следущий шаг покупки. (Кнопка может
        называться по-разному, сейчас называется “Проверить заказ”)
    - assert: >-
        * Осуществился переход на страницу подтверждения

        * Указано выбранное время прибытия

        * Появился блок с текстом "Вы выбрали беспересадочный вагон, поэтому
        время прибытия изменилось 14:40 → 13:18"

        ![image](https://jing.yandex-team.ru/files/semirka/Screenshot_74.png)
    - do: >-
        Кликнуть по кнопке перехода на следующий шаг покупки. (Кнопка может
        называться по-разному, сейчас называется “Ввести карту и оплатить”)
    - assert: >-
        * Осуществился переход на страницу оплаты (у асессоров сразу на страницу
        успешного заказа)
    - do: |-
        Заполнить все поля валидной информацией. (асессоры не выполняют шаг)
        Номер карты: 5100003697253468
        CVC: 090
        Срок действия: 01/24
    - do: Кликнуть по кнопке "Оплатить" (асессоры не выполняют шаг)
    - assert: >-
        * Произошел переход на страницу успешного заказа - хэппи пейдж

        * Указано верное выбранное время прибытия

        * На указанную при оформлении билета почту пришло письмо, в нем верное
        выбранное время прибытия
    - do: >-
        Вернуться на страницу выбора мест для того же поезда 305МЯ Усинск —
        Микунь
    - do: Выбрать место в обычном вагоне (не беспересадочном)
    - do: Пройти все шаги покупки до станицы хэппи пейдж
    - assert: |-
        * На всех страницах покупки время прибытия указано основное
        * Нет блока с текстом о смене времени прибытия
manual: true
Функциональность: Покупка
Устройство: Десктоп
Страница: Страница заказа
Сервис: ЖД
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Автор: shenfeld
