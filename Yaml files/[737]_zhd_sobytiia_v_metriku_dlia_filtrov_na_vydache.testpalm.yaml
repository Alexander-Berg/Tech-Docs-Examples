feature: ЖД
type: Выдача
description: >-
  Для событий в метрику в консоли, в строке с событием характерно наличие "Reach
  goal." В консоли события в метрику выглядят так:


  ![image](https://jing.yandex-team.ru/files/tyrande/Moskva__Ekaterinburg_bilety_napoezd_raspisanie_poezdov_6_marta_vtornik__Yandeks.Raspisaniya_2018-03-05_16-58-00.jpg)

  Перейти на главную сервиса

  Перейти на вкладку Ж/Д билеты
specs:
  'ЖД: События в метрику для фильтров на выдаче':
    - do: >-
        Открыть выдачу Москва - Санкт-Петербург на завтра с прописанным
        параметром в метрику ?_ym_debug=1
    - assert: >-
        * На странице есть фильтры: "Цены", "Типы вагонов", "Скоростные поезда",
        "Время отправления/прибытия", "Станции"
    - do: Открыть консоль
    - assert: >-
        В консоли есть события в метрику для показа фильтров:


        * Цены - trains_filter_priceRange_show

        * Тип вагона - trains_filter_trainTariffClass_show

        * Скоростные поезда - trains_filter_highSpeedTrain_show

        * Время - trains_filter_departure_show и trains_filter_arrival_show

        * Станции - trains_filter_stationTo_show и
        trains_filter_stationFrom_show
    - do: Выбрать значение в фильтре Цены
    - assert: '* В консоли появилось событие в метрику trains_filter_priceRange_click'
    - do: Выбрать значение в фильтре Тип вагона
    - assert: >-
        * В консоли появилось событие в метрику
        trains_filter_trainTariffClass_click
    - do: Выбрать значение в фильтре Скоростные поезда
    - assert: >-
        * В консоли появилось событие в метрику
        trains_filter_highSpeedTrain_click
    - do: >-
        Снять все выбранные чекбоксы, выбрать любое из значений в фильтре Время
        во вкладке Отправление
    - assert: >-
        * При снятии фильтров в консоли появились события
        trains_filter_priceRange_click, trains_filter_trainTariffClass_click,
        trains_filter_highSpeedTrain_click

        * При выборе фильтра Время в консоли появилось событие в метрику
        trains_filter_departure_click
    - do: Снять выбранный фильтр Время
    - assert: '* В консоли появилось событие в метрику trains_filter_departure_click'
    - do: 'Перейти во вкладку Прибытие фильтра Время, выбрать любое из значений'
    - assert: '* В консоли появилось событие в метрику trains_filter_arrival_click'
    - do: В фильтре Станции во вкладке Отправление выбрать любое из значений
    - assert: '* В консоли появилось событие в метрику trains_filter_stationFrom_click'
    - do: В фильтре Станции во вкладке Прибытие выбрать любое из значений
    - assert: '* В консоли появилось событие в метрику trains_filter_stationTo_click'
    - do: В этом же фильтре выбрать еще одно значение
    - assert: '* В консоли появилось событие в метрику trains_filter_stationTo_click'
    - do: Нажать на кнопку Сбросить фильтры
    - assert: '* В консоли появилось событие trains_filter_reset_click'
    - do: >-
        Установить несколько фильтров так, чтобы на выдаче остался хотя бы один
        сниппет с кнопкой покупки
    - do: Кликнуть по кнопке покупки для любого сниппета
    - assert: >-
        * Произошел переход на страницу выбора мест

        * В консоли есть событие в метрику trains_filtersBeforeOrder: в
        параметрах для фильтров, которые были выбраны, установлено значение
        true:

        ![image](https://jing.yandex-team.ru/files/shenfeld/Vybor_mest_v_poezde_082V_Belgorod_Sankt-Peterburg_iz_Moskvy_v_Sankt-Peterburg_na_14_noyabrya__Yandeks.Puteshestviya_2018-11-13_18-19-43.png)
manual: true
Функциональность: Фильтры и сортировки
Устройство: Десктоп
Страница: Выдача
Сервис: ЖД
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Автор: shenfeld
