feature: Отели
type: Выдача
description: ''
specs:
  Взаимосвязь карты и карточек с предложениями на странице поиска отелей:
    - do: >-
        Перейти на страницу поиска отелей в Екатеринбурге, любыми датами
        заезда-выезда и любым количеством гостей
    - assert: |-
        * Открылась страница поиска отелей.
        * В выдаче отображены карточки отелей, 10 карточек
        * Под последней карточкой отеля есть кнопки "Назад" и "Далее"
        * Справа от карточек отображена карта
        * Над картой есть кнопка Развернуть карту
        * На карте есть пины с ценами
        * По-умолчанию пины синего цвета
        * В правом нижнем углу карты стоит галочка “Искать при изменении карты”
    - do: Навести курсор на любой пин на карте
    - assert: >-
        * Появился указатель-рука

        * Пин стал желтого цвета

        * Вверху над пином появилась карточка отеля

        * Карточка отеля содержит название отеля, (далее указаны параметры,
        которые могут отсутствовать) фото, рейтинг, тип размещения, кол-во
        отзывов

        * Соответствующая названию отеля карточка выделилась желтой обводкой
        (если она уместилась слева от карты)

        * Цены на пине и на выделенной карточке совпадают
    - do: 'Убрать курсор с пина, но остаться в области карты'
    - assert: >-
        * Иконка указателя сменилась:

        ![image](https://cdn1.iconfinder.com/data/icons/gesture-21/384/Fist_and_thumb-128.png)

        * Все пины синего цвета

        * Информация об отеле на карте исчезла

        * Обводка на карточке отсутствует
    - do: Навести курсор на карточку из выдачи с предыдущего шага
    - assert: >-
        * Карточка обведена желтой рамкой

        * На карте желтым стал соответствующий отелю пин и появилась информация
        о названии отеля

        * Цена и название отеля на карточке и пине совпадают

        * При наведении на разные карточки отелей карта остается на месте,
        подсвечиваются разные пины и содержимое карты не скроллится
    - do: >-
        Поводить курсором по всей области карточки (включая области ближе к
        границам)
    - assert: 'Результат такой же, как и на шаге 4.'
    - do: Перейти на следующую страницу по кнопке "Далее" внизу страницы
    - assert: >-
        * Вместо карточек отелей появился скелетон загрузки

        * Во время загрузки карточек карта остается на месте, все пины синего
        цвета

        * Спустя несколько секунд (не больше 30) на странице отобразился новый
        перечень карточек

        * Все отели на карточках не совпадают с отелями из предыдущей выдачи

        * Цены на пинах соответствуют ценам на карточках
    - do: Вновь навести на любую карточку
    - assert: Результат как и в шаге 4
    - do: >-
        Навести курсор на карту, зажать левую клавишу мыши (или соответствующую
        кнопку на трекпаде ноутбука) и потянуть карту в любую сторону так, чтобы
        из вида исчезли соответствующие пины
    - assert: >-
        * При перемещении курсор руки менялся на кулачок (должна быть видна
        анимация)

        * Пока происходит движение курсора на карте нет новых пинов и карточки
        слева не меняются

        * При остановке пролистывания карты происходит обновление пинов и
        карточек слева (через скелетоны)

        * В правом нижнем углу карты стоит галочка "Искать при изменении карты"
    - do: >-
        Снять галочку на карте “Искать при изменении карты” и проскролить карту
        в любом направлении, что бы на карте не было никаких пинов
    - assert: >-
        - Галочка “Искать при изменении карты” изменилась на кнопку "Искать в
        этом районе"

        - Карта проскролилась

        - На карте после скролла не появились пины

        - Карточки отелей слева не изменились и новые результаты не добавились
    - do: >-
        Нажать на кнопку "Искать в этом регионе"

        Если на карте не появились пины и вместо карточек надпись "Нет отелей
        подходящих под ваши пожелания", то необходимо еще сдвинуть карту и вновь
        нажать на кнопку "Искать в этом регионе"

        https://jing.yandex-team.ru/files/rifat-k/2019-12-19_14-16-17.png
    - assert: >-
        - Карта осталась на прежнем месте

        - На карте постепенно появились новые пины (возможно появление синих
        точек, без цен)

        - Слева, пока прогружались пины, вместо карточек появились скелетоны

        - Галочка в чекбоксе "Искать в этом регионе" не установилась
    - do: |-
        Вновь поставить галочку на карте “Искать при изменении карты”
        Нажать на кнопку "Развернуть карту" над картой
    - assert: |-
        - Чекбокс “Искать при изменении карты” остался активированным
        - Развернулась карта, список отелей исчез
        - На карте остались те же пины, что и до разворота
    - do: >-
        Проскролить карту в любом направлении (на 1 экран) и быстро нажать на
        кнопку Свернуть карту
    - assert: >-
        - Пока не прогрузились варианты отелей, на месте карточек отображаются
        скелетоны

        - На карте постепенно появляются пины

        - После прогрузки появляются карточки отелей, отличающиеся от предыдущей
        выдачи

        - При наведении курсора на карточку отеля загорается соответствующий пин
manual: true
Функциональность: Бронирование
Устройство: Десктоп
Страница: Выдача
Сервис: Отели
Тестирование асессорами: Да
Окружение: Testing
Tag: hotels-api
Автор: iliasova
