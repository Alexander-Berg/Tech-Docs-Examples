feature: Автобусы
type: Страница заказа
description: |
    Для воспроизведения сценария нужно приобрести 2 билета на партнера "Басфор"
    Чтобы убедиться, что рейс от Басфор - нужно проверить URL
    https://jing.yandex-team.ru/files/arhey/2022-04-18T07:44:05Z.89fb9d6.png

    Пример направлений:
    "Санкт-Петербург - Великий Новрогод",
    "Ростов-на-Дону - Москва",
    "Москва - Воронеж",

    Перейти на страницу заказа
specs:
    Автобусы. Страница заказов. Возврат одного билета:
        - assert: Находимся на странице заказа
        - do: Выбрать одного из пассажиров и сдать 1 билет
        - do: Нажать кнопку "Сдать билет"
        - assert: |
              Открылось модальное окно о подтверждении возврата
              Сумма возврата не указана
              Есть предупреждение, что операцию отменить невозможно
              https://jing.yandex-team.ru/files/arhey/2022-04-18T07:51:20Z.e7aa2f5.png
        - do: Нажать "Отменить"
        - assert: Модальное окно закрылось, билет не сдан
        - do: Снова нажать "сдать билет" и подтвердить возврат
        - assert: |
              Возврат прошел, у пассажира стоит статус "Возврат"
              Указана сумма, которая вернется пассажиру
              Кнопка, которая раньше называлась "Сдать все билеты" называется теперь "Сдать билет",
              так как остался только один несданный билет
              https://jing.yandex-team.ru/files/arhey/2022-04-18T08:03:36Z.db3f947.png
        - do: Кликнуть "Скачать чек"
        - assert: В отдельной вкладке открылся чек
        - do: Перейти в почту
        - assert: Проверить, что пришло письмо на почту о возврате и в нем тоже есть чек

manual: true
Функциональность: Возврат билета
Устройство:
    - Десктоп
    - Тач
Страница: Страница заказа
Сервис: Автобусы
Тестирование асессорами: Нет
Автор: arhey
Окружение:
    - Production
    - Testing
