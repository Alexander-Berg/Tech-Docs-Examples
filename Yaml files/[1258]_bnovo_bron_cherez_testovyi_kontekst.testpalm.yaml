feature: Отели
type: Бронирование
description: |-
  Для тестовой оплаты использовать карту
  Карта для тестовой оплаты тестовой брони: 5100002767155462
  Месяц и год: 12/22
  CVV: 454
specs:
  Бново. Бронь через тестовый контекст:
    - do: >-
        Через тестовый контекст получить ссылку на бронь со следующими
        параметрами:

        | отель Принцесса Элиза 3*

        | заезд-выезд - завтра-послезавтра

        | кол-во гостей - 2

        | политика отмены - бесплатная отмена вплоть до заезда

        | питание - только завтрак

        | имя оффера - test

        | цена 11 000
    - do: Перейти по ссылке брони
    - assert: >-
        assert: Открылась страница бронирования отеля Принцесса Элиза 3*

        | Параметры бронирования на странице соответствуют заданным на
        предыдущем шаге
    - do: 'Ввести валидные данные гостей, контактов'
    - do: Нажать Оплатить
    - assert: >-
        assert: Появился лоадер с текстом "Создание заказа Создаем заказ и
        готовимся к оплате"

        | Элементы на странице задизейблены:

        ![image](https://jing.yandex-team.ru/files/shenfeld/Yandeks.Puteshestviya__aviabilety_bilety_na_poezd_bronirovanie_otelei_2019-03-27_13-02-02.png)

        | Через какое-то время произошел переход на страницу оплаты

        |  На странице оплаты отсутствует хэдэр и футер

        | Сумма к оплате на странице оплаты совпадает с суммой при бронировании

        | Название гостиницы верное

        | Даты совпадают с выбранными, количество гостей - 2:

        ![image](https://jing.yandex-team.ru/files/rifat-k/2019-10-24_18-44-40.png)
    - do: Выбрать Новая карта и ввести данные карты из описания кейса
    - do: Кликнуть Оплатить
    - assert: >-
        assert: Вместо блока ввода данных карты появился лоадер с текстом
        "Платеж производится. Пожалуйста, подождите"

        | Далее на всю страницу появился лоадер с текстом "Оплата заказа
        Оплачиваем заказ и готовим выписку", все элементы на странице
        задизейблены

        | Через какое-то время текст поменялся на "Загрузка заказа Загружаем
        подробную информацию о заказе"

        | Далее произошел переход на хэппи пейдж
    - do: Кликнуть Подробнее о заказе
    - assert: >-
        | В блоке "Контактная информация" указаны почта и телефон, которые
        вводили ранее

        | Сумма "Стоимость отеля" совпадает с суммой на шаге бронирования

        | Даты заезда и выезда, количество ночей, данные гостей, информация о
        бесплатной отмене, тип размещения, тип питания, тип кроватей совпадают с
        информацией на шаге бронирования
manual: true
Устройство:
  - Десктоп
  - Тач
Страница: Бронирование
Сервис: Отели
Тестирование асессорами: Нет
Окружение: Testing
Tag:
  - TK
  - orkestrator
Автор: iliasova
