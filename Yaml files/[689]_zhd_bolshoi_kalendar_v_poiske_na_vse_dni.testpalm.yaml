feature: ЖД
type: Выдача
description: >-
  Календарь в поиске на все дни выглядит так:

  ![image](https://jing.yandex-team.ru/files/tyrande/Raspisanie_reisov_iz_Solikamska_v_Perm__ot_436_R__Yandeks.Raspisaniya_2017-02-13_18-57-07.jpg)

  Перейти на главную сервиса

  Перейти на вкладку Ж/Д билеты
specs:
  'ЖД: Большой календарь в поиске на все дни':
    - do: Открыть консоль браузера
    - do: >-
        Открыть выдачу Москва - Екатеринбург на все дни с прописанным событием
        для тестирования метрики ?_ym_debug=1
    - assert: >-
        * На странице над выдачей есть большой календарь

        * Календарь открыт по умолчанию

        * В календаре светло желтым выделены дни курсирования всех рейсов,
        которые есть на выдаче

        * Белым выделены дни, когда нет рейсов

        * Даты до текущей некликабельны

        * Для календаря есть кнопка "скрыть календарь"

        * Есть стрелки справа и слева от календаря для листания

        * В консоли есть событие в метрику для отображения календаря:
        trains_search_calendar_show

        * В куках есть кука для запоминания значения календаря
        (свернут/развернут) со значением true: trains_calendar_opened
    - do: Пролистать календарь на будущие месяцы
    - assert: >-
        * Листание происходит на один месяц вперед

        * Для первого листания в консоли появилось событие в метрику:
        trains_search_calendar_flip_forward
    - do: Пролистать календарь обратно к текущему месяцу
    - assert: >-
        * В консоли появилось событие в метрику
        trains_search_calendar_flip_backward
    - do: Кликнуть по кнопке "скрыть календарь"
    - assert: >-
        * Календарь закрылся

        * В консоли появилось событие в метрику:
        trains_search_calendar_user_hide

        * На месте кнопки "скрыть календарь" появилась кнопка "раскрыть
        календарь"
    - do: Открыть в новой вкладке выдачу Екатеринбург - Москва на все дни
    - assert: '* Календарь скрыт'
    - do: >-
        Вернуться на вкладку с выдачей Москва - Екатеринбург и кликнуть по
        кнопке "раскрыть календарь"
    - assert: |-
        * Календарь открылся
        * В консоли появилось событие в метрику: trains_search_calendar_show
    - do: 'Кликнуть еще раз "скрыть календарь", потом "раскрыть календарь"'
    - assert: >-
        * В консоли не появилось новых событий в метрику:
        trains_search_calendar_user_hide, trains_search_calendar_show
    - do: 'Уменьшить размер экрана, сжимая постепенно окно браузера'
    - assert: >-
        * При уменьшении размера экрана элементы календаря уменьшаются


        ![image](https://jing.yandex-team.ru/files/tyrande/Raspisanie_reisov_iz_Solikamska_v_Perm__ot_436_R__Yandeks.Raspisaniya_2017-02-13_18-57-59.jpg)
    - do: Увеличить размер экрана до нормального
    - assert: |-
        * Элементы в календаре увеличились
        * Календарь вернулся к изначальному состоянию
    - do: Навести на одну из дат курсирования
    - assert: '* Дата подсвечивается оранжевым'
    - do: Кликнуть по этой дате
    - assert: >-
        * В консоли появилось событие в метрику:
        trains_search_calendar_day_click

        * Осуществился переход на выдачу Москва - Екатеринбург для этой даты
manual: true
Функциональность: Форма поиска
Устройство: Десктоп
Страница: Выдача
Сервис: ЖД
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Автор: shenfeld
