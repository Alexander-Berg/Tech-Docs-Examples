feature: ЖД
type: Страница заказа
description: >-
  Если на выдаче нет нужного поезда, поискать на соседние даты.

  Если в поезде нет нужного класса, поискать на соседние даты.


  Кейс с покупкой для тестинга, в проде можно пройти шаги 1-6 (до
  подтверждения).


  **Для асессоров**: в тестинге намеренно пропускается шаг оплаты, переход на
  страницу заказа произойдет без ввода данных карты, это нормально.


  **Данные тестовой карты**:

  5100003697253468

  01/20

  090
specs:
  'ЖД: Покупка в купе-переговорную':
    - do: |-
        Перейти на выдачу Москва - Санкт-Петербург через месяц
        Отфильтровать выдачу по Сапсанам
        Для одного из доступных поездов-сапсанов перейти по кнопке покупки
    - assert: >-
        * Открылась страница выбора мест

        * Есть класс Купе-переговорная 1Р

        * Есть бейдж с информацией о том, что цена указана за купе целиком

        ![image](https://jing.yandex-team.ru/files/shenfeld/2019-11-15_19.15.54-8xiqa.png)


        Если нет нужного класса, посмотреть другие сапсаны
    - do: Раскрыть класс Купе-переговорная 1Р
    - assert: >-
        * Раскрылась одна схема вагона

        * Для выбора доступен блок мест "Купе-переговорная", остальные места в
        вагоне недоступны для выбора

        * Для класса нет вкладки "Пожелания к местам"

        * Под блоком мест есть указание номеров мест

        ![image](https://jing.yandex-team.ru/files/shenfeld/2019-09-30_12.34.31-5kt76.png)

        * В таче схема сразу проскроллена к купе-переговорной
    - do: Выбрать купе-переговорную
    - assert: >-
        * Купе окрасилось в желтый

        * В блоке с информацией о стоимости появилась информация о выбранном
        тарифе - взрослый, 4 места для взрослого и цена

        * Номера мест перечислены через запятую, "места" во множественном числе
    - do: >-
        Поменять пассажиров: 2 взрослых, 1 ребенок от 5 до 10, 1 ребенок до 5
        лет

        Заново выбрать купе-переговорную
    - assert: >-
        * Купе окрасилось в желтый

        * В блоке с информацией о стоимости появилась информация о выбранных
        тарифах - взрослый, взрослый, ребенок 5-10 лет, ребенок до 5 лет

        * Так как купе бронируется целиком, для каждого пассажира передаем все 4 места сразу, это нормально.
        https://jing.yandex-team.ru/files/arhey/2022-02-08T10:59:52Z.0889979.png
    - do: Кликнуть Указать пассажиров
    - assert: >-
        * Произошел переход на страницу ввода данных

        * В блоке для одного из пассажиров с местом перечислено 2 места, для
        двух других пассажиров с местом по 1 месту на пассажира, для пассажира
        без места номера места нет

        * При перечислении нескольких мест используется множественное число -
        "места", для одного места - "место"
    - do: |-
        Заполнить все поля валидными данными
        Кликнуть Проверить заказ и купить
    - assert: |-
        * Произошел переход на страницу подтверждения
        * На схеме выбрано купе-переговорная
        * Распределение мест для пассажиров соответствует предыдущим шагам
    - do: |-
        Кликнуть Ввести карту и оплатить
        Ввести данные тестовой карты из описания
        Кликнуть Оплатить
    - assert: '* Через какое-то время произошел переход на страницу хэппи пейдж'
    - do: Кликнуть по кнопке "Подробнее о заказе"
    - assert: >-
        * Произошел переход на страницу заказа

        * Распределение мест для пассажиров соответствует предыдущим шагам

        * Кнопки Сдать билет есть для каждого пассажира, кроме ребенка без места
manual: true
Функциональность: Покупка
Устройство:
  - Десктоп
  - Тач
Страница: Страница заказа
Сервис: ЖД
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Автор: shenfeld
