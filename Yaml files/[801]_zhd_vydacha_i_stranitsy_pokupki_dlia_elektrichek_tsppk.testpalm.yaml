feature: ЖД
type: Страница заказа
description: >-
  **Информация для асессоров: форма оплаты с полями ввода данных карты в
  тестинге намеренно пропускается. Шаги, где требуется ввести данные карты и
  нажать кнопку Оплатить, нужно пропустить.**


  Для оплаты в тестинге можно использовать тестовую карту.

  Например:

  Номер карты: 5100003697253468

  CVN: 090

  Дата: 12/20

  Перейти на главную сервиса

  Перейти на вкладку Ж/Д билеты
specs:
  'ЖД: Выдача и страницы покупки для электричек ЦППК':
    - do: Открыть выдачу Москва - Текстильщики на завтра
    - assert: >-
        * На выдаче есть поезд с перевозчиком ЦППК (если нет, поискать на другие
        даты или выдачи, например, Москва - Калуга, Москва - Рязань,
        Текстильщики - Заокский)

        * Сниппет с этим поездом выглядит так же, как все остальные сниппеты:
        есть номер и название маршрута, информация о компании-перевозчике, время
        и станции отправления и прибытия, время в пути, количество мест, кнопка
        покупки
    - do: Для поезда ЦППК кликнуть по кнопке покупки
    - assert: |-
        * Осуществился переход на страницу выбора мест
        * В шапке есть номер поезда соответствует номеру на выдаче
        * На странице два селекта выбора пассажиров: взрослый и детский
        * Для детского есть приписка "Билеты со скидкой для детей младше 7 лет"
    - do: Выбрать один взрослый билет и один детский
    - do: Кликнуть Указать пассажиров у любого класса обслуживания
    - do: Заполнить поля валидными данными
    - do: Кликнуть "Проверить заказ и купить"
    - assert: |-
        * Произошел переход на страницу подтверждения
        * Указан номер поезда такой же, как на выдаче
        * Все данные соответствуют введенным ранее
        * Время на оплату 14 минут или меньше
    - do: |-
        Кликнуть "Перейти к оплате"
        Ввести номер тестовой карты, кликнуть "Оплатить" (асессоры пропускают)
    - assert: |-
        * Произошел переход на хэппи пейдж
        * Указан номер поезда такой же, как был на страницах покупки
    - do: Нажать кнопку "Подробнее о заказе"
    - assert: '- Произошел переход на страницу полного заказа'
    - do: Для взрослого билета кликнуть Сдать билет
    - assert: >-
        * Появилось модальное окно для возврата

        * Есть текст: "Имейте в виду: ребенка не пустят в поезд одного.
         Восстановить покупку будет нельзя."
    - do: Нажать Подтвердить
    - assert: |-
        * Возврат осуществился
        * Ошибок нет
manual: true
Функциональность: Покупка
Устройство: Десктоп
Страница: Страница заказа
Сервис: ЖД
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Tag: Smoke
Автор: shenfeld
