feature: Отели
type: ''
description: >-
  Для генерации ошибки нужно дернуть ручку тестового контекста

  https://api.travel-balancer-test.yandex.net/api/test_context/v1/tokens?originalId=742&partnerId=PI_TRAVELLINE&occupancy=2&forceAvailability=true&cancellation=CR_PARTIALLY_REFUNDABLE&pansionType=PT_BB&offerName=test&priceAmount=11000&partiallyRefundRate=50&getOfferOutcome=OO_SUCCESS&createOrderOutcome=OO_SUCCESS&hotelDataLookupOutcome=HO_REAL&reservationOutcome=RO_SUCCESS&confirmationOutcome=CO_SUCCESS&refundOutcome=RF_UNEXPECTED_PENALTY&priceMismatchRate=2


  При ответе с кодом 200 в booking_page_url будет содержаться урл страницы
  брони.


  Для тестовой оплаты использовать карту

  Карта для тестовой оплаты тестовой брони: 5100002767155462

  Месяц и год: 12/22

  CVV: 454
specs:
  (ТЛ) Обработка ошибки при возврате:
    - do: >-
        Забронировать заказ по ссылке из описания с заездом-выездом на
        завтра-послезавтра
    - assert: |-
        assert: Произошел переход на хэппи пейдж
        assert: На странице есть кнопка Отменить бронирование
        | Кнопка кликабельна
    - do: Кликнуть по кнопке Отменить бронирование
    - do: В раскрывшемся попапе кликнуть Отменить бронирование
    - assert: >-
        assert: Появился лоадер с текстом “Загрузка заказа Загружаем подробную
        информацию о заказе”

        | Далее открылась страница ошибки при возврате

        | Заголовок ошибки Не получилось отменить бронирование

        | Далее указан номер поддержки и номер заказа в формате
        YA-XXXX-XXXX-XXXX

        | Ниже отображается информация об отеле:

        | Название - Вега Измайлово

        | Адрес и рейтинг

        | Даты заезда и выезда - завтра и послезавтра

        | Кол-во гостей - 2

        | Название оффера - test

        | Информация про питание - Завтрак включен

        | Информация про кровати

        | Справа от названия отеля есть фото отеля

        | Под фото название отеля от партнера и ссылка Описание отеля от
        партнера
    - do: Кликнуть по ссылке Описание отеля от партнера
    - assert: |-
        assert: Открылся модал
        | Модал содержит название отеля, фото, карту и описание от партнера
        | Вверху модала есть крестик для закрытия
    - do: Кликнуть по крестику над модалом
    - assert: 'assert: Модал закрылся'
manual: true
Устройство:
  - Десктоп
  - Тач
Сервис: Отели
Тестирование асессорами: Нет
Окружение: Testing
Tag:
  - TK
  - orkestrator
  - Blocker
Автор: iliasova
