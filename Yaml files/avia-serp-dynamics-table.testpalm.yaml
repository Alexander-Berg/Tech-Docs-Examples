feature: Авиа
type: Выдача
description: ''
specs:
  'Таблица цен в Динамике цен':
    - do: 'Открыть главную страницу Путешествий, вкладка Авиабилеты'
    - do: |-
        Заполнить форму поиска билетов
        Откуда: Москва
        Куда: Кейптаун
        Туда: 5 число следующего месяца
        Обратно: любое другое число следующего месяца, для которого нет цены в календаре
        Пассажиры: 1 взрослый
        Класс: Эконом
    - do: Нажать кнопку "Найти"
    - assert: >-
        Открылась страница выдачи.
        https://jing.yandex-team.ru/files/gouken67/1442_1_desktop.png

        В блоке 7 кнопок с ценами: кнопка для текущего дня и 6 кнопок за +- 3 ближайших дня.

        Цены на кнопках постепенно меняются на более дешёвые.
    - do: |-
        Дождаться, когда на всех кнопках будут получены точные цены (без значка ~).
        Кликнуть по Смотреть весь календарь.
    - assert: |-
        Открывается окно Динамики цен.
        Выбрана вкладка Таблица цен. Клетка, соответствующая датам Туда-Обратно на выдаче, выделена жёлтым цветом.
        Происходит обновление цен для промежутков, на которые цена была неизвестна (лежат по диагонали от выделенной клетки), а также на 6 дополнительных клеток вокруг жёлтой.

        https://jing.yandex-team.ru/files/gouken67/1443_3.png
    - do: Проскроллить Таблицу цен стрелочками вниз и вправо
    - assert: Таблица цен проскроллилась на 1 столбец вправо и на 1 строку вниз
    - do: Проскроллить Таблицу цен стрелочками вверх и влево
    - assert: Таблица цен проскроллилась на 1 столбец влево и на 1 строку вверх
    - do: Кликнуть по клетке со значком лупы
    - assert: Значок лупы меняется на жёлтый спиннер. Через какое-то время появляется цена, характерная для выбранного периода времени Туда-Обратно.
    - do: |
        Доскроллить строки и столбцы случая, когда Туда = Обратно
        https://jing.yandex-team.ru/files/gouken67/Diagonal.png
    - assert: Под клеткой сегодняшнего дня отображается столбец из серых клеток с '-'. Серые клетки заполняют всё пространство под диагональю совпадающих Туда-Обратно

    - do: Кликнуть по клетке с уже известной ценой
    - assert: |-
        Осуществляется переход на выдачу Москва - Кейптаун для выбранного дня.
        Самая дешёвая цена на выдаче совпадает с тем, что было указано на кнопке в блоке Динамики цен.
manual: true
Функциональность: Динамика
Устройство:
    - Десктоп
Страница: Выдача
Сервис: Авиа
Тестирование асессорами: Да
Окружение:
    - Testing
    - Production
Автор: gouken67
