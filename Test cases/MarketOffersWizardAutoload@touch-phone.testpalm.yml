feature: Маркет. Офферный колдунщик
type: Бесконечная карусель

specs:
  Внешний вид:
    - params:
        foreverdata: '945016434'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: в выдаче есть колдунщик Маркета
    - screenshot: внешний вид [plain]
    - do: проскроллить до конца карусели
    - assert: в конце карусели должна быть карточка-лоадер (карточка без наполнения)
    - screenshot: внешний вид [loader]
    - do: подождать дозагрузки карточек
    - assert: |
        появились новые карточки
        наполнение дозагруженных карточек может отличаться от дозагруженных карточек на скриншотах
    - do: проскроллить до конца карусели
    - assert: в конце карусели есть карточка "Ещё предложения"
    - screenshot: внешний вид [full]

  Дозагрузка без скролла, когда пришло 3 карточки и меньше:
    - params:
        foreverdata: '3298921152'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: в выдаче есть колдунщик Маркета с карточкой-лоадером (карточка без наполнения)
    - screenshot: внешний вид [loader]
    - do: подождать исчезновения карточки-лоадера
    - assert: карточка-лоадер исчезла
    - screenshot: внешний вид [loaded]

  Если карточек изначально больше двух, isTheEnd=true - показываем кнопку "Еще предложения":
    - params:
        foreverdata: '3901188321'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: в результатах поисковой выдачи присутствует колдунщик Маркета, в конце есть кнопка "Еще предложения"
    - screenshot: внешний вид [with-more-arrow]

  Если карточек изначально две, isTheEnd=true - не показываем кнопку "Еще предложения":
    - params:
        foreverdata: '1074095947'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: в результатах поисковой выдачи присутствует колдунщик Маркета, в конце нет кнопки "Еще предложения"
    - screenshot: внешний вид [without-more-arrow]

  Бесконечная карусель, ссылка с бэка:
    - params:
        foreverdata: '1650512788'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: в выдаче есть колдунщик Маркета
    - screenshot: внешний вид [plain]

files:
  - src/features/Market/Market.features/MarketOffersWizard/MarketOffersWizard.test/MarketOffersWizardAutoload@touch-phone.hermione.js

v-team: Goods

tlds: [ru]

tags:
  - react
