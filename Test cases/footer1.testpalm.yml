feature: Старый подвал/сообщение о медленном интернете

params:
  exp_flags:
    - beauty_footer=old

specs:
  Проверка ссылок:
    - do: получить выдачу по запросу 'test'
    - screenshot: внизу страницы присутствует подвал [footer/default/with-beauty_footer_old-flag-36-{{PLATFORM}} >> plain]
    - assert: hermione [footer/default/with-beauty_footer_old-flag-36-{{PLATFORM}} >> plain]
    - tech: hermione [footer/default nosvg]
    - assert: футер содержит ссылки 'Войти в почту', 'Все сервисы', 'Обратная связь', 'Яндекс'
    - do: нажать на ссылку 'Яндекс'
    - assert: открылась главная страница Яндекса
    - tech: сверяем счётчик ссылки логотипа Яндекса
    - do: нажать на ссылку 'Все сервисы'
    - assert: открылась страница с другими сервисами Яндекса
    - tech: сверяем счётчик ссылки 'Все сервисы'
    - do: нажать на ссылку 'Обратная связь'
    - assert: открылась страница службы поддержки
    - tech: сверяем счётчик ссылки 'Обратная связь'
    - tech: сверяем счётчик ссылки 'Войти в почту'
  Локализация:
    - automation: SERP-74693
    - tags: no_assessors
    - do: установить в настройках Яндекса английский язык
    - do: получить выдачу по запросу 'test'
    - screenshot: подвал на английском [footer/default_lang_en/with-beauty_footer_old-flag-37-{{PLATFORM}} >> plain]
    - assert: ссылки 'Войти в почту', 'Все сервисы', 'Обратная связь' правильно отображаются на английском
  Отсутствует переключатель при быстром соединении:
    - tags: no_assessors
    - do: получить выдачу по запросу 'test' на соединении больше или равно 3G
    - assert: переключатель и сообщение отсутствуют для быстрых соединений
  Присутствует переключатель при медленном соединении для touch-устройства:
    - tags: no_assessors
    - do: получить выдачу по запросу 'test' с флагом '&flag=user_connection=slow_connection=1' или включить 2G интернет в телефоне
    - assert: присутствует переключатель обратно на обычную версию поиска (в верхней части футера зеленая кнопка), кнопка кликабельна
    - assert: после клика в зеленую кнопку переключателя, загружается страница с другим футером, с картинкой или темно-серый, и в url добавляется параметр lite=0
    - tech: сверяем счётчик ссылки переключателя на web4
    - screenshot: подвал с сообщением о медленном интернете [footer/slow-connection/with-beauty_footer_old-flag-38-{{PLATFORM}} >> plain]
  Отсутствует переключатель при медленном соединении для smart-устройства:
    - tags: no_assessors
    - do: получить выдачу по запросу 'test' с флагом '&flag=user_connection=slow_connection=1' или включить 2G интернет в телефоне
    - assert: переключателя нет для старых телефонов, Firefox, Opera Mini, все браузеры на Android <= 4 или Android Browser < 4.4 вне зависимости от скорости соединения
  Присутствует переключатель при режиме экономии трафика для touch-устройства:
    - automation: SERP-74693
    - tags: no_assessors
    - do: получить выдачу по запросу 'test' с включённым в браузере режимом экономии трафика
    - assert: присутствует переключатель обратно на обычную версию поиска (в верхней части футера зеленая кнопка), кнопка кликабельна
    - assert: после клика в зеленую кнопку переключателя, загружается страница с другим футером, с картинкой или темно-серый, и в url добавляется параметр lite=0
    - tech: сверяем счётчик ссылки переключателя на web4
    - screenshot: подвал с сообщением о режиме экономии трафика [footer/save-data/with-beauty_footer_old-flag-39-{{PLATFORM}} >> plain]

files:
  - hermione/test-suites/touch-phone/footer1.hermione.js

priority: high

v-team: Beauty

tags:
  - footer
  - smoke_extended
  - smart

tlds: none
