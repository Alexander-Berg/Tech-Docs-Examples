feature: Колдунщик новостей
type: Рубричный

specs:
  params:
    foreverdata: '297072687'
  beforeEach:
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче есть колдунщик новостей
    - screenshot: внешний вид [news_rubric-{{PLATFORM}} >> newsRubric]
  Внешний вид:
    - label: news_rubric-{{PLATFORM}}
    - screenshot: проверить внешний вид [newsRubric]
    - assertMetrics: '*'
  Заголовок:
    - do: нажать на ссылку в заголовке колдунщика
    - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news" @subtype="rubric"]/title'
    - assert: в новой вкладке открылись 'Яндекс Новости'
    - assertMetrics: '*'
  1ая новость:
    Тумба:
      - do: нажать на картинку первой новости
      - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news" @subtype="rubric"]/item/thumb'
      - assert: в новой вкладке открылся сайт выбранной новости
      - assertMetrics: '*'
  2ая новость:
    Тумба:
      - do: нажать на картинку второй новости
      - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news" @subtype="rubric"]/item/thumb'
      - assert: в новой вкладке открылся сайт выбранной новости
      - assertMetrics: '*'
    Заголовок:
      - do: нажать на заголовок второй новости
      - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news" @subtype="rubric"]/item/link'
      - assert: в новой вкладке открылся сайт выбранной новости
      - assertMetrics: '*'
    Хост:
      - do: нажать на хост ссылку под заголовком второй новости
      - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news" @subtype="rubric"]/item/path/host'
      - assert: в новой вкладке открылся сайт выбранной новости
      - assertMetrics: '*'
  Ссылка на все новости:
    - do: нажать на ссылку 'Читать все новости'
    - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news" @subtype="rubric"]/all'
    - assert: в новой вкладке открылись 'Яндекс Новости'
    - assertMetrics: '*'

files:
  - features/news/news_rubric@deskpad.hermione.js

tags:
  - reviewed
  - news
  - smoke
  - skip_e2e_check # выключили в проде

v-team: Freshness

counter: /$page/$main/$result[@wizard_name="news" and @subtype="rubric"]

tlds:
  - ru
  - by
  - ua
  - kz
  - uz
