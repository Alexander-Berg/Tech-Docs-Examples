feature: Страница баскетбольного матча

specs-integration:
  содержит рекламные блоки и ленту новостей:
    - do: перейти на страницу хоккейного матча по клику на матч
    - assert: |
        новостные карточки спорта отображаются под блоками,
        в новостой ленте присутствуют рекламные блоки
    - do: кликнуть на любую рубрику в рубрикаторе
    - assert: |
        происходит переход в выбранную рубрику,
        в рубрикаторе выделена выбранная рубрика

  содержит Новости баскетбола:
    - do: кликнуть на вкладку Вчера или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 апреля 2021
    - assert: открыт список матчей за вчера (или за 5 апреля)
    - do: перейти на страницу баскетбольного матча кликом на любой матч
    - assert: под баскетбольным виджетом страница матча содержит новостные карточки
    - do: проскроллить страницу матча до лоадера
    - assert: загружаются новые карточки
    - do: проскроллить страницу на несколько порций карточек
    - assert: новостной блок помимо новостных карточек может содержать карточки с каруселями видео и рекламные блоки (карусели видео могут отсуствовать)
    - do: кликнуть по заголовку или картинке любой новостной карточки
    - assert: в этой же вкладке открывается страница сюжета
    - do: вернуться назад на страницу баскетбольного матча

  может переключать федерации в блоке Турнирная таблица:
    - do: тапнуть по переключателю Запад в блоке Турнирная таблица
    - assert: |
        с анимацией отобразился состав западной федерации,
        в блоке с переключателем выделен Запад

specs:

  aliases:
    &goTo
      - do: открыть главную страницу сервиса Я.Спорт
      - do: тапнуть на Матч-центр в рубрикаторе
      - do: тапнуть на Баскетбол
      - assert: |
          произошел переход в матч-центр,
          в рубрикаторе выделена рубрика Матч-центр,
          в подрубрикаторе выделена вкладка Баскетбол и открыт баскетбольный календарь на вкладке Сегодня,
          в календаре присутствует дата-пикер https://jing.yandex-team.ru/files/an-smirn0v/shot_210429_150304.png ,
          обртите внимание! если матчей нет ни вчера, ни сегодня, ни завтра - ни одна вкладка календаря не будет выделена, а будет заглушка о том, что событий не найдено - это ок, заводить на такое баги не нужно! если матчи есть вчера - будет выделена вкладка "Вчера"

  может содержать несколько блоков о матче [manual]:
    - reasonNotToAuto:
      - Скриншоты этих блоков повторно не нужны, т.к. они уже сделаны в соседних тестах.
    - *goTo
    - do: кликнуть на вкладку Вчера или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2021
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: кликнуть на любой баскетбольный матч
    - assert: |
        страница матча содержит баскетбольный виджет,
        также страница матча может содержать блоки "Турнирная таблица", "Другие матчи",
        под всеми блоками отображается блок с бесконечной лентой новостей с заголовком "Новости баскетбола"

  из списка прошедших матчей содержит баскетбольный виджет:
    - *goTo
    - do: тапнуть на вкладку Вчера или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 апреля 20201
    - assert: открыт список матчей за вчера (или за 5 апреля)
    - do: перейти на страницу баскетбольного матча тапом на матч со счетом
    - assert: |
        страница матча содержит баскетбльный виджет,
        виджет содержит название чемпионата, статус матча, для завершенных матчей - дату завершения, названия команд, счет,
        при победе по буллитам или в овертайме виджет содержит соответствующее указание под названием лиги,
        счет и название команды-победителя выделено жирным шрифтом,
        скрин https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-29%20в%2014.57.55.png

  из блока 'Завтра' содержит баскетбольный виджет [manual]:
    - reasonNotToAuto:
      - Нет возможности автоматизировать, т.к. во внутренних функциях берется не время запроса из данных, а new Date(), поэтому "завтра" становится "сегодня" на следующий день, а тест падает.
    - *goTo
    - do: тапнуть на вкладку Завтра
    - do: перейти на страницу баскетбольного матча тапом на матч в разделе 'Завтра' (если раздела нет - открыть другую будущую дату в календаре, например - 14 января 2022)
    - assert: |
        страница матча содержит баскетбольный виджет,
        виджет содержит название чемпионата, названия команд, время начала матча, надпись 'Завтра' (либо дату, за которую вы открыли матч),
        скрин https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-29%20в%2014.59.12.png

  из списка прошедших матчей может содержать турнирную таблицу:
    - *goTo
    - do: тапнуть на вкладку Вчера или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 апреля 2021
    - assert: открыт список матчей за вчера (или за 5 апреля)
    - do: перейти на страницу баскетбольного матча тапом на матч со счетом
    - assert: |
        под баскетбольным виджетом может содержаться блок 'Турнирная таблица' (если в данном матче блока нет, открыть другой матч),
        если есть вкладки групп - по умолчанию открыта вкладка той группы, к которой относятся команды данного матча,
        команды данного матча выделены жирным шрифтом,
        верстка таблицы корректна,
        скрин https://jing.yandex-team.ru/files/an-smirn0v/shot_210429_153303.png
    - do: попереключать вкладки групп в таблице (если есть)
    - assert: вкладки переключаются, отображается новый список команд

  из списка прошедших матчей может содержать блок Другие матчи:
    - *goTo
    - do: тапнуть на вкладку Вчера или если вчера матчей не было тапнуть на дата-пикер и установить дату 21 апреля 2021
    - assert: открыт список матчей за вчера (или за 21 апреля)
    - do: перейти на страницу баскетбольного матча тапом на матч со счетом
    - do: поскроллить матч ниже блока 'Турнирная таблица'
    - assert: |
        страница матча может содержать блок 'Другие матчи' (если в данном матче блока нет, открыть другой матч),
        блок содержит названия и лого команд, время, дату, счет (в зависимости от того прошел матч или нет),
        обратите внимание! время в блоке 'Другие матчи' отображается только для предстоящих матчей, для прошедших - дата или 'Вчера' (редко - 'Сегодня', если матч закончился сегодня),
        внизу есть кнопка 'Все матчи',
        верстка блока корректна,
        скрин https://jing.yandex-team.ru/files/an-smirn0v/shot_210429_154028.png
    - do: тапнуть на любой матч в блоке 'Другие матчи'
    - assert: в той же вкладке открывается страница выбранного матча
    - do: вернуться назад
    - do: тапнуть на 'Все матчи'
    - assert: в той же вкладке открывается страница баскетбольного календаря

files:
  - features/sport/event/basketballEvent.phone.hermione.js
  - features/sport/event/basketballEvent.phone.hermione.e2e.js

tags:
  - sport-neo
  - event

manager: mrwhite

qa-engineer: an-smirn0v

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
