feature: Редактор OEBS-флагов

specs:
  Редактирование OEBS-флагов:
    Положительные:
      beforeEach:
        - do: залогиниться пользователем robot-internal-003
        - do: открыть страницу сервиса, в котором этот пользователь является руководителем (/services/<service-slug>?exp_flags=oebs)
        - do: кликнуть на карандаш рядом с названием и статусом сервиса
        - assert: появился попап с несколькими вкладками
        - do: кликнуть на вкладку "OEBS"
        - assert: открылась форма с чекбоксами
      Значения флагов правильно проставляются в чекбоксах:
        - assert: чекбоксы предзаполнены определенными значениями
      Владелец сервиса может редактировать флаги:
        - assert: чекбоксы не задизейблены
        - assert: под чекбосами нет синей плашки с сообщением
      Проверка возможных сочетаний значений чекбоксов:
        - assert: все чекбоксы изначально пустые
        - do: кликнуть на чекбокс "Используется в HR"
        - assert: проставлены галочки в чекбоксах "Используется в HR" и "Используется в Выручке"
        - do: кликнуть на чекбокс "Используется в Закупках"
        - assert: проставлены галочки во всех чекбоксах
        - do: кликнуть на чекбокс "Используется в Закупках"
        - assert: проставлены галочки в чекбоксах "Используется в HR" и "Используется в Выручке"
        - do: кликнуть на чекбокс "Используется в Закупках"
        - assert: все чекбоксы пустые
        - do: кликнуть на чекбокс "Используется в Выручке"
        - assert: проставлены галочки в чекбоксах "Используется в Выручке" и "Используется в Закупках"
        - do: кликнуть на чекбокс "Используется в HR"
        - assert: проставлены галочки во всех чекбоксах
        - do: кликнуть на чекбокс "Используется в HR"
        - assert: проставлены галочки в чекбоксах "Используется в Выручке" и "Используется в Закупках"
        - do: кликнуть на чекбокс "Используется в Закупках"
        - assert: проставлена галочка в чекбоксе "Используется в Выручке"
        - do: кликнуть на чекбокс "Используется в HR"
        - assert: проставлены галочки в чекбоксах "Используется в HR" и "Используется в Выручке"
        - do: кликнуть на чекбокс "Используется в HR"
        - assert: проставлена галочка в чекбоксе "Используется в Выручке"
        - do: кликнуть на чекбокс "Используется в Закупках"
        - assert: проставлены галочки в чекбоксах "Используется в Закупках" и "Используется в Выручке"
        - do: кликнуть на чекбокс "Используется в Выручке"
        - assert: все чекбоксы пустые
        - do: кликнуть на чекбокс "Используется в Выручке"
        - assert: проставлена галочка в чекбоксе "Используется в Выручке"
        - do: кликнуть на чекбокс "Используется в Выручке"
        - assert: все чекбоксы пустые
        - do: кликнуть на чекбокс "Используется в Выручке"
        - do: кликнуть на чекбокс "Используется в Закупках"
        - do: кликнуть на чекбокс "Используется в HR"
        - assert: проставлены галочки во всех чекбоксах
        - do: кликнуть на чекбокс "Используется в Выручке"
        - assert: все чекбоксы пустые
    Отрицательные:
      Обычный участник сервиса с полной ролью не может редактировать флаги:
        - do: залогиниться пользователем robot-internal-003
        - do: открыть страницу сервиса, в котором этот пользователь является обычным участником (/services/<service-slug>?exp_flags=oebs)
        - do: кликнуть на карандаш рядом с названием и статусом сервиса
        - assert: появился попап с несколькими вкладками
        - do: кликнуть на вкладку "OEBS"
        - assert: открылась форма с чекбоксами
        - assert: все чекбоксы задизейблены
        - assert: |
            под чекбоксами есть голубая плашка с сообщением:
            "Изменениями в Главной книге OEBS управляет руководитель сервиса"
      Пользователь с ограниченной ролью не может редактировать флаги:
        - do: залогиниться пользователем robot-abc-003
        - do: открыть страницу сервиса, в котором этот пользователь является обычным участником (/services/<service-slug>?exp_flags=oebs)
        - do: кликнуть на карандаш рядом с названием и статусом сервиса
        - assert: появился попап с несколькими вкладками
        - do: кликнуть на вкладку "OEBS"
        - assert: открылась форма с чекбоксами
        - assert: все чекбоксы задизейблены
        - assert: |
            под чекбоксами есть голубая плашка с сообщением:
            "Изменениями в Главной книге OEBS управляет руководитель сервиса"

files: 
  - test/features/desktop/service/oebs-editor.test.tsx

tags:
  - automation_unit
  - no_assessors
