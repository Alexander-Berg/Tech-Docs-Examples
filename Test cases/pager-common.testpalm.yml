feature: 'Пейджер'
type: 'не пустая выдача'

specs:
  Обязательные проверки:
    - params:
        exp_flags: distr_splashscreen_disable=1
    - do: получить выдачу по запросу 'test'
    - assert: на странице присутствует пейджер (переключатель страниц)
    - screenshot: на экране пейджер (переключатель страниц) [pager/first-page-20-{{PLATFORM}} >> plain]
    - tech: в url в адресной строке должен отсутствовать параметр 'p=...'
    - tech: проверить ссылку на кнопке 'дальше'
    - tech: проверить счетчик на ссылке 'дальше'
    - do: кликнуть по ссылке 'дальше' в пейджере
    - assert: поисковая выдача обновилась, в пейджере цветом выделена цифра '2'
    - tech: в url в адресной строке должен быть параметр p=1
    - tech: проверить ссылку на кнопке '4'
    - tech: проверить счетчик на ссылке '4'
    - do: кликнуть по цифре '4' в пейджере
    - assert: поисковая выдача обновилась, в пейджере выделена цветом цифра '4' и появилась новая ссылка 'В начало'
    - screenshot: на экране пейджер со ссылкой 'В начало' [pager/fifth-page-21-{{PLATFORM}} >> plain]
    - tech: в url в адресной строке должен быть параметр p=3
    - tech: проверить ссылку на кнопке 'В начало'
    - tech: проверить счетчик на ссылке 'В начало'
    - do: кликнуть по ссылке 'В начало' в пейджере
    - assert: поисковая выдача обновилась, в пейджере выделена цифра '1', ссылка 'В начало' исчезла
    - tech: в url в адресной строке должен быть параметр p=0
    - do: открыть 24 страницу выдачи, чтобы не листать страницы, можно изменить в адресной строке браузера параметр 'p', так чтобы он стал '&p=23'
    - assert: поисковая выдача обновилась, в пейджере выделена цифра '24'
    - tech: проверить ссылку на кнопке '25'
    - tech: проверить счетчик на ссылке '25'
    - do: кликнуть по ссылке '25' в пейджере
    - assert: поисковая выдача обновилась, в пейджере выделена цифра '25'
    - tech: в url в адресной строке должен быть параметр p=24
    - do: в нижней части страницы, кликнуть в первую ссылку под заголовком 'Вместе с «test» ищут'
    - assert: поисковая выдача обновилась, в пейджере выделена цифра '1'
    - tech: в url в адресной строке не должно быть параметра p

files:
# - features/desktop/pager.autogenerated.hermione.js
  - features/desktop/pager/pager-common.hermione.js

priority: high

v-team: Beauty

tags:
  - pager
  - footer
  - button
  - ajax
  - smoke
  - smoke_extended
  - smart_tv

tlds: none
