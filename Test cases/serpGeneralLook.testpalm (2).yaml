feature: Поезда
type: Выдача
description: Общий вид сниппетов в таче

specs:
    Общий вид сниппетов в таче - шапка:
        - do: Открыть выдачу Москва - Санкт-Петербург через месяц
        - assert: |
            Открылась страница поиска
            Вверху страницы в шапке есть логотипы Яндекса и Путешествий, иконка плюса, избранного и бургер
            Ниже есть краткая форма поиска
            В ней указано Москва - Санкт-Петербург, дата поиска (соответствует той, на какую искали), есть иконка "лупа" для запуска поиска
            Справа от краткой формы поиска отображается кнопка раскрытия фильтров
            Ниже расположены сниппеты

    Общий вид сниппетов в таче - время, футер:
        - do: Открыть выдачу Москва - Санкт-Петербург через месяц
        - assert: |
            Страница скроллится плавно, без рывков (no_autotest)
            Для первого сниппета над временем указана дата отправления и прибытия
            Для последующих сниппетов дат нет (дата есть, только если она не совпадает с датой, указанной для первого сниппета)
            Если есть рейсы с отправлением в пределах 4 часов от даты поиска, они отображаются под линией перехода суток (отметка с со следующей датой)
            Внизу страницы закреплена кнопка Фильтры, при скролле кнопка остается внизу экрана
            Внизу под последним сниппетом есть блок с информацией - ссылка на рейсы обратно на ту же дату, текст "Стоимость билетов указана с учетом комиссии Яндекса"
            Ниже есть блок с хлебными крошками
            Ниже есть футер со ссылками

    Общий вид сниппетов в таче - сегмент подробно:
        - do: Открыть выдачу Москва - Санкт-Петербург через месяц
        - assert: |
            На сниппете вверху есть номер поезда. Значок ЭР (электронная регистрация), если доступна. Значок ДЦ (динамическое ценообразование) - может быть не на всех сниппетах
            В правом верхнем углу значок ?
            Время отправления, приписка местное, вокзал отправления
            Время прибытия, время по мск, вокзал прибытия
            Время в пути
            Варианты размещения, количество мест и их стоимость с припиской "от" (например, плацкарт 212, от 2329 р)
            Кнопка "Выбрать место" (может не быть для некоторых сниппетов)
            Название поезда, если есть (например фирменный "Тюмень", двухэтажный и т.п. - https://jing.yandex-team.ru/files/shenfeld/2019-09-16_15.46.50-xkmkd.png)

    Общий вид сниппетов в таче - редиректы:
        - do: Открыть выдачу Москва - Санкт-Петербург через месяц
        - do: Тапнуть по кнопке "Выбрать место" на любом сниппете
        - assert: Открывается страница выбора мест
        - do: Тапнуть на этап "Выбор поезда"
        - assert: Открывается выдача со сниппетами

    Общий вид сниппетов в таче - отельный кросс-сейл:
        - do: |
            **Не для асессоров**
            Залипнуть в эксп KOMOD_trains_search_hotels_cross_sale:enabled
            Открыть выдачу Москва - Санкт-Петербург через месяц
            Дождаться загрузки сниппетов
            Проскроллить до скелетона кросс-сейла через 5 сниппетов
            Подождать загрузки карты
        - assert: |
            Отображается карта с отелями
            На карте отображаются маркеры отелей

files:
    - tests/touch/trains/serp/serpGeneralLook.hermione.ts

tags: smoke

# meta
Сервис: ЖД
Устройство:
    - Тач
Функциональность: Форма поиска
Окружение:
    - Production
    - Testing
Тестирование асессорами: Да
