feature: ЖД
type: Страница заказа
description: >-
  Проверяется случай, когда до начала возврата произошла ошибка (у нас на
  бекенде или на стороне ИМ).


  **Информация для асессоров: форма оплаты с полями ввода данных карты в
  тестинге намеренно пропускается. Шаги, где требуется ввести данные карты и
  нажать кнопку Оплатить, нужно пропустить.**

  Перейти на главную сервиса

  Перейти на вкладку Ж/Д билеты


  До прохождения тест-кейса необходимо создать заказ для одного пассажира. Можно
  использовать выдачу Москва - Екатеринбург или любую другую.


  Для этого:


  * Зайти на выдачу

  * Кликнуть по кнопке покупки (кнопка может называть по разному, сейчас -
  “Выбрать место”)

  * Дальше следовать по страницам покупки

  * На странице успешного заказа (хэппи пейдж) кликнуть по кнопке "Подробнее о
  заказе"


  Для заполнения форм на странице оплаты использовать тестовую карту:,

  Номер карты: 5100003697253468

  CVN: 090

  Дата: 01/20
specs:
  'ЖД: Отображение ошибки, когда до возврата или смены статуса ЭР что-то пошло не так':
    - do: |-
        Для созданного заказа находимся на странице заказа
        Открыть консоль браузера, сетевые запросы (Network)
    - do: Кликнуть по кнопке Сдать билет
    - assert: '* Открылось модальное окно возврата'
    - do: |-
        Во вкладке Network установить галку Offline
        Ввести код из смс
        Кликнуть Подтвердить
    - assert: '* Появилось модальное окно с ошибкой "Не удалось выполнить операцию"'
    - do: |-
        Отключить режим Offline
        Кликнуть по кнопке Перезагрузить страницу
    - assert: '* Открылась страница заказа'
    - do: >-
        Кликнуть по кнопке Отменить электронную регистрацию (открывается по
        клику на иконку гамбургера, рядом с кнопками Скачать и Распечатать)
    - assert: '* Открылось модальное окно'
    - do: |-
        Установить режим Offline в браузере
        Кликнуть Подтвердить
    - assert: '* Появилось модальное окно с ошибкой “Не удалось выполнить операцию”'
    - do: |-
        Отключить режим Offline
        Кликнуть по кнопке Вернуться на главную
    - assert: '* Осуществился переход на главную страницу Путешествий'
manual: true
Функциональность: Действия с заказом
Устройство: Десктоп
Страница: Страница заказа
Сервис: ЖД
Тестирование асессорами: Да
Окружение: Testing
Автор: shenfeld
