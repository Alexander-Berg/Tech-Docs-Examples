feature: Объектный ответ
type: Оценки фильмов

counter: /$page/$parallel/$result[@wizard_name="entity_search"]/tabs/main/object-badge/ratings-list/stars/about

specs-integration:
  Вопрос в карточке рядом со звездами:
    - do: получить выдачу по запросу 'квантовый скачок'
    - assert: в карточке фильма есть блок Оценки фильма со звездами 
    - do: нажать на любую звезду и обновить страницу
    - assert: страница обновилась, есть карточка фильма с выставленной ранее оценкой и блоком "Ваша Оценка"
    - do: кликнуть по вопросу рядом с заголовком "Ваша оценка"
    - assert:  |
           появился попап
           в попапе есть ссылка на Личный кабинет в тексте и кнопка Мои рекомендации

params:
  srcrwr:
    - ENTITYSEARCH:man2-1293.search.yandex.net:17238:5000
    - APP_HOST:man1-0134.search.yandex.net:32335
    - NOAPACHE_ADJUSTER:palantir.search.yandex.net:10120
    - UPPER_INT:palantir.search.yandex.net:10120
    - BLENDER:palantir.search.yandex.net:10123
  app_host_path:
    - film-catalog=/_json/mrv-film-catalog
    - entity=/_json/mrv-entitysearch

specs:
  Внешний вид рейтинга на разных ширинах правой колонки:
    - do: получить выдачу по запросу 'фея фильм 2020'
    - assert: |
        появилась карточка фильма,
        в карточке есть рейтинг
    - screenshot: внешний вид рейтинга в карточке [ratings]
    - do: установить размер экрана 1230x1200
    - screenshot: внешний вид [ratings-cols-10]
    - do: установить размер экрана 1130x1200
    - screenshot: внешний вид [ratings-cols-8]
    - do: установить размер экрана 1030x1200
    - screenshot: внешний вид [ratings-cols-6]
    - assertMetrics: '*'
  Корректно синхронизируется оценка в правой и левой колонке:
    - params:
        srcskip: 'YABS_DISTR'
        foreverdata: '2776212809'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: |
        появилась карточка фильма,
        в карточке есть рейтинг
        появилась левая колонка с трейлером,
        в левой колонке под трейлером есть рейтинг
    - do: снять проставленную оценку, нажав "Отменить" в карточке фильма
    - assert: |
        скрылся проставленный в карточке фильма рейтинг,
        появились звезды с возможностью установки нового рейтинга в карточке фильма,
        в то же время скрылся проставленный в левой колонке рейтинг,
        появились звезды с возможностью установки нового рейтинга в левой колонке

files:
  - features/desktop/z-entity-search/likes/likes.hermione.js
  - features/desktop/z-entity-search/likes/likes.hermione.e2e.js

v-team: Video

tags:
  - reviewed
  - oo_rating

tlds:
  - ru
  - by
  - kz
  - ua
