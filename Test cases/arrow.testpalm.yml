feature: Поисковая стрелка

specs:
  beforeEach:
    - do: получить выдачу по запросу 'test'
    - assert: на экране появилась поисковая выдача, вверху видна поисковая стрелка
    - screenshot: на экране появилась поисковая стрелка яндекса [header/index-9-{{PLATFORM}} >> plain]
  Проверка BackSpace:
    - tags: smart_tv
    - do: дописать в поле запроса 'qz', не нажимая кнопку Найти
    - do: нажать BackSpace на клавиатуре
    - assert: в поле запроса осталось только 'testq'
    - do: кликнуть кнопку "Найти"
    - assert: выдача обновилась, видны результаты по запросу 'testq'
    - tech: hermione [header/index-9-{{PLATFORM}} >> button-pressed]
  Очистка инпута:
    - tags: smart_tv
    - do: ввести в поле запроса 'скачать фильм'
    - do: кликнуть на крестик в правой части поля запроса
    - assert: поле запроса очистилось
  Выполняется перезапрос с другим запросом:
    - tags: smart_tv
    - do: ввести в поле запроса 'testqz'
    - do: кликнуть кнопку 'Найти'
    - tech: проверить счётчик кнопки найти
    - assert: поисковый запрос в строке поиска 'testqz', выдача обновилась
    - tech: значение параметра 'text' в URL изменилось
  Запрос меняется при переходе по кнопке браузера 'назад':
    - tags: smart_tv
    - do: ввести в поле запроса 'testqz'
    - assert: в поисковой строке появились вводимые с клавиатуры символы
    - do: нажать на кнопку 'Найти'
    - assert: поисковая выдача обновилась
    - assert: текст в поисковой строке 'testqz'
    - do: нажать кнопку 'Назад' в браузере
    - assert: текст в поисковой строке поменялся и стал 'test'
  Выполняется перезапрос с пустым запросом:
    - do: кликнуть на крестик в правой части поля запроса
    - do: кликнуть в кнопку 'Найти'
    - assert: |
        результаты поиска отсутствуют,
        в поисковой строке нет никакого запроса
    - tech: значение параметра 'text' в URL должно измениться на пустое
    - tech: проверить счётчик крестика в инпуте
  Проверка ссылок и счётчиков:
    - tags: 
        - smart_tv
        - no_assessors
    - do: кликнуть на крестик в строке ввода поискового запроса
    - tech: сработал счетчик /header/clear
    - do: кликнуть на кнопку 'Найти'
    - tech: сработал счетчик /head/search/button
  Адаптация к ширине экрана:
    - automation: SERP-74768
    - tags: no_assessors
    - do: установить размер окна 1280x600
    - tech: внешний вид [TODO https://st.yandex-team.ru/SERP-52058]
    - tech: внешний вид под залогином [TODO https://st.yandex-team.ru/SERP-52058]
    - do: установить размер окна 1000x600
    - tech: внешний вид [TODO https://st.yandex-team.ru/SERP-52058]
    - tech: внешний вид под залогином [TODO https://st.yandex-team.ru/SERP-52058]
    - do: установить размер окна 800x600
    - tech: внешний вид [TODO https://st.yandex-team.ru/SERP-52058]
    - tech: внешний вид под залогином [TODO https://st.yandex-team.ru/SERP-52058]
  Правая колонка:
    - assert: в правой колонке присутствует количество результатов поиска, значение может отличаться от скриншота [https://jing.yandex-team.ru/files/vtroshina/2021-11-09T15:09:26Z.273af29.png]
    - assert: в правой колонке присутствует количество показов в месяц, значение может отличаться от скриншота [https://jing.yandex-team.ru/files/vtroshina/2021-11-09T15:09:26Z.273af29.png]
    - do: удалить текст из поисковой строки
    - do: нажать на кнопку 'Найти'
    - assert: в правой колонке отсутствует количество результатов поиска
    - assert: в правой колонке отсутствует количество показов в месяц
  На пустом запросе статистика запроса не показывается:
    - do: получить выдачу по пустому запросу
    - assert: в правой колонке отсутствует количество результатов поиска
    - assert: в правой колонке отсутствует количество показов в месяц

files:
  - hermione/test-suites/desktop/yandex-search.hermione.js
# - features/desktop/header.autogenerated.hermione.js

v-team: Beauty

tags:
  - arrow
  - smoke
  - smoke_extended

manager:
  - osumerina

priority:
  - high

tlds: none
