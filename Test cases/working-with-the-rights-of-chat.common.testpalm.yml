feature: Работа с правами чата

specs:

    Участник может отправлять сообщение, если включен переключатель "Отправка сообщений"[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-866/QazMssngr1
              Пользователь Б yndx-mssngr-867/QazMssngr1
              Между ними есть групповой чат **ВКЛ отправка сообщений**
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Убедиться что есть поле ввода 
        - assert: Поле ввода есть 
        - do: Отправить текстовое сообщение
        - assert: Сообщение отравлено
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Убедиться что сообщение пришло от пользователя Б
        - assert: Сообщение пришло от пользователя Б

    Участник не может отправлять сообщение, если выключен переключатель "Отправка сообщений"[manual]:
        - tags: [advanced_smoke, b2b]
        - automation:
        - description: |
              Пользователь А yndx-mssngr-866/QazMssngr1
              Пользователь Б yndx-mssngr-867/QazMssngr1
              Между ними есть групповой чат **ВЫКЛ отправка сообщений**
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Убедиться что нет возможности отправить сообщение
        - assert: Нет поля ввода, чтобы можно было отправить сообщение

    Участник может удалять СВОИ сообщения, если включен переключатель "Удаление сообщений"[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-866/QazMssngr1
              Пользователь Б yndx-mssngr-867/QazMssngr1
              Между ними есть групповой чат **ВКЛ удаление сообщений**
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить в чат из description сообщение 
        - assert: Сообщение отправлено
        - do: Через контекстное меню удалить свое сообщение
        - assert: Сообщение удалено
        - do: Пользователем А убедиться что сообщение было удалено
        - assert: Сообщение было удалено

    Участник не может удалять СВОИ сообщения, если выключен переключатель "Удаление сообщений"[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-866/QazMssngr1
              Пользователь Б yndx-mssngr-867/QazMssngr1
              Между ними есть групповой чат **ВЫКЛ удаление сообщений**
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить в чат из description сообщение
        - assert: Сообщение отправлено
        - do: Пользователем А вызвать контекстное меню для своего сообщения
        - assert: Нельзя удалить сообщение , нет пункта меню "Удалить"

    Участник может отправлять Важные сообщения, если включен переключатель "Отправка важных сообщений"[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-866/QazMssngr1
              Пользователь Б yndx-mssngr-867/QazMssngr1
              Между ними есть групповой чат **ВКЛ отправка важных сообщений**
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на звезду в поле ввода, ввести текст и отправить сообщение
        - assert: Сообщение отправлено как Важное

    Участник не может отправлять важные сообщения через контекстное меню, если выключен переключатель "Отправка важных сообщений"[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-866/QazMssngr1
              Пользователь Б yndx-mssngr-867/QazMssngr1
              Между ними есть групповой чат **ВЫКЛ отправка важных сообщений**
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить тестовое сообщение
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Вызвать контекстное меню для сообщения пользователя А и сделать его важным
        - assert: Нет возможности сделать сообщение пользователя А важным - нет такого пункта
        - do: Отправить текстовое сообщение пользователем Б в чат из description
        - assert: Сообщение отправлено
        - do: Вызвать контекстное меню для своего сообщения и попробовать сделать его важным
        - assert: В контекстном меню нет пункта Сделать важным

    Участник не может отправлять важные сообщения, если выключен переключатель "Отправка важных сообщений"[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-866/QazMssngr1
              Пользователь Б yndx-mssngr-867/QazMssngr1
              Между ними есть групповой чат **ВЫКЛ отправка важных сообщений**
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат изdescription
        - assert: Открывается чат из description
        - do: Убедиться что в поле ввода нет звезды, для отправки важного сообщения
        - assert: В поле ввода нет звезды
        - do: Нажать в область где должна быть звезда
        - assert: Ничего не происходит

    Участник не может отправлять Reply в этот чат, если выключен переключатель "Отправка сообщений"[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-866/QazMssngr1
              Пользователь Б yndx-mssngr-867/QazMssngr1
              Между ними есть групповой чат **ВЫКЛ отправка сообщений**
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить текстовое сообщение 
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Вызвать контекстное меню для сообщения пользователя А и убедиться что нельзя отправить reply
        - assert: Нет такой возможности -  отсутствует пункт Ответить

    Участник может закреплять сообщения, если включен переключатель "Закрепление сообщений"[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: |
              Пользователь А yndx-mssngr-866/QazMssngr1
              Пользователь Б yndx-mssngr-867/QazMssngr1
              Между ними есть групповой чат **ВКЛ закрепление сообщений**
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить любое тестовое сообщение
        - assert: сообщение отправлено
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Вызвать контекстное меню для сообщения пользователя А и закрепить его
        - assert: Сообщение закрепляется
        - do: Пользователем Б отправить в чат из description текстовое сообщение
        - assert: Сообщение отправлено
        - do: Вызвать контекстное меню для своего сообщения и закрепить его
        - assert: Сообщение закреплено

    Участник не может закреплять сообщения, если выключен переключатель "Закрепление сообщений"[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-866/QazMssngr1
              Пользователь Б yndx-mssngr-867/QazMssngr1
              Между ними есть групповой чат **ВЫКЛ закрепление сообщений**
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат изdescription
        - assert: Открывается чат из description
        - do: Отправить текстовое сообщение в чат
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Вызвать контекстное меню для сообщения пользователя А и  убедиться что его нельзя закрепить
        - assert: Нет возможности закрепить сообщение, нет нужного пункта
        - do: Пользователем Б отправить в чат из description текстовое сообщение
        - assert: Сообщение отправлено
        - do: Вызвать контекстное меню для своего сообщения и убедиться что его нельзя закрепить
        - assert: Нет возможности закрепить сообщение, нет нужного пункта

    Участник не может закреплять сообщения через мультивыбор, если выключен переключатель "Закрепление сообщений"[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-866/QazMssngr1
              Пользователь Б yndx-mssngr-867/QazMssngr1
              Между ними есть групповой чат **ВЫКЛ закрепление сообщений**
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить текстовое сообщение в чат
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Вызвать мультивыбор для сообщения пользователя А через контекстное меню и убедиться что его нельзя закрепить
        - assert: Нет возможности закрепить сообщение, нет нужного пункта в панели мультивыбора
        - do: Пользователем Б отправить в чат из description текстовое сообщение
        - assert: Сообщение отправлено
        - do: Вызвать мультивыбор для своего сообщения через контекстное меню и убедиться что его нельзя закрепить
        - assert: Нет возможности закрепить сообщение, нет нужного пункта в панели мультивыбора

    Участник может добавлять новых участников, если включен переключатель "Добавление новых участников"[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-866/QazMssngr1
              Пользователь Б yndx-mssngr-867/QazMssngr1
              Пользователь B  - аккаунт, который вам известен и вы знаете его логин (данный Пользователь не состоит в данном чате)
              Между ними есть групповой чат **ВКЛ добавление участников**
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на шапку чата
        - assert: Открылась карточка чата
        - do: Нажать на кнопку "Участники"
        - assert: |
              Открывается страница "Участники"
              Отображается блок Администраторы
              Отображается блок Участники
        - do: Добавить в чат пользователя B нажатием по кнопке Добавить на странице настроек Участники и выбрав его из списка контактов
        - assert: Пользователь B присутствует в блоке Участники

    Участник не может добавлять новых участников, если выключен переключатель "Добавление новых участников"[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: |
              Пользователь А yndx-mssngr-866/QazMssngr1
              Пользователь Б yndx-mssngr-867/QazMssngr1
              Между ними есть групповой чат **ВЫКЛ добавление участников**
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на шапку чата
        - assert: Открылась карточка чата
        - do: Нажать на кнопку "Участники"
        - assert: |
              Открывается страница "Участники"
              Отображается блок Администраторы
              Отображается блок Участники
        - do: Убедиться что нет возможности добавлять участника
        - assert: Нет возможности добавлять участников

    Участник может изменять информацию о чате, если включен переключатель "Изменение информации о чате"[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-866/QazMssngr1
              Пользователь Б yndx-mssngr-867/QazMssngr1
              Между ними есть групповой чат **ВКЛ изменение информации о чате**
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на шапку чата
        - assert: Открылась карточка чата
        - do: Нажать на кнопку "Настройки чата"
        - assert: Открывается экран Настройки чата
        - do: Изменить название чата / описание чата / ВКЛ/выкл инвайт ссылку (если необходимо нажать по кнопке "Сохранить")
        - assert: Все новый настройки применяются 
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Убедиться что применились новые настройки/изменения
        - assert: Настойки/изменения применены

    Участник не может изменять информацию о чате, если выключен переключатель "Изменение информации о чате"[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-866/QazMssngr1
              Пользователь Б yndx-mssngr-867/QazMssngr1
              Между ними есть групповой чат **ВЫКЛ изменение информации о чате**
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на шапку чата
        - assert: Открылась карточка чата
        - do: Убедиться что нет пункта "Настройки чата"
        - assert: Пункта нет и нельзя изменить информацию о чате

    Участник не может отправлять Forward в этот чат, если выключен переключатель "Отправка сообщений"[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-866/QazMssngr1
              Пользователь Б yndx-mssngr-867/QazMssngr1
              Между ними есть групповой чат **ВЫКЛ отправка сообщений**
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить текстовое сообщение
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Вызвать контекстное меню и выбрать Переслать 
        - assert: Открыт экран выбора пересылки чатов
        - do: Убедиться, что не находится чат из description как в самом списке, так и через поиск
        - assert: Чат не находится 

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
    - chamb

