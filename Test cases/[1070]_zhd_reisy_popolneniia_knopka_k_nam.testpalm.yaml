feature: ЖД
type: Выдача
description: >-
  Рейс пополнения - это рейс, который отсутствует в базе Расписаний, но приходит
  в ответе партнера.

  В интерфейсе такие рейсы можно отличить так: заходим на выдачу, на выдаче n
  сниппетов, загружаются цены. После прогрузки цен сниппетов становится n+1. Это
  значит, что один рейс пришел от партнера, это и есть рейс пополнения (увидеть
  можно только когда цены приходят от партнера, а не из кэша или колдунщика).

  Чтобы воспроизводить эту ситуацию в тестинге, нужно:

  * Выбрать поезд и дату, на котором хотим проверять

  * Перейти в рабочую тестовую админку
  https://work.admin-test.rasp.yandex-team.ru

  * Перейти в раздел "Нитки"

  * Найти нужный поезд

  * Перейти в нитку для него и в календаре убрать нужную дату, нажать Save
specs:
  'ЖД: Рейсы пополнения, кнопка к нам':
    - do: |-
        Перейти на вкладку ЖД
        Перейти на выдачу с поездом из Preconditions
        Для этого поезда кликнуть по кнопке покупки
    - assert: |-
        * Открылась страница выбора мест
        * Все данные о поезде соответствуют данным на выдаче
    - do: Обновить страницу
    - assert: |-
        * Ошибок нет
        * Содержание страницы и информация о поезде не поменялись
    - do: Создать заказ (дойти до шага подтверждения) на любых пассажиров
    - assert: >-
        * Билеты бронируются

        * Информация о поезде на странице подтверждения соответствует информации
        на предыдущих шагах
manual: true
Функциональность: Содержание выдачи
Устройство:
  - Десктоп
  - Тач
Страница: Выдача
Сервис: ЖД
Тестирование асессорами: Нет
Окружение: Testing
Автор: shenfeld
