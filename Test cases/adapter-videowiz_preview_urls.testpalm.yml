feature: Колдунщик видео
type: Прямые ссылки на просмотрщик Видео

tags: [open,open_preview]

tlds: all

specs:
  XL-колдунщик:
    beforeEach:
    - do: получить выдачу по запросу 'видео' (альтернативные запросы 'как варить рис', 'как плавать брасом', 'фильмы 2018')
    - assert: появился видео колдунщик xl (первая тумба большая) (если появился колдунщик без большой тумбы, то попробовать любые другие запросы - колдунщик может приходить не всегда)

    Ссылка на тайтле должна вести на search:
      - tags: open_preview
      - do: перейти по тайтлу колдунщика Видео
      - assert: переход произошёл на страницу /search (выдачи)
      - assert: в урле отсутствует параметр &filmId (для ПП можно не проверять)

    Ссылка на тумбе должна вести на preview:
      - do: перейти по одному из роликов из колдунщика Видео
      - assert: переход произошёл на страницу /preview (просмотрщика) без редиректа
      - assert: в урле присутствует параметр &filmId (для ПП можно не проверять)

  Вертикальный колдунщик:
    beforeEach:
      - do: открыть выдачу по запросу 'Arch enemy clips'
      - assert: в результатах поиска есть вертикальный колдунщик видео (не XL)

    Ссылка на тайтле должна вести на search:
      - tags: [pp_new_core, open_search]
      - do: перейти по тайтлу колдунщика Видео
      - assert: |
          переход произошёл на страницу /search (выдачи)
          получена поисковая выдача по запросу 'Arch enemy clips'

    Ссылка на тумбе должна вести на preview:
      - tags: [pp_new_core, open_preview]
      - do: перейти по одному из роликов из колдунщика Видео
      - assert: переход произошёл на страницу /preview (просмотрщика) без редиректа
      - assert: в урле присутствует параметр &filmId (для ПП можно не проверять)

files:
  - features/touch-phone/adapter-videowiz/adapter-videowiz_preview_urls.hermione.js

v-team: Video

priority: high

