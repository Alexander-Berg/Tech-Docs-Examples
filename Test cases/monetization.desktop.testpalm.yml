feature: Страница "Монетизация контента"

description: В кейсах описываются компоненты и общий вид элементов на странице монетизации контента.

specs-integration:
  для партнеров с незаполненными реквизитами:
    содержит плашку "Реквизиты не заполнены":
      - do: открыть страницу "Монетизация контента" https://partner-tst.news.yandex.ru/v2/monetization?userid=79005240&agencyid=2528
      - assert: |
          страница содержит желтую плашку "Реквизиты не заполнены",
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-11-29_14-31-22.png

    содержит раскрытую форму заполнения реквизитов:
      - do: открыть страницу "Монетизация контента" https://partner-tst.news.yandex.ru/v2/monetization?userid=79005240&agencyid=2528 и проскролить вниз
      - assert: |
          страница содержит блок "Реквизиты для получения выплат",
          под наименованием блока отображается форма сбора реквизитов по проекту,
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-12-13_17-31-58.png

  для партнеров с заполненными реквизитами содержит плашку "Реквизиты заполнены":
    - do: открыть страницу "Монетизация контента" https://partner-tst.news.yandex.ru/v2/monetization
    - assert: |
        страница содержит зеленую плашку "Реквизиты заполнены",
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-12-13_16-37-07.png

specs:
  содержит описание содержания страницы:
    - do: открыть страницу "Монетизация контента" https://partner-tst.news.yandex.ru/v2/monetization
    - assert: |
        страница содержит описание содержания страницы,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-12-13_16-43-35.png
    - do: кликнуть на ссылку "дайджест"
    - assert: |
        при ховере слово выделяется красным,
        после клика в новой вкладке открывается ссылка https://yandex.ru/support/news/plots.html#show

  для партнеров с заполненными реквизитами:
    отображает номер соглашения:
      - do: открыть страницу "Монетизация контента" https://partner-tst.news.yandex.ru/v2/monetization
      - assert: |
          страница содержит зеленую плашку "Реквизиты заполнены",
          ниже, под плашкой отображается оглавление страницы "Монетизация контента" с номером соглашения,
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-12-13_16-37-07.png
      - do: кликнуть на тултип около номера соглашения
      - assert: отобразился тултип "Номер соглашения"
      - do: кликнуть по любому пустому месту на странице
      - assert: тултип скрылся

    отображает количество показов и сумму вознаграждения за определенную дату при наведении на график:
      - do: открыть страницу монетизации https://partner-tst.news.yandex.ru/v2/monetization?userid=182900757
      - assert: |
          после описания страницы отображается график "Количество показов",
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-12-13_16-46-16.png
      - do: навести курсор на график
      - assert: |
          в точке, на которую был наведен курсор, отобразился попап,
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-12-13_16-49-57.png
      - do: навести на другую точку на графике
      - assert: |
          попап корректно отображается в каждой точке,
          попап содержит информацию о количестве показов, сумме вознаграждения и месяце, где наведен курсор,
          данные в попапе совпадают с данными на оси ординат с двух сторон (показы и вознаграждение)
      - do: увести курсор за пределы графика
      - assert: попап скрылся

    позволяет отключать легенду "Показы" на графике количества показов:
      - do: открыть страницу монетизации https://partner-tst.news.yandex.ru/v2/monetization?userid=182900757
      - assert: |
          после описания страницы отображается график "Количество показов",
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-12-13_16-46-16.png
      - do: навести курсор на легенду "Показы"
      - assert: |
          при наведении курсора, наименование выделяется жирным,
          на графике линия "Вознаграждения" становится полупрозрачной
      - do: кликнуть по легенде "Показы"
      - assert: |
          кликабельна вся область - и наименование, и иконка графика,
          по клику - наименование и иконка закрасились в серый цвет,
          линия "Показы" не отображается на графике,
          ось ординат слева не отображается
      - do: навести на любую точку на графике
      - assert: |
          попап корректно отображается,
          попап содержит информацию только о сумме вознаграждения и месяце, где наведен курсор,
          данные в попапе совпадают с данными на оси ординат
      - do: навести курсор на отключенную легенду "Показы"
      - assert: надпись выделяется черным цветом
      - do: кликнуть по легенде "Показы"
      - assert: |
          кликабельна вся область - и наименование, и иконка графика,
          по клику - наименование и иконка вернули свои цвета - черный и фиолетовый,
          линия "Показы" отображается на графике,
          ось ординат слева отображается
      - do: навести на любую точку на графике
      - assert: |
          попап корректно отображается,
          попап содержит информацию о показах, сумме вознаграждения и месяце, где наведен курсор,
          данные в попапе совпадают с данными на оси ординат с двух сторон (показы и вознаграждение)

    позволяет отключать легенду "Вознаграждение" на графике количества показов:
      - do: открыть страницу монетизации https://partner-tst.news.yandex.ru/v2/monetization?userid=182900757
      - assert: |
          после описания страницы отображается график "Количество показов",
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-12-13_16-46-16.png
      - do: навести курсор на легенду "Вознаграждение"
      - assert: |
          при наведении курсора, наименование выделяется жирным,
          на графике линия "Показы" становится полупрозрачной
      - do: кликнуть по легенде "Вознаграждение"
      - assert: |
          кликабельна вся область - и наименование, и иконка графика,
          по клику - наименование и иконка закрасились в серый цвет,
          линия "Вознаграждение" не отображается на графике,
          ось ординат справа не отображается
      - do: навести на любую точку на графике
      - assert: |
          попап корректно отображается,
          попап содержит информацию только о показах и месяце, где наведен курсор,
          данные в попапе совпадают с данными на оси ординат
      - do: навести курсор на отключенную легенду "Вознаграждение"
      - assert: надпись выделяется черным цветом
      - do: кликнуть по легенде "Вознаграждение"
      - assert: |
          кликабельна вся область - и наименование, и иконка графика,
          по клику - наименование и иконка вернули свои цвета - черный и бирюзовый,
          линия "Вознаграждение" отображается на графике,
          ось ординат справа отображается
      - do: навести на любую точку на графике
      - assert: |
          попап корректно отображается,
          попап содержит информацию о показах, сумме вознаграждения и месяце, где наведен курсор,
          данные в попапе совпадают с данными на оси ординат с двух сторон (показы и вознаграждение)

    содержит таблицу "Вознаграждение за показы в дайджесте":
      - do: открыть страницу монетизации https://partner-tst.news.yandex.ru/v2/monetization?userid=182900757
      - assert: |
          после графика "Количество показов" отображается таблица "Вознаграждение за показы в дайджесте",
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-12-13_17-11-28.png
      - do: кликнуть по иконке знака вопроса около наименования таблицы
      - assert: |
          отобразился тултип,
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-12-13_17-12-24.png
      - do: нажать на ссылку "Приложение п3.3" в тултипе
      - assert: |
          при ховере на ссылку она становится красной,
          при клике на нее в новой вкладке открывается pdf-файл https://partner.news.yandex.ru/public/documents/agreement_digest.pdf

    и номером соглашения не содержит форму сбора реквизитов:
      - do: открыть страницу монетизации https://partner-tst.news.yandex.ru/v2/monetization?userid=182900757
      - assert: после таблицы "Вознаграждение за показы в дайджесте" раздел "Реквизиты для получения выплат" не отображается

    корректно отображает данные на графике и в таблице при смене региона [manual]:
      - reasonNotToAuto:
        - Нет возможности сменить регион в автотесте
      - do: сменить в https://yandex.ru/tune регион на Калининград
      - do: открыть страницу монетизации https://partner-tst.news.yandex.ru/v2/monetization?userid=521917854&agencyid=1310
      - assert: месяцы на графике "Количестов показов" и в таблице "Вознаграждение за показы в дайджесте" совпадают

files:
  - features/news-partners/monetization/monetization.desktop.hermione.js
  - features/news-partners/monetization/monetization.desktop.hermione.e2e.js

qa-engineer: kossakovskaya

manager: halilu

tags:
  - news-partners

tlds:
  - ru
