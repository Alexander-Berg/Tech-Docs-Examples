feature: Технические сообщения

specs:

    Технические сообщения показываются только в групповых чатах[manual]:
        - automation:
        - description: Авторизованы в мессенджере
        - do: Запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Нажать по кнопке "Создать новый чат"
        - assert: Открылось окно создания чата
        - do: Создать групповой чат 
        - assert: Создан чат и есть техническое сообщение

    Технические сообщения не показываются в приватных чатах[manual]:
        - automation:
        - description: Авторизованы в мессенджере
        - do: Запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Нажать по кнопке "Создать новый чат"
        - assert: |
              Открылось окно со списком всех контактов
              Есть кнопки "Новый групповой чат" и "Новый канал"
        - do: Нажать на любой контакт из списка доступных контактов
        - assert: |
              Открывается окно чата с выбранным пользователем
              В окне чата отсутствуют технические сообщения

    Пол в технических сообщениях пишется универсально[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть групповой чат, в котором он является администратором 
        - do: Запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на шапку чата
        - assert: Открыта карточка чата
        - do: Нажать на "Настройки чата"
        - assert: Открыто окно настроек чата 
        - do: Изменить название чата на другое и нажать кнопку "Сохранить"
        - assert: Название изменено и нас вернуло на карточку чата
        - do: Открыть окно чата
        - assert: |
              В окне чата отображается техническое сообщение
              Пользователь А изменил(а) название чата на "Новое название" - пол пользователя пишется универсально "изменил(а)"

    Есть техническое сообщение, когда изменили аватарку в чате[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть групповой чат, в котором он является администратором 
        - do: Запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на шапку чата
        - assert: Открыта карточка чата
        - do: Нажать на "Настройки чата"
        - assert: Открыто окно настроек чата 
        - do: Изменить аватар чата и вернуться в окно этого чата
        - assert: |
              Аватар был изменен
              В окне чата отображается техническая запись:**Пользователь А** обновил(а) информацию о чате

    Есть техническое сообщение при создании группового чата[manual]:
        - automation:
        - description: Авторизованы в мессенджере
        - do: Запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Нажать по кнопке "Создать новый чат"
        - assert: |
              Открылось окно со списком всех контактов
              Есть кнопки "Новый групповой чат" и "Новый канал"
        - do: Нажать на "Новый групповой чат"
        - assert: Открывается окно создания группового чата
        - do: Выбрать собеседника и пройти дальше флоу создания чата с именем "Новый чат"
        - assert: |
              Чат создан
              В окне чата отображается техническое сообщение:**Пользователь А** создал(а) чат **Новый чат**

    Есть техническое сообщение, когда изменили название чату[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть групповой чат, в котором он является администратором 
        - do: Запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на шапку чата
        - assert: Открыта карточка чата
        - do: Нажать на "Настройки чата"
        - assert: Открыто окно настроек чата 
        - do: Изменить название чата на другое и нажать кнопку "Сохранить"
        - assert: Название изменено и нас вернуло на карточку чата
        - do: Открыть окно чата
        - assert: |
              В окне чата отображается техническое сообщение
              Пользователь А изменил(а) название чата на "Новое название"

    Есть техническое сообщение, когда удалил администратор собеседника из чата[manual]:
        - automation:
        - description: |
              Пользователь А и Б состоят в одном групповом чате
              Пользователь А является администратором этого чата
        - do: Под пользователем А запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Удалить пользователя Б из чата и проверить корректность отображения технического сообщения в окне чата
        - assert: |
              Пользователь Б был удален из чата
              В окне чата отображается техническое сообщение
              Пользователь А удалил(а):Пользователя Б 

    Есть техническое сообщение, когда  добавили собеседника в чат[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: |
              Пользователь А состоит в групповом чате, в котором он является администратором
              Пользователь Б не состоит в этом чате
              Пользователь Б есть в списке контактов пользователя А
        - do: Под пользователем А запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Добавить в чат Пользователя Б
        - assert: |
              Пользователь Б добавлен в чат
              В окне чата отображается техническое сообщение
              Пользователь А добавил(а):Пользователь Б

    Есть техническое сообщение, когда собеседник вышел из чата[manual]:
        - automation:
        - description: Пользователь А и Б состоят в общем групповом чате
        - do: Под пользователем А запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - do: Пользователем Б выйти из группового чата из description
        - assert: Пользователь Б покинул чат из description
        - do: Пользователем А проверить наличие технического сообщения
        - assert: |
              В окне чата отображается техническое сообщение
              Пользователь Б покинул(а) чат 

    С техническими сообщениями нельзя ничего сделать[manual]:
        - automation:
        - description: Авторизованы в мессенджере
        - do: Запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Нажать по кнопке "Создать новый чат"
        - assert: |
              Открылось окно со списком всех контактов
              Есть кнопки "Новый групповой чат" и "Новый канал"
        - do: Нажать на "Новый групповой чат"
        - assert: Открывается окно создания группового чата
        - do: Выбрать собеседника и пройти дальше флоу создания чата с именем "Новый чат"
        - assert: |
              Чат создан
              В окне чата отображается техническое сообщение:**Пользователь А** создал(а) чат **Новый чат**
        - do: Вызвать контекстное меню для технического сообщения
        - assert: Меню не вызывается
        - do: Попытаться сделать реплай на техническое сообщение двойным кликом
        - assert: Ничего  не происходит

    Есть техническое сообщение, когда запинили/распинили сообщение в чате[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть групповой чат, в котором он является администратором 
        - do: Запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Закрепить любое сообщение через контекстное меню сообщения
        - assert: Сообщение закреплено
        - do: Проверить что есть техническое сообщение 
        - assert: |
              В окне чата отображается техническое сообщение
              Пользователь А обновил(а) информацию о чате
        - do: Открепить сообщение, нажав на крестик в плашке закрепленного сообщения
        - assert: |
              Сообщение откреплено
              В окне чата видим техническое сообщение:Пользователь А обновил(а) информацию о чате

    Есть техническое сообщение, когда собеседник добавился по инвайт линке[manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в другом браузере
              Пользователь А состоит в групповом чате, в котором включена публичная ссылка, и является администратором этого чата
              Пользователь Б не состоит в этом групповом чате(и ранее не состоял в данном чате)
        - do: Под пользователем А запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на шапку чата
        - assert: |
              Открылась карточка чата
              Доступна кнопка "Скопировать ссылку"
        - do: Скопировать ссылку и отправить ее пользователю Б в приватный чат
        - assert: Ссылка отправлена Пользователю Б
        - do: Пользователем Б присоединиться по ссылке к групповому чату, пройдя весь флоу
        - assert: Пользователь Б присоединился к групповому чату
        - do: Пользователем А открыть групповой чат из description
        - assert: В окне чата отображается техническое сообщение:Пользователь Б присоединился(ась) по ссылке

    Есть техническое сообщение, когда включили/изменили публичную ссылку[manual]:
        - automation:
        - description: |
              У авторизованного пользователя А в списке чатов есть групповой чат
              В чате отключена публичная ссылка
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на шапку чата
        - assert: Открылась карточка чата
        - do: Нажать на "Настройки чата"
        - assert: Открыто окно настроек чата
        - do: Включить ползунок "Публичная ссылка" (сохранить изменения) и вернуться в окно чата
        - assert: |
              Публичная ссылка включена
              В окне чата отображается техническая запись:**Пользователь А** обновил(а) информацию о чате

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team

