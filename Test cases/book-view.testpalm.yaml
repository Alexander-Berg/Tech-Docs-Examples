feature: Отели
type: Бронирование отелей
description: >-
  **Для попадания на тестовую страницу бронирования отелей выполнить шаги:**

  1. Перейти во вкладку отелей, заполнить все поля и нажать на кнопку "Найти" -
  переход осуществится на страницу выдачи отелей в портале.

  2. В фильтре Партнеров выбрать Expedia, поискать

  3. Кликнуть по любой карточке в отфильтрованной
  выдаче -> произойдет переход на страницу отеля в портале.

  4. В блоке офферов кликнуть Забронировать - произойдет переход на страницу бронирования с формой
  ввода данных гостей.
specs:
  Общий вид страницы бронирования отелей:
    - do: >-
        Перейти на страницу бронирований любого отеля по инструкции из
        подготовки

        P.S лучше всего выбрать отель с возможностью бесплатной отмены (для
        выполнения следующих пунктов), а отель без бесплатной отмены проверить
        отдельно.
    - assert: открылась страница бронирования отеля
    - assert: вверху отобразилось меню портала
    - assert: вкладка отелей выделена
    - assert: >-
        в правом углу на том же уровне есть кнопка авторизации и доступа к
        заказам
        https://jing.yandex-team.ru/files/iliasova/2019-06-18_11.23.26.png
    - assert: |-
        еще ниже отображены хлебные крошки
            * Регион отеля
            * Название отеля
            * Бронирование отеля
            * Оплата
    - assert: вкладка бронирования выделена
    - assert: >-
        справа на том же уровне отображен номер телефона техподдержки (пока
        только десктоп)

        https://jing.yandex-team.ru/files/iliasova/2019-10-02_18.48.05-5n7hz.png
    - assert: |-
        на странице есть информация об отеле:
              * хлебные крошки (Название регина (берется из страницы поиска) - Название отеля - Бронирование - Оплата). Активна крошка Бронирование
              * название
              * оценка
              * адрес
              * даты заеда и выезда
              * количество гостей
              * тип размещения
              * фото номера
              * информация о бесплатной отмене
              * тип питания
              * тип кроватей
              * услуги
              * условия заселения (если отсутуствуют, убедиться, что есть в другом отеле)
        https://jing.yandex-team.ru/files/tcheremnykh/2020-01-27_15-19-40.png
    - assert: под блоком описания отеля располагается блок для ввода данных гостей
    - assert: поля для ввода фамилии и имени гостей
    - assert: >-
        количество пар полей ФИ соответствует количеству гостей в блоке
        информации об отеле
    - assert: |-
        у первого гостя есть приписка "на кого оформляется бронь"
        https://jing.yandex-team.ru/files/iliasova/2019-08-30_12.32.49.png
    - assert: |-
        ниже отображается блок контактов пользователя
               * поле для ввода почты
               * поле для ввода телефона
    - assert: |-
        над полями есть приписка "куда отправить информацию о бронировании"
              https://jing.yandex-team.ru/files/iliasova/2019-08-30_12.30.57.png
    - do: Навести курсор на иконку ? рядом с информацией о бесплатной отмене
    - assert: появился указатель-рука
    - do: Кликнуть по иконке
    - assert: >-
        появился попап с информацией о бесплатной отмене: до какой даты и
        времени можно отменить бесплатно, до какой даты и времени со штрафом,
        сумма штрафа (эти два пункт могут отсутствовать как правило, зависит от
        дальности даты заезда и кол-ва ночей), после какой даты и времени
        стоимость не возвращается
    - do: Кликнуть по крестику на попапе
    - assert: попап закрылся
    - do: Снова кликнуть по иконке информации
    - do: Кликнуть вне раскрывшегося попапа
    - assert: попап закрылся
    - do: Кликнуть по ссылке Еще в блоке Услуги
    - assert: развернулись все услуги
    - assert: все услуги перечислены через ·
    - do: >-
        Кликнуть по ссылке Условия заселения (если их нет, пропустить этот и
        след шаги)
    - assert: развернулся текст с условиями
    - assert: >-
        стрелка на ссылке
        ![image](https://jing.yandex-team.ru/files/shenfeld/Yandeks.Puteshestviya__aviabilety_bilety_na_poezd_bronirovanie_otelei_2019-03-25_17-34-11.png)
        перевернулась:
        ![image](https://jing.yandex-team.ru/files/shenfeld/Yandeks.Puteshestviya__aviabilety_bilety_na_poezd_bronirovanie_otelei_2019-03-25_17-35-00.png)
    - do: кликнуть по ссылке Условия заселения еще раз
    - assert: текст с условиями свернулся
    - assert: cтрелка на ссылке перевернулась
    - do: кликнуть по ссылке "пользовательским соглашением"
    - assert: |-
        открылась страница с пользовательским соглашением
        https://yandex.ru/legal/travel_termsofuse
    - do: кликнуть по ссылке "условиями бронирования"
    - assert: >-
        открылась страница с условиями бронирования отелей на сервисе
        "Яндекс.Путешествия"

        https://yandex.ru/legal/hotels_booking_conditions
    - do: кликнуть по ссылке "продавцами-партнерами"
    - assert: открылось модальное окно "Реквизиты"
    - assert: фон за окном затемнился
    - assert: 'в окне есть реквизиты организаций: отеля, партнера, Яндекса'
    - assert: >-
        для каждой организации есть информация: ОГРН (только для РФ),
        фактический и юридический адреса, время работы (фактического может не
        быть, если он совпадает с юридическим)
    - do: кликнуть по области вне модального окна
    - assert: окно закрылось
    - do: вернуться на поиск отелей
    - do: сделать поиск того же отеля на на 1 гостя на 4 ночи
    - do: перейти на предложение Яндекс.Путешествий
    - assert: открылась страница бронирования отеля на Яндекс.Путешествиях
    - assert: в корзинке указано количество ночей - 4 ночи
    - assert: >-
        рядом с указанием количества ночей есть иконка для раскрытия выпадающего
        списка
        ![image](https://jing.yandex-team.ru/files/shenfeld/Yandeks.Puteshestviya__aviabilety_bilety_na_poezd_bronirovanie_otelei_2019-03-26_18-06-44.png)
    - do: навести курсор на иконку
    - assert: появился указатель-рука
    - do: кликнуть по иконке
    - assert: развернулся список
    - assert: >-
        иконка сменилась на
        ![image](https://jing.yandex-team.ru/files/shenfeld/Yandeks.Puteshestviya__aviabilety_bilety_na_poezd_bronirovanie_otelei_2019-03-26_18-07-52.png)
    - assert: >-
        в списке перечислены 4 ночи в формате "1 ночь, 2 ночь..." с указанием
        стоимости за каждую ночь
    - assert: сумма за 4 ночи равна сумме этих стоимостей
    - do: кликнуть по иконке выпадающего списка
    - assert: список свернулся
    - do: 'если есть бесплатная отмена, кликнуть на иконку вопроса возле нее'
    - assert: >-
        появился попап с указанием даты и времени для бесплатного возврата
        (совпадает с датой на корзинке), датой и времени, с которого стоимость
        не возвращается
    - do: кликнуть по области вне попапа
    - assert: попап закрылся
files:
    - tests/desktop/hotels/book/book-view.hermione.ts    
Устройство: Десктоп
Страница: Бронирование
tlds: ru
Сервис: Отели
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Tag:
  - Smoke
  - Blocker
Автор: iliasova
