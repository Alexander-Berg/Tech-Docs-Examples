feature: Эмоджи в Спорте

description: |
    Эмоджи - сущность в сюжете, позволяющая пользователям выразить свое мнение о новости посредством выбора реакции из набора эмоджи.
    Доступные эмоджи: Нравится, Хаха, Ого, Апчхи, Грусть, Возмутительно, Не нравится

specs:
  позволяют оценить новость:
    - tags: 
      - backend_sport
    - do: авторизоваться на сервисе Я.Спорт
    - do: | 
        перейти в сюжет без поставленных эмоджи (не из топа новостей),
        внешний вид блока эмоджи без реакций https://jing.yandex-team.ru/files/nightsonne/2022-03-23_10-03-30.png
    - assert: |
        под аннотацией есть кнопки 'Оценить' со значком смайла,
        элементы расположены в одну строку, не наезжают друг на друга
    - do: тапнуть по кнопке 'Оценить'
    - assert: |
        появляется блок с доступными эмоджи,
        все эмоджи отображаются корректно, блок эмоджи не выезжает за границу экрана

  отображают топ популярных реакций и количество отреагировавших на спортивную новость:
    - tags: 
      - backend_sport
    - do: перейти в сюжет с количеством эмоджи > 1000 (обычно это сюжеты из топ-5 в рубрике "Главное". Если таких сюжетов не нашлось - пропустите кейс)
    - assert: |
         отображается топ из 3 самых популярных эмоджи, кнопка Оценить и количество оценивших '(N)K' (например, 2,2K),
         элементы расположены в одну строку, не наезжают друг на друга
    - do: тапнуть по кнопке 'Оценить', выбрать любую эмоджи
    - assert: |
        отображается топ из 3 самых популярных эмоджи, выбранная эмоджи расположена рядом с топ-3 и имеет больший размер,
        рядом появилась надпись "Вы +NK" (Вы - черным шрифтом, +NK - серым),
        элементы расположены в одну строку, не наезжают друг на друга, отображаются корректно
        количество N не изменилось
    - do: обновить страницу
    - assert: количество N не изменилось

  позволяют изменить реакцию:
    - tags:
      - backend_sport
    - do: перейти залогиненным пользователем в сюжет без поставленных эмоджи (не из топа спортивных новостей)
    - assert: открывается соответствующий сюжет, есть кнопка 'Оценить' со значком смайла,
    - do: тапнуть по кнопке Оценить, выбрать любую эмоджи
    - assert: выбранная эмоджи отобразилась вместо значка смайла, рядом появилась черная надпись "Вы оценили"
    - do: тапнуть 'Вы оценили'
    - assert: |
        выбранная эмоджи и надпись 'Вы оценили' пропали,
        на их месте появились значок смайла и кнопка 'Оценить'
    - do: тапнуть по кнопке 'Оценить'
    - assert: появляется блок с доступными эмоджи
    - do: выбрать другую эмоджи
    - assert: отображается только новая эмоджи и надпись "Вы оценили"
    - do: обновить страницу
    - assert: отображается только последняя выбранная эмоджи и черная надпись "Вы оценили"
    - do: залогиниться другим пользователем
    - do: в том же сюжете тапнуть по кнопке 'Оценить', выбрать эмоджи, отличную от ранее поставленной
    - assert: |
        отобразилась выбранная эмоджи, рядом появилась надпись "Вы +1" (Вы - черным шрифтом, +1 - серым),
        левее отображается топ эмоджи - эмоджи первого пользователя + выбранная эмоджи

  авторизация через таб эмоджи [manual]:
    - reasonNotToAuto: Нет возможности авторизоваться в тесте через поп-ап
    - tags: 
      - backend_sport
    - do: перейти в спортивный сюжет без залогина (в сюжете должно быть > 10 эмоджи)
    - assert: |
        отображается топ из 3 самых популярных эмоджи, кнопка Оценить и количество оценивших,
        элементы расположены в одну строку, не наезжают друг на друга
    - do: нажать на кнопку 'Оценить'
    - assert: |
        появился попап с предложением авторизации 'Хотите оценить новость? Войдите в аккаунт, чтобы оставить свою оценку',
        отображаются кнопки 'Закрыть' и 'Войти'
    - do: нажать на кнопку 'Закрыть'
    - assert: поп-ап авторизации пропадает
    - do: повторно нажать на кнопку 'Оценить'
    - assert: появился попап с предложением авторизации
    - do: нажать на кнопку 'Войти' и авторизоваться на сервисе
    - assert: произошел возврат к сюжету
    - do: навести курсор мыши на кнопку 'Оценить' и кликнуть по любой эмоджи в появившемся блоке
    - assert: |
        блок с доступными эмоджи пропадает,
        выбранная эмоджи появляется справа от трех популярных эмоджи,
        'Оценить' меняется на "Вы +NK", количество N не изменилось

files:
  - features/sport/reaction/reaction.phone.hermione.js

qa-engineer: an-smirn0v

manager: mrwhite

tlds:
  - ru
  - by
  - kz
  - ua
  - com
