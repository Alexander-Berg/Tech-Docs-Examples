feature: Отправка важных сообщений

specs:

    Можно отправить важное текстовое сообщение[manual]:
        - tags: [b2b]
        - automation:
        - description: |
              Пользователь А yndx-mssngr-888/QazMssngr1
              Пользователь Б yndx-mssngr-889/QazMssngr1
              Между ними есть групповой чат Групповой Чат с важными сообщениями
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать в поле ввода по звезде
        - assert: |
              Звезда прокрасилась
              Появился попап "Сообщение будет помечено как важное" (Если ранее уже отправляли важное сообщение, то данного попапа не будет)
        - do: Ввести текстовый текст и отправить его
        - assert: Текст отправлен
        - do: Убедиться что сообщение показывается как "Важное"
        - assert: Бабл сообщения имеет окантовку и есть плашка Важное

    Можно отправить важное изображение[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-888/QazMssngr1
              Пользователь Б yndx-mssngr-889/QazMssngr1
              Между ними есть групповой чат Групповой Чат с важными сообщениями
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать в поле ввода по звезде
        - assert: |
              Звезда прокрасилась
              Появился попап "Сообщение будет помечено как важное" (Если ранее уже отправляли важное сообщение, то данного попапа не будет)
        - do: Нажать по скрепке
        - assert: Открывается файловый менеджер
        - do: Выбрать любое изобраежние и нажать кнопку отправки
        - assert: |
              Открывается попап отправки в котором отображается выбранное изображение
              Есть поле ввод для ввода подписи к изобраежнию
              В поле ввода звезда выделена
        - do: Нажать кнопку отправки
        - assert: Изображение отпрвалено
        - do: Убедиться что сообщение показывается как "Важное"
        - assert: Бабл сообщения имеет окантовку и есть плашка Важное

    Можно отправить важное сообщение файл[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-888/QazMssngr1
              Пользователь Б yndx-mssngr-889/QazMssngr1
              Между ними есть групповой чат Групповой Чат с важными сообщениями
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать в поле ввода по звезде
        - assert: |
              Звезда прокрасилась
              Появился попап "Сообщение будет помечено как важное" (Если ранее уже отправляли важное сообщение, то данного попапа не будет)
        - do: Нажать по скрепке
        - assert: Открывается файловый менеджер
        - do: Выбрать любой файл и нажать кнопку отправки
        - assert: |
              Открывается попап отправки в котором отображается выбранный файл
              Есть поле ввод для ввода подписи к файлу
              В поле ввода звезда выделена
        - do: Нажать кнопку отправки
        - assert: Файл отправлен
        - do: Убедиться что сообщение показывается как "Важное"
        - assert: Бабл сообщения имеет окантовку и есть плашка Важное

    Можно отправить важное изображение с подписью[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-888/QazMssngr1
              Пользователь Б yndx-mssngr-889/QazMssngr1
              Между ними есть групповой чат Групповой Чат с важными сообщениями
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать по скрепке
        - assert: Открывается файловый менеджер
        - do: Выбрать любое изобраежние и нажать кнопку отправки
        - assert: |
              Открывается попап отправки в котором отображается выбранное изображение
              Есть поле ввод для ввода подписи к изобраежнию
              В поле ввода есть возможность поставить важность
        - do: Нажать в поле ввода по звезде
        - assert: |
              Звезда прокрасилась
              Появился попап "Сообщение будет помечено как важное" (Если ранее уже отправляли важное сообщение, то данного попапа не будет)
        - do: Нажать кнопку отправки
        - assert: Изображение отпрвалено
        - do: Убедиться что сообщение показывается как "Важное"
        - assert: Бабл сообщения имеет окантовку и есть плашка Важное

    Можно отправить важный файл с подписью[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-888/QazMssngr1
              Пользователь Б yndx-mssngr-889/QazMssngr1
              Между ними есть групповой чат Групповой Чат с важными сообщениями
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать по скрепке
        - assert: Открывается файловый менеджер
        - do: Выбрать любой файл и нажать кнопку отправки
        - assert: |
              Открывается попап отправки в котором отображается выбранный файл
              Есть поле ввод для ввода подписи к файлу
              В поле ввода есть возможность поставить важность
        - do: Нажать в поле ввода по звезде
        - assert: |
              Звезда прокрасилась
              Появился попап "Сообщение будет помечено как важное" (Если ранее уже отправляли важное сообщение, то данного попапа не будет)
        - do: Нажать кнопку отправки
        - assert: Файл отпрвален
        - do: Убедиться что сообщение показывается как "Важное"
        - assert: Бабл сообщения имеет окантовку и есть плашка Важное

    Можно отправить важное сообщение эмодзи[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-888/QazMssngr1
              Пользователь Б yndx-mssngr-889/QazMssngr1
              Между ними есть групповой чат Групповой Чат с важными сообщениями
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать в поле ввода по звезде
        - assert: |
              Звезда прокрасилась
              Появился попап "Сообщение будет помечено как важное" (Если ранее уже отправляли важное сообщение, то данного попапа не будет)
        - do: Ввести эмодзи и отправить сообщение
        - assert: Сообщение ушло
        - do: Убедиться что сообщение показывается как "Важное"
        - assert: Бабл сообщения имеет окантовку и есть плашка Важное (также эмоздли может отображаться как сообщение в стиле "стикер" в этом случае окантовки не будет и будет только плашка "Важное")

    Можно отправить важное сообщение reply[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-888/QazMssngr1
              Пользователь Б yndx-mssngr-889/QazMssngr1
              Между ними есть групповой чат Групповой Чат с важными сообщениями
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать в поле ввода по звезде
        - assert: |
              Звезда прокрасилась
              Появился попап "Сообщение будет помечено как важное" (Если ранее уже отправляли важное сообщение, то данного попапа не будет)
        - do: Сделать реплай на любое сообщение  и отправить его
        - assert: Сообщение отправлено
        - do: Убедиться что сообщение показывается как "Важное"
        - assert: Бабл сообщения имеет окантовку и есть плашка Важное

    Можно отправить важное сообщение Forward[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-888/QazMssngr1
              Пользователь Б yndx-mssngr-889/QazMssngr1
              Между ними есть групповой чат Групповой Чат с важными сообщениями
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: выбрать любое сообщение и сделать Forward в "Групповой Чат с важными сообщениями", в выбранном чате нажать на иконку звезды и  отправить сообщение
        - assert: Сообщение отправлено
        - do: Убедиться что сообщение показывается как "Важное"
        - assert: Бабл сообщения имеет окантовку и есть плашка Важное

    Можно отправить важное сообщение Forward c подписью[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-888/QazMssngr1
              Пользователь Б yndx-mssngr-889/QazMssngr1
              Между ними есть групповой чат Групповой Чат с важными сообщениями
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: выбрать любое сообщение и сделать Forward в "Групповой Чат с важными сообщениями", в выбранном чате нажать на иконку звезды, добавить текст в поле ввода  и отправить сообщение
        - assert: Сообщение отправлено
        - do: Убедиться что сообщение показывается как "Важное"
        - assert: Бабл сообщения имеет окантовку и есть плашка Важное

    Нельзя отправить важное сообщение стикер[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-888/QazMssngr1
              Пользователь Б yndx-mssngr-889/QazMssngr1
              Между ними есть групповой чат Групповой Чат с важными сообщениями
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать в поле ввода по звезде
        - assert: |
              Звезда прокрасилась
              Появился попап "Сообщение будет помечено как важное" (Если ранее уже отправляли важное сообщение, то данного попапа не будет)
        - do: Выбрать стикер и отправтиь его
        - assert: Сообщение отправлено
        - do: Убедиться что сообщение Не показывается как "Важное"
        - assert: Сообщение не показывается как важное

    Можно отправить важное сообщение ссылка с превью[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-888/QazMssngr1
              Пользователь Б yndx-mssngr-889/QazMssngr1
              Между ними есть групповой чат Групповой Чат с важными сообщениями
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать в поле ввода по звезде
        - assert: |
              Звезда прокрасилась
              Появился попап "Сообщение будет помечено как важное" (Если ранее уже отправляли важное сообщение, то данного попапа не будет)
        - do: Ввести в поле ввода ссылку, например, yandex.ru(вверху над полем ввода должно показаться превью ссылки) и отправить сообщение
        - assert: Сообщение отправилось с превью
        - do: Убедиться что сообщение показывается как "Важное"
        - assert: Бабл сообщения имеет окантовку и есть плашка Важное
        - do: Убедиться что превью ссылки не пропало
        - assert: прревью ссылки не пропало

    Можно отправить важное сообщение войс[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-888/QazMssngr1
              Пользователь Б yndx-mssngr-889/QazMssngr1
              Между ними есть групповой чат Групповой Чат с важными сообщениями
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать в поле ввода по звезде
        - assert: |
              Звезда прокрасилась
              Появился попап "Сообщение будет помечено как важное" (Если ранее уже отправляли важное сообщение, то данного попапа не будет)
        - do: Нажать на микрофон, надиктовать войс, отправить его
        - assert: Войс отправлен
        - do: Убедиться что сообщение показывается как "Важное"
        - assert: Бабл сообщения имеет окантовку и есть плашка Важное

    Можно отправить важное сообщение для мультифорварда[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-888/QazMssngr1
              Пользователь Б yndx-mssngr-889/QazMssngr1
              Между ними есть групповой чат Групповой Чат с важными сообщениями
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Вызвать мультиселект, выбрать пару любым сообщений и сделать Forward в чат "Групповой Чат с важными сообщениями", в выбранном чате нажать на иконку звезды и отправить сообщение
        - assert: Сообщение отправлено
        - do: Убедиться что сообщение показывается как "Важное"
        - assert: Бабл сообщения имеет окантовку и есть плашка Важное

    Пропадает кнопка важности, если ввели текст, а кнопку не тапнули:
        - description: |
              Пользователь А yndx-mssngr-888/QazMssngr1
              Пользователь Б yndx-mssngr-889/QazMssngr1
              Между ними есть групповой чат Групповой Чат с важными сообщениями
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Ввести в поле ввода текст
        - assert: Кнопка Зведа пропала из поля ввода
        - do: Стереть ранее введенный в поле ввода текст
        - assert: |
              Все символы были удалены из поля ввода
              В поле ввода отображается кнопка Звезды

    После отправки важного сообщения, поле принимает стандартный вид[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-888/QazMssngr1
              Пользователь Б yndx-mssngr-889/QazMssngr1
              Между ними есть групповой чат Групповой Чат с важными сообщениями
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать в поле ввода по звезде
        - assert: |
              Звезда прокрасилась
              Появился попап "Сообщение будет помечено как важное" (Если ранее уже отправляли важное сообщение, то данного попапа не будет)
        - do: Ввести текстовый текст и отправить его
        - assert: Сообщение отправлено
        - do: Убедиться что сообщение показывается как "Важное"
        - assert: Бабл сообщения имеет окантовку и есть плашка Важное
        - do: проверить что поле ввода ввернулось в обычное состояние
        - assert: Поле ввода вернулось в обычное состояние - звезда не прокрашена

    Важное сообщение пробивает мьют и приходит пуш[manual]:
        - tags: [advanced_smoke, b2b]
        - automation:
        - description: |
              Пользователь А yndx-mssngr-888/QazMssngr1
              Пользователь Б yndx-mssngr-889/QazMssngr1 аворизован в вебе на yandex.ru/chat
              Между ними есть групповой чат "Замьюченный чат" ( уведомления в нем выключены)
              Пользователем Б необходимо открывать мессенджер в другом браузере
              У пользователя А в настройках мессенджера и в настройках браузера включены уведолмения
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Свернуть браузер (приложение)
        - assert: Браузер свернут (приложение)
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить важное сообщение в чат
        - assert: Важное сообщение отправлено
        - do: Пользователем А убедиться что пришло уведомление в замьюченный чат от собеседника Б
        - assert: Пришло уведомление от собеседника Б
        - do: Нажать по уведолмению
        - assert: Переходит в чат к нужному сообщению

files:
    - tests/hermione/suites/messenger/important-message/sending-important-messages.common.hermione.ts

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
