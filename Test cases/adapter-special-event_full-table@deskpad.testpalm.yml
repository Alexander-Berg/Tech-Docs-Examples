feature: Специальные события
type: Турнирная таблица

specs:
  Основные проверки:
    params:
      foreverdata: '1831188006'
    beforeEach:
      - do: получить выдачу по запросу "foreverdata"
      - assert: на выдаче присутствует спортивный колдунщик
      - assert: в колдунщике присутствует блок "Турнирная таблица"
      - assert: в нижней части блока присутствует кнопка "Вся таблица"
    Кнопка - внешний вид:
      - screenshot: внешний вид кнопки "Вся таблица" [button]
    Турнирная таблица:
      Внешний вид:
        - do: кликнуть в кнопку "Вся таблица"
        - assert: открылся попап "Турнирная таблица"
        - assert: внешний вид попапа [full-table]
      Закрытие фрейма таблицы - кнопка "х":
        - do: кликнуть в кнопку "Вся таблица"
        - assert: открылся попап "Турнирная таблица"
        - tech: сработал счетчик '/wiz/special/event/football/standings/button'
        - do: кликнуть в кнопку "х" в правом верхнем углу попапа
        - assert: попап закрылся
        - assert: на странице присутствует спортивный колдунщик
        - tech: сработал счетчик '/wiz/special/event/football/close'
      Закрытие фрейма таблицы - клик вне попапа:
        - do: кликнуть в кнопку "Вся таблица"
        - assert: открылся попап "Турнирная таблица"
        - do: кликнуть в область экрана за границами попапа
        - assert: попап закрылся
        - assert: на странице присутствует спортивный колдунщик
        - tech: сработал счетчик '/wiz/special/event/football/close'
      Переходы - Список команд:
        - do: кликнуть в кнопку "Вся таблица"
        - assert: открылся попап "Турнирная таблица"
        - do: кликнуть в название первой команды в колонке "Команда"
        - assert: в новой вкладке открылась выдача по запросу "Чемпионат Испании - Барселона"
        - tech: сработал счетчик '/wiz/special/event/football/link'
      Переходы - Следующий матч:
        - do: кликнуть в кнопку "Вся таблица"
        - assert: открылся попап "Турнирная таблица"
        - do: кликнуть в логотип команды в колонке "След" в первой строчке
        - assert: в новой вкладке открылась выдача по запросу "Леванте Барселона 16 декабря"
        - tech: сработал счетчик '/wiz/special/event/football/link'
      Попап "Последние матчи":
        Внешний вид:
          - do: кликнуть в кнопку "Вся таблица"
          - assert: открылся попап "Турнирная таблица"
          - do: кликнуть в первый кружок первой команды в колонке "Последние матчи"
          - assert: открылся попап матча
          - screenshot: пример внешнего вида [last-matches-tooltip]
        Победный матч:
          - do: кликнуть в кнопку "Вся таблица"
          - assert: открылся попап "Турнирная таблица"
          - do: кликнуть в зеленый кружок первой команды в колонке "Последние матчи"
          - assert: открылся попап матча
          - assert: счет является победным для выбранной команды
          - screenshot: пример внешнего вида [victory-tooltip]
        Проигрышный матч:
          - do: кликнуть в кнопку "Вся таблица"
          - assert: открылся попап "Турнирная таблица"
          - do: кликнуть в красный кружок первой команды в колонке "Последние матчи"
          - assert: открылся попап матча
          - assert: счет является проигрышным для выбранной команды
          - screenshot: пример внешнего вида [defeat-tooltip]
        Ничья:
          - do: кликнуть в кнопку "Вся таблица"
          - assert: открылся попап "Турнирная таблица"
          - do: кликнуть в желтый кружок первой команды в колонке "Последние матчи"
          - assert: открылся попап матча
          - assert: счет является ничейным для выбранной команды
          - screenshot: пример внешнего вида [draw-tooltip]
        Закрытие попапа - Кнопка "х":
          - do: кликнуть в кнопку "Вся таблица"
          - assert: открылся попап "Турнирная таблица"
          - do: кликнуть в любой кружок любой команды в колонке "Последние матчи"
          - assert: открылся попап матча
          - do: кликнуть в кнопку "х" в правом верхнем углу
          - assert: попап закрылся
        Закрытие попапа - Клик вне области попапа:
          - do: кликнуть в кнопку "Вся таблица"
          - assert: открылся попап "Турнирная таблица"
          - do: кликнуть в любой кружок любой команды в колонке "Последние матчи"
          - assert: открылся попап матча
          - do: кликнуть в кнопку вне области попапа, но в области турнирной таблицы
          - assert: попап закрылся
        Повторное открытие попапа после закрытия таблицы:
          - do: кликнуть в кнопку "Вся таблица"
          - assert: открылся попап "Турнирная таблица"
          - do: кликнуть в любой кружок любой команды в колонке "Последние матчи"
          - assert: открылся попап матча
          - do: кликнуть в крестик в правом верхнем углу попапа турнирной таблицы
          - assert: попап турнирной таблицы закрылся
          - do: повторно кликнуть в кнопку "Вся таблица"
          - assert: снова открылся попап "Турнирная таблица"
          - do: повторно кликнуть в любой кружок любой команды в колонке "Последние матчи"
          - assert: снова открылся попап матча
        Переход на матч - Клик в счет:
          - do: кликнуть в кнопку "Вся таблица"
          - assert: открылся попап "Турнирная таблица"
          - do: кликнуть в первый кружок первой команды в колонке "Последние матчи"
          - assert: открылся попап матча
          - do: кликнуть в счет матча
          - assert: в новой вкладке открылась выдача по запросу "Райо Вальекано Барселона 3 ноября"
          - tech: сработал счетчик '/wiz/special/event/football/score'
        Переход по команде слева:
          - do: кликнуть в кнопку "Вся таблица"
          - assert: открылся попап "Турнирная таблица"
          - do: кликнуть в первый кружок первой команды в колонке "Последние матчи"
          - assert: открылся попап матча
          - do: кликнуть в лого команды слева
          - assert: в новой вкладке открылась выдача по запросу "Чемпионат Испании – Райо Вальекано"
        Переход по команде справа:
          - do: кликнуть в кнопку "Вся таблица"
          - assert: открылся попап "Турнирная таблица"
          - do: кликнуть в первый кружок первой команды в колонке "Последние матчи"
          - assert: открылся попап матча
          - do: кликнуть в лого команды справа
          - assert: в новой вкладке открылась выдача по запросу "Чемпионат Испании – Барселона"
  Внешний вид - пользовательский фон:
    - params:
        foreverdata: '3596381658'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на выдаче присутствует спортивный колдунщик
    - assert: в колдунщике присутствует блок "Турнирная таблица"
    - assert: в нижней части блока присутствует кнопка "Вся таблица"
    - do: кликнуть в кнопку "Вся таблица"
    - assert: открылся попап "Турнирная таблица"
    - assert: внешний вид попапа [full-table-customized]
  Нет следующего матча:
    - params:
        foreverdata: '1796809921'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на выдаче присутствует спортивный колдунщик
    - assert: в колдунщике присутствует блок "Турнирная таблица"
    - assert: в нижней части блока присутствует кнопка "Вся таблица"
    - do: кликнуть в кнопку "Вся таблица"
    - tech: сработал счетчик '/wiz/special/event/football/standings/button'
    - assert: открылся попап "Турнирная таблица" с отсутствующим следующим матчем в первой строке
    - assert: внешний вид первой строки [without-next-match]
  Прошедший чемпионат:
    params:
      foreverdata: '3776732950'
    beforeEach:
      - do: получить выдачу по запросу "foreverdata"
      - assert: на выдаче присутствует спортивный колдунщик
      - assert: в колдунщике присутствует блок "Расписание матчей"
      - assert: в блоке "Расписание матчей" присутствует счет матча
    Переход на финальный матч по клику на счет:
      - screenshot: внешний вид [finished-final-match]
      - do: кликнуть на счет матча
      - tech: сработал счетчик '/wiz/special/event/sport/football/table/timetable'
      - assert: открылась выдача по запросу "Франция Хорватия 15 июля"
    Переход на матч 1/2 по клику на счет:
      - do: в блоке "Расписание матчей" перейти во вкладку "1/2"
      - screenshot: внешний вид [finished-12-match]
      - do: в первой строке кликнуть на счет матча
      - tech: сработал счетчик '/wiz/special/event/sport/football/table/timetable'
      - assert: открылась выдача по запросу "Мексика Южная Корея 10 июля"
  Футбольный клуб:
    Ссылка на предстоящий матч:
      - params:
          foreverdata: '3037379052'
          user_time: '20190913'
      - do: получить выдачу по запросу "foreverdata"
      - assert: на выдаче присутствует спортивный колдунщик
      - assert: в колдунщике присутствует блок "Ближайший матч"
      - screenshot: внешний вид (может отсутствовать время до матча между логотипами команд) [future-match]
      - assert: внешний вид соответствует эталонному скриншоту
      - do: кликнуть по информации об оставшемся времени до матча (если время отсутствует, кликнуть по тире между двумя логотипами команд)
      - assert: осуществлён переход по ссылке
      - tech: сработал счетчик '/wiz/special/event/sport/team/table/timetable'
  Проверки при наличии табов в исходной таблице:
    params:
      foreverdata: '642103265'
    beforeEach:
      - do: получить выдачу по запросу "foreverdata"
      - assert: на выдаче присутствует спортивный колдунщик
      - assert: в колдунщике присутствует блок "Турнирная таблица"
      - assert: активен таб "Восток"
      - assert: в нижней части блока присутствует кнопка "Восток - полная таблица"
    Первый таб:
      Таблица - внешний вид:
        - assert: текст на кнопке в нижней части блока "Восток - полная таблица"
        - assert: внешний вид таблицы [first-tab-button-full-table]
        - assertMetrics: '*'
      Модалка с полной таблицей - внешний вид:
        - do: кликнуть по кнопке "Восток - полная таблица"
        - assert: внешний вид полной таблицы в модальном окне [first-tab-full-table]
        - tech: сработал счетчик '/wiz/special/event/sport/hockey/standings/button'
        - assertMetrics: '*'
    После смены таба:
      beforeEach:
        - do: кликнуть на таб "Запад"
        - do: дождаться обновления таблицы
      Таблица - внешний вид:
        - assert: текст на кнопке в нижней части блока "Запад - полная таблица"
        - assert: внешний вид таблицы [second-tab-button-full-table]
        - assertMetrics: '*'
      Модалка с полной таблицей - внешний вид:
        - do: кликнуть по кнопке "Запад - полная таблица"
        - assert: внешний вид полной таблицы в модальном окне [second-tab-full-table]
        - tech: сработал счетчик '/wiz/special/event/sport/hockey/standings/button'
        - assertMetrics: '*'
    Повторная смена таба:
      beforeEach:
        - do: кликнуть на таб "Запад"
        - do: дождаться обновления таблицы
        - do: кликнуть на таб "Восток"
        - do: дождаться обновления таблицы
      Таблица - внешний вид:
        - assert: текст на кнопке в нижней части блока "Восток - полная таблица"
        - assert: внешний вид таблицы [first-tab-again-button-full-table]
        - assertMetrics: '*'
      Модалка с полной таблицей - внешний вид:
        - do: кликнуть по кнопке "Восток - полная таблица"
        - assert: внешний вид полной таблицы в модальном окне [first-tab-again-full-table]
        - tech: сработал счетчик '/wiz/special/event/sport/hockey/standings/button'
        - assertMetrics: '*'
  Дополнительные проверки при наличии табов в исходной таблице:
    С активной командой. Начальный таб - второй:
      params:
        foreverdata: '3271087486'
      beforeEach:
        - do: получить выдачу по запросу "foreverdata"
        - assert: на выдаче присутствует спортивный колдунщик
        - assert: в колдунщике присутствует блок "Турнирная таблица"
        - assert: активен таб "Запад"
        - assert: в нижней части блока присутствует кнопка "Запад - полная таблица"
      Начальный таб:
        Таблица - внешний вид:
          - assert: текст на кнопке в нижней части блока "Запад - полная таблица"
          - assert: внешний вид таблицы [start-second-tab-button-full-table]
          - assertMetrics: '*'
        Модалка с полной таблицей - внешний вид:
          - do: кликнуть по кнопке "Запад - полная таблица"
          - assert: внешний вид полной таблицы в модальном окне [start-second-tab-full-table]
          - tech: сработал счетчик '/wiz/special/event/sport/hockey/standings/button'
          - assertMetrics: '*'
      После смены таба:
        beforeEach:
          - do: кликнуть на таб "Восток"
          - do: дождаться обновления таблицы
        Таблица - внешний вид:
          - assert: текст на кнопке в нижней части блока "Восток - полная таблица"
          - assert: внешний вид таблицы [start-second-tab-tab-switched-button-full-table]
          - assertMetrics: '*'
        Модалка с полной таблицей - внешний вид:
          - do: кликнуть по кнопке "Восток - полная таблица"
          - assert: внешний вид полной таблицы в модальном окне [start-second-tab-tab-switched-full-table]
          - tech: сработал счетчик '/wiz/special/event/sport/hockey/standings/button'
          - assertMetrics: '*'
  На белорусском языке:
    - params:
        foreverdata: '1831188006'
        tld: by
        l10n: be
    - do: получить выдачу по запросу "foreverdata"
    - assert: на выдаче присутствует спортивный колдунщик
    - assert: в колдунщике присутствует блок "Турнирная таблица"
    - assert: в нижней части блока присутствует кнопка "Вся таблица"
    - do: кликнуть в кнопку "Вся таблица"
    - assert: открылся попап "Турнирная таблица"
    - assert: внешний вид попапа [full-table]

specs-integration:
  beforeEach:
    - do: получить выдачу по запросу "чемпионат испании"
    - assert: на выдаче присутствует спортивный колдунщик
    - assert: в колдунщике присутствует блок "Турнирная таблица"
    - assert: в нижней части блока присутствует кнопка "Вся таблица"
    - do: кликнуть в кнопку "Вся таблица"
    - assert: открылся попап "Турнирная таблица"
  Проверка наличия элементов турнирной таблицы:
    - assert: в турнирной таблице присутствует колонка "Команда" со списком команд
    - assert: в турнирной таблице присутствует колонка "Игр" с количеством игр
    - assert: в турнирной таблице присутствует колонка "Выиграно матчей" с количеством победных матчей
    - assert: в турнирной таблице присутствует колонка "Сыграно вничью" с количестовом ничейных матчей
    - assert: в турнирной таблице присутствует колонка "Проиграно матчей" с количеством проигрышных матчей
    - assert: в турнирной таблице присутствует колонка "Голов забито" с количеством забитых голов
    - assert: в турнирной таблице присутствует колонка "Голов пропущено" с количеством пропущенных голов
    - assert: в турнирной таблице присутствует колонка "Разница голов" с разницей забито-пропущено голов
    - assert: в турнирной таблице присутствует колонка "Очки" с количеством очков
    - assert: в турнирной таблице присутствует колонка "Последние матчи" с кружками последних матчей
    - assert: в турнирной таблице присутствует колонка "Следующий матч" с ссылками на следующие матчи
  Проверка переходов - команда:
    - do: кликнуть в название первой команды в колонке "Команда"
    - assert: в новой вкладке открылась выдача со спортивным колдунщиком по команде

tlds:
  - ru
  - by
  - ua
  - kz
  - uz

tags:
  - sport
  - reviewed

files:
  - features/adapter-special-event/adapter-special-event_type_sport/adapter-special-event_full-table/adapter-special-event_full-table@deskpad.hermione.js
  - features/adapter-special-event/adapter-special-event_type_sport/adapter-special-event_full-table/adapter-special-event_full-table@deskpad.hermione.e2e.js

v-team: Sport

counter: /$page/$main/$result[@wizard_name="special/event" and @subtype="football"]/scroller/"standings/button"
