feature: Одна организация
type: Отзывы

import-labels:
  - src/features/Reviews/Reviews.test/Reviews@touch-phone.testpalm.yml

specs-integration:
  beforeEach:
    - do: получить выдачу поиска по запросу 'кафе пушкин'
    - assert: |
        в выдаче есть колдунщик одной организации
        в колдунщике есть галерея отзывов
  Общие проверки в расширенной карточке:
    - do: кликнуть в таб 'Главное'
    - assert: |
        открылся сайдблок с расширенной карточкой организации,
        в расширенной карточке есть блок с отзывами
  Общие проверки в сайдблоке:
    - do: кликнуть по табу 'Читать все отзывы'
    - assert: |
        открылся сайдблок,
        в сайдблоке есть кнопки-фильтры отзывов,
        в сайдблоке есть отзывы

specs:
  beforeEach:
    - do: получить выдачу по запросу 'кафе пушкин'
    - assert: появилась карточка одной организации
  На Серпе:
    beforeEach:
      - assert: загрузились карточки отзывов
      - screenshot: пример внешнего вида карточек [companies-reviews-about-{{SET_NAME}} >> cards]
    Заголовок:
      - tags: 
          - smoke
          - pp_new_core
      - label: companies-reviews-about-{{SET_NAME}}
      - screenshot: пример внешнего вида карточек [cards]
      - do: кликнуть по заголовку 'Отзывы'
      - assert: открылся оверлей на табе отзывов
      - screenshot: пример внешнего вида таба с отзывами в оверлее [reviews-{{PLATFORM}}-{{BROWSER_TYPE}} >> reviews-cards.1org.overlay]
    Галерея отзывов:
      - tags: 
          - smoke
          - pp_new_core
      - do: кликнуть во третью карточку отзыва
      - assert: открылся оверлей на табе отзывов
      - assert: страница продскроллена к отзыву
    Ещё N отзывов:
      - tags: 
          - smoke
          - pp_new_core
      - do: кликнуть по ссылке 'Читать все отзывы'
      - assert: открылся оверлей на табе отзывов
      - screenshot: пример внешнего вида таба с отзывами в оверлее [reviews-{{PLATFORM}}-{{BROWSER_TYPE}} >> reviews-cards.1org.overlay]
  Главный таб в оверлее:
    beforeEach:
      - do: кликнуть в таб 'Главное'
      - assert: открылся оверлей организации
      - assert: загрузились отзывы в оверлее на главном табе
      - screenshot: пример внешнего вида отзывов на главном табе в оверлее [companies-reviews-overlay-{{SET_NAME}} >> main-overlay]
    Имя автора:
      - label: companies-reviews-overlay-{{SET_NAME}}
      - screenshot: пример внешнего вида отзывов на главном табе в оверлее [main-overlay]
      - do: кликнуть по ссылке на автора первого отзыва
      - assert: открылась ссылка в новой вкладке
    Кнопка Все отзывы:
      - tags: 
          - smoke
          - pp_new_core
      - do: кликнуть по ссылке 'Читать все отзывы' в конце списка отзывов
      - assert: открылся таб отзывов в оверлее
    Переход в таб отзывов:
      - do: кликнуть в таб 'N отзывов'
      - assert: показались отзывы
      - screenshot: внешний вид таба отзывов в оверлее [reviews-{{PLATFORM}}-{{BROWSER_TYPE}} >> reviews-cards.1org.overlay]
  Таб отзывов в оверлее:
    beforeEach:
      - do: кликнуть в таб 'N отзывов'
      - assert: открылся оверлей организации на табе отзывов
      - assert: загрузился список отзывов
      - screenshot: пример внешнего вид контента таба с отзывами в оверлее [reviews-{{PLATFORM}}-{{BROWSER_TYPE}} >> reviews-cards.1org.overlay]
    Имя автора:
      - do: кликнуть по ссылке на автора первого отзыва
      - assert: открылась ссылка в новой вкладке
    Дозагрузка отзывов по скроллу:
      - do: проскроллить таб отзывов до конца
      - assert: список отзывов дозагрузился

files:
  - features/touch-phone/companies/reviews/general/general.hermione.js
  - features/touch-phone/companies/reviews/general/general.hermione.e2e.js

v-team: VanillaGeo

counter: /snippet/companies/company/sideblock/reviews/tags/phrase

tags:
  - hasE2E

tlds: all
