feature: Колдунщик 1орг
type: Кнопки

specs-integration:
  Наличие элементов в карточке в правой колонке:
    - do: получить выдачу по запросу 'кафе пушкин' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: |
        на выдаче есть карточка организации в правой колонке,
        в карточке организации есть блок кнопок
  Наличие элементов в карточке в центре:
    - params:
        oid: 'b:114337144368'
    - do: получить выдачу по запросу 'кафе breadway екатеринбург' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: |
        на выдаче есть карточка организации в центре,
        в карточке организации есть блок кнопок

specs:
  Ссылки и счетчики:
    - do: получить выдачу по запросу "кафе пушкин" ('ресторан горыныч', 'frank ломоносова 28')
    - assert: |
        на странице присутствует карточка организации,
        в карточке организации есть кнопки
    - do: нажать на кнопку Заказать доставку
    - assert: откралась ссылка на Яндекс.Еду в новой вкладке
    - tech: сработал счётчик path="/$page/$parallel/$result/composite/tabs/about/actions/delivery[@action = "cta"]"
    - tech: отправился счетчик цели mc.yandex.ru/watch/1018907821 с параметром cta-button
    - do: нажать на кнопку Сайт
    - assert: открылся сайт в новой вкладке
    - tech: сработал счётчик path="/$page/$parallel/$result/composite/tabs/about/actions/site[@action = "site"]"
    - tech: отправился счетчик mc.yandex.ru/watch/1018907821 с параметром site
    - do: нажать на кнопку Как добраться
    - assert: открылись Яндекс.Карты в новой вкладке
    - tech: сработал счётчик path="/$page/$parallel/$result/composite/tabs/about/actions/route-button[@action = "route"]"
    - tech: отправился счетчик mc.yandex.ru/watch/1018907821 с параметром route
  В попапе:
    - tags: smoke
    - do: получить выдачу по запросу "кафе пушкин" ('ресторан горыныч', 'frank ломоносова 28')
    - assert: на странице присутствует карточка организации
    - do: нажать на первую похожую организацию
    - assert: на странице открылся попап с организацией
    - do: нажать на кнопку Заказать доставку
    - assert: откралась ссылка на Яндекс.Еду в новой вкладке
    - tech: отправился счетчик цели mc.yandex.ru/watch/1018907821 с параметром cta-button
    - do: нажать на кнопку Сайт
    - assert: открылся сайт в новой вкладке
    - tech: отправился счетчик mc.yandex.ru/watch/1018907821 с параметром site
    - do: нажать на кнопку Как добраться
    - assert: открылись Яндекс.Карты в новой вкладке
    - tech: отправился счетчик mc.yandex.ru/watch/1018907821 с параметром route
  Внешний вид в центре:
    - params:
        oid: 'b:1040159081'
    - do: получить выдачу по запросу "Отдел МВД России по району Марьино города Москвы, Москва"
    - assert: на странице присутствует карточка организации в центре
    - screenshot: внешний вид кнопок [plain]
  Advert кнопка с ифреймом:
    - do: получить выдачу по запросу "детский сад курочка ряба"
    - assert: |
        на странице присутствует карточка организации,
        в карточке организации есть кнопка "Заказать звонок"
    - do: нажать на элемент кнопку "Заказать звонок"
    - tech: сработал счётчик path="$page/$parallel/$result/composite/tabs/about/actions/advert[@action = "cta"]"
    - assert: на странице появился элемент ифрейм с формой заказа звонка
    - screenshot: пример внешнего вида [iframe]

files:
  - src/features/Companies/Companies.features/OrgActions/OrgActions.test/OrgActions@desktop.hermione.e2e.js
  - src/features/Companies/Companies.features/OrgActions/OrgActions.test/OrgActions@desktop.hermione.js

v-team: VanillaGeo

counter: /$page/$parallel/$result/composite/tabs/about/actions/site

tags:
  - react
  - hasE2E
  - geo
  - geo_one_org
  - geo_one_org_actions

tlds: all
