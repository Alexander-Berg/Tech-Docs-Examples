feature: Url-превью

import-steps:
    - tests/hermione/suites/messenger/shared-steps/open-messenger.testpalm.steps.yml

tlds: ru

specs:

  Превью при наборе сообщения:
    - attach: Открытие чата с эхо-ботом
    - do: написать в поле ввода "Привет http://ya.ru"
    - assert: |
        над полем ввода появляется блок превью ссылки
    - do: нажать "закрыть" в появившемся блоке превью над полем ввода сообщения
    - assert: |
        над полем ввода скрывается ранее показаный блок превью
    - do: изменить ссылку, стереть последнюю букву, чтобы получилось "Привет http://ya.r"
    - do: изменить ссылку, вернуть последнюю букву, чтобы получилось "Привет http://ya.ru"
    - assert: |
        над полем ввода опять появляется блок превью ссылки

  Сообщение с включенным превью:
    - attach: Открытие чата с эхо-ботом
    - do: написать в поле ввода "Привет http://ya.ru"
    - do: отправить сообщение
    - assert: |
        отправленное сообщение показывается с превью

  Сообщение с отключенным превью:
    - attach: Открытие чата с эхо-ботом
    - do: написать в поле ввода "Привет http://ya.ru"
    - do: нажать "закрыть" в появившемся блоке превью над полем ввода сообщения
    - do: отправить сообщение
    - do: начать редактирование отправленного сообщения
    - assert: |
        отправленное сообщение показывается без превью


files:
  - tests/hermione/suites/messenger/url-preview/url-preview.common.hermione.ts

v-team: Chat

tags:
  - yamb
  - q
