feature: ЖД
type: Страница заказа
description: >-
  Кейс проверяет предупреждение о том, что скоро вернуть билеты будет нельзя, а
  затем, что вернуть билеты уже нельзя. Случай, когда ЭР нет или она отменена. В
  этом случае вернуть билеты можно в любое время до отправления поезда со
  станции посадки пассажира.

  **Информация для асессоров: форма оплаты с полями ввода данных карты в
  тестинге намеренно пропускается. Шаги, где требуется ввести данные карты и
  нажать кнопку Оплатить, нужно пропустить.**


  Номер карты (не для асессоров): 5100003697253468

  CVN: 090

  Дата: 12/24

  Перейти на главную сервиса

  Перейти на вкладку Ж/Д билеты


  Создать заказ, где доступна электронная регистрация, для одного взрослого на
  сегодняшнюю дату, чтобы до отправления поезда оставалось чуть больше 1 часа 15
  минут. Рассматривается кейс, где станция отправления поезда = станции посадки
  пассажира.

  Для этого:

  * Зайти на выдачу  (можно искать подходящий поезд на выдачах Москва -
  Санкт-Петербург и обратно, Москва - Екатеринбург, любые другие выдачи)

  * Кликнуть по кнопке покупки (кнопка может называть по разному, сейчас -
  “Выбрать место”)

  * Дальше следовать по страницам покупки, дойти до страницы успешного заказа
  (хэппи пейдж)

  * Кликнуть по кнопке "Подробнее о заказе"

  * Отменить электронную регистрацию (действие отмены появляется по клику по
  гамбургеру на странице заказа - кнопка с тремя точками).
specs:
  'ЖД: Невозможность возврата билетов, когда нет ЭР':
    - do: Перейти на страницу заказа
    - assert: >-
        * На странице заказа нет информации на желтом фоне об истечении времени
        на возврат

        * Действие Отменить электронную регистрацию поменялось на Восстановить
        электронную регистрацию
    - do: 'Дождаться, пока до отправления поезда останется 1 час'
    - assert: >-
        * На странице заказа не появляется текста на желтом фоне о невозможности
        возврата билетов

        * Есть кнопки Сдать билет

        * Действия Восстановить электронную регистрацию присутсвуют
    - do: >-
        Дождаться, пока до отправления поезда со станции посадки пассажира
        останется 15 минут
    - assert: >-
        * На странице заказа появился текст на желтом фоне “Через 15 минут
        вернуть билет онлайн будет нельзя. Вы сможете [сдать его только в
        кассе].”

        * Есть действие Сдать билет

        * Есть действия Восстановить электронную регистрацию

        * В тексте количество оставшихся минут соответствует отсчету времени
    - do: 'Подождать, пока поезд отправится со станции посадки пассажира'
    - assert: >-
        * Текст на желтом фоне сменился на “Вернуть билет онлайн на этот поезд
        нельзя, так как он уже отправился со станции [СтанцияПосадкиПассажира].
        Вы можете сдать билет в кассе.”

        * Пропали кнопки Сдать билет

        * Вместо Сдать билет появилась ссылка Можно сдать в кассе

        * Нет кнопок смены статуса электронной регистрации
manual: true
Функциональность: Действия с заказом
Устройство: Десктоп
Страница: Страница заказа
Сервис: ЖД
Тестирование асессорами: Да
Окружение: Testing
Автор: shenfeld
