feature: Карточка ТОПа Спорта

specs:
  Внешний вид:
    - tags:
      - sportauto
    - params:
        foreverdata: '3745049400'
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета (название заголовка Тестовая страница для компонента NewsCardSportTop — Турбо)
    - screenshot: внешний вид соответствует скриншоту [plain]

  Внешний вид с иконкой избранного:
    - tags:
      - sportauto
    - params:
        exp_flags: yxnews_nerpa_sport_favorites=1
    - do: получить выдачу по запросу 'https://yandex.ru/turbo?stub=newscardsporttop/default.json&exp_flags=yxnews_nerpa_sport_favorites=1'
    - screenshot: внешний вид соответствует скриншоту [favorites]

  обрезает длинный источник:
    - tags:
      - sportauto
    - params:
        foreverdata: '3513027039'
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета (название заголовка Тестовая страница для компонента NewsCardSportTop с длинным источником — Турбо)
    - screenshot: внешний вид соответствует скриншоту [longSource]

  располагается в блоке 'Главные новости' [manual]:
    - automation: NERPA-8437
    - tags: backend_sport
    - do: открыть сервис Я.Спорт на странице рубрики Главное
    - do: подождать, пока страница полностью загрузится
    - assert: |
        под матч-центром располагается блок 'Главные новости',
        'Главные новости' содержат несколько карточек (от 1 до 5),
        заголовок первой карточки в блоке больше заголовков остальных карточек,
        внизу карточки расположены метка издательства и время публикации, иконка добавления в коллекции, иконка комментирования, счетчик комментариев, иконка лайка, счетчик лайков (счетчик со значением 0 не отображается)

  может содержать большое и маленькие фото [manual]:
    - automation: NERPA-8437
    - do: открыть сервис Я.Спорт на странице любой рубрики
    - do: подождать, пока страница полностью загрузится
    - do: обновлять страницу до получения ожидаемого результата (фото в карточках могут показываться не всегда)
    - assert: |
        под матч-центром располагается блок 'Главные новости',
        первая карточка может содержать большую картинку,
        остальные карточки могут содержать маленькую картинку,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-12-18_15-20-06.png

  позволяет перейти на турбо-страницу [manual]:
    - automation: NERPA-8437
    - tags: backend_sport
    - do: открыть сервис Я.Спорт на странице рубрики Главное
    - do: подождать, пока страница полностью загрузится
    - assert: |
        под матч-центром располагается блок 'Главные новости',
        'Главные новости' содержат несколько карточек (от 1 до 5),
        заголовок первой карточки в блоке больше заголовков остальных карточек,
        внизу карточки расположены метка издательства и время публикации, иконка добавления в коллекции, иконка комментирования, счетчик комментариев, иконка лайка, счетчик лайков (счетчик со значением 0 не отображается)
    - do: тапнуть по заголовку любой карточки в блоке 'Главные новости'
    - assert: |
        происходит переход на страницу сюжета,
        сюжет соответствует карточке, с которой произошел переход
    - do: перейти на турбостраницу тапом по иконке источника над заголовком в сюжете
    - assert: |
        происходит переход на турбо-страницу издательства в новой вкладке (у некоторых издательств может открыться своя страница источника),
        турбо-страница соответствует карточке
    - do: вернуться назад в рубрику "Главное" любым способом
    - do: найти любую рубрику, в которой в первой карточке в блоке 'Главные новости' отобразится большое фото (фото может не приходить, это не баг)
    - do: тапнуть на большое фото первой карточки в блоке 'Главные новости'
    - assert: |
        происходит переход на страницу сюжета,
        сюжет соответствует карточке, с которой произошел переход
    - do: вернуться назад любым способом, перейти в рубрику Главное
    - do: тапнуть в любое место любой карточки, кроме первой, в блоке 'Главные новости' (кроме тапа по иконкам)
    - assert: |
        карточка полностью кликабельна,
        происходит переход на страницу сюжета,
        сюжет соответствует карточке, с которой произошел переход

files:
  - platform/components/NewsCardSportTop/__tests__/news-card-sport-top@phone.hermione.js

v-team: Sport

manager: skhovaev

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
