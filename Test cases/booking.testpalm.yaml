feature: Авиабилеты
type: Бронирование
description: Поиск и бронирование билетов - BoY

specs:
    Бронирование авиабилетов неавторизованным пользователем:
        - do: Выполнить поиск авиабилетов по направлению Москва - Сочи
        - do: Отфильтровать рейсы авиакомпании "Аэрофлот" при помощи фильтра авиакомпаний
        - do: Кликнуть по сниппету с пометкой "Заказ на Я.Путешествиях"
        - do: На открывшейся странице кликнуть по кнопке "Купить" для Яндекс Путешествий
        - assert: Открылась страница редиректа и через некоторое время произошел редирект на страницу бронирования
        - do: Заполнить форму пассажира и форму контактов валидными данными
        - do: Нажать по кнопке оплатить
        - assert: Открылась страница оплаты
        - do: |
                Заполнить форму оплаты. Реквизиты тестовой карты:
                Номер - 5555555555555599
                Дата - 12/24
                CVV - 123
        - do: Нажать кнопку "оплатить"
        - assert: Оплата прошла успешно. Спустя некоторое время (не больше минуты) произошёл редирект на страницу happyPage
        - do: Нажать кнопку "Подробнее о заказе"
        - assert: В шапке отображается номер для регистрации на рейс
        - assert: Данные о перелёте совпадают с данными на странице бронирования (отправление, прибытие, номер рейса, багаж, ручная кладь)
        - assert: Данные пассажиров совпадают с теми, что были указаны на странице бронирования
        - assert: Цена совпадает с ценой указанной на шаге бронирования
        - assert: Почта и телефон совпадают с теми, что были указаны на странице бронирования

    Бронирование авиабилетов авторизованным пользователем:
        - tech: Создать аккаунт (https://wiki.yandex-team.ru/test-user-service/)
        - do: |
              Зайти в личный кабинет (иконка ЛК находится на главной в правом верхнем углу)
              Перейти в "Мои поездки" (иконка-чемоданчик в правом верхнем углу)
              Перейти во вкладку "Пассажиры"
        - assert: Отображается кнопка "Добавить первого пассажира"
        - do: Нажать на пноку "Добавить первого пассажира"
        - assert: Открылась форма заполнения данных
        - do: |
              Заполнить форму добавления пассажира все поля на латинице
              ФИО - Ivanov Ivan Ivanovich
              Дата рождения - 01.01.1970
              Пол - м
              Гражданство - Россия
              Документ - Паспорт РФ
              Серия и Номер - 6505654321
        - do: Нажать кнопку "Сохранить"
        - assert: Пассажир добавился, данные совпадают с введенными (проверяем все поля документа, который добавился)
        - assert: Информация о пассажире совпадает (псевдоним = Фамилия + Имя)
        - do: Выполнить поиск авиабилетов по направлению Москва - Сочи
        - do: Отфильтровать рейсы авиакомпании "Аэрофлот" при помощи фильтра авиакомпаний
        - do: Кликнуть по сниппету с пометкой "Заказ на Я.Путешествиях"
        - do: На открывшейся странице кликнуть по кнопке "Купить" для Яндекс Путешествий
        - assert: Открылась страница редиректа и через некоторое время произошел редирект на страницу бронирования
        - do: Выбрать интент (синяя кнопка выше формы пассажиров) с добавленным ранее в личном кабинете пассажиром - форма заполнится данными
        - do: Заполнить форму контактов валидными данными
        - do: Нажать по кнопке оплатить
        - assert: Открылась страница оплаты
        - do: |
            Заполнить форму оплаты. Реквизиты тестовой карты:
            Номер - 5555555555555599
            Дата - 12/24
            CVV - 123
        - do: Нажать кнопку "оплатить"
        - assert: Оплата прошла успешно. Спустя некоторое время (не больше минуты) произошёл редирект на страницу happyPage
        - do: Нажать кнопку "Подробнее о заказе"
        - assert: В шапке отображается номер для регистрации на рейс
        - assert: Данные о перелёте совпадают с данными на странице бронирования (отправление, прибытие, номер рейса, багаж, ручная кладь)
        - assert: Данные пассажиров совпадают с теми, что были указаны на странице бронирования
        - assert: Цена совпадает с ценой указанной на шаге бронирования
        - assert: Почта и телефон совпадают с теми, что были указаны на странице бронирования
        - tech: Удаляем аккаунт

files:
    - tests/desktop/avia/booking/booking.hermione.ts

tags: smoke

Сервис: Авиа
Функциональность: BOY
Устройство:
    - Десктоп
Окружение:
    - Testing
Тестирование асессорами: Нет
