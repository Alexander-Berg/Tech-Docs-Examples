feature: Саджест
type: Карусель

specs:
  Пробки:
    beforeEach:
      - do: получить выдачу по запросу "пробки в санкт-петербурге онлайн сейчас" (по мере ввода запроса появится карусель пробок. как только карусель появилась, остановить ввод запроса)
      - assert: получена выдача по указанному запросу
      - do: кликнуть в инпут
      - assert: саджест открыт поверх серповой выдачи, присутствует карусель с прогнозом пробок
    Внешний вид:
      - screenshot: пример внешнего вида [carousel]
      - assertMetrics: '*'
    Скролл:
      - do: проскроллить карусель до конца
      - screenshot: пример внешнего вида [carousel/end]
      - assertMetrics: '*'
    Выбор подсказки:
      - do: кликнуть на карусельную подсказку
      - assert: |
          произошла перезагрузка с текстом карусельной подсказки
          получена выдача по указанному запросу
      - assertMetrics: '*'
  Погода:
    beforeEach:
      - do: получить выдачу по запросу "погода в сыктывкаре" (выполняйте НЕ в режиме инкогнито, вводите запрос по одной букве до появления карусели погоды. Альтернативные запросы - замените 'сыктывкар' на любой город вашего региона)
      - assert: получена выдача по указанному запросу
      - do: кликнуть в инпут
      - assert: саджест открыт поверх серповой выдачи, присутствует карусель с прогнозом погоды
    Внешний вид:
      - screenshot: пример внешнего вида [carousel]
      - assertMetrics: '*'
    Горизонтальная ориентация:
      - do: повернуть телефон в горизонтальную ориентацию
      - screenshot: примерный внешний вид в горизонтальной ориентации [carousel/landscape/weather]
      - assertMetrics: '*'
    Скролл:
      - do: проскроллить карусель до конца
      - screenshot: пример внешнего вида [carousel/end]
      - assertMetrics: '*'
    Выбор подсказки:
      - do: кликнуть на карусельную подсказку
      - assert: |
          произошла перезагрузка с текстом карусельной подсказки
          получена выдача по указанному запросу
      - assertMetrics: '*'
  Счетчик:
    - do: получить выдачу по запросу "погода в"
    - assert: получена выдача по указанному запросу
    - do: кликнуть в инпут
    - assert: саджест открыт поверх серповой выдачи, присутствует карусель с прогнозом погоды
    - do: проскроллить карусель до конца
    - do: добавить в инпут " мо"
    - assert: саджест обновился в соответствии с запросом
    - do: |
        проскроллить карусель до конца
        кликнуть на карусельную подсказку
    - assert: |
        произошла перезагрузка с текстом карусельной подсказки
        получена выдача по указанному запросу
    - tech: отправился счетчик саджеста
    - tech: поле path соответствует регулярному выражению /serp_ru_touch\.mouse\.p6\.nah_not_shown\.click_by_mouse/
    - tech: поле tpah_log содержит два 'scroll' и один 'phrase'
    - tech: поле type_counts содержит 'carousel'
    - assertMetrics: '*'

files:
  - features/touch-phone/suggest/suggest-carousel.hermione.js

v-team: Suggest

qa-engineer:
  - alex-radn

manager:
  - glebshp

tags:
  - suggest
  - input
  - reviewed
  - skip_e2e_check
#Добавлен тег, так как фича пока еще под флагом

tlds:
  - ru
  - by
  - ua
  - kz
  - uz

browsers:
  notFor:
    - searchapp-phone-group
