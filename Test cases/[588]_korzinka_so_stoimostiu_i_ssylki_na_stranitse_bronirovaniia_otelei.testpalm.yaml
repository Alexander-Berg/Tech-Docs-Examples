feature: Отели
type: ''
description: >-
  Для прохождения кейса в таче можно пропускать шаги с наведением на иконки.

  Кейс проверяет корзинку со стоимостью, ссылки под ней, а так же модальное окно
  с реквизитами организаций:

  ![image](https://jing.yandex-team.ru/files/shenfeld/Yandeks.Puteshestviya__aviabilety_bilety_na_poezd_bronirovanie_otelei_2019-03-26_18-15-38.png)

  В таче корзинка расположена внизу страницы.

  Для попадания на тестовую страницу бронирования отелей см.
  [travel-644](https://testpalm.yandex-team.ru/testcase/travel-644)

  Для попадания на продовую страницу бронирований нужно сделать запрос в поиске
  Яндекса, например “отель в Москве”, далее выбрать отель и кликнуть по
  предложению от Яндекс.Путешествий.
specs:
  Корзинка со стоимостью и ссылки на странице бронирования отелей:
    - do: >-
        Перейти на страницу бронирования на одну ночь для любого отеля по
        инструкции из подготовки
    - assert: >-
        * Справа есть корзинка со стоимостью и кнопкой Оплатить. Для тачей -
        корзинка должна быть расположена внизу, под блоком Контакты.

        * Есть пункты: 1 ночь и сумма, налоги и сборы и сумма, итоговая сумма
        (равна сумме за ночь и сбор), указание даты и времени для бесплатного
        возврата (либо указание "Нет бесплатной отмены)", чекбокс "Получать
        рассылку Яндекс.Путешествий"

        * Под корзинкой есть текст со ссылками "Нажимая «Оплатить», вы
        соглашаетесь с пользовательским соглашением, условиями бронирования.

        Мы подтвердим бронирование и спишем полную сумму с вашей карты сегодня.

        Данные об отеле предоставлены продавцами-партнёрами"

        * Чекбокс "Получать рассылку Яндекс.Путешествий" по умолчанию не выбран
    - do: >-
        Навести курсор на иконку вопроса возле бесплатной отмены (если она есть;
        если нет - пропускаем п. 2-4)
    - assert: '* Появился указатель-рука'
    - do: Кликнуть по иконке вопроса
    - assert: >-
        * Появился попап с указанием даты и времени для бесплатного возврата
        (совпадает с датой на корзинке), даты и времени с которого стоимость не
        возвращается
    - do: Кликнуть по области вне попапа
    - assert: '* Попап закрылся'
    - do: Кликнуть по чекбоксу “Получать рассылку Яндекс.Путешествий”
    - assert: '* Галка установилась'
    - do: Кликнуть по ссылке "пользовательским соглашением"
    - assert: |-
        * Открылась страница с пользовательским соглашением
        https://yandex.ru/legal/travel_termsofuse
    - do: Кликнуть по ссылке "условиями бронирования"
    - assert: >-
        * Открылась страница с условиями бронирования отелей на сервисе
        "Яндекс.Путешествия"

        https://yandex.ru/legal/hotels_booking_conditions
    - do: Кликнуть по ссылке "продавцами-партнерами"
    - assert: >-
        * Открылось модальное окно "Реквизиты"

        * Фон за окном затемнился

        * В окне есть реквизиты организаций: отеля, партнера, Яндекса

        * Для каждой организации есть информация: ОГРН, фактический и
        юридический адреса, время работы (фактического может не быть, если он
        совпадает с юридическим)
    - do: Кликнуть по области вне модального окна
    - assert: '* Окно закрылось'
    - do: |-
        Вернуться на поиск отелей
        Сделать поиск того же отеля на на 1 гостя на 4 ночи
        Перейти на предложение Яндекс.Путешествий
    - assert: >-
        * Открылась страница бронирования отеля на Яндекс.Путешествиях

        * В корзинке указано количество ночей - 4 ночи

        * Рядом с указанием количества ночей есть иконка для раскрытия
        выпадающего списка
        ![image](https://jing.yandex-team.ru/files/shenfeld/Yandeks.Puteshestviya__aviabilety_bilety_na_poezd_bronirovanie_otelei_2019-03-26_18-06-44.png)
    - do: Навести курсор на иконку
    - assert: '* Появился указатель-рука'
    - do: Кликнуть по иконке
    - assert: >-
        * Развернулся список

        * Иконка сменилась на
        ![image](https://jing.yandex-team.ru/files/shenfeld/Yandeks.Puteshestviya__aviabilety_bilety_na_poezd_bronirovanie_otelei_2019-03-26_18-07-52.png)

        * В списке перечислены 4 ночи в формате "1 ночь, 2 ночь..." с указанием
        стоимости за каждую ночь

        * Сумма за 4 ночи равна сумме этих стоимостей
    - do: Кликнуть по иконке выпадающего списка
    - assert: '* Список свернулся'
    - do: 'Если есть бесплатная отмена, кликнуть на иконку вопроса возле нее'
    - assert: >-
        Появился попап с указанием даты и времени для бесплатного возврата
        (совпадает с датой на корзинке), датой и времени, с которого стоимость
        не возвращается
    - do: Кликнуть по области вне попапа
    - assert: Попап закрылся
manual: true
Функциональность: Бронирование отелей
Устройство:
  - Десктоп
  - Тач
tlds: ru
Сервис: Отели
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Автор: shenfeld
