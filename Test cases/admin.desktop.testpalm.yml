feature: Настройки для администраторов

import-steps:
    - tests/hermione/suites/desktop/shared-steps/backoffice.testpalm.steps.yml
    - tests/hermione/suites/desktop/shared-steps/new-dialogue.testpalm.steps.yml
    - tests/hermione/suites/desktop/shared-steps/open-backoffice.testpalm.steps.yml

tlds: ru

specs:
    Добавить сотрудника позитивный:
        - automation: YDO-6833
        - attach: Открыть управление
        - do: нажать на кнопку "Добавить сотрудника"
        - assert: |
              открылось окно добавления сотрудника
              кнопка "Добавить сотрудника" серая и некликабельная
        - do: ввести любой еще не добавленный в список сотрудников email Яндекса
        - assert: кнопка "Добавить сотрудника" стала синей и кликабельной
        - do: нажать на кнопку
        - assert:  |
              поле ввода Email очистилось
              появился тост "Сотрудник добавлен"
        - do: закрыть окно нажатием на крестик
        - assert: в списке операторов появился добавленный email

    Добавить сотрудника не Я:
        - automation: YDO-6833
        - attach: Открыть управление
        - do: нажать на кнопку "Добавить сотрудника"
        - do: ввести email не из Яндекса, например, test@rambler.ru
        - assert:  |
              кнопка "Добавить сотрудника" НЕ стала синей и кликабельной
              появился красный текст "Email не от Яндекса или не существует"

    Добавить сотрудника рандом:
        - automation: YDO-6833
        - attach: Открыть управление
        - do: нажать на кнопку "Добавить сотрудника"
        - do: ввести случайный набор символов
        - do: нажать enter
        - assert: кнопка "Добавить сотрудника" НЕ стала синей и кликабельной

    Добавить сотрудника повторно:
        - automation: YDO-6833
        - attach: Открыть управление
        - do: нажать на кнопку "Добавить сотрудника"
        - do: ввести любой еще не добавленный в список сотрудников email Яндекса
        - assert: кнопка "Добавить сотрудника" стала синей и кликабельной
        - do: нажать на кнопку Добавить
        - assert:  |
              поле ввода Email очистилось
              появился тост "Сотрудник добавлен"
        - do: закрыть окно нажатием на крестик
        - do: нажать на "Добавить сотрудника"
        - do: повторно ввести тот же самый email
        - assert:  |
              кнопка "Добавить сотрудника" серая и некликабельная
              появилась красная надпись "Сотрудник уже добавлен"

    Сделать администратором:
        - automation: YDO-6833
        - attach: Открыть управление
        - do: нажать на кнопку "Добавить сотрудника"
        - do: ввести любой еще не добавленный в список сотрудников email Яндекса
        - assert: кнопка "Добавить сотрудника" стала синей и кликабельной
        - do: нажать на кнопку Добавить
        - assert:  |
              поле ввода Email очистилось
              появился тост "Сотрудник добавлен"
        - do: закрыть окно нажатием на крестик
        - assert: сотрудник отображается в блоке операторов
        - do: в окне Управления сотрудниками нажать три точки рядом с именем добавленного сотрудника
        - assert: появилось контекстное меню "Сделать администратором" и "Удалить"
        - do: нажать "Сделать администратором"
        - assert:  |
              появился тост "XXX" получил(а) права администратора
              оператор переместился в блок администраторов

    Убрать из администраторов:
        - automation: YDO-6833
        - attach: Открыть управление
        - do: нажать на кнопку "Добавить сотрудника"
        - do: ввести любой еще не добавленный в список сотрудников email Яндекса
        - assert: кнопка "Добавить сотрудника" стала синей и кликабельной
        - do: нажать на кнопку Добавить
        - assert:  |
              поле ввода Email очистилось
              появился тост "Сотрудник добавлен"
        - do: закрыть окно нажатием на крестик
        - assert: сотрудник отображается в блоке операторов
        - do: в окне Управления сотрудниками нажать три точки рядом с именем добавленного сотрудника
        - assert: появилось контекстное меню "Сделать администратором" и "Удалить"
        - do: нажать "Сделать администратором"
        - do: нажать на три точки рядом с переместившимся в блок Администраторов оператором
        - assert: появилось контекстное меню с пунктами "Убрать из администраторов" и "Удалить"
        - do: нажать "Убрать из администраторов"
        - assert: |
              появился тост "XXX" больше не является администратором
              администратор переместился в блок операторов

    Удалить оператора:
        - automation: YDO-6833
        - attach: Открыть управление
        - do: нажать на кнопку "Добавить сотрудника"
        - do: ввести любой еще не добавленный в список сотрудников email Яндекса
        - assert: кнопка "Добавить сотрудника" стала синей и кликабельной
        - do: нажать на кнопку Добавить
        - assert:  |
              поле ввода Email очистилось
              появился тост "Сотрудник добавлен"
        - do: закрыть окно нажатием на крестик
        - assert: сотрудник отображается в блоке операторов
        - do: в окне Управления сотрудниками нажать три точки рядом с именем добавленного сотрудника
        - assert: появилось контекстное меню "Сделать администратором" и "Удалить"
        - do: нажать "Удалить"
        - assert: появилось окно "Вы уверены, что хотите удалить "XXX" из кабинета операторов?"
        - do: нажать "Нет"
        - assert: окно закрылось
        - do: нажать "Удалить"
        - do: нажать "Да"
        - assert:  |
              появился тост "XXX" удален(а) из кабинета операторов
              оператор исчез из блока управления сотрудниками

    Удалить администратора:
        - automation: YDO-6833
        - attach: Открыть управление
        - do: нажать на кнопку "Добавить сотрудника"
        - do: ввести любой еще не добавленный в список сотрудников email Яндекса
        - assert: кнопка "Добавить сотрудника" стала синей и кликабельной
        - do: нажать на кнопку Добавить
        - assert:  |
              поле ввода Email очистилось
              появился тост "Сотрудник добавлен"
        - do: закрыть окно нажатием на крестик
        - assert: сотрудник отображается в блоке операторов
        - do: в окне Управления сотрудниками нажать три точки рядом с именем добавленного сотрудника
        - assert: появилось контекстное меню "Сделать администратором" и "Удалить"
        - do: нажать "Сделать администратором"
        - do: в окне Управления сотрудниками нажать три точки рядом с именем добавленного сотрудника
        - assert: появилось контекстное меню "Сделать администратором" и "Удалить"
        - do: нажать "Удалить"
        - assert: появилось окно "Вы уверены, что хотите удалить "XXX" из кабинета операторов?"
        - do: нажать "Нет"
        - assert: окно закрылось
        - do: нажать "Удалить"
        - do: нажать "Да"
        - assert:  |
              появился тост "XXX" удален(а) из кабинета операторов
              оператор исчез из блока управления сотрудниками

    Автораспределение чатов:
        - automation: YDO-6833
        - attach: Открытие настроек
        - assert: есть тумблер автораспределения чатов
        - do: кликнуть по строке с тумблером автораспределения
        - assert: тумблер автораспределения поменял состояние

files: []

v-team: Uslugi

tags:
    - no_assessors
    - skip_manual_check
    - floyd
    - smoke
