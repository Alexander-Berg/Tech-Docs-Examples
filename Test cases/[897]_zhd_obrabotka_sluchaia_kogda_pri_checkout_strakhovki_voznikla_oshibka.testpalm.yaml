feature: ЖД
type: Оплата
description: |-
  Для воспроизведения ошибки в трейн-апи нужна помощь бекендеров.
  Находимся на странице подтверждения жд заказа для одного пассажира
specs:
  'Обработка случая, когда при Checkout страховки возникла ошибка':
    - do: |-
        Перейти на покупку любого жд билета
        Ввести ФИО из описания
        Установить чекбокс страховки
        Нажать кнопку Ввести карту и оплатить
    - assert: >-
        * Через какое-то время появилось модальное окно c текстом "Не удалось
        купить страховой полис

        При покупке страхового полиса произошла ошибка" и двумя кнопками
        "Выбрать места заново" и "Продолжить без страховки"
    - do: Нажать на кнопку "Продолжить без страховки"
    - assert: Открылась форма оплаты
    - do: |-
        Ввести данные тестовой карты
        Нажать кнопку Оплатить
    - assert: |-
        * Через какое-то время произошел переход на страницу заказа
        * Итоговая сумма без учета страховки
        * В расшифровке стоимости билетов нет пункта страховки
    - do: |-
        Создать еще один заказ, дойти до страницы подтверждения
        Выбрать чекбокс страховки
        Нажать кнопку Ввести карту и оплатить
    - assert: >-
        * Через какое-то время появилось модальное окно c текстом “Не удалось
        купить страховой полис

        При покупке страхового полиса произошла ошибка” и двумя кнопками
        “Выбрать места заново” и “Продолжить без страховки”
    - do: Нажать кнопку "Выбрать места заново"
    - assert: '* Произошел переход на страницу выбора мест'
    - do: Дойти до шага подтверждения
    - assert: '* Чекбокс страховки по умолчанию выключен'
manual: true
Устройство: Десктоп
Страница: Оплата
Сервис: ЖД
Тестирование асессорами: Нет
Окружение: Testing
Автор: shenfeld
