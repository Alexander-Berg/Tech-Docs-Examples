feature: Hotels / Колдунщик многих организаций
type: Стандартный вид

specs:
  Rum метрики:
    beforeEach:
      - do: получить выдачу по запросу 'отели в москве'
      - assert: появился колдунщик оргмн
      - do: кликнуть в "Найти отель"
      - assert: |
          открылся сайдблок
          запустился прогресс-бар
          прогресс-бар завершился
          показался список отелей
    Дозагрузка результатов (next-portion):
      - tags:
          - orgmn
          - sideblock
          - button
      - do: нажать кнопку 'Показать еще' в конце списка карточек
      - assert: ниже появились новые результаты
      - tech: |
          проверить наличие счётчика '/tech/perf/delta'
          с counterId='companies_hotels-phone_next_portion'
          и наличие в нем переменных time.start, time.end, delta
      - tech: |
          проверить наличие счётчика
          path='/tech/perf/resource_timing'
          с counterId='companies_hotels-phone_next_portion'
    Сабмит формы (form-submit):
      - tags:
          - orgmn
          - popup
          - button
          - progress-bar
          - sideblock
          - hotels-form
      - do: |
          изменить фильтры, например количество гостей
          нажать кнопку 'Найти отель'
      - assert: |
          запустился прогресс-бар
          прогресс-бар завершился
          список отелей обновился
      - tech: |
          проверить наличие счётчика '/tech/perf/delta'
          с counterId='companies_hotels-phone_form_submit'
          и наличие в нем переменных time.start, time.end, delta
      - tech: |
          проверить наличие счётчика
          path='/tech/perf/resource_timing'
          с counterId='companies_hotels-phone_form_submit'

files:
  - features/companies/hotels/hotels-rum@touch-phone.hermione.js

v-team: KotTeam

counter: /snippet/companies/travel_map

tags:
  - no_assessors
  - skip_e2e_check

tlds: none
