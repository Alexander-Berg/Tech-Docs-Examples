feature: Страница хоккейного матча на десктопе

specs-integration:
  содержит основные элементы:
    - do: перейти на страницу футбольного матча по клику на матч
    - assert: |
        новостные карточки спорта отображаются под блоками,
        справа присутствует рекламный блок (если ширина окна браузера >1260px)
    - do: кликнуть на любую рубрику в рубрикаторе
    - assert: |
        происходит переход в выбранную рубрику,
        в рубрикаторе выделена выбранная рубрика

  содержит Новости хоккея:
    - tags: 
      - backend_sport  
    - do: кликнуть на вкладку "Вчера" или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу хоккейного матча кликом на любой матч
    - do: поскроллить матч ниже блоков видео, "Ход матча", "Состав" до блока "Новости хоккея"
    - assert: |
        страница матча содержит новостные карточки,
        Обратите внимание! блока "Состав" может не быть - это ок, заводить на такое баги не нужно!
    - do: проскроллить страницу матча до лоадера
    - assert: загружаются новые карточки
    - do: проскроллить страницу на несколько порций карточек
    - assert: |
        новостной блок помимо новостных карточек может содержать карточки с каруселями видео (каруселей видео может и не быть, это ок) и рекламные блоки,
        карусели видео скроллятся
    - do: кликнуть по заголовку или картинке любой новостной карточки
    - assert: в той же вкладке открывается сюжет
    - do: перейти назад на страницу хоккейного матча
    - do: авторизоваться аккаунтом с подпиской Яндекс.Плюс (логин и пароль можно взять тут - https://wiki.yandex-team.ru/eva/testing/projects/nerpa/#loginyiparolidljatestovyxpolzovatelejjspodpiskojjpljusa)
    - do: кликнуть по любому видео на странице матча
    - assert: |
        если это матч турнира кхл - видео открывается в новой вкладке на стороннем сервисе,
        если это матч НХЛ - видео проигрывается в текущей вкладке в оверлее (для аккаунта с Плюсом некоторые видео проигрываются на странице "Трасляции"),
        Обратите внимание! Если вы находитесь не в РФ - вместо видео у вас будет отображена заглушка "Нет доступных лицензий". В данном случае это ок, заводить на такое баги не нужно!

  может переключать федерации в блоке Турнирная таблица:
    - do: тапнуть по переключателю Запад в блоке Турнирная таблица
    - assert: |
        с анимацией отобразился состав западной федерации,
        в блоке с переключателем выделен Запад

specs:
  aliases:
    &goTo
      - do: открыть главную страницу сервиса Я.Спорт
      - do: кликнуть на "Матч-центр" в рубрикаторе
      - assert: |
          произошел переход в матч-центр,
          в рубрикаторе выделена рубрика "Матч-центр",
          в подрубрикаторе выделена вкладка "Футбол" и открыт футбольный календарь
          Обратите внимание! На небольших экранах при клике на любую из подрубрик матч-центра подрубрикатор может меняться: "Биатлон" может прятаться за многоточие - это ОК, баг на такое заводить не нужно!
          внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-11-25_17-12-42.png
      - do: кликнуть на "Хоккей" в подрубрикаторе матч центра https://jing.yandex-team.ru/files/nightsonne/2020-12-07_15-37-53.png
      - assert: |
            открыт хоккейный календарь на вкладке "Сегодня"
            хоккейный календарь содержит дата пикер https://jing.yandex-team.ru/files/nightsonne/2020-12-07_15-38-59.png,
            обртите внимание! если матчей нет ни вчера, ни сегодня, ни завтра - ни одна вкладка календаря не будет выделена, а будет заглушка о том, что событий не найдено - это ок, заводить на такое баги не нужно! если матчи есть вчера - будет выделена вкладка "Вчера"

  содержит основные элементы [manual]:
    - tags: backend_sport
    - reasonNotToAuto:
      - Скриншоты этих блоков повторно не нужны, т.к. они уже сделаны в соседних тестах.
    - *goTo
    - do: кликнуть на вкладку "Вчера" или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу хоккейного матча
    - assert: |
        на странице есть виджет результата матча со счетом, иконками и названием команд,
        под виджетом может располагаться блок с видео матча,
        под виджетом могут быть блоки "Ход матча", "Состав", блоки "Турнирная таблица", "Другие матчи" располагаются справа от виджета!
        новостные карточки спорта могут отображаться слева и под блоками,
        справа присутствует рекламный блок,
        (Обратите внимание! Если вы находитесь не в РФ - вместо видео у вас будет отображена заглушка "Нет доступных лицензий". В данном случае это ок, заводить на такое баги не нужно!)
    - do: кликнуть на любую рубрику в рубрикаторе, кроме "Матч-центра"
    - assert: |
        происходит переход в выбранную рубрику,
        рубрика ввыделена в рубрикаторе

  может содержать иконку-индикатор видео:
    - *goTo
    - do: кликнуть на вкладку Вчера или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: |
        открыт список матчей за вчера (или за 5 декабря),
        некоторые матчи содержат иконку-индикатор видео, скрин https://jing.yandex-team.ru/files/kossakovskaya/2021-09-06_13-17-39.png

  может содержать просмотрщик видео для прошедших матчей [manual]:
    - reasonNotToAuto:
      - Нет возможности автоматизировать воспроизведение видео.
    - do: открыть матч https://yandex.ru/sport/event/m540077
    - assert: |
        отображается информация о матче, в том числе медиаблок "Видео о матче",
        внешний вид - https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-29%20в%2015.24.29.png,
        Обратите внимание! Если вы находитесь не в РФ - вместо видео у вас будет отображена заглушка "Нет доступных лицензий". В данном случае это ок, заводить на такое баги не нужно! Просто скипните кейс
    - do: нажать на любое видео без иконки "Смотреть с плюсом"
    - assert: |
        открылся просмотрщик видео,
        в основном блоке играет видео, которое вы открыли ранее,
        справа отображаются другие видео из карусели матча,
        внешний вид - https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-29%20в%2015.25.21.png ,
        ОБРАТИТЕ ВНИМАНИЕ! Если вы проходите кейс в IE11 вместо видео будет появляться заглушка "Ваш браузер устарел и не может воспроизвести трансляцию",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2022-04-08_19-01-44.png
    - do: просмотреть видео до конца (можно просто промотать видео ближе к концу и дождаться окончания воспроизведения)
    - assert: |
        после окончания воспроизведения в doc2doc выделяется следующее видео,
        в основном просмотрщике начинается воспроизведение следующего видео сначала,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-10-22_14-46-34.png
    - do: проскролить видео в doc2doc (блок справа от основного видео) и нажать на любое
    - assert: в просмотрщике начинается воспроизведение выбранного видео

  может содержать видеопревью с прямой трансляцией:
    - do: открыть идущий матч NHL
    - assert: |
        отображается видеопревью с прямой трансляцией

  может содержать видео [manual]:
    - reasonNotToAuto:
      - Данные блоки уже проверяются в других автотестах  
    - tags: 
      - backend_sport
    - do: кликнуть на дата-пикер и установить дату 13 января 2022
    - assert: |
        открыт список матчей за 13 января,
        некоторые матчи содержат иконку-индикатор видео,
        внешний вид - https://jing.yandex-team.ru/files/weberxks/Screen%20Shot%202022-05-05%20at%2018.12.11.png
    - do: перейти на страницу хоккейного матча чемпионата КХЛ кликом на матч с иконкой видео - https://jing.yandex-team.ru/files/weberxks/Screen%20Shot%202022-05-05%20at%2018.12.41.png
    - assert: |
        страница матча может содержать карусель с видео, 
        внешний вид - https://jing.yandex-team.ru/files/weberxks/Screen%20Shot%202022-05-05%20at%2018.14.02.png,
        под каждым видео расположено название матча,
        под каруселью с видео расположен блок "Новости хоккея",
        обратите внимание! Перед блоком "Новости хоккея" также могут быть блоки "Ход Матча" и "Состав"
    - do: |
        кликнуть на любое видео с надписью "На сайте КХЛ",
        внешний вид - https://jing.yandex-team.ru/files/weberxks/Screen%20Shot%202022-05-05%20at%2018.14.02.png
    - assert: |
        в новой вкладке открывается страница сервиса video.khl.ru,
        видео на странице соответствует тому матчу, с которого вы перешли
    - do: вернуться на сервис Спорт на вкладку с матчем
    - do: поскроллить карусель видео
    - assert: |
        карусель скроллится,
        каждое видео содержит название матча либо указание счета на период голевого момента, запечатленного на видео (максимум 3 строки),
        длинные названия матчей корректно обрезаются многоточием
    - do: кликнуть на любое видео в карусели
    - assert: |
        в новой вкладке открывается страница сервиса video.khl.ru,
        видео на странице соответствует тому матчу, с которого вы перешли        

  содержит переход на сайт КХЛ для видео в прошедших матчах турнира КХЛ:
    - browsers:
        notFor:
          - win-ie11
    - do: открыть матч https://yandex.ru/sport/event/m539525
    - assert: |
        на странице отображается медиаблок "Видео о матче",
        внешний вид - https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-29%20в%2015.26.20.png
    - do: нажать на любую кнопку "На сайте КХЛ"
    - assert: |
        в новой вкладке открывается видео на сайте https://video.khl.ru (в урле могут быть параметры, это ок, в кейсе указано лишь начало урла, какое оно должно быть),
        обратите внимание! это сторонний сайт, не нужно заводить баги, если на этом сайте что-то сломано!

  из списка прошедших матчей содержит хоккейный виджет:
    - tags: 
      - backend_sport  
    - *goTo
    - do: кликнуть на вкладку Вчера или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 4-5 декабря)
    - do: перейти на страницу хоккейного матча кликом на матч со счетом
    - assert: |
        страница матча содержит хоккейный виджет,
        виджет содержит название лиги, статус матча, для завершенных матчей - дату завершения, названия команд, счет,
        при победе по буллитам или в овертайме виджет содержит соответствующее указание под счетом и названиями команд,
        счет и название команды-победителя выделено жирным шрифтом,
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2022-01-27_14-57-39.png

  из блока 'Завтра' содержит хоккейный виджет [manual]:
    - tags: backend_sport  
    - reasonNotToAuto:
      - Нет возможности автоматизировать, т.к. во внутренних функциях берется не время запроса из данных, а new Date(), поэтому "завтра" становится "сегодня" на следующий день, а тест падает.
    - *goTo
    - do: кликнуть на вкладку Завтра. Обратите внимание! До сентября 2022 года матчей по хоккею не предвидится. Если при клике на "Завтра" матчей нет - пропустите кейс
    - do: перейти на страницу хоккейного матча кликом на матч в разделе 'Завтра' (если матчей не найдено, в календаре выберите любую будущую дату, где подберутся матчи - например, 14 января 2022)
    - assert: |
        страница матча содержит хоккейный виджет,
        виджет содержит название лиги, названия команд, время начала матча, надпись 'Завтра',
        обратите внимание! если вы выбирали другую дату, то вместо "Завтра" будет указана выбранная вами дата - https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-29%20в%2015.27.32.png

  из списка прошедших матчей может содержать блок Ход матча:
    - tags: 
      - backend_sport  
    - *goTo
    - do: кликнуть на вкладку "Вчера" или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу хоккейного матча кликом на матч со счетом
    - assert: |
        страница матча может содержать блок "Ход матча",
        обратите внимание! в открытом вами матче может не быть блока "Ход матча" - это нормально, баг заводить не надо!
        если вы открыли матч, а блока "Ход матча" нет, можно открыть конктретный матч, где блок есть, https://yandex.ru/sport/event/m512516,
        блок содержит логотипы команд или флаги стран,
        в блоке отображаются все события матча с подписью характера события и времения,
        голы отмечены значком шайбы, буллиты - иконкой с буквой Б поверх шайбы,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-01_20-13-10.png

  из списка прошедших матчей может содержать блок Состав:
    - tags: 
      - backend_sport  
    - *goTo
    - do: кликнуть на вкладку "Вчера" или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу хоккейного матча кликом на матч со счетом
    - assert: |
        страница матча может содержать блок "Состав" (если в данном матче блока нет, открыть другой матч),
        в блоке отображается состав обеих команд с лого и названием команд,
        рядом с фамилией игрока, забившего гол, есть иконка шайбы и счетчик с количеством голов,
        Обратите внимание! иконка шайбы может отсутствовать - это ок и баги на такое заводить не нужно!,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-06_13-20-30.png

  из списка прошедших матчей содержит иконку шайбы в блоке "Состав" [manual]:
    - reasonNotToAuto:
      - Уже есть автотест со скриншотом блока состав, где также видно иконку шайбы. 
    - *goTo
    - do: перейти на страницу хоккейного матча https://yandex.ru/sport/event/m540293
    - assert: |
        страница матча может содержит блок "Состав",
        в блоке отображается состав обеих команд с лого и названием команд,
        рядом с фамилией игрока, забившего гол, есть иконка шайбы и счетчик с количеством голов,
        скрин https://jing.yandex-team.ru/files/kossakovskaya/2021-09-06_13-20-30.png

  из списка прошедших матчей может содержать турнирную таблицу:
    - tags: 
      - backend_sport  
    - *goTo
    - do: кликнуть на вкладку Вчера или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу хоккейного матча кликом на матч со счетом
    - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав'
    - assert: |
        страница матча может содержать блок 'Турнирная таблица' (если в данном матче блока нет, открыть другой матч),
        по умолчанию открыта вкладка той группы, к которой относятся команды данного матча,
        команды данного матча выделены жирным шрифтом,
        верстка таблицы корректна,
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-12-14_14-54-59.png
    - do: попереключать вкладки в таблице
    - assert: вкладки переключаются, отображается новый список команд        

  из списка прошедших матчей может содержать блок Другие матчи:
    - tags: 
      - backend_sport  
    - *goTo
    - do: кликнуть на вкладку Вчера или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу хоккейного матча кликом на матч со счетом
    - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав', 'Турнирная таблица'
    - assert: |
        страница матча может содержать блок 'Другие матчи' (если в данном матче блока нет, открыть другой матч),
        блок содержит названия и лого команд, время, дату, счет (в зависимости от того прошел матч или нет),
        внизу есть кнопка 'Все матчи',
        верстка блока корректна,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-07_18-32-04.png
    - do: кликнуть на любой матч в блоке 'Другие матчи'
    - assert: в той же вкладке открывается страница выбранного матча
    - do: вернуться назад
    - do: кликнуть на 'Все матчи'
    - assert: в той же вкладке открывается страница хоккейного календаря

files:
  - features/sport/event/hockeyEvent.desktop.hermione.js
  - features/sport/event/hockeyEvent.desktop.hermione.e2e.js

tags:
  - sport-neo
  - event

manager: mrwhite

qa-engineer: an-smirn0v

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
