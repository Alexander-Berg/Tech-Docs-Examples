feature: Сниппет с документом

specs:
  Проверка счетчиков и ссылок:
    - do: получить выдачу Поиска по запросу 'инструкция по работе с Яндекс. Диском:pdf site:ikt.ipk74.ru'
    - assert: на выдаче есть сниппет с документом pdf
    - tech: сработал счетчик на показ тайтла
    - tech: сработал счетчик на показ гринурла
    - tech: сработал счетчик на показ кнопки 'Сохранить на Яндекс.Диск'
    - tech: сработал счетчик на показ иконки с документом
    - do: кликнуть по кнопке c иконкой документа
    - assert: открывается новое окно/вкладка браузера с просмотрщиком документа
    - tech: сработал счетчик в кнопке с документом
    - do: кликнуть по тайтлу сниппета
    - assert: |
        открывается новое окно/вкладка браузера с просмотрщиком документа (в зависимости от браузера также может скачиваться документ на устройство)
        тайтл сниппета после посещения страницы красится в фиолетовый цвет, исключение - OC android (специфика платформы), а также режим инкогнито на любой ОС, ссылка не прокрасится.
    - tech: сработал счетчик в тайтле
    - do: кликнуть на последнюю часть гринурла
    - assert: открывается новое окно/вкладка браузера с просмотрщиком документа (в зависимости от браузера также может скачиваться документ на устройство)
    - tech: сработал счетчик в гринурле
    - do: кликнуть на кнопку 'Сохранить на Яндекс.Диск'
    - assert: |
        если пользователь залогинен, документ сохраняется на Яндекс.Диск, кнопка изменяется на 'Открыть Яндекс.Диск'
        если пользователь не залогинены, происход переход на страницу авторизации Яндекс
    - tech: сработал счетчик в кнопке 'Сохранить на Яндекс.Диск'

specs-integration:
  Внешний вид и ссылки:
    - do: получить выдачу Поиска по запросу 'инструкция по работе с Яндекс. Диском:pdf site:ikt.ipk74.ru'
    - assert: на выдаче есть сниппет с документом pdf
    - do: кликнуть в тайтл первого сниппета
    - assert: |
        открылся ресурс с документом (в зависимости от браузера также может скачиваться документ на устройство)
        ресурс с документом открылся в новой вкладке
        ссылка в тайтле содержит ikt.ipk74.ru
    - do: кликнуть в гринурл первого сниппета
    - assert: |
        открылся ресурс с документом (в зависимости от браузера также может скачиваться документ на устройство)
        ресурс с документом открылся в новой вкладке
        ссылка в тайтле содержит ikt.ipk74.ru
    - do: кликнуть на кнопку с иконкой документа
    - assert: |
        открылся сервис яндекса для просмотра документов
        сервис открылся в новой вкладке

files:
  - features/mime-view/mime-view@deskpad.hermione.js
  - features/mime-view/mime-view@deskpad.hermione.e2e.js

v-team: Turbo

counter: /$page/$main/$result/ooconverter/view

tags:
  - smoke_extended
  - reviewed
  - yaani
  - searchapp
  - wtp_button
  - yaml_desktop
  - c_button
  - touch
  - smart
  - mgranny
  - c_outside
  - button
  - use_constr
  - docs
  - c_organic
  - granny
  - meta
  - auto_mgranny
  - spok_id
  - c_default

tlds: ru
