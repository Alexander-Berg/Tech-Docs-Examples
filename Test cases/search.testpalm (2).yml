feature: yandex / Поиск

specs:
  beforeEach:
    - do: Открыть страницу с поиском для сайта с параметром '/search/site/?searchid=2321186'
  Поиск запроса:
    - assert: |
          На открывшейся странице, в шапке, отображается поле для ввода запроса
          Рядом с полем отображается кнопка 'Найти'
          На странице отображается только одна шапка
    - do: Установить курсор в поисковую стрелку
    - assert: Стрелка в фокусе, подсвечивается желтым
    - do: В поле для ввода ввести запрос 'тест'
    - do: Нажать кнопку 'Найти'
    - assert: |
          Страница обновляется
          Под стрелкой отображаются результаты, соответствующие поисковому запросу
          В шапке под лого отображается сообщение о количестве найденного
    - do: Кликнуть на тайтл любого сниппета
    - assert: В новой вкладке осуществляется переход на соответсвующий документ
  Запрос с символами латинницы:
    - do: В поле для ввода ввести латинские символы
    - do: Нажать кнопку 'Найти'
    - assert: |
          Страница обновляется
          Под стрелкой отображаются результаты, соответствующие поисковому запросу, или сообщение, что таких результатов нет
  Запрос со спецсимволами [manual]:
    - do: В поле для ввода ввести специмволы (например, &)
    - do: Нажать кнопку 'Найти'
    - assert: |
          Страница обновляется
          Под стрелкой отображаются результаты, соответствующие поисковому запросу, или сообщение, что таких результатов нет
  Запрос с JS кодом [manual]:
    - do: В поле для ввода ввести 'var company = prompt('Какая компания создала JavaScript?', '');'
    - do: Нажать кнопку 'Найти'
    - assert: |
          Страница обновляется
          Под стрелкой отображаются результаты, соответствующие поисковому запросу, или сообщение, что таких результатов нет
  Редактирование запроса [manual]:
    - do: В поле для ввода ввести запрос (например, "железо")
    - do: Нажать кнопку 'Найти'
    - assert: |
          Страница обновляется
          Под стрелкой отображаются результаты, соответствующие поисковому запросу
    - do: Не удаляя предыдущий запрос, ввести в поисковую стрелку еще несколько символов (например, до "железобетонный")
    - assert: |
          Текст вводится
          Результаты выдачи не меняются
    - do: Нажать кнопку 'Найти'
    - assert: |
          Страница обновляется
          Под стрелкой отображаются результаты, соответствующие новому поисковому запросу
    - do: Удалить часть текста в стрелке с помощью backspace (например, до "желе")
    - assert: |
          Текст удаляется
          Результаты выдачи не меняются
    - do: Нажать Enter
    - assert: |
          Страница обновляется
          Под стрелкой отображаются результаты, соответствующие новому поисковому запросу
  Не сохранение неотправленного запроса [manual]:
    - do: В поле для ввода ввести запрос, по которому будут результаты (например, "кот")
    - do: Нажать кнопку'Найти'
    - assert: |
          Страница обновляется
          Под стрелкой отображаются результаты, соответствующие поисковому запросу
    - do: Удалить запрос из стрелки и ввести новый
    - do: Не нажимая кнопку 'Найти' обновить страницу
    - assert: |
          Страница перезагружается
          В поисковой стрелке отображается первый запрос ("кот")
          Под стрелкой отображаются результаты, соответствующие этому поисковому запросу

files:
  - features/desktop/search/search.hermione.e2e.js

tags:
  - search
