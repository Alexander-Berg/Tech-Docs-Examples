feature: Автобусы
type: Выдача
description: |
    Проверяем работу фильтров на странице выдачи
    В тестинге автобусов мало данных, можно попробовать поискать https://testing.backend.internal.bus.yandex.net/api/popular

    Направления, которые чаще всего есть в тестинге:
    Москва - Санкт-Петербург,
    Москва - Воронеж,
    Москва - Богучар

    Перейти Яндекс.Путешествия, вкладка «Автобусы»
    Только для тача: чтобы попасть в меню сортировок и фильтров нужно нажать сюда
    https://jing.yandex-team.ru/files/arhey/2021-12-13T07:02:48Z.070b2b6.png
specs:
  Автобусы. Поиск. Проверка работы фильтров на странице выдачи:
    - do: Совершить поиск, например, "Москва - Санкт-Петербург" на завтра
    - assert: открылась страница с поисковой выдачей
    - do: |
          По очереди раскрыть фильтры по:
          Цене
          Времени отправления / прибытия
          Остановкам отправления / прибытия
    - assert: фильтры открываются, верстка корректна
    - do: Раскрыть фильтр по цене
    - assert: |
          Фильтр открылся, присутствует ползунок для выбора диапазона цены
          Подписана минимальная и максимальная выбранная на текущий момент цена
    - do: Применить фильтр по цене так, чтобы в выдаче остались варианты
    - assert: |
          Выдача фильтруется согласно заданному диапазону
          Только десктоп: Cправа от панели фильтров появилась кнопка "Сбросить"
    - do: Применить фильтр цены так, чтобы результаты на выдаче отсутствовали, чтобы это сделать нужно подвинуть оба ползунка на середину диапазона
    - assert: |
          Отображается заглушка "Нет подходящих вариантов" с текстом "Ни один вариант из результатов поиска не соответствует заданным фильтрам. Пожалуйста, сбросьте один или несколько фильтров."
          Отображается кнопкой сброса фильтра "Цены" с крестиком
    - do: Нажать на крестик и сбросить фильтр по цене
    - assert: |
          В выдаче вновь есть рейсы
    - do: Раскрыть фильтр времени отправления / прибытия
    - assert: |
          Фильтр открылся, присутствуют чекбоксы с диапазонами времени отправления и прибытия, утро, день, вечер, ночь
          У каждого диапазона подписан интервал времени (периода времени может не быть в фильтре, если нет рейсов в этом диапазоне)
    - do: Применить фильтр времени отправления / прибытия
    - assert: выдача фильтруется согласно выбранному фильтру
    - do: Раскрыть фильтр Остановки отправления / прибытия
    - assert: Фильтр открылся, присутствуют чекбоксы с пунктами отправления и прибытия
    - do: Выбрать остановку и применить фильтр
    - assert: Выдача фильтруется согласно заданным данным

manual: true
Функциональность: Фильтры и сортировки
Устройство:
  - Десктоп
  - Тач
Страница: Выдача
Сервис: Автобусы
Тестирование асессорами: Да
Tag: Smoke
Автор: arhey
Окружение:
  - Production
  - Testing
