feature: СПАС
experiment: Аякс-перезапрос в шапке

specs:
  beforeEach:
    - do: получить выдачу по запросу 'яндекс'
    - assert: выдача появилась
  Новый запрос:
    - do: кликнуть в кнопку "х" поисковой стрелки
    - assert: |
        поисковая стрелка очищена
        инпут активен
    - do: |
        набрать в поисковой строке запрос 'погода'
        нажать на кнопку "Найти"
    - assert: выдача перезагрузилась
    - tech: выдача перезагрузилась аяксом (без полной перезгузки страницы)
  Возврат назад на первую выдачу:
    - do: кликнуть в кнопку "х" поисковой стрелки
    - assert: |
        поисковая стрелка очищена
        инпут активен
    - do: |
        набрать в поисковой строке запрос 'погода'
        нажать на кнопку "Найти"
    - assert: |
        выдача перезагрузилась
    - do: нажать кнопку 'назад' в браузере
    - assert:
        выдача перезагрузилась
  Анимация для ОО карусели:
    - do: кликнуть в кнопку "х" поисковой стрелки
    - assert: |
        поисковая стрелка очищена
        инпут активен
    - do: |
        набрать в поисковой строке запрос 'чайка'
        нажать на кнопку "Найти"
    - assert: |
        выдача перезагрузилась
        в выдаче есть ОО карусель
    - do: кликнуть во второй элемент ОО карусели
    - screenshot: внешний вид анимации [plain]
  Анимация для ОО карусели при навигации назад:
    - do: кликнуть в кнопку "х" поисковой стрелки
    - assert: |
        поисковая стрелка очищена
        инпут активен
    - do: |
        набрать в поисковой строке запрос 'чайка'
        нажать на кнопку "Найти"
    - assert: |
        выдача перезагрузилась
        в выдаче есть ОО карусель
    - do: кликнуть во второй элемент ОО карусели
    - assert: |
        выдача перезагрузилась
        в выдаче есть ОО карусель
    - do: нажать на кнопку назад в браузере
    - screenshot: внешний вид анимации [plain]

files:
  - features/spas_ajax_header/spas_ajax_header@touch-phone.hermione.js

tags:
  - skip_e2e_check
  - no_assessors

tlds: all

v-team: SPAS
