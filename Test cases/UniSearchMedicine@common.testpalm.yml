feature: Универсальный колдунщик поиска врачей

specs-integration:
  Дозагрузка (e2e):
    - tags:
      - smoke
      - smoke_extended
      - pp_new_core
    - do: получить выдачу по запросу 'терапевты москва'
    - assert: на выдаче есть универсальный колдунщик врачей
    - assert: количество врачей не 0
    - do: нажать на кнопку «показать ещё»
    - assert: загрузились следующие врачи


specs:
  Внешний вид:
    - tags:
      - smoke
      - smoke_extended
      - pp_new_core
    - do: получить выдачу по запросу 'терапевт москва'
    - assert: на выдаче есть универсальный колдунщик поиска врачей (при отсутствии колдунщика на первых позициях выдачи - проскроллить выдачу вниз)
    - screenshot: внешний вид [plain]

  Дозагрузка:
    - do: получить выдачу по запросу 'терапевты москва'
    - assert: на выдаче есть универсальный колдунщик врачей
    - do: нажать на кнопку «показать ещё»
    - assert: загрузились следующие врачи
    - tech: сработал счётчик "/$page/$main/$result/unisearch_medicine/more"

  Баобаб-разметка айтемов:
    - tags: no_assessors
    - params:
        foreverdata: '95446167'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче есть универсальный колдунщик врачей
    - tech: |
        в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_medicine/item"
        и атрибутом url

  Баобаб-разметка ТБ:
    - tags: no_assessors
    - params:
        text: 'Терапевты москва'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче есть универсальный колдунщик врачей
    - tech: |
        в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_medicine/title"

  Обогащённое превью:
    Внешний вид:
      - tags:
        - smoke
        - smoke_extended
        - pp_new_core
      - do: получить выдачу по запросу 'терапевт москва'
      - assert: на выдаче есть универсальный колдунщик врачей (при отсутствии колдунщика на первых позициях выдачи - проскроллить выдачу вниз)
      - do: кликнуть в первый сниппет в колдунщике
      - screenshot: внешний вид [plain]

    Секция с описанием врача:
      Внешний вид:
        - params:
            foreverdata: '698374499'
        - do: получить выдачу по запросу 'терапевт москва'
        - assert: на выдаче есть универсальный колдунщик врачей (при отсутствии колдунщика на первых позициях выдачи - проскроллить выдачу вниз)
        - do: кликнуть в первый сниппет в колдунщике
        - assert: открылось модальное окно с описанием под ФИО
        - screenshot: внешний вид [plain]
        - do: кликнуть 'Читать дальше' под описанием
        - assert: описание врача развернулось полностью
        - screenshot: внешний вид [expanded]

    UGC отзывы:
      Внешний вид c аспектами:
        - params:
            foreverdata: '1530189269'
        - do: получить выдачу по запросу "foreverdata"
        - assert: на выдаче есть универсальный колдунщик врачей
        - do: кликнуть в первый сниппет в колдунщике
        - assert: появилось превью врача
        - do: проскроллить страницу до отзывов
        - assert: у отзывов есть подкрашенные ключевые слова "Понравилось:" "Комментарий:"
        - screenshot: внешний вид [plain]

    preview_content нет в дереве, если Превью не было открыто:
      - tags: no_assessors
      - do: получить выдачу по запросу 'терапевт москва'
      - assert: на выдаче есть универсальный колдунщик врачей
      - tech: в baobab дереве нет узла по пути "/$page/$main/$result/unisearch_medicine/preview"

    Разметка контента baobab:
      - tags: no_assessors
      - do: получить выдачу по запросу 'терапевт москва'
      - assert: на выдаче есть универсальный колдунщик врачей
      - do: кликнуть в первый сниппет в колдунщике
      - assert: появилась карточка врача
      - tech: |
          в baobab дереве есть узел по пути "/$page/$main/$result/unisearch_medicine/preview/offer/link"
          c атрибутами offer_url, offer_source, offer_price, offer_rating
      - tech: |
          в baobab дереве есть узел по пути "$page/$main/$result/unisearch_medicine/preview/clinic/link"
          с атрибутами name, url
      - tech: в baobab дереве есть узел по пути "$page/$main/$result/unisearch_medicine/preview/unisearch-review"

files:
  - src/features/UniSearch/UniSearch.features/UniSearchMedicine/UniSearchMedicine.test/UniSearchMedicine@common.hermione.js
  - src/features/UniSearch/UniSearch.features/UniSearchMedicine/UniSearchMedicine.test/UniSearchMedicine@common.hermione.e2e.js

v-team: UniSearch

tlds: [ru, by, ua, kz, uz]

tags:
  - react
  - skip_e2e_check
