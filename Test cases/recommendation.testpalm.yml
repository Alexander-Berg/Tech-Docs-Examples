feature: Объявления о вакансиях
type: Порекомендовать

specs:
  beforeEach:
      - do: открыть страницу /vacancies/publications/recommend/
      - screenshot: открылась вкладка для рекомендации кандидата [default_view]
  Проверка обязательных полей:
      - do: клик на кнопку 'Порекомендовать'
      - screenshot: под обязательными полями появились ошибки [form_with_error]
  Проверка ссылки программа рекомендаций:
      - do: проверить ссылку в 'Программа рекомендаций'
      - assert: ссылка ведет на //wiki.test.yandex-team.ru/HR/grupparekrutmenta/recommend/
  Проверка рекомендации кандидата:
      - do: заполнить поле 'Имя'
      - do: заполнить поле 'Фамилия'
      - do: заполнить поле 'Почта'
      - do: заполнить поле 'Телефон'
      - do: добавить файл в поле 'Резюме'
      - do: клик на кнопку 'Добавить объявления'
      - assert: открылась страница /vacancies/publications/
      - do: клик в кнопку '+ к рекомендации' в нескольких объявлениях (больше 2-ух)
      - assert: |
          кнопка изменилась на '- из рекомендации'
          на табе 'Порекомендовать' отображается кол-во выбранных объявлений
      - screenshot: пример внешнего вида [selected_publications1]
      - screenshot: пример внешнего вида [recommendation_counter]
      - do: клик на кнопку '- из рекомендации'
      - assert: |
          кнопка снова изменилась на '+ к рекомендации'
          на табе 'Порекомендовать' кол-во объявлений уменьшилось
      - screenshot: пример внешнего вида [unselected_publication]
      - do: вернуться на вкладку 'Порекомендовать'
      - assert: |
          все поля остались заполненными
          в поле 'Объявления' появились выбранные значения из списка объявлений
      - screenshot: пример внешнего вида [filled_publications]
      - do: клик на крестик в одном из объявлений
      - assert: объявление удалилось из вариантов
      - do: заполнить поле 'Чем кандидат полезен для Яндекса'
      - do: установить галочку о том, что кандидат знает что его рекомендовали
      - screenshot: пример заполненной формы [form_filled]
      - do: клик на кнопку 'Порекомендовать'
      - assert: |
          все поля очистились на форме
          появилось сообщение о создании рекомендации со ссылкой на тикет REFERENCE
      - screenshot: пример внешнего вида [after_form_submission]

tags:
  - reviewed

files:
  - tests/hermione/suites/desktop/vacancies/vacancies_publications/recommendation/recommendation.hermione.js

priority: critical

browsers:
  - yandex-browser-desktop
  - firefox-desktop
  - safari-desktop
