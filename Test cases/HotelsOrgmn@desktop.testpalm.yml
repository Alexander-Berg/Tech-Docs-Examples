feature: Hotels / Колдунщик многих организаций
type: Стандартный вид

params:
  rearr:
    - scheme_Local/OrgWizard/MinCarouselSize=1000

counter: /$page/$parallel/$result[@wizard_name="companies" and @subtype="travel_map"]/hotels-orgmn

specs:
  beforeEach:
    - do: получить выдачу по запросу "отели в москве"
    - assert: на странице присутствует колдунщик с картой и списком отелей в правой колонке
  Внешний вид:
    - do: установить ширину окна браузера 1280px
    - screenshot: внешний вид колдунщика [orgmn_hotels]
    - do: установить ширину окна браузера 1100px
    - screenshot: внешний вид колдунщика [orgmn_hotels_plain]
    - do: установить ширину окна браузера 900px
    - screenshot: внешний вид колдунщика [orgmn_hotels_narrow]
    - do: установить ширину окна браузера 1600px
    - screenshot: внешний вид колдунщика [orgmn_hotels_wide]
  Клик в ссылку в футере ведет на условия подключения:
    - assert: внизу колдунщика присутствует ссылка "Условия подключения"
    - do: нажать на ссылку "Условия подключения"
    - assert: произошёл переход на страницу по адресу https://yandex.ru/support/webmaster/search-appearance/hotel-list.html
    - tech: сработал счётчик path="$result/hotels-orgmn/connection-link"
  Клик в отзывы открывает попап на вкладке отзывы:
    - do: нажать на отзывы в карточке отеля
    - assert: открылся попап на вкладке отзывы
  Клик по кнопке "На большую карту" ведет на Яндекс.Карты:
    - assert: на карте в колдунщике присутствует кнопка "На большую карту"
    - do: нажать на кнопку "На большую карту"
    - assert: произошёл переход на страницу по адресу https://yandex.ru/maps/
    - tech: сработал счётчик path="$result/hotels-orgmn/MapTypeDynamic/goto-map"
  Ховер по карточке подсвечивает пин:
    - do: навести курсор на карточку
    - assert: пин данной карточки на карте подсветился
  Клик по пину скроллит к выбранной карточке:
    - do: кликнуть по пину на карте
    - assert: произошел подскролл к карточке отеля данного пина
  Отели обновляются при изменении значений в форме:
    - do: изменить даты заезда и выезда в календаре
    - assert: изменились цены в карточках отелей
    - do: в фильтре по услугам выбрать любой фильтр
    - assert: изменились карточки отелей
    - do: изменить количество гостей
    - assert: изменились цены в карточках отелей
  Отели обновляются при перетаскивании карты:
    - do: мышью перетащить карту на новое местоположение
    - assert: подгрузились новые предложения и отобразились в карточках
  Отели обновляются при зуме карты:
    - do: нажать на кнопку уменьшения масштаба
    - assert: подгрузились новые предложения и отобразились в карточках
  Отели подгружаются при подскролле списка:
    - do: проскроллить карточки отелей в списке до конца
    - assert: подгрузились новые карточки отелей
  Даты из формы пробрасываются в попап:
    - do: выбрать дату в датапикере, отличную от текущей
    - do: кликнуть в карточку отеля
    - assert: открылся попап
    - assert: дата в открывшемся попапе равна ранее выставленной в датапикере
    - tech: сработал счётчик path="$result/hotels-orgmn/hotel-list/item/link"

specs-integration:
  Должен присутствовать на выдаче:
    - do: получить выдачу по запросу "отели в лазаревском"
    - assert: на странице присутствует колдунщик с картой и списком отелей в правой колонке

files:
  - src/features/Companies/Companies.features/HotelsOrgmn/HotelsOrgmn.test/HotelsOrgmn@desktop.hermione.js
  - src/features/Companies/Companies.features/HotelsOrgmn/HotelsOrgmn.test/HotelsOrgmn@desktop.hermione.e2e.js

v-team: KotTeam

tlds: all
