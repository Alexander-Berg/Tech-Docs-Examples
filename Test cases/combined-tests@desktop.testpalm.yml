feature: Колдунщики на выдаче
type: Совместный показ

# В yframe нет возможности собирать запросы по двум счетчикам. Поэтому
# проверяем на сколько будут стабильны тесты с запросами собранными по стату
# заказ на тесты с пересечением: SERPTEST-1657
specs-integration:
  Видео в центральной и картинки в правой колонках:
    - v-team: Video
    - counter: /$page/$main/$result[@wizard_name="images"]/images/title
    - do: получить выдачу по запросу "природа видео и фото"
    - assert: |
        в правой колонке присутствует колдунщик картинок
        у колдунщика картинок есть тайтл
        в колдунщике картинок присутствуют картинки
        в центральной колонке присутствует колдунщик видео
        у колдунщика видео есть тайтл
        в колдунщике видео присутcтвуют видео тумбы
  Видео и картинки в центральной колонке:
    - v-team: Video
    - counter: /$page/$main/$result[@wizard_name="images"]/images/title
    - do: получить выдачу по запросу 'котики' (альтернативные запросы 'слоны', 'мартышки')
    - assert: |
        в центральной колонке присутствует колдунщик картинок
        у колдунщика картинок есть тайтл
        в колдунщике картинок присутствуют картинки
        в центральной колонке присутствует колдунщик видео
        у колдунщика видео есть тайтл
        в колдунщике видео присутcтвуют видео тумбы
  Видео в центральной и ОО в правой колонках:
    - v-team: Video
    - counter: /$page/$parallel/$result[@wizard_name="entity_search"]/object-badge
    - do: получить выдачу по запросу "киркоров видео" (альтернативные запросы 'далласский клуб покупателей фильм 2013')
    - assert: |
        в правой колонке присутствует колдунщик Объектного ответа
        у колдунщика Объектного ответа есть тайтл
        у колдунщика Объектного ответа есть подзаголовок
        у колдунщика Объектного ответа есть футер с ссылками
        у колдунщика Объектного ответа есть описание
        в центральной колонке присутствует колдунщик видео
        у колдунщика видео есть тайтл
        в колдунщике видео присутcтвуют видео тумбы
  Видео и карусель ОО в центральной колонке:
    - v-team: Video
    - counter: /$page[@ui="desktop"]/$top/$result[@wizard_name="entity_search"]/carousel/filters/select|/$page[@ui="desktop"]/$main/$result[@wizard_name="entity_search"]/carousel/showcase/item
    - do: получить выдачу по запросу "фильмы 2019" (альтернативные запросы "фильмы 2020", "фильмы 2021")
    - assert: |
        на выдаче есть карусель фильмов
        у карусели есть фильтры (Например, Жанр или Год выпуска)
        в карусели есть элементы
        в центральной колонке присутствует колдунщик видео
        у колдунщика видео есть тайтл
        в колдунщике видео присутcтвуют видео тумбы
    - screenshot: пример отображения фильтров в карусели [https://jing.yandex-team.ru/files/boronchiev/2020-04-26T08%3A51%3A56Z.png]
  Новости и объектный ответ:
    - v-team: OO
    - counter: /$page/$main/$result[@wizard_name="news"]/item/doc
    - params:
        foreverdata: '2109534351'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: |
        колдунщик новостей присутствует на выдаче
        у колдунщика есть заголовок "Сейчас в СМИ", который является ссылкой
        в колдунщике есть хотя бы одна новость, заголовок которой является ссылкой
    - assert: |
        в правой колонке присутствует колдунщик Объектного ответа
        у колдунщика Объектного ответа есть тайтл
        у колдунщика Объектного ответа есть подзаголовок
        у колдунщика Объектного ответа есть футер с ссылками
        у колдунщика Объектного ответа есть описание
  Факты и картинки:
    - v-team: Facts
    - counter: /$page/$main/$result[@wizard_name="suggest_fact"]
    - do: получить выдачу по запросу "самое большое животное в мире" (альтернативные запросы "какой самый крепкий металл в мире", "высота монблана", "глубина байкала", "марианская впадина")
    - assert: на первой позиции выдачи есть Фактовый ответ
    - assert: |
        на выдаче есть колдунщик картинок
        у колдунщика картинок есть тайтл
        у колдунщика картинок есть галерея
  Переформулировки и ОО:
    - v-team: UniAnswer
    - counter: /$page/$parallel/$result[@wizard_name="entity_search"]/object-badge
    - do: получить выдачу по запросу "фнс россии" (альтернативные запросы "пенсионный фонд", "брэд питт")
    - assert: |
        в правой колонке присутствует колдунщик Объектного ответа
        у колдунщика Объектного ответа есть тайтл
        у колдунщика Объектного ответа есть футер с ссылками
        у колдунщика Объектного ответа есть описание
    - do: выполнить скролл страницы вниз до конца страницы
    - assert: страница проскроллена вниз до конца страницы
    - do: выполнить скролл страницы вверх до конца
    - assert: страница проскроллена вверх до конца
    - assert: появились переформулировки над выдачей
  Переформулировки и видео:
    - v-team: UniAnswer
    - counter: /$page/$main/$result[@wizard_name="video"]/video/title
    - do: получить выдачу по запросу "котики видео"
    - assert: |
        на странице присутствует колдунщик видео
        у колдунщика видео есть тайтл
        в колдунщике видео присутcтвуют видео тумбы
    - do: выполнить скролл страницы вниз до конца страницы
    - assert: страница проскроллена вниз до конца страницы
    - do: выполнить скролл страницы вверх до конца
    - assert: страница проскроллена вверх до конца
    - assert: появились переформулировки над выдачей

files:
  - features/combined-tests/combined-tests@desktop.hermione.e2e.js

tlds:
  - ru

v-team: Common
