feature: Счётчики скорости
type: common

specs:
    beforeEach:
        - do: получить выдачу по запросу 'Rammstein'
    Проверка таймингов загрузки страницы:
        - tech: проверить наличие счётчика 690.1033 (/tech/timing), он должен быть единственным
        - tech: |
            проверить наличие переменных
            1484 (visibility), 1036 (wait), 1037 (dns),
            1038 (tcp), 1039 (ttfb), 1040 (html), 1040.906 (html.total), 1310.2084 (dom.loading),
            1310.2085 (dom.interactive), 1310.1309 (dom.init), 1310.1007 (dom.loaded),
            143 (page), 287 (region), 1042 (ua),
            их значения не должны быть пустыми, null или undefined
        - tech: |
            значения переменных таймингов должны лежать в пределах от 0 до 60000, к таким переменным относятся
            1036 (wait), 1037 (dns), 1038 (tcp), 1039 (ttfb), 1040 (html), 1040.906 (html.total),
            1310.2084 (dom.loading), 1310.2085 (dom.interactive), 1310.1309 (dom.init), 1310.1007 (dom.loaded)
    Проверка счётчика высоты блоков (baobab):
        - tech: проверить наличие счётчика /$page event=tech type=serp-page-open
        - tech: |
            проверить data счётчика
            visible и viewportSize должны быть объектами
            допустимые типы значений - int, boolean
        - tech: проверить наличие счётчика /$page event=tech type=coords
        - tech: |
            проверить data счётчика
            nodes и pageNodes должны быть объектами
            допустимые типы значений - Array<int>
    Проверка метки времени загрузки страницы:
        - tech: проверить наличие счётчика 690.2096.207 (/tech/perf/time), где есть переменная 1701=1724 (id=load)
        - tech: |
            проверить наличие переменных
            207 (time), 143 (page), 287 (region), 1042 (ua),
            143.2129 (page.navigation_start),
            143.2112 (page.domain_lookup_start), 143.2119 (page.response_start),
            их значения не должны быть пустыми, null или undefined
        - tech: |
            значения переменных таймингов должны лежать в пределах от 0 до 60000, к таким переменным относятся
            207 (time), 143.2112 (page.domain_lookup_start), 143.2119 (page.response_start)
    Проверка меток времени загрузки страницы - First Paint:
        - tech: |
            проверить наличие счётчика 690.2096.207 (/tech/perf/time), где есть переменная
            1701=1926.2794 (id=paint.first-contentful-paint),
            ID должен встречаться только один раз
        - tech: |
            проверить наличие переменных
            207 (time), 143 (page), 287 (region), 1042 (ua),
            143.2129 (page.navigation_start),
            143.2112 (page.domain_lookup_start), 143.2119 (page.response_start),
            их значения не должны быть пустыми, null или undefined
        - tech: |
            значения переменных таймингов должны лежать в пределах от 0 до 60000, к таким переменным относятся
            207 (time), 143.2112 (page.domain_lookup_start), 143.2119 (page.response_start)
    Проверка меток времени rAF:
        - tech: |
            проверить наличие счётчиков 690.2096.207 (/tech/perf/time), где есть переменные
            1701=2616.85.205 (id=raf_metric.p0.first),
            1701=2616.85.1928 (id=raf_metric.p0.last),
            каждый ID должен встречаться только один раз
        - tech: |
            проверить наличие переменных
            207 (time), 143 (page), 287 (region), 1042 (ua),
            143.2129 (page.navigation_start),
            143.2112 (page.domain_lookup_start), 143.2119 (page.response_start),
            их значения не должны быть пустыми, null или undefined
        - tech: |
            значения переменных таймингов должны лежать в пределах от 0 до 60000, к таким переменным относятся
            207 (time), 143.2112 (page.domain_lookup_start), 143.2119 (page.response_start)

files:
    - features/common/rum/rum_type_common.hermione.js

v-team: Velocity

tags:
    - counters
    - rum
    - reviewed
    - no_assessors

tlds: none
