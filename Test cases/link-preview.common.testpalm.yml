feature: Превью ссылок

specs:

    Корректно отображается превью ссылка из группового чата без подписи[manual]:
        - tags: [advanced_smoke, b2b]
        - automation:
        - description: |
              Для прохождения тест-кейса необходимы 2 аккаунта
              Пользователь А администратор группового чата с включенной публичной ссылкой
              Между авторизованными пользователями А и Б есть общий приватный/групповой чат
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать по шапке чата
        - assert: Открылась карточка чата
        - do: Скопировать публичную ссылку и отправить ее пользователю Б в любой общий чат
        - assert: Ссылка скопирована и отправлена
        - do: Посмотреть на отображение ссылки
        - assert: |
              В чате есть бабл с превью ссылки на чат
              В левом верхнем углу бабла отображается круглый аватар чата
              Есть Подпись “Чат-Количество участников”
              Под подписью отображается Название чата
              Под названием чата отображается Описание чата(если есть)
              В правом нижнем углу (над кнопкой “Перейти в чат”) синмаркер доставки, время доставки
              В самом низу бабла кнопка “Перейти в чат”
        - do: Нажать по кнопке “Перейти в чат”
        - assert: Открывается нужный чат из ссылки
        - do: Авторизоваться пользователем Б и зайти в тот же чат
        - assert: Ссылка отображается также (за исключением того, что отсутствует синмаркер доставки)

    Корректно отображается превью ссылка из канала без подписи[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: |
              Для прохождения тест-кейса необходимы 2 аккаунта
              Пользователь А администратор канала с включенной публичной ссылкой
              Между авторизованными пользователями А и Б есть общий приватный/групповой чат
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть канал из description
        - assert: Открыто окно канала
        - do: Нажать по шапке канала
        - assert: Открылась карточка канала
        - do: Скопировать публичную ссылку и отправить ее пользователю Б в любой общий чат
        - assert: Ссылка скопирована и отправлена
        - do: Посмотреть на отображение ссылки
        - assert: |
              В чате есть бабл с превью ссылки на канал
              В левом верхнем углу бабла отображается круглый аватар канала
              Есть Подпись “Канал-Количество подписчиков”
              Под подписью отображается Название канала
              Под названием канала отображается Описание канала(если есть)
              В правом нижнем углу (над кнопкой “Перейти к каналу”) синмаркер доставки, время доставки
              В самом низу бабла кнопка “Перейти к каналу”
        - do: Нажать по кнопке “Перейти к каналу”
        - assert: Открывается нужный канал из ссылки
        - do: Пользователем Б перейти в общий чат, куда пользователь А отправил сообщение и нажать по по кнопке “Перейти к каналу”
        - assert: Открывается нужный канал из ссылки

    Корректно отображается превью ссылки на сообщение без подписи[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: |
              У пользователя А есть публичный чат с историей (с включенной публичной ссылкой)
              Между авторизованными пользователями А и Б есть общий приватный/групповой чат
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Поскроллить вглубь истории чата и вызвать контекстное меню для сообщения
        - assert: Вызывается контекстное меню
        - do: Нажать по пункту “Поделиться ссылкой”
        - assert: Появляется подсказка “Текст скопирован”
        - do: Отправить ссылку пользователю Б в любой общий чат
        - assert: Ссылка отправлена в чат
        - do: Посмотреть на отображение ссылки
        - assert: |
              В чате есть бабл с превью ссылки на сообщение
              В левом верхнем углу бабла отображается аватар пользователя чье сообщение было скопировано или аватар канала (если ссылка скопирована из канала)
              Отображается Имя канала или Имя пользователя (если этот групповой чат)
              Под именем пользователя отображается текст скопированного сообщения
              В правом нижнем углу (над кнопкой “Перейти к сообщению”) синмаркер доставки, время доставки
              В самом низу бабла кнопка “Перейти к сообщению”
        - do: Нажать по кнопке “Перейти к сообщению”
        - assert: |
              Открывается нужный чат из которого была скопирована ссылка
              Происходит подскролл к нужному сообщению
        - do: Пользователем Б перейти в общий чат, куда пользователь А отправил сообщение и нажать по по кнопке “Перейти к сообщению”
        - assert: |
              Открывается нужный чат из которого была скопирована ссылка
              Происходит подскролл к нужному сообщению

    Корректно отображается превью ссылки из группового чата с подписью[manual]:
        - automation:
        - description: |
              Для прохождения тест-кейса необходимы 2 аккаунта
              Пользователь А администратор группового чата с включенной публичной ссылкой
              Между авторизованными пользователями А и Б есть общий приватный/групповой чат
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать по шапке чата
        - assert: Открылась карточка чата
        - do: Скопировать публичную ссылку 
        - assert: Ссылка скопирована
        - do: Отправить пользователю Б в любой общий чат ссылку с добавлением дополнительного текста
        - assert: Ссылка отправлена в чат
        - do: Посмотреть на отображение ссылки
        - assert: |
              В бабле с превью ссылки на чат 2 блока
              В первом блоке отображается ссылка и дополнительный текст, который был добавлен к ссылке
              Во втором блоке в левом верхнем углу бабла отображается круглый аватар чата
              Есть Подпись “Чат-Количество участников”
              Под подписью отображается Название чата
              Под названием чата отображается Описание чата(если есть)
              В правом нижнем углу (над кнопкой “Перейти в чат”) синмаркер доставки, время доставки
              В самом низу бабла кнопка “Перейти в чат”
        - do: Нажать по кнопке “Перейти в чат”
        - assert: Открывается нужный чат из ссылки
        - do: Авторизоваться пользователем Б и зайти в тот же чат
        - assert: Ссылка отображается также (за исключением того, что отсутствует синмаркер доставки)

    Корректно отображается превью ссылки из группового чата когда есть несколько ссылок в сообщении[manual]:
        - automation:
        - description: |
              Для прохождения тест-кейса необходимы 2 аккаунта
              Пользователь А администратор группового чата с включенной публичной ссылкой
              Между авторизованными пользователями А и Б есть общий приватный/групповой чат
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать по шапке чата
        - assert: Открылась карточка чата
        - do: Скопировать публичную ссылку 
        - assert: Ссылка скопирована
        - do: Отправить пользователю Б в любой общий чат сообщение в котором будет несколько ссылок (после ссылкой на чат  можно добавить еще одну любую ссылку, например yandex.ru )
        - do: Посмотреть на отображение ссылки
        - assert: |
              В превью раскрывается первая ссылка
              В бабле с превью ссылки на чат 2 блока
              В первом блоке отображается текст сообщения со ссылками
              Во втором блоке в левом верхнем углу бабла отображается круглый аватар чата
              Есть Подпись “Чат-Количество участников”
              Под подписью отображается Название чата
              Под названием чата отображается Описание чата(если есть)
              В правом нижнем углу (над кнопкой “Перейти в чат”) синмаркер доставки, время доставки
              В самом низу бабла кнопка “Перейти в чат”
        - do: Нажать по кнопке “Перейти в чат”
        - assert: Открывается нужный чат из ссылки
        - do: Авторизоваться пользователем Б и зайти в тот же чат
        - assert: Ссылка отображается также (за исключением того, что отсутствует синмаркер доставки)

    Корректно отображается превью ссылки из канала с подписью[manual]:
        - automation:
        - description: |
              Для прохождения тест-кейса необходимы 2 аккаунта
              Пользователь А администратор канала с включенной публичной ссылкой
              Между авторизованными пользователями А и Б есть общий приватный/групповой чат
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть канал из description
        - assert: Открыто окно канала
        - do: Нажать по шапке канала
        - assert: Открылась карточка канала
        - do: Скопировать публичную ссылку 
        - assert: Ссылка скопирована
        - do: Отправить пользователю Б в любой общий чат ссылку с добавлением дополнительного текста
        - assert: Ссылка отправлена в чат
        - do: Посмотреть на отображение ссылки
        - assert: |
              В бабле с превью ссылки на чат 2 блока
              В первом блоке отображается ссылка и дополнительный текст, который был добавлен к ссылке
              Во втором блоке в левом верхнем углу бабла отображается круглый аватар канала
              Есть Подпись “Канал-Количество подписчиков”
              Под подписью отображается Название канала
              Под названием канала отображается Описание канала(если есть)
              В правом нижнем углу (над кнопкой “Перейти к каналу”) синмаркер доставки, время доставки
              В самом низу бабла кнопка “Перейти к каналу”
        - do: Нажать по кнопке “Перейти к каналу”
        - assert: Открывается нужный канал из ссылки
        - do: Авторизоваться пользователем Б и зайти в тот же чат
        - assert: Ссылка отображается также (за исключением того, что отсутствует синмаркер доставки)

    Корректно отображается превью ссылки из канала когда есть несколько ссылок в сообщении[manual]:
        - automation:
        - description: |
              Для прохождения тест-кейса необходимы 2 аккаунта
              Пользователь А администратор канала с включенной публичной ссылкой
              Между авторизованными пользователями А и Б есть общий приватный/групповой чат
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть канал из description
        - assert: Открыто окно канала
        - do: Нажать по шапке канала
        - assert: Открылась карточка канала
        - do: Скопировать публичную ссылку 
        - assert: Ссылка скопирована
        - do: Отправить пользователю Б в любой общий чат сообщение в котором будет несколько ссылок (после ссылкой на канал  можно добавить еще одну любую ссылку, например yandex.ru )
        - assert: Ссылки отправлены в чат
        - do: Посмотреть на отображение ссылки
        - assert: |
              В превью раскрывается первая ссылка
              В бабле с превью ссылки на чат 2 блока
              В первом блоке отображается текст сообщения со ссылками
              Во втором блоке в левом верхнем углу бабла отображается круглый аватар канала
              Есть Подпись “Канал-Количество подписчиков”
              Под подписью отображается Название канала
              Под названием канала отображается Описание канала(если есть)
              В правом нижнем углу (над кнопкой “Перейти к каналу”) синмаркер доставки, время доставки
              В самом низу бабла кнопка “Перейти к каналу”
        - do: Нажать по кнопке “Перейти к каналу”
        - assert: Открывается нужный канал из ссылки
        - do: Авторизоваться пользователем Б и зайти в тот же чат
        - assert: Ссылка отображается также (за исключением того, что отсутствует синмаркер доставки)

    Корректно отображается превью ссылки на сообщение с подписью[manual]:
        - automation:
        - description: |
              У пользователя А есть публичный чат/канал с историей (с включенной публичной ссылкой)
              Между авторизованными пользователями А и Б есть общий приватный/групповой чат
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Поскроллить вглубь истории чата и вызвать контекстное меню для сообщения
        - assert: Вызывается контекстное меню
        - do: Нажать по пункту “Подселиться ссылкой”
        - assert: Появляется подсказка “Текст скопирован”
        - do: Дописать к ссылке дополнительный текст и отправить пользователю Б в любой общий чат
        - assert: Ссылка с подписью отправлена
        - do: Посмотреть на отображение ссылки
        - assert: |
              В бабле с превью ссылки на сообщение 2 блока
              В первом блоке отображается ссылка и дополнительный текст
              Во втором блоке в левом верхнем углу бабла отображается аватар пользователя чье сообщение было скопировано или аватар канала (если ссылка скопирована из канала)
              Название канала или Имя пользователя (если этот групповой чат)
              Под названием канала (или именем пользователя) текст сообщения скопированного сообщения
              В правом нижнем углу (над кнопкой “Перейти к сообщению”) синмаркер доставки, время доставки
              В самом низу бабла кнопка “Перейти к сообщению”
        - do: Нажать по кнопке “Перейти к сообщению”
        - assert: |
              Открывается нужный чат/канал из которого было скопирована ссылка на сообщение
              Происходит подскролл к нужному сообщению
        - do: Пользователем Б перейти в общий чат, куда пользователь А отправил сообщение и нажать по по кнопке “Перейти к сообщению”
        - assert: |
              Открывается нужный чат/канал из которого было скопирована ссылка на сообщение
              Происходит подскролл к нужному сообщению

    Корректно отображается превью ссылки на сообщение когда есть несколько ссылок в сообщении[manual]:
        - automation:
        - description: |
              У пользователя А есть публичный чат/канал с историей (с включенной публичной ссылкой)
              Между авторизованными пользователями А и Б есть общий приватный/групповой чат
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Поскроллить вглубь истории чата и вызвать контекстное меню для сообщения
        - assert: Вызывается контекстное меню
        - do: Нажать по пункту “Подселиться ссылкой”
        - assert: Появляется подсказка “Текст скопирован”
        - do: Отправить пользователю Б в любой общий чат сообщение в котором будет несколько ссылок (после ссылкой на сообщение можно добавить еще одну любую ссылку, например yandex.ru )
        - assert: Сообщение отправлено (в превью раскрывается первая ссылка)
        - do: Посмотреть на отображение ссылки
        - assert: |
              В бабле с превью ссылки на сообщение 2 блока
              В первом блоке отображается текст сообщения со ссылками
              Во втором блоке в левом верхнем углу бабла отображается аватар пользователя чье сообщение было скопировано или аватар канала (если ссылка скопирована из канала)
              Название канала или Имя пользователя (если этот групповой чат)
              Под названием канала (или именем пользователя) текст сообщения скопированного сообщения
              В правом нижнем углу (над кнопкой “Перейти к сообщению”) синмаркер доставки, время доставки
              В самом низу бабла кнопка “Перейти к сообщению”
        - do: Нажать по кнопке “Перейти к сообщению”
        - assert: |
              Открывается нужный чат/канал из которого было скопирована ссылка на сообщение
              Происходит подскролл к нужному сообщению
        - do: Пользователем Б перейти в общий чат, куда пользователь А отправил сообщение и нажать по по кнопке “Перейти к сообщению”
        - assert: |
              Открывается нужный чат/канал из которого было скопирована ссылка на сообщение
              Происходит подскролл к нужному сообщению

    Плашка над полем ввода ссылки на сообщение, текстовое сообщение[manual]:
        - automation:
        - description: |
              У пользователя А есть публичный чат/канал с историей (с включенной публичной ссылкой), в истории есть текстовое сообщение
              Между авторизованными пользователями А и Б есть общий приватный/групповой чат
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Поскроллить вглубь истории чата и вызвать контекстное меню для сообщения
        - assert: Вызывается контекстное меню
        - do: Нажать по пункту “Подселиться ссылкой”
        - assert: Появляется подсказка “Текст скопирован”
        - do: Вставить ссылку в поле ввода в любой общий чат с пользователем Б 
        - assert: |
              Ссылка вставлена в поле ввода
              Над полем ввода появляется плашка в которой содержится Имя пользователя (чье сообщение было скопировано) или название канала (если ссылка была скопирована в канале) и под ним текст скопированного сообщения
        - do: Нажать на крестик в плашке
        - assert: Плашка скрылась, в поле ввода попрежнему сохраняется введенный текст
        - do: Отправить сообщение
        - assert: Сообщение отправлено, ссылка не раскрывается в превью и отображается как ссылка
        - do: Пользователем Б перейти в общий чат, куда пользователь А отправил ссылку
        - assert: |
              Открыто окно чата
              В окне чата ссылка отображается без превью

    Плашка над полем ввода ссылки на канал[manual]:
        - automation:
        - description: |
              Для прохождения тест-кейса необходимы 2 аккаунта
              Пользователь А администратор канала с включенной публичной ссылкой
              Между авторизованными пользователями А и Б есть общий приватный/групповой чат
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть канал из description
        - assert: Открыто окно канала
        - do: Нажать по шапке канала
        - assert: Открылась карточка канала
        - do: Скопировать публичную ссылку и вставить ссылку в поле ввода в любой общий чат с пользователем Б
        - assert: |
              Ссылка вставлена в поле ввода
              Над полем ввода появляется плашка в которой содержится надпись “Канала”- "количество подписчиков"
              Ниже в плашке отображается название канала
              Справа в плашке расположен крестик
        - do: Нажать на крестик в плашк
        - assert: Плашка скрылась, в поле ввода попрежнему сохраняется введенный текст
        - do: Отправить сообщение
        - assert: Сообщение отправлено, ссылка не раскрывается в превью и отображается как ссылка
        - do: Пользователем Б перейти в общий чат, куда пользователь А отправил ссылку
        - assert: |
              Открыто окно чата
              В окне чата ссылка отображается без превью

    Плашка над полем ввода ссылки на групповой чат[manual]:
        - automation:
        - description: |
              Для прохождения тест-кейса необходимы 2 аккаунта
              Пользователь А администратор группового чата с включенной публичной ссылкой
              Между авторизованными пользователями А и Б есть общий приватный/групповой чат
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать по шапке чата
        - assert: Открылась карточка чата
        - do: Скопировать публичную ссылку
        - assert: Ссылка скопирована
        - do: Вставить ссылку в поле ввода в любой общий чат с пользователем Б
        - assert: |
              Ссылка вставлена в поле ввода
              Над полем ввода появляется плашка в которой содержится надпись “Чат”- "количество участников"
              Ниже в плашке отображается название чата
              Справа в плашке расположен крестик
        - do: Нажать на крестик в плашке с превью
        - assert: Плашка скрылась, в поле ввода попрежнему сохраняется введенный текст
        - do: Отправить сообщение
        - assert: Сообщение отправлено, ссылка не раскрывается в превью и отображается как ссылка
        - do: Пользователем Б перейти в общий чат, куда пользователь А отправил ссылку
        - assert: |
              Открыто окно чата
              В окне чата ссылка отображается без превью

    Корректно отображается маленькое превью главных страниц[manual]:
        - automation:
        - description: |
              Между авторизованными пользователями А и Б есть общий приватный/групповой чат/канал
              Условие - если наибольшая сторона картинки не превышает 300 пикселей, размер придёт в параметр preview.image.(width | height), то мы отображаем маленькое превью (Если сторона картинки превышает 300 пикселей, то картинка будет раскрываться полностью и располагаться  над основным текстом)
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Отправить ссылку на любую главную страницу сайта в интернете, например mail.ru / yandex.ru / google.com
        - assert: |
              Ссылка отправлена пользователю Б
              В левой части бабла отображается квадратная картинка превью
              В правой части бабла есть Название сайта (хост) - бирюзовый цвет текста
              Название сайта - черный жирный текст (не всегда явно жирный)
              Описание - черный текст
              В правом нижнем углу синмаркер доставки, время доставки
        - do: Нажать на бабл с превью ссылки
        - assert: Осуществляется переход по ссылке

    Раскрытие превью ссылки[manual]:
        - automation:
        - description: |
              Для тестирования можно использовать ссылки ниже
              https://meduza.io/feature/2020/09/09/novye-pravila-oskara-nominanty-na-luchshiy-film-teper-dolzhny-sootvetstvovat-kriteriyam-kasayuschimsya-rasy-gendera-i-inklyuzivnosti
              https://www.kommersant.ru/doc/4483195?from=four_culture
              Между авторизованными пользователями А и Б есть общий приватный/групповой чат
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Отправить ссылку из description пользователю Б в любой общий чат
        - assert: |
              Ссылка отправлена 
              В превью ссылки раскрылось изображение ресурса
              Ниже отображается Хост - бирюзовый цвет текста
              Название сайта (заголовок статьи) - черный жирный текст (может быть выделен просто черным текстом в зависимости от ОС)
              Описание - черный текст
              В правом нижнем углу синмаркер доставки, время доставки
        - do: Нажать на бабл с превью ссылки
        - assert: Осуществляется переход по ссылке

    Превью ссылок не раскрывается если в сообщении есть альбом[manual]:
        - automation:
        - description: |
              Между авторизованными пользователями А и Б есть общий приватный/групповой чат
              Для тестирования можно использовать ссылки ниже
              https://meduza.io/feature/2020/09/09/novye-pravila-oskara-nominanty-na-luchshiy-film-teper-dolzhny-sootvetstvovat-kriteriyam-kasayuschimsya-rasy-gendera-i-inklyuzivnosti
              https://www.kommersant.ru/doc/4483195?from=four_culture
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на скрепку, выделить несколько изображений и нажать кнопку "Открыть"
        - assert: |
              Открывается попап, в котором размещены изображения и есть возможность добавить сообщение
              В попапе отображаются превью этих изображений
        - do: Ввести в поле ввода ссылку из описания и нажать кнопку отправки
        - assert: Сообщение отображается как альбом с подписью, превью ссылки не раскрывается
        - do: Пользователем Б перейти в общий чат, куда пользователь А отправил сообщение 
        - assert: Сообщение отображается как альбом с подписью, превью ссылки не раскрывается

    Формат форматирования КУРСИВ - не скрывать текст ссылки при наличии только URL[manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в этом же браузере
              Есть приватный/групповой чат в которых состоят пользователь А и Б
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: В поле ввода ввести следующую комбинацию __ yandex.ru __ (с каждой стороны по два нижних подчеркивания и без пробелов) и нажать кнопку “Отправить” 
        - assert: |
              Сообщение отправляется и видим как оно выделено курсивом
              Под сообщением с примененным форматированием отображается превью ссылки
        - do: Пользователем Б проверить отображение стиля сообщения
        - assert: Показывается сообщение в таком же стиле

    Формат форматирования ЖИРНЫЙ - не скрывать текст ссылки при наличии только URL[manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в этом же браузере
              Есть приватный/групповой чат в которых состоят пользователь А и Б
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: В поле ввода ввести следующую комбинацию ** yandex.ru ** (без пробелов) и нажать кнопку “Отправить”
        - assert: |
              Сообщение отправляется и видим как оно выделено в стиле **yandex.ru**
              Текст в стиле ЖИРНЫЙПод сообщением с примененным форматированием отображается превью ссылки
        - do: Пользователем Б проверить отображение стиля сообщения
        - assert: Показывается сообщение в таком же стиле

    Формат форматирования ССЫЛКА - не скрывать текст ссылки при наличии только URL[manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в этом же браузере
              Есть приватный/групповой чат в которых состоят пользователь А и Б
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: В поле ввода ввести следующую комбинацию [vk.com] (yandex.ru)  (без пробелов) и нажать кнопку “Отправить”
        - assert: |
              Сообщение отправляется и видим как оно выделено в стиле [vk.com](yandex.ru)
              Под текстом сообщения раскрывается превью ссылки от yandex.ru
        - do: Пользователем Б проверить отображение стиля сообщения
        - assert: Показывается сообщение в таком же стиле

    Корректно отображается превью ссылка на сообщение из канала без подписи[manual]:
        - automation:
        - description: |
              У пользователя А есть публичный канал с историей (с включенной публичной ссылкой)
              Между авторизованными пользователями А и Б есть общий приватный/групповой чат
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть канал из description
        - assert: Открыто окно канала
        - do: Поскроллить вглубь историю и вызвать контекстное меню для сообщения
        - assert: Вызывается контекстное меню
        - do: Нажать по пункту “Поделиться ссылкой”
        - assert: Появляется подсказка “Текст скопирован”
        - do: Отправить ссылку пользователю Б в любой общий чат
        - assert: |
              Ссылка отправлена 
              В левом верхнем углу бабла отображается круглый аватар канала откуда скопирована ссылка на сообщение
              Отображается Название канала откуда скопирована ссылка на сообщение и Текст сообщения
              В правом нижнем углу (над кнопкой “Перейти к сообщению”) синмаркер доставки, время доставки
              В самом низу бабла кнопка “Перейти к сообщению”
        - do: Нажать по кнопке “Перейти к сообщению”
        - assert: |
              Открывается нужный канал из ссылки
              Происходит подскролл к нужному сообщению
        - do: Пользователем Б перейти в общий чат, куда пользователь А отправил сообщение и нажать по по кнопке “Перейти к сообщению”
        - assert: |
              Открывается нужный канал из которого была скопирована ссылка
              Происходит подскролл к нужному сообщению

    Корректно отображается ссылка с отключенным превью[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть приватный / групповой чат
        - do: Открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Ввести в поле ввода "Привет http://ya.ru"
        - assert: Над полем ввода появилось плашка превью с этой ссылкой
        - do: Нажать на "крестик" в появившемся блоке превью над полем ввода сообщения
        - assert: |
              Плашка превью с этой ссылкой была закрыта
              Введенный ранее текст остался в поле ввода
        - do: Нажать на кнопку отправки в поле ввода
        - assert: |
              Сообщение было отправлено
              Превью ссылки не отображается в окне чата
        - do: Начать редактирование ранее отправленное сообщение
        - assert: |
               Открыт режим редактирования
               Над поелм ввода нет плашки с превью ссылки

    Превью ссылки над полем ввода при наборе сообщения[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть приватный / групповой чат
        - do: Открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Ввести в поле ввода "Привет http://ya.ru"
        - assert: Над полем ввода появилось плашка превью с этой ссылкой
        - do: Нажать на "крестик" в появившемся блоке превью над полем ввода сообщения
        - assert: |
              Плашка превью с этой ссылкой была закрыта
              Введенный ранее текст остался в поле ввода
        - do: Изменить ссылку, стереть последнюю букву, чтобы получилось "Привет http://ya.r"
        - do: Изменить ссылку, вернуть последнюю букву, чтобы получилось "Привет http://ya.ru"
        - assert: Над полем ввода опять появляется блок превью ссылки

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
    - chamb

