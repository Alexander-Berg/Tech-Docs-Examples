feature: ЖД
type: Страница заказа
description: >-
  Если тестируем тач-версию, кнопки Распечатать на странице не будет, это
  нормально.

  Для тача кнопку для возврата билетов можно найти, кликнув по гамбургеру рядом
  с информацией о пассажире (три точки).


  Тестовая карта (не для асессоров):

  Номер карты: 5100003697253468

  CVN: 090

  Дата: 12/20


  Информация не для Ассесроров: (Сейчас Билет ребенка без места находился НЕ под
  билетом для взрослого, это еще не реализовано)

  Перейти на вкладку Ж/Д билеты

  Выполнить покупку билетов для 1 взрослого, 1 ребенка от 5 до 10 лет и 1
  ребенка до 5 лет (поезд, места и данные пассажиров любые)
specs:
  'Поочередный возврат билетов':
    - do: |-
        Купить билеты, как описано в Preconditions
        На хэппи пейдж нажать на кнопку "Подробнее о заказе"
    - assert: >-
        * Открылась страница с полной информацией о заказе

        * Есть кнопка "Сдать билет" для детского билета с местом

        * Кнопка "Сдать билет" общая для билета взрослого и детского без места

        * Вверху страницы есть кнопки “Распечатать” (в таче нет), “Скачать
        билеты”/"Скачать билеты и страховку", “Сдать все билеты”, “…”
    - do: Кликнуть по кнопке "Сдать билет" для взрослого пассажира
    - assert: |-
        * Появилось модальное окно
        * Страница за пределами модального окна затемнена
        * В модальном окне есть заголовок "Вы сдаёте билет"
        * Ниже указана сумма к возврату (запомнить)
        * Есть предупреждение "Имейте в виду: ребенка не пустят в поезд одного."
        * Есть предупреждение "Восстановить покупку будет нельзя."
    - do: Нажать "Подтвердить"
    - assert: >-
        * На модальном окне появился лоадер

        * Через какое-то время модальное окно закрылось

        * Появилась красная надпись для этих билетов “Возврат”

        * Появилась ссылка “Скачать квитанцию” и ссылка "Скачать чек" (у
        асессоров может не быть ссылки на чек - это нормально, так как шаг
        оплаты пропускается)

        * Рядом со ссылками есть указание суммы к возврату, совпадает с
        запомненной

        * Текст информации для сданных билетов окрасился в серый цвет

        * Вверху страницы есть кнопки “Распечатать” (только в десктопе, в таче
        нет), “Скачать билеты” (в десктопе, а в таче просто "Скачать"), “Сдать
        билет" (название кнопки должно смениться, раньше было "Сдать все
        билеты")
    - do: Кликнуть "Сдать билет" для детского билета с местом
    - assert: >-
        * Появилось модальное окно возврата

        * Страница за пределами модального окна затемнена

        * В модальном окне есть заголовок “Вы сдаёте билет”

        * Ниже указана сумма к возврату (запомнить)

        * Нет предупреждения “Имейте в виду: если ребёнку не исполнилось 10, его
        не пустят в поезд одного.”

        * Есть предупреждение “Восстановить покупку будет нельзя.”
    - do: Нажать “Подтвердить”
    - assert: >-
        * На модальном окне появился лоадер

        * Через какое-то время модальное окно закрылось

        * Появилась красная надпись для этого билета “Возврат”

        * Появилась ссылка “Скачать квитанцию” и ссылка “Скачать чек”  (у
        асессоров может не быть ссылки на чек - это нормально, так как шаг
        оплаты пропускается)

        * Рядом со ссылками есть указание суммы к возврату, совпадает с
        запомненной

        * Текст информации для сданного билета окрасился в серый цвет

        * Вверху страницы пропали кнопки “Распечатать”(только в десктопе, в таче
        нет), “Скачать”, “Сдать билет”
manual: true
Функциональность: Действия с заказом
Устройство:
  - Десктоп
  - Тач
Страница: Страница заказа
Сервис: ЖД
Тестирование асессорами: Да
Окружение: Testing
Tag: Smoke
Автор: shenfeld
