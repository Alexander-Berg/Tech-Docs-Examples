feature: Пейджер
type: Доступность

import-labels:
  - features/desktop/pager/pager.testpalm.yml

browsers: chrome-desktop

specs:
  Проверка на доступность:
    - do: получить выдачу по запросу 'котики'
    - assert: на странице должен быть пейджер
    - screenshot: внешний вид [pager >> active]
    - tech: проверить, что у пейджера есть атрибуты role='navigation', aria-label='Страницы', aria-labelledby='pager__header_id'
    - tech: проверить, что у пейджера есть скрытый заголовок
    - tech: проверить, что у заголовока есть атрибут id='pager__header_id'
    - tech: проверить, что в пейджере есть хотя бы одна ссылка
    - tech: проверить, что у первой ссылки есть атрибуты tabindex=0 и aria-label='Страница 2'
    - tech: проверить, что у ссылки 'дальше' есть атрибут aria-label='Следующая страница'
    - do: перейти по четвертой ссылке
    - assert: выдача обновилась
    - assert: в пейджере появилась ссылка 'В начало'
    - do: перейти по ссылке 'В начало'
    - tech: проверить, что у ссылки 'В начало' есть атрибут aria-label='Первая страница'
    - assertMetrics:
        - web.total_click_count
        - web.total_request_count
        - web.total_rerequest_count
        - web.total_title_click
  Ручная проверка на доступность:
    tags:
      - manual
      - skip_manual_check
    beforeEach:
      - do: получить выдачу по запросу 'котики'
      - do: включить скринридер
      - do: c помощью горячих клавиш для навигации по заголовкам перейти к заголовку 'Страницы результатов поиска' (находится после раздела "Похожие запросы")
      - assert: |
          фокус перешел на скрытый заголовок пейджера
          скринридер озвучил: Страницы результатов поиска навигация ориентир, Страницы результатов поиска, заголовок уровень 2
    Переход к первому элементу пейджера:
      - automation: SERP-96711
      - do: c помощью кнопки 'Tab' перейти к следующему элементу пейджера
      - assert: |
          произошел переход на второй элемент пейджера
          скринридер озвучил: Список из 6 элементов, Страница 2, ссылка
    Навигация по ссылкам:
      - automation: SERP-96711
      - do: c помощью горячих клавиш для навигации по ссылкам пройти по всем ссылкам пейджера
      - assert: |
          были озвучены следующие ссылки:
          'Страница 2, ссылка'
          'Страница 3, ссылка'
          'Страница 4, ссылка'
          'Страница 5, ссылка'
          'Следующая страница, ссылка'
    Взаимодействие с пейджером:
      - automation: SERP-96711
      - do: нажать на любую ссылку из пейджера
      - assert: выдача обновилась в той же вкладке

files:
  - features/desktop/pager/pager.a11y.hermione.js

v-team: Beauty

tags:
  - A11y_serp
  - skip_e2e_check
  - no_assessors

counter: /$page/$main/$pager

tlds:
  - ru
