feature: Объектный ответ
type: Карточка объекта

counter: /$page/$parallel/$result[@wizard_name="entity_search"]/object-badge

specs-integration:
  Минимальная карточка:
    - tags: ['smoke']
    - do: получить выдачу по запросу 'Мадонна' (альтернативные запросы 'александр пушкин', 'пабло пикассо')
    - assert: появилась карточка объекта (на некоторых планшетах с низким разрешением экрана в книжной ориентации карточка может не отображаться, переверните устройство в альбомную ориентацию)
    - assert:  |
            в карточке присутствует непустой заголовок
            в карточке присутствует футер
  Подзаголовок:
    - tags: ['smoke']
    - counter: /$page/$parallel/$result[@wizard_name="entity_search"]/title
    - do: получить выдачу по запросу 'Мадонна' (альтернативные запросы 'александр пушкин', 'пабло пикассо')
    - assert: появилась карточка объекта (на некоторых планшетах с низким разрешением экрана в книжной ориентации карточка может не отображаться, переверните устройство в альбомную ориентацию)
    - assert: в карточке присутствует непустой подзаголовок
  Описание:
    - tags: ['smoke']
    - counter: /$page/$parallel/$result[@wizard_name="entity_search"]/object-badge/title
    - do: получить выдачу по запросу 'Мадонна' (альтернативные запросы 'александр пушкин', 'пабло пикассо')
    - assert: появилась карточка объекта (на некоторых планшетах с низким разрешением экрана в книжной ориентации карточка может не отображаться, переверните устройство в альбомную ориентацию)
    - assert: в карточке присутствует непустое описание

specs:
  Отсутствие кнопки показа трейлера при отсутствии урла трейлера:
    - params:
        foreverdata: '3807682315'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче есть карточка фильма
    - screenshot: пример внешнего вида [film-card-buttons-without-trailer-url]
    - assertMetrics: '*'
  Обтекание тумбы текстовыми блоками:
    - do: получить выдачу по запросу 'Заводной апельсин (роман)' и параметром &ento=0oCghydXc5ODk5ORIOcnV3MTU4NDMtYXNzb2MYAh2j-LM
    - assert: справа появилась карточка объектного ответа (в некоторых случаях планшет нужно перевернуть в альбомную ориентацию)
    - screenshot: пример внешнего вида - тумба с небольшим описанием над футером [plain]
    - assertMetrics: '*'
  Проверка видимости тумбы:
    - do: получить выдачу по запросу 'мастер и маргарита книга'
    - assert: на выдаче есть карточка объекта
    - screenshot: пример внешнего вида (карточка может отличаться - это не баг) [book-card-figures-over-header]
  Логирование my_ugc:
    - params:
        foreverdata: '4258660408'
    - tags:
        - no_assessors
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче есть карточка объекта
    - tech: сработал счетчик path='/$page[@tech@entity-ugc-empty=1]'
  Карточка с тумбой и футером:
    - do: получить выдачу по запросу 'Ummagumma'
    - screenshot: пример внешнего вида (на некоторых планшетах с низким разрешением экрана в книжной ориентации карточка может не отображаться, переверните устройство в альбомную ориентацию) [with-thumb-footer]
    - assertMetrics: '*'
  Ссылки с "&" в названии объекта:
    - do: получить выдачу по запросу 'S&W 625' (альтернативные запросы 'Smith & Wesson Model 686', 'Smith & Wesson Model 13')
    - assert: |
        на выдаче справа есть карточка Объектного ответа
        в карточке есть картинка
    - do: кликнуть картинку
    - assert: |
        произошел переход на сервис Картинок
        запрос и выдача соответствует объектному ответу с Поиска

files:
  - features/deskpad/z-entity-search/card/card.hermione.js
  - features/deskpad/z-entity-search/card/card.hermione.e2e.js

v-team: OO

tags:
  - reviewed
  - oo_card

tlds:
  - ru
  - ua
  - by
  - kz
  - com
  - com.tr
  - fr
