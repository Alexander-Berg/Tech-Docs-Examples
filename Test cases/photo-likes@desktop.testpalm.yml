feature: Одна организация
type: Лайки на фото

params:
  yandex_login: stas.mihailov666

specs:
  beforeEach:
    - do: залогиниться в Яндексе
    - do: получить выдачу по запросу 'кафе пушкин'
    - assert: в правой колонке есть карточка одной организации
  Таб Фото в правой колонке:
    - label: companies-photo-reactions-serp-tab-{{SET_NAME}}
    - do: кликнуть в таб 'Фото'
    - assert: загрузились фотографии
    - do: навести курсор на первую фотографию
    - assert: на фотографии появился блок лайк-дизлайк
    - screenshot: пример внешнего вида блока лайк-дизлайк на фото [photo-hover]
    - do: кликнуть на лайк (большой палец вверх)
    - assert: счетчик лайков увеличился на единицу
    - tech: сработал счетчик /parallel/result/snippet/companies/company/reactions/like
    - screenshot: пример внешнего вида выставленного лайка [like]
    - do: увести курсор с фотографии
    - screenshot: пример внешнего вида выставленного лайка без курсора на фотографии [like-no-hover]
    - do: навести курсор на первую фотографию
    - assert: на фотографии появился блок лайк-дизлайк
    - do: кликнуть на дизлайк (большой палец вниз)
    - tech: сработал счетчик /parallel/result/snippet/companies/company/photo/reactions/dislike
    - assert: счетчик дизлайков увеличился на единицу, счетчик лайков уменьшился на единицу
    - screenshot: пример внешнего вида выставленного дизлайка [dislike]
    - do: увести курсор с фотографии
    - screenshot: пример внешнего вида выставленного дизлайка без курсора на фотографии [dislike-no-hover]
    - do: навести курсор на первую фотографию
    - assert: на фотографии появился блок лайк-дизлайк
    - do: кликнуть еще раз на дизлайк (большой палец вниз)
    - assert: счетчик дизлайков уменьшился на единицу
    - do: увести курсор с фотогрфии
    - assert: блок лайк-дизлайк исчез с фотографии
    - assertMetrics: '*'
  Таб Фото в попапе:
    - label: companies-photo-reactions-popup-tab-{{SET_NAME}}
    - do: кликнуть на первую похожую организацию
    - assert: открылся попап организации
    - do: кликнуть в таб 'Фото' в попапе
    - assert: загрузились фотографии
    - do: навести курсор на первую фотографию
    - assert: на фотографии появился блок лайк-дизлайк
    - screenshot: пример внешнего вида блока лайк-дизлайк на фото [photo-hover-popup]
    - do: кликнуть на лайк (большой палец вверх)
    - assert: счетчик лайков увеличился на единицу
    - screenshot: пример внешнего вида выставленного лайка [like-popup]
    - assertMetrics: '*'
  Просмотрщик Фото:
    - label: companies-photo-reactions-viewer-{{SET_NAME}}
    - do: кликнуть на первую похожую организацию
    - assert: открылся попап организации
    - do: кликнуть в таб 'Фото' в попапе
    - assert: загрузились фотографии
    - do: кликнуть в первую фотографию
    - assert: первая фотография открылась в просмотрщике
    - assert: под большой фотографией есть лайк-дизлайк
    - screenshot: пример внешнего вида [reactions-viewer]
    - do: кликнуть на лайк (большой палец вверх)
    - assert: счетчик лайков увеличился на единицу
    - do: запомнить значение количества лайков и дизлайков (первая фотография)
    - screenshot: пример внешнего вида выставленного лайка [like-viewer]
    - do: кликнуть по стрелке вправо
    - assert: загрузилась следующая (вторая) фотография
    - assert: под фотографией есть лайк-дизлайк
    - do: кликнуть на дизлайк (большой палец вниз)
    - assert: счетчик дизлайков увеличился на единицу
    - do: запомнить значение количества лайков и дизлайков (вторая фотография)
    - screenshot: пример внешнего вида выставленного лайка [dislike-viewer]
    - do: кликнуть по стрелке влево
    - assert: загрузилась предыдущая (первая) фотография
    - assert: под фотографией есть лайк-дизлайк
    - assert: на фотографии стоит лайк
    - assert: значение количества лайков и дизлайков совпадает с запомненным ранее значением (первая фотография)
    - do: кликнуть на лайк (большой палец вверх)
    - assert: лайк сбросился
    - assert: счетчик лайков уменьшился на единицу
    - do: кликнуть по стрелке вправо
    - assert: загрузилась следующая (вторая) фотография
    - assert: под фотографией есть лайк-дизлайк
    - assert: на фотографии стоит дизлайк
    - assert: значение количества лайков и дизлайков совпадает с запомненным ранее значением (вторая фотография)
    - do: кликнуть на дизлайк (большой палец вниз)
    - assert: дизлайк сбросился
    - assert: счетчик дизлайков уменьшился на единицу
    - assertMetrics: '*'
  Синхронизация:
    Оценка на табе Фото в правой колонке:
      - do: кликнуть в таб 'Фото'
      - assert: загрузились фотографии
      - do: навести курсор на первую фотографию
      - assert: на фотографии появился блок лайк-дизлайк
      - screenshot: пример внешнего вида блока лайк-дизлайк на фото [companies-photo-reactions-serp-tab-{{SET_NAME}} >> photo-hover]
      - do: кликнуть на лайк (большой палец вверх)
      - assert: счетчик лайков увеличился на единицу
      - do: запомнить значение количества лайков и дизлайков (первая фотография)
      - screenshot: пример внешнего вида выставленного лайка [companies-photo-reactions-serp-tab-{{SET_NAME}} >> like]
      - do: кликнуть по центру первой фотографии
      - assert: открылся попап с просмотрщиком
      - assert: первая фотография открылась в просмотрщике
      - assert: под большой фотографией есть лайк-дизлайк
      - assert: на фотографии стоит лайк
      - assert: значение количества лайков и дизлайков совпадает с запомненным ранее значением (первая фотография)
      - screenshot: пример внешнего вида выставленного лайка [companies-photo-reactions-viewer-{{SET_NAME}} >> like-viewer]
      - do: кликнуть по кнопке сворачивания просмотрщика (в правом верхнем углу темной области)
      - assert: просмотрщик закрылся, попап продолжает быть открытым
      - do: навести курсор на первую фотографию в попапе
      - assert: на фотографии появился блок лайк-дизлайк
      - assert: на фотографии стоит лайк
      - assert: значение количества лайков и дизлайков совпадает с запомненным ранее значением (первая фотография)
    Оценка на табе Фото в попапе:
      - do: кликнуть в таб 'Фото'
      - assert: загрузились фотографии
      - do: кликнуть по кнопке 'Все фото' под списком фотографий
      - assert: открылся попап организации на табе 'Фото'
      - assert: загрузились фотографии
      - do: навести курсор на первую фотографию в попапе
      - assert: на фотографии появился блок лайк-дизлайк
      - screenshot: пример внешнего вида блока лайк-дизлайк на фото [companies-photo-reactions-popup-tab-{{SET_NAME}} >> photo-hover-popup]
      - do: кликнуть на лайк (большой палец вверх)
      - assert: счетчик лайков увеличился на единицу
      - do: запомнить значение количества лайков и дизлайков (первая фотография)
      - screenshot: пример внешнего вида выставленного лайка [companies-photo-reactions-popup-tab-{{SET_NAME}} >> like-popup]
      - do: кликнуть по центру первой фотографии
      - assert: первая фотография открылась в просмотрщике
      - assert: под большой фотографией есть лайк-дизлайк
      - assert: на фотографии стоит лайк
      - assert: значение количества лайков и дизлайков совпадает с запомненным ранее значением (первая фотография)
      - screenshot: пример внешнего вида выставленного лайка [companies-photo-reactions-viewer-{{SET_NAME}} >> like-viewer]
      - do: кликнуть по крестику попапа организации (закрыть попап)
      - assert: попап закрылся
      - do: навести курсор на первую фотографию
      - assert: на фотографии появился блок лайк-дизлайк
      - assert: на фотографии стоит лайк
      - assert: значение количества лайков и дизлайков совпадает с запомненным ранее значением (первая фотография)
    Оценка в просмотрщике:
      - do: кликнуть в таб 'Фото'
      - assert: загрузились фотографии
      - do: кликнуть по кнопке 'Все фото' под списком фотографий
      - assert: открылся попап организации на табе 'Фото'
      - assert: загрузились фотографии
      - do: кликнуть в первую фотографию
      - assert: первая фотография открылась в просмотрщике
      - assert: под большой фотографией есть лайк-дизлайк
      - screenshot: пример внешнего вида [companies-photo-reactions-viewer-{{SET_NAME}} >> reactions-viewer]
      - do: кликнуть на лайк (большой палец вверх)
      - assert: счетчик лайков увеличился на единицу
      - do: запомнить значение количества лайков и дизлайков (первая фотография)
      - screenshot: пример внешнего вида выставленного лайка [companies-photo-reactions-viewer-{{SET_NAME}} >> like-viewer]
      - do: кликнуть по кнопке сворачивания просмотрщика (в правом верхнем углу темной области)
      - assert: просмотрщик закрылся, попап продолжает быть открытым
      - do: навести курсор на первую фотографию в попапе
      - assert: на фотографии появился блок лайк-дизлайк
      - assert: на фотографии стоит лайк
      - assert: значение количества лайков и дизлайков совпадает с запомненным ранее значением (первая фотография)
      - do: кликнуть по крестику попапа организации (закрыть попап)
      - assert: попап закрылся
      - do: навести курсор на первую фотографию
      - assert: на фотографии появился блок лайк-дизлайк
      - assert: на фотографии стоит лайк
      - assert: значение количества лайков и дизлайков совпадает с запомненным ранее значением (первая фотография)

files:
  - features/companies/photo-likes/photo-likes@desktop.hermione.js

v-team: VanillaGeo

tags:
  - skip_e2e_check

tlds: all
