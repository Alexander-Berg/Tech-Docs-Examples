feature: Страница "Сейчас в СМИ"

specs-integration:
  открывается из футера:
    - tags:
      - smoke
      - backend_news
      - smoke_zen
    - do: перейти в рубрику Главное
    - do: доскроллить до футера
    - assert: отображается футер
    - do: кликнуть по 'Сейчас в СМИ Статистика'
    - assert: в той же вкладке открывается страница 'Сейчас в СМИ'

  открывается из футера региональной рубрики для Москвы:
    - tags:
      - smoke
      - backend_news
    - do: в yandex.ru/tune выбрать Москву в качестве региона нахождения
    - do: вернуться на сервис Новости, обновить страницу и перейти на страницу региональной рубрики (Москва)
    - do: доскроллить до футера
    - assert: |
        отображается футер,
        в футере есть ссылка 'Сейчас в СМИ Москва. Статистика'
    - do: кликнуть по 'Сейчас в СМИ Москва. Статистика'
    - assert: |
        в той же вкладке открывается страница 'Сейчас в СМИ',
        заголовок страницы - 'Сейчас в СМИ: Москва', под загловком страницы отображается дата и время,
    - do: поскроллить страницу вниз
    - assert: |
        страница содержит 15 разных новостей,
        все новости относятся к московскому региону

specs:
  позволяет перейти в сюжет:
    - tags:
      - smoke
      - backend_news
      - smoke_zen
    - do: перейти в рубрику Главное
    - do: доскроллить до футера
    - assert: отображается футер
    - do: кликнуть по 'Сейчас в СМИ Статистика'
    - assert: |
        в той же вкладке открывается страница 'Сейчас в СМИ',
        заголовок страницы - 'Сейчас в СМИ', под загловком страницы отображается дата и время,
    - do: поскроллить страницу вниз
    - assert: |
        страница содержит 15 разных новостей,
        среди 15 новостей нет повторяющихся,
        некоторые новости могут содержать связанные сюжеты
    - do: навести курсор мыши на любую новость
    - assert: по ховеру меняется курсор и шрифт заголовка новости (красный)
    - do: выбрать и запомнить заголовок сюжета, кликнуть по заголовку сюжета
    - assert: |
        в той же вкладке открывается страница соответствующего сюжета,
        заголовки на странице статистики и на странице сюжета совпадают

  позволяет перейти в связанный сюжет:
    - tags:
      - smoke
    - do: перейти в рубрику Главное
    - do: доскроллить до футера
    - assert: отображается футер
    - do: кликнуть по 'Сейчас в СМИ Статистика'
    - assert: |
        в той же вкладке открывается страница 'Сейчас в СМИ',
        заголовок страницы - 'Сейчас в СМИ', под загловком страницы отображается дата и время,
        некоторые новости могут содержать связанные сюжеты
    - do: навести курсор мыши на 'Связанные сюжеты' под любой новостью
    - assert: по ховеру меняется курсор и шрифт заголовка 'Связанные сюжеты' (черный)
    - do: кликнуть по заголовку 'Связанные сюжеты'
    - assert: |
        разворачивается список связанных сюжетов,
        галочка в заголовке 'Связанные сюжеты' переворачивается вверх
    - do: еще раз кликнуть по заголовку 'Связанные сюжеты'
    - assert: |
        список связанных сюжетов свернулся,
        галочка в заголовке 'Связанные сюжеты' переворачивается вниз
    - do: еще раз кликнуть по заголовку 'Связанные сюжеты' и навести курсор мыши на любой сюжет из списка связанных
    - assert: по ховеру меняется курсор и шрифт заголовка новости (красный)
    - do: выбрать и запомнить заголовок сюжета из списка связанных, кликнуть по заголовку сюжета
    - assert: |
        в той же вкладке открывается страница соответствующего сюжета,
        заголовки на странице статистики и на странице сюжета совпадают

  отображает статистику для каждого сюжета:
    - tags:
      - smoke
      - backend_news
      - smoke_zen
    - do: перейти в рубрику Главное
    - do: доскроллить до футера
    - assert: отображается футер
    - do: кликнуть по 'Сейчас в СМИ Статистика'
    - assert: |
        в той же вкладке открывается страница 'Сейчас в СМИ',
        заголовок страницы - 'Сейчас в СМИ', под загловком страницы отображается дата и время,
        заголовки таблицы со статистикой - Сюжет, Сообщений за час, Документов в сюжете, Сюжетов в теме, Документов в теме, Просмотры сюжета, Интерес, Вес сюжета и Рубрика
    - do: поскроллить страницу вниз
    - assert: |
        в каждой ячейке таблицы отображаются значения,
        в столбце 'Рубрика' могут попадаться прочерки,
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2022-05-24_12-30-30.png
    - do: кликнуть по заголовку 'Связанные сюжеты' под любой новостью
    - assert: |
        разворачивается список связанных сюжетов,
        для каждого связанного сюжета есть статистика, кроме столбцов 'Сюжетов в теме', 'Документов в теме', 'Просмотры сюжета',
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2022-05-24_12-31-12.png
    - do: поресайзить страницу, уменьшить и увеличить ширину окна браузера
    - assert: при ресайзе верстка не ломается, значения во всех ячейках отображаются корректно

  позволяет перейти на страницу справки:
    - tags:
      - smoke
    - do: перейти в рубрику Главное
    - do: доскроллить до футера
    - assert: отображается футер
    - do: кликнуть по 'Сейчас в СМИ Статистика'
    - assert: |
        в той же вкладке открывается страница 'Сейчас в СМИ',
        заголовки таблицы со статистикой - Сюжет, Сообщений за час, Документов в сюжете, Сюжетов в теме, Документов в теме, Просмотры сюжета, Интерес, Вес сюжета и Рубрика
    - do: навести курсор мыши на знак вопроса в заголовке 'Документов в сюжете'
    - assert: по ховеру меняется стиль курсора, шрифт знака вопроса становится черным
    - do: кликнуть на знак вопроса в заголовке 'Документов в сюжете'
    - assert: |
        по клику появляется тултип с подсказкой 'Количество сообщений о событии, вошедших в сюжет',
        внешний вид https://jing.yandex-team.ru/files/nightsonne/2020-11-02_17-57-20.png
    - do: навести курсор мыши на подчеркнутое слово 'сюжет' в тексте подсказки
    - assert: по ховеру меняется стиль курсора
    - do: кликнуть по слову 'сюжет' в тексте подсказки
    - assert: в новой вкладке открывается страница https://yandex.ru/support/news/plots.html
    - do: вернуться к странице 'Сейчас в СМИ' и проскроллить вниз до футера
    - assert: |
        над футером серым шрифтом отображается полное описание функциональности сервиса Яндекс.Новости,
        под описанием есть ссылка 'Подробнее о том, как строится статистика сюжета',
        внешний вид https://jing.yandex-team.ru/files/nightsonne/2020-11-02_18-04-35.png
    - do: навести курсор мыши на фразу 'как строится статистика сюжета'
    - assert: по ховеру меняется стиль курсора
    - do: кликнуть на фразу 'как строится статистика сюжета'
    - assert: в новой вкладке открывается страница https://yandex.ru/support/news/plot-statistics.html

  содержит подсказки-тултипы к заголовкам столбцов:
    - tags:
      - smoke
    - do: перейти в рубрику Главное
    - do: доскроллить до футера
    - assert: отображается футер
    - do: кликнуть по 'Сейчас в СМИ Статистика'
    - assert: |
        в той же вкладке открывается страница 'Сейчас в СМИ',
        заголовки таблицы со статистикой - Сюжет, Сообщений за час, Документов в сюжете, Сюжетов в теме, Документов в теме, Просмотры сюжета, Интерес, Вес сюжета и Рубрика
    - do: наводить курсор мыши на заголовки столбцов Сообщений за час, Документов в сюжете, Сюжетов в теме, Документов в теме, Просмотры сюжета
    - assert: |
        по ховеру на соответствующий заголовок появляется знак вопроса в кружке,
        названия заголовков не меняют положения,
        внешний вид https://jing.yandex-team.ru/files/nightsonne/2020-11-02_17-47-22.png
    - do: навести курсор мыши на знак вопроса в заголовке Сообщений за час
    - assert: по ховеру меняется стиль курсора, шрифт знака вопроса становится черным
    - do: кликнуть на знак вопроса в заголовке Сообщений за час
    - assert: |
        по клику появляется тултип с подсказкой 'Количество новых сообщений о событии за последний час',
        внешний вид https://jing.yandex-team.ru/files/nightsonne/2020-11-02_17-51-50.png
    - do: поскроллить страницу вниз
    - assert: при скролле тултип скрывается
    - do: еще раз кликнуть на знак вопроса в заголовке Сообщений за час
    - assert: по клику появляется тултип с подсказкой
    - do: кликнуть за пределами тултипа
    - assert: по клику тултип скрывается

  при наведении на интерес показывает тултип с источниками с наибольшим количеством визитов:
    - do: перейти на страницу 'Сейчас в СМИ' по прямой ссылке https://yandex.ru/news/top
    - do: навести курсор мышки на надпись интерес в строке сюжета (может быть высокий, средний или низкий)
    - assert: появился попап со списком источников

files:
  - features/news/top15/top15.desktop.hermione.e2e.js
  - features/news/top15/top15.desktop.hermione.js

tags:
  - neo
  - top15desktop

manager: mrwhite

qa-engineer: nightsonne

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
