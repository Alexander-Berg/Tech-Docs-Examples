feature: Шапка Яндекс.Новостей

specs:
  имеет внешний вид для залогиненного пользователя без Плюса:
    - tags:
      - backend_news
      - brow_only
    - do: авторизоваться под пользователем без подписки Яндекс.Плюс
    - assert: |
        отображается шапка сервиса Яндекс.Новости,
        шапка содержит логотип Яндекса,
        шапка содержит иконку Яндекс.Плюс, колокольчик уведомлений, аватарку пользователя с количеством непрочтенных писем,
        шапка содержит поисковую строку и табы сервисов
        внешний вид https://jing.yandex-team.ru/files/kossakovskaya/2021-09-07_13-29-24.png

  имеет внешний вид для залогиненного пользователя с Плюсом:
    - tags:
      - backend_news
      - brow_only
    - do: авторизоваться под пользователем с подпиской Яндекс.Плюс (если нет аккаунта с плюсом, можно взять на странице - https://wiki.yandex-team.ru/eva/testing/projects/nerpa/#loginyiparolidljatestovyxpolzovatelejjspodpiskojjpljusa)
    - assert: |
        отображается шапка сервиса Яндекс.Новости,
        шапка содержит логотип Яндекса,
        шапка содержит колокольчик уведомлений, аватарку пользователя с количеством непрочтенных писем и разноцветной обводкой,
        шапка содержит поисковую строку и табы сервисов
        внешний вид https://jing.yandex-team.ru/files/kossakovskaya/2021-09-07_13-29-56.png

  имеет внешний вид для незалогиненного пользователя:
    - tags:
      - backend_news
      - brow_only
    - do: разлогиниться, если был залогин
    - assert: |
        отображается шапка сервиса Яндекс.Новости,
        шапка содержит логотип Яндекса, иконку Яндекс.Плюс, кнопку Войти,
        шапка содержит поисковую строку, табы сервисов и рубрикатор
        внешний вид https://jing.yandex-team.ru/files/vasekerka/2022-04-14_14-51-16.png ,
        обратите внимание! список портальных табов может отличаться от скриншота - это ок.

  позволяет перейти в другой сервис:
    - tags:
      - brow_only
    - do: открыть главную страницу сервиса Яндекс.Новости
    - assert: |
        отображается шапка сервиса Яндекс.Новости,
        название Новости расположено по центру в ленте сервисов и выделено жирным шрифтом
    - do: поскроллить горизонтально табы сервисов
    - assert: таббар скроллится, названия всех сервисов отображаются полностью
    - do: тапнуть на сервис Картинки
    - assert: происходит переход на Яндекс.Картинки
    - do: нажать на аппаратную или браузерную кнопку Назад
    - assert: происходит возврат на главную страницу Яндекс.Новости

  может содержать иконку Яндекс Плюс на домене by, kz (проверяем только by) [manual]:
    - tags:
      - by_suite
      - backend_news
      - smoke_zen
    - tlds:
      - by
    - reasonNotToAuto:
      - Нет возможности автоматизировать проверку на нацдомене, т.к. команда yaGoTld не сохраняет дамп
    - automation:
      - NERPA-12077
    - do: залогиниться под аккаунтом, не имеющим подписки в Я.Плюс
    - do: перейти на страницу https://yandex.by/tune/geo и выставить город "Минск"
    - do: перейти на тестовый стенд
    - do: открыть главную страницу сервиса Яндекс.Новости на домене by
    - assert: |
        отображается шапка сервиса Яндекс.Новости
        шапка содержит логотип Яндекса, иконку Яндекс.Плюс и аватар,
        шапка содержит поисковую строку, колокольчик, табы сервисов и рубрикатор

#  не содержит иконку Яндекс Плюс на доменах ua, uz, lt, lv, com (проверяем только ua) [manual]:
#    - tags:
#      - ua_suite
#      - backend_news
#    - tlds:
#      - ua
#    - reasonNotToAuto:
#      - Нет возможности автоматизировать проверку на нацдомене, т.к. команда yaGoTld не сохраняет дамп
#    - automation:
#      - NERPA-12077
#    - do: открыть главную страницу сервиса Яндекс.Новости на домене ua
#    - do: залогиниться под аккаунтом, не имеющим подписки в Я.Плюс
#    - assert: |
#        отображается шапка сервиса Яндекс.Новости
#        шапка содержит логотип Яндекса, аватар,
#        шапка содержит поисковую строку, колокольчик, табы сервисов и рубрикатор,
#        шапке НЕ содержит иконку Яндекс Плюс

  позволяет ввести поисковый запрос:
    - tags:
      - search
      - brow_only
    - do: тапнуть по поисковой строке
    - assert: |
        появился курсор в поле поисковой строки,
        скрывается верхняя часть шапки с логотипом, иконками Плюса, кнопокой войти,
        поисковая строка перемещается вверх, появляется кнопка Найти,
        внешний вид https://jing.yandex-team.ru/files/vasekerka/2021-06-08_18-55-01.png
    - do: ввести в поисковую строку запрос 'заявил'
    - assert: |
        в поле ввода появляется текст поискового запроса и кнопка очистки текста (крестик),
        под полем ввода появляется набор предложенных вариантов поиска (саджест)
    - do: тапнуть на пространство под саджестом (если под саджестом нет свободного места - тапну на кнопку "Готово" на клавиатуре. Кнопка может называться "Done" или просто иконка по типу enter или как-то иначе, но суть - тапнуть по кнопке на клавиатуре, которая обычно располагается в правом нижнем углу)
    - assert: |
        саджест пропадает, поисковая шапка возвращается к изначальному состоянию,
        в поисковой строке остается запрос 'ученые' и крестик очистки запроса,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-07_13-32-58.png
    - do: тапнуть по крестику очистки запроса
    - assert: |
        поисковый запрос очистился,
        появился курсор в поле поисковой строки,
        скрывается верхняя часть шапки с логотипом, иконками Плюса, кнопокой войти,
        поисковая строка перемещается вверх, появляется кнопка Найти

  позволяет перейти в поиск по новостям:
    - tags:
      - search
    - do: тапнуть по поисковой строке
    - do: ввести поисковый запрос 'учёные' и нажать кнопку 'Найти'
    - assert: произошёл переход в поиск Яндекс.Новостей по указанному запросу
    - do: вернуться на главную страницу новостей
    - do: ввести поисковый запрос 'учёные', тапнуть на любой вариант из саджеста
    - assert: произошёл переход в поиск Яндекс.Новостей по указанному запросу

  позволяет перейти в избранное пользователя:
    - tags:
      - search
    - do: авторизоваться на сервисе Яндекс.Новости и открыть главную страницу сервиса Яндекс.Новости
    - do: тапнуть на аватар пользователя и в выпадающем меню нажать на строку "Избранное", скрин  https://jing.yandex-team.ru/files/kossakovskaya/2021-09-20_15-25-43.png
    - assert: |
        в текущей вкладке открывается сервис Яндекс.Избранное,
        пользователь в сервисе определен верно

  позволяет включить темную версию шапки:
    - tags:
      - search
    - do: открыть страницу 'https://yandex.ru/news?flags=yxneo_news_phone_main_service-theme=dark'
    - assert: |
        в текущей вкладке отображается темная версия шапки

  шапка остается светлой, если темизация выключена:
    - tags:
      - search
    - do: открыть страницу 'https://yandex.ru/news'
    - assert: |
        в текущей вкладке отображается светлая версия шапки 

  корректно отображает попап плюсового пользователя в темной теме:
    - tags:
      - search
    - do: авторизоваться на сервисе Яндекс.Новости плюсовым аккаунтом и открыть главную страницу сервиса Яндекс.Новости
    - do: тапнуть на аватар пользователя
    - assert: |
        открылся попап пользователя,
        все цвета отображены корректно


files:
  - features/news/header/header.phone.hermione.js

qa-engineer: a-groza

manager: glushneva

tags:
  - neo
  - header

tlds:
  - ru
  - by
  - kz
