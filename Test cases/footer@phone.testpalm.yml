feature: Footer React

specs:
  Внешний вид:
    default:
      - do: открыть ссылку https://yandex.ru/turbo?stub=footer/default.json
      - screenshot: внешний вид соответствует примеру [plain]
    view-inline:
      - do: открыть ссылку https://yandex.ru/turbo?stub=footer/view-inline.json
      - screenshot: внешний вид соответствует примеру [plain]
    default-copyright:
      - do: открыть ссылку https://yandex.ru/turbo?stub=footer/default-copyright.json
      - screenshot: внешний вид соответствует примеру [plain]
    with-agreement:
      - do: открыть ссылку https://yandex.ru/turbo?stub=footer/with-agreement.json
      - screenshot: внешний вид соответствует примеру [plain]
    with-copyrights-link:
      - do: открыть ссылку https://yandex.ru/turbo?stub=footer/with-copyrights-link.json
      - screenshot: внешний вид соответствует примеру [plain]
    without-copyrights:
      - do: открыть ссылку https://yandex.ru/turbo?stub=footer/without-copyrights.json
      - screenshot: внешний вид соответствует примеру [plain]

  Проверка ссылок внутри футера:
    - params:
        foreverdata: '2310953522'
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета (название заголовка Тестовая новостная станица — турбо)
    - assert: открывается турбо-страница в той же вкладке
    - do: в конце страницы найти футтер-подвал (блок с темно-серой подложкой, прижатый к нижнему краю страницы)
    - assert: футтер отображается на странице и прижат к нижнему краю
    - screenshot: внешний вид соотвествует скриншоту, может не быть значка копипаста[footer/default plain]
    - do: тапнуть по ссылке "Полная версия"
    - tech: сработал счетчик на клик по ссылке "Полная версия" (/turbo/footer/link/full)
    - assert: в новой вкладке откроется оригинальная версия статьи на сайте источника
    - tech: сработал счетчик на клик по ссылке "Пожаловаться" (/turbo/footer/link/support)
    - do: вернуться на турбо-версию страницы
    - do: тапнуть по ссылке "Пожаловаться"
    - assert: в новой вкладке откроется  cтраница "https://yandex.ru/support/search/troubleshooting/turbo.html#turbo"

  Не падает, если предоставлен неправильный урл:
    - params:
        foreverdata: '3846579452'
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета (название заголовка Тестовая станица для invalid-url — турбо)
    - assert: открывается турбо-страница в той же вкладке
    - do: тапнуть по ссылке Полная версия
    - assert: в новой вкладке открылась страница tv.yandex.ru

  Проверка локализации:
    Английский:
      - tags: no_assessors
      - do: открыть главную страницу Яндекса с параметром '/turbo?stub=footer/default.json&l10n=en'
      - assert: футтер отображается на странице
      - screenshot: внешний вид соответствует примеру [localization-en]

    Турецкий:
      - tags: no_assessors
      - do: открыть главную страницу Яндекса с параметром '/turbo?stub=footer/default.json&l10n=tr'
      - assert: футтер отображается на странице
      - screenshot: внешний вид соответствует примеру [localization-tr]

    Английский для википедии:
      - tags: no_assessors
      - do: открыть главную страницу Яндекса с параметром '/turbo?stub=footer/for-wiki.json&l10n=en'
      - assert: футтер отображается на странице
      - screenshot: внешний вид соответствует примеру [localization-wiki-en]

    Для отсутствующей локализации показываем русский:
      - tags: no_assessors
      - do: открыть главную страницу Яндекса с параметром '/turbo?stub=footer/for-wiki.json&l10n=zz'
      - assert: футтер отображается на странице
      - screenshot: внешний вид соответствует примеру [localization-wiki-zz]

  Проверка открытия модального окна:
    - do: открыть ссылку https://yandex.ru/turbo?stub=footer/with-agreement.json
    - assert: открывается турбо-страница в той же вкладке
    - do: тапнуть по ссылке "Юридическая информация"
    - assert: модальное окно открылось
    - screenshot: внешний вид соответствует примеру [modal-agreement]
    - do: тапнуть по кнопке "Закрыть"
    - assert: модальное окно закрылось

  Проверка открытия модального окна c длинным текстом:
    - do: открыть ссылку https://yandex.ru/turbo?stub=footer/with-agreement-long-text.json
    - assert: открывается турбо-страница в той же вкладке
    - do: тапнуть по ссылке "Юридическая информация"
    - assert: модальное окно открылось
    - screenshot: внешний вид соответствует примеру [modal-agreement]
    - do: проскроллить вниз
    - screenshot: внешний вид соответствует примеру [modal-agreement-scrolled]
    - do: тапнуть по кнопке "Закрыть"
    - assert: модальное окно закрылось

  Проверка открытия модального окна в ландшафтной ориентации:
    - do: открыть ссылку https://yandex.ru/turbo?stub=footer/with-agreement.json
    - assert: открывается турбо-страница в той же вкладке
    - do: тапнуть по ссылке "Юридическая информация"
    - assert: модальное окно открылось
    - screenshot: внешний вид соответствует примеру [modal-agreement]
    - do: тапнуть по кнопке "Закрыть"
    - assert: модальное окно закрылось

files:
  - platform/components/Footer/__tests__/footer@phone.hermione.js

v-team: Turbo

manager: tanzwuta

qa-engineer: kleev, k0nratka

tlds: none
