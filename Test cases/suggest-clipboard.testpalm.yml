feature: Саджест
type: Буферная подсказка

specs:
  Буферная подсказка с текстом:
    - do: |
        открыть поиск с пустым запросом
        скопировать текст в буфер обмена
        кликнуть в инпут поисковой стрелки
    - assert: в выдаче саджеста присутствует буферная подсказка со скопированным текстом
    - screenshot: буферная подсказка [suggest_clipboard]
    - do: нажать на буферную подсказку
    - assert: получена выдача с поисковым текстом из подсказки
  Буферная подсказка со ссылкой:
    - do: |
        открыть поиск с пустым запросом
        скопировать ссылку в буфер обмена
        кликнуть в инпут поисковой стрелки
    - assert: в выдаче саджеста присутствует буферная подсказка со скопированной ссылкой
    - screenshot: буферная подсказка [suggest_clipboard]
    - do: нажать на буферную подсказку
    - assert: открылась страница по ссылке из подсказки
  Время жизни подсказки:
    - do: |
        открыть поиск с пустым запросом
        скопировать текст в буфер обмена
        кликнуть в инпут поисковой стрелки
    - assert: в выдаче саджеста присутствует буферная подсказка со скопированным текстом
    - do: нажать на кнопку Найти
    - assert: страница перезагрузилась
    - do: кликнуть в поисковый инпут
    - assert: буферная подсказка не появилась
  Клик в крестик:
    - do: |
        открыть поиск с пустым запросом
        скопировать текст в буфер обмена
        кликнуть в инпут поисковой стрелки
    - assert: в выдаче саджеста присутствует буферная подсказка со скопированным текстом
    - do: нажать крестик на подсказке
    - assert: подсказка из буфера обмена пропала
  Клик в стрелку:
    - do: |
        открыть поиск с пустым запросом
        скопировать текст в буфер обмена
        кликнуть в инпут поисковой стрелки
    - assert: в выдаче саджеста присутствует буферная подсказка со скопированным текстом
    - do: нажать стрелку на подсказке
    - assert: скопированный текст добавился в поисковую строку
  Счетчик отрисовки и tpah:
    - do: |
        открыть поиск с пустым запросом
        скопировать текст в буфер обмена
        кликнуть в инпут поисковой стрелки
    - assert: в выдаче саджеста присутствует буферная подсказка со скопированным текстом
    - do: нажать вне саджеста
    - assert: саджест скрылся
    - do:  |
        скопировать другой текст
        кликнуть в инпут поисковой стрелки
    - assert: в выдаче саджеста присутствует буферная подсказка со новым скопированным текстом
    - tech: значение метрики саджестовой метрики "rqs" == 1
    - tech: значение метрики саджестовой метрики "rndr" == 1
    - tech: значение метрики саджестовой метрики "crndr" == 2
    - tech: tpah лог содержит запись clipboard,p1

files:
  - features/touch-phone/suggest/suggest-clipboard.hermione.js

v-team: Suggest


tags:
  - suggest
  - input
  - no_assessors #буферная подсказка появляется только в YaBro, гермиона запускается в chrome-phone

tlds: all

browsers:
  - chrome-phone
