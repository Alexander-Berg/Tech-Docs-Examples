feature: Отправка личных сообщений

specs:

    Пользователь, который есть у Вас в контактах, может создать приватный чат, если в настройках выбран пункт "Все пользователи"[manual]:
        - tags: [advanced_smoke]
        - automation: MSSNGRFRONT-5720
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в веб/в ферме/на втором девайсе
              Между пользователем А и Б нет приватного чата (чат в котором очищалась история сообщений не подходит)
              Пользователь А есть в адресной книге Пользователя Б
              Пользователь Б есть в адресной книге Пользователя А
        - do: Под пользователем А открыть список чатов,
        - assert: Открывается список чатов
        - do: Открыть "Настройки" нажав на значок шестиренку в шапке списка чатов
        - assert: Открывается экран с настройками аккаунта и приложения
        - do: В настройках найти пункт "Кто может писать мне личные сообщения"и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Все пользователи”
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Все пользователи"
        - do: Под пользователем Б Открыть список чатов
        - assert: Открывается список чатов
        - do: Нажать по кнопке "Создать новый чат
        - assert: Открылось окно создания чата
        - do: В списке контактов найти пользователя А и нажать на него
        - assert: Открывается окно чата с пользователем А
        - do: В поле ввода ввести любой текст и нажать кнопку “Отправить”
        - assert: |
              Сообщение отправлено в чат
              У пользователя А в списке чатов появился приватный чат с Пользователем Б

    Пользователь, который есть у Вас в контактах, может создать приватный чат, если в настройках выбран пункт "Только мои контакты"[manual]:
        - tags: [advanced_smoke]
        - automation: MSSNGRFRONT-5720
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в веб/в ферме/на втором девайсе
              Между пользователем А и Б нет приватного чата (чат в котором очищалась история сообщений не подходит)
              Пользователь А есть в адресной книге Пользователя Б
              Пользователь Б есть в адресной книге Пользователя А
        - do: Под пользователем А открыть список чатов,
        - assert: Открывается список чатов
        - do: Открыть "Настройки" нажав на значок шестиренку в шапке списка чатов
        - assert: Открывается экран с настройками аккаунта и приложения
        - do: В настройках найти пункт "Кто может писать мне личные сообщения" и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Контакты"
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Только мои контакты"
        - do: Под пользователем Б Открыть список чатов
        - assert: Открывается список чатов
        - do: Нажать по кнопке "Создать новый чат
        - assert: Открылось окно создания чата
        - do: В списке контактов найти пользователя А и нажать на него
        - assert: Открывается окно чата с пользователем А
        - do: В поле ввода ввести любой текст и нажать кнопку “Отправить”
        - assert: |
              Сообщение отправлено в чат
              У пользователя А в списке чатов появился приватный чат с Пользователем Б

    Пользователь, который есть у Вас в контактах не может создать приватный чат, если в настройках выбран пункт "Никто"[manual]:
        - tags: [advanced_smoke]
        - automation: MSSNGRFRONT-5720
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в веб/в ферме/на втором девайсе
              Между пользователем А и Б нет приватного чата (чат в котором очищалась история сообщений не подходит)
              Пользователь А есть в адресной книге Пользователя Б
              Пользователь Б есть в адресной книге Пользователя А
        - do: Под пользователем А открыть список чатов,
        - assert: Открывается список чатов
        - do: Открыть "Настройки" нажав на значок шестиренку в шапке списка чатов
        - assert: Открывается экран с настройками аккаунта и приложения
        - do: В настройках найти пункт "Кто может писать мне личные сообщения" и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Никто”
        - assert: |
              Меню закрывается
              В блоке "Кто может может писать мне личные сообщения" выбрана настройка "Никто"
        - do: Под пользователем Б Открыть список чатов
        - assert: Открывается список чатов
        - do: Нажать по кнопке "Создать новый чат
        - assert: Открылось окно создания чата
        - do: В списке контактов найти пользователя А и нажать на него
        - assert: Открывается окно чата с пользователем А
        - do: В поле ввода ввести любой текст и нажать кнопку “Отправить”
        - assert: |
              Сообщение не отправляется в чат
              В окне чата появилась ошибка "Пользователь установил ограничение на личные сообщения"
              У пользователя А в списке чатов не появился приватный чат с Пользователем Б
        - do: Попытаться переслать сообщение из любого другого чата
        - assert: |
              Сообщение не отправляется в чат
              В окне чата появилась ошибка "Пользователь установил ограничение на личные сообщения"
              У пользователя А в списке чатов не появился приватный чат с Пользователем Б

    Корректно работает смена настройки конфиденциальности с "Только мои контакты" на "Никто"[manual]:
        - automation: MSSNGRFRONT-5720
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в веб/в ферме/на втором девайсе
              Между пользователем А и Б нет приватного чата (чат в котором очищалась история сообщений не подходит)
              Между пользователем А и С нет приватного чат (чат в котором очищалась история сообщений не подходит)
              Пользователь А есть в адресной книге Пользователя Б
              Пользователь А есть в адресной книге Пользователя С
              Пользователя Б в адресной книге Пользователя А
              Пользователя C нет в адресной книге Пользователя А
        - do: Под пользователем А открыть список чатов,
        - assert: Открывается список чатов
        - do: Открыть "Настройки" нажав на значок шестиренку в шапке списка чатов
        - assert: Открывается экран с настройками аккаунта и приложения
        - do: В настройках найти пункт "Кто может писать мне личные сообщения"и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Только мои контакты"
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Только мои контакты"
        - do: Пользователем Б отправить сообщение Пользователю А
        - assert: |
              Сообщение отправлено в чат
              У пользователя А в списке чатов появился приватный чат с Пользователем Б
        - do: Под пользователем А в блоке “Конфиденциальность” найти пункт “Кто может писать мне личные сообщения" и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Никто”
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Никто"
        - do: Пользователем С отправить сообщение Пользователю А
        - assert: |
              Сообщение не отправляется в чат
              В окне чата появилась ошибка “Пользователь установил ограничение на личные сообщения”
              У пользователя А в списке чатов не появился приватный чат с Пользователем C

    Корректно работает смена настройки конфиденциальности с "Только мои контакты" на "Все пользователи"[manual]:
        - automation: MSSNGRFRONT-5720
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в веб/в ферме/на втором девайсе
              Между пользователем А и Б нет приватного чата (чат в котором очищалась история сообщений не подходит)
              Пользователь А есть в адресной книге Пользователя Б
              Пользователя Б нет в адресной книге Пользователя А
        - do: Под пользователем А открыть список чатов,
        - assert: Открывается список чатов
        - do: Открыть "Настройки" нажав на значок шестиренку в шапке списка чатов
        - assert: Открывается экран с настройками аккаунта и приложения
        - do: В настройках найти пункт "Кто может писать мне личные сообщения" и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Только мои контакты"
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Только мои контакты"
        - do: Пользователем Б отправить сообщение Пользователю А
        - assert: |
              Сообщение не отправляется в чат
              В окне чата появилась ошибка "Пользователь установил ограничение на личные сообщения"
              У пользователя А в списке чатов не появился приватный чат с Пользователем Б
        - do: Под пользователем А в блоке “Конфиденциальность” найти пункт “Кто может писать мне личные сообщения” и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Все пользователи”
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Все пользователи"
        - do: Пользователем Б отправить сообщение Пользователю А
        - assert: |
              Сообщение отправлено в чат
              У пользователя А в списке чатов появился приватный чат с Пользователем Б

    Корректно работает смена настройки конфиденциальности с "Никто" на "Только мои контакты"[manual]:
        - automation: MSSNGRFRONT-5720
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в веб/в ферме/на втором девайсе
              Между пользователем А и Б нет приватного чата (чат в котором очищалась история сообщений не подходит)
              Пользователь А есть в адресной книге Пользователя Б
              Пользователь Б есть в адресной книге Пользователя А
        - do: Под пользователем А открыть список чатов,
        - assert: Открывается список чатов
        - do: Открыть "Настройки" нажав на значок шестиренку в шапке списка чатов
        - assert: Открывается экран с настройками аккаунта и приложения
        - do: В настройках найти пункт "Кто может писать мне личные сообщения" и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Никто"
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Никто"
        - do: Пользователем Б отправить сообщение Пользователю А
        - assert: |
              Сообщение не отправляется в чат
              В окне чата появилась ошибка "Пользователь установил ограничение на личные сообщения"
              У пользователя А в списке чатов не появился приватный чат с Пользователем Б
        - do: Под пользователем А в блоке “Конфиденциальность” найти пункт “Кто может писать мне личные сообщения” и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Только мои контакты”
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Контакты"
        - do: Пользователем Б отправить сообщение Пользователю А
        - assert: |
              Сообщение отправлено в чат
              У пользователя А в списке чатов появился приватный чат с Пользователем Б

    Корректно работает смена настройки конфиденциальности с "Никто" на "Все пользователи"[manual]:
        - automation: MSSNGRFRONT-5720
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в веб/в ферме/на втором девайсе
              Между пользователем А и Б нет приватного чата (чат в котором очищалась история сообщений не подходит)
              Пользователь А есть в адресной книге Пользователя Б
              Пользователь Б есть в адресной книге Пользователя А
        - do: Под пользователем А открыть список чатов,
        - assert: Открывается список чатов
        - do: Открыть "Настройки" нажав на значок шестиренку в шапке списка чатов
        - assert: Открывается экран с настройками аккаунта и приложения
        - do: В настройках найти пункт "Кто может писать мне личные сообщения" и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Никто"
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Никто"
        - do: Пользователем Б отправить сообщение Пользователю А
        - assert: |
              Сообщение не отправляется в чат
              В окне чата появилась ошибка "Пользователь установил ограничение на личные сообщения"
              У пользователя А в списке чатов не появился приватный чат с Пользователем Б
        - do: Под пользователем А в блоке “Конфиденциальность” найти пункт “Кто может писать мне личные сообщения” и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Все пользователи”
        - assert: |
              Меню закрывается
              В блоке "Писать в приватные чаты" выбрана настройка "Все пользователи"
        - do: Пользователем Б отправить сообщение Пользователю А
        - assert: |
              Сообщение отправлено в чат
              У пользователя А в списке чатов появился приватный чат с Пользователем Б

    Не сбрасываются настройки конфиденциальности после обновления страницы браузера[manual]:
        - automation: MSSNGRFRONT-5720
        - description: |
              Авторизованы пользователем с привязанным номером телефоном
              В настойках конфиденциальности в блоке "Кто может писать мне личные сообщения” выбран пункт "Все пользователи"
        - do: Под пользователем А открыть список чатов,
        - assert: Открывается список чатов
        - do: Открыть "Настройки" нажав на значок шестиренку в шапке списка чатов
        - assert: Открывается экран с настройками аккаунта и приложения
        - do: В настройках найти пункт "Кто может писать мне личные сообщения" и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Никто"
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Никто"
        - do: Обновить страницу браузера и проверить выставленную насройку конфиденциальности в блоке "Кто может писать мне личные сообщения"
        - assert: Выбран пункт "Никто"
        - do: В настройках найти пункт "Кто может писать мне личные сообщения" и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Только мои контакты”
        - assert: |
              Меню закрывается
              В блоке "Кто может может писать мне личные сообщения" выбрана настройка "Только ммои контакты"
        - do: Обновить страницу браузера и проверить выставленную насройку конфиденциальности в блоке "Кто может писать мне личные сообщения"
        - assert: Выбран пункт "Только мои контакты"
        - do: В настройках найти пункт "Кто может писать мне личные сообщения" и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Все пользователи”
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Все пользователи"
        - do: Обновить страницу браузера и проверить выставленную насройку конфиденциальности в блоке "Кто может писать мне личные сообщения"
        - assert: Выбран пункт "Все пользователи"

    Не сбрасываются настройки конфиденциальности после перелогина[manual]:
        - automation: MSSNGRFRONT-5720
        - description: |
              Авторизованы пользователем с привязанным номером телефоном
              В настойках конфиденциальности в блоке "Кто может писать мне личные сообщения” выбран пункт "Все пользователи"
        - do: Под пользователем А открыть список чатов,
        - assert: Открывается список чатов
        - do: Открыть "Настройки" нажав на значок шестиренку в шапке списка чатов
        - assert: Открывается экран с настройками аккаунта и приложения
        - do: В настройках найти пункт "Кто может писать мне личные сообщения" и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Никто"
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Никто"
        - do: Вылогиниться из аккаунта
        - assert: Не авторизованны в мессенджере
        - do: Авторизоваться тем же аккаунтом и проверить выставленную насройку конфиденциальности в блоке "Кто может писать мне личные сообщения"
        - assert: Выбран пункт "Никто"
        - do: В настройках найти пункт "Кто может писать мне личные сообщения" и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Только мои контакты”
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Только ммои контакты"
        - do: Вылогиниться из аккаунта
        - assert: Не авторизованны в мессенджере
        - do: Авторизоваться тем же аккаунтом и проверить выставленную насройку конфиденциальности в блоке "Кто может писать мне личные сообщения"
        - assert: Выбран пункт "Только мои контакты"
        - do: В настройках найти пункт "Кто может писать мне личные сообщения" и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Все пользователи”
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Все пользователи"
        - do: Вылогиниться из аккаунта
        - assert: Не авторизованны в мессенджере
        - do: Авторизоваться тем же аккаунтом и проверить выставленную асройку конфиденциальности в блоке "Кто может писать мне личные сообщения"
        - assert: Выбран пункт "Все пользователи"

    Корректно работает отправка сообщений в существующие приватные чаты, если в настройках выбран пункт "Только мои контакты"[manual]:
        - automation: MSSNGRFRONT-5720
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в веб/в ферме/на втором девайсе.
              Между пользователем А и Б есть приватный чат
              У пользователя А в настройках конфиденциальности в блоке "Кто может писать мне личные сообщения” выбран пункт "Только мои контакты"
        - do: Под пользователем А открыть список чатов, если открыта другая вкладка
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: В поле ввода ввести любой текст и нажать кнопку “Отправить”
        - assert: Сообщение отправлено в чат
        - do: Под пользователем Б открыть список чатов, если открыта другая вкладка
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: |
              Открывается чат из description
              В окне чата есть сообщение от пользователя А
        - do: В поле ввода ввести любой текст и нажать кнопку “Отправить”
        - assert: Сообщение отправлено в чат
        - do: Под пользователем А проверить получение нового сообщения от пользователя Б
        - assert: Сообщение было получено и корректно отображается

    Корректно работает отправка сообщений в существующие приватные чаты, если в настройках выбран пункт "Никто"[manual]:
        - automation: MSSNGRFRONT-5720
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в веб/в ферме/на втором девайсе.
              Между пользователем А и Б есть приватный чат
              У пользователя А в настройках конфиденциальности в блоке "Кто может писать мне личные сообщения” выбран пункт "НИкто"
        - do: Под пользователем А открыть список чатов, если открыта другая вкладка
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: В поле ввода ввести любой текст и нажать кнопку “Отправить”
        - assert: Сообщение отправлено в чат
        - do: Под пользователем Б открыть список чатов, если открыта другая вкладка
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: |
              Открывается чат из description
              В окне чата есть сообщение от пользователя А
        - do: В поле ввода ввести любой текст и нажать кнопку “Отправить”
        - assert: Сообщение отправлено в чат
        - do: Под пользователем А проверить получение нового сообщения от пользователя Б
        - assert: Сообщение было получено и корректно отображается

    Корректно работает отправка сообщений в существующие приватные чаты, если в настройках выбран пункт "Все пользователи"[manual]:
        - automation: MSSNGRFRONT-5720
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в веб/в ферме/на втором девайсе.
              Между пользователем А и Б есть приватный чат
              У пользователя А в настройках конфиденциальности в блоке "Кто может писать мне личные сообщения” выбран пункт "Все пользователи"
        - do: Под пользователем А открыть список чатов, если открыта другая вкладка
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: В поле ввода ввести любой текст и нажать кнопку “Отправить”
        - assert: Сообщение отправлено в чат
        - do: Под пользователем Б открыть список чатов, если открыта другая вкладка
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: |
              Открывается чат из description
              В окне чата есть сообщение от пользователя А
        - do: В поле ввода ввести любой текст и нажать кнопку “Отправить”
        - assert: Сообщение отправлено в чат
        - do: Под пользователем А проверить получение нового сообщения от пользователя Б
        - assert: Сообщение было получено и корректно отображается

    Пользователь, которого нет у Вас в контактах не может создать приватный чат, если в настройках выбран пункт "Никто"[manual]:
        - automation: MSSNGRFRONT-5720
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в веб/в ферме/на втором девайсе
              Между пользователем А и Б нет приватного чата (чат в котором очищалась история сообщений не подходит)
              Пользователь А есть в адресной книге Пользователя Б
              Пользователья Б нет в адресной книге Пользователя А
        - do: Под пользователем А открыть список чатов,
        - assert: Открывается список чатов
        - do: Открыть "Настройки" нажав на значок шестиренку в шапке списка чатов
        - assert: Открывается экран с настройками аккаунта и приложения
        - do: В настройках найти пункт "Кто может писать мне личные сообщения" и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Никто”
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Никто"
        - do: Под пользователем Б Открыть список чатов
        - assert: Открывается список чатов
        - do: Нажать по кнопке "Создать новый чат
        - assert: Открылось окно создания чата
        - do: В списке контактов найти пользователя А и нажать на него
        - assert: Открывается окно чата с пользователем А
        - do: В поле ввода ввести любой текст и нажать кнопку “Отправить”
        - assert: |
              Сообщение не отправляется в чат
              В окне чата появилась ошибка "Пользователь установил ограничение на личные сообщения"
              У пользователя А в списке чатов не появился приватный чат с Пользователем Б
        - do: Попытаться переслать сообщение из любого другого чата
        - assert: |
              Сообщение не отправляется в чат
              В окне чата появилась ошибка "Пользователь установил ограничение на личные сообщения"
              У пользователя А в списке чатов не появился приватный чат с Пользователем Б

    Пользователь, которого нет у Вас в контактах не может создать приватный чат, если в настройках выбран пункт "Только мои контакты"[manual]:
        - tags: [advanced_smoke]
        - automation: MSSNGRFRONT-5720
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в веб/в ферме/на втором девайсе
              Между пользователем А и Б нет приватного чата (чат в котором очищалась история сообщений не подходит)
              Пользователь А есть в адресной книге Пользователя Б
              Пользователья Б нет в адресной книге Пользователя А
        - do: Под пользователем А открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть "Настройки" нажав на значок шестиренку в шапке списка чатов
        - assert: Открывается экран с настройками аккаунта и приложения
        - do: В настройках найти пункт "Ктоможет писать мне личные сообщения" и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Только мои контакты”
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Только мои контакты"
        - do: Под пользователем Б Открыть список чатов
        - assert: Открывается список чатов
        - do: Нажать по кнопке "Создать новый чат
        - assert: Открылось окно создания чата
        - do: В списке контактов найти пользователя А и нажать на него
        - assert: Открывается окно чата с пользователем А
        - do: В поле ввода ввести любой текст и нажать кнопку “Отправить”
        - assert: |
              Сообщение не отправляется в чат
              В окне чата появилась ошибка "Пользователь установил ограничение на личные сообщения"
              У пользователя А в списке чатов не появился приватный чат с Пользователем Б
        - do: Попытаться переслать сообщение из любого другого чата
        - assert: |
              Сообщение не отправляется в чат
              В окне чата появилась ошибка "Пользователь установил ограничение на личные сообщения"
              У пользователя А в списке чатов не появился приватный чат с Пользователем Б

    Пользователь, которого нет у Вас в контактах, может создать приватный чат, если в настройках выбран пункт "Все пользователи"[manual]:
        - automation: MSSNGRFRONT-5720
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в веб/в ферме/на втором девайсе
              Между пользователем А и Б нет приватного чата (чат в котором очищалась история сообщений не подходит)
              Пользователь А есть в адресной книге Пользователя Б
              Пользователья Б нет в адресной книге Пользователя А
        - do: Под пользователем А открыть список чатов,
        - assert: Открывается список чатов
        - do: Открыть "Настройки" нажав на значок шестиренку в шапке списка чатов
        - assert: Открывается экран с настройками аккаунта и приложения
        - do: В настройках найти пункт "Кто может писать мне личные сообщения" и нажать на него
        - assert: Появляется меню с пунктами "Все пользователи", "Только мои контакты", "Никто"
        - do: Выбрать “Все пользователи”
        - assert: |
              Меню закрывается
              В блоке "Кто может писать мне личные сообщения" выбрана настройка "Все пользователи"
        - do: Под пользователем Б Открыть список чатов
        - assert: Открывается список чатов
        - do: Нажать по кнопке "Создать новый чат
        - assert: Открылось окно создания чата
        - do: В списке контактов найти пользователя А и нажать на него
        - assert: Открывается окно чата с пользователем А
        - do: В поле ввода ввести любой текст и нажать кнопку “Отправить”
        - assert: |
              Сообщение отправлено в чат
              У пользователя А в списке чатов появился приватный чат с Пользователем Б

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
    - chamb
