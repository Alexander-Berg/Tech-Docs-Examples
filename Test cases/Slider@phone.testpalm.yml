feature: Slider

specs:
  Проверка автоперелистывания слайдов:
    - do: открыть страницу https://yandex.ru/turbo?stub=slider/ecom-banner.json
    - assert: слайды автоматически перелистываются каждую секунду

  Остановка автоперелистывания при взаимодействии:
    - do: открыть страницу https://yandex.ru/turbo?stub=slider/ecom-banner.json
    - do: вручную перелистнуть слайд
    - assert: слайды перестали перелистываться автоматически

  С одним слайдом не должно быть свайпа:
    - params:
        foreverdata: '2102446400'
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета (название заголовка Тестовая страница для слайдера — турбо)
    - assert: |
        открывается турбо-страница в той же вкладке
        на странице должен быть слайдер
    - screenshot: внешний вид [plain]
    - assert: |
        на слайдере нет номера активного слайда,
        на слайдере нет точек, показывающих на каком слайде мы находимся
    - do: свайп справа налево по картинке в слайдере
    - assert: |
        ничего не должно произойти, картинка должна остаться на месте
    - do: свайп слева направо по картинке в слайдере
    - assert: |
        ничего не должно произойти, картинка должна остаться на месте

  Внешний вид для банеров в ecom:
    - do: открыть страницу https://yandex.ru/turbo?stub=slider/for-banner.json
    - assert: на странице есть 3 слайдера
    - assert: текст на первом слайдере появился без анимации - на втором - с анимацией
    - screenshot: внешний вид [plain]

  Проверка работы слайдера:
    - params:
        foreverdata: '2310953522'
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета (название заголовка Тестовая новостная станица — турбо)
    - do: доскроллить сраницу до слайдера
    - assert: |
        номер активного слайда установлен в 1,
        первая точка в навигации слайдера активна (ярче остальных)
    - tech: картинка в видеотумбе третьего слайда не загружена
    - tech: картинка в четвертом слайде не загружена
    - do: свайп справа налево по картинке в слайдере
    - tech: должен сработать счетчик переключения на следующий слайд (/turbo/slide/next)
    - assert: |
        должен стать видимым второй слайд,
        номер активного слайда дожен поменяться на 2,
        вторая точка в навигации слайдера должна быть активна, остальные точки должны быть неактивны
    - tech: картинка в видеотумбе третьего слайда загружена
    - tech: картинка в четвертом слайде загружена
    - do: свайп справа налево по картинке в слайдере
    - assert: |
        должен стать видимым третий слайд,
        номер активного слайда дожен поменяться на 3,
        третья точка в навигации слайдера должна быть активна, остальные точки должны быть неактивны,
        отображается картинка в третьем слайде
    - do: свайп слева направо по картинке в слайдере
    - tech: должен сработать счетчик переключения на предыдущий слайд (/turbo/slide/prev)
    - assert: |
        должен стать видимым второй слайд,
        номер активного слайда дожен поменяться на 2,
        вторая точка в навигации слайдера должна быть активна, остальные точки должны быть неактивны
    - do: свайп снизу вверх по слайдеру
    - assert: |
        видимый слайд не должен поменяться,
        номер активного слайда не должен поменяться,
        вторая точка в навигации слайдера должна быть активна, остальные точки должны быть неактивны

  Проверка внешнего вида слайдера с рекламой (стаб):
    - params:
        foreverdata: '2310953522'
    - tags: no_assessors
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета (название заголовка Тестовая новостная станица — турбо)
    - assert: |
        открывается турбо-страница в той же вкладке
        на странице должен быть слайдер c застабленой рекламой
    - screenshot: внешний вид [plain]

  Проверка внешнего вида слайдера с рекламой (без стаба):
    - params:
        foreverdata: '2310953522'
    - tags: no_assessors
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета (название заголовка Тестовая новостная станица — турбо)
    - assert: |
        открывается турбо-страница в той же вкладке
        на странице должен быть слайдер
    - assert: |
        номер активного слайда установлен в 1
    - do: свайп справа налево по картинке в слайдере
    - assert: |
        должен стать видимым второй слайд
    - do: свайп справа налево по картинке в слайдере
    - assert: |
        должен стать видимым третий слайд,
        номер активного слайда дожен поменяться на 3
    - do: свайп справа налево по картинке в слайдере
    - assert: |
        должен стать видимым четвертый слайд,
        номер активного слайда дожен поменяться на 4
    - do: свайп слева направо по картинке в слайдере
    - assert: |
        должен стать видимым третий слайд,
        номер активного слайда дожен поменяться на 3
    - do: свайп слева направо по картинке в слайдере
    - assert: |
        должен стать видимым второй слайд,
        номер активного слайда дожен поменяться на 2

  Проверка загрузки слайдера со сложным содержимым:
    - params:
        exp_flags:
          - slider-in-react=1
    - do: открыть страницу https://yandex.ru/turbo?stub=slider/with-complicated-content.json
    - assert: |
        Страница загрузилась без ошибок
        На странице есть слайдер

  Проверка работы слайдера с блоком video-thumb на Реакте:
    - params:
        exp_flags:
          - force-react-video-thumb=1
    - do: открыть страницу https://yandex.ru/turbo?text=test_news
    - do: доскроллить сраницу до слайдера
    - assert: |
        номер активного слайда установлен в 1,
        первая точка в навигации слайдера активна (ярче остальных)
    - tech: картинка в видеотумбе третьего слайда не загружена
    - tech: картинка в четвертом слайде не загружена
    - do: свайп справа налево по картинке в слайдере
    - tech: должен сработать счетчик переключения на следующий слайд (/turbo/slide/next)
    - assert: |
        должен стать видимым второй слайд,
        номер активного слайда дожен поменяться на 2,
        вторая точка в навигации слайдера должна быть активна, остальные точки должны быть неактивны
    - tech: картинка в видеотумбе третьего слайда загружена
    - tech: картинка в четвертом слайде загружена
    - do: свайп справа налево по картинке в слайдере
    - assert: |
        должен стать видимым третий слайд,
        номер активного слайда дожен поменяться на 3,
        третья точка в навигации слайдера должна быть активна, остальные точки должны быть неактивны,
        отображается картинка в третьем слайде
    - do: свайп слева направо по картинке в слайдере
    - tech: должен сработать счетчик переключения на предыдущий слайд (/turbo/slide/prev)
    - assert: |
        должен стать видимым второй слайд,
        номер активного слайда дожен поменяться на 2,
        вторая точка в навигации слайдера должна быть активна, остальные точки должны быть неактивны
    - do: свайп снизу вверх по слайдеру
    - assert: |
        видимый слайд не должен поменяться,
        номер активного слайда не должен поменяться,
        вторая точка в навигации слайдера должна быть активна, остальные точки должны быть неактивны

  Проверка внешнего вида слайдера:
    slider/with-video:
      - do: открыть страницу https://yandex.ru/turbo?stub=slider/with-video.json
      - assert: на странице есть слайдер
      - screenshot: внешний вид [plain]

    slider/with-video-drop-label:
      - do: открыть страницу https://yandex.ru/turbo?stub=slider/with-video-drop-label.json
      - assert: на странице есть слайдер
      - screenshot: внешний вид [plain]

    slider/with-full-promo:
      - do: открыть страницу https://yandex.ru/turbo?stub=slider/with-full-promo.json
      - assert: на странице есть слайдер
      - screenshot: внешний вид [plain]

    slider/with-title-promo:
      - do: открыть страницу https://yandex.ru/turbo?stub=slider/with-title-promo.json
      - assert: на странице есть слайдер
      - screenshot: внешний вид [plain]

    slider/indented:
      - do: открыть страницу https://yandex.ru/turbo?stub=slider/indented.json
      - assert: на странице есть слайдер
      - screenshot: внешний вид [plain]

    slider/theme-white:
      - do: открыть страницу https://yandex.ru/turbo?stub=slider/theme-white.json
      - assert: на странице есть слайдер
      - screenshot: внешний вид [plain]

        # !!!
    slider/square-cover:
      - do: открыть страницу https://yandex.ru/turbo?stub=slider/square-cover.json
      - assert: на странице есть слайдер
      - screenshot: внешний вид [portrait]
      - do: сменить ориентацию телефона на горизонтальную
      - screenshot: внешний вид [landscape]

    slider/square-contain:
      - do: открыть страницу https://yandex.ru/turbo?stub=slider/square-contain.json
      - assert: на странице есть слайдер
      - screenshot: внешний вид [portrait]
      - do: сменить ориентацию телефона на горизонтальную
      - screenshot: внешний вид [landscape]

    slider/portrait-cover:
      - do: открыть страницу https://yandex.ru/turbo?stub=slider/portrait-cover.json
      - assert: на странице есть слайдер
      - screenshot: внешний вид [portrait]
      - do: сменить ориентацию телефона на горизонтальную
      - screenshot: внешний вид [landscape]

    slider/portrait-contain:
      - do: открыть страницу https://yandex.ru/turbo?stub=slider/portrait-contain.json
      - assert: на странице есть слайдер
      - screenshot: внешний вид [portrait]
      - do: сменить ориентацию телефона на горизонтальную
      - screenshot: внешний вид [landscape]

    slider/landscape-cover:
      - do: открыть страницу https://yandex.ru/turbo?stub=slider/landscape-cover.json
      - assert: на странице есть слайдер
      - screenshot: внешний вид [portrait]
      - do: сменить ориентацию телефона на горизонтальную
      - screenshot: внешний вид [landscape]

    slider/landscape-contain:
      - do: открыть страницу https://yandex.ru/turbo?stub=slider/landscape-contain.json
      - assert: на странице есть слайдер
      - screenshot: внешний вид [portrait]
      - do: сменить ориентацию телефона на горизонтальную
      - screenshot: внешний вид [landscape]

files:
  - platform/components/Slider/Slider.tests/Slider@phone.hermione.js

v-team: Turbo

manager: tanzwuta

tlds: none
