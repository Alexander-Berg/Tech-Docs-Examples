feature: Модерация

specs:

    Сообщение 18+ в публичных чатах скрывается для собеседников[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: |
              В качестве недопустимого контента можно использовать слово “херня”
              Авторизованным пользователем присоединиться к чату https://yandex.ru/chat/#/join/7d18cd3a-0cb7-40d9-913e-feb3a0b65584 в истории которого есть текстовые сообщения категории 18+ (если таких сообщений нет - отправить в этот чат любым собеседником такое сообщение)
        - do: Запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Посмотреть в окно чата на сообщение с неподобающим содержанием от другого пользователя
        - assert: Сообщение с шокирующим контентом скрыто балуном с надписью "Сообщение скрыто"

#  Сейчас временно отключили модерацию
#     Сообщение удаляется в публичном канале, если модерация удалила данное сообщение[manual]:
#         - automation:
#         - description: |
#               В качестве недопустимого контента можно использовать фразу “купить героин в Москве”
#               У авторизованного пользователя в списке чатов есть публичный канал , где он админ, в котором есть другие участники
#         - do: Запустить тестовое приложение
#         - assert: Открывается список чатов
#         - do: Открыть любой канал, который соответствует описанию указанному в description
#         - assert: Канал открыт
#         - do: Отправить в канал сообщение с неподобающим содержанием из description
#         - assert: |
#               Сообщение отправлено
#               Сообщение было удалено и вместо сообщение отображается техническая запись "Сообщение удалено модератором в связи с нарушением правил сообщества" (модерация работает в течении 5 минут)
#         - do: Авторизоваться другим участником канала и открыть канал из description
#         - assert: |
#               Канал открыт
#               В окне Канала техническая запись "Сообщение удалено модератором в связи с нарушением правил сообщества"

    Скрытое сообщение 18+ можно отобразить вызвав пермишен нажав по такому сообщению[manual]:
        - automation:
        - description: |
              В качестве недопустимого контента можно использовать слово “Хуй”
              Авторизованным  пользователем нужно присоединиться к чату https://yandex.ru/chat/#/join/7d18cd3a-0cb7-40d9-913e-feb3a0b65584 в истории которого есть сообщение от другого пользователя с недопустимым контентом из description
        - do: Запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Посмотреть в окно чата на сообщение с неподобающим содержанием от другого пользователя
        - assert: Сообщение с шокирующим контентом скрыто
        - do: Нажать на "Сообщение скрыто"
        - assert: |
              Появляется попап с текстом "Это сообщение отмечено как неприемлемое. Хотите его открыть?"
              В попапе есть кнопки "Отмена" и "Открыть"
        - do: Нажать "Отмена"
        - assert: |
              Попап закрылся
              В окне чата сообщение осталось скрытым
        - do: Нажать на "Сообщение скрыто"
        - assert: |
              Появляется попап с текстом "Это сообщение отмечено как неприемлемое. Хотите его открыть?"
              В попапе есть кнопки "Отмена" и "Открыть"
        - do:  Нажать "Открыть"
        - assert: |
              Попап закрылся
              Текст сообщения с шокирующим контентом отображается в окне чата
        - do: Отправить в чат сообщение с неподобающим содержанием, например, "Хуй"
        - assert: |
              Сообщение отправлено
              Сообщение с шокирующим контентом скрыто балуном с надписью "Сообщение скрыто"
        - do: Нажать на "Сообщение скрыто"
        - assert: |
              Появляется попап с текстом "Это сообщение отмечено как неприемлемое. Хотите его открыть?"
              В попапе есть кнопки "Отмена" и "Открыть"
        - do: Нажать "Отмена"
        - assert: |
              Попап закрылся
              В окне чата сообщение осталось скрытым
        - do: Нажать на "Сообщение скрыто"
        - assert: |
              Появляется попап с текстом "Это сообщение отмечено как неприемлемое. Хотите его открыть?"
              В попапе есть кнопки "Отмена" и "Открыть"
        - do:  Нажать "Открыть"
        - assert: |
              Попап закрылся
              Текст сообщения с шокирующим контентом отображается в окне чата

    Reply тоже проходит модерацию в публичных чатах[manual]:
        - automation:
        - description: |
              В качестве недопустимого контента можно использовать слово “херня” (в этом случае сообщение скроется модератором)
              В качестве недопустимого контекнта можно использовать фразу “купить героин в Москве” (в этом случае сообщение удаляется модератором)
              Авторизованным  пользователем нужно присоединиться к чату https://yandex.ru/chat/#/join/7d18cd3a-0cb7-40d9-913e-feb3a0b65584  чтобы проверить работу модерации
        - do: Запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Отправить в чат сообщение с неподобающим содержанием из **Description под пунктом 1**
        - assert: |
              Сообщение отправлено
              Сообщение с шокирующим контентом скрыто балуном с надписью "Сообщение скрыто"
        - do: Нажать на "Сообщение скрыто"
        - assert: |
              Появляется попап с текстом "Это сообщение отмечено как неприемлемое. Хотите его открыть?"
              В попапе есть кнопки "Отмена" и "Открыть"
        - do:  Нажать "Открыть"
        - assert: |
              Попап закрылся
              Текст сообщения с шокирующим контентом отображается в окне чата
        - do: Вызваать контекстное меню для сообщения, которое ранее раскрыли
        - assert: Появляется контекстное меню для этого сообщения
        - do: Выбрать "Ответить"
        - assert: Над полем ввода показывается reply на сообщение
        - do: Ввести в поле ввода любой текст и нажать кнопку "Отправить" 
        - assert: |
              Reply отправлен
              Reply был скрыть и вместо него отображается "Сообщение скрыто"
        - do: Отправить в чат обычное сообщение
        - assert: Сообщение отправлено
        - do: Вызвать контекстное меню для только что отправленного сообщения
        - assert: Появляется контекстное меню для этого сообщения
        - do: Выбрать "Ответить"
        - assert: Над полем ввода показывается reply на сообщение
        - do: Ввести в поле ввода сообщение с неподобающим содержанием из **Description под пунктом 1** и нажать кнопку "Отправить"
        - assert: |
              Reply отправлен
              Reply был скрыть и вместо него отображается "Сообщение скрыто"
        - do: Отправить в чат обычное сообщение
        - assert: Сообщение отправлено
        - do: Вызвать контекстное меню для только что отправленного сообщения
        - assert: Появляется контекстное меню для этого сообщения
        - do: Выбрать "Ответить"
        - assert: Над полем ввода показывается reply на сообщение
        - do: Ввести в поле ввода сообщение с неподобающим содержанием из **Description под пунктом 2** и нажать кнопку "Отправить"
        - assert: |
              Reply отправлен
              Reply удален и вместо сообщение отображается техническая запись "Сообщение удалено модератором в связи с нарушением правил сообщества" (модерация работает в течении 5 минут)

    Forward тоже проходит модерацию в публичных чатах[manual]:
        - automation:
        - description: |
              В качестве недопустимого контента можно использовать слово “херня” (в этом случае сообщение скроется модератором)
              В качестве недопустимого контекнта можно использовать фразу “купить героин в Москве” (в этом случае сообщение удаляется модератором)
              У авторизованного пользователя в списке чатов есть **публичный чат А** (https://yandex.ru/chat/#/join/7d18cd3a-0cb7-40d9-913e-feb3a0b65584) и **групповой не публичный чат Б** (в карточке такого чата отключена публичная ссылка)
        - do: Запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Открыть групповой чат Б
        - assert: Чат открыт
        - do: Отправить в чат сообщение с неподобающим содержанием из **Description под пунктом 1**
        - assert: Сообщение отправлено
        - do: Вызвать контекстное меню для только что отправленного сообщения
        - assert: Появляется контекстное меню для этого сообщения
        - do: Выбрать "Переслать"
        - assert: Появляется список чатов для пересылки сообщения
        - do: В списке чатов выбрать групповой чат А и нажать кнопку "Отправить"
        - assert: |
              Forward отправляется в групповой чат А
              Forward был скрыть и вместо него отображается "Сообщение скрыто"
        - do: Вернуться в групповой чат Б
        - assert: Групповой чат Б открыт
        - do: Ввести в поле ввода сообщение с неподобающим содержанием из **Description под пунктом 2** и нажать кнопку "Отправить"
        - assert: Сообщение отправлено и отображается в окне чата
        - do: Вызвать контекстное меню для только что отправленного сообщения
        - assert: Появляется контекстное меню для этого сообщения
        - do: Выбрать "Переслать"
        - assert: Появляется список чатов для пересылки сообщения
        - do: В списке чатов выбрать групповой чат А и нажать кнопку "Отправить"
        - assert: |
              Forward отправляется в групповой чат А
              Forward удален и вместо сообщение отображается техническая запись "Сообщение удалено модератором в связи с нарушением правил сообщества" (модерация работает в течении 5 минут)

    Изображения 18+ скрываются модерацией в публичных чатах[manual]:
        - automation:
        - description: |
              Авторизованным  пользователем нужно присоединиться к чату https://yandex.ru/chat/#/join/7d18cd3a-0cb7-40d9-913e-feb3a0b65584  чтобы проверить работу модерации
              У Вас есть изображение с недопустимым контентом
        - do: Запустить тестовое приложение
        - assert: Открывается список чатов
        - do: Открыть групповой чат из description
        - assert: Чат открыт
        - do: Отправить в чат изображение с недопустимым контентом
        - assert: |
              Изображение отправлено
              Сообщение скрыто модерацией,  появилось техническое сообщение "Сообщение удалено модератором в связи с нарушением правил сообщества"

#     Название канала проходит модерацию[manual]:
#         - automation:
#         - description: |
#               В качестве недопустимого контекнта можно использовать слово “Сука”
#               У авторизованного пользователя есть канал , в котором он является **администратором**
#         - do: Запустить тестовое приложение
#         - assert: Открывается список чатов
#         - do: Открыть любой канал, который соответствует описанию указанному в descriptio
#         - assert: Канал открыт
#         - do: Открыть экран "Информация о канале" нажатием по шапке канала
#         - assert: Экран открыт
#         - do: Нажать на "Настройки канала"
#         - assert: Открыт экран настроек канала
#         - do: Изменить название канала на слово из **Description** и сохранить изменения
#         - assert: |
#               Открыта карточка канала
#               Название чата изменено
#         - do: Дождаться прохождения модерации названия канала;
#         - assert: Название чата было изменено на "Чат"

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team

