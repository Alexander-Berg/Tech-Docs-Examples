feature: Колдунщик 1орг
type: Гистограмма посещаемости

specs-integration:
  Проверка в гистограммы в сайдблоке:
    - do: получить выдачу по запросу 'ТРЦ Европолис Спб' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: присутствует колдунщик одной организации
    - assert: отсутствует гистограмма посещаемости
    - do: кликнуть в таб 'Главное'
    - assert: открылся сайдблок
    - assert: присутствует гистограмма загружености
    - assertMetrics: '*'

specs:
  Основные проверки:
    - do: получить выдачу по запросу "кафе пушкин"
    - assert: на странице есть карточка организации
    - do: кликнуть в таб 'Главное'
    - assert: открылся оверелей c расширенной карточкой организации
    - assert: в расширенной карточке есть гистограмма посещаемости и она подскролена к текущему дню
    - screenshot: внешний вид [https://jing.yandex-team.ru/files/pdzianisevich/Pushkinj_%E2%80%94_YAndeks.Brauzer_2020-07-30_20.41.53.png]
    - do: поскроллить гистограмму
    - tech: сработал счётчик /$subresult/overlay-wrapper/content/tabs/controls/tabs/about/side-block-bcard/composite/visits-histogram/scroller
  Подскролл к теущему дню:
    - tags: [overlay, showcase, scroll]
    - do: получить выдачу по запросу 'ТРЦ Европолис Спб'
    - assert: присутствует колдунщик одной организации
    - do: кликнуть в таб 'Главное'
    - assert: открылся сайдблок
    - assert: присутствует гистограмма посещаемости
    - assert: гистограмма подскроллена к текущему дню
    - do: кликнуть в кнопку "назад" в сайдблоке
    - assert: сайдблок закрылся
    - do: кликнуть в таб 'Главное'
    - assert: открылся сайдблок
    - assert: присутствует гистограмма посещаемости
    - assert: гистограмма подскроллена к текущему дню

counter: /$page//$result//tabs/about//visits-histogram

tags:
  - react

tlds: all

v-team: VanillaGeo

files:
    - src/features/Companies/Companies.features/VisitsHistogram/VisitsHistogram.test/VisitsHistogram@touch-phone.hermione.js
    - src/features/Companies/Companies.features/VisitsHistogram/VisitsHistogram.test/VisitsHistogram@touch-phone.hermione.e2e.js

priority: high
