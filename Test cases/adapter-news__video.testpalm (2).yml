feature: Колдунщик новостей

specs:
  Список видео:
    - params:
        foreverdata: '3234179438'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на странице есть новостной колдунщик
    - screenshot: пример внешнего вида блока видео-новостей [newsListRight]
  Одно видео:
    - params:
        foreverdata: '1496855385'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на странице есть новостной колдунщик
    - screenshot: пример внешнего вида блока видео-новостей [newsListRight]
  Два видео:
    - params:
        foreverdata: '258992108'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на странице есть новостной колдунщик
    - screenshot: пример внешнего вида блока видео-новостей [newsListRight]
  Ссылка и счётчик:
    Список видео:
      params:
        foreverdata: '3234179438'
      beforeEach:
        - do: получить выдачу по запросу 'foreverdata'
      Тумба:
        - do: кликнуть в тумбу видео в карусели новостного видеохостинга
        - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news"]/video-block/showcase/item/thumb'
        - assert: в новой вкладке открылся фрейм с видео (само видео может отсутствовать, это не является ошибкой, так как данные тестовые, проверяется открытие фрейма)
      Хост:
        - do: кликнуть в гринурл видео в карусели новостного видеохостинга
        - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news"]/video-block/showcase/item/host'
        - assert: в новой вкладке открылся сервис Яндекс.Эфир (само видео может отсутствовать, это не является ошибкой, так как данные тестовые, проверяется переход на сервис Яндекс.Эфир)
      Навигация:
        - do: кликнуть на стрелку "вправо" в карусели новостного видеохостинга
        - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news"]/video-block/showcase/scroll_right'
        - do: кликнуть на стрелку "влево" в карусели новостного видеохостинга
        - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news"]/video-block/showcase/scroll_left'
  Видео в рубричном колдунщике:
    Ссылка и счётчик:
      Список видео:
        params:
          foreverdata: '1209745582'
        beforeEach:
          - do: получить выдачу по запросу 'foreverdata'
        Навигация:
          - do: кликнуть на стрелку "вправо" в карусели новостного видеохостинга
          - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news"]/video-block/showcase/scroll_right'
          - do: кликнуть на стрелку "влево" в карусели новостного видеохостинга
          - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news"]/video-block/showcase/scroll_left'
          - assertMetrics: '-'
        Хост:
          - do: кликнуть в гринурл видео новостного видеохостинга
          - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news" @subtype="rubric"]/video-block/host'
          - assert: в новой вкладке открылось видео выбранной новости
          - assertMetrics: '-'
        Тумба:
          - do: кликнуть в тумбу видео в карусели новостного видеохостинга
          - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news" @subtype="rubric"]/video-block/thumb'
          - assert: в новой вкладке открылось видео выбранной новости
          - assertMetrics: '-'

specs-integration:
  Проверка функционала блока видео:
    - counter: /$page/$main/$result[@wizard_name="news"]/video-block/showcase/item/thumb
    - do: получить выдачу по запросу "новости песков" _ALTERNATIVE_SEARCH_QUERIES_
    - assert: на выдаче присутствует новостной колдунщик с видео
    - assert: в колдунщике есть тумба с видео
    - assert: у видео есть название
    - assert: у видео есть время публикации
    - counter: /$page/$main/$result[@wizard_name="news"]/video-block/showcase/item/thumb

files:
  - features/desktop/news/__video/adapter-news__video.hermione.js
  - features/news/__video/adapter-news__video@deskpad.hermione.e2e.js

v-team: Freshness

tags:
  - news

counter: /$page/$main/$result[@wizard_name="news"]/video-block

tlds: ru
