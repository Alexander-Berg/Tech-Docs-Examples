feature: Отели
type: ''
description: >-
  О **Выдаче**, **Сниппетах** и прочем необходимом для тестирования написано в
  [Инструкции](https://wiki.yandex-team.ru/eva/testing/Projects/Travel/)

  Проверяем, что определенные события отображаются в консоли при определенных
  кликах:

  * На странице поиска отелей при кликах на разные элементы сниппета

  * На странице отеля при клике на ссылку партнера|Яндекс путешествий и
  кнопке **Выбрать**

  **Как проверять, что цели регистрируются:**
   * Перейти на нужную страницу в портале
   * Открыть консоль браузера (F12) -> Console
   * В урл добавить в конце &_ym_debug=1
   * Кликнуть enter (для перезагрузки страницы и применения параметра)
   * Произвести действие (всегда разное в зависимости от того, кого событие проверяем) - в консоли должно появиться событие, которое начинается с Reach goal - эта фраза характерна для всех целей, которые будут отправлены в метрику. В той же строке следом за Goal id будет идти название события
   Для удобства в консоли можно отфильтровать по слову "reach" только события из метрики https://jing.yandex-team.ru/files/iliasova/2020-08-31_14.29.52-bnapt.png

  **Какие цели регистрируются в метрике**
  На поиске:
   * hotels_search_page_card_hotel_name_click - при клике на название отеля в снипете
   * hotels_search_page_card_hotel_reviews_click - при клике в отзывы на снипете
   * hotels_search_page_card_operator_button_click - по клику в Выбрать на снипете
   * hotels_search_page_card_hotel_click - по клику на остальные элементы снипета (ведущих к открытию страницы отеля)
  
  На странице отеля: 
   * hotels_hotel_page_partner_redirect - в блоке партнерских офферов по клику на название или логотип партнера или кнопке **Выбрать**.
   * hotels_hotel_page_main_tab_offer_click - аналогично предыдущему событию + по клику в Забронировать для офферов Яндекса

  **Примечательно, что при некоторых кликах новая страница будет открываться в
  той же вкладке, а это значит события в консоли будут затираться очень быстро
  после клика. В этом случае можем посоветовать использовать видеозапись экрана,
  чтобы при ее просмотре в замедленном режиме увидеть всё.**


  В кейсе могут использоваться следующие терминыы и сокращения:


  Кликнуть - нажать левой кнопкой мыши (ЛКМ) при нахождении курсора над
  элементом или местом страницы, на который нужно нажать.

  ОР -  ожидаемый результат.

  Остальное можно найти в
  [Глоссарий](https://wiki.yandex-team.ru/eva/search/assessors-testing/Glossarijj/).

  Пользователь находится на главной странице тестируемого сервиса
  https://travel.crowdtest.yandex.ru .
specs:
  'Метрика. Регистрация событий по переходу на партнеров со страницы отеля': 
    - do: Перейти на таб **Отели** и получить **Выдачу** по Москве на любые даты.
    - assert: Открывается список **Сниппетов** по введенному поисковому запросу.
    - do: >-
        На любом сниппете кликнуть на имя отеля
    - assert: >-
        Открывется страница отеля
        В консоли регается событие hotels_search_page_card_hotel_name_click
    - do: >-
        Вернуться на поиск и кликнуть в отзывы на любом снипете
    - assert: >-
        Открывется страница отеля
        В консоли регается событие hotels_search_page_card_hotel_reviews_click
    - do: >-
        Вернуться на поиск и кликнуть в Выбрать на любом снипете
    - assert: >-
        Открывется страница отеля
        В консоли регается событие hotels_search_page_card_operator_button_click
    - do: >-
        Вернуться на поиск
        В фильтрах выбрать Кешбэк плюса (дождаться обновления выдачи)
        Кликнуть в любой элемент на любом снипете (кроме имени отеля, отзывов и кнопки Выбрать)
    - assert: >-
        Открывется страница отеля
        В консоли регается событие hotels_search_page_card_hotel_click        
    - do: >-
        На странице отеля найти блок предложений от Яндекса (с фотками и кнопкой Забронировать)
        Нажать Забронировать
    - assert: В консоли регается hotels_hotel_page_main_tab_offer_click
    - do: >-
        Осуществить поиск по любой зарубежной локации, например по Кракову
        Кликнув на сниппет, перейти на страницу любого отеля
        Найти блок с предложениями от партнеров
        Кликнуть на Выбрать у любого оффера в этом блоке
    - assert: в консоли регаются события hotels_hotel_page_main_tab_offer_click и hotels_hotel_page_partner_redirect
    - do: >-
        Вернуться на стр отеля
        Повторить действия в том же блоке для логотипа партнера и названия
    - assert: ОР аналогичен предыдущему
manual: true
Сервис: Отели
Тестирование асессорами: Да
Tag: form-6463058
