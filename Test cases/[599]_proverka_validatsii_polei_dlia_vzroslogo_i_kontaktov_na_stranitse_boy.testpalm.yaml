feature: Авиа
type: ''
description: >-
  Перед выполнением кейса нужно залогиниться, если не был выполнен вход в
  аккаунт, а если уже залогинены, то выйти из учетки


  Как попасть на страницу бронирования аэрофлота:


  **Если вы тестируете тач-версию, можно для удобства создавать нужную ссылку на
  бронирование (или другие ссылки из кейсов) в десктопе, потом просто копировать
  и проверять кейс в таче.**


  * В поиске авиа поискать по направлению, по которому летает аэрофлот
  (например, Москва - Екатеринбург, или направление, указанное в кейсе).

  * Выбрать в фильтре по авиакомпаниям Аэрофлот

  * Кликнуть по сниппету с предложением Аэрофлота (где есть приписка Продает
  авиакомпания).

  * На открывшейся странице кликнуть по кнопке Купить для аэрофлота. //
  произойдет переход на travel-test

  ![image](https://jing.yandex-team.ru/files/shenfeld/2020-12-18_14.23.50-7x9wt.png)

  * **У Асессоров откроется travel.crowdtest** - должна открыться страница
  бронирования с формой ввода данных пассажиров

  Должны быть незалогинены.
specs:
  Проверка валидации полей для взрослого и контактов на странице BOY:
    - do: >-
        Выполнить переход как описано в Description. Поиск нужно осуществить на
        1 взрослого.
    - assert: >-
        1) Переход сработал, открылась страница бронирования

        2) Гражданство выбрано "Россия"

        3) Тип документа выбран "Паспорт РФ"

        https://jing.yandex-team.ru/files/gouken67/BoY%20пропали%20плейсхолдеры.png
    - do: Поставить фокус в поле "Имя"
    - do: Не заполняя полей нажать кнопку оплатить
    - assert: >-
        1) Рамки всех обязательных полей стали красными, над первым (отсчёт
        сверху слева) полем появился попап с информацией о том, что это поле
        нужно заполнить
        На тачах попапа нет, есть только подписи под полями.

        https://jing.yandex-team.ru/files/shenfeld/2019-09-15_09.49.20-lcxak.png
    - do: |
        Начать заполнять поле "Имя" кириллицей
        Кликнуть вне поля
    - assert: Происходит транслитерация введённого имени. Появляется сообщение "Перевели ваши данные на латиницу. Проверьте, что всё правильно"
    - do: |
        Стереть введённое имя.
        Начать заполнять поле "Имя" цифрами/знаками кроме -
    - assert: |-
        1) Рамки остались красными
        2) Появился попап "Допускается одиночный дефис и одиночный пробел. В начале и конце должны стоять латинские буквы"
    - do: >-
        Заполнить поля "Имя" и "Фамилия" латиницей с использованием знака - в
        обоих полях, и поставить фокус в поле "Дата рождения"
    - assert: |-
        1) Рамки полей "Имя" и "Фамилия" стали серыми
        2) Рамка поля "Дата рождения" осталась красной
        3) Появился попап Это поле нужно заполнить
        4) Под полем есть текст "ДД.ММ.ГГГГ"
        https://jing.yandex-team.ru/files/shenfeld/2019-09-15_09.52.10-g5pw3.png
    - do: Начать вводить в поле "Дата рождения"  буквы
    - assert: '1) Ничего не происходит, буквы не вводятся'
    - do: Начать вводить в поле "Дата рождения" цифру 5
    - assert: 1) Автоматически в начале добавился 0 и получилось "05"
    - do: Очистить поле
    - assert: 1) Поле стало пустым
    - do: Ввести в поле “Дата рождения” "31 02"
    - assert: 1) Поле заполнилось только 31.0
    - do: Перезаполнить поле "Дата рождения" "28.02.2009"
    - assert: |-
        1) Поле заполнилось
        2) Рамка стала оранжевой
        https://jing.yandex-team.ru/files/gouken67/Дата%20рождения%20BoY.png
    - do: Нажать на "Мужской" в баттоне "Пол"
    - assert: Кнопка "Мужской" активирована - выделана желтым цветом
    - do: нажать на "Женский" в поле "Пол"
    - assert: Кнопка "Женский" активирована - выделана желтым цветом
    - do: Поставить фокус в поле "Серия и номер"
    - assert: 1) Появился попап "Это поле нужно заполнить"
    - do: Начать вводить буквы в поле "Серия и номер"
    - assert: Буквы не вводятся
    - do: Перезаполнить поле "Серия и номер" на 10 цифр
    - assert: |-
        1) Рамка стала серой
        2) Попап пропал
        3) Поле "Годен до" заблокировано
    - do: Кликнуть в поле "Документ"
    - assert: >-
        1) Раскрылся список выбора документов

        https://jing.yandex-team.ru/files/gouken67/Документы%20Авиа%20BoY.png
    - do: Выбрать "Загранпаспорт"
    - assert: |-
        1) Поле "Серия и номер" очистилось, рамки стали красными
        2) Поле "Годен до" разблокировалось, рамки стали красными
    - do: Ввести в поле "Серия и номер" 10 цифр
    - assert: 'Ввелось 9 цифр, 10я не вводится'
    - do: 'Перезаполнить поле "Серия и номер", ввести 9 цифр'
    - assert: |-
        1) Рамки стали серыми
        2) Попап пропал
    - do: Поставить фокус в поле "Годен до"
    - assert: '1) Попап и текст под полем, такие же как и для поля "Дата рождения"'
    - do: Ввести вчерашнюю дату в поле "Годен до"
    - assert: >-
        1) Рамки остались красными

        2) Текст попапа изменился на "Срок действия должен быть не ранее даты
        вылета последнего рейса"

        https://jing.yandex-team.ru/files/megamgistr/Yandeks.Puteshestviya__aviabilety_bilety_na_poezd_bronirovanie_otelei_2019-04-01_10-47-02.png
    - do: Перезаполнить поле "Годен до" на валидную дату
    - assert: |-
        1) Рамки стали серыми
        2) Попап пропал
    - do: Изменить "Документ" на "Свидетельство о рождении"
    - assert: |-
        1) Поля "Серия и номер" и "Годен до" очистились
        2) Поле "Годен до" заблокировалось
    - do: >-
        Начать вводить в поле "Серия и номер" буквы, затем нажать на кнопку
        Оплатить
    - assert: >-
        1) Текст в попапе стал "Например: IVIV787375"

        https://jing.yandex-team.ru/files/megamgistr/Yandeks.Puteshestviya__aviabilety_bilety_na_poezd_bronirovanie_otelei_2019-06-25_17-23-07.png
    - do: Ввести валидное значение поля
    - assert: |-
        1) Рамка стала серой
        2) Попап пропал
    - do: >-
        В блоке "Контактная информация покупателя" поставить фокус в поле
        "E-mail"
    - assert: 1) Появился попап "Это поле нужно заполнить" (в таче приписка)
    - do: Начать заполнять поле "E-mail" буквам
    - assert: >-
        1) Текст сменился на "Адрес должен состоять из латинский букв, цифр и
        символов:_.+-@"

        https://jing.yandex-team.ru/files/megamgistr/Yandeks.Puteshestviya__aviabilety_bilety_na_poezd_bronirovanie_otelei_2019-04-01_11-03-16.png
    - do: Перезаполнить поле "E-mail" на "test_.+-@test.ru"
    - assert: |-
        1) Рамка стала серой
        2) Попап пропал
    - do: Поставить фокус в поле "Телефон"
    - assert: Появился попап "Это поле нужно заполнить" (в таче приписка)
    - do: Начать вводить буквы
    - assert: 1) Буквы вводятся
    - do: Ввести любой номер телефона
    - assert: |-
        1) Рамки стали серыми
        2) Попап пропал
    - do: Попытаться ввести больше 11 цифр
    - assert: >-
        Цифры вводятся. Появляется подсказка, что кол-во цифр должно быть от 10
        до 15
    - do: Выбрать тип документа "Другой".
    - assert: >-
        1) После выбора типа "Другой" появилась возможность изменить
        гражданство, разблокировалось поле Годен до.
    - do: Изменить страну в поле Гражданство.
    - assert: 'Подставляется выбранная страна, тип документа остаётся "Другой".'
    - do: Ввести в поле "Серия и номер" меньше 6 цифр и нажать кнопку для оплаты
    - assert: |-
        1) Рамки стали красными
        2) Появился попап с информацией о том, что минимум должно быть 6 знаков
    - do: Ввести больше 14 цифр и нажать кнопку для оплаты
    - assert: |-
        1) Рамки остались красными
        2) Текст в попапе изменился на "Кол-во символов не должно превышать 14"
    - do: Ввести 7 символов включая ?/~ и нажать кнопку для оплаты
    - assert: >-
        1) Текст в попапе изменился на “Номер документа может содержать только
        латинские буквы и арабские цифры”
    - do: Ввести 7 символов включая латинские буквы
    - assert: 1) Валидация прошла
    - do: Изменить дату рождения на 21011899
    - assert: >-
        1) Рамки стали красными

        2) Появился попап с информацией о том, что минимальный год рождения 1900

        https://jing.yandex-team.ru/files/megamgistr/Yandeks.Puteshestviya__aviabilety_bilety_na_poezd_bronirovanie_otelei_2019-06-25_17-23-47.png
    - do: >-
        Заполнить форму пассажира корректными данными, а в качестве даты
        рождения указать 28.02.2015.

        Нажать на кнопку Оплатить.
    - assert: >-
        Поле Даты рождения окрашено в красный цвет.

        Отображается сообщение "Возраст взрослого должен быть 12 или более лет
        на дату вылета последнего рейса в заказе" (в десктопе - при наведении
        курсора).
manual: true
Функциональность: Бронирование
Устройство:
  - Десктоп
  - Тач
tlds: hard
Сервис: Авиа
Тестирование асессорами: Да
Окружение: Testing
