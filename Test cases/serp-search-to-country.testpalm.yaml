feature: Авиабилеты
type: Выдача
description: "Авиа: Поиск из города в страну"

specs:
    Поиск из города в страну:
        - do: открыть главную страницу путешествий, вкладка Авиабилеты
        - do: |
              Заполнить форму поиска билетов
              Откуда: Москва
              Куда: США
              Туда: 5 число следующего месяца, дату обратно не ставить.
              Пассажиры: 2 взрослых 1 ребёнок 2 младенца
              Класс: Эконом
        - do: Нажать кнопку Найти
        - assert: |
              В поле Куда подставилось название страны
              Переходим на страницу Поиска до страны
              На странице есть: шапка со свернутой формой поиска, баннер с информацией об ограничениях, карточки с популярными городами выбранной страны, футер.
              Карточка состоит из фото города или заглушки (если фото нет), названия города и минимальной цены перелёта. Страница может содержать цены с приставкой "~" и спиннером. Если в город нет рейсов, цены не будет совсем.
              'Скриншот десктоп: https://jing.yandex-team.ru/files/kuklina/2022-04-14_16-06-58.png'
              'Скриншот тач: https://jing.yandex-team.ru/files/kuklina/2022-04-15_17-18-10.png'
        - do: Дождаться загрузки всех цен
        - do: Обновить страницу
        - assert: |
              Внешний вид страницы прежним.
              Баннер с ограничениями показывает нужную страну.
              Поиск цен заново не запускается.
        - do: Кликнуть на баннер с информацией об ограничениях
        - assert: Открывается попап-окно \ шторка с подробной информацией для страны назначения
        - do: Закрыть попап \ шторку с ограничениями.
        - do: Запомнить цену на любой карточке города, кликнуть по этой карточке города.
        - assert: |
              Открывается выдача поиска в указанный город.
              Город "Откуда", дата, количество пассажиров и класс обслуживания соответстуют запросу из поиска до страны.
              Сама низкая цена соответствует цене, которая была указана на карточке города.

files:
    - tests/common/avia/serp/serp-search-to-country.hermione.ts

tags: smoke

Сервис: Авиа
Страница: Главная
Функциональность: Форма поиска
Устройство:
    - Десктоп
    - Тач
Окружение:
    - Testing
    - Production
