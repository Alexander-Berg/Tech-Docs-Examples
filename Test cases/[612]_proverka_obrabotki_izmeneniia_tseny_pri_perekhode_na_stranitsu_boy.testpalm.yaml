feature: Авиа
type: ''
description: >-
  Как попасть на страницу бронирования аэрофлота:


  **Если вы тестируете тач-версию, можно для удобства создавать нужную ссылку на
  бронирование (или другие ссылки из кейсов) в десктопе, потом просто копировать
  и проверять кейс в таче.**


  * В поиске авиа поискать по направлению, по которому летает аэрофлот
  (например, Москва - Екатеринбург, или направление, указанное в кейсе).

  ! На выдаче нужно добавить параметр к урлу &utm_source=availability_new_price

  * Выбрать в фильтре по авиакомпаниям Аэрофлот

  * Кликнуть по сниппету с предложением Аэрофлота (где есть приписка Заказ на Я.Путешествиях).

  * На открывшейся странице кликнуть по кнопке Купить для аэрофлота. //
  произойдет переход на travel-test

  ![image](https://jing.yandex-team.ru/files/shenfeld/2020-12-18_14.23.50-7x9wt.png)

  * **У Асессоров откроется travel.crowdtest** - должна открыться страница
  бронирования с формой ввода данных пассажиров



  Отсутствие лого АК не является багом или проблемой кейса!



  **Параметр  utm_source сохраняется в куки, поэтому после проверки, куки надо
  почистить**
specs:
  Проверка обработки изменения цены при переходе на страницу BOY:
    - do: Выполнить переход как описано в Description.
    - assert: >-
        1) Переход сработал, открылась страница бронирования

        2) Появился попап с информацией об изменении цены, формат:

        a) Заголовок: Цена изменилась

        b) Текст: Авиакомпания изменила стоимость по тарифу "Эконом.Промо" до
        9000 рублей. Вы можете вернуться для выбора другого предложения или
        продолжить бронирование по тарифу "Эконом.Промо"

        c) Кнопки: (Дефолт) Продолжить бронирование: Закрывает попап и ставит
        фокус в первое поле.

        Вернуться к результатам поиска: Возврат к выдаче по данному направлению

        4) Фон затемнён

        https://jing.yandex-team.ru/files/kuklina/2022-03-18_02-04-25.png
    - do: Кликнуть по кнопке "Продолжить бронирование"
    - assert: >-
        1) Попап скрылся

        2) В блоке тарифов:

        - напротив изменённого тарифа старая цена перечёркнута красным, над ней
        новая цена

        - изменённая цена совпадает с ценой в попапе

        3) В блоке итого:

        - старая цена перечёркнута красным, над ней новая цена

        - изменённая цена совпадает с ценой в попапе

        - над кнопкой оплатить текст "Цена изменилась после уточнения предожения
        у Авиакомпании"

        https://jing.yandex-team.ru/files/megamgistr/Yandeks.Puteshestviya__aviabilety_bilety_na_poezd_bronirovanie_otelei_2019-04-05_17-33-09.png
    - do: Кликнуть по кнопке "Показать все тарифы"
    - assert: |-
        - Открылся попап с тарифами
        - У изменённого тарифа показана новая цена
manual: true
Функциональность: Бронирование
Устройство:
  - Десктоп
  - Тач
tlds: hard
Сервис: Авиа
Тестирование асессорами: Да
Окружение: Testing
