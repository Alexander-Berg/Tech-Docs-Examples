feature: Поезда
type: Подтверждение

specs:
    Ошибка добавления страховки:
        - do: |
              Перейти на вкладку ЖД
              Перейти на поиск Москва - Санкт-Петербург через месяц
              Для любого поезда кликнуть по кнопке Выбрать место
              На странице выбора мест выбрать любое место в любом вагоне
              Нажать Указать пассажиров
              Дернуть ручку тестового контекста: https://api.travel-balancer-test.yandex.net/api/test_context/v1/train_token?insurancePricingOutcome=IPO_SUCCESS&insuranceCheckoutOutcome=ICO_SUCCESS&insuranceCheckoutConfirmOutcome=ICCO_FAILURE&refundPricingOutcome=RPO_SUCCESS&refundCheckoutOutcome=RCO_SUCCESS&createReservationOutcome=RCRO_SUCCESS&confirmReservationOutcome=RCOO_SUCCESS&officeReturnDelayInSeconds=0&officeAcquireDelayInSeconds=0&alwaysTimeoutAfterConfirmingInSeconds=0
              В ответе запомнить токен из поля test_context_token
              Добавить к урлу параметр trainTestContextToken со значением полученного токена
              Перейти по полученной ссылке
              Заполнить поля любыми валидными данными
              Нажать Проверить заказ и купить
              Установить чекбокс страховки
              Нажать Ввести карту и оплатить (если будет шаг оплаты, ввести данные тестовой карты и оплатить)
        - assert: |
            Произошел переход на страницу заказа
            На странице отображается желтое предупреждение "При покупке страховых полисов произошла ошибка, поэтому билеты оформлены без страховки. Деньги за нее вернутся в ближайшее время."
            В билетах нет пункта "Страховка"
            Итоговая сумма указана без учета страховки

files:
    - tests/common/trains/order/confirmation/errorAddingInsurance.hermione.ts

tags:
    - TK
    - orkestrator

# meta
Сервис: ЖД
Страница: Подтверждение
Устройство:
    - Десктоп
    - Тач
Окружение:
    - Testing
Тестирование асессорами: Нет
