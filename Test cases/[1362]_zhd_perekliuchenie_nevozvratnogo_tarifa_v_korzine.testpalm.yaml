feature: ЖД
type: Подтверждение
description: >-
    Поскольку невозвратный тариф - это акционная вещь, то самые актуальные данные
    по ним будут у РЖД: https://www.rzd.ru/ru/9332
specs:
    'ЖД: Переключение невозвратного тарифа в корзине':
        - do: |
              Перейти на вкладку ЖД
              Перейти на поиск Москва - Санкт-Петербург через месяц
              Выбрать поезд "Сапсан" или "Мегаполис"
        - assert: Произошел переход на страницу выбора мест
        - do: |
              Выбрать двух взрослых пассажиров
              Выбрать класс 2Т
              На схеме выбрать 2 места в последнем купе (места 33-36)
        - assert: |
              - Выбранные места окрасились в желтый
              - В корзине появилась информация о тарифах (в десктопе корзина справа, в
              таче появляется по тапу на иконку ?)

              скрин десктоп:
              https://jing.yandex-team.ru/files/shenfeld/2020-09-11_13.12.26-yp7ju.png
              скрин тач:
              https://jing.yandex-team.ru/files/shenfeld/2020-09-11_13.12.02-4wtsx.png
              - В корзине есть баттон для переключения невозвратного/обычного тарифа
              - По умолчанию выбран возвратный тариф
              - Есть указание общей стоимости для обоих тарифов
              - Есть указание размера скидки для невозвратного тарифа
              - Сумма за два билета равна сумме по стандартному тарифу
        - do: |
              Выбрать невозвратный тариф
              Нажать на ссылку "Подробнее" в корзине в информации о невозвратном
              тарифе
        - assert: |
              - Развернулся текст "Места [выбранные места] со скидкой по невозвратному
              тарифу. При сдаче такого билета деньги вернутся не полностью. Возврат
              полной стоимости возможен только в определенных случаях."
        - do: Кликнуть по ссылке "Возврат"
        - assert: Произошел переход в новой вкладке на страницу с правилами возврата
        - do: |
              Вернуться на страницу выбора мест
              Переключить тариф на Стандартный
        - assert: |
              - Тариф переключился
              - Сумма к оплате изменилась (стала больше)
        - do: Перевыбрать места - 32 и 33
        - assert: |
              - В корзине поменялась сумма за невозвратный тариф
              - В приписке про невозвратный тариф указано только место 33: "Место 33
              со скидкой по невозвратному тарифу"
        - do: |
              Нажать "Указать пассажиров"
              Ввести любые данные
              В корзине переключить тариф на стандартный, затем вернуть на невозвратный
        - assert: |
              - Тариф в корзине переключается
              - При переключении меняется сумма к оплате
        - do: Нажать Проверить заказ и купить
        - assert: |
              - Произошел переход на страницу подтверждения
              - В корзине больше нельзя переключить тариф
              - Номера мест могут отличаться от тех, которые выбирали! Главное, чтобы
              совпадало кол-во: 1 невозвратный, 1 обычный
              - В приписке про невозвратный тариф указано только одно место (номер
              этого места может отличаться от предыдущих шагов, если места при
              бронировании были изменены!): "Место 33 со скидкой по невозвратному
              тарифу"
              - Цены за билеты отличаются друг от друга - билет по невозвратному
              тарифу дешевле

              скрин корзины:
              https://jing.yandex-team.ru/files/shenfeld/2020-09-11_13.45.13-ajw1z.png

manual: true
Функциональность: Бронь с разными условиями
Устройство:
    - Тач
    - Десктоп
Страница: Подтверждение
Сервис: ЖД
Тестирование асессорами: Да
Окружение:
    - Production
    - Testing
Автор: shenfeld
