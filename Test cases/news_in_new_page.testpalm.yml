feature: Страница новости в новой вкладке (release)

specs:
  description: turbo не подерживается в Safari 7-8, UC браузере, MSIE , Android Браузере младще 4.4

  beforeEach:
    - do: произвести поиск по запросу 'новости vesti.ru' (альтернативные запросы - 'новости news.rambler.ru', 'новости tass.ru')
    - assert: в поисковой выдаче есть новостной турбо сниппет [https://jing.yandex-team.ru/files/narbutovich/novosti_vesti.ru__Yandeks_nashlos_13mlnrezultatov_2021-05-06_12-28-16.png]
    - do: при дальнейшей проверке указанных ожидаемых результатов обращайте внимание на любые некорректные на ваш взгляд поведения, основываясь на свой опыт использования web-приложений (например, сохранение позиции при переходах туда-обратно кнопками на устройстве, пустые экраны при переходах, кривая верстка, скачкИ элементов, плавность скролла, неработающая функциональность и т.п.)
    - do: кликнуть по любой из новостных карточек (в Яндекс.Браузере необходимо зажать карточку, после чего выбрать 'Открыть в новой вкладке')
    - assert: загрузилась турбо-версия новости в новой вкладке

  Проверка турбо-версии новости [manual]:
    - automation: SERPTEST-549
    - assert: на странице есть шапка с логотипом источника новости и иконкой ракеты
    - do: тапнуть по логотипу источника новости в шапке
    - assert: в новой вкладке открылась страница источника
    - do: вернуться на турбо-версию новости
    - assert: |
        на турбо-версии новости под шапкой есть заголовок
        под заголовком есть дата публикации новости
        есть картинка статьи (если нет картинки, проверить на другой турбо-новости)
        под картинкой есть текст статьи
        под текстом есть рекламный блок
    - do: тапнуть по рекламному блоку
    - assert: в новой вкладке открылась рекламируемая страница
    - do: вернуться на турбо-версию новости
    - do: прокрутить до конца турбо-версию новости
    - assert: в конце статьи есть кнопка "Перейти на оригинал"
    - do: тапнуть по кнопке "Перейти на оригинал"
    - assert: в новой вкладке открылась оригинальная версия новости

  Блок Вам может быть интересно [manual]:
    - automation: SERPTEST-549
    - do: прокрутить до конца страницы до блока Вам можеть интересно (если данного блока нет, то попробовать поискать по другому новостному запросу, например, 'regnum.ru путин', 'трамп тасс' или 'новости rg')
    - assert: |
        под рекламным блоком есть блок "Вам может быть интересно" с другими новостями [https://jing.yandex-team.ru/files/olga0321/Putin_o_yadernoi_voine_protiv_Rossii_My_kak_mucheniki_popadem_v_rai_2018-10-23_13-52-16.png] (картинок в блоке может не быть)
    - do: тапнуть по названию статьи из блока "Вам может быть интересно"
    - assert: в новой вкладке открылась выбранная статья на сайте источника. Если открывается турбо статья, то она открывается в той же вкладке (если страница в источнике не найдена, не считать багом)
    - do: закрыть новую вкладку с новостью
    - do: тапнуть по картинке новости из блока "Вам может быть интересно" (если картинки отсутствуют, пропустите этот шаг, это не баг)
    - assert: в новой вкладке открылась выбранная статья на сайте источника (если страница в источнике не найдена, не считать багом)

files: []
# - features/touch-phone/cover.ex-gemini.hermione.js

v-team: Turbo

manager: tanzwuta

tags:
- skip_manual_check
- release_pp

qa-engineer: kleev, k0nratka

tlds: none
