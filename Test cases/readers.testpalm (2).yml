feature: Объектный ответ
type: Кнопка чтения книг

specs-integration:
  Присутствует на странице:
    - counter: /$page/$main/$result/object-badge/scroller/reader
    - do: получить выдачу по запросу "три сестры" _ALTERNATIVE_SEARCH_QUERIES_
    - assert: в выдаче есть карточка объекта
    - assert: в карточке есть кнопка "Скачать бесплатно" (или "Читать бесплатно")

specs:
  Общий вид и счётчики:
    - do: получить выдачу по запросу "достоевский идиот"
    - assert: на странице присутствует кнопка "Скачать бесплатно" (или "Читать бесплатно")
    - screenshot: 'примерный внешний вид [readers]'
    - do: нажать на кнопку "Скачать бесплатно" (или "Читать бесплатно")
    - tech: сработал счётчик path="/$page/$main/$result/object-badge/scroller/reader"
    - assert: книжка открылась в новом табе
    - assertMetrics:
        - web.total_request_count
        - web.total_click_count
        - web.total_all_click
        - web.tech_part_misc_click
        - all.total_dynamic_click_count
        - feature.web.wizards_common.entity_search_wizard_main.total.clicks

  Кнопка с расхлопом у всенауки:
    - do: получить выдачу по запросу "защита от темных искусств"
    - assert: на странице присутствует кнопка "Скачать бесплатно" (или "Читать бесплатно")
    - screenshot: 'примерный внешний вид [readers]'
    - do: нажать на кнопку "Скачать бесплатно" (или "Читать бесплатно")
    - assert: |
        открылась шторка
        в меню есть айтем Всенаука
    - screenshot: примерный внешний вид [menu]

files:
  - features/touch-phone/z-entity-search/card/readers/readers.hermione.js
  - features/touch-phone/z-entity-search/card/readers/readers.hermione.e2e.js

counter: /$page/$main/$result/object-badge/scroller/reader

v-team: OO

qa-engineer: eksamoylova

tags: qa_books

tlds:
  - ru
