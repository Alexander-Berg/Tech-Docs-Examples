feature: Ecom-tap
type: multipage

params:
    exp_flags:
        - analytics-disabled=1

aliases:
  - &before
      - do: получить выдачу по запросу 'site:super01.ru каталог' (альтернативные запросы - 'site:fulmar.ru каталог')
      - assert: на выдаче (не обязательно на первой странице результатов, может быть на 2-й или 3-й странице) присутствует турбо-сниппет(ы) с серой иконкой ракеты справа от гринурла и с галереей товаров [https://jing.yandex-team.ru/files/skurhanski/chrome_7AaJNKSEJa.png]
      - do: кликнуть по первой карточке в галерее
      - assert: открылся оверлей с карточкой товара 
      - assert: на нижней панели активна кнопкой Каталог (если панель отсутствует, поищите в результатах выдачи другой сниипет с турбо и галереей и попробуйте кликнуть по его карточке)
      - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_QhslZTXm3i.png] (в браузере Сhrome допустимо отсутствие иконки Профиль)
      - assert: сверху присутствует панель с названием сайта и крестиком (далее - мультипейдж) [https://jing.yandex-team.ru/files/skurhanski/chrome_jR6Tfpvbn3.png]  
  - &overlay
    - do: поскроллить страницу вверх-вниз несколько раз
    - assert: страница скроллится корректно
    - assert:  во время скролла сверху всегда присутствует мультипейдж и над ним нет пустот
    - assert: во время скролла снизу всегда присутствует панель с разделами магазина и под ней нет пустот
    - do: кликнуть по любой картоке товара в галерее с рекомендованными товарами (внизу карточки товара)
    - assert: открылась карточка товара, мультипейдж исчез
    - do: поскроллить страницу вверх-вниз несколько раз
    - assert: страница скроллится корректно
    - assert: во время скролла снизу всегда присутствует панель с разделами магазина и под ней нет пустот
    - do: проскроллить до конца галерею с рекомендованными товарами (внизу карточки товара)
    - do: кликнуть по последней карточке в галерее
    - assert: открылась карточка товара
    - do: поскроллить страницу вверх-вниз несколько раз
    - assert: страница скроллится корректно
    - assert: во время скролла снизу всегда присутствует панель с разделами магазина и под ней нет пустот
    - do: кликнуть назад на устройстве (или по ссылке над картинкой товара)
    - assert: осуществился переход на предыдущую карточку товара с анимацией
    - assert: в карточке сохранена позиция
    - do: поскроллить страницу вверх-вниз несколько раз
    - assert: страница скроллится корректно
    - assert: во время скролла снизу всегда присутствует панель с разделами магазина и под ней нет пустот
    - do: кликнуть назад на устройстве (или по ссылке над картинкой товара)
    - assert: осуществился переход на предыдущую карточку товара с анимацией
    - assert: в карточке сохранена позиция
    - assert: сверху присутствует мультипейдж
    - do: поскроллить страницу вверх-вниз несколько раз
    - assert: страница скроллится корректно
    - assert: во время скролла сверху всегда присутствует мультипейдж и над ним нет пустот
    - assert: во время скролла снизу всегда присутствует панель с разделами магазина и под ним нет пустот
    - do: свайпнуть содержимое оверлея справа налево
    - assert: произошло переключение на другую карточку товара
    - do: свайпнуть содержимое оверлея слева направо
    - assert: произошло переключение на предыдущую карточку товара
    - do: кликнуть по крестику в мультипейдже
    - assert: осуществился переход к результатам выдачи
    - do: снова перейти на страницу магазина, кликнув по первоначальной ссылке
    - assert: открылась страница магазина с активной кнопкой Каталог на нижней панели
    - assert: сверху присутствует мультипейдж
  - &checksMainCatalog
    - do: при дальнейшем выполнении шагов обращать внимание на сохранение позиции при переходах туда-обратно кнопками на устройстве, пустые экраны при переходах (не должно быть пустых мест, дыр и т.п. больше секунды нигде), кривую верстку, прыгания элементов, неработающую функциональность
    - do: проверить скролл страницы и элементов на ней
    - do: проверить отображение картинок и новых карточек при скроллах
    - do: проверить работу ссылок в разделе со списком категорий
    - assert: раздел со списком категорий выглядит примерно так [https://jing.yandex-team.ru/files/skurhanski/chrome_vavQteDlDy.png] 
    - do: проверить, что товар добавляется в корзину
    - do: проверить, что карточки кликаются и открываются
    - do: проверить прочие кликабельные элементы на корректность их работы
  - &main
      - do: перейти в раздел "Главная", кликнув по соответствующей пиктограмме на нижней панели
      - assert: открылся раздел Главная
      - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_maX2d5l6c6.png]
  - &catalog
      - do: кликнуть по пиктограмме "Каталог" на нижней панели
      - assert: осуществился переход в корень каталога
      - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_V55pWIeZBt.png]
  - &cart
      - do: кликнуть по пиктограмме "Каталог" на нижней панели
      - assert: осуществился переход в корень каталога
      - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_V55pWIeZBt.png]
      - do: при дальнейшем выполнении шагов обращать внимание на сохранение позиции при переходах туда-обратно кнопками на устройстве, пустые экраны при переходах (не должно быть пустых мест, дыр и т.п. больше секунды нигде), кривую верстку, прыгания элементов, неработающую функциональность
      - do: добавьте около десятка произвольных товаров в корзину и перейдите в нее
      - assert: все добавленные товары присутствуют в корзине
      - assert: примерный внешний вида заполненной корзины [https://jing.yandex-team.ru/files/skurhanski/chrome_gdSpJdWrbl.png]
      - assert: при изменении количества или удаленнии товара соответственно изменяется итоговая сумма
      - do: проверить, что карточки кликаются и открываются
      - do: при нажатии на кнопку "Оформить заказ" появляется страница с формой для заполнения данных покупателя
      - assert: если пользователь незалогинен, поля не будут заполнены [https://jing.yandex-team.ru/files/skurhanski/chrome_8noo8e8A7i.png]
      - assert: если пользователь залогинен, то поля будут предзаполнены [https://jing.yandex-team.ru/files/skurhanski/chrome_RAo84ltbjk.png]
      - do: проверить прочие кликабельные элементы на корректность их работы в разделе Корзина (не стоит только выполнять отправку заказа в магазин)
  - &detail
      - do: кликнуть по любой карточке товара
      - assert: открылась карточка товара
      - do: проверить, что картинки и кнопки в карточке кликаются и работают корректно
      - do: при нажатии на кнопку 'Быстрый заказ' (при ее наличии) появляется страница с формой для заполнения данных покупателя
  - &about
      - assert: открылся раздел Каталог
      - do: при дальнейшем выполнении шагов обращать внимание на сохранение позиции при переходах туда-обратно кнопками на устройстве, пустые экраны при переходах (не должно быть пустых мест, дыр и т.п. больше секунды нигде), кривую верстку, прыгания элементов, неработающую функциональность
      - assert: кликнуть на нижней панели по пиктограмме "О магазине"
      - assert: открылась страница с информацией о магазине
      - assert: объем информации о магазине может отличаться [https://jing.yandex-team.ru/files/skurhanski/chrome_GsLgAil8cj.png]
      - do: при наличии данных о магазине попробовать покликать по их ссылкам и проверить корректность их работы
  - &payment
      - do: добавить любой товар в корзину (без метки 'Под заказ')
      - do: перейти в корзину и нажать кнопку "Оформить заказ"
      - assert: произошел переход к оформлению заказа
      - do: если отсутствует способ оплаты картой - закончите текущее задание (оставшиеся шаги не надо выполнять)
      - do: заполнить все поля корректными данными
      - do: выбрать способ оплаты картой
      - do: проскроллить страницу таким образом, чтобы кнопка оплаты была расположена максимально внизу экрана
      - assert: пример позиции кнопки оплаты [https://jing.yandex-team.ru/files/skurhanski/browser_xqmatMDdKx.png]
      - do: кликнуть по кнопке оплаты
      - assert: |
          появилась форма для ввода данных платежной карты
          форма выглядит корректно
      - do: ввести номер карты - 5555555555554576
      - do: в качестве срока действия укажите любую дату (но больше текущей), CVC - любые числа
      - do: нажмите Оплатить
      - assert: появился спиннер, обозначающий процесс оплаты
      - assert: появилось сообщение об ошибке оплаты заказа
      - do: вернуться в корзину
      - assert: в корзине присутствует ранее добавленный товар

specs:
  beforeEach:
    - *before
  Главная:
    - automation: SERPTEST-1719
    - *overlay
    - *main
    - *checksMainCatalog
  Каталог:
    - automation: SERPTEST-1719
    - *overlay
    - *catalog
    - *checksMainCatalog
  Карточка товара:
    - automation: SERPTEST-1719
    - *overlay
    - *catalog
    - *detail
  Корзина:
    - automation: SERPTEST-1719
    - *overlay
    - *cart
  О магазине:
    - automation: SERPTEST-1719
    - *overlay
    - *about
  Оплата картой:
    - automation: SERPTEST-1719
    - *payment

files: []

v-team: Turbo

tlds: ru

tags: 
  - ecom-tap
  - ecom-tap-multipage