feature: Объектный ответ

specs:
  beforeEach:
    - do: получить выдачу по запросу 'мадонна'
    - assert: появился объектный ответ по заданному запросу
    - screenshot: на странице присутствует карточка объектного ответа (запрос и внешний вид могут незначительно отличаться) [adapters/adapter-entity-search/card-145-{{PLATFORM}} >> plain]
    - assert: |
        заголовок карточки соответствует запросу (например Мадонна),
        гринурл под заголовком указан как 'Википедия',
        присутствует краткая информация о запрошенной персоне
  Проверка счетчиков и ссылок:
    - tags: winphone7
    - do: нажать на ссылку в заголовке
    - assert: открылась Википедия с соответствующей запросу информацией
    - tech: проверить счетчик в тайтле '/snippet/entity_search/object-badge/title'
    - do: нажать на гринурл 'Википедия' под заголовком
    - assert: открылась Википедия с соответствующей запросу информацией
    - tech: проверить счетчик в сабтайтле '/snippet/entity_search/object-badge/subtitle'
    - do: нажать на изображение рядом с заголовком
    - assert: осуществился переход на сервис Яндекс.Картинки, запрос соответствует заголовку
    - tech: проверить счетчик в тумбе '/snippet/entity_search/object-badge/thumb'
    - do: найти в ответе слово 'Родился/Родилась' и нажать на город-ссылку
    - assert: в этой же вкладке происходит перезапрос по названию города
    - tech: проверить счетчик в первом элементе фактов '/snippet/entity_search/object-badge/wikifact/p0'
    - do: вернуться по кнопке назад
    - assert: |
        запрос в поисковой строке соответствует первоначальному,
        нажатый ранее город-ссылка окрасился в другой цвет
    - tech: проверить счетчик во втором элементе фактов '/snippet/entity_search/object-badge/wikifact/p1'
    - do: нажать одну из ссылок серого цвета в нижней части объектного ответа (Кинопоиск, Викицитатник)
    - assert: осуществился переход на выбранную страницу, тематика совпадает с запросом
    - tech: проверить счетчик первой ссылки футера '/snippet/entity_search/object-footer/p0'
    - tech: проверить счетчик второй ссылки футера '/snippet/entity_search/object-footer/p1'
    - tech: проверить счетчик ката '/snippet/entity_search/cut'
  Проверка блока ката:
    - tags: no_assessors
    - do: тапнуть по кату (ссылке '[...]' в блоке Награды)
    - assert: |
        показывается ранее скрытый текст под катом (т.е. к изначально отображающемуся тексту прибавился текст из-под ката, кол-во текста увеличилось),
        ссылка '[...]' в блоке Награды пропала
    - screenshot: внешний вид с открытым катом [adapters/adapter-entity-search/card_cut_open-151-{{PLATFORM}} >> plain]
    - do: перезагрузить страницу
    - assert: после перезагрузки страницы кат (ссылка '[...]' в блоке Награды) присутствует на странице
  Проверка ресайза текста и картинки при повороте устройства [manual]:
    - automation: SERP-74690
    - tags: [manual, no_assessors]
    - do: перевернуть девайс в альбомную ориентацию
    - screenshot: примерный внешний вид в альбомной ориентации девайса [adapters/adapter-entity-search/card/horizontal-148-{{PLATFORM}} >> plain]
    - screenshot: внешний вид c широкой картинкой например по запросу 'парк зарядье' в альбомной ориентации [adapters/adapter-entity-search/card_wide_thumb/horizontal-149-{{PLATFORM}} >> plain]
    - assert: посмотреть, что выдача и картинка при повороте отресайзились, при повороте выдача справа не полностью растягивается по ширине экрана, но тайтл и картинка находятся на одном уровне и справа выдача и картинка выровнены
  Проверка внешнего вида картинки в объектном ответе на популярных запросах [manual]:
    - automation: SERP-74690
    - tags: [manual, no_release]
    - do: сделать перезапрос с футбольной или хоккейной командой (произвольный, в комментарии записать, в случае проблемы на ваш взгляд, какой был выбран перезапрос)
    - assert: |
        проверить, что картинка под или справа от тайтла, не налезает на другие блоки,
        проверить, что картинка вмещается в ширину экрана, если она утыкается в правый край экрана проверить, что нельзя поскроллить выдачу вправо за экран
        картинка по соответствующему запросу выбрана правильная
    - do: сделать перезапрос с гербом вашего города (в комментарии записать, в случае проблемы на ваш взгляд, какой был выбран перезапрос)
    - assert: |
        проверить, что картинка под или справа от тайтла, не налезает на другие блоки,
        проверить, что картинка вмещается в ширину экрана, если она утыкается в правый край экрана проверить, что нельзя поскроллить выдачу вправо за экран
        картинка по соответствующему запросу выбрана правильная
    - do: сделать перезапрос с флагом страны (произвольный, в комментарии записать, в случае проблемы на ваш взгляд, какой был выбран перезапрос)
    - assert: |
        проверить, что картинка под или справа от тайтла, не налезает на другие блоки,
        проверить, что картинка вмещается в ширину экрана, если она утыкается в правый край экрана проверить, что нельзя поскроллить выдачу вправо за экран
        картинка по соответствующему запросу выбрана правильная
    - do: сделать перезапрос с любимым сериалом или фильмом или книгой (произвольный, в комментарии записать, в случае проблемы на ваш взгляд, какой был выбран перезапрос)
    - assert: |
        проверить, что картинка под или справа от тайтла, не налезает на другие блоки,
        проверить, что картинка вмещается в ширину экрана, если она утыкается в правый край экрана проверить, что нельзя поскроллить выдачу вправо за экран
        картинка по соответствующему запросу выбрана правильная
    - do: сделать перезапрос с каким-то животным (произвольный, в комментарии записать, в случае проблемы на ваш взгляд, какой был выбран перезапрос)
    - assert: |
        проверить, что картинка под или справа от тайтла, не налезает на другие блоки,
        проверить, что картинка вмещается в ширину экрана, если она утыкается в правый край экрана проверить, что нельзя поскроллить выдачу вправо за экран
        картинка по соответствующему запросу выбрана правильная
  Проверка редких кейсов [manual]:
    - automation: SERP-74690
    - tags: [manual, no_assessors]
    - screenshot: внешний вид в альбомной ориентации без тумбы [adapters/adapter-entity-search/card_no_thumb/horizontal-150-{{PLATFORM}} >> plain]
    - screenshot: внешний вид без тумбы [adapters/adapter-entity-search/card_no_thumb-147-{{PLATFORM}} >> plain]

files:
# - features/touch-phone/adapters/adapter-entity-search.autogenerated.hermione.js
  - hermione/test-suites/touch-phone/adapters/adapter-entity-search/adapter-entity-search.hermione.js

v-team: OO

tags:
  - smoke
  - smoke_extended
  - reviewed
  - entitysearch
  - thumb
  - cut

counter: /$page/$main/$result[@wizard_name="entity_search"]/title

tlds: none
