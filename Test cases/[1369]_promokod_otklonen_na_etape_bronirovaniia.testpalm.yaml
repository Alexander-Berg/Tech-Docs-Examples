feature: Отели
type: Бронирование
description: Залогиниться
specs:
  Промокод отклонен на этапе бронирования:
    - do: 'Перейти на страницу бронирования для любого отеля, на любые даты'
    - assert: >-
        Открылась страница бронирования.

        В корзинке есть галка "У меня есть промокод", по умолчанию выключена.
        Поле инпут для промокода и кнопка "Применить" не показывается.
    - do: Включить галку "У меня есть промокод"
    - assert: Появилось Поле инпут для промокода и кнопка "Применить"
    - do: Запомнить итоговую сумму заказа
    - do: 'В инпут написать промокод "SUCCESS_ALREADY_APPLIED", нажать применить'
    - assert: |-
        Инпут, кнопка и галка задизейблились
        В блоке с промокодом появилась сумма скидки: "− 200 ₽"
        Появилась ссылка "Отменить"
        Сумма заказа стала на 200р меньше, чем была в п.3
    - do: >-
        Заполнить информацию о гостях и контактную информацию любыми валидными
        данными.

        Нажать оплатить.
    - assert: >-
        Остались на странице бронирования.

        Появился попап:

        Надпись: "Промокод отклонен Вы можете оплатить заказ полностью без
        применения промокода либо отменить его"

        Две кнопки: отменить заказ, оплатить

        Две цены: без скидки и со скидкой
    - do: Нажать кнопку "Отменить заказ"
    - assert: |-
        Открылась страница бронирования
        Галка "У меня есть промокод" отжата
        Поле инпут для промокода и кнопка "Применить" не показывается.
        Сумма без учета скидки(из п.3)
    - do: |-
        Повторить пп.4,5
        Нажать "Оплатить"
    - assert: Открылась форма оплаты заказа. Сумма без скидки.
    - do: |-
        Оплатить заказ
        На хэппи пейдж нажать Подробнее о заказе
    - assert: |-
        Открылась страница заказа
        Сумма "Оплачено" без скидки.
        Лейбла с промокодом нет
    - do: Повторить пп 4-8 с промокодом SUCCESS_NOT_APPLICABLE
manual: true
Функциональность: Промокод
Устройство:
  - Десктоп
  - Тач
Страница: Бронирование
Сервис: Отели
Тестирование асессорами: Нет
Окружение: Testing
