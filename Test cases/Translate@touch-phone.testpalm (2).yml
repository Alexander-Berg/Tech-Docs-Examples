feature: Колдунщик переводов

specs:
  Отправка статистики при инициализации:
    с пустым колдунщиком:
      - tags: [no_assessors]
      - do: получить выдачу по запросу 'перевод'
      - assert: должен появиться колдунщик переводов
      - tech: проверить счётчик инициализации
    с предзаполненным колдунщиком:
      - tags: [no_assessors]
      - do: получить выдачу по запросу 'код перевод'
      - assert: должен появиться колдунщик переводов
      - tech: проверить счётчик инициализации
  Общие проверки:
    beforeEach:
      - do: получить выдачу по запросу 'перевод'
      - assert: появляется колдунщик перевода
    Внешний вид с транскрипцией:
      - params:
          foreverdata: '2042262641'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: должен появиться колдунщик переводов
      - screenshot: к-к переводов[transcription]
    Кнопка перезагрузки работает:
      - do: получить выдачу по запросу 'перевод'
      - do: замокать ручку перевода
      - do: записать в поле ввода 'кот'
      - do: дождаться сообщения об ошибке
      - do: размокать ручку перевода
      - do: нажать на кнопку перезагрузки
      - assert: появится спиннер и перевод
    Саджест подставляется:
      - do: получить выдачу по запросу 'переводчик онлайн с русского на английский'
      - assert: появился пустой колдунщик переводов
      - do: ввести в поле ввода 'hel'
      - assert: появился саджест
      - do: кликнуть на подсказку
      - assert: подставилось слово 'help' в поле ввода
    Проверки с контролами:
      beforeEach:
        - do: вставить в поле ввода слово 'friend'
        - assert: появляется результат с переводом слова
      При выборе языка, с которого переводим, результат с переводом обновляется:
        - tags: smoke_extended
        - do: тапнуть в первый селект с языком
        - tech: проверить динамический счётчик в первом селекте с языком
        - assert: появляется выпадающее меню с языками
        - do: тапнуть по первому элементу селекта
        - assert: результат с переводом обновляется
      При выборе языка, на который переводим, результат с переводом обновляется:
        - tags: smoke_extended
        - do: тапнуть во второй селект с языком
        - tech: проверить динамический счётчик во втором селекте с языком
        - assert: появляется выпадающее меню с языками
        - do: тапнуть по первому элементу селекта
        - assert: результат с переводом обновляется
    Проверки с контролами (без текста):
      beforeEach:
        - assert: в левом селекте выбран язык 'Английский'
        - assert: в правом селекте выбран язык 'Русский'
      Смена языка текста на язык перевода:
        - do: кликнуть в левый селект с языком
        - assert: появляется выпадающее меню с языками
        - do: выбрать язык 'Русский'
        - assert: в левом селекте язык меняется на 'Русский'
        - assert: в правом селекте язык меняется на 'Английский'
        - tech: проверить счётчики смены языков
      Смена языка перевода на язык текста:
        - do: кликнуть в правый селект с языком
        - assert: появляется выпадающее меню с языками
        - do: выбрать язык 'Английский'
        - assert: в правом селекте язык меняется на 'Английский'
        - assert: в левом селекте язык меняется на 'Русский'
        - tech: проверить счётчики смены языков
      При смене языков в пустом колдунщике языки меняются местами:
        - do: кликнуть по кнопке смены языков
        - assert: языки оригинала и перевода обновились
    Фокус в поле ввода после возврата на serp:
      - do: перейти по любой ссылке со страницы выдачи результатов
      - do: вернуться на страницу выдачи результатов
      - do: кликнуть в поле ввода текста колдунщика перевода
      - assert: в поле ввода текста отображается мигающий текстовый курсор
    Длинные названия в контролах:
      - do: вставить в поле ввода текст 'Forbye twa Cdan o Sheena Blackhall singin Bothy Ballads an raedin i iain poesy ann Oot o \' Kist. Nae tae be a dhìth airson Sheena an maist kenspecklet \' esan o\'oor preisent dey Makars.'
      - assert: язык в селекте исходного языка меняется на 'Шотландский (гэльский) (автоопределение)'
      - do: в правом селекте выбрать 'Азербайджанский'
      - screenshot: названия языков в селектах обрезаются многоточием [plain]
  Показ примеров:
    Если примеры пришли с сервера:
      - params:
          foreverdata: '3845198953'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: показываются примеры
      - screenshot: примеры[examplesSimple]
    Если примеры не пришли с сервера:
      - params:
          foreverdata: '3153665154'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: примеры загрузятся с ручки и все равно будут показаны
      - screenshot: примеры, загруженные самим к-ком[examplesFromServer]
    Примеры показываются после нового запроса:
      - do: получить выдачу по запросу 'кот перевод'
      - do: дождаться загрузки примеров
      - do: нажать на кнопку очистки поля ввода
      - do: ввести в поле ввода 'привет'
      - assert: старые примеры не будут показаны, а отобразятся новые
      - screenshot: примеры[examplesAfterClear]
    Кнопка расхлопа примеров работает:
      - do: получить выдачу по запросу 'кот перевод'
      - do: дождаться показа одного примера
      - do: нажать на кнопку расхлопа примеров
      - assert: показались 3 примера
      - do: нажать еще раз на кнопку расхлопа примеров
      - assert: список примеров сократился до одного элемента
      - screenshot: примеры до раскрытия[examplesMin]
      - screenshot: примеры после раскрытия[examplesMax]
    Кнопка источников работает:
      - do: получить выдачу по запросу 'кот перевод'
      - do: дождаться загрузки примеров
      - do: расхлопнуть примеры
      - do: нажать на первую кнопку источника
      - assert: попап появился рядом с первым примером
      - do: нажать на вторую кнопку источника
      - assert: первый попап закрылся, и появился новый попап рядом со вторым примером
  Автоопределение и смена целевого языка:
    beforeEach:
      - do: получить выдачу по запросу 'перевод онлайн'
      - assert: появляется колдунщик переводов с пустым полем ввода текста
      - do: вставить в поле ввода текст 'ハイ'
      - assert: исходный язык меняется на 'Японский (автоопределение)'
      - tech: проверить технический счётчик смена языка
      - do: кликнуть во второй селект с языком
      - assert: появляется выпадающее меню с языками
    на любой, кроме автоопределенного:
      - do: выбрать любой язык, кроме японского, отличный от текущего целевого
      - assert: целевой язык изменяется на выбранный
      - assert: в кнопке исходного языка 'Японский (автоопределение)'
      - tech: проверить динамический счётчик смены исходного языка
    на автоопределенный:
      - do: выбрать японский язык
      - assert: целевой язык изменяется на японский
      - assert: в кнопке исходного языка нет слова '(автоопределение)'
      - tech: проверить счётчики смены языков
  Озвучка:
    beforeEach:
      - do: получить выдачу по запросу 'перевод some people can fly'
      - assert: появляется колдунщик перевода с текстои 'перевод some people can fly' и переводом
    Динамик введённого текста выключается при нажатии на динамик перевода:
      - do: кликнуть по динамику введённого текста
      - assert: динамик введённого текста активировался
      - do: кликнуть по динамику перевода
      - assert: динамик перевода активировался
      - assert: динамик введённого текста деактивировался
      - browsers:
          notFor:
            - firefox
    Динамик перевода выключается при нажатии на динамик введённого текста:
      - do: кликнуть по динамику перевода
      - assert: динамик перевода активировался
      - do: кликнуть по динамику введённого текста
      - assert: динамик введённого текста активировался
      - assert: динамик перевода деактивировался
      - browsers:
          notFor:
            - firefox

  Метрики:
    beforeEach:
      - do: получить выдачу по запросу 'кот перевод'
      - tech: проверить метрики
    Выбор исходного языка:
      - do: кликнуть в селект выбора исходного языка
      - do: выбрать португальский язык
      - tech: проверить счечтик
      - tech: проверить метрики
    Выбор целевого языка:
      - do: кликнуть в селект выбора целевого языка
      - do: выбрать арабский язык
      - tech: проверить счечтик
      - tech: проверить метрики
    Двойной клик в Селект:
      - do: дважды кликнуть в Селект
      - tech: проверить метрики
    Смена направления перевода:
      - do: кликнуть в кнопку смены направления перевода
      - tech: проверить счечтик
      - tech: проверить метрики
    Клик по примеру:
      - params:
          foreverdata: '3845198953'
      - do: получить выдачу по запросу 'foreverdata'
      - do: дождаться показа примеров
      - do: кликнуть по тексту примера
      - tech: проверить метрики

files:
  - src/features/Translate/Translate.test/Translate@touch-phone.hermione.js

counter: /$page/$main/$result[@wizard_name="translate"]

v-team: Translations_misspell

tags:
  - no_assessors

tlds: [ru, by, kz, uz, ua, com.tr, com]
