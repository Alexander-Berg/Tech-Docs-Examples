feature: Дистрибуционный попап

specs:
  Базовые проверки:
    - params:
        exp_flags: distr_splashscreen_disable=1
        foreverdata: '3649741961'
    - do: почистить куки
    - do: получить выдачу по пустому запросу
    - assert: попап-блок дистрибуции появился на выдаче
    - assert: кнопка "Установить" ведёт на https://yabs.yandex.ru/...
    - do: кликнуть в кнопку "Нет, спасибо"
    - assert: попап скрылся

  Изменение разрешения экрана:
    - tags: no_assessors
    - params:
        exp_flags: distr_splashscreen_disable=1
        foreverdata: '3649741961'
    - do: почистить куки
    - do: получить выдачу по пустому запросу
    - do: развернуть браузер на весь экран
    - assert: попап-блок дистрибуции появился на выдаче
    - do: уменьшить ширину окна браузера до ширины основной поисковой выдачи
    - assert: попап-блок дистрибуции скрылся
    - do: развернуть браузер на весь экран
    - assert: попап-блок снова появился

  Выключение для неподдерживаемых продуктов дистрибуции (логин):
    - params:
        exp_flags: distr_splashscreen_disable=1
        foreverdata: '3880752476'
    - do: почистить куки
    - do: получить выдачу по пустому запросу
    - assert: попап дистрибуции отсутствует

  Выключение для неподдерживаемых типов дистрибуции (инлайн):
    - params:
        exp_flags: distr_splashscreen_disable=1
        foreverdata: '1762005792'
    - do: почистить куки
    - do: получить выдачу по пустому запросу
    - assert: попап дистрибуции отсутствует

  Выключение попапа под флагом:
    - params:
        exp_flags:
          - distr_popup_disable=1
        foreverdata: '3649741961'
    - do: почистить куки
    - do: получить выдачу по пустому запросу
    - assert: попап дистрибуции отсутствует

  Общее выключение попапов:
    - params:
        exp_flags:
          - hide-popups=1
        foreverdata: '3649741961'
    - do: почистить куки
    - do: получить выдачу по пустому запросу
    - assert: попап дистрибуции отсутствует

files:
  - features/desktop/distr-popup/DistrPopup@desktop.hermione.js

v-team: Distribution

tags:
  - distribution
  - popup
  - no_assessors # убрать после https://st.yandex-team.ru/SERPTEST-2384

tlds:
  - ru
