feature: Саджест
experiment: Длинный факт

specs:
  beforeEach:
    - do: получить выдачу по запросу "вк"
    - assert: получена выдача по указанному запросу
    - do: очистить поисковую стрелку
    - assert: |
        инпут активен
        саджест открыт
    - do: ввести в поисковую строку "когда вымерли динозавры"
    - assert: в саджесте присутствует длинный факт
  Внешний вид:
      - screenshot: пример внешнего вида [plain]
  Клик в текст:
    - do: кликнуть в текст факта
    - assert: |
        произошла перезагрузка с текстом факта
        получена выдача по указанному запросу
  Клик в гринурл:
    - do: кликнуть в тайтл и гринурл
    - assert: в новой вкладке открылся сайт по факту
  Клик в "Показать еще":
    - do: кликнуть в кнопку "Показать еще"
    - assert: |
        произошла перезагрузка с текстом факта
        получена выдача по указанному запросу
  Счетчики:
    Клик в гринурл:
      - do: кликнуть в тайтл и гринурл
      - tech:  |
          отправился счетчик саджеста, \
          поле path соответствует регулярному выражению /serp_ru_touch\.mouse\.p7\.nah_not_used\.click_by_mouse/, \
          в поле tpah_log в конце есть запись [nav,p7,<timestamp>,fact_source]
    Клик в "Показать еще":
      - do: кликнуть в кнопку "Показать еще"
      - tech: отправился счетчик саджеста, \
          поле path соответствует регулярному выражению /serp_ru_touch\.mouse\.p7\.nah_not_used\.click_by_mouse/, \
          в поле tpah_log в конце есть запись [phrase,p7,<timestamp>],[submit,p0,<timestamp>], \
          есть поле use_more=1

specs-integration:
  tags: no_assessors
  beforeEach:
    - do: получить выдачу по запросу "вк"
    - assert: получена выдача по указанному запросу
    - do: очистить поисковую стрелку
    - assert: |
        инпут активен
        саджест открыт
    - do: ввести в поисковую строку "александр"
    - assert: в саджесте присутствует длинный факт
  Клик в текст:
    - do: кликнуть в текст факта
    - assert: |
        произошла перезагрузка с текстом факта
        получена выдача по указанному запросу
  Клик в гринурл:
    - do: кликнуть в тайтл и гринурл
    - assert: в новой вкладке открылся сайт по факту
  Клик в "Показать еще":
    - do: кликнуть в кнопку "Показать еще"
    - assert: |
        произошла перезагрузка с текстом факта
        получена выдача по указанному запросу

files:
  - features/touch-phone/suggest/suggest-long-fact.hermione.js
  - features/touch-phone/suggest/suggest-long-fact.hermione.e2e.js

v-team: Suggest

qa-engineer:
  - etestova

manager:
  - eugeshko

tags:
  - suggest
  - input
  - fact

tlds: all

browsers:
  notFor:
    - searchapp-phone-group
