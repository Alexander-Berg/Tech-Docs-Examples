feature: Hotels / Колдунщик одной организации
type: Стандартный вид

import-labels:
  - features/companies/hotels/hotels@desktop.testpalm.yml

specs:
  Синхронизация значений формы без сабмита в 1орге справа:
    beforeEach:
      - do: получить выдачу по запросу "рэдиссон коллекшн москва"
      - assert: показался отельный 1орг справа
      - screenshot: внешний вид [geo-hotels-1org >> plain]
      - do: запомнить даты и количество гостей
      - do: изменить даты и количество гостей. Не нажимать кнопку "Показать"
    Не пробрасывается во вкладку Номера:
      - tags:
          - tabs
      - do: кликнуть в таб Номера
      - assert: открылась вкладка "Номера"
      - assert: в форме поиска номеров установлены старые значения (которые были до изменения)
    Не пробрасывается в попап:
      - tags:
          - popup
      - do: кликнуть в заголовок формы поиска номеров
      - assert: открылся отельный попап на вкладке "Номера"
      - assert: в форме поиска номеров установлены старые значения (которые были до изменения)
  Синхронизация значений формы после сабмита в 1орге справа:
    beforeEach:
      - do: получить выдачу по запросу "mriya resort spa крым"
      - assert: показался отельный 1орг справа
    Пробрасываются в форму на табе "номера" и урл запроса номеров:
      - tags:
          - submit
      - do: изменить даты
      - do: нажать "Показать"
      - assert: открылась вкладка "номера" в модальном окне
      - assert: поля формы синхронизированы
      - tech: выполнился запрос в /search/result с правильными параметрами ag_dynamic
    Цена оффера на выдаче меняется:
      - do: запомнить цену на кнопке первого оффера
      - do: кликнуть в заголовок 'Цены на номера'
      - assert: открылось модальное окно на табе 'Номера'
      - do: добавить одни сутки к дате выезда и нажать кнопку 'Выбрать номер'
      - assert: список предложений и цены обновились
      - do: запомнить цену первого оффера в попапе, закрыть попап
      - assert: на выдаче в правой колонке цена оффера равна цене в попапе

files:
  - features/companies/hotels/form/one-org-form-ag-sync@desktop.hermione.js

counter: /parallel/result/snippet/companies/travel_company/form/submit

v-team: KotTeam

tags:
  - skip_e2e_check
  - 1org
  - datasync
  - hotels-form
  - dates

tlds: none
