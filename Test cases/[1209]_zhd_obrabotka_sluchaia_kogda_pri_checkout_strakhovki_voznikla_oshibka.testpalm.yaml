feature: ЖД
type: Оплата
description: >-
  Находимся на странице подтверждения жд заказа для одного пассажира,
  **установить ФИО пассажира: "Кодтри Ошибкаим Выкупстраховки"**
specs:
  'ЖД: Обработка случая, когда при Checkout страховки возникла ошибка':
    - do: |-
        Перейти на покупку любого жд билета
        Ввести ФИО из описания
        Установить чекбокс страховки
        Нажать кнопку Ввести карту и оплатить
    - assert: >-
        * Через какое-то время появилось модальное окно c текстом "Не удалось
        купить страховой полис

        При покупке страхового полиса произошла ошибка" и двумя кнопками
        "Выбрать места заново" и "Продолжить без страховки"
    - do: Нажать на кнопку "Продолжить без страховки"
    - assert: >-
        Открылась форма оплаты (у асессоров сразу страница заказа - см ОР из
        следующего шага)
    - do: |-
        Ввести данные тестовой карты
        Нажать кнопку Оплатить
    - assert: '* Через какое-то время произошел переход на страницу хэппи пейдж'
    - do: Кликнуть "Подробнее о заказе"
    - assert: |-
        * Произошел переход на страницу заказа
        * Итоговая сумма без учета страховки
        * В расшифровке стоимости билетов нет пункта страховки
    - do: |-
        Создать еще один заказ с тем же ФИО, дойти до страницы подтверждения
        Выбрать чекбокс страховки
        Нажать кнопку Ввести карту и оплатить
    - assert: >-
        * Через какое-то время появилось модальное окно c текстом “Не удалось
        купить страховой полис

        При покупке страхового полиса произошла ошибка” и двумя кнопками
        “Выбрать места заново” и “Продолжить без страховки”
    - do: Нажать кнопку "Выбрать места заново"
    - assert: '* Произошел переход на страницу выбора мест'
    - do: Дойти до шага подтверждения
    - assert: '* Чекбокс страховки по умолчанию выключен'
manual: true
Функциональность: Покупка
Устройство:
  - Десктоп
  - Тач
Страница: Оплата
Сервис: ЖД
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Автор: shenfeld
