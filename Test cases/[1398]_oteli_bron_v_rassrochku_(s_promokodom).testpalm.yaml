feature: Отели
type: Бронирование
description: ''
specs:
  Отели. Бронь в рассрочку (с промокодом):
    - do: |-
        Залогиниться
        Через ТК создать офферы в отель Вега Измайлово (ID отеля 742) со следующими параметрами:
        2 взрослых, 1 ребенок (в поле Количество гостей указать "2-1")
        1 ночь (заезд не раньше чем через 4 дня)
        Выбрать оффер с бесплатной отменой, которая не оканчивается сегодня
    - assert: >-
        В блоке корзинки со стоимостью есть чекбоксы для оплаты в рассрочку и
        полностью

        В чекбоксе рассрочки есть указание, до какого числа и времени нужно внести доплату
        и ссылка "Подробнее", по клику на которую открывается попап/шторка с информацией о рассрочке
    - do: Выбрать чекбокс в рассрочку
    - assert: |-
        Чекбокс активировался
        Итоговая цена к оплате равна сумме рассрочки
    - do: >-
        В корзинке над рассрочками активировать чекбокс "У меня есть промокод" и
        ввести промокод SUCCESS

        Нажать Применить
    - assert: >-
        Чекбокс промокода и поле для ввода стали неактивными

        В чекбоксе предоплаты сумма для доплаты уменьшилась на сумму промокода
        (500р)

        Сама сумма рассрочки в чекбоксе и итоговая внизу не изменились

        Сумма в чекбоксе полной оплаты уменьшилась на сумму промокода (500р)
    - do: |-
        Заполнить валидными данными гостей и контактную инфу
        Кликнуть "Забронировать"
    - assert: >-
        Отображается лоадер создания заказа
        Далее происходит переход на страницу Happy Page
        В заголовке указано "Отель забронирован"
        Есть указание, сколько нужно доплатить и до какого числа и времени
        Сумма доплаты совпадает с суммой полной оплаты на бронировании (с учетом
        скидки), так как бронирование без предоплаты
  
    - do: Кликнуть по ссылке "Подробнее о заказе"
    - assert: >-
        В  этой же вкладке открылась страница заказа

        Есть инфа о предоплате "Предоплачено 0₽ из ХХХ ₽"

        Ниже указано, сколько нужно доплатить, до какого числа и времени и есть
        кнопка Доплатить

        Все суммы и даты с временем совпадают с инфой на бронировании
    - do: |-
        Пролистать ниже до блока стоимости отеля
        Кликнуть на раскрывашке
    - assert: >-
        В блоке указана общая стоимость заказа и есть разбивка цен за ночи и
        налоги + скидка (500р) - совпадают с инфой на брони

manual: true
Функциональность:
  - Рассрочки
  - Промокод
Устройство:
  - Тач
  - Десктоп
Страница: Бронирование
Сервис: Отели
Тестирование асессорами: Нет
Окружение:
  - Production
  - Testing
Tag: Smoke
Автор: iliasova
