feature: Авиа
type: Happy page
description: >-
  Как попасть на страницу бронирования аэрофлота:


  * В поиске авиа поискать по направлению, по которому летает аэрофлот
  (например, Москва - Екатеринбург, или направление, указанное в кейсе).

  * Выбрать в фильтре по авиакомпаниям Аэрофлот

  * Кликнуть по сниппету с предложением Аэрофлота (где есть приписка Продает
  авиакомпания).

  * На открывшейся странице кликнуть по кнопке Купить для аэрофлота. //
  произойдет переход на travel-test

  ![image](https://jing.yandex-team.ru/files/shenfeld/2020-12-18_14.23.50-7x9wt.png)

  * **Асессорам заменить в урле travel-test на travel.crowdtest** - должна
  открыться страница бронирования с формой ввода данных пассажиров
specs:
  'Авиа: карусели на happy page':
    - do: >-
        Перейти на страницу бронирования Аэрофлота как описано в Description,
        для направления Москва - Санкт-Петербург, только туда

        Ввести любые валидные данные пассажира

        Нажать Оплатить

        Заполнить форму оплаты данными тестовой карты: 5555 5555 5555 5599 12/24
        123 (асессоры пропускают)

        Нажать Оплатить
    - assert: >-
        - Появился лоадер

        - Через какое-то время произошел переход на страницу хэппи пейдж

        - Внизу страницы есть блок "Отели в Санкт-Петербурге на [ночь прилета]"

        - Отображается 5 отелей, для каждого есть фото, название, рейтинг (может
        не быть), цена ОТ, станция метро (только десктоп)

        - Есть кнопка "Все отели Санкт-Петербурга"

        Десктоп:
        https://jing.yandex-team.ru/files/shenfeld/2020-12-18_16.39.57-qatct.png

        Тач:
        https://jing.yandex-team.ru/files/shenfeld/2020-12-18_16.39.41-ls8uq.png
    - do: |-
        **Только десктоп**
        Пролистать карусель отелей до конца вправо
    - assert: |-
        - Отели листаются
        - Появляется стрелка "Назад"
        - В конце карточек дизейблится стрелка "Вперед"
        - На последней карточке блок с кнопкой "Все отели Санкт-Петербурга"
    - do: |-
        **Только десктоп**
        Пролистать карусель отелей до конца влево
    - assert: |-
        - Отели листаются
        - Появляется стрелка "Вперед"
        - В начале карточек дизейблится стрелка "Назад"
    - do: Нажать на любой отель
    - assert: |-
        - В новой вкладке открылась страница отеля для выбранного отеля
        - В урле есть параметр ytp_referer=avia_hp_hotelpage
    - do: |-
        Вернуться на вкладку с хэппи пейдж
        Нажать на кнопку "Все отели Санкт-Петербурга" (под списком отелей)
    - assert: |-
        - Произошел переход на страницу поиска отеля для Санкт-Петербурга
        - В урле есть параметр ytp_referer=avia_hp_hotelpage
    - do: >-
        **Только десктоп**

        Пролистать карусель до конца и нажать на кнопку "Все отели
        Санкт-Петербурга" на карточке
    - assert: >-
        - Произошел переход в новой вкладке на страницу поиска отеля для
        Санкт-Петербурга

        - В урле есть параметр ytp_referer=avia_hp_hotelpage
    - do: Аналогично повторить проверку для карусели с афишей на дни поездки
    - assert: >-
        - карусель нормально выглядит, все картинки и описание на месте

        - карусель листается

        - работают переходы по карточке афишы, в урле добавляются параметры
        utm_medium=happy-page&utm_source=yandex-travel

        - кнопка просмотра всех мероприятий работает, параметру в урле
        добавляются
    - do: Аналогично повторить проверку для карусели аудиогида
    - assert: |-
        - карусель нормально выглядит, все картинки и описание на месте
        - карусель листается
        - работают переходы по карточке афишы
        - кнопка просмотра всех гидов работает
manual: true
Устройство:
  - Тач
  - Десктоп
Страница: Happy page
Сервис: Авиа
Тестирование асессорами: Да
Окружение: Testing
Автор: shenfeld
