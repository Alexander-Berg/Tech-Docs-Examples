feature: Рубрика сервиса Я.Спорт

description: Рубрика - страница сервиса, на которой отображаются новости и другие релевантные материалы по конкретному виду спорта

specs-integration:
  должна открываться из Главной:
    - do: перейти по ссылке https://yandex.ru/sport
    - do: кликнуть на рубрику Футбол
    - assert: страница открылась

  содержит блок главных новостей и рекламу:
    - do: перейти по ссылке https://yandex.ru/sport/rubric/football
    - assert: отображается блок Главные новости
    - assert: отображается реклама под этим блоком

  содержит карточки с картинкой:
    - do: перейти по ссылке https://yandex.ru/sport/rubric/football
    - assert: отображается картинка на первой карточке

  позволяет перейти в cюжет:
    - tags:
      - backend_sport
    - do: открыть сервис Я.Спорт на странице любой рубрики (Кроме "Главное")
    - do: проскроллить рубрику ниже блока топ-5, найти карточки с фото
    - assert: |
        некоторые карточки содержат большое фото под заголовком и аннотацией,
        внизу расположены метка издательства и время публикации
        длинные заголовок и аннотация обрезаются троеточием,
        аннотация не содержит более 3х строк,
        скрин https://jing.yandex-team.ru/files/vasekerka/2022-02-01_12-57-15.png
    - do: тапнуть по большому фото в карточке
    - assert: |
        происходит переход на страницу сюжета в той же вкладке,
        сюжет соответствует карточке

  выделяет активную рубрику в рубрикаторе:
    - do: перейти по ссылке https://yandex.ru/sport/rubric/football
    - assert: активная рубрика выделена красным цветом

  содержит рекламу:
    - tags:
      - backend_sport
    - do: открыть сервис Я.Спорт на странице рубрики 'Главное'
    - do: подождать, пока страница полностью загрузится
    - do: проскроллить страницу ниже блока "Главные новости"
    - assert: |
        под блоком "Главные новости" отображается рекламный блок,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-06-03_13-23-30.png
    - do: поскроллить страницу вниз
    - assert: в ленте присутствуют рекламные блоки
    - do: перейти в любую другую рубрику и дождаться загрузки страницы
    - do: поскроллить страницу вниз
    - assert: |
        под блоком "Главные новости" отображается рекламный блок,
        в ленте присутствуют рекламные блоки

specs:

  позволяет перейти в cюжет без фото [manual]:
    - reasonNotToAuto:
      - Не получается отловить сюжет без фото
    - tags:
      - backend_sport
    - do: открыть сервис Я.Спорт на странице любой рубрики (Кроме "Главное")
    - do: проскроллить рубрику ниже блока топ-5, найти карточки без фото (обычно их легко найти в рубриках "Киберспорт" или "Теннис")
    - assert: |
        некоторые карточки не содержат фото,
        длинные заголовок и аннотация обрезаются троеточием,
        аннотация не содержит более 3х строк,
        внизу расположены метка издательства и время публикации,
        скрин https://jing.yandex-team.ru/files/kossakovskaya/2022-06-03_13-05-52.png
    - do: тапнуть по аннотации в карточке
    - assert: |
        происходит переход на страницу сюжета в той же вкладке,
        сюжет соответствует карточке
    - do: вернуться назад, проскролить к сюжету без фото и тапнуть по оглавлению в карточке
    - assert: |
        происходит переход на страницу сюжета в той же вкладке,
        сюжет соответствует карточке
    - do: вернуться назад, проскролить к сюжету без фото и тапнуть по метке издательства и времени публикации
    - assert: |
        происходит переход на страницу сюжета в той же вкладке,
        сюжет соответствует карточке

  позволяет скроллить рубрикатор:
    - do: перевести устройство в портретную ориентацию
    - do: открыть сервис Я.Спорт на странице любой рубрики (кроме рубрики "Трансляции")
    - do: проскроллить рубрикатор
    - assert: рубрикатор скроллится

  позволяет переходить из одной рубрики в другую [manual]:
    - reasonNotToAuto:
      - Нет возможности доскроллить до рубрики так, чтобы она была наполовину видна
    - do: проскроллить рубрикатор так, чтобы название одной из рубрик было показано частично
    - do: тапнуть на эту рубрику
    - assert: |
        отображается страница выбранной рубрики,
        название рубрики в рубрикаторе выделено красным цветом,
        название рубрики показано полностью

  корректно отображается в ландшафтной ориентации:
    - do: просклоррить рубрикатор вправо до конца
    - do: перевести устройство в ландшафтную ориентацию
    - assert: |
        рубрикатор растянут по всей ширине экрана,
        названия рубрик отображаются без больших разрывов между друг другом,
        нет белой полосы справа и слева от рубрик,
        рубрики в рубрикаторе можно скроллить

  имеет блок Главные новости:
    - tags:
      - backend_sport
    - do: открыть сервис Я.Спорт на странице рубрики Главное
    - assert: |
        на странице есть блок "Главные новости",
        блок содержит от 1 до 5 карточек,
        карточки содержат заголовок, фото, а также могут иметь аннотацию (блок текста, который не виделен жирным шрифтом),
        внизу карточки расположена метка издательства и время публикации,
        скрин, как выглядит блок https://jing.yandex-team.ru/files/kossakovskaya/2021-10-22_15-51-26.png

  позволяет перейти на страницу сюжета с карточки из Главного:
    - tags: notforPP
    - do: открыть сервис Я.Спорт на странице рубрики Главное
    - do: подождать, пока страница полностью загрузится
    - assert: на странице отображается блок "Главные новости", который содержит карточки
    - do: тапнуть по заголовку любой карточки в блоке "Главные новости"
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет соответствует карточке, с которой произошёл переход
    - do: вернуться назад на страницу рубрики
    - do: тапнуть по аннотации (блок текста, который не виделен жирным шрифтом) любой карточки в блоке "Главные новости"
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет соответствует карточке, с которой произошёл переход
    - do: вернуться назад на странцу рубрики
    - do: тапнуть по картинке любой карточки в блоке "Главные новости"
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет соответствует карточке, с которой произошёл переход

  позволяет перейти на страницу сюжета с карточки из "Главного" в ПП:
    - tags: forPP
    - do: открыть сервис Я.Спорт тапом по иконке в бендере ПП
    - do: открыть рубрику 'Главное'
    - do: подождать, пока лента полностью загрузится
    - assert: отображается блок "Главные новости", который содержит карточки
    - do: тапнуть по заголовку любой карточки в блоке "Главные новости"
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет открыт во вкладке приложения (не в вертикали),
        сюжет соответствует карточке, с которой произошёл переход
    - do: вернуться назад на страницу рубрики
    - do: тапнуть по аннотации (блок текста, который не виделен жирным шрифтом) любой карточки в блоке "Главные новости"
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет открыт во вкладке приложения (не в вертикали),
        сюжет соответствует карточке, с которой произошёл переход
    - do: вернуться назад на странцу рубрики
    - do: тапнуть по картинке любой карточки в блоке "Главные новости"
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет открыт во вкладке приложения (не в вертикали),
        сюжет соответствует карточке, с которой произошёл переход

  содержит карточки с новостями:
    - do: открыть сервис Я.Спорт на странице рубрики Главное
    - do: подождать, пока страница полностью загрузится
    - do: проскроллить страницу ниже блока "Главные новости"
    - assert: |
        лента содержит карточки с новостями спорта,
        карточки имеют заголовок и аннотацию (блок текста, который не виделен жирным шрифтом), а также могут иметь фото или видео
        внизу карточки расположена метка издательства и время публикации,
        скрин, как выглядит карточка https://jing.yandex-team.ru/files/kossakovskaya/2021-10-22_15-52-15.png

  позволяет перейти на страницу сюжета с карточки из ленты:
    - tags: 
      - notforPP
      - backend_sport
    - do: открыть сервис Я.Спорт на странице рубрики Главное
    - do: подождать, пока страница полностью загрузится
    - assert: под блоком "Главные новости" отображаются карточки новостей
    - do: тапнуть по заголовку любой карточки в ленте
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет соответствует карточке, с которой произошёл переход
    - do: вернуться назад на страницу рубрики
    - do: тапнуть по аннотации (блок текста, который не виделен жирным шрифтом) любой карточки в ленте
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет соответствует карточке, с которой произошёл переход
    - do: вернуться назад на странцу рубрики
    - do: тапнуть по картинке любой карточки в ленте
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет соответствует карточке, с которой произошёл переход,
    - do: вернуться назад на страницу рубрики
    - do: найти в ленте карточку без фото (проще всего найти в рубрике "Киберспорт")
    - do: тапнуть по аннотации (блок текста, который не виделен жирным шрифтом) карточки
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет соответствует карточке, с которой произошёл переход

  позволяет перейти на страницу сюжета с карточки из ленты в ПП:
    - tags: 
      - forPP
      - backend_sport
    - do: открыть сервис Я.Спорт тапом по иконке в бендере ПП
    - do: открыть рубрику Главное
    - do: подождать, пока лента полностью загрузится
    - assert: под блоком "Главные новости" отображаются карточки новостей
    - do: тапнуть по заголовку любой карточки в ленте
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет открыт во вкладке приложения (не в вертикали),
        сюжет соответствует карточке, с которой произошёл переход
    - do: вернуться назад на страницу рубрики
    - do: тапнуть по аннотации (блок текста, который не виделен жирным шрифтом) любой карточки в ленте
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет открыт во вкладке приложения (не в вертикали),
        сюжет соответствует карточке, с которой произошёл переход
    - do: вернуться назад на странцу рубрики
    - do: тапнуть по картинке любой карточки в ленте
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет открыт во вкладке приложения (не в вертикали),
        сюжет соответствует карточке, с которой произошёл переход
    - do: вернуться назад на страницу рубрики
    - do: найти в ленте карточку без фото (проще всего найти в рубрике "Киберспорт")
    - do: тапнуть по аннотации (блок текста, который не виделен жирным шрифтом) карточки
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет открыт во вкладке приложения (не в вертикали),
        сюжет соответствует карточке, с которой произошёл переход

  загружает новые карточки при скролле:
    - tags:
      - backend_sport
    - do: открыть сервис Я.Спорт на странице рубрики Главное, дождаться загрузки карточек первого экрана
    - do: проскроллить страницу ниже блока "Главные новости"
    - assert: |
        лента содержит карточки с новостями спорта,
        карточки имеют заголовок и аннотацию (блок текста, который не виделен жирным шрифтом), а также могут иметь фото или видео
        внизу карточки расположена метка издательства и время публикации,
        скрин, как выглядит карточка https://jing.yandex-team.ru/files/kossakovskaya/2021-10-22_15-52-15.png
    - do: скроллить страницу вниз, пока не закончатся карточки
    - assert: |
        под карточками ненадолго отображается спиннер,
        далее загружается новая порция карточек,
        карточки отображаются корректно
    - do: перевести устройство в альбомную ориентацию
    - do: скроллить страницу вниз, пока не закончатся карточки
    - assert: |
        под карточками отображается спиннер,
        загружается новая пачка карточек,
        карточки отображаются корректно

  загружает новые карточки при скролле в landscape ориентации:
    - do: перевести устройство в ландшафтную ориентацию
    - do: скроллить страницу вниз, пока не закончатся карточки
    - assert: |
        под карточками отображается спиннер,
        далее загружается новая порция карточек,
        карточки отображаются корректно (нет проблем с вёрсткой)

  загружает новые карточки после восстановления соединения [manual]:
    - tags:
      - backend_sport
    - reasonNotToAuto:
      - не удалось автоматизировать, тк выполнение команды setNetworkConnection в браузерах заканчивается ошибкой 'unknown error - network connection must be enabled'/'operation is unsupported on Android'
    - do: открыть сервис Я.Спорт на странице рубрики Главное, дождаться загрузки карточек первого экрана
    - do: скроллить страницу вниз, пока не закончатся карточки
    - assert: |
        под карточками отображается спиннер,
        далее загружается новая порция карточек
    - do: дождаться загрузки новой порции карточек и отключить интернет на устройстве
    - do: проскроллить вниз до конца порции
    - assert: |
        новые карточки не загружаются,
        в конце ленты отображается спиннер
    - do: включить интернет на устройстве
    - assert: |
        спиннер пропадает,
        загружается новая порция карточек,
        карточки отображаются корректно (нет проблем с вёрсткой)

  содержит подрубрикатор спортивных турниров:
    - params:
        flags:
          - yxneo_sport_phone_rubric_tournaments=1
    - do: открыть сервис Я.Спорт на странице рубрики во внутренней сети по ссылке https://yandex.ru/sport/rubric/football?flags=yxneo_sport_phone_rubric_tournaments%3D1;yxnews_sport_actual_competitions_enabled=1
    - assert: отображается подрубрикатор с турнирами по виду спорта https://jing.yandex-team.ru/files/umansai5/2022-03-22_14-11-04.png
    - do: кликнуть по табу "Все турниры"
    - assert: откроется модальное окно со списком всех турниров
    - assert: внешний вид соответсвует скриншоту https://jing.yandex-team.ru/files/umansai5/2022-03-22_14-14-27.png

  содержит заголовок перед лентой новостей и футер [manual]:
    - reasonNotToAuto:
      - Нет возможности доскроллить до футера в тесте, тк нет рубрики без автоподгрузки, а скроллить все порции долго
    - do: открыть сервис Я.Спорт на странице любой рубрики, например, Киберспорт
    - do: проскроллить страницу выбранной рубрики до футера
    - assert: |
        лента новостей сколлится, новые новостные карточки подгружаются быстро,
        отсутствует вечный спиннер,
        футер внизу страницы отображается

  позволяет перейти на турбо-страницу:
    - tags:
      - backend_sport
    - do: открыть сервис Я.Спорт на странице рубрики Главное
    - do: подождать, пока страница полностью загрузится
    - assert: |
        под матч-центром располагается блок 'Главные новости',
        'Главные новости' содержат несколько карточек (от 1 до 5),
        внизу карточки расположены метка издательства и время публикации
    - do: тапнуть по заголовку любой карточки в блоке 'Главные новости'
    - assert: |
        происходит переход на страницу сюжета,
        сюжет соответствует карточке, с которой произошел переход
    - do: перейти на турбостраницу тапом по иконке источника над заголовком в сюжете
    - assert: |
        происходит переход на турбо-страницу издательства в новой вкладке (у некоторых издательств может открыться своя страница источника),
        турбо-страница соответствует карточке

#  позволяет открыть чат с комментариями [manual]:
#    - tags: notforPP
#    - assert: писать комментарии к карточкам ЗАПРЕЩЕНО
#    - do: открыть сервис Я.Спорт на странице любой рубрики, кроме рубрики "Матч-центр"
#    - do: подождать, пока страница полностью загрузится
#    - assert: |
#        на странице есть блок Главные новости,
#        карточки в блоке имеют иконку комментариев
#    - do: тапнуть на иконку комментариев
#    - assert: |
#        произошёл переход на страницу сюжета,
#        раскрылась шторка комментариев
#    - do: тапнуть по браузерной или аппаратной кнопке "назад"
#    - assert: |
#        шторка комментариев закрыта,
#        произошёл переход на страницу сюжета, из которого ранее открывали комментарии
#    - do: вернуться в рубрику "Главное"
#    - do: проскроллить страницу рубрики ниже блока "Главные новости"
#    - assert: |
#        в ленте есть карточки спортивных новостей,
#        карточки имеют иконку комментариев
#    - do: тапнуть на иконку комментариев
#    - assert: |
#        произошёл переход на страницу сюжета,
#        раскрылась шторка комментариев
#    - do: тапнуть по браузерной или аппаратной кнопке "назад"
#    - assert: |
#        шторка комментариев закрыта,
#        произошёл переход на страницу сюжета, из которого ранее открывали комментарии
#
#  позволяет открыть чат с комментариями в ПП [manual]:
#    - tags: forPP
#    - assert: писать комментарии к карточкам ЗАПРЕЩЕНО
#    - do: открыть сервис Я.Спорт тапом по иконке в бендере ПП
#    - do: открыть любую рубрику
#    - do: подождать, пока лента полностью загрузится
#    - assert: |
#        на странице есть блок Главные новости,
#        карточки в блоке имеют иконку комментариев
#    - do: тапнуть на иконку комментариев
#    - assert: |
#        произошёл переход на страницу сюжета,
#        сюжет открыт во вкладке приложения (не в вертикали),
#        раскрылась шторка комментариев
#    - do: тапнуть по браузерной или аппаратной кнопке "назад"
#    - assert: |
#        шторка комментариев закрыта,
#        произошёл переход на страницу сюжета, из которого ранее открывали комментарии
#    - do: проскроллить страницу рубрики ниже блока "Главные новости"
#    - assert: |
#        в ленте есть карточки спортивных новостей,
#        карточки имеют иконку комментариев
#    - do: тапнуть на иконку комментариев
#    - assert: |
#        произошёл переход на страницу сюжета,
#        сюжет открыт во вкладке приложения (не в вертикали),
#        раскрылась шторка комментариев
#    - do: тапнуть по браузерной или аппаратной кнопке "назад"
#    - assert: |
#        шторка комментариев закрыта,
#        произошёл переход на страницу сюжета, из которого ранее открывали комментарии
#
#  может содержать видео, и его можно запустить [manual]:
#    - do: открыть сервис Я.Спорт на странице рубрики Главное
#    - do: подождать, пока страница полностью загрузится
#    - assert: страница загрузилась
#    - do: скроллить страницу, пока на экране не отобразится карточка с видео
#    - assert: внешний вид карточки с видео https://jing.yandex-team.ru/files/terenandrevna/02122019video.png
#    - assert: (Если карточки с видео нет - это нормальное поведение. Их мало в ленте. Кейс в этом случае скипнуть)
#    - do: тапнуть по видео
#    - assert: |
#        видео запустилось,
#        (на некоторых устройствах необходимо тапнуть дважды)

# закометила, так как пока карусели видео проверяют в ФНЛ, на главной их нет
#  может содержать карусель видео [manual]:
#    - do: открыть сервис Я.Спорт на странице рубрики Главное
#    - do: проскроллить страницу ниже блока 'Главные новости'
#    - assert: |
#        в ленте отображаются карусели с видео,
#        названия карусели корректны
#    - do: поскроллить любую карусель вправо-влево
#    - assert: |
#        карусель скроллится,
#        названия матчей корректно обрезаются многоточием
#    - do: тапнуть по любому видео
#    - assert: |
#        в отдельной вкладке открывается видео на сервисе Я.Эфир или другом спортивном источнике
#    - do: перейти в рубрику Футбол
#    - do: проскроллить страницу ниже блока 'Главные новости'
#    - assert: |
#        в ленте отображаются карусели с видео,
#        названия карусели корректны
#    - do: поскроллить любую карусель вправо-влево
#    - assert: |
#        карусель скроллится,
#        если названия матчей не помещается в 2 строки, названия корректно обрезаются многоточием
#    - do: тапнуть по любому видео
#    - assert: |
#        в отдельной вкладке открывается видео на сервисе Я.Эфир или другом спортивном источнике

  позволяет открыть live-страницу Кинопоиска из рубрики:
    - do: открыть сервис Я.Спорт
    - assert: в рубрикаторе есть присутствует рубрика "Трансляции" с иконкой Я.Плюс
    - do: кликнуть на рубрику "Трансляции"
    - assert: в этой же вкладке открывается live-страница Кинопоиска

  позволяет открыть live-страницу Кинопоиска кликом на баннер:
    - do: открыть сервис Я.Спорт
    - assert: после топ-5 сюжет отображается баннер "Футбол и хоккей в прямом эфире по подписке Яндекс Плюс"
    - do: кликнуть на баннер
    - assert: в этой же вкладке открывается live-страница Кинопоиска

files:
  - features/sport/rubric/rubric.phone.hermione.e2e.js
  - features/sport/rubric/rubric.phone.hermione.js

tags:
  - sport-neo
  - rubric

manager: mrwhite

qa-engineer: kudyukova

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
