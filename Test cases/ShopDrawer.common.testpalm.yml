feature: ProductPage

specs:
  Точки входа в шторку магазина:
    Открытие из списка оферов:
      - do: открыть https://yandex.ru/products/product/868731267/sku/101223279916?exp_flags=sku_offers_ugc_enabled=true;shop_info_page;PRODUCTS_enable_reviews_offers=1
      - assert: |
          открылась страница товара
          на странице есть список офферов
      - screenshot: внешний вид [plain]
      - do: кликнуть на лейбл с рейтингом
      - assert: открылась шторка магазина
      - tech: сработал счетчик path="$page.$main.card.shopList.listControls.shopItem.button-reviews"
    Текстовый вид:
      - do: открыть https://yandex.ru/products/product/868731267/sku/101223279916?exp_flags=sku_offers_ugc_enabled=true;PRODUCTS_enable_shop_reviews_redesign=text;PRODUCTS_enable_reviews_offers=1
      - assert: |
          открылась страница товара
          на странице есть список офферов
      - screenshot: внешний вид [plain]
    Кнопочный вид:
      - do: открыть https://yandex.ru/products/product/868731267/sku/101223279916?exp_flags=sku_offers_ugc_enabled=true;PRODUCTS_enable_shop_reviews_redesign=button;PRODUCTS_enable_reviews_offers=1
      - assert: |
          открылась страница товара
          на странице есть список офферов
      - screenshot: внешний вид [plain]
  Шторка магазина:
    beforeEach:
      - do: открыть https://yandex.ru/products/product/868731267/sku/101223279916?exp_flags=sku_offers_ugc_enabled=true;shop_info_page;PRODUCTS_enable_reviews_offers=1
      - assert: |
          открылась страница товара
          на странице есть список офферов
      - do: кликнуть на лейбл с рейтингом
      - assert: открылась шторка магазина
    Магазин проверен Яндексом:
      - do: кликнуть на ссылку "Магазин проверен Яндексом"
      - assert: открылась шторка с информацией про верификацию магазина
      - screenshot: внешний вид [plain]
      - tech: сработал счетчик path="$page.$main.card.shopList.drawer-shop.shop-card.section.list-item"
    Пожаловаться:
      - do: кликнуть на ссылку "Пожаловаться"
      - assert: открылась форма фидбека в новой вкладке
    Закрытие шторки:
      - do: кликнуть на кресит в шторке
      - assett: шторка магазина закрылась
      - tech: сработал счетчик path="$page.$main.card.shopList.drawer-shop.button-close"
    Раскрытие отзывов:
      - do: кликнуть на "Читать далее" в первом длинном отзыве
      - assert: |
          открылся полный текст отзыва,
          у отзыва появилась ссылка "Скрыть"
      - tech: сработал счетчик path="$page.$main.card.shopList.drawer-shop.section.reviews.review.button-expand"
      - do: кликнуть на "Скрыть"
      - assert: |
          полный текст отзыва скрылся,
          появилась ссылка "Скрыть"
      - tech: сработал счетчик path="$page.$main.card.shopList.drawer-shop.section.reviews.review.button-collapse"
  Рейтинг магазина:
    - do: открыть https://yandex.ru/products/product/868731267/sku/101223279916?/products/product/868731267/sku/101223279916?exp_flags=sku_offers_ugc_enabled=true;PRODUCTS_enable_shop_rating=1
    - assert: |
        открылась страница товара
        на странице есть список офферов
    - screenshot: внешний вид [plain]
  Изменение дефолтной сортировки отзывов:
    - do: открыть https://yandex.ru/products/product/1414986413/sku/101648804078?no-tests=1&exp_flags=sku_offers_ugc_enabled=true;shop_info_page;PRODUCTS_enable_reviews_offers=1;PRODUCTS_shop_reviews_sorting=by_time
    - assert: |
        открылась страница товара
        на странице есть список офферов
    - do: кликнуть на лейбл с рейтингом
    - assert: |
        открылась шторка магазина
        загрузились отзывы с сортировкой по новизне

v-team: goods

files:
  - src/pages/ProductPage/tests/ShopDrawer/ShopDrawer.common.hermione.ts
