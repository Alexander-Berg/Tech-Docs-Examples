feature: Секреты
type: Страница ресурсов сервиса

specs:
  beforeEach:
    - do: залогиниться под пользователем robot-abc-002

  Удаление и пересоздание секрета: 
    - do: открыть форму редактирования ресурса "TVM-приложение" в сервисе "autotest-contacts" (/services/autotest-contacts/resources/?search=autotest-secrets&view=consuming&layout=cards&show-resource=49107360)
    - screenshot: ресурс находится в статусе "Выдан"; в верхней части формы есть кнопки "Пересоздать секрет", "Восстановить секрет", "Удалить старый секрет"; в полях "client_secret" и "old_client_secret" есть значения со звёздочками [modal-content]
    - do: кликнуть на кнопку "Удалить старый секрет"
    - screenshot: значение напротив поля "old_client_secret" удалилось, вместо него есть надпись "(пусто)" [old-secret-deleted]
    - do: кликнуть на кнопку "Пересоздать секрет"
    - screenshot: значение, которое было в поле "client_secret", перенеслось в поле "old_client_secret"; в поле "client_secret" появилось новое значение; значение в поле "version_uuid" также изменилось [new-secret-created]

files:
  - test/features/desktop/resources/manage-secrets.hermione.js

priority: normal

tags:
  - reviewed
  - no_assessors
