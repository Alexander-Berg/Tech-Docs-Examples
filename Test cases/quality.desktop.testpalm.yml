feature: Страница "Другие параметры"

description: В кейсах описываются компоненты и общий вид элементов на странице других показателей.

specs:
  содержит описание страницы:
    - do: открыть страницу "Другие параметры" https://partner-tst.news.yandex.ru/v2/quality?userid=521917854&agencyid=1310
    - assert: |
        страница содержит оглавление - "Другие параметры",
        под оглавлением содержится описание страницы

  показывает заглушку вместо графика при отсутствии данных:
    - do: открыть страницу "Другие параметры" https://partner-tst.news.yandex.ru/v2/quality?userid=521917854&agencyid=1310
    - assert: |
        на странице есть график "Избранное и нежелательное",
        по умолчанию в фильтре выбран последний месяц
    - do: выбрать в фильтре период 15 февраля - 25 февраля 
    - assert: график не строится, показана заглушка "Данные отсутствуют"

  содержит графики и тултипы-подсказки возле каждого графика:
    - do: открыть страницу "Другие параметры" https://partner-tst.news.yandex.ru/v2/quality?userid=521917854&agencyid=1310
    - assert: |
        ниже описания расположены друг под другом четыре графика - "Избранное и нежелательное", "Видео" (может не быть), "Дубликаты", "Заблокированные материалы", 
        справа от каждого названия графика содержится знак вопроса
    - do: кликнуть на каждый знак вопрос
    - assert: |
        по клику возле названия каждого графика появляется тултип-подсказка,
        внешний вид  https://jing.yandex-team.ru/files/nightsonne/2022-03-15_17-26-59.png , 
        https://jing.yandex-team.ru/files/nightsonne/2022-03-15_17-27-35.png ,
        https://jing.yandex-team.ru/files/nightsonne/2022-03-15_17-28-00.png

  позволяет отфильтровать период для построения графика:
    - do: открыть страницу "Другие параметры" https://partner-tst.news.yandex.ru/v2/quality?userid=521917854&agencyid=1310
    - assert: |
        на странице есть график "Дубликаты",
        на графике есть значения для дубликатов и замьюченная кнопка "Всего материалов"
        по умолчанию в фильтре выбран последний месяц (например, 15 февраля - 15 марта)
    - do: кликнуть на фильтр
    - assert: появился поп-ап с календарем 
    - do: кликнуть в любое место на странице за пределами поп-апа
    - assert: поп-ап с календарем скрылся
    - do: кликнуть на фильтр           
    - do: выбрать в фильтре период 26 февраля - 10 марта
    - do: кликнуть кнопку "Применить"
    - assert: |
        график перестроился,
        в фильтре отображаются выбранные значения

  позволяет сбросить фильтр:
    - do: открыть страницу "Другие параметры" https://partner-tst.news.yandex.ru/v2/quality?userid=521917854&agencyid=1310
    - assert: |
        на странице есть график "Дубликаты",
        на графике есть значения для дубликатов и замьюченная кнопка "Всего материалов"
        по умолчанию в фильтре выбран последний месяц (например, 15 февраля - 15 марта)
    - do: кликнуть на крестик в поле фильтра
    - assert: |
        фильтр обнуляется,
        фильтр называется "Фильтр по дате", значения дат не отображаются,
        график перестроился и показывает количество дубликатов со 2 августа,
    - do: кликнуть на фильтр
    - assert: |
        появился поп-ап с календарем,
        в поп-апе не выбраны даты,
        кнопка "Применить" не активна

  позволяет отобразить график со значением "Всего материалов":
    - do: открыть страницу "Другие параметры" https://partner-tst.news.yandex.ru/v2/quality?userid=521917854&agencyid=1310
    - assert: |
        на странице есть график "Заблокированные материалы",
        на графике есть значения для материалов и замьюченная кнопка "Всего материалов"
        по умолчанию в фильтре выбран последний месяц (например, 15 февраля - 15 марта)
    - do: кликнуть на фильтр
    - assert: появился поп-ап с календарем      
    - do: выбрать в фильтре период 26 февраля - 10 марта
    - do: кликнуть кнопку "Применить"
    - assert: |
        график перестроился,
        в фильтре отображаются выбранные значения
    - do: кликнуть на кнопку "Всего материалов"
    - assert: появляется второй график "Всего материалов"

  позволяет перейти в ленту:
    - do: открыть страницу "Другие параметры" https://partner-tst.news.yandex.ru/v2/quality?userid=521917854&agencyid=1310
    - assert: на странице есть графики "Дубликаты" и "Заблокированные материалы",
    - do: навести курсор мыши на заголовок "Дубликаты"
    - assert: по ховеру заголовок выделен красным   
    - do: кликнуть на заголовок "Дубликаты"
    - assert: |
        в той же вкладке открывается страница ленты с фильтром по дубликатам,
        выбранный фильтр по периоду сохраняется и на странице ленты
    - do: вернуться на страницу "Статистика. Другие параметры" кликом по кнопке "Назад"
    - do: кликнуть на заголовок "Заблокированные материалы"
    - assert: |
        в той же вкладке открывается страница ленты с фильтром по заблокированным документам,
        выбранный фильтр по периоду сохраняется и на странице ленты

files:
  - features/news-partners/quality/quality.desktop.hermione.js

qa-engineer: nightsonne

manager: halilu

tags:
  - news-partners

tlds:
  - ru