feature: Добавление в команду

specs:
  beforeEach:
    - tech: залогиниться под пользователем robot-internal-003
    - do: открыть страницу сервиса "autotest-add-departments" (/services/autotest-add-departments)
    - do: (PREPARE) кликнуть на иконку карандашика рядом с надписью "Управляющие" 
    - screenshot: (PREPARE) карандашик рядом с надписью "Управляющие" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-05-14%2013-55-25.png]
    - do: (PREPARE) в модалке "Редактирование управляющих" в поле "Добавить сотрудника" ввести свои имя и фамилию 
    - do: (PREPARE) под полем появился выпадающий список вариантов 
    - do: (PREPARE) выбрать в выпадающем списке себя 
    - assert: (PREPARE) в блоке "Управляющие" появился выбранный сотрудник 
    - do: (PREPARE) кликнуть на кнопку "Сохранить"
    - screenshot: на странице сервиса под его названием есть надпись "Команда +" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-05-14%2013-56-17.png] 
    - do: нажать на плюс рядом с надписью "Команда"
    - assert: появилась форма "Добавление новых участников"
  
  afterEach:
      - do: нажать кнопку "Добавить"
      - assert: |
              форма добавления ролей исчезла
              под кнопкой добавления участников в команду сервиса появилась кнопка "Внешние консультанты Группа асессоров-тестировщиков в Казахстане (0)"
      - screenshot: добавленный департамент [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-05-14%2014-20-20.png]
      - do: (PREPARE) кликнуть на иконку корзины рядом с кнопкой
      - assert: (PREPARE) кнопка "Внешние консультанты Группа асессоров-тестировщиков в Казахстане (0)" исчезла со страницы


  Положительные:
    1. Добавление нового департамента с предложенной ролью (до даты):
      - automation: ABC-9940
      - do: в поле ввода "Добавить сотрудника или департамент" ввести "Внешние консультанты Группа асессоров-тестировщиков в Казахстане"
      - assert: под полем ввода появился выпадающий список с вариантом "Департамент Внешние консультанты Группа асессоров-тестировщиков в Казахстане"
      - do: кликнуть по варианту "Департамент Внешние консультанты Группа асессоров-тестировщиков в Казахстане
      - assert: |
              в форме появился блок "Роли (1)"
              рубильник срока по умолчанию имеет значение "Бессрочно"
              указан департамент "Внешние консультанты Группа асессоров-тестировщиков в Казахстане"
              роль для группы по умолчанию не выбрана
      - screenshot: внешний вид формы добавления департамента в сервис [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-05-19%2008-06-30.png]
      - do: перевести рубильник срока в значение "До даты"
      - assert: справа от рубильника появилась кнопка "Выберите дату"
      - do: кликнуть по кнопке "Выберите дату"
      - assert: появился календарь с обведённым красной рамкой сегодняшним числом
      - do: кликнуть в календаре на завтрашнюю дату
      - assert: |
              календарь скрылся
              на кнопке "Выберите дату" написана выбранная дата в формате "ДД мес ГГГГ"
      - do: ввести в поле "Выберите роль для группы" название роли "Консультант"
      - assert: появился выпадающий список со сгруппированными ролями, в названии которых есть слово "Консультант"
      - do: кликнуть на вариант "Консультант" в группе "Администрирование" 
      - assert: |
              выпадающий список с ролями скрылся 
              поле "Выберите роль для группы" заполнено значением "Консультант"
      - screenshot: форма добавления роли для департамента с участниками до даты [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-05-19%2008-07-17.png]

    2. Добавление нового департамента (на срок):
      - automation: ABC-9940
      - do: в поле ввода "Добавить сотрудника или департамент" ввести "Внешние консультанты"
      - assert: под полем ввода появился выпадающий список, в котором есть департамент "Департамент Внешние консультанты Группа асессоров-тестировщиков в Казахстане"
      - do: кликнуть по варианту "Департамент Внешние консультанты Группа асессоров-тестировщиков в Казахстане"
      - assert: |
              в форме появился блок "Роли (1)"
              рубильник срока по умолчанию имеет значение "Бессрочно"
              указан департамент "Внешние консультанты Группа асессоров-тестировщиков в Казахстане"
              роль для группы по умолчанию не выбрана
      - screenshot: внешний вид формы добавления департамента в сервис [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-05-19%2008-08-38.png]
      - do: перевести рубильник срока в значение "Со сроком"
      - assert: справа от рубильника появилось поле "Дней"
      - do: ввести в поле "Дней" значение 7
      - do: ввести в поле "Выберите роль для группы" название роли "конс"
      - assert: появился выпадающий список со сгруппированными ролями, в названии которых есть "конс"
      - do: кликнуть на вариант "Консультант" в группе "Администрирование" 
      - assert: |
              выпадающий список с ролями скрылся
              поле "Выберите роль для группы" заполнено значением "Консультант"
      - screenshot: форма добавления роли для департамента с участниками с полными правами на срок [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-05-19%2008-09-16.png]

files: []

priority: blocker

tags:
  - reviewed
