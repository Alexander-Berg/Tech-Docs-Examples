feature: Видео-плеер

description: Кейсы для проверки функциональностей НЕ новостей, а видео-плеера

specs:
  beforeEach:
    - do: открыть сервис Яндекс.Новости (Обратите внимание! В данном кейсе не важна верстка рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в самом сервисе что-то отображается не так!)
    - do: В IE11 вместо видео находится заглушка (видео не воспроизводится) - это НЕ баг, заводить баг не нужно!
    - do: Обратите внимание! Если вы находитесь не в РФ, видео у вас может не воспроизводится - это ок, пропустите шаги, которые вы не можете выполнить

  aliases:
    &goTo 
    - do: перейти в любой нетраурный сюжет (есть реклама) с видео
    - assert: |
        в сюжете отображается карусель с видео и/или фото,
        видео отображается с кнопкой "плей" посредине, фото - без кнопки "плей". Если копки "плей" нет ни на одной картинке - откройте другой сюжет,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-09_18-48-20.png,
        Обратите внимание! В данном кейсе не важна верстка сюжета новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в самом сюжете что-то отображается не так!
    - do: кликнуть по кнопке "плей"
    - assert: |
        открылся просмотрщик,
        видео воспроизводится без звука, сначала (видео может воспроизводиться автоматически или нет, зависит от вашего предыдущего взаимодействия с плеером. Оба эти варианты (автоматически и нет - ок)),
        если видео не воспроизвелось автоматически - нажмите на кнопку "плей", чтобы оно начало воспроизведение,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-09_18-48-34.png

  дает возможность запускать/останавливать видео, а так же проматывать его [manual]:
    - browsers:
        notFor:
          - win-ie11
    - *goTo
    - do: навести курсор на видео
    - assert: |
        отобразились контролсы видео,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-09_18-50-10.png
    - do: навести курсор на самый центр видео и кликнуть
    - assert: видео встало на паузу
    - assert: иконка слева на панели контролсов изменилась с иконки "паузы" на иконку "запуск" (треугольничек)
    - do: навести курсор на панели контролсов снизу на иконку запуска видео и кликнуть по ней
    - assert: видео продолжило проигрываться
    - do: перемотать видео вперед и назад, кликами по полосе прогресса видео (над контроллсами)
    - assert: видео продолжает проигрываться с выбранного пользователем места

  дает возможность включать/выключать звук в видео видео, а так же открывать его в полноэкранном режиме [manual]:
    - browsers:
        notFor:
          - win-ie11
    - *goTo
    - do: навести курсор на видео
    - assert: |
        отобразились контролсы видео,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-09_18-50-10.png
    - do: кликнуть по иконке звука на панели контроллсов
    - assert: если звук был выключен - он включился, звук видео слышно (если был включен - соответственно наоборот - выключился)
    - do: увеличить-уменьшить громкость звука
    - assert: громкость звука соответственно увеличивается или уменьшается, видео продолжает проигрываться
    - do: кликнуть по иконке фуллскрина (самая правая на панели контроллсов)
    - assert: |
        видео отобразилось в полноэкранном режиме,
        кнопки с панели контроллсов не исчезли
    - do: снова кликнуть по иконке фуллскрина (самая правая на панели контроллсов)
    - assert: |
        видео вернулось к первоначальному размеру на странице,
        кнопки с панели контроллсов не исчезли

  дает возможность настраивать в видео скорость и качество [manual]:
    - browsers:
        notFor:
          - win-ie11
    - *goTo
    - do: навести курсор на видео
    - assert: |
        отобразились контролсы видео,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-09_18-50-10.png
    - do: нажать на иконку шестеренки
    - assert: отобразился поп-ап с настройками скорости, и возможностью сообщить о проблеме, внешний вид - https://jing.yandex-team.ru/files/volkhonov/touch-video-settings.png
    - do: кликнуть по иконке шестеренки, затем кликнуть по "Скорость" - и выбрать скорость воспроизведения видео 0.25
    - assert: воспроизведение видео продолжилось и сильно замедлилось
    - do: изменить скорость воспроизведения на х2
    - assert: воспроизведение видео продолжилось, скорость воспроизведения видео сильно увеличилась относительно первоначальной (обычной)
    - do: вернуть скорость воспроизведения на значение "Обычная"
    - assert: видео продолжило воспроизводится, но уже на обычной скорости
    - do: в поп-апе настроек кликнуть по "Сообщить о проблеме"
    - assert: произошел переход на страницу Яндекс.Справки, отобразился заголовок "Сообщить о проблеме с видеоплеером"

  дает возможность настраивать в видео качество [manual]:
    - browsers:
        notFor:
          - touch-pad-ios
          - safari-desktop
          - ios-yandex-browser-pad
          - touch-pad-ios-safari-09
          - touch-pad-ios-safari-10
          - touch-pad-ios-safari-11
          - touch-pad-ios-safari-12
          - touch-pad-ios-safari-13
          - win-ie11
    - *goTo
    - do: навести курсор на видео
    - assert: |
        отобразились контролсы видео,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-09_18-50-10.png
    - do: нажать на иконку шестеренки
    - assert: отобразился поп-ап с настройками качества, скорости, и возможностью сообщить о проблеме, внешний вид - https://jing.yandex-team.ru/files/volkhonov/touch-video-settings.png
    - do: кликнуть по "Качество" и выбрать другое качество видео
    - assert: |
        видео продолжает воспроизводиться уже в новом качестве (допустима небольшая пауза для прогрузки видео),
        Обратите внимание! при переключении на качество "АВТО" доигрывается текущее качество, находящееся в буфере, если качество сразу не улучшается - это ок.
    - do: кликнуть по иконке шестеренки, затем кликнуть по "Скорость" - и выбрать скорость воспроизведения видео 0.25
    - assert: воспроизведение видео продолжилось и сильно замедлилось
    - do: изменить скорость воспроизведения на х2
    - assert: воспроизведение видео продолжилось, скорость воспроизведения видео сильно увеличилась относительно первоначальной (обычной)
    - do: вернуть скорость воспроизведения на значение "Обычная"
    - assert: видео продолжило воспроизводится, но уже на обычной скорости
    - do: в поп-апе настроек кликнуть по "Сообщить о проблеме"
    - assert: произошел переход на страницу Яндекс.Справки, отобразился заголовок "Сообщить о проблеме с видеоплеером"

  дает возможность перейти на обратную связь [manual]:
    - browsers:
        notFor:
          - win-ie11
    - *goTo
    - do: навести курсор на видео
    - assert: |
        отобразились контролсы видео,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-09_18-50-10.png
    - do: кликнуть по кнопке "Сообщить о проблеме" (знак вопроса в кружке между кнопками "отправить на устройство" и иконкой шестеренки)
    - assert: |
        произошел переход на страницу Яндекс.Справки, отобразился заголовок "Сообщить о проблеме с видеоплеером",
        Обратите внимание! Яндекс.Справки - сторонний сервис и в даном случае нам не важна корректность отображения сервиса, мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если на сервисе Яндекс.Справки что-то отображается не так!

  содержит рекламу в нетраурных карточках [manual]:
    - do: перейти в любую рубрику, кроме рубрик "Спорт" и "Происшествия" (Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в самом сюжете или рубрике что-то отображается не так!)
    - do: поскроллить ленту новостей рубрики до нетраурной карточки (не содержит информацию о смерти/убийствах, а в самом сюжете будет отображена реклама)
    - do: открыть сюжет с видео длительностью > 40 сек (если таких нет, перейти в другую рубрику либо открыть другой сюжет)
    - do: нажать на кнопку "плей"
    - assert: открывается просмоторщик видео, видео воспроизводится автоматически, без звука
    - do: посмотреть 30 секунд видео (важно именно посмотреть, не промотать)
    - assert: на 30-ой секунде видео прерывается рекламой
    - do: дождаться окончания рекламы или кликнуть на "Пропустить"
    - assert: видео продолжает воспроизведение с места, на котором прервалось рекламой

  воспроизводит видео и рекомендованное видео в траурных сюжетах [manual]:
    - do: перейти в рубрику "Происшествия"
    - assert: |
        произошел переход на страницу соответствующей рубрики,
        в рубрикаторе выделена рубрика "Происшествия",
        в ленте отображаются новости соответствующей рубрике тематики,
        Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в самом сюжете или рубрике что-то отображается не так!
    - do: кликнуть по наименованию траурного сюжета (траурный сюжет - сюжет, в котором говоритс о смерти/убийстве, и нет рекламы в правом блоке)
    - assert: |
        открылся соответствующий сюжет, который содержит медиаблок с фото и/или видео,
        Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в самом сюжете или рубрике что-то отображается не так!
    - do: кликнуть по кнопке "плей" на превью видео (если в сюжете нет видео - открыть другой траурный сюжет)
    - assert: открывается просмотрщик, видео воспроизводится без звука(либо со звуком, этот момент зависит от предыдущих настроек пользователя, поэтому наличие либо отсутствие звука в видео неважно)
    - do: закрыть просмотрщик и промотать карусель к последней карточке - "Интересное в СМИ"
    - do: нажать на карточку "Интересное в СМИ"
    - assert: |
        открылся просмотрщик, проигрывается заставка "Интересное в СМИ",
        после заставки открылось превью видео (превью видео может не открыться, главное, чтобы закончилось воспроизведение заставки и отобразилось наименование видео - https://jing.yandex-team.ru/files/kossakovskaya/2022-02-07_19-15-31.png),
        отображаются контроллсы видео
    - do: кликнуть на кнопку "плей"
    - assert: видео воспроизвелось, контроллсы отображаются корректно

  сбрасывает позицию видео при переключении на фото [manual]:
    - do: перейти в любую рубрику, кроме рубрики "Спорт" (Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в самом сюжете или рубрике что-то отображается не так!)
    - do: открыть сюжет с видео и нажать на кнопку "плей" на последнем видео в карусели (последнее - значит, что следующим медиа-файлом, который идет справа от видео, идет фото (картинка без кнопки "плей" посредине))
    - assert: |
        открылся просмотрщик,
        видео воспроизводится сначала, без звука
    - do: включить звук у видео
    - assert: видео вопроизводится со звуком
    - do: кликнуть на стрелочку справа от видео
    - assert: |
        открывается фото,
        звук видео прекращается,
        Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в просмотрщике с фото что-то отображается не так!
    - do: закрыть просмотрщик кликом на крестик
    - assert: отображается открытый ранее сюжет
    - do: открыть видео, которое открывали ранее
    - assert: |
        открывается просмотщик с выбранным видео,
        видео воспроизводится со звуком, сначала

  сохраняет позицию видео при повторном открытии просмотрищка [manual]:
    - do: перейти в любую рубрику, кроме рубрики "Спорт" (Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в самом сюжете или рубрике что-то отображается не так!)
    - do: открыть сюжет с видео и нажать на кнопку "плей" любом видео в карусели
    - assert: |
        открылся просмотрщик,
        видео воспроизводится сначала, без звука
    - do: включить звук у видео
    - assert: видео вопроизводится со звуком
    - do: посмотреть видео дольше 10 секунд и закрыть просмотрщик кликом на крестик в правом верхнем углу
    - do: открыть видео, которое вы закрыли на предыдущем шаге
    - assert: |
        открывается просмотщик с выбранным видео,
        видео воспроизводится с момента, на котором вы закрыли просмотрщик

  в траурном сюжете не содержит рекламу в видео [manual]:
    - do: открыть выдачу сервиса на странице рубрики "Происшествия"
    - do: перейти в траурный сюжет кликом по заголовку в новостной карточке (траурный сюжет - сюжет, в котором говорится о смерти/убийстве, и нет рекламы в правом блоке)
    - assert: |
        сюжет содержит медиаблок с видео и фото (если в сюжете нет медиаблока с видео, открыть другой траурный сюжет),
        видео отображается с кнопкой "плей" по центру изображения, а фото - без этой кнопки,
        Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в просмотрщике с фото что-то отображается не так!
    - do: кликнуть по иконке "плей" на любом видео в медиаблоке, длительность которого > 40сек (если видео длительностью < 40сек, включить другое видео сюжета или перейти в другой траурный сюжет)
    - assert: |
        видео воспроизводится автоматически,
        все контроллсы видео отображаются корректно
    - do: подождать 30 секунд видео (надо именно подождать, перемотка не сработает)
    - assert: на 30-ой секунде видео НЕ прерывается рекламой

files: []

tags:
  - playeronly

manager: eksamoylova

qa-engineer: volkhonov

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
