feature: Hotels / Колдунщик одной организации
type: Стандартный вид

specs:
  Залипающая кнопка в сайдблоке:
    beforeEach:
      - do: получить выдачу по запросу 'Yalta Intourist 4'
      - assert: появился колдунщик отеля 1орг
      - do: кликнуть в таб 'Про отель'
      - assert: показался сайдблок с открытой вкладкой "Про отель"
    Внешний вид залипающей кнопки:
      - tags:
          - 1org
          - tabs
      - do: прокрутить страницу вниз до конца
      - assert: внизу показалась залипающая кнопка
      - screenshot: внешний вид [sticky-footer-on-main]
      - do: кликнуть в таб "Отзывы"
      - assert: внизу показалась залипающая кнопка
      - screenshot: внешний вид [sticky-footer-on-reviews]
      - assertMetrics: '-'
    Проверка показа залипающей кнопки:
      - tags:
          - 1org
          - sideblock
          - tabs
          - high_priority
      - do: проскроллить сайдблок вниз, чтобы скрылась врезка с формой и предложениями
      - assert: внизу показалась залипающая кнопка
      - do: проскроллить сайдблок вверх, чтобы показалась врезка с формой и предложениями
      - assert: залипающая кнопка скрылась
      - do: кликнуть во вкладку "Фото"
      - assert: внизу показалась залипающая кнопка
      - do: кликнуть во вкладку "Номера"
      - assert: залипающая кнопка скрылась
      - assertMetrics: '-'
    Клик по кнопке открывает таб "Номера":
      - tags:
          - 1org
          - button
          - sideblock
      - do: проскроллить сайдблок вниз, чтобы скрылась врезка с формой и предложениями
      - assert: внизу показалась залипающая кнопка, кнопка показывается в случае если врезка с формой и предложениями находится вне поля видимости
      - do: кликнуть в кнопку
      - assert: открылась вкладка "Номера"
      - assertMetrics: '*'
    Динамическое обновление цены:
      - tags:
          - 1org
          - sideblock
          - tabs
          - button
          - dates
      - do: проскроллить сайдблок вниз, чтобы скрылась врезка с формой и предложениями
      - assert: внизу показалась залипающая кнопка
      - do: запомнить цену в залипающей кнопке
      - do: изменить диапазон дат в форме поиска номеров
      - do: кликнуть в "Показать цены"
      - assert: открылась вкладка "Номера"
      - do: дождаться окончания поиска
      - do: кликнуть во вкладку "Фото"
      - assert: внизу показалась залипающая кнопка
      - assert: текст на кнопке изменился
      - assertMetrics: '-'

files:
  - features/companies/hotels/sticky-footer@touch-phone.hermione.js

counter: /snippet/companies/travel_company/sideblock

v-team: KotTeam

tags:
  # не зависит от данных
  - skip_e2e_check

tlds: none
