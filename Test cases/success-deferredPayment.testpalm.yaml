feature: Отели
type: Бронирование отелей

specs:
    Бронь в рассрочку (с промокодом):
        - condition: Быть залогиненным.
        - do: Перейти на страницу бронирования отеля c параметрами
              | бесплатная отмена
              | 1 ночь
              | 2 взрослых
        - assert: Открылась страница бронирования.
        - assert: В блоке корзинки со стоимостью есть чекбоксы для оплаты "Оплатить позже" и "полной оплаты".
        - assert: В чекбоксе "полной оплаты" цена совпадает с итоговой ценой "к оплате".
        - assert: В чекбоксе "Оплатить позже" есть указание, до какого числа и времени нужно внести доплату.
        - do: Выбрать чекбокс "Оплатить позже".
        - assert: Чекбокс рассрочки должен содержать текст "Оплатить позже"
        - assert: Чекбокс активировался.
        - assert: Итоговая цена "к оплате" равна сумме рассрочки.
        - do: В корзинке над рассрочками активировать чекбокс "У меня есть промокод" и ввести промокод "SUCCESS" и нажать "Применить".
        - assert: Чекбокс промокода и поле для ввода стали неактивными.
        - assert: По прежнему выбран чекбокс Оплатить позже
        - assert: Итоговая цена не должна измениться - 0 р
        - assert: В поле инфы о полной оплате (под итоговой суммой) цена уменьшилась на сумму промокода (200р).
        - do: Заполнить валидными данными гостей и контактную инфу и нажать "Забронировать".
        - assert: После прокрутки всех необходимых лоадеров произошел переход на HappyPage.
        - assert: В заголовке указано "Отель забронирован".
        - assert: Сумма доплаты и дата с временем на HappyPage совпадает с суммой и датами на бронировании.
        - assert: В верху страницы есть ссылка на страницу заказа для старта доплаты.
        - do: Перейти по ссылке на страницу заказа.
        - assert: Есть информация о сумме рассрочки и общей сумме заказа (с учетом скидки).
        - assert: Ниже указано, сколько необходимо доплатить, до какого числа и времени и есть кнопка "Доплатить".
        - assert: Все суммы и даты с временем совпадают с информацией на бронировании.
        - assert: Есть ссылка на фискальный чек.
        - do: Кликнуть на кнопку "Доплатить".
        - assert: Произошел переход на страницу старта доплаты.
        - assert: Отображается лоудер подготовки доплаты.
        - assert: Произошел переход на страницу оплаты.
        - assert: В заголовке отображается "Доплата".
        - assert: Цена доплаты на странице оплаты совпадает с ценой на странице бронирования.
        - do: Ввести данные карты и нажать "Оплатить".
        - assert: После прокрутки всех необходимых лоадеров произошел переход на HappyPage.
        - assert: В заголовке отображается "Отель оплачен полностью".
        - assert: Информация про внесении доплаты отсутствует.
        - do: Перейти по ссылке на страницу заказа.
        - assert: Есть 2 ссылки на фискальные чеки.
        - assert: Информация про внесении доплаты отсутствует.

files:
    - tests/common/hotels/book/deferredPayment/success-deferredPayment.hermione.ts

tags: smoke

Сервис: Отели
Страница: Бронирование
Автор: iliasova
Устройство:
    - Тач
    - Десктоп
Функциональность:
    - Рассрочки
    - Промокод
Окружение:
    - Testing
    - Production
Тестирование асессорами: Нет
