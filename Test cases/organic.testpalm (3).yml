feature: Базовая функциональность(Органика)

specs:
  aliases:
    - &CheckMetrics
      - assertMetrics:
        - web.total_all_click
        - web.total_title_click
        - web.total_navurl_click
        - web.total_click_count
        - web.tech_part_misc_click
        - web.abandonment
        - web.full_abandonment
        - web.first_click_pos
        - web.web_ctr1
        - web.web_ctr2
        - web.doc_sitelink_ctr
        - web.sitelink_click_rate
        - web.sitelink_unclicked_sitelinked_requests

  Проверка ссылок:
    - tags: [smoke]
    - do: получить выдачу по запросу 'яндекс' (альтернативные запросы 'браузер', 'мигель танцы', 'лента ру рубрики')
    - screenshot: появился органический сниппет (внешний вид может отличаться) [snippet]
    - *CheckMetrics
    - do: кликнуть ссылку в тайтле
    - assert: произошел переход на соответствующую ссылку
  Проверка сайтлинков:
    - tags: [smoke]
    - do: получить выдачу по запросу 'яндекс' (альтернативные запросы 'браузер', 'мигель танцы', 'лента ру рубрики')
    - screenshot: появился органический сниппет с сайтлинками внизу (главное чтобы на выдаче были сниппеты с сайтлинками в ряд; если не приходит такой сниппет на первой позиции, попробуйте пролистнуть страницу вниз или поменять внизу регион на Москву) [snippet]
    - do: кликнуть на ссылку сайт линка
    - assert: произошел переход на соответствующу ссылку
    - *CheckMetrics
  Проверка длинного гринурла:
    - do: открыть выдачу по запросу 'как зарегистрировать ребенка на госуслугах'
    - screenshot: скриншот внешний вид (на скрине пример внешнего вида, на 100% совпадать не должно) [longGreenurl]
  Наличие переносов в тексте рядом с картинкой:
    - do: |
        получить выдачу по запросу 'достопримечательности барселоны' (альтернативные запросы 'бефстроганов классический', 'джомолунгма экспедиции трагедии')
        (если сниппетов с переносами в описании нет, то посмотрите на 2 странице или попробуйте другой запрос)
    - assert: у текста рядом с картинкой должны быть переносы
    - tech: должно быть выставлено свойство hyphens auto

specs-integration:
  beforeEach:
    - do: получить выдачу по запросу 'лента ру рубрики'
    - assert: появился сниппет (картинки, заголовки, текст могут отличаться, главное заголовок и гринурл) [https://jing.yandex-team.ru/files/vtroshina/2021-09-01T08%3A34%3A43Z.dea4b8c.png]
  Проверить тайтл и гринурл:
    - tags:
        - smoke_extended
        - pp_new_core
    - assert: тайтл сниппета присутствует на странице
    - assert: присутствует ссылка в тайтле сниппета
    - assert: гринурл сниппета присутствует на странице
    - assertMetrics: '-'

files:
  - features/touch-phone/organic/organic.hermione.js
  - features/touch-phone/organic/organic.hermione.e2e.js

v-team: Beauty

tags:
  - reviewed
  - organic

tlds: all
