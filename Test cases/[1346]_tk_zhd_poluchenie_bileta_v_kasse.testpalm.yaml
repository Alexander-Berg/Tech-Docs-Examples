feature: ЖД
type: Страница заказа
description: >-
  * Дернуть ручку тестового контекста:
  https://api.travel-balancer-test.yandex.net/api/test_context/v1/train_token?insurancePricingOutcome=IPO_SUCCESS&insuranceCheckoutOutcome=ICO_SUCCESS&insuranceCheckoutConfirmOutcome=ICCO_SUCCESS&refundPricingOutcome=RPO_SUCCESS&refundCheckoutOutcome=RCO_SUCCESS&createReservationOutcome=RCRO_SUCCESS&confirmReservationOutcome=RCOO_SUCCESS&officeReturnDelayInSeconds=0&officeAcquireDelayInSeconds=10&alwaysTimeoutAfterConfirmingInSeconds=0

  * В ответе запомнить токен из поля test_context_token
specs:
  'ТК ЖД: Получение билета в кассе':
    - do: >-
        Перейти на вкладку ЖД

        Перейти на поиск Москва - Санкт-Петербург через месяц

        Для любого поезда кликнуть по кнопке Выбрать место

        На странице выбора мест выбрать любое место в любом вагоне

        Нажать Указать пассажиров

        Добавить к урлу параметр trainTestContextToken со значением полученного
        токена

        Перейти по полученной ссылке

        Заполнить все поля валидными данными

        Нажать Проверить заказ и купить

        Нажать Перейти к оплате

        Заполнить данные тестовой карты, например: 5100003697253468, 12/20, 090

        Нажать Оплатить

        Нажать Подробнее о заказе
    - assert: '* Произошел переход на страницу заказа'
    - do: |-
        Выждать 10 секунд
        Обновить страницу
    - assert: >-
        * Над заказом есть текст на желтом фоне “Вернуть билет онлайн нельзя,
        так как вы получили бумажный билет в кассе или терминале. Вы можете
        сдать билет в кассе.”

        * Есть приписка “Выдан посадочный купон” рядом с билетом

        * Нет действий Сдать и Отменить ЭР

        * Есть кнопки Скачать и Распечатать (в десктопе)

        * Есть кнопка Скачать (в таче)

        https://jing.yandex-team.ru/files/shenfeld/2020-09-23_19.00.48-5asrf.png
manual: true
Устройство:
  - Десктоп
  - Тач
Страница: Страница заказа
Сервис: ЖД
Тестирование асессорами: Нет
Окружение: Testing
Tag:
  - TK
  - orkestrator
Автор: shenfeld
