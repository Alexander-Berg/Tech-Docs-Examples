feature: Расширенный факт

specs:
  Текст - картинка - список:
    - params:
        foreverdata: '1415652665'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ
    - screenshot: внешний вид [plain]
    - do: нажать на первую ссылку
    - assert: произошёл переход на страницу
    - tech: сработал счётчик path="/$page/$main/$result/rich_fact/fold/link"
    - do: вернуться на выдачу
    - do: нажать на картинку
    - assert: произошёл переход на страницу
    - tech: сработал счётчик path="/$page/$main/$result/rich_fact/fold/thumb"

  Заголовок - текст с инлайн картинкой - список:
    - params:
        foreverdata: '422557946'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ
    - screenshot: внешний вид [plain]

  Список второго уровня:
    - params:
        foreverdata: '3664134757'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ
    - do: нажать на кнопку-стрелку
    - tech: сработал счётчик path="/$page/$main/$result/rich_fact/fold/arrow[@behaviour@type="dynamic"]"
    - assert: быстрый ответ раскрылся
    - screenshot: внешний вид [unfolded]

  Список с числами:
    - params: {}
    - do: получить выдачу по запросу "как найти потерянные airpods"
    - assert: на странице присутствует быстрый ответ
    - screenshot: внешний вид [plain]

  Несколько абзацев:
    - params:
        foreverdata: '2161780024'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ
    - do: нажать на кнопку-стрелку
    - tech: сработал счётчик path="/$page/$main/$result/rich_fact/fold/arrow[@behaviour@type="dynamic"]"
    - assert: быстрый ответ раскрылся
    - screenshot: внешний вид [unfolded]

  Суммарный ответ и скрывающиеся элементы:
    - params:
        foreverdata: '1126770084'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ
    - screenshot: внешний вид [plain]
    - do: нажать на кнопку-стрелку
    - tech: сработал счётчик path="/$page/$main/$result/rich_fact/fold/arrow[@behaviour@type="dynamic"]"
    - assert: быстрый ответ раскрылся
    - screenshot: внешний вид [unfolded]
    - do: раскрыть первый элемент со скрытым контентом
    - assert: элемент раскрылся
    - screenshot: внешний вид [uncollapsed]

  Со связанными фактами:
    - params:
        foreverdata: '424076375'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ c кнопками для связанных запросов
    - screenshot: внешний вид [plain]
    - do: кликнуть в первую кнопку в карусели кнопок
    - tech: сработал счётчик "/$page/$main/$result/rich_fact/related/link"
    - assert: произошел перезапрос к поиску, в тексте запроса содержится правильное значение
  Кнопка телефона отображается в Summary:
    - params:
        foreverdata: '2367170146'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ
    - screenshot: внешний вид [plain]

  Флаг для раскрытия коллапсеров:
    - params:
        foreverdata: '14695642'
        exp_flags:
          - fact_rich_fact_expand_collapsers=1
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ
    - do: нажать на кнопку-стрелку
    - tech: сработал счётчик path="/$page/$main/$result/rich_fact/fold/arrow[@behaviour@type="dynamic"]"
    - assert: быстрый ответ раскрылся, все скрывающиеся элементы внутри раскрыты

  С меткой «Подтверждено» (recommendation_label):
    - counter: /$page/$main/$result/rich_fact/title/official
    - do: получить выдачу по запросу "как получить снилс" _ALTERNATIVE_SEARCH_QUERIES_
    - assert: на странице присутствует быстрый ответ с галочкой возле greenurl'а
    - screenshot: внешний вид ссылки с синей галкой [fact-source]
    - do: кликнуть на синюю галочку
    - assert: под галочкой появилась подсказка
    - screenshot: внешний вид тултипа [tooltip]
  С меткой «Подтверждено» (cbrf_info):
    - params:
        foreverdata: '593328920'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ с галочкой возле greenurl'а
    - screenshot: внешний вид [plain]
    - do: кликнуть на синюю галочку
    - assert: под галочкой появилась подсказка
    - screenshot: внешний вид тултипа [tooltip]

  Факт с социальным источником:
    - params:
        foreverdata: '3361919896'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ с подтвержденным источником
    - screenshot: внешний вид [plain]

  Шторка обратной связи:
    - do: получить выдачу по запросу 'как получить снилс' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: на первой позиции выдачи есть фактовый ответ
    - do: кликнуть по ссылке "Сообщить об ошибке" в нижней части факта
    - assert: открылась шторка для обратной связи
    - screenshot: внешний вид шторки обратной связи [feedback-drawer]

  Фильтры в екоме:
    - params:
        foreverdata: '2878771781'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ с кнопкой "Подобрать товары"
    - do: кликнуть по кнопке "Подобрать товары"
    - assert: открылась шторка с фильтрами
    - screenshot: внешний вид шторки [drawer]
    - do: кликнуть по ссылке "Показать ещё" у любого фильтра
    - assert: развернулся полный список фильтров
    - do: кликнуть по любому чекбоксу или нескольким
    - assert: чекбоксы нажимаются
    - do: кликнуть по кнопке "Найти товары"
    - assert: открылась страница товарной вертикали с отфильтрованными предложениями

files:
  - src/features/RichFact/RichFact.tests/RichFact@touch-phone.hermione.js

v-team: Facts

tags:
  # Эксперимент
  - skip_e2e_check
  - react

tlds: ru
