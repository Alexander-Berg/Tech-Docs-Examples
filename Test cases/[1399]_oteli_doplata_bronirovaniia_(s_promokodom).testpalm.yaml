feature: Отели
type: Бронирование
description: >-
  Для выполнения кейса нужно иметь бронь, оплаченную в рассрочку, для этого
  можно пройти кейс https://testpalm.yandex-team.ru/travel/testcases/2237
specs:
  Отели. Доплата бронирования (с промокодом):
    - do: 'Перейти на страницу заказа, оплаченного в рассрочку (с промокодом)'
    - assert: |-
        Открылась страница заказа в лк
        На странице есть кнопка Доплатить и сумма доплаты
    - do: Кликнуть Доплатить
    - assert: >-
        В новой вкладке появился лоадер Подготовка оплаты проверяем заказ и
        готовимся к оплате

        Далее в той же вкладке произошел переход на оплату

        В форме оплаты указана сумма, равная сумме доплаты на
        странице заказа
    - do: Ввести данные карты и нажать Оплатить
    - assert: |-
        После прокрутки всех необходимых лоадеров попадаем на хэппи пейдж
        В заголовке отображается "Отель оплачен полностью"
        Информация про внесении доплаты отсутствует
    - do: Кликнуть по кнопке Подробнее о заказе
    - assert: |-
        Произошел переход на страницу заказа в лк
        В верху страницы отсутствует информация о рассрочке и доплате
    - do: |-
        В блоке Стоимости кликнуть на ссылку "Чеки и документы" и выбрать пункт "Детали заказа"
    - assert: >-
        Открылся блок с детализацией

        В блоке есть итоговая сумма заказа (с учетом скидки) и 
        стоимость за ночи + указание скидки (500р)
    - do: Закрыть детализацию и выбрать пункт "Чек на платёж"
    - assert: |-
        В модале открылся чек прихода
        Итоговая сумма в чеке равна сумме бронирования (с учетом скидки)
    - do: |-
        Закрыть модал по крестику
        
manual: true
Функциональность:
  - Рассрочки
  - Промокод
Устройство:
  - Тач
  - Десктоп
Страница:
  - Бронирование
  - Страница заказа
Сервис: Отели
Тестирование асессорами: Нет
Окружение:
  - Production
  - Testing
Tag: Smoke
Автор: iliasova
