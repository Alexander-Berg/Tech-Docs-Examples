feature: EcomSearch

params:
    exp_flags:
      - turbo-app-any-ua=1
      - analytics-disabled=1

specs:
    beforeEach:
        - do: при дальнейшей проверке указанных ожидаемых результатов обращайте внимание на любые некорректные на ваш взгляд поведения, основываясь на свой опыт использования web-приложений (например, сохранение позиции при переходах туда-обратно кнопками на устройстве, пустые экраны при переходах, кривая верстка, скачкИ элементов, плавность скролла, неработающая функциональность и т.п.)

    Опечатка:
        - automation: TURBOUI-3907
        - do: получить выдачу по запросу 'site:farkop.ru каталог'
        - assert: на выдаче присутствует турбо-сниппет(ы) с серой иконкой ракеты справа от гринурла
        - do: кликнуть по любой ссылке турбо-сниппета для перехода на страницу магазина
        - assert: открылась страница магазина с активной кнопкой Каталог на нижней панели
        - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_Gw9upIcJ8I.png]
        - do: кликнуть по пиктограмме Главная на нижней панели
        - do: в поле поиска вбить "форкоп"
        - do: нажать на кнопку "найти"
        - assert: открылся каталог товаров
        - assert: в названиях товаров НЕ подсвечено слово "фаркоп"
        - assert: отображается нижняя панель навигации
        - do: кликнуть Отменить в опечаточнике
        - assert: появилось сообщение "К сожалению, ничего не нашлось"
        - do: кликнуть по крестику в поле ввода, удалив поисковый запрос, и нажать Найти
        - assert: загрузились все данные каталога
        - do: кликнуть по кнопке Фильтры
        - assert: открылась страница, на которой отображаются возможные фильтры

    Пустой результат:
        - automation: TURBOUI-3907
        - do: получить выдачу по запросу 'site:fulmar.ru' (альтернативные запросы - site:kupicase.ru каталог, 'site:super01.ru')
        - assert: на выдаче присутствует турбо-сниппет(ы) с серой иконкой ракеты справа от гринурла
        - do: кликнуть по любой ссылке турбо-сниппета для перехода на страницу магазина
        - assert: открылась страница магазина с активной кнопкой Каталог на нижней панели
        - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_Gw9upIcJ8I.png]
        - do: кликнуть по пиктограмме Главная на нижней панели
        - do: в поле поиска вбить "пусто"
        - do: нажать на кнопку "найти"
        - assert: без анимации открылась страница с пустым результатом поиска [https://jing.yandex-team.ru/files/skurhanski/chrome_kbKldxD5ok.png]
        - assert: на странице есть галереи "Популярные товары" и "Выгодно сегодня", а также блок "Выгодно сегодня"

    Кнопка на клавиатуре устройства:
        - automation: TURBOUI-3907
        - do: получить выдачу по запросу 'site:super01.ru каталог'
        - assert: на выдаче присутствует турбо-сниппет(ы) с серой иконкой ракеты справа от гринурла
        - do: кликнуть по любой ссылке турбо-сниппета для перехода на страницу магазина
        - assert: открылась страница магазина с активной кнопкой Каталог на нижней панели
        - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_Gw9upIcJ8I.png]
        - do: кликнуть по пиктограмме Главная на нижней панели
        - do: в поле поиска вбить "для волос"
        - do: нажать на кнопку "найти" на клавиатуре устройства (не путать с кнопкой Найти в строке ввода)
        - assert: открылся каталог со списком найденных товаров
        - assert: отображается нижняя панель навигации
        - assert: страница открылась без анимации

    Поиск на странице каталога:
        - automation: TURBOUI-3907
        - do: получить выдачу по запросу 'site:super01.ru каталог'
        - assert: на выдаче присутствует турбо-сниппет(ы) с серой иконкой ракеты справа от гринурла
        - do: кликнуть по любой ссылке турбо-сниппета для перехода на страницу магазина
        - assert: открылась страница магазина с активной кнопкой Каталог на нижней панели
        - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_Gw9upIcJ8I.png]
        - do: кликнуть по пиктограмме Каталог на нижней панели
        - do: в поле поиска вбить "человек"
        - do: нажать на кнопку "найти"
        - assert: открылся каталог со списком найденных товаров по искомому слову
        - assert: отображается нижняя панель навигации
        - assert: страница открылась с анимацией

    Интеграционный сценарий поиска:
        - do: перейти по ссылке https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/
        - screenshot: внешний вид формы [search-form]
        - do: кликнуть в форму поиска и ввести lorem и кликнуть по кнопке найти
        - screenshot: произошел переход на каталог [catalog-page]
        - do: ввести oops в поле поиска
        - screenshot: значение изменилось [search-form-filled]

files:
    - components/EcomSearch/__tests__/EcomSearch@phone.hermione.js

tlds:
    - ru

tags:
    - ecom-tap

v-team: Turbo
