feature: Опечатка и Ко
type: Восстановление раскладки клавиатуры

specs:
  Отменить восстановление раскладки:
    - tags: pp_new_core
    - do: Получить выдачу по запросу "ktnj"
    - screenshot: Внешний вид [fix-layout]
    - assert: на выдаче присутствует сообщение "Исправлена раскладка клавиатуры с «ktnj»" и кнопка "Отменить"
    - do: нажать на кнопку "Отмена" в опечаточнике
    - assert: выдача обновилась
    - tech: сработал счетчик '/$page/$main/misspell/type_misspell/keyboard_layout[@pos="top"]'
    - assertMetrics: '*'

specs-integration:
  Обязательные проверки:
    - counter: /$page/$main/misspell/type_misspell/keyboard_layout[@pos="top"]
    - do: получить выдачу по запросу "ktnj"
    - assert: на выдаче присутствует опечаточник с сообщением "Исправлена раскладка клавиатуры с «ktnj»"
    - assert: справа от сообщения присутствует кнопка "Отменить"
    - do: нажать кнопку "Отменить"
    - assert: выдача обновлена
    - assert: на выдаче отсутствует сообщение "Исправлена раскладка клавиатуры с «ktnj»"
    - assert: в url'e страницы в адресной строке присутствует параметр &noreask=1 (отсутствует в поисковом приложении, это не является ошибкой)
    - tech: сработал счетчик '/$page/$main/misspell/type_misspell/keyboard_layout[@pos="top"]'

files:
  - features/touch-phone/misspell/misspell_type_fix-layout.hermione.js
  - features/touch-phone/misspell/misspell_type_fix-layout.hermione.e2e.js

v-team: Freshness

tags:
  - longlongrequest
  - searchresults
  - granny
  - spok_id
  - wizard
  - misprint
  - reviewed

counter: /$page/$main/misspell/type_misspell/keyboard_layout[@pos="top"]

tlds:
  - ru
  - by
  - ua
  - kz
  - uz
