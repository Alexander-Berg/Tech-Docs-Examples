feature: Рубрика Яндекс.Новостей

description: Рубрика - это страница сервиса, на которой отображаются новости одной тематики. Георубрика - это рубрика, название и новости которой соответствуют региону пользователя (выставленному в Яндекс.Паспорте).

specs-integration:
  должна открываться из Главной:
    - do: перейти по ссылке https://yandex.ru/news
    - do: кликнуть на рубрику Политика
    - assert: страница открылась

  содержит рекламу в топе в старом дизайне:
    - do: перейти по ссылке https://yandex.ru/news/rubric/politics?flags=yxneo_news_phone_bro-distribution-banner=0;yxneo_news_phone_rubric_top-advert-redesign=0'
    - assert: отображается реклама под рубрикатором в топе в старом дизайне

  содержит рекламу в топе в новом дизайне:
    - do: перейти по ссылке https://yandex.ru/news/rubric/politics?flags=yxneo_news_phone_bro-distribution-banner=0;yxneo_news_phone_rubric_top-advert-redesign=1'
    - assert: отображается реклама под рубрикатором в новом дизайне

  содержит карточки с картинкой:
    - do: перейти по ссылке https://yandex.ru/news/rubric/politics
    - assert: отображается картинка на первой карточке

#  содержит карточки с видео:
#    - do: перейти по ссылке https://yandex.ru/news/rubric/politics
#    - do: проскроллить до карточки с видео
#    - assert: отображается карточка с видео

  открывает персональную рубрику без ошибок:
    - do: перейти по ссылке https://yandex.ru/news
    - do: кликнуть на рубрику Интересное
    - assert: страница открылась без ошибок

  позволяет перейти в cюжет:
    - do: перейти по ссылке https://yandex.ru/news/rubric/politics
    - do: кликнуть на по первой карточке
    - assert: происходит переход в сюжет

  выделяет активную рубрику в рубрикаторе:
    - do: перейти по ссылке https://yandex.ru/news/rubric/politics
    - assert: активная рубрика выделена черным цветом

  загружает карточки при скролле:
    - do: перейти по ссылке https://yandex.ru/news/rubric/politics
    - do: проскролить страницу до конца
    - assert: происходит подгрузка новых карточек

  региональная отображает названия других регионов:
    - do: перейти по ссылке https://yandex.ru/news/region/moscow
    - do: тапнуть по Другие регионы
    - assert: откроется модальное окно со списком российских регионов
    - do: тапнуть по Украина
    - assert: откроется модальное окно со списком украинских регионов
    - do: тапнуть по Зарубежные новости
    - assert: откроется модальное окно со списком стран

  редиректит на Яндекс Спорт:
    - do: перейти по ссылке https://yandex.ru/news
    - do: кликнуть на рубрику Спорт
    - assert: происходит открытие сервиса Яндекс Спорт в новой вкладке

  несуществующая должна открываться:
    - do: перейти по ссылке https://yandex.ru/news/rubric/person
    - assert: открылась страница 404, нет 500х ошибок

  региональная открывается на нацдоменах:
    - do: перейти по ссылке https://yandex.by/news/region/moscow
    - assert: нет 500х ошибок, открылась страница новостей Москвы

#  Армия недоступна на ua:
#    - do: перейти по ссылке https://yandex.ua/news/rubric/army
#    - assert: нет 500х ошибок, отобразилась надпись "Не удалось отобразить сюжет"

  может содержать карточки новостей с редиректом на Я.Спорт [manual]:
    - tags:
      - backend_news
      - brow_only
    - reasonNotToAuto:
      - Оставляем ручную проверку редиректа, тк проверить бэковый редирект в е2е нельзя (ошибка Fail to load template «neo—sport-story.touch-phone» from routers.json)
    - do: открыть главную страницу сервиса Яндекс.Новости
    - do: поскроллить ленту новостей рубрики до карточки со спортивной новостью
    - do: тапнуть по карточке со спортивной новостью
    - assert: |
        произошел переход на страницу сюжета в сервисе Я.Спорт в той же вкладке,
        внешний вид https://jing.yandex-team.ru/files/kossakovskaya/2021-12-23_13-57-33.png

specs:
  должна содержать карточки новостей с картинками:
    - tags:
      - smoke
      - backend_news
      - smoke_zen
    - do: поскроллить ленту новостей
    - assert: в ленте большинство карточек новостей с картинками, внешний вид - https://jing.yandex-team.ru/files/a-groza/2019-11-22_18.05.59-32e7w.png
    - screenshot: внешний вид соответствует скриншоту [card_image]
    - do: перейти в любую другую рубрику, кроме рубрики Спорт
    - do: поскроллить ленту новостей рубрики
    - assert: в ленте встречаются карточки новостей с картинками

  содержит карточки новостей с видео:
    - do: открыть рубрику «В мире» 'https://yandex.ru/news/rubric/world'
    - assert: в ленте встречаются карточки новостей с видео
    - screenshot: внешний вид соответствует скриншоту [card_video]

  должна содержать персональные карточки новостей [manual]:
    - tags:
      - smoke
      - personal_feed
      - backend_news
      - smoke_zen
    - reasonNotToAuto:
      - Необходима ручная проверка персонализации
    - do:
          залогиниться на сервисе под пользователем Александр Овечкин (логин и пароль взять со страницы-инструкции на вики - https://wiki.yandex-team.ru/eva/testing/projects/nerpa/#loginyiparolidljatestovyxpolzovatelejj)
          если возникла проблема с авторизацией - залогиниться под любым другим пользователем из таблицы - Ольга Бузова или Стив Джобс
    - do: открыть главную страницу сервиса
    - assert:
          если вы залогинены под пользователем Александр Овечкин - после топ5 новостей в ленте большинство сюжетов - спортивные сюжеты
          если вы залогинены под пользователем Ольга Бузова - после топ5 новостей в ленте большинство сюжетов про шоу-бизнес
          если вы залогинены под пользователем Стив Джобс - после топ5 новостей в ленте большинство сюжетов про технологии
    - do: перейти в рубрику Интересное
    - assert:
          если вы залогинены под пользователем Александр Овечкин - в ленте большинство сюжетов - спортивные сюжеты
          если вы залогинены под пользователем Ольга Бузова - в ленте большинство сюжетов про шоу-бизнес
          если вы залогинены под пользователем Стив Джобс - в ленте большинство сюжетов про технологии
    - do: ОБЯЗАТЕЛЬНО выйти из тестового аккаунта

  загружает новые карточки после восстановления соединения [manual]:
    - tags:
      - smoke_zen
    - reasonNotToAuto:
      - не удалось автоматизировать, тк выполнение команды setNetworkConnection в браузерах заканчивается ошибкой 'unknown error - network connection must be enabled'/'operation is unsupported on Android'
    - do: скроллить страницу вниз, пока не закончатся карточки
    - assert: под карточками отображается спиннер
    - do: подождать, пока на месте спиннера покажется новая порция карточек, отключить интернет на устройстве
    - do: проскроллить вниз до  конца порции
    - assert: новые карточки не подгружаются, крутится спиннер подгрузки
    - do: включить интернет на устройстве
    - assert: |
        через некоторое время догружается новая пачка карточек,
        карточки отображаются корректно,
        некоторые карточки могут недогружаться (меньшая их часть) - это ок

  загружает новые карточки при скролле в ландшафтной ориентации:
    - tags:
      - smoke
      - backend_news
    - do: открыть рубрику 'Экономика"'
    - do: перевести устройство в альбомную ориентацию
    - do: скроллить страницу вниз, пока не закончатся карточки
    - assert: |
        под карточками отображается спиннер (при быстром интернете спиннер может быть не заметен),
        загружается новая пачка карточек,
        карточки отображаются корректно

  может содержать:
#   нетраурные карточки новостей с автоплеем видео [manual]:
#     - tags:
#       - backend_news
#       - player
#     - do: перейти в любую рубрику, кроме рубрик Спорт и Происшествия
#     - assert: |
#         произошел переход на страницу соответствующей рубрики,
#         в рубрикаторе выделено название рубрики
#     - do: поскроллить ленту новостей рубрики до нетраурной карточки с видео (если видео нет, перейти в другую рубрику)
#     - assert: |
#         в ленте отображаются новости соответствующей рубрике тематики,
#         видео воспроизводится автоматически, без звука
#     - do: включить звук у видео (звук не будет включаться на сафари в 9 и 10 ios - особенности браузера)
#     - assert: видео воспроизводится со звуком
#     - do: проскроллить страницу вниз так, чтобы верхняя часть видео скрылась более, чем наполовину (пропустить дальнейшие шаги, если проходите кейс на iOS 9)
#     - assert: видео паузится
#     - do: проскроллить страницу обратно
#     - assert: видео воспроизводится автоматически, со звуком

#   нетраурные карточки новостей без автоплея видео [manual]:
#     - tags:
#       - player
#     - do: перейти в любую рубрику, кроме рубрик Спорт и Происшествия
#     - do: поскроллить ленту новостей рубрики до нетраурной карточки с видео (если видео нет, перейти в другую рубрику)
#     - assert: |
#         в ленте отображаются новости соответствующей рубрике тематики,
#         видео воспроизводится по тапу
#     - do: тапнуть по нетраурной карточке с видео
#     - assert: |
#         произошел переход в соответствующий сюжет с видео, видео воспроизводится по
#         внизу сюжета присутствует троеточие, содержащее настройку автоплея
#     - do: тапнуть на троеточие, снять галочку с Автовоспроизведение видео
#     - do: вернуться на страницу рубрики, проскроллить ленту новостей до нетраурной карточки с видео
#     - assert: видео НЕ воспроизводится автоматически
#     - do: тапнуть по нетраурной карточке с видео
#     - assert: |
#         произошел переход в соответствующий сюжет с видео, видео НЕ воспроизводится автоматически
#         внизу сюжета присутствует троеточие, содержащее настройку автоплея
#     - do: тапнуть на троеточие, поставить галочку Автоплей видео
#     - do: вернуться на страницу рубрики, проскроллить ленту новостей до нетраурной карточки с видео
#     - assert: видео воспроизводится автоматически

    нетраурные карточки новостей с видео и рекламой в нем [manual]:
      - browsers:
          notFor:
            - ios-safari-9-touch
      - tags:
        - advert
        - smoke_zen
      - reasonNotToAuto:
        - Необходима ручная проверка рекламного ролика в видео сюжета
      - do: перейти в любую рубрику, кроме рубрик Спорт и Происшествия
      - assert: |
          произошел переход на страницу соответствующей рубрики,
          в рубрикаторе выделено название рубрики
      - do: поскроллить ленту новостей рубрики до нетраурной карточки
      - do: открыть сюжет с видео длительностью > 40 сек (если таких нет, перейти в другую рубрику)
      - do: нажать на кнопку 'плей'
      - assert: открывается просмоторщик видео, видео воспроизводится автоматически, либо по тапу на кнопку плей, без звука
      - do: посмотреть 30 секунд видео
      - assert: на 30ой секунде видео прерывается рекламой
      - do: дождаться окончания рекламы или тапнуть Пропустить
      - assert: видео продолжает воспроизведение с места, на котором прервалось рекламой

    траурные карточки новостей с видео [manual]:
      - tags:
        - smoke_zen
      - reasonNotToAuto:
        - Необходима ручная проверка рекламного ролика в видео сюжета
      - do: перейти в рубрику Происшествия
      - assert: |
          произошел переход на страницу соответствующей рубрики,
          в рубрикаторе выделена рубрика Происшествия,
          в ленте отображаются новости соответствующей рубрике тематики,
          внешний вид траурных карточек - https://jing.yandex-team.ru/files/kossakovskaya/2021-08-13_15-11-28.png
      - do: тапнуть по наименованию траурного сюжета
      - assert: открылся соответствующий сюжет, который содержит медиаблок с фото и/или видео
      - do: тапнуть по кнопке плей на превью видео (если в сюжете нет видео - открыть другой траурный сюжет)
      - assert: открывается просмотрщик, видео воспроизводится без звука
      - do: проскроллить страницу вниз так, чтобы верхняя часть видео скрылась более, чем наполовину и не убирать палец с экрана иначе будет переход на следующее медиа (пропустить дальнейшие шаги, если проходите кейс на iOS 9)
      - assert: видео НЕ воспроизводится
      - do: проскроллить страницу обратно
      - assert: видео продолжает воспроизводиться, без звука

    карточки новостей без медиаблока:
      - tags:
        - no_assessors
      - do: перейти в рубрику Наука
      - do: поскроллить ленту новостей рубрики
      - assert: в ленте присутствуют карточки без медиа (если карточек без медиа нет, перейти в другую рубрику, кроме рубрики Спорт)
      - screenshot: внешний вид соответствует скриншоту [card_plain]

    карточки новостей с цитатой:
      - tags:
        - no_assessors
        - backend_news
      - do: перейти в рубрику Политика
      - do: поскроллить ленту новостей рубрики
      - assert: |
          в ленте встречаются карточки новостей с цитатой (если цитат нет, перейти в другую рубрику, кроме рубрики Спорт),
          цитата отображается на сером фоне, под цитатой присутствует аватарка и фио автора
      - screenshot: внешний вид соответствует скриншоту [card_quote]

  позволяет перейти в сюжет:
    - tags:
      - smoke
      - backend_news
      - brow_only
    - do: тапнуть по любому сюжету из топа новостей (обратить внимание на заголовок)
    - assert: |
        в той же вкладке происходит переход на выбранный сюжет,
        отображается тот же заголовок, что и на Главной,
        в рубрикаторе выделена рубрика, к которой относится сюжет

# кейсы были написаны для проверки специфики работы в вертикали ПП, с отрывом вертикалей кейсы стали неактуальны (проверка реферера есть в story)
#  открывает сюжет в новом табе ПП [manual]:
#    - tags:
#      - smoke
#      - pp_only
#    - do: открыть новости тапом по иконке в бендере ПП
#    - assert: в новом табе ПП открывается вертикаль новостей на странице рубрики 'Главное'
#    - do: полистать рубрику и тапнуть по любому неспортивному сюжету из топа рубрики
#    - assert: |
#        в текущем табе ПП открывается сюжет,
#        отображается тот же заголовок, что и в рубрике,
#        в рубрикаторе выделена рубрика, к которой относится сюжет,
#        (только в ПП android) урл сюжета содержит utm_referrer
#    - do: вернуться к рубрике Главное
#    - do: проскроллить рубрику вниз до лоадера и подождать загрузки новой порции карточек (при быстром интернете лоадер может не показываться)
#    - do: тапнуть по любому неспортивному сюжету из подгруженной порции
#    - assert: |
#        в текущем табе ПП открывается сюжет,
#        отображается тот же заголовок, что и в рубрике,
#        в рубрикаторе выделена рубрика, к которой относится сюжет,
#        (только в ПП android) урл сюжета содержит utm_referrer
#
#  открывает спортивный сюжет в текущем табе ПП на сервисе Яндекс.Спорт[manual]:
#    - tags:
#      - smoke
#      - pp_only
#    - do: открыть вертикаль новостей тапом по иконке в бендере ПП
#    - assert: открывается вертикаль новостей на странице рубрики 'Главное' (может открываться в оверлее - зависит от эксперимента ПП)
#    - do: тапнуть по любому спортивному сюжету
#    - assert: |
#        в текущем табе ПП, а не в вертикали, открывается сюжет на сервисе Яндекс.Спорт (другой рубрикатор),
#        на странице сюжета есть шапка и рубрикатор
#
#  не загружает новые карточки при скролле в ПП[manual]:
#    - tags:
#      - pp_only
#    - do: перейти в рубрику Коронавирус (если вы находитесь не в России, рубрика может отсутствовать - пропустите шаги до георубрики)
#    - assert: отображаются новости о коронавирусе
#    - do: скроллить страницу вниз, пока не закончатся карточки
#    - assert: новые карточки не подгружаются, футер в вертикали ПП не отображается (в вебвью футер отображаться может)
#    - do: перейти в георубрику
#    - assert: отображаются новости соответствующего региона
#    - do: скроллить страницу вниз, пока не закончатся карточки
#    - assert: новые карточки не подгружаются, отображается реклама и футер
#
#  позволяет открыть сервис Яндекс.Спорт в новом табе ПП [manual]:
#    - tags:
#        - pp_only
#    - do: открыть вертикаль новостей тапом по иконке в бендере ПП
#    - assert: открывается вертикаль новостей на странице рубрики 'Главное' (может открываться в оверлее - зависит от эксперимента ПП)
#    - do: проскроллить рубрикатор вправо, тапнуть по рубрике Спорт
#    - assert: |
#        в новом табе ПП, а не в вертикали, открывается сервис Яндекс.Спорт на странице рубрики Главное,
#        на странице есть шапка сервиса Яндекс.Спорт,
#        (только в ПП android) урл содержит utm_referrer
#
#  открывается в вертикали ПП [manual]:
#    - tags:
#        - pp_only
#    - do: открыть вертикаль новостей тапом по иконке в бендере ПП
#    - assert: открывается вертикаль новостей на странице рубрики 'Главное' (может открываться в оверлее - зависит от эксперимента ПП)
#    - do: проскроллить рубрикатор вправо, тапнуть по любой рубрике, кроме рубрики Спорт
#    - assert: |
#        в вертикали, а не в новом табе ПП, открывается лента соответствующей рубрики,
#        рубрика в рубрикаторе выделена

  содержит рекламу:
    - tags:
      - smoke
      - advert
      - backend_news
      - smoke_zen
    - assert: в шапке отображается реклама
    - screenshot: внешний вид соответствует скриншоту [culture]
    - do: проскроллить страницу ниже 5 новости
    - assert: после пятой новости отображается рекламный блок, который отделен от новости отступами сверху и снизу
    - do: поскроллить страницу вниз
    - assert: |
        следующая рекламная карточка отображается через 5 новостей от первого рекламного блока,
        последующие рекламные блоки отображаются после каждой шестой новости

  Происшествия не содержит рекламу:
    - tags:
      - smoke
      - advert
      - backend_news
      - smoke_zen
    - do: перейти в рубрику Происшествия 'https://yandex.ru/news/rubric/incident'
    - assert: открывается страница рубрики Происшествия, в шапке отсутствует реклама
    - screenshot: внешний вид соответствует скриншоту [incident]
    - do: проскроллить страницу ниже 5 новости
    - assert: после пятой новости отсутствует рекламный блок
    - do: поскроллить страницу вниз
    - assert: в ленте новостей отсутствует реклама
    - do: перейти в рубрику Коронавирус
    - assert: в шапке и ленте новостей отсутствует реклама

  с подрубрикатором под шапкой:
    - tags:
      - subrubrics
    - do: перейти в рубрику Общество 'https://yandex.ru/news/rubric/society'
    - assert: под шапкой отображается подрубрикатор
    - screenshot: внешний вид соответствует скриншоту [subrubrics-flag-2]

  региональная рубрика:
    - do: перейти в рубрику Москва 'https://yandex.ru/news/region/moscow'
    - screenshot: внешний вид соответствует скриншоту [subrubrics]

  с подрубрикатором под шапкой без рекламы:
    - tags:
      - subrubrics
    - params:
        flags:
          - 'yxneo_news_phone_rubric_adv-cfg=top:'
    - do: перейти в рубрику Общество 'https://yandex.ru/news/rubric/politics?flags=yxneo_news_phone_rubric_adv-cfg=top:'
    - assert: под шапкой отображается подрубрикатор, а реклама не отображается
    - screenshot: внешний вид соответствует скриншоту [subrubrics-no-adv]

  загружает новые карточки при медленном соединении [manual]:
    - reasonNotToAuto:
      - Нет команды для установления медленного соединения в автотесте
    - do: инструкция по переключению устройства в режим медленного интернета https://wiki.yandex-team.ru/eva/testing/tech/lifehacks/#medlennyjjinternet
    - do: снизить скорость интернета до 2G
    - do: перевести устройство в портретную ориентацию
    - do: скроллить страницу вниз, пока не закончатся карточки
    - assert: |
        под карточками отображается спиннер,
        загружается новая пачка карточек,
        все карточки отображаются корректно,
        обратите внимание! Некоторые карточки могут прогужаться с картинками-заглушками (пример - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-22_16-41-40.png), это ок! Заводить на такое баги не нужно.
    - do: перевести устройство в альбомную ориентацию
    - do: скроллить страницу вниз, пока не закончатся карточки
    - assert: |
        под карточками отображается спиннер,
        загружается новая пачка карточек,
        карточки отображаются корректно,
        обратите внимание! Некоторые карточки могут прогужаться с картинками-заглушками (пример - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-22_16-41-40.png), это ок! Заводить на такое баги не нужно.

  не загружает новые карточки при скролле в спецрубрике:
    - tags:
      - backend_news
    - do: перейти в рубрику 'Коронавирус' (если вы находитесь не в России, рубрика может отсутствовать - пропустите кейс)
    - assert: отображаются новости о коронавирусе
    - do: скроллить страницу вниз, пока не закончатся карточки
    - assert: новые карточки не подгружаются, отображается футер новостей

  не загружает новые карточки при скролле в георубрике:
    - tags:
      - backend_news
    - do: перейти в георубрику
    - assert: отображаются новости соответствующего региона
    - do: скроллить страницу вниз, пока не закончатся карточки
    - assert: новые карточки не подгружаются, отображается футер новостей

  позволяет перейти на сервис Яндекс.Спорт:
    - tags:
      - backend_news
    - do: проскроллить рубрикатор вправо, тапнуть по рубрике Спорт
    - assert: в новой вкладке открывается сервис Яндекс.Спорт на странице рубрики Главное

  не имеет повторяющихся карточек [manual]:
    - tags:
      - backend_news
      - smoke_zen
    - reasonNotToAuto:
      - Нужна ручная проверка карточек на дублируемость
    - do: перейти на страницу рубрики Главное
    - do: проскроллить страницу до подгрузки как минимум 3-х порций карточек
    - assert: в ленте рубрики не наблюдается повторяющихся карточек (могут быть похожие картинки, но заголовок и источник - разные)

  содержит ссылки в футере после всех карточек:
    - tags:
        - backend_news
        - no_assessors
    - do: перейти на страницу георубрики или рубрики Коронавирус
    - do: проскроллить страницу вниз пока не закончатся карточки
    - assert: |
        на сером фоне после блока рекламы отображается футер,
        внешний вид https://jing.yandex-team.ru/files/terenandrevna/2020-05-21_13.28.23-yuf9u.png
    - screenshot: внешний вид соответствует скриншоту [rubric_footer]
    - do: перейти по каждой ссылке в футере
    - assert: все ссылки открываются в новой вкладке

  региональная корректно отображает Другие регионы:
    - do: перейти по ссылке https://yandex.ru/news/region/moscow
    - do: тапнуть по Другие регионы
    - assert: откроется модальное окно со списком российских регионов

# покрыто е2е
#  региональная содержит статистику для выбранного региона [manual]:
#    - tags:
#        - smoke
#        - backend_news
#    - do: перейти по ссылке https://yandex.ru/news/region/moscow
#    - do: поскроллить страницу до футера
#    - assert: футер содержить ссылку 'Сейчас в СМИ Москва. Статистика'
#    - do: поскроллить страницу до хедера
#    - do: тапнуть по Другие регионы
#    - assert: откроется модальное окно со списком российских регионов
#    - do: выбрать Санкт-Петербург
#    - do: поскроллить страницу до футера
#    - assert: футер содержить ссылку 'Сейчас в СМИ Санкт-Петербург. Статистика'
#    - do: поскроллить страницу до хедера
#    - do: тапнуть по Другие регионы
#    - do: во вкладке 'Зарубежные новости' выбрать 'Япония'
#    - assert: открывается страница с сюжетами, связанными с Японией
#    - do: поскроллить страницу до хедера
#    - assert: футер содержить ссылку 'Сейчас в СМИ. Статистика'

  может содержать подрубрикатор:
    с подрубриками:
      - tags:
        - smoke
        - backend_news
        - smoke_zen
      - do: перейти рубрику 'Экономика'
      - assert: |
          рубрика содержит подрубрикатор,
          по умолчанию выделена вкладка подрубрикатора 'Все',
          внешний вид https://jing.yandex-team.ru/files/nightsonne/2020-10-22_16-57-18.png
      - do: поскроллить подрубрикатор вправо-влево
      - assert: рубрикатор скроллится
      - do: тапнуть по подрубрике 'Недвижимость'
      - assert: |
          фон элемента подрубрикатора становится черным, шрифт - белым,
          выделенный пункт подрубрикатора находится в области видимости пользователя,
          в ленте отображены новости по теме 'Недвижимость',
          подрубрикатор не содержит баббл темы, которая не относится к подрубрике (например, темы 'Экономический кризис')
          внешний вид https://jing.yandex-team.ru/files/nightsonne/2020-10-22_17-01-03.png
    с темами:
      - tags:
        - smoke
        - backend_news
        - smoke_zen
      - do: перейти рубрику 'Политика' или любую рубрику, где в подрубрикаторе есть элемент перехода на страницу темы
      - assert: |
          рубрика содержит подрубрикатор с подрубриками и темами,
          по умолчанию выделена вкладка подрубрикатора 'Все'
      - do: тапнуть по элементу подрубрикатора с темой (например, Украинский кризис)
      - assert: в той же вкладке происходит переход на страницу соответствующей темы

  позволяет перейти в котировки:
    - tags:
      - smoke
      - backend_news
    - do: открыть выдачу сервиса на странице рубрики 'Экономика'
    - assert: |
        рубрика содержит подрубрикатор,
        по умолчанию выделена вкладка подрубрикатора 'Все',
        внешний вид https://jing.yandex-team.ru/files/nightsonne/2020-10-22_16-57-18.png
    - do: поскроллить подрубрикатор до элемента 'Котировки' и тапнуть по нему
    - assert: |
        (для браузера) открывается страница котировок в той же вкладке,
        (для ПП) открывается страница котировок во внутреннем браузере пп, а не в вертикали

# Кейсы закомменчены, тк рубрику Видео убрали в задаче https://st.yandex-team.ru/NEWREL-2423
#  Видео позволяет перейти в видео сюжет [manual]:
#    - browsers:
#        notFor:
#        - ios-safari-9-touch
#        - android-browser-5.1-touch
#    - tags:
#      - smoke
#      - backend_news
#    - do: открыть выдачу сервиса на странице рубрики 'Видео'
#    - do: перейти в любой НЕспортивный сюжет из топа со страницы рубрики
#    - assert: |
#        раскрывается окно просмотрщика с крестиком в правом верхнем углу,
#        видео, которое было выбрано в сюжете, проигрывается автоматически, либо по тапу на кнопку плей,
#        в шапке просмотрщика над видео отображается заголовок сюжета и название источника сюжета,
#        на самом видео в правом верхнем углу отображается источник видео,
#        под каждым видео отображается заголовок видео и название источника видео,
#        под видео может отображаться кнопка Показать еще n видео, если видео в сюжете несколько,
#        под видео сюжета отображается лента рекомендованных видео с заголовком Интересное,
#        внешний вид - https://jing.yandex-team.ru/files/terenandrevna/20200825_13%3A34%3A50.png
#    - do: включить звук на видео в просмотрщике и закрыть его тапом по крестику
#    - assert: |
#        открывается сюжет, заголовок которого совпадает с заголовком, который был над видео в просмотрщике,
#        видео не воспроизводится, звука нет
#    - do: тапнуть на основное видео
#    - assert: видео в просмотрщике проигрывается сначала, без звука
#    - do: проскроллить ленту просмотрщика на 2-3 экрана
#    - assert: у каждого видео есть превью
#    - do: закрыть окно просмотрщика по крестику
#    - assert: |
#        происходит переход к сюжету,
#        ни одно видео не воспроизводится, звук не играет,
#        в рубрикаторе выделена не видеорубрика, а рубрика, к которой относится сюжет (например, Общество)
#    - do: нажать кнопку 'Назад' браузера
#    - assert: осуществляется переход на просмотрщик
#    - do: нажать кнопку 'Назад' браузера
#    - assert: осуществляется переход на страницу рубрики, с которой был сделан переход в сюжет

# Кейс закомменчен, тк рубрику Видео убрали в задаче https://st.yandex-team.ru/NEWREL-2423
#  Видео должна содержать карточки новостей с видео:
#    - browsers:
#        notFor:
#        - ios-safari-9-touch
#        - android-browser-5.1-touch
#    - do: перейти в рубрику 'Видео'
#    - do: поскроллить рубрику
#    - assert: |
#        все новостные карточки содержат видео,
#        видео не выходит за пределы блока карточки и не перекрывает собой заголовок, аннотацию и другие элементы карточки,
#        скрин https://jing.yandex-team.ru/files/an-smirn0v/photo_2021-03-15_18-18-38.jpg ,
#        при скролле добавляются новые карточки

  Экономика позволяет ознакомиться с новостями определенной тематики [manual]:
    - tags:
      - backend_news
    - Case Type: CH
    - reasonNotToAuto:
      - Данный кейс включает ХП
    - do: открыть выдачу сервиса на странице рубрики 'Экономика'
    - do: перейти в подрубрику 'Цены на бензин в Европе'
    - assert: страница обновляется, все новости в ленте соответствуют тематике подрубрики

  Видео позволяет перейти в основной сюжет через страницу media:
    - do: открыть выдачу сервиса на странице рубрики 'Видео'
    - do: перейти в любой не спортивный сюжет из топа со страницы рубрики
    - assert: раскрывается окно просмотрщика (страница media)
    - do: включить звук на видео в просмотрщике и тапнуть на наименование над видео
    - assert: |
        осуществляется переход на страницу сюжета в этой же вкладке,
        ни одно видео не воспроизводится, отображается превью, кнопки плей и название источника в нижнем левом углу,
        в рубрикаторе выделена не видеорубрика, а рубрика, к которой относится сюжет (например, Общество)

  не содержит рекламный блок top, если в топ-1 есть траурный сюжет:
    - tags:
      - backend_news
    - do: открыть выдачу сервиса на странице рубрики 'Главное'
    - do: прочитать заголовок и аннотацию первой новостной карточки
    - assert: |
        если первая карточка не относится к траурному сюжету, сверху под рубрикатором отображается рекламный блок,
        если первая карточка относится к траурному сюжету, сверху под рубрикатором рекламный блок не отображается,
        (траурный сюжет - сюжет об убийстве, смерти, тяжелых травмах, захвате заложников, теракте),
        внешний вид при отсутствии рекламного блока - https://jing.yandex-team.ru/files/nightsonne/2021-11-12_14-14-00%20%282%29.png

  не содержит рекламный блок main, если на позиции топ-5 есть траурный сюжет:
    - do: открыть выдачу сервиса на странице рубрики 'Главное'
    - do: прочитать заголовок и аннотацию первой новостной карточки
    - assert: |
        если пятая карточка не относится к траурному сюжету, под карточкой отображается рекламный блок,
        если пятая карточка относится к траурному сюжету, под карточкой рекламный блок не отображается,


#  Видео позволяет воспроизвести видео в спортивном сюжете [manual]:
#    - browsers:
#        notFor:
#        - ios-safari-9-touch
#        - android-browser-5.1-touch
#    - tags:
#      - smoke
#      - backend_news
#    - do: перейти на страницу рубрики 'Видео'
#    - do: перейти в любой спортивный сюжет со страницы рубрики 'Видео'
#    - assert: |
#        раскрывается окно просмотрщика с крестиком в правом верхнем углу,
#        видео, которое было выбрано в сюжете, проигрывается автоматически, либо по тапу на кнопку плей, без звука,
#        в шапке просмотрщика над видео отображается заголовок сюжета и название источника сюжета,
#        на самом видео в правом верхнем углу отображается источник видео,
#        под видео отображается заголовок видео и название источника видео,
#        под видео может отображаться кнопка "Показать еще n видео", если видео в сюжете несколько,
#        под видео сюжета отображается лента рекомендованных видео с заголовком Интересное (Обратите внимание! Может отображаться блок "Фото" и только ниже него "Интересное" - это ок, заводить на такое баги не нужно!)
#    - do: проскроллить ленту просмотрщика на 2-3 экрана
#    - assert: у каждого видео есть превью
#    - do: закрыть окно просмотрщика по крестику
#    - assert: |
#        происходит переход к спортивному сюжету в сервисе Я.Спорт,
#        наименование сюжета совпадает с тем, которое было в просмотрщике,
#        видео может отличаться от того, что проигрывалось в просмотрщике,
#        видео воспроизводится сначала без звука

#  Видео содержит рекламу [manual]:
#    - browsers:
#        notFor:
#        - ios-safari-9-touch
#        - android-browser-5.1-touch
#    - do: открыть выдачу сервиса на странице рубрики 'Видео'
#    - do: перейти в любой сюжет тапом по заголовку в новостной карточке
#    - assert: |
#        раскрывается окно просмотрщика,
#        видео воспроизводится автоматически, либо по тапу на кнопку плей, без звука,
#    - do: подождать 30 секунд видео (если видео длительностью < 40сек, переключиться на другое видео сюжета или перейти в другой нетраурный сюжет)
#    - do: надо именно подождать, перемотка не сработает
#    - assert: на 30ой секунде видео прерывается рекламой
#    - do: дождаться окончания рекламы или тапнуть Пропустить
#    - assert: видео продолжает воспроизведение с места, на котором прервалось рекламой
#    - do: промотать к следующему видео в просмотрщике (либо нажать на кнопку "Показать еще N видео" и там тапнуть по любому, либо проскролить к блоку "Интересное")
#    - do: снова подождать 30 секунд видео (если видео длительностью < 40сек, проскроллить до другого видео)
#    - assert: на 30ой секунде видео прерывается рекламой


  Экономика корректно отображается в темной теме:
    - do: открыть выдачу сервиса на странице рубрики "Экономика"
    - assert: рубрика и подрубрики отображаются в темной теме корректно


  корректно отображается в темной теме на главной:
    - do: открыть выдачу сервиса на странице главной рубриик
    - assert: рубрика отображается в темной теме корректно

  изменяет цвет, в зависимости от установленной системной темы в пп [manual]:
    - tags:
      - smoke_zen
    - reasonNotToAuto:
      - Нет возможности автоматизировать реальную смену системной темы на устройстве
    - tags:
        - pp_only
    - do: темная тема будет работать только для российских пользователей. Если вы не из России - пропустите кейс.
    - do: обратите внимание! Кейс нужно выполнять только в пп! для android нужна версия пп ТОЛЬКО ВЫШЕ 22.1.4, версии младше категорически НЕ ПОДХОДЯТ. Пропустите, пожалуйста, кейс, если у вас нет возможности выполнить его на ios или android с версией пп выше 22.1.4
    - do: перед выполнением кейса обязательно необходимо включить темную тему на устройстве (как это можно сделать, описано в инструкции - https://wiki.yandex-team.ru/eva/testing/projects/nerpa/#nastrojjkatemnojjtemynaustrojjstve). Если темная тема у вас уже включена, то ничего больше делать не нужно, просто выполняйте кейс далее
    - do: перейти на тестовый стенд
    - assert: |
        новости отображаются в темной теме,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-01-25_14-45-41.png
    - do: переключить системную тему на устройстве на светлую
    - do: вернуться на главную страницу Яндекс.Новости (https://yandex.ru/news)
    - assert: |
        новости отображаются в стандартной светлой теме,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-01-25_14-47-26.png

  изменяет цвет в рамках системной темной темы и настройках браузера [manual]:
    - tags:
      - smoke_zen
    - reasonNotToAuto:
      - Нет возможности автоматизировать реальную смену системной темы на устройстве
    - tags:
        - brow_only
    - browsers:
        notFor:
        - android-samsung-internet-5-touch
        - android-samsung-internet-6-touch
        - android-miui-9-touch
        - android-miui-touch
    - do: темная тема будет работать только для российских пользователей. Если вы не из России - пропустите кейс.
    - do: перед выполнением кейса обязательно необходимо включить темную тему на устройстве (как это можно сделать, описано в инструкции - https://wiki.yandex-team.ru/eva/testing/projects/nerpa/#nastrojjkatemnojjtemynaustrojjstve). Если темная тема у вас уже включена, то ничего больше делать не нужно, просто выполняйте кейс далее
    - do: открыть тестовый стенд в инкогнито
    - assert: |
        новости отображаются в темной теме,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-01-25_14-45-41.png
    - do: открыть https://yandex.ru/tune/common и выбрать настройку "Темное", сохранить, заново выбрать "Светлое" и сохранить
    - do: открыть https://yandex.ru/news
    - assert: |
        новости отображаются в стандартной светлой теме,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-01-25_14-47-26.png

  изменяет цвет в рамках системной светлой темы и настройках браузера [manual]:
    - reasonNotToAuto:
      - Нет возможности автоматизировать реальную смену системной темы на устройстве
    - tags:
        - brow_only
    - browsers:
        notFor:
        - android-samsung-internet-5-touch
        - android-samsung-internet-6-touch
        - android-miui-9-touch
        - android-miui-touch
    - do: темная тема будет работать только для российских пользователей. Если вы не из России - пропустите кейс.
    - do: перед выполнением кейса обязательно необходимо включить светлую тему в общих настройках самого браузера и на самом устройстве (как это можно сделать, описано в инструкции - https://wiki.yandex-team.ru/eva/testing/projects/nerpa/#nastrojjkatemnojjtemynaustrojjstve). Если светлая тема у вас уже включена, то ничего больше делать не нужно, просто выполняйте кейс далее
    - do: открыть тестовый стенд в инкогнито
    - assert: |
        новости отображаются в стандартной светлой теме,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-01-25_14-47-26.png
    - do: открыть https://yandex.ru/tune/common и выбрать "Темное"
    - assert: |
        новости отображаются в темной теме,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-01-25_14-45-41.png

files:
  - features/news/rubric/rubric.phone.hermione.js
  - features/news/rubric/rubric.phone.hermione.e2e.js

tags:
  - neo
  - rubric

qa-engineer: a-groza

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
