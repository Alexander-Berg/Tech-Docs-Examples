feature: Страница "Лента новостей"

description: В кейсах описываются компоненты и общий вид элементов на странице ленты новостей.

specs-integration:
  содержит список новостей на следующих страницах [manual]:
    - do: открыть страницу "Лента новостей" https://partner-tst.news.yandex.ru/v2/feed?userid=37427587&agencyid=1002
    - assert: страница содержит список новостей для выбранного источника (источник = наименование партнера в шапке страницы https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_11-29-53.png)
    - do: проскролить страницу к футеру
    - assert: внизу страницы отображается пагинатор
    - do: кликнуть на любой номер страницы
    - assert: |
        загрузилась лента новостей для выбранной страницы,
        в url страницы добавлен параметр &page=n, где n = номер страницы-1
  
  позволяет удалить новость из ленты [manual]:
    - do: открыть страницу "Лента новостей" https://partner-tst.news.yandex.ru/v2/feed?userid=448850646
    - do: нажать на троеточие около любой новости
    - assert: отобразился попап с пунктом "Удалить из новостей"
    - do: нажать этот пункт "Удалить из новостей"
    - assert: |
        отобразился попап с подверждением удаления
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_12-06-12.png
    - do: нажать "Отмена"
    - assert: попап закрылся
    - do: еще раз открыть попап и нажать "Удалить"
    - assert: |
        появилось уведомление о том, что документ отправлен на удаление
        появился плашка около новости "На удалении",
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_12-07-24.png
    - do: нажать на плашку "На удалении"
    - assert: |
        появился попап-объяснение,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_12-08-52.png
    - do: нажать "Закрыть"
    - assert: попап закрылся

specs:
  корректно отображается для пользователя без новостей:
    - do: открыть страницу "Лента новостей" https://partner-tst.news.yandex.ru/v2/feed?userid=448850646&agencyid=1675
    - assert: отображается попап-онбординг
    - do: закрыть попап
    - assert: отображается страница с заглушкой "В ленте пока нет материалов"

  имеет возможность поиска по существующему url сюжета [manual]:
    - do: открыть страницу "Лента новостей" https://partner-tst.news.yandex.ru/v2/feed?userid=37427587&agencyid=1002
    - assert: |
        страница содержит инпут - "Поиск по URL",
        в конце инпута отображается лупа,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-11-29_14-54-26.png
    - do: кликнуть в инпут
    - assert: |
        наименование инпута отобразилось вверху инпута,
        границы инпута прокрасились в желтый
    - do: ввести в инпут урл источника существующего сюжета из ленты и нажать на лупу
    - assert: |
        отобразился искомый сюжет,
        url остался отображаться в поисковом инпуте

  по умолчанию отображает весь список новостей от партнера:
    - do: открыть страницу "Лента новостей" https://partner-tst.news.yandex.ru/v2/feed?userid=37427587&agencyid=1002
    - assert: |
        страница содержит список новостей для выбранного источника (источник = наименование партнера в шапке страницы https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_11-29-53.png),
        по умолчанию отображаются все новости от партнера,
        все фильтры по умолчанию сброшены,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_11-30-59.png

  отображает список новостей по фильтру "Заблокированные":
    - do: открыть страницу "Лента новостей" https://partner-tst.news.yandex.ru/v2/feed?userid=37427587&agencyid=1002&filter=deleted_by_agency
    - assert: |
        отобразилась лента новостей по выбранному фильтру,
        около наименования новости отображается плашка выбранного фильтра - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_11-35-12.png
    - do: нажать на плашку около заголовка
    - assert: |
        отобразился попап с объяснением возможных причин блокировки,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_11-45-15.png
    - do: нажать на кнопку "Закрыть"
    - assert: попап закрылся

  отображает список новостей по фильтру "Удаленные":
    - do: открыть страницу "Лента новостей" https://partner-tst.news.yandex.ru/v2/feed?userid=448850646&filter=manually_deleted_by_partner
    - assert:
        отобразилась лента новостей по выбранному фильтру,
        карточка новости затемнена,
        около наименования новости отображается плашка выбранного фильтра,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_12-10-13.png

  отображает список новостей по фильтру "Дубликаты":
    - do: открыть страницу "Лента новостей" https://partner-tst.news.yandex.ru/v2/feed?userid=448850646&filter=dups
    - assert: |
        отобразилась лента новостей по выбранному фильтру,
        около наименования новости отображается плашка выбранного фильтра - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_11-40-46.png
    - do: нажать на плашку около заголовка
    - assert: |
        отобразился попап с объяснением,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_11-51-43.png
    - do: нажать на кнопку "Закрыть"
    - assert: попап закрылся

  отображает список новостей по фильтру "Есть видео":
    - do: открыть страницу "Лента новостей" 
    - assert: |
        отобразилась лента новостей по выбранному фильтру,
        карточка новости содержит ссылку "Видео" - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_11-41-08.png

  отображает список новостей по фильтру "Есть изображение":
    - do: открыть страницу "Лента новостей" https://partner-tst.news.yandex.ru/v2/feed?userid=448850646&filter=has_pictures
    - assert: отобразилась лента новостей по выбранному фильтру

  отображает список новостей по фильтру "Возможно, в заголовке опечатка":
    - do: открыть страницу "Лента новостей" https://partner-tst.news.yandex.ru/v2/feed?userid=448850646&flags=yxnews_show_misspells=1&filter=has_misspells
    - assert: |
        отобразилась лента новостей по выбранному фильтру,
        около наименования новости отображается плашка выбранного фильтра - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_11-43-02.png
    - do: нажать на плашку около заголовка
    - assert: |
        отобразился попап с объяснением,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_11-53-56.png
    - do: нажать на кнопку "Закрыть"
    - assert: попап закрылся

  дает возможность пожаловаться на плашку "Возможно, в заголовке опечатка":
    - do: открыть страницу "Лента новостей" https://partner-tst.news.yandex.ru/v2/feed?userid=448850646&flags=yxnews_show_misspells=1&filter=has_misspells
    - assert: |
        отобразилась лента новостей по выбранному фильтру,
        около наименования новости отображается плашка выбранного фильтра - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_11-43-02.png
    - do: нажать на плашку около заголовка
    - assert: |
        отобразился попап с объяснением,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_11-53-56.png
    - do: нажать на кнопку "Соообщить об ошибке"
    - assert: |
        попап закрылся,
        отобразилось всплывающее сообщение с благодарностью об обратной связи - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-29_18-17-51.png
    - do: нажать на крестик
    - assert: сообщение закрылось

  отображает список новостей по фильтру "Рекомендации к заголовку":
    - do: открыть страницу "Лента новостей" https://partner-tst.news.yandex.ru/v2/feed?userid=448850646&flags=yxnews_show_yellowness&filter=has_yellowness
    - assert: |
        отобразилась лента новостей по выбранному фильтру,
        около наименования новости отображается плашка выбранного фильтра - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_11-44-06.png
    - do: нажать на плашку около заголовка
    - assert: |
        отобразился попап с объяснением,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_11-53-20.png
    - do: нажать на кнопку "Закрыть"
    - assert: попап закрылся

  отображает список новостей за выбранный промежуток времени [manual]:
    - do: открыть страницу "Лента новостей" https://partner-tst.news.yandex.ru/v2/feed?userid=448850646&from=1646150400&to=1646152200
    - assert: |
        в датапикерах отобразились выбранные даты и время - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_11-57-54.png ,
        отобразились результаты за выбранный промежуток времени - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-16_12-01-21.png

files:
  - features/news-partners/feed/feed.desktop.hermione.e2e.js
  - features/news-partners/feed/feed.desktop.hermione.js

qa-engineer: kossakovskaya

manager: halilu

tags:
  - news-partners

tlds:
  - ru
