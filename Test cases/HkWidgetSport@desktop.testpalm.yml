feature: Страница хоккейного матча десктопного спорта

description: Страница хоккейного матча обязательно должна содержать виджет с названиями команд и счетом (или заглушкой для счета в случае будущего матча), а так же МОЖЕТ содержать (а может и не содержать) другие блоки - большое видео, связанные видео, связанные новости, ход матча, состав, турнирную таблицу, другие матчи. Само по себе отсутствие любого из этих блоков на страницах не является багом. Если в кейсе нужно проверить один из этих блоков, а его нет ни в одном матче - кейс нужно скипнуть с соответствующим комментарием. Кроме того, нужно скипнуть кейс для страницы матча, если в момент выполнения кейса не проводятся хоккейные турниры, и на сервисе нет хоккейных матчей.

specs:
  beforeEach:
#    - do: открыть рубрику Хоккей на сервисе Яндекс.Спорт
    - do: открыть хоккейный календарь по прямой ссылке https://yandex.ru/sport/calendar/hockey
 #   - do: проскроллить страницу до спортивного календаря
 #   - assert: отображаеся спортивный матч-центр с вкладками 'Вчера', 'Сегодня' и 'Завтра'
    - assert: |
        открывается хоккейный календарь,
        календарь содержит дата-пикер https://jing.yandex-team.ru/files/nightsonne/2020-04-13_19-33-07.png
    - do: кликнуть на дата-пикер и в выпадающем календаре выбрать дату 7 марта 2020 https://jing.yandex-team.ru/files/nightsonne/2020-04-13_19-35-38.png
    - assert: отображается список матчей за 7 марта

  содержит основные элементы [manual]:
    - automation: NERPA-8437
    - tags: backend_sport
    - do: перейти на страницу хоккейного матча по клику на любой матч
    - assert: |
        на странице есть виджет результата матча со счетом, иконками и названием команд,
        под виджетом может располагаться блок с видео матча, который содержит одно большое видео и несколько маленьких видео справа от большого,
        под виджетом могут быть блоки 'Ход матча', 'Состав', 'Турнирная таблица', 'Другие матчи'
        новостные карточки спорта могут отображаться слева и под блоками,
        справа присутствует рекламный блок,
        верстка не едет, блоки и элементы не наезжают друг на друга
    - do: поскролить страницу вверх-вниз
    - assert: |
        верстка не едет, блоки и элементы не наезжают друг на друга,
        какие-то блоки (зависит от их количества и расположения на странице) и реклама могут залипать при скролле и перемещаться в области между рубрикатором и новостными карточками,
        рубрикатор залипает при скролле вниз и остается в поле видимости
    - do: кликнуть на любую рубрику в рубрикаторе
    - assert: происходит переход в выбранную рубрику

  содержит рекламу [manual]:
    - automation: NERPA-8437
    - tags: backend_sport
    - do: перейти в сюжет о хоккейном матче по клику на любой матч
    - do: отключить блокировщик рекламы
    - assert: справа отображается рекламный блок
    - do: включить блокировщик рекламы, обновить страницу
    - assert: справа отображается рекламный блок
    - do: поскролить страницу вверх-вниз
    - assert: |
        верстка не едет, блоки и элементы не наезжают друг на друга,
        какие-то блоки (зависит от их количества и расположения на странице) и реклама могут залипать при скролле и перемещаться в области между рубрикатором и новостными карточками,
        рубрикатор залипает при скролле вниз и остается в поле видимости

  перестраивает сетку при масштабировании страницы [manual]:
    - automation: NERPA-8437
    - do: перейти в сюжет о хоккейном матче по клику на любой матч
    - do: помасштабировать страницу в сторону уменьшения масштаба браузера
    - assert: |
        при изменении масштаба браузера страница перестраивается,
        верстка не едет, карточки не наезжают друг на друга, не появляются дыры на месте карточек
    - do: помасштабировать страницу в сторону увеличения масштаба браузера
    - assert: |
        при изменении масштаба браузера страница перестраивается,
        верстка не едет, карточки не наезжают друг на друга, не появляются дыры на месте карточек
    - do: поресайзить окно браузера с открытой страницей сервиса
    - assert: |
        при ресайзе страница перестраивается,
        верстка не едет, карточки не наезжают друг на друга, не появляются дыры на месте карточек

  может содержать видео [manual]:
    - automation: NERPA-9339
    - assert: некоторые матчи содержат иконку-индикатор видео, скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-20_17-36-40.png
    - do: перейти на страницу хоккейного матча кликом по матчу с иконкой видео
    - assert: |
          страница матча может содержать большое видео, скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-20_17-38-37.png,
          видео содержит название матча ,
          справа от большого видео может быть расположена вертикальная карусель видео моментов матча
    - do: навести курсор на блок с видео
    - assert: курсор меняет стиль
    - do: тапнуть на большое видео
    - assert: в новой вкладке открывается видео матча на сервисе Яндекс.Эфир или другом спортивном источнике (в IE возможна надпись на видео "Ваш браузер не поддерживает проигрывание защищённого видео. Попробуйте открыть ссылку в другом браузере.")
    - do: вернуться на вкладку с матчем
    - do: поскроллить карусель видео
    - assert: |
          карусель скроллится,
          каждое видео содержит подпись момента,
          длинные названия моментов корректно обрезаются многоточием
    - do: тапнуть на любое видео в карусели
    - assert: в новой вкладке открывается видео момента

#  из блоков 'Вчера' или 'Сегодня' содержит хоккейный виджет [manual]:
  из списка прошедших матчей содержит хоккейный виджет [manual]:
    - automation: NERPA-9339
    - do: перейти на страницу хоккейного матча кликом по матчу со счетом
    - assert: |
        страница матча содержит хоккейный виджет,
        виджет содержит название лиги, статус матча, для завершенных матчей - время завершения, названия команд, счет,
        при победе по буллитам или в овертайме виджет содержит соответствующее указание рядом со счетом (буквы Б или ОТ),
        счет и название команды-победителя выделено жирным шрифтом,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-20_17-48-54-1.png
#  из блока 'Завтра' содержит хоккейный виджет [manual]:
#    - automation: NERPA-9339
#    - do: перейти на страницу хоккейного матча кликом по матчу в разделе 'Завтра'
#    - assert: |
#        страница матча содержит хоккейный виджет,
#        виджет содержит название лиги, названия команд, надпись 'Завтра' и время начала матча,
#        скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-20_17-50-20.png
#  из блока 'Завтра' может содержать превью трансляции матча [manual]:
#    - automation: NERPA-9339
#    - do: перейти на страницу хоккейного матча кликом по матчу в разделе 'Завтра' (проще найти в матчах НХЛ)
#    - assert: страница матча может содержать большое видео - превью трансляции матча, скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-20_17-53-04.png
#   - do: тапнуть на большое видео
#    - assert: в новой вкладке открывается страница трансляции на сервисе Яндекс.Эфир с превью и временем начала матча (в IE возможна надпись на видео "Ваш браузер не поддерживает проигрывание защищённого видео. Попробуйте открыть ссылку в другом браузере.")

#  из блоков 'Вчера' или 'Сегодня' может содержать блок 'Ход матча' [manual]:
  из списка прошедших матчей может содержать блок 'Ход матча' [manual]:
    - automation: NERPA-9339
    - do: перейти на страницу хоккейного матча кликом по матчу со счетом
    - assert: |
        страница матча может содержать блок 'Ход матча' (если в данном матче блока нет, открыть другой матч),
        блок содержит логотипы команд или флаги стран,
        в блоке отображаются все события матча с подписью характера события и времения,
        голы отмечены значком шайбы, буллиты - иконкой с буквой Б поверх шайбы,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-20_17-55-26.png
#  из блоков 'Вчера' или 'Сегодня' может содержать блок 'Состав' [manual]:
  из списка прошедших матчей может содержать блок 'Состав' [manual]:
    - automation: NERPA-9339
    - do: перейти на страницу хоккейного матча кликом по матчу со счетом
    - assert: |
        страница матча может содержать блок 'Состав' (если в данном матче блока нет, открыть другой матч),
        в блоке отображены составы команд с лого и названием,
        рядом с фамилией игрока, забившего гол, есть иконка шайбы и счетчик с количеством голов,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-20_17-58-23.png
#  из блоков 'Вчера' или 'Сегодня' может содержать блок 'Турнирная таблица' [manual]:
  из списка прошедших матчей может содержать блок 'Турнирная таблица' [manual]:
    - automation: NERPA-9339
    - do: перейти на страницу хоккейного матча кликом по матчу НХЛ или КХЛ со счетом
    - assert: |
        страница матча может содержать блок 'Турнирная таблица' (если в данном матче блока нет, открыть другой матч),
        в блоке есть переключатель групп (например, Запад - Восток),
        на узких экранах названия длинные названия команд обрезаются многоточием,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-20_18-13-54.png
    - do: попереключать группы
    - assert: |
        блоки корректно переключаются,
        выделено название активного блока серой подложкой,
        названия команд, на странице матча которых мы находимся, выделены жирным
    - do: поскролить страницу вверх-вниз
    - assert: |
        верстка не едет, блоки и элементы не наезжают друг на друга,
         блоки 'Турнирная таблица', 'Другие матчи' и рекламный блок могут залипать при скролле и перемещаться в области между рубрикатором и новостными карточками,
        рубрикатор залипает при скролле вниз и остается в поле видимости
#  из блоков 'Вчера' или 'Сегодня' может содержать блок 'Другие матчи' [manual]:
  из списка прошедших матчей может содержать блок 'Другие матчи' [manual]:
    - automation: NERPA-9339
    - do: перейти на страницу хоккейного матча кликом по матчу со счетом в разделе
    - assert: |
        страница матча может содержать блок 'Другие матчи' (если в данном матче блока нет, открыть другой матч),
        в блоке есть список матчей с лого команд и счетом или временем начала матча,
        на узких экранах названия длинные названия команд обрезаются многоточием,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-20_18-19-35.png
    - do: кликнуть на любой матч из блока 'Другие матчи'
    - assert: произошел переход на страницу соответствующего матча
    - do: вернуться назад с помомщью браузерной кнопки Назад
    - do: поскролить страницу вверх-вниз
    - assert: |
        верстка не едет, блоки и элементы не наезжают друг на друга,
        блоки 'Турнирная таблица', 'Другие матчи' и рекламный блок могут залипать при скролле и перемещаться в области между рубрикатором и новостными карточками,
        рубрикатор залипает при скролле вниз и остается в поле видимости
    - do: проскроллить к блоку 'Другие матчи' и тапнуть по кнопке 'Все матчи'
    - assert: произошел переход на страницу хоккейного календаря в раздел 'Сегодня'

#  из блоков 'Вчера' или 'Сегодня' может содержать карусель о связанных с матчем новостях [manual]:
  из списка прошедших матчей может содержать карусель о связанных с матчем новостях [manual]:
    - automation: NERPA-9339
    - do: перейти на страницу хоккейного матча кликом по матчу со счетом
    - do: поскроллить матч ниже блока видео
    - assert: |
        страница матча может содержать карусель с карточками о связанных с матчем новостях (если в данном матче карточек нет, открыть другой матч),
        карточки о связанных с матчем новостях содержат иконку добавления в избранное (но не содержат иконку лайка и комментария),
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-20_18-26-35.png
    - do: тапнуть по любой карточке о связанных с матчем новостях
    - assert: в новой вкладке открывается страница источника

  содержит Новости хоккея [manual]:
    - automation: NERPA-9339
    - do: перейти на страницу хоккейного матча тапом на любой матч
    - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав' и пр до блока 'Новости хоккея'
    - assert: страница матча содержит новостные карточки
    - do: проскроллить страницу матча до лоадера
    - assert: загружаются новые карточки
    - do: проскроллить страницу на несколько порций карточек
    - assert: |
        новостной блок помимо новостных карточек может содержать карточки с каруселями видео и рекламные блоки,
        карусели видео скроллятся
    - do: тапнуть по заголовку или картинке любой новостной карточке
    - assert: в той же вкладке открывается страница сюжета
    - do: вернуться назад на страницу хоккейного матча
    - do: тапнуть по любому видео в любой карусели
    - assert: в новой вкладке открывается страница с видео

files: []

v-team: Sport

qa-engineer: nightsonne

manager: skhovaev

tags:
  - sportdesktop

tlds:
  - ru
  - ua
  - by
  - kz
  - uz
  - com
