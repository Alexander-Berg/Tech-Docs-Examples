feature: Авиа
type: Бронирование
description: >-
  Как попасть на страницу бронирования аэрофлота:

  * В поиске авиа поискать по направлению, по которому летает аэрофлот
  (например, Москва - Екатеринбург, или направление, указанное в кейсе).

  * Выбрать в фильтре по авиакомпаниям Аэрофлот

  * Кликнуть по сниппету с предложением Аэрофлота (где есть приписка Продает
  авиакомпания).

  * На открывшейся странице кликнуть по кнопке Купить для аэрофлота. //
  произойдет переход на travel-test

  ![image](https://jing.yandex-team.ru/files/shenfeld/2020-12-18_14.23.50-7x9wt.png)

  * **У Асессоров откроется travel.crowdtest** - должна открыться страница
  бронирования с формой ввода данных пассажиров

  Отсутствие лого АК не является багом или проблемой кейса!

  **Для Асессоров: Выполнить вход удается ТОЛЬКО через кнопку ЛК (рядом с
  кнопкой Войти) > кликнуть Войдите в аккаунт > Авторизоваться тестовым
  аккаунтом (ссылка ведет на passport-test.yandex.ru). Важно чтобы это был
  именно тестовый аккаунт, т.к. через свой аккаунт не впустит**

  ![image](https://jing.yandex-team.ru/files/shenfeld/2020-03-25_17.35.08-4bpdm.png)

  Нужно быть залогиненым. Проверяем только почту, потому что телефона у этого
  аккаунта нет (а свой не хочется добавлять).

  Для тестинга асессоры могут пользоваться тестовым аккаунтом :
  vladlen@yandex.ru password: v12345678
specs:
  Проверка обновления информации в localstorage:
    - do: Открыть новую вкладку браузера в режиме Инкогнито
    - do: Выполнить переход как описано в Description.
    - assert: |-
        * Переход сработал, открылась страница бронирования
    - do: |
        Указать данные пассажира
        Нажать на кнопку Оплатить
    - assert: |
        (Для асессоров) Осуществляется переход на страницу с информацией об успешной покупке билета
        (Для команды) Осуществляется переход на страницу оплаты
    - do: Ввести данные карты  4111 1111 1111 1111 12/24 123 и оплатить заказ (асессоры пропускают шаг)
    - assert: Оплата прошла. Осуществляется переход на страницу с информацией об успешной покупке билета
    - do: |
        Вернуться на главную страницу Портала
        Снова выполнить переход как описано в Description.
    - assert: |
        Переход сработал, открылась страница бронирования
        Данные пассажира предзаполнены той информацией, которая была указана в предыдущем заказе
    - do: |
        Изменить информацию в ФИО, дате рождения, номере документа
        Нажать на кнопку Оплатить
    - assert: |
        (Для асессоров) Осуществляется переход на страницу с информацией об успешной покупке билета
        (Для команды) Осуществляется переход на страницу оплаты
    - do: |
        Открыть Developer Tools (F12)
        Перейти во вкладку Application
        В боковом меню перейти в Storage - Local Storage
        Расхлопнуть и перейти по пункту с адресом сервиса
        Проверить информацию в yaTravel/bookPassengers/AVIA_BOOK
    - assert: Информация о пассажире обновилась в localstorage
manual: true
Функциональность: Бронирование
Устройство:
    - Десктоп
Страница: Бронирование
tlds: hard
Сервис: Авиа
Тестирование асессорами: Да
Окружение: Testing
