feature: Смартбаннер
specs:
  Вертикальная ориентация:
    params:
      foreverdata: '1239240421'
      exp_flags:
        - smartbanner_atom=1
    beforeEach:
      - do: |
          удалить cookie
          получить выдачу по запросу 'foreverdata'
      - assert: смартбаннер появился на выдаче
    Внешний вид:
      - screenshot: пример внешнего вида [default]
    При показе саджеста смартбаннер должен скрываться:
      - do: кликнуть в поисковой инпут
      - assert: |
          появился саджест
          смартбаннер скрылся
    При скролле смартбаннер должен остаться на выдаче:
      - do: проскроллить немного вниз
      - assert: смартбаннер виден
    При скролле до футера смартбаннер должен скрываться:
      - do: проскроллить вниз до футера
      - assert: смартбаннер скрылся
    По клику на кнопку 'Скачать' смартбаннер должен скрываться:
      - tech: проверить счётчик в кнопке 'Скачать' /$page/distr-smartbanner/ok
      - do: клик в кнопку 'Скачать'
      - assert: смартбаннер исчез
    По клику на кнопку 'Скачать' открывается ссылка:
      - do: клик в кнопку 'Скачать'
      - assert: |
          ссылка открылась в текущей вкладке
          произошел переход на маркет для скачивания приложения
    По клику на кнопку 'Закрыть' смартбаннер должен скрываться:
      - tech: проверить счётчик в кнопке 'Закрыть' /$page/distr-smartbanner/close
      - do: клик в кнопку 'Закрыть'
      - assert: смартбаннер исчез
  Горизонтальная ориентация:
    При перекрывании табов смартбаннер должен скрываться:
      - params:
          foreverdata: '2162081419'
          exp_flags:
            - smartbanner_atom=1
      - do: перевернуть телефон в ландшафтную (горизонтальную) ориентацию
      - assert: смартбаннер исчез при пересечении с таббаром, если не пересекается с таббаром — не исчезает
  Выключение смартбаннера:
    - params:
        foreverdata: '2162081419'
        exp_flags:
          - smartbanner_atom=1
          - distr_hide_smartbanner=1
    - do: |
        удалить cookie
        получить выдачу по запросу 'foreverdata'
    - assert: смартбаннер не появился на выдаче

files:
  - features/touch-phone/distr-smartbanner/DistrSmartbanner@touch-phone.hermione.js

tlds:
    - ru
    - by
    - kz
    - ua

counter: /$page/distr-smartbanner/ok

tags:
  - distribution
  - smartbanner
  - no_assessors # убрать после https://st.yandex-team.ru/SERPTEST-2384

v-team: Distribution

browsers:
  notFor:
    - searchapp
    - winphone
