feature: Form2
type: LayoutEcommerce

params:
  exp_flags:
    - analytics-disabled=1

browsers:
  - ios-safari-12-touch
  - ios-safari-11-touch
  - ios-safari-10-touch
  - ios-safari-9-touch

specs:
  Сохранение полей в LocalStorage:
    - do: открыть страницу https://yandex.ru/turbo?stub=form2/ecom-layout-form.json
    - assert: открылаь страница с формой
    - do: |
        в поле `ФИО` ввести `MrFreeman`
        в поле `Телефон` ввести `88888888888`
        в поле `Email` ввести `freeman@yandex.ru`
        в `Способ доставки` выбрать `Самовывоз 1`
        в `Способ оплаты` выбрать `Наличными при получении`
    - tech: выполнить в консоли localStorage.getItem('turbo-ecomm---pay') и убедиться, что там сохранены введенные значения
    - do: обновить страницу
    - assert: сохранились введенные выше значения
  Не автозаполняем радиогруппу, если в ls лежит несуществующее значение:
    - tags: no_assessors
    - do: открыть страницу https://yandex.ru
    - assert: открлась страница
    - do: в консоли выполнить localStorage.setItem('turbo-ecomm---pay', '{"delivery":{"value":"courier_0","checked":false}}')
    - do: открыть страницу https://yandex.ru/turbo?stub=form2/ecom-layout-form.json
    - assert: |
        открылась страница с формой
        в форме выбран первый способ доставки `Самовывоз`
    - do: выполнить в консоли JSON.parse(localStorage.getItem('turbo-ecomm---pay')).delivery.value
    - assert: вывелось значение `pickup_0`

  С кастомизацией:
    - do: открыть страницу https://yandex.ru/turbo?stub=form2/ecom-layout-form-custom-theme.json
    - assert: открылась форма
    - screenshot: внешний вид радиогруппы (выбранная опция может отличаться) [radio]
    - screenshot: внешний вид кнопки [button]

files:
  - platform/components/Form2/__tests__/Form2LayoutEcommerce@phone.hermione.js

v-team: Turbo

tags:
  - e-commerce
  - no_assessors #раскатили новый дизайн на 100%

manager: tanzwuta

qa-engineer: ianislav

tlds: none
