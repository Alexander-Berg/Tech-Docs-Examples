feature: Избранное

params:
    exp_flags:
        - analytics-disabled=1

aliases:
  - &zalogin
      - assert: появился попап "Почти готово" [https://jing.yandex-team.ru/files/skurhanski/chrome_Efx1Zlg8rQ.png]
      - do: кликнуть по кнопке "Войти и отложить товар"
      - assert: появилась страница (или попап) для ввода имени пользователя
      - do: залогиниться
      - assert: пользователь после залогина оказался в том же разделе, где кликал по сердечку
      - assert: на нижней навигационной панели появилось имя пользователя (и аватарка, если она установлена у пользователя)

specs:
    Пользователь разлогинен:
        beforeEach:
            - do: шаги необходимо выполнять в режиме инкогнито
            - do: разлогиниться в Яндексе
            - do: получить выдачу по запросу 'site:fulmar.ru каталог' (альтернативные запросы - 'site:super01.ru каталог')
            - assert: на выдаче присутствует сниппет(ы) с галереей карточек товаров [https://jing.yandex-team.ru/files/skurhanski/chrome_ziIi8LshqE.png]
            - do: кликнуть по любой ссылке сниппета для перехода на страницу магазина
            - assert: открылась страница магазина
            - do: кликнуть по пиктограмме Каталог на нижней панели, а затем кликнуть по любой карточке товара
            - assert: открылась страница описания товара
            - do: при дальнейшем выполнении шагов обращать внимание на сохранение позиции при переходах туда-обратно кнопками на устройстве, пустые экраны при переходах (не должно быть пустых мест, дыр и т.п. больше секунды нигде), кривую верстку, прыгания элементов, неработающую функциональность
        В карточке товара:
            Проверка добавления в избранное и удаления из него:
                - automation: TURBOUI-5011
                - assert: над картинкой товара отображается кнопка добавления в избранное в виде сердечка [https://jing.yandex-team.ru/files/skurhanski/wsvkWEjuy4.png]
                - do: добавить товар в избранное, кликнув на сердечко (запомнить данный товар, т.к. в дальнейшем нужно будет к нему снова вернуться)
                - *zalogin
                - assert: сердечко закрасилось в красный цвет [https://jing.yandex-team.ru/files/skurhanski/browser_LTkn51kJKK.png]
                - assert: над именем пользователя появилась подсказка о том, что товар добавлен в избранное, а также красный стикер и цифрой '1' (цвет подсказки соответствует общему цветомову оформлению магазина) [https://jing.yandex-team.ru/files/skurhanski/ShareX_CEegHqRrWn.png]
                - assert: кликнуть по иконке пользователя в нижней навигационной панели
                - assert: открылась страница профиля
                - assert: на странице профиля есть раздел 'Избранные товары' с красной меткой на сердечке [https://jing.yandex-team.ru/files/eshreder/d21433e9b6836032187005ff2f3d6d10.png]
                - do: кликнуть по ссылке 'Избранные товары'
                - assert: в новой вкладке открылся сервис Яндекс.Коллекции в разделе 'Избранные товары', в котором присутствует добавленный в избранное товар
                - do: закрыть вкладку с сервисом Яндекс.Коллекции
                - do: в разделе Каталог магазина найти товар, который ранее добавляли в избранное и кликнуть по нему
                - assert: |
                    открылась карточка товара
                    над картинкой товара отображается закрашенное в красный цвет сердечко
                - do: удалить товар из избранного, кликнув на сердечко
                - assert: сердечко перестало быть красным
                - assert: красный стикер на имени пользователя исчез
                - assert: кликнуть по иконке пользователя в нижней навигационной панели
                - assert: открылась страница профиля
                - assert: на странице профиля есть раздел 'Избранные товары' без красной метки на сердечке [https://jing.yandex-team.ru/files/eshreder/4c7add98895eeb4086cf302829ef71c7.png]
                - do: кликнуть по ссылке 'Избранные товары'
                - assert: в новой вкладке открылся сервис Яндекс.Коллекции в разделе 'Избранные товары', в котором отсутствует товар, ранее удаленный из избранного
            Проверка добавленной карточки:
                - automation: TURBOUI-5011
                - assert: над картинкой товара отображается кнопка добавления в избранное в виде сердечка [https://jing.yandex-team.ru/files/skurhanski/wsvkWEjuy4.png]
                - do: кликнуть по сердечку
                - *zalogin
                - assert: сердечко закрасилось в красный цвет [https://jing.yandex-team.ru/files/skurhanski/browser_LTkn51kJKK.png]
                - assert: над именем пользователя появилась подсказка о том, что товар добавлен в избранное, а также красный стикер с цифрой '1' (цвет подсказки соответствует общему цветомову оформлению магазина) [https://jing.yandex-team.ru/files/skurhanski/ShareX_CEegHqRrWn.png]
                - assert: кликнуть по иконке пользователя в нижней навигационной панели
                - assert: открылась страница профиля
                - assert: на странице профиля есть раздел 'Избранные товары' с красной меткой на сердечке [https://jing.yandex-team.ru/files/eshreder/d21433e9b6836032187005ff2f3d6d10.png]
                - do: кликнуть по ссылке 'Избранные товары'
                - assert: в новой вкладке открылся сервис Яндекс.Коллекции в разделе 'Избранные товары', в котором присутствует добавленный в избранное товар
                - assert: в карточке отображается та же картинка, что была в магазине
                - do: находясь на сервисе Яндекс.Коллекции, кликнуть по добавленной карточке, а затем по кнопке 'Подробнее на "название_сайта"'
                - assert: |
                    открылась карточка соответствующего товара,
                    над картинкой товара отображается закрашенное в красный цвет сердечко,
                    в урле страницы присутствует параметр '&utm_source=my_goods'
                - assert: над именем пользователя есть красный стикер и цифрой '1'
            Добавление нескольких товаров в избранное:
                - automation: TURBOUI-5011
                - assert: над картинкой товара отображается кнопка добавления в избранное в виде сердечка [https://jing.yandex-team.ru/files/skurhanski/wsvkWEjuy4.png]
                - do: кликнуть по сердечку
                - *zalogin
                - assert: сердечко закрасилось в красный цвет [https://jing.yandex-team.ru/files/skurhanski/browser_LTkn51kJKK.png] 
                - do: запомнить этот первый товар, т.к. в дальнейшем нужно будет к нему снова вернуться
                - assert: над именем пользователя появилась подсказка о том, что товар добавлен в избранное, а также красный стикер и цифрой '1' (цвет подсказки соответствует общему цветомову оформлению магазина) [https://jing.yandex-team.ru/files/skurhanski/ShareX_CEegHqRrWn.png]
                - do: проскроллить страницу вниз и в блоке с рекомендациями кликнуть по любо карточке
                - assert: открылась карточка товара
                - assert: над картинкой товара отображается кнопка добавления в избранное в виде сердечка
                - do: добавить товар в избранное, кликнув на сердечко (запомнить этот второй товар, т.к. в дальнейшем нужно будет к нему снова вернуться)
                - assert: сердечко закрасилось в красный цвет
                - assert: над именем пользователя появился красный стикер с цифрой '2'
                - do: найти первый товар и открыть его карточку
                - assert: сердечко над картинкой закрашено в красный цвет
                - do: удалить товар из избранного
                - assert: сердечко перестало быть красным
                - assert: красный стикер на имени пользователя уменьшился на единицу (было '2', стало '1')
                - do: найти второй товар и открыть его карточку
                - assert:
                    сердечко над картинкой закрашено в красный цвет
                    над именем пользователя есть красный стикер с цифрой '1'
        В корзине:
            Проверка добавления в избранное и удаления из него:
                - automation: TURBOUI-5011
                - do: добавить товар в корзину и перейти в нее
                - assert: в корзине отображается добавленный товар
                - assert: на товаре отображается кнопка добавления в избранное в виде сердечка [https://jing.yandex-team.ru/files/skurhanski/chrome_B9F8vyT3aX.png]
                - do: кликнуть по сердечку
                - *zalogin
                - assert: сердечко закрасилось в красный цвет [https://jing.yandex-team.ru/files/skurhanski/chrome_or4iftLwzj.png]
                - assert: над именем пользователя появилась подсказка о том, что товар добавлен в избранное, а также красный стикер и цифрой '1' (цвет подсказки соответствует общему цветомову оформлению магазина) [https://jing.yandex-team.ru/files/skurhanski/ShareX_CEegHqRrWn.png]
                - assert: кликнуть по иконке пользователя в нижней навигационной панели
                - assert: открылась страница профиля
                - assert: на странице профиля есть раздел 'Избранные товары' с красной меткой на сердечке [https://jing.yandex-team.ru/files/eshreder/d21433e9b6836032187005ff2f3d6d10.png]
                - do: кликнуть по ссылке 'Избранные товары'
                - assert: в новой вкладке открылся сервис Яндекс.Коллекции в разделе 'Избранные товары', в котором присутствует добавленный в избранное товар
                - do: закрыть вкладку с сервисом Яндекс.Коллекции
                - do: перейти в корзину
                - do: удалить товар из избранного, кликнув на сердечко
                - assert: сердечко перестало быть красным
                - assert: красный стикер на имени пользователя исчез
                - assert: кликнуть по иконке пользователя в нижней навигационной панели
                - assert: открылась страница профиля
                - assert: на странице профиля есть раздел 'Избранные товары' без красной метки на сердечке [https://jing.yandex-team.ru/files/eshreder/4c7add98895eeb4086cf302829ef71c7.png]
                - do: кликнуть по ссылке 'Избранные товары'
                - assert: в новой вкладке открылся сервис Яндекс.Коллекции в разделе 'Избранные товары', в котором отсутствует товар, ранее удаленный из избранного
                - do: перейти в корзину и удалить все товары
            Проверка добавленной карточки:
                - automation: TURBOUI-5011
                - assert: над картинкой товара отображается кнопка добавления в избранное в виде сердечка
                - do: кликнуть по сердечку
                - *zalogin
                - assert: сердечко закрасилось в красный цвет
                - assert: кликнуть по иконке пользователя в нижней навигационной панели
                - assert: открылась страница профиля
                - do: кликнуть по ссылке 'Избранные товары'
                - assert: в новой вкладке открылся сервис Яндекс.Коллекции в разделе 'Избранные товары', в котором присутствует добавленный в избранное товар
                - assert: в карточке отображается та же картинка, что была в магазине
                - do: находясь на сервисе Яндекс.Коллекции, кликнуть по добавленной карточке, а затем по кнопке 'Подробнее на "название_сайта"'
                - assert: |
                    открылась карточка соответствующего товара,
                    над картинкой товара отображается закрашенное в красный цвет сердечко,
                    в урле страницы присутствует параметр '&utm_source=my_goods'
        В каталоге:
            Проверка добавления в избранное и удаления из него:
                - automation: TURBOUI-5011
                - do: кликнуть по пиктограмме Каталог на нижней панели
                - assert: отображаются карточки товаров с сердечками [https://jing.yandex-team.ru/files/skurhanski/chrome_0hP1KjSvBa.png]
                - do: добавить товар в избранное, кликнув на сердечко (запомнить данный товар, т.к. в дальнейшем нужно будет к нему снова вернуться)
                - *zalogin
                - assert: сердечко закрасилось в красный цвет [https://jing.yandex-team.ru/files/skurhanski/chrome_bXLbnhkOuJ.png]
                - assert: над именем пользователя появилась подсказка о том, что товар добавлен в избранное, а также красный стикер и цифрой '1' (цвет подсказки соответствует общему цветомову оформлению магазина) [https://jing.yandex-team.ru/files/skurhanski/ShareX_CEegHqRrWn.png]
                - assert: кликнуть по иконке пользователя в нижней навигационной панели
                - assert: открылась страница профиля
                - assert: на странице профиля есть раздел 'Избранные товары' с красной меткой на сердечке [https://jing.yandex-team.ru/files/eshreder/d21433e9b6836032187005ff2f3d6d10.png]
                - do: кликнуть по ссылке 'Избранные товары'
                - assert: в новой вкладке открылся сервис Яндекс.Коллекции в разделе 'Избранные товары', в котором присутствует добавленный в избранное товар
                - do: закрыть вкладку с сервисом Яндекс.Коллекции
                - do: в разделе Каталог магазина найти карточку товара, который ранее добавляли в избранное
                - do: удалить товар из избранного, кликнув на сердечко
                - assert: сердечко перестало быть красным
                - assert: красный стикер на имени пользователя исчез
                - assert: кликнуть по иконке пользователя в нижней навигационной панели
                - assert: открылась страница профиля
                - assert: на странице профиля есть раздел 'Избранные товары' без красной метки на сердечке
                - do: кликнуть по ссылке 'Избранные товары'
                - assert: в новой вкладке открылся сервис Яндекс.Коллекции в разделе 'Избранные товары', в котором отсутствует товар, ранее удаленный из избранного
            Проверка добавленной карточки:
                - automation: TURBOUI-5011
                - do: кликнуть по пиктограмме Каталог на нижней панели
                - assert: отображаются карточки товаров с сердечками
                - do: кликнуть по сердечку
                - *zalogin
                - assert: сердечко закрасилось в красный цвет
                - assert: кликнуть по иконке пользователя в нижней навигационной панели
                - assert: открылась страница профиля
                - do: кликнуть по ссылке 'Избранные товары'
                - assert: в новой вкладке открылся сервис Яндекс.Коллекции в разделе 'Избранные товары', в котором присутствует добавленный в избранное товар
                - assert: в карточке отображается та же картинка, что была в магазине
                - do: находясь на сервисе Яндекс.Коллекции, кликнуть по добавленной карточке, а затем по кнопке 'Подробнее на "название_сайта"'
                - assert: |
                    открылась карточка соответствующего товара в магазине,
                    над картинкой товара отображается закрашенное в красный цвет сердечко,
                    в урле страницы присутствует параметр '&utm_source=my_goods'
        На главной:
            Проверка добавления в избранное и удаления из него:
                - automation: TURBOUI-5011
                - do: кликнуть по пиктограмме Главная на нижней панели
                - assert: в горизонтальных галереях отображаются карточки товаров с сердечками [https://jing.yandex-team.ru/files/skurhanski/chrome_YvQSZb6CfN.png]
                - do: добавить товар в избранное, кликнув на сердечко (запомнить данный товар, т.к. в дальнейшем нужно будет к нему снова вернуться)
                - *zalogin
                - assert: сердечко закрасилось в красный цвет [https://jing.yandex-team.ru/files/skurhanski/chrome_bXLbnhkOuJ.png]
                - assert: над именем пользователя появилась подсказка о том, что товар добавлен в избранное, а также красный стикер и цифрой '1' (цвет подсказки соответствует общему цветомову оформлению магазина) [https://jing.yandex-team.ru/files/skurhanski/ShareX_CEegHqRrWn.png]
                - assert: кликнуть по иконке пользователя в нижней навигационной панели
                - assert: открылась страница профиля
                - assert: на странице профиля есть раздел 'Избранные товары' с красной меткой на сердечке [https://jing.yandex-team.ru/files/eshreder/d21433e9b6836032187005ff2f3d6d10.png]
                - do: кликнуть по ссылке 'Избранные товары'
                - assert: в новой вкладке открылся сервис Яндекс.Коллекции в разделе 'Избранные товары', в котором присутствует добавленный в избранное товар
                - do: закрыть вкладку с сервисом Яндекс.Коллекции
                - do: в разделе Главная магазина найти карточку товара, который ранее добавляли в избранное
                - do: удалить товар из избранного, кликнув на сердечко
                - assert: сердечко перестало быть красным
                - assert: красный стикер на имени пользователя исчез
                - assert: кликнуть по иконке пользователя в нижней навигационной панели
                - assert: открылась страница профиля
                - assert: на странице профиля есть раздел 'Избранные товары' без красной метки на сердечке
                - do: кликнуть по ссылке 'Избранные товары'
                - assert: в новой вкладке открылся сервис Яндекс.Коллекции в разделе 'Избранные товары', в котором отсутствует товар, ранее удаленный из избранного
            Проверка добавленной карточки:
                - automation: TURBOUI-5011
                - do: кликнуть по пиктограмме Главная на нижней панели
                - assert: в горизонтальных галереях отображаются карточки товаров с сердечками
                - do: кликнуть по сердечку
                - *zalogin
                - assert: сердечко закрасилось в красный цвет
                - assert: кликнуть по иконке пользователя в нижней навигационной панели
                - assert: открылась страница профиля
                - do: кликнуть по ссылке 'Избранные товары'
                - assert: в новой вкладке открылся сервис Яндекс.Коллекции в разделе 'Избранные товары', в котором присутствует добавленный в избранное товар
                - assert: в карточке отображается та же картинка, что была в магазине
                - do: находясь на сервисе Яндекс.Коллекции, кликнуть по добавленной карточке, а затем по кнопке 'Подробнее на "название_сайта"'
                - assert: |
                    открылась карточка соответствующего товара в магазине,
                    над картинкой товара отображается закрашенное в красный цвет сердечко,
                    в урле страницы присутствует параметр '&utm_source=my_goods'
        Попап залогина:
            - do: добавить товар в избранное, кликнув на сердечко (запомнить данный товар, т.к. в дальнейшем нужно будет к нему снова вернуться)
            - assert: появилась шторка с просьбой об авторизации
            - do: нажать на затмененную область над шторокой
            - assert: шторка скрылась
            - do: добавить товар в избранное, кликнув на сердечко
            - assert: появилась шторка с просьбой об авторизации
            - do: нажать на кнопку 'Войти и отложить товар'
            - assert: переход на страницу авторизации
        Добавление в избранное после авторизации:
            - do: добавить товар в избранное, кликнув на сердечко (запомнить данный товар, т.к. в дальнейшем нужно будет к нему снова вернуться)
            - assert: появилась шторка с просьбой об авторизации
            - do: нажать на кнопку 'Войти и отложить товар'
            - assert: переход на страницу авторизации
            - do: залогиниться
            - assert: переход на страницу магазина
            - assert: над именем пользователя появилась подсказка о том, что товар добавлен в избранное [https://jing.yandex-team.ru/files/skurhanski/ShareX_CEegHqRrWn.png]

files:
  - components/FavoriteButton/__tests__/FavoriteButton@phone.hermione.js

v-team: Turbo

tlds: ru

tags:
  - ecom-tap
  - favorite
  - zalogin
