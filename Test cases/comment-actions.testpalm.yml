feature: Действия с комментариями

specs:
  beforeEach:
    - do: Залогиниться под пользователем user3993

  Положительные:
    1. Добавление и удаление комментария:
      - automation: GOALS-495
      - do: Перейти на страницу "/filter?goal=32577"
      - do: В поле "Добавить комментарий" написать текст "Тестовый коммент"
      - do: Нажать на кнопку "Добавить комментарий"
      - assert: |
      		- Комментарий сохранился
      		- В комментарии отображается аватарка автора и дата создания
      - screenshot: Внешний вид комментария [todo comment]
      - do: Навести курсор на сохраненный комментарий, нажать на крестик
      - assert: Появился попап подтверждения действия
      - do: В попапе нажать "Отмена"
      - assert: |
      		- Попап скрылся
      		- Комментарий остался
      - do: Навести курсор на сохраненный комментарий, нажать на крестик
      - do: В попапе подтверждения нажать "Удалить"
      - assert: |
      		- Попап скрылся
      		- Комментарий пропал

    2. Сохранение и удаление черновика:
      - automation: GOALS-495
      - do: Перейти на страницу "/filter?goal=32652"
      - do: В поле "Добавить комментарий" написать текст "Черновик комментария"
      - do: Обновить страницу
      - assert: |
      		- В поле комментария остался текст "Черновик комментария"
      		- Под полем отображается текст "Текст восстановлен из черновика." и кнопка "Отменить"
      - screenshot: Внешний вид черновика комментария [todo draft]
      - do: Нажать на "Отменить"
      - assert: Поле комментария очистилось

    3. Редактирование комментария:
      - automation: GOALS-495
      - do: Перейти на страницу "/filter?goal=32653"
      - do: В поле "Добавить комментарий" написать текст "Комментарий для редактирования"
      - do: Нажать на кнопку "Добавить комментарий"
      - assert: Комментарий сохранился
      - do: Навести курсор на сохраненный комментарий
      - assert: Появились иконки редактирования и удаления комментария
      - screenshot: Внешний вид комментария при наведении курсора [todo hover]
      - do: Нажать на иконку редактирования
      - assert: |
      		- Рядом с текстом комментария установился курсор
      		- Под полем появились кнопки "Сохранить комментарий" и "Отменить"
      - do: Добавить к тексту комментария "1"
      - assert: Текст комментария изменился на "Комментарий для редактирования1"
      - do: Нажать на кнопку "Отмена"
      - assert: Комментарий сохранился без изменений с текстом "Комментарий для редактирования"
      - do: Нажать на иконку редактирования
      - assert: Под полем появились кнопки "Сохранить комментарий" и "Отменить"
      - do: Добавить к тексту комментария "[edited]"
      - do: Нажать на "Сохранить комментарий"
      - assert: Комментарий сохранился с текстом "Комментарий для редактирования[edited]"
      - screenshot: Внешний вид измененного комментария [todo edited]

  Отрицательные:
    1. Создание пустого комментария:
      - automation: GOALS-495
      - do: Перейти на страницу "/filter?goal=32654"
      - do: Кликнуть на кнопку "Добавить комментарий"
      - assert: Комментарий не добавился

    2. Удаление/редактирование чужого комментария:
      - automation: GOALS-495
      - do: Перейти на страницу "/filter?goal=32579"
      - assert: На странице цели есть комментарий с текстом "Попробуй удали"
      - do: Навести курсор на этот комментарий
      - assert: Иконки редактирования и удаления отстутствуют
      - screenshot: Внешний вид чужого комментария при наведении курсора [todo hover_else]



priority: blocker

tags:
  - reviewed
