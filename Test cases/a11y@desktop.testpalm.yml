feature: Колдунщик 1орг
type: Доступность

browsers: chrome-desktop

specs:
  Таб главное:
    - do: получить выдачу по запросу 'Кафе Пушкин'
    - assert: в правой колонке есть карточка одной организации
    - tech: у карточки должен быть атрибут aria-label
    - tech: у блока контактов должны быть атрибуты aria-label и role='group'
    - tech: у номера телефона должны быть атрибуты aria-label и role='text'
    - tech: у блока отзывов должен быть атрибут aria-label
    - tech: у титула блока отзывов должны быть атрибуты aria-label, role='button'
    - tech: у первого отзыва карточкой должны быть атрибуты aria-label и тег li
    - tech: у блока прайсов должны быть атрибуты aria-label и role='group'
    - tech: у титула блока прайсов должны быть атрибуты aria-label, role='button' и aria-haspopup=true
    - tech: у блока похожих должны быть атрибуты aria-label и role='group'
  Проверка на доступность главного таба на выдаче [manual]:
    - automation: SERP-98270
    - tags:
        - no_assessors
    - do: получить выдачу по запросу 'Кафе Пушкин'
    - assert: в правой колонке есть карточка одной организации
    - do: включить скринридер
    - do: с помощью горячей клавиши для навигации по группам пройти по всем элементам главного таба карточки (для перехода к текстовым элементам использовать стрелки вверхи/вниз)
    - assert: |
        были выбраны следующие элементы
        титул
        кнопки шаринга и добавления в коллекцию
        рейтинг и категории организации
        табы
        карта и фотографии организации
        кнопки сайта и как добраться
        контакты
        описание
        отзывы
        публикации
        меню
        похожие организации
  Проверка кнопки перехода между блоками 1орг [manual]:
    - automation: SERP-150471
    - tags: 
        - no_assessors
        - a11y_scenario
    - params:
        text: 'Пушкинъ,+Москва,+Ресторан'
        oid: 'b:1018907821'
        noreask: '1'
        serp-reload-from: 'companies'
    - do: c помощью горячих клавиш для навигации по заголовкам перейти к заголовку карточки
    - assert:  |
        фокус перешел на заголовок карточки
        скринридер озвучил: Дополнительная информация по запросу добавочное ориентир Подробная информация про организацию кнопка Пушкинъ
    - do: c помощью кнопки 'Tab' перейти к концу карточки
    - assert: |
        фокус на невидимой кнопке перехода между блоками 1орг
        скринридер озвучил: К дополнительной информации
    - do: совершить переход по ссылке
    - assert: |
        фокус на первом табе
        скринридер озвучил: Главное, таб 1 из 5
    - do: вернуться на один элемент назад
    - assert: |
        фокус на невидимой кнопке перехода между блоками 1орг
        скринридер озвучил: К основной информации об организации
    - do: совершить переход по ссылке
    - assert: |
        фокус на заголовке 1орг
        скринридер озвучил: Заголовок Пушкин


  Проверка шапки [manual]:
    - automation: SERP-98270
    - tags:
        - no_assessors
    - do: получить выдачу по запросу 'Кафе Пушкин'
    - assert: в правой колонке есть карточка одной организации
    - do: c помощью горячих клавиш для навигации по заголовкам перейти к заголовку карточки
    - assert: |
        фокус перешел на заголовок карточки
        скринридер озвучил: Дополнительная информация по запросу добавочное ориентир Подробная информация про организацию кнопка Пушкинъ
    - do: c помощью кнопки 'Tab' перейти к следующему элементу
    - assert: |
        фокус перешел на кнопку шаринга
        скринридер озвучил: Поделиться организацией с помощью социальных сетей  кнопка
    - do: c помощью кнопки 'Tab' перейти к следующему элементу
    - assert: |
        фокус перешел на кнопку добавления в избранное
        скринридер озвучил: по щелчку  Добавить организацию в ваши коллекции  кнопка 
    - do: c помощью кнопки 'Tab' перейти к следующему элементу
    - assert: |
        фокус перешел на кнопку рейтинга организации
        скринридер озвучил: 'Рейтинг N из 5' (вместо N проговаривается число)
    - do: c помощью кнопки 'Tab' перейти к следующему элементу
    - assert: |
        фокус перешел к описанию категории организации
        скринридер озвучил: 'Категории: Ресторан Банкетный зал Кафе'
    - do: c помощью кнопки 'Tab' перейти к следующему элементу
    - assert: |
        фокус перешел к вкладке 'Главное'
        скринридер озвучил: 'вкладка Главное  вкладка  выделено  1 из N' (вместо N проговаривается число)
    - do: c помощью сочетания кнопок 'Shift'+'Tab' перейти обратно к заголовку карточки
    - assert: |
        фокус перешел на заголовок карточки
        скринридер озвучил: Подробная информация про организацию  кнопка Пушкинъ
  Проверка галереи и кнопок действий [manual]:
    - automation: SERP-98270
    - tags:
        - no_assessors
    - do: получить выдачу по запросу 'Кафе Пушкин'
    - assert: в правой колонке есть карточка одной организации
    - do: c помощью горячих клавиш для навигации перейти вкладке 'Главное' в правой колонке
    - do: c помощью кнопки 'Tab' перейти к следующему элементу
    - assert: |
        фокус перешел на карту
        скринридер озвучил: Главное страница свойств открыть карту в попапе
    - do: c помощью кнопки 'Tab' перейти к следующему элементу
    - assert: |
        фокус перешел на первую кнопку под картой
        скринридер озвучил: 'Забронировать столик ссылка' (если данная кнопка отсутствует в выдаче, это не является ошибой)
    - do: c помощью кнопки 'Tab' перейти к следующему элементу
    - assert: |
        фокус перешел на следующую кнопку под картой
        скринридер озвучил: Сайт  ссылка
    - do: c помощью кнопки 'Tab' перейти к следующему элементу
    - assert: |
        фокус перешел на следующую кнопку под картой
        скринридер озвучил: Построить маршрут на Яндекс.Картах ссылка
    - do: c помощью кнопки 'Tab' перейти к следующему элементу
    - assert: |
        фокус перешел на иконку с адресом под кнопками действий
        скринридер озвучил: Контактная информация  группа  Адрес
    - do: c помощью сочетания кнопок 'Shift'+'Tab' перейти обратно к карте
    - assert: |
        фокус перешел на карту
        скринридер озвучил: Открыть организацию на Яндекс.картах в новой вкладке  ссылка
  Проверка блока Меню [manual]:
    - automation: SERP-98270
    - tags:
        - no_assessors
    - do: получить выдачу по запросу 'Кафе Пушкин'
    - assert: в правой колонке есть карточка одной организации
    - do: c помощью горячих клавиш для навигации перейти к блоку с отзывами
    - do: c помощью кнопки 'Tab' перейти к блоку Меню
    - assert: |
        переход фокуса к тайтлу Меню осуществился сразу прохода элементов в блоке с отзывами,
        скринридер озвучил: Меню  кнопка
    - do: c помощью стрелок перейти к следующему элементу
    - assert: |
        фокус перешел на название блюда/напитка
        скринридер озвучил название блюда/напитка
    - do: c помощью стрелок перейти к следующему элементу
    - assert: |
        фокус перешел на цену напротив блюда/напитка
        скринридер озвучил 'Цена N рублей' (вместо N проговаривается число)
    - do: c помощью стрелок пройтись по всем названиям и ценам из блока Меню
    - assert: фокус перемещается по всем позициям блока в последовательности 'название блюда -> цена'
    - do: c помощью стрелок перейти к следующему элементу
    - assert: |
        фокус перешел на следующую кнопку под картой
        скринридер озвучил: Сайт  ссылка
    - do: c помощью кнопки 'Tab' перейти к следующему элементу
    - assert: |
        фокус перешел на кнопку 'Смотреть меню полностью'
        скринридер озвучил: Меню  группа  Открыть полный список меню  кнопка
  Таб Фото:
    - do: получить выдачу по запросу 'кафе пушкин'
    - assert: в правой колонке есть карточка одной организации
    - do: кликнуть на таб 'Фото'
    - assert: открылся таб 'Фото' со списком фотографий
    - tech: у ссылки с фотографией должен быть тег 'a'
    - tech: у ссылки с фотографией не должно быть атрибута 'href'
    - tech: у ссылки с фотографией должен быть атрибут 'tabindex=0'
    - tech: у ссылки с фотографией должен быть атрибут 'role=button'
    - tech: у ссылки с фотографией должен быть атрибут 'aria-haspopup=true'
    - do: нажать клавишу 'Tab'
    - do: первое фото в списке фотографий получило фокус в виде жёлтой рамки
    - do: нажать клавишу 'Tab'
    - do: фокус перешёл на второе фото
    - screenshot: внешний вид фото в фокусе [focus]
    - do: нажать клавишу 'Enter'
    - assert: |
        открылся попап организации с просмотрщиком фотографий
        в просмотрщике открыто второе фото
    - do: кликнуть по крестику закрытия попапа
    - assert: попап организации закрылся
    - do: кликнуть по табу 'Фото'
    - do: нажать клавишу 'Tab' три раза
    - assert: третье фото в списке фотографий получило фокус в виде жёлтой рамки
    - do: нажать клавишу 'Пробел'
    - assert: |
        открылся попап 1орг с просмотрщиком фотографий
        в просмотрщике открыто третье фото

files:
  - features/companies/1org/a11y/a11y@desktop.hermione.js

tags:
  - A11y_serp
  - skip_manual_check
  - skip_e2e_check
  - no_assessors

v-team: VanillaGeo

tlds:
  - ru
