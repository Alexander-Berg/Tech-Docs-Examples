feature: ЖД
type: Страница заказа
description: >-
  Если тестируем тач-версию, кнопки Распечатать на странице не будет, это
  нормально.


  Тестовая карта (не для асессоров):

  Номер карты: 5100003697253468

  CVN: 060

  Дата: 01/20

  Перейти на главную сервиса

  Перейти на вкладку Ж/Д билеты
specs:
  'ЖД: Отмена и восстановление электронной регистрации':
    - do: Открыть выдачу Москва - Санкт-Петербург через месяц
    - do: Для любого Сапсана кликнуть по кнопке "Выбрать место"
    - assert: Осуществился переход на страницу выбора мест
    - do: |
        В блоке "Укажите количество билетов" установить 3 взрослых и 1 ребенка
        без места
    - do: Выбрать вагон и любые 3 места в нем
    - do: |
        Кликнуть по кнопке  перехода на следущий шаг покупки. (Кнопка может
        называться по-разному, сейчас называется "Указать пассажиров"
    - do: Заполнить все поля валидными данными
    - do: Кликнуть кнопку "Проверить заказ и купить"
    - assert: Произошел переход на страницу подтверждения
    - do: |
        Кликнуть по кнопке “Ввести карту и оплатить”
        Ввести данные карты из описания (асессоры пропускают этот шаг)
        Кликнуть по кнопке Оплатить (асессоры пропускают этот шаг)
    - assert: |
        * На странице появился лоадер
        * Через какое-то время произошел переход на страницу успешной покупки -
        хэппи пейдж
    - do: Кликнуть по кнопке "Подробнее о заказе"
    - assert: Произошел переход на страницу заказа со всеми данными заказа
    - do: |
        Кликнуть по гамбургеру (кнопка с 3 точками) в общих действиях по заказу
        - появился список возможных действий (сейчас только Отменить электронную
        регистрацию)

        Кликнуть по действию "Отменить электронную регистрацию"
    - assert: |
        * Появилось модальное окно с заголовком "Вы отменяете электронную
        регистрацию"

    - do: Кликнуть "Подтвердить"
    - assert: |
        * Модальное окно закрылось
        * На странице появилась иконка и подпись для всех 4 билетов "Электронная
        регистрация отменена"
    - do: Снова кликнуть по гамбургеру в общих действиях по заказу
    - assert: Раскрылся список действий, в нем "Восстановить электронную регистрацию"
    - do: Кликнуть на “Восстановить электронную регистрацию”
    - assert: |
        * Появилось модальное окно с заголовком “Вы подтверждаете электронную
        регистрацию”
    - do: Кликнуть Подтвердить
    - assert: |
        * Модальное окно закрылось
        * На странице для всех 4 билетов пропала иконка и текст "Электронная
        регистрация отменена"
    - do: |
        Кликнуть по гамбургеру для взрослого билета + билета без места (рядом с
        кнопкой Сдать билет, относится к конкретному билету) - появился список
        возможных действий (сейчас только Отменить электронную регистрацию)

        Кликнуть Отменить электронную регистрацию
    - assert: |
        * Появилось модальное окно с заголовком “Вы отменяете электронную
        регистрацию”
    - do: Кликнуть Подтвердить
    - assert: |
        * Модальное окно закрылось
        * Для билетов взрослый + детский без места появились иконки и текст
        "Электронная регистрация отменена"
        * Для остальных билетов иконок и текста про ЭР нет
        * В общих действиях (рядом с кнопками Скачать и Распечатать) пропал
        гамбургер с действиями
        * Для билетов по отдельности (рядом с кнопками Сдать билет) есть
        гамбургер с действиями
    - do: Прокликать гамбургеры для каждого из билетов (рядом с кнопками Сдать билет)
    - assert: |
        * Для билетов без ЭР есть действие "Восстановить электронную регистрацию"
        * Для билетов с ЭР есть действие "Отменить электронную регистрацию"

manual: true
Устройство:
  - Десктоп
  - Тач
Страница: Страница заказа
Сервис: ЖД
Тестирование асессорами: Да
Окружение: Testing
Автор: shenfeld
