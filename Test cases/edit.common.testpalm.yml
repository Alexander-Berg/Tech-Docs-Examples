feature: Пункт Редактировать

specs:

    beforeEach:
        - do: Перейти по ссылке "https://passport.yandex.ru" и авторизоваться.
        - assert: Авторизация прошла успешно.
        - do: В соседней вкладке открыть мессенджер.
        - assert: Открылся список чатов.
        - do: В списке чатов открыть любой приватный/групповой чат, который соответствует описанию из description.
        - assert: Чат открыт.

    В панели ввода отображается текст редактируемого сообщения[manual]:
        - automation: MSSNGRFRONT-5024
        - description: |
              В истории чата есть собственное текстовое сообщение (если такого сообщения нет - отправить в чат любое текстовое сообщение).
        - do: Тапнуть/кликнуть ПКМ по области сообщения из description.
        - assert: Открылось контекстное меню.
        - do: В контекстном меню выберите "Редактировать".
        - assert: |
              Текст редактируемого сообщения появляется в поле ввода.
              Плашка с исходным сообщением появляется над полем ввода.

    Можно отредактировать собственное текстовое сообщение[manual]:
        - tags: [advanced_smoke, b2b]
        - automation: MSSNGRFRONT-5024
        - description: |
              В истории чата есть собственное текстовое сообщение (если такого сообщения нет - отправить в чат любое текстовое сообщение).
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом нужно будет авторизовываться в другом браузере.
              Пользователь А - основной аккаунт, пользователь Б - вспомогательный, между пользователями А и Б есть общий групповой чат.
              Изначально авторизованы пользователем А.
        - do: Тапнуть/кликнуть ПКМ по области собственного текстового сообщения из description.
        - assert: Открылось контекстное меню.
        - do: В контекстном меню выберите "Редактировать".
        - assert: |
              Текст редактируемого сообщения появляется в поле ввода.
              Плашка с исходным сообщением появляется над полем ввода.
        - do: Ввести в поле ввода несколько символов.
        - assert: В поле ввода к тексту добавляются вводимые символы.
        - do: Отправить сообщение.
        - assert: |
              Текст исходного сообщения меняется на то, которое мы изменили.
              В баллуне данного сообщения появляется “карандаш”.
        - do: Открыть список чатов в браузере, где авторизован пользователь Б.
        - assert: Открывается окно списка чатов.
        - do: Открыть тот же чат.
        - assert: Чат открыт.
        - do: Посмотреть на отредактированное текстовое сообщение.
        - assert: |
              Текстовое сообщение было изменено.
              В баллуне данного сообщения есть“карандаш”.

    Можно отредактировать собственное сообщение с эмоджи[manual]:
        - automation: MSSNGRFRONT-5024
        - description: |
              В истории чата есть собственное сообщение с эмоджи (если такого сообщения нет - отправить в чат любое сообщение с эмоджи).
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом нужно будет авторизовываться в другом браузере.
              Пользователь А - основной аккаунт, пользователь Б - вспомогательный, между пользователями А и Б есть общий групповой чат.
              Изначально авторизованы пользователем А.
        - do: Тапнуть/кликнуть ПКМ по области собственного текстового сообщения из description.
        - assert: Открылось контекстное меню.
        - do: В контекстном меню выберите "Редактировать".
        - assert: |
              Текст редактируемого сообщения появляется в поле ввода.
              Плашка с исходным сообщением появляется над полем ввода.
        - do: Ввести в поле ввода несколько символов.
        - assert: В поле ввода к тексту добавляются вводимые символы.
        - do: Отправить сообщение.
        - assert: |
              Текст исходного сообщения меняется на то, которое мы изменили.
              В баллуне данного сообщения появляется “карандаш”.
        - do: Открыть список чатов в браузере, где авторизован пользователь Б.
        - assert: Открывается окно списка чатов.
        - do: Открыть тот же чат.
        - assert: Чат открыт.
        - do: Посмотреть на отредактированное сообщение с эмоджи.
        - assert: |
              Сообщение с эмоджи было изменено.
              В баллуне данного сообщения есть“карандаш”.

    Можно отредактировать собственную подпись к forward[manual]:
        - automation: MSSNGRFRONT-5024
        - description: |
              В истории чата есть собственный forward с подписью (если такого сообщения нет - переслать в чат любое сообщение).
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом нужно будет авторизовываться в другом браузере.
              Пользователь А - основной аккаунт, пользователь Б - вспомогательный, между пользователями А и Б есть общий групповой чат.
              Изначально авторизованы пользователем А.
        - do: Тапнуть/кликнуть ПКМ по собственной подписи из description.
        - assert: Открылось контекстное меню.
        - do: В контекстном меню выберите "Редактировать".
        - assert: Текст редактируемого сообщения появляется в поле ввода.
        - do: Ввести в поле ввода несколько символов.
        - assert: В поле ввода к тексту добавляются вводимые символы.
        - do: Отправить сообщение
        - assert: |
              Текст исходного сообщения меняется на то, которое мы изменили.
              В баллуне данного сообщения появляется “карандаш”.
        - do: Открыть список чатов в браузере, где авторизован пользователь Б.
        - assert: Открывается окно списка чатов.
        - do: Открыть тот же чат.
        - assert: Чат открыт.
        - do: Посмотреть на отредактированую подпись к forward.
        - assert: |
              Подпись к forward изменена.
              В баллуне данного сообщения есть “карандаш”.

    Можно отредактировать собственную подпись к reply[manual]:
        - automation: MSSNGRFRONT-5024
        - description: |
              В истории чата есть собственный reply (если такого сообщения нет - ответить на любое сообщение).
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом нужно будет авторизовываться в другом браузере.
              Пользователь А - основной аккаунт, пользователь Б - вспомогательный, между пользователями А и Б есть общий групповой чат.
              Изначально авторизованы пользователем А.
        - do: Тапнуть/кликнуть ПКМ по собственной подписи к reply из description.
        - assert: Открылось контекстное меню.
        - do: В контекстном меню выберите "Редактировать".
        - assert: Текст редактируемого сообщения появляется в поле ввода.
        - do: Ввести в поле ввода несколько символов.
        - assert: В поле ввода к тексту добавляются вводимые символы.
        - do: Отправить сообщение.
        - assert: |
              Текст исходного сообщения меняется на то, которое мы изменили.
              В баллуне данного сообщения появляется значок “карандаш”.
        - do: Открыть список чатов в браузере, где авторизован пользователь Б.
        - assert: Открывается окно списка чатов.
        - do: Открыть тот же чат.
        - assert: Чат открыт.
        - do: Посмотреть на отредактированую подпись к reply.
        - assert: |
              Подпись к reply изменена.
              В баллуне данного сообщения есть“карандаш”.

    Не ставится статус "Отредактировано", если мы не изменили сообщение[manual]:
        - automation: MSSNGRFRONT-5024
        - description: |
              В истории чата есть любое собственное сообщение (если такого сообщения нет - отправить в чат любое сообщение).
        - do: Тапнуть/кликнуть ПКМ по области сообщения из description.
        - assert: Открылось контекстное меню.
        - do: В контекстном меню выберите "Редактировать".
        - assert: Текст редактируемого сообщения появляется в поле ввода.
        - do: Добавить к сообщению в поле ввода несколько символов.
        - assert: В поле ввода к тексту добавляются вводимые символы.
        - do: Удалить добавленные символы.
        - assert: В поле ввода отображается исходный текст.
        - do: Отправить сообщение.
        - assert: |
              В окне ввода ничего не появилось.
              Редактирование было отменено.
              Статус сообщения НЕ изменился на “отредактированное”.
              В баллуне данного сообщения НЕ появляется значок “карандаш”.

    Нельзя отредактировать собственное сообщение со стикером:
        - description: |
              В истории чата есть собственное сообщение со стикером (если таких сообщения нет - отправить в чат сообщение со стикером).
        - do: Тапнуть/Кликнуть ПКМ по области сообщения из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Редактировать".

    Нельзя отредактировать сообщение собеседника любого типа:
        - tags: [advanced_smoke, b2b]
        - description: |
              В истории чата есть текстовое сообщение, сообщение с изображением, с видео, с файлом, со ссылкой, с эмоджи, со стикером, с forward’ом, c reply от другого пользователя (если таких сообщения нет - отправить другим пользователем в чат все типы сообщений).
        - do: Тапнуть/кликнуть ПКМ по области текстового сообщения из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Редактировать".
        - do: Тапнуть/кликнуть ПКМ по области сообщения с изображением из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Редактировать".
        - do: Тапнуть/кликнуть ПКМ по области сообщения с файлом из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Редактировать".
        - do: тапнуть/кликнуть ПКМ по области сообщения с ссылкой из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Редактировать".
        - do: тапнуть/кликнуть ПКМ по области сообщения с эмоджи из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Редактировать".
        - do: Тапнуть/кликнуть ПКМ по области сообщения со стикером из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Редактировать".
        - do: Тапнуть/кликнуть ПКМ по области сообщения с forward’ом из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Редактировать".
        - do: Тапнуть/кликнуть ПКМ по области сообщения с reply из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Редактировать".

    Редактирование сообщения с полным удалением текста[manual]:
        - automation: 
        - description: |
              В истории чата есть собственное текстовое сообщение (если такого сообщения нет - отправить в чат любое текстовое сообщение).
        - do: Тапнуть/кликнуть ПКМ по области сообщения из description
        - assert: Открылось контекстное меню
        - do: В контекстном меню выберите "Редактировать"
        - assert: |
              Текст редактируемого сообщения появляется в поле ввода
              Плашка с исходным сообщением появляется над полем ввода
        - do: Удалить текст в поле ввода
        - assert: Текст в поле ввода был удален
        - do: Нажать на кнопку отправки
        - assert: Появилось модальное окно подтверждения удаления сообщения
        - do: Отменить удаление, нажав на кнопку "Отмена"
        - assert: |
              Закрылось модальное окно подтверждения удаления
              Вернулись к редактированию сообщения
              Пустое поле ввода

    Можно отменить редактирование текста[manual]:
        - automation: 
        - description: |
              В истории чата есть собственное текстовое сообщение (если такого сообщения нет - отправить в чат любое текстовое сообщение).
        - do: Тапнуть/кликнуть ПКМ по области сообщения из description
        - assert: Открылось контекстное меню
        - do: В контекстном меню выберите "Редактировать"
        - assert: |
              Текст редактируемого сообщения появляется в поле ввода
              Плашка с исходным сообщением появляется над полем ввода
        - do: Удалить любой символ в тексте в поле ввода
        - assert: Символ был удален
        - do: Отменить редактирования, нажав на кнопку в виде крестика в прикрепленном сообщении
        - assert: |
              Закрылось прикрепленное сообщение к полю ввода чата
              Редактирование сообщение отменилось

    При отмене редактирования не вносим изменений в текст[manual]:
        - automation: 
        - description: |
              В истории чата есть собственное текстовое сообщение (если такого сообщения нет - отправить в чат любое текстовое сообщение).
        - do: Тапнуть/кликнуть ПКМ по области сообщения из description
        - assert: Открылось контекстное меню
        - do: В контекстном меню выберите "Редактировать"
        - assert: |
              Текст редактируемого сообщения появляется в поле ввода
              Плашка с исходным сообщением появляется над полем ввода
        - do: Отменить редактирования, нажав на кнопку в виде крестика в прикрепленном сообщении
        - assert: |
              Закрылось прикрепленное сообщение к полю ввода чата
              Редактирование сообщение отменилось

    Корректно работает повторное редактирование после отмены редактирования[manual]:
        - automation: 
        - description: |
              В истории чата есть собственное текстовое сообщение (если такого сообщения нет - отправить в чат любое текстовое сообщение).
        - do: Тапнуть/кликнуть ПКМ по области сообщения из description
        - assert: Открылось контекстное меню
        - do: В контекстном меню выберите "Редактировать"
        - assert: |
              Текст редактируемого сообщения появляется в поле ввода
              Плашка с исходным сообщением появляется над полем ввода
        - do: Удалить любой символ в тексте в поле ввода
        - assert: Символ был удален
        - do: Отменить редактирования, нажав на кнопку в виде крестика в прикрепленном сообщении
        - assert: |
              Закрылось прикрепленное сообщение к полю ввода чата
              Редактирование сообщение отменилось
        - do: Отправить в чат еще одно сообщение
        - assert: Сообщение было отправлено
        - do: Тапнуть/кликнуть ПКМ по области только что отправленного сообщения
        - assert: Открылось контекстное меню
        - do: В контекстном меню выберите "Редактировать"
        - assert: |
              Текст редактируемого сообщения появляется в поле ввода
              Плашка с исходным сообщением появляется над поле

files:
    - tests/hermione/suites/messenger/context-menu/edit.common.hermione.ts

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team

