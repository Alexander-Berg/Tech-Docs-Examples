feature: Отели
type: Страница заказа
description: >-
  Для прохождения кейса в таче можно пропускать шаги с наведением на иконки.

  Карта для тестовой оплаты тестовой брони (не для асессоров): 5100002767155462

  Месяц и год: 12/22

  CVV: 454
specs:
  Бесплатная отмена отельного заказа:
    - do: |-
        Через ТК создать офферы в отель Вега Измайлово (ID отеля 742) на любые даты для нескольких гостей
        Забронировать и оплатить отель
        Перейти по кнопке Подробнее о заказе на страницу полного заказа
    - assert: |-
        * Есть кнопка "Отменить бронирование"
        * Цвет кнопки серый
        * На кнопке есть значок отмены
    - do: Кликнуть по кнопке "Отменить бронирование"
    - assert: |-
        * Открылось модальное окно
        * Страница на фоне затемнилась
        * Текст "Уверены, что хотите отменить бронирование?"
        * Кнопка "Не отменять" желтого цвета
        * Кнопка "Отменить бронирование" серого цвета
        https://jing.yandex-team.ru/files/papulova/browser_J2FSHDdbZZ.png
    - do: Кликнуть "Не отменять"
    - assert: '* Окно закрылось'
    - do: Снова открыть попап и кликнуть вне попапа
    - assert: '* Попап скрылся'
    - do: |-
        Снова открыть окно
        Кликнуть по кнопке "Отменить бронирование"
    - assert: >-
        * В окне появился спинер

        * Через 5-10 секунд появился лоадер на всю страницу с текстом "Загрузка
        заказа Загружаем подробную информацию о заказе"

        * Далее открылась страница отмены

        * Параметры проживания, номер заказа и все данные совпадают

        * Рядом со стоимостью есть ссылка "Чеки и документы", по клику на которую раскрывается меню

        * В меню есть ссылка "Чек на платеж" - черного цвета

        * В меню есть ссылка  "Чек на возврат" - черного цвета

        * Наверху страницы есть ссылка "Мои поездки"

        https://jing.yandex-team.ru/files/papulova/nhzXH1rUFr.png
    - do: Кликнуть по ссылке "Чек на платеж"
    - assert: >-
        * Посередине странице появился попап с чеком

        * Страница на заднем фоне стала затемнённой

        * Сумма в чеке равна итоговой сумме при бронировании

        https://jing.yandex-team.ru/files/megamgistr/Yandeks.Puteshestviya__aviabilety_bilety_na_poezd_bronirovanie_otelei_2019-04-10_16-46-55.png
    - do: Кликнуть вне попапа
    - assert: '* Попап закрылся'
    - do: Кликнуть по ссылке "Чек на возврат"
    - assert: |-
        * Появился попап с информацией что чек выписывается
        https://jing.yandex-team.ru/files/iliasova/2019-06-17_11.40.04.png
    - do: Кликнуть вне попапа
    - assert: '* Попап закрылся'
    - do: |-
        Подождать 5-10 секунд
        Обновить страницу
        Кликнуть в ссылку "Чек на возврат"
    - assert: >-
        * Посередине странице появился попап с чеком

        * Страница на заднем фоне стала затемнённой

        * Сумма в чеке равна сумме возврата

        https://jing.yandex-team.ru/files/megamgistr/Yandeks.Puteshestviya__aviabilety_bilety_na_poezd_bronirovanie_otelei_2019-04-10_16-49-57.png
    - do: Кликнуть вне попапа
    - assert: '* Попап закрылся'
    - do: Кликнуть по кнопке "Мои поездки"
    - assert: >-
        * Если в этот момент пользователь залогинен, то произойдет переход в ЛК
        к данным о поездке

        * Если не залогинен, то переход будет на страницу с формой поиска заказа
manual: true
Функциональность: Покупка
Устройство:
  - Десктоп
  - Тач
Страница: Страница заказа
Сервис: Отели
Тестирование асессорами: Нет
Окружение: Testing
Tag:
  - orkestrator
  - Smoke
  - Blocker
Автор: iliasova
