feature: suggest
type: ecom

params:
  exp_flags:
    - analytics-disabled=1

browsers:
  - ios-safari-12-touch
  - ios-safari-11-touch
  - ios-safari-10-touch
  - ios-safari-9-touch

specs:
  Сабмит по крестику в сложенном состоянии:
    - do: открыть ссылку https://yandex.ru/turbo?stub=suggest/type-ecom.json
    - assert: на страниче есть поле поиска с введенным запросом `iphone`
    - do: нажать на крестик в поле ввода
    - assert: |
        страница перезагрузилась на https://yandex.ru/turbo?text=about&param=param1&param=param2&query= (порядок параметров может отличаться)
        параметр `param` встречается в урле дважды
        у параметра `query` нет значения

  Сабмит по Найти со значением:
    - do: открыть ссылку https://yandex.ru/turbo?stub=suggest/type-ecom.json
    - assert: на страниче есть поле поиска с введенным запросом `iphone`
    - do: поставить курсор в поле ввода
    - assert: саджест развернулся, показалась кнопка "Найти"
    - do: кликнуть в кнопку "Найти"
    - assert: |
        страница перезагрузилась на https://yandex.ru/turbo?text=about&param=param1&param=param2&query=iphone (порядок параметров может отличаться)
        параметр `param` встречается в урле дважды

  Сабмит по Найти без значения:
    - do: открыть ссылку https://yandex.ru/turbo?stub=suggest/type-ecom.json
    - assert: на страниче есть поле поиска с введенным запросом `iphone`
    - do: поставить курсор в поле ввода
    - assert: саджест развернулся, показалась кнопка "Найти"
    - do: кликнуть на крестик
    - do: кликнуть в кнопку "Найти"
    - assert: |
        страница перезагрузилась на https://yandex.ru/turbo?text=about&param=param1&param=param2&query= (порядок параметров может отличаться)
        параметр `param` встречается в урле дважды
        у параметра `query` нет значения

  Цели:
    Сабмит по крестику в сложенном состоянии:
      - tags: no_assessors
      - do: открыть ссылку https://yandex.ru/turbo?stub=suggest/type-ecom.json&exp_flags=analytics-disabled=0
      - assert: на страниче есть поле поиска с введенным запросом `iphone`
      - do: нажать на крестик в поле ввода
      - tech: |
          для метрики `11111111` сработали цели `products-search-submit2` и `products-search-submit`
          для метрики `22222222` сработала цель `products-search-submit`

    Сабмит по Найти со значением:
      - tags: no_assessors
      - do: открыть ссылку https://yandex.ru/turbo?stub=suggest/type-ecom.json&exp_flags=analytics-disabled=0
      - assert: на страниче есть поле поиска с введенным запросом `iphone`
      - do: поставить курсор в поле ввода
      - assert: саджест развернулся, показалась кнопка "Найти"
      - do: кликнуть в кнопку "Найти"
      - tech: |
          для метрики `11111111` сработали цели `products-search-submit2` и `products-search-submit`
          для метрики `22222222` сработала цель `products-search-submit`

    Сабмит по Найти без значения:
      - tags: no_assessors
      - do: открыть ссылку https://yandex.ru/turbo?stub=suggest/type-ecom.json&exp_flags=analytics-disabled=0
      - assert: на страниче есть поле поиска с введенным запросом `iphone`
      - do: поставить курсор в поле ввода
      - assert: саджест развернулся, показалась кнопка "Найти"
      - do: кликнуть на крестик
      - do: кликнуть в кнопку "Найти"
      - tech: |
          для метрики `11111111` сработали цели `products-search-submit2` и `products-search-submit`
          для метрики `22222222` сработала цель `products-search-submit`

files:
  - platform/components/Suggest/__tests__/suggest-ecom@phone.hermione.js

v-team: Turbo

tags: 
  - e-commerce
  - no_assessors #раскатили новый дизайн на 100%

manager: tanzwuta

qa-engineer: spv

tlds: none
