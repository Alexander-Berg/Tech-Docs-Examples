feature: Авиа
type: Направления
description: ''
specs:
  'Авиа: Общий вид страницы направления':
    - do: 'Открыть страницу направления: /avia/routes/moscow--sochi/'
    - assert: >-
        Примерный внешний вид десктоп:
        https://jing.yandex-team.ru/files/tcheremnykh/ррор.png

        Примерный внешний вид тач:
        https://jing.yandex-team.ru/files/tcheremnykh/screencapture-travel-yandex-ru-avia-routes-moscow-sochi-2020-10-28-14_30_50.png

        На странице присутствуют блоки:

        * Поисковая форма

        * Динамика цен

        * Блок навигации

        * Блок когда лучше лететь

        * Блок прямых рейсов

        * Блок рейсов с пересадками

        * Блок соседних городов

        * Блок вопросов (Все вопросы по умолчанию развернуты)

        * Блок обратных билетов
    - do: Проверка блока "динамика цен"
    - assert: >-
        При открытии страницы у каждого столбика есть цена. Если цены нет -
        происходит опрос партнеров (желтый спиннер)

        [Только десктоп] По умолчанию выбран размер- неделя

        По умолчанию все фильтры отжаты

        По клику на цену попадаем на выдачу (/avia/search/result/) с
        соответствующим днем и направлением

        При включении фильтра цены меняются (если не меняются, проверить, что
        минимальная цена на выдаче с фильтром и без совпадает)

        Фильтры пробрасываются на выдачу (включить фильтр, кликнуть на цену ->
        на выдаче этот фильтр должен быть включен)
    - do: Проверка блока навигации
    - assert: >-
        При клике на каждый пункт из навигации страница скроллится к выбранному
        блоку
    - do: Проверка блока "Когда лучше лететь"
    - assert: >-
        Примерный текст: "Самый выгодный месяц для перелёта — {месяц}. Билет на
        самолёт будет стоить около {цена} ₽. Это на {процент}% ниже средней
        стоимости за год.

        {месяц}— самый популярный месяц направления. Цены на авиабилеты обычно
        на {процент}% ниже средней стоимости."
    - do: Проверка блока прямых рейсов
    - assert: >-
        Примерный текст: "Самая низкая цена прямого рейса у компании {АК}—
        {цена} ₽."

        Ниже таблица АК - цена

        Цена- ссылка,  при клике на нее попадаем на выдачу с предвыбранным
        соответствующем фильтром авиакомпании

        На выдаче есть прямые рейсы
    - do: Проверка блока непрямых рейсов
    - assert: >-
        Примерный текст: "{АК} предлагает самую низкую стоимость авиаперелёта с
        пересадками — {цена} ₽."

        Ниже таблица АК - цена

        Цена- ссылка,  при клике на нее попадаем на выдачу с предвыбранным
        соответствующем фильтром авиакомпании
    - do: Проверка блока соседних городов
    - assert: >-
        Заголовок: "Авиабилеты в города недалеко от {город}"

        Текст: "Проверьте, нет ли подходящих авиарейсов в соседние города
        прилёта, — возможно, вы найдёте более комфортные даты или сэкономите на
        билетах."

        Ниже таблица город- цена

        Город - ссылка. При клике ведет на страницу направления. Город откуда-
        тот же, город куда- соответствует кликнутому
    - do: Блок вопросов
    - assert: |-
        Все вопросы по умолчанию развернуты
        Ак, аэропорты, время полета примерно соответствует реальности
    - do: Блок обратных билетов
    - assert: |-
        Таблица из одной строки, города (поменяны местами) - цена
        Города- ссылка, при клике ведет на страницу направления
manual: true
Устройство:
  - Десктоп
  - Тач
Страница: Направления
Сервис: Авиа
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Автор: tcheremnykh
