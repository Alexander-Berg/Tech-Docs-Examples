feature: Страница варианта

description: страница варианта и все эл-ты на ней по адресу /tutor/subject/variant

specs:
    Карточка справочных материалов:
        - tags: smoke
        - do: перейти на страницу любого варианта Математики ОГЭ
        - assert: |
            открыта страница варианта по математике
            под блоком таймера присутствует карточка Справочных материалов
        - screenshot: внешний вид блока справочных материалов [promo]
    Сайдблок:
        beforeEach:
            - do: перейти на страницу любого варианта Математики ОГЭ
        Проверка открытия/закрытия сайдблока:
            - do: кликнуть в кнопку "Посмотреть материалы"
            - assert: в правой части экрана выехала шторка со справочными материалами
            - screenshot: внешний вид сайдблока справочных материалов [side-block-open]
            - do: кликнуть в крестик в правой верхней части справочных материалов
            - assert: блок справочных материалов закрылся
        Переход на теорию:
            - do: кликнуть в кнопку "Посмотреть материалы"
            - assert: в правой части экрана выехала шторка со справочными материалами
            - do: кликнуть в кнопку "Открыть в новом окне"
            - assert: в новой вкладке открыта страница справочных материалов /tutor/subject/theory/?subject_id=16
    Таймер:
        beforeEach:
            - do: перейти на страницу любого варианта базового уровня математики
            - assert: открыта страница варианта
        Нет решенных задач:
            - assert: в карточке таймера присутствует "Выполнено заданий 0 из 20"
        Есть решенные задачи:
            - do: ввести в поля ответов любой текст
            - assert: |
                в карточке таймера присутствует "Выполнено заданий 20 из 20"
                счетчик оставшегося времени меньше "03:00:00"
            - screenshot: внешний вид карточки таймера [todo clock] # FRONTEND-753
        Пауза:
            - do: кликнуть в кнопку паузы
            - screenshot: внешний вид карточки таймера паузы [suspend-clock]
            - assert: |
                счетчик прошедшего времени остановился
                счетчик оставшегося времени остановился
                суммарно время обоих счетчиков равно "03:00:00" или 180 минут
            - do: кликнуть в кнопку возобновления
            - assert: |
                счетчик прошедшего времени начал увеличиваться
                счетчик оставшегося времени начал уменьшаться
        Оверлей:
            - do: кликнуть в кнопку паузы
            - do: кликнуть в кнопку "Возобновить" в центра экрана
            - assert: оверлей исчез, список заданий вновь доступен пользователю
            - do: заполнить поле ответа для всех заданий
            - do: кликнуть в кнопку паузы
            - assert: в оверлее по центру экрана присутствует "Выполнено заданий 20 из 20"
            - do: опуститься вниз страницы
            - assert: оверлей всегда находится в центра экрана при скролле
    Модальное окно:
        При попытке уйти со страницы варианта:
            В том же окне:
                - do: перейти на страницу решения шестнадцатого варианта базового уровня математики
                - do: нажать на логотип Репетитор в верхнем левом углу
                - assert: появилось модальное окно подтверждения ухода со страницы задания
                - screenshot: внешний вид модального окна [leave-modal]
                - do: нажать на кнопку 'Нет'
                - assert: модальное окно скрылось
                - do: нажать на логотип Репетитор в верхнем левом углу
                - assert: появилось модальное окно подтверждения ухода со страницы задания
                - do: нажать на кнопку 'Да'
                - assert: |
                    модальное окно скрылось
                    открылась главная страница Я.Репетитора
            В новом окне:
                - do: перейти на страницу решения любого варианта
                - do: нажать на кнопку с восклицательным знаком напротив названия задания
                - assert: |
                    модальное окно не появилось
                    страница отправки обращения о ошибке в задании открылось в новом окне

v-team: Younglings

qa-engineer:
    - helm

platform:
    - desktop

tags:
    - edu-front
    - variant-page

files:
    - tests/hermione/suites/desktop/variant-page/variant-page.hermione.js
