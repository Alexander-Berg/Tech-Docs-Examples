feature: Авиа
type: ''
description: >-
  Как попасть на страницу бронирования аэрофлота:


  **Если вы тестируете тач-версию, можно для удобства создавать нужную ссылку на
  бронирование (или другие ссылки из кейсов) в десктопе, потом просто копировать
  и проверять кейс в таче.**


  * В поиске авиа поискать по направлению, по которому летает аэрофлот
  (например, Москва - Екатеринбург, или направление, указанное в кейсе).

  * Выбрать в фильтре по авиакомпаниям Аэрофлот

  * Кликнуть по сниппету с предложением Аэрофлота (где есть приписка Продает
  авиакомпания).

  * На открывшейся странице кликнуть по кнопке Купить для аэрофлота. //
  произойдет переход на travel-test

  ![image](https://jing.yandex-team.ru/files/shenfeld/2020-12-18_14.23.50-7x9wt.png)

  * **У Асессоров откроется travel.crowdtest** - должна открыться страница
  бронирования с формой ввода данных пассажиров



  Отсутствие лого АК не является багом или проблемой кейса!


  **Логика работы, не для асессоров**:

  Если одинаковые 'last_name_en', 'first_name_en', 'gender', 'birth_date' и
  одинаковые 'type', 'number', 'citizenship' то ничего не делаем.

  Если одинаковые 'last_name_en', 'first_name_en', 'gender', 'birth_date' и
  разные 'type', 'number', 'citizenship' то добавляем документ к пассажиру

  Во всех остальных случаях создаём нового пассажира


  **Для Асессоров: Выполнить вход удается ТОЛЬКО через кнопку ЛК (рядом с
  кнопкой Войти) > кликнуть Войдите в аккаунт > Авторизоваться тестовым
  аккаунтом (ссылка ведет на passport-test.yandex.ru). Важно чтобы это был
  именно тестовый аккаунт, т.к. через свой аккаунт не впустит**

  ![image](https://jing.yandex-team.ru/files/shenfeld/2020-03-25_17.35.08-4bpdm.png)

  Нужно быть залогиненым.

  Для тестинга асессоры могут пользоваться тестовым аккаунтом :
  vladlen@yandex.ru password: v12345678
specs:
  Проверка создания пассажира через BOY:
    - do: Выполнить переход как описано в Description.
    - assert: 'Переход сработал, открылась страница бронирования'
    - do: >-
        Заполнить валидно все поля таким образом, чтобы не было точного
        совпадения с данными любого пассажира в записной книжке
    - do: >-
        Нажать кнопку "Оплатить" (у асессоров форма оплаты не откроется, это
        нормально - главное чтобы произошел переход)
    - do: Повторить п. 1
    - assert: >-
        * Переход сработал, открылась страница бронирования

        * Появился новый интент с созданным ранее пассажиром (если в записной
        книжке было много пассажиров (больше 5-10), то нужно кликнуть на поле
        ввода фамилии и ввести начало фамилии с пред. шага - должен появиться
        саджест с созданным ранее пассажиром)
    - do: Кликнуть по интенту/саджесту
    - assert: |-
        * Во все поля подставились данные
        * Все данные соответствуют введённым на пункте 2
    - do: >-
        Зайти в личный кабинет (иконка ЛК находится на главной в правом верхнем
        углу)

        Перейти во вкладку “Пассажиры”
    - assert: 'Среди пассажиров появился новый с данными, введенными на п.2'
    - do: 'Удалить пассажира, созданного в п2'
    - assert: Пассажир удалился
manual: true
Функциональность: Бронирование
Устройство:
  - Десктоп
  - Тач
Сервис:
  - Авиа
  - Записная книжка
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
