feature: Многократная подгрузка, разделители

specs-integration:
  Присутствуют на странице:
    - counter: /$page/$main/$pager/button-more
    - do: получить выдачу по запросу 'test1'
    - assert: в конце поисковой выдачи отобразилась кнопка 'Показать ещё'
    - do: нажать на кнопку 'Показать ещё'
    - assert: между первой и второй частью выдачи появился разделитель
    - do: нажать еще раз на кнопку 'Показать ещё'
    - assert: появился еще один разделитель

specs:
  aliases:
    - &CheckMetrics
      - assertMetrics:
          - web.tech.first_pages_with_showed_pager_rate
          - web.reformulations_rate
          - web.total_request_count
          - web.total_rerequest_count
          - web.rerequest_per_user
          - web.total_click_count
          - web.total_all_click
          - web.abandonment
          - web.abandonment_second_plus
          - web.tech_part_misc_click

  Внешний вид разделителей и счетчик на "Показать ещё":
    - do: получить выдачу по запросу 'test1'
    - assert: в конце поисковой выдачи отобразилась кнопка 'Показать ещё'
    - assertMetrics:
        - web.tech.first_pages_with_showed_pager_rate
        - web.total_request_count
        - web.total_rerequest_count
        - web.rerequest_per_user
        - web.abandonment
        - web.abandonment_second_plus
    - tech: проверить счётчик в кнопке 'Показать ещё'
    - do: нажать на кнопку 'Показать ещё'
    - assert: между первой и второй частью выдачи появился разделитель
    - screenshot: внешний вид разделителя совпадает со скриншотом [firstCut]
    - *CheckMetrics
    - do: нажать еще раз на кнопку 'Показать ещё'
    - assert: появился еще один разделитель
    - *CheckMetrics

files:
  - features/touch-phone/serp-cut/serp-cut.hermione.js
  - features/touch-phone/serp-cut/serp-cut.hermione.e2e.js

v-team: Beauty

tags:
  - reviewed

tlds: all
