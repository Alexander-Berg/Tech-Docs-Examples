feature:  Тандем
type: из настроек модуля

tags:
    - release_Webview
    - platform_searchapp
    - platform_common

specs:

    Создать тандем если больше одной колонки:
        - tags: 
            - https://testpalm.yandex-team.ru/alice/testcases/4076
            - release_Smarthome
            - smarthome_regress
            - webview_regress
        - do: На аккаунте присутствуют модуль и больше 1 колонки Яндекса
        - do: Перейти в настройки Модуля 
        - do: Выбрать `Создать тандем`
        - screenshot: Отображается список колонок, с которыми можно создать тандем; в списке нет партнерских колонок (Dexp, Elari, Irbis и т.д.), присутствуют только колонки Яндекса [tandem-1]
        - do: Выбрать одну из колонок, нажать `Собрать тандем`
        - screenshot: Модалок не появляется, колонка выбрана [tandem-2]
        - assert: <img src=https://jing.yandex-team.ru/files/levkovskayama/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202021-11-25%20%D0%B2%2014.01.33.f47cefd.png alt=Скриншот width=250>
        - do: Вернуться назад в настройки Модуля
        - screenshot: В настройках отображается пункт **Тандем** с именем колонки в тандеме [tandem-3]
        - assert: <img src=https://jing.yandex-team.ru/files/levkovskayama/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202021-11-25%20%D0%B2%2014.03.58.7811e9b.png alt=Скриншот width=250> 
        - assert: На экране самого модуля отображается иконка затандемленной станции
        - assert: <img src=https://jing.yandex-team.ru/files/levkovskayama/IMG_2769.8ec6296.JPG alt=Скриншот width=200> 

    Нельзя создать тандем со старыми колонками:
        - do: На аккаунте присутствуют модуль и какие-нибудь из старых колонок (Dexp, Elari, Irbis и т.д.)
        - do: Перейти в настройки Модуля
        - assert: Если на аккаунте есть колонки Яндекса, то присутствует пункт создания тандема; при попытке создать тандем в списке нет партнерских колонок
        - assert: Если нет колонок Яндекса, то пункта про тандем нет вовсе

    Создать тандем если только 1 колонка:
        - tags: 
            - https://testpalm.yandex-team.ru/alice/testcases/4077
            - webview_regress
        - do: На аккаунте один модуль и ровно одна колонка Яндекса
        - do: Перейти в настройки Модуля; Выбрать `Создать тандем`
        - screenshot: Отображается модалка создания тандема [tandem-4]
        - assert: <img src=https://jing.yandex-team.ru/files/levkovskayama/photo_2021-11-25%2014.38.18.d997bb9.jpeg alt=Скриншот width=250>
        - do: Нажать `Позже`
        - assert: Тандем не создался
        - do: В настройках модуля снова выбрать `Создать тандем`; в появившейся модалке нажать `Создать тандем`
        - assert: Отображается анимация создания тандема
        - screenshot: В конце видим финальный экран модалки с успешным текстом создания тандема [tandem-5]
        - assert: <img src=https://jing.yandex-team.ru/files/levkovskayama/photo_2021-11-25%2014.38.24.e3be0f1.jpeg alt=Скриншот width=300>"
        - do: Нажать `Спасибо, попробую`
        - assert: Модалка сворачивается, возвращаемся в настройки модуля
        - assert: В настройках модуля теперь отображается пункт **Тандем** с именем связанной колонки

    Разобрать тандем:
        - tags: 
            - https://testpalm.yandex-team.ru/alice/testcases/4078
            - release_Smarthome
            - smarthome_regress
            - webview_regress
        - do: Есть настроенный тандем модуля и колонки
        - do: Перейти в настройки Модуля -> Тандем
        - do: Нажать внизу кнопку `Разъединить тандем`
        - screenshot: Появляется модалка с подтверждением разъединения [tandem-6]
        - assert: <img src=https://jing.yandex-team.ru/files/levkovskayama/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202021-11-25%20%D0%B2%2014.16.40.9375045.png alt=Скриншот width=250>"
        - do: Нажать `Отмена`
        - assert: Тандем не разъединен
        - do: Нажать снова на `Разъединить тандем`; Снова появляется модалка с выбором действия; Нажать `Разъединить`
        - assert: Тандем разрывается, на экране телевизора перезагружается экран и пропадает иконка станции справа сверху 
        - screenshot: Кнопки `Разъединить тандем` больше нет в подвале страницы [tandem-7]
        - do: Перейти в настройки модуля
        - assert: Отображается пункт `Создать тандем`

    Синяя точка:
        - tags:
            - https://testpalm.yandex-team.ru/alice/testcases/4248
            - platform_common
            - webview_regress
        - do: Очистить **UserStorage** -- Залипнуть в тестид **411175**; Перейти в Настройки -> Debug Page -> **UserStorage**; Пролистать вниз и нажать **Снести все**
        - do: Модуль НЕ добавлен на аккаунт
        - do: Залогиниться в модуль
        - screenshot: Модуль появляется в УД, на карточке устройства присутствует синяя точка [tandem-8]
        - assert: <img src=https://jing.yandex-team.ru/files/levkovskayama/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202022-02-04%20%D0%B2%2014.48.25.342f64e.png alt=Скриншот width=250>
        - do: Открыть сторю про Соберите тандем в ленте сторис; Закрыть сторю
        - assert: Точка на модуле пропала
        - do: Очистить **UserStorage**
        - assert: Точка на модуле появилась снова
        - do: Перейти в настройки модуля; Нажать на кнопку создания тандема; Вернуться на главный экран
        - assert: Точка на модуле пропала

