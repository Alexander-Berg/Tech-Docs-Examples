feature: AppSmoke
type: Ассессоры

specs:
  #Временно вставляю скриншоты джинком, так как асессоры не проходят данные тесты совсем из-за ошибки по скриншотам https://jing.yandex-team.ru/files/likharad-m/Test_runs__TestPalm_2019-04-01_17-55-04.png
  Проверка колдунщика картинок [manual]:
    - automation: SERPTEST-549
    - v-team: Images
    - priority: high
    - tags: pp_new_core
    - do: открыть ссылку на залипание и закрыть вкладку
    - do: выгрузить приложение из памяти устройства и открыть повторно
    - do: получить выдачу по запросу 'кошка' или 'природа фото'
    - screenshot: появился колдунщик картинок, внешний вид в зависимости от разрешения экрана такой [https://jing.yandex-team.ru/files/masloval/2021-09-08_j4rip.png]
    - do: нажать на тайтл в колдунщике картинок
    - assert: |
        осуществился переход на сервис картинок в приложении,
        показана выдача Картинок по тому же запросу
    - do: нажать на таб 'Сайты' ('Поиск') под желтой шапкой
    - assert: вернулись обратно на выдачу по сайтам по тому же запросу

  Скролл в колдунщике картинок [manual]:
    - automation: SERPTEST-549
    - v-team: Images
    - priority: high
    - tags: pp_new_core
    - do: открыть ссылку на залипание и закрыть вкладку
    - do: выгрузить приложение из памяти устройства и открыть повторно
    - do: получить выдачу по запросу 'котята'
    - assert: появился колдунщик картинок
    - do: скроллить картинки в колдунщике вправо до конца
    - assert: появилась кнопка кнопка 'Еще картинки'
    - do: клик по кнопке 'Еще картинки'
    - assert: |
        осуществился переход на сервис картинок в приложении,
        показана выдача Картинок по тому же запросу
    - do: нажать на таб 'Сайты' ('Поиск') под желтой шапкой
    - assert: |
        вернулись обратно на выдачу по сайтам по тому же запросу,
        колдунщик проскроллен до кнопки 'Еще картинки' (кроме приложения на iOS платформе - там колдунщик в первоначальном виде)
    - do: скроллить обратно до первой картинки в колдунщике
    - assert: колдунщик показывается в виде по умолчанию

  Проверка списочного колдунщика Видео [manual]:
    - priority: high
    - automation: SERPTEST-549
    - v-team: Video
    - browsers:
        notFor:
          - android-pp-6.45-touch
    - do: получить выдачу по запросу 'дудь видео' (альтернативные запросы 'enemy arch видео', 'котики видео', 'смешные коты')
    - assert: появился списочный колдунщик Видео (НЕ xl колдунщик, т.е. нет большой первой тумбы; если пришёл xl, то надо попробовать любые другие запросы связанные с видео)
    - screenshot: примерный внешний вид списочного колдунщика [https://jing.yandex-team.ru/files/kulagin-iv/Screenshot_182.png]
    - do: нажать по заголовку 'Видео' в колдунщике
    - assert: |
        осуществился переход на сервис Видео в приложении(открытие сервиса в новой вкладке это не баг),
        показана выдача Видео по тому же запросу
    - do: тапнуть по табу 'Поиск' или 'Сайты' (в ПП) под поисковой стрелкой
    - assert: вернулись обратно на выдачу по сайтам по тому же запросу
    - do: нажать по заголовку первого видео в колдунщике
    - assert: |
        осуществился переход на сервис Видео в приложении,
        открылся просмотрщик Видео с выбранным роликом
    - do: нажать на кнопку выхода из просмотрщика (в верхнем углу шапки просмотрщика крестик)
    - assert: отображается выдача Видео по тому же запросу
    - do: тапнуть по табу 'Поиск' или 'Сайты' (в ПП) под поисковой стрелкой
    - assert: вернулись обратно на выдачу по сайтам по тому же запросу
    - do: пролистать содержимое колдунщика видео до конца
    - assert: |
        появилась кнопка 'Показать больше видео'
    - do: нажать на кнопку 'Показать больше видео'
    - assert: |
        осуществился переход на сервис Видео в приложении,
        показана выдача Видео по тому же запросу

  Проверка колдунщика Видео xl:
    - automation: SERPTEST-549
    - priority: high
    - v-team: Video
    - do: получить выдачу по запросу 'спокойной ночи малыши песня' (альтернативные запросы 'как установить windows 7', 'как прыгать в длину')
    - assert: появился видео колдунщик xl (первая тумба большая) (если появился колдунщик без большой тумбы, то попробовать любые другие запросы - колдунщик может приходить не всегда)
    - screenshot: примерный внешний вид колдунщика Видео xl [https://jing.yandex-team.ru/files/kulagin-iv/Screenshot_181.png]
    - do: нажать по заголовку 'Видео' в колдунщике
    - assert: отображается выдача Видео по тому же запросу
    - do: тапнуть по табу 'Поиск' или 'Сайты' (в ПП) под поисковой стрелкой
    - assert: вернулись обратно на выдачу по сайтам по тому же запросу
    - do: нажать по заголовку видео в xl-тумбе в колдунщике
    - assert: |
        осуществился переход на сервис Видео в приложении,
        открылся просмотрщик Видео с выбранным роликом
    - do: нажать на кнопку выхода из просмотрщика (в  верхнем углу шапки просмотрщика крестик)
    - assert: отображается выдача Видео по тому же запросу
    - do: тапнуть по табу 'Поиск' или 'Сайты' (в ПП) под поисковой стрелкой
    - assert: вернулись обратно на выдачу по сайтам по тому же запросу
    - do: пролистать содержимое блока видео до конца
    - assert: |
        появилась кнопка 'Показать больше видео'
    - do: нажать на кнопку 'Показать больше видео'
    - assert: |
        осуществился переход на сервис Видео в приложении,
        показана выдача Видео по тому же запросу
  Проверка открытия просмотрщика картинок в Объектном ответе [manual]:
    - tags: oo_images
    - automation: SERPTEST-549
    - v-team: OO
    - do: открыть ссылку на залипание и закрыть вкладку
    - do: получить выдачу по запросу 'война и мир'
    - screenshot: появилась карточка объекта (проскроллить выдачу вниз, если карточки не видно сразу), примерный вид такой (может содержать список 'Смотрите также') [https://jing.yandex-team.ru/files/likharad-m/STF_2019-04-01_18-28-55.png]
    - do: нажать на картинку рядом с тайтлом
    - assert: открылся просмотрщик
    - do: нажать в крестик
    - asssert: |
        просмотрщик закрылся,
        вернулись на страницу выдачи поиска
  Проверка работы фильтров в карусели [manual]:
    - browsers:
        notFor:
          - android-pp-6.45-touch
    - tags: oo_lists
    - priority: high
    - automation: SERPTEST-549
    - v-team: Video
    - do: открыть ссылку на залипание и закрыть вкладку
    - do: получить выдачу по запросу 'фильмы'
    - assert: появилась карусель с фильмами
    - do: просвайпить фильтры влево до упора
    - assert: показаны крайние правые фильтры
    - do: просвайпить фильтры вправо и выбрать любое значение жанра
    - assert: загрузилась новая выдача с учетом, выбранного фильтра
    - do: нажать на кнопку 'Назад' внизу меню приложения (или кнопку Назад на устройстве)
    - assert: произошел возврат на предыдущую выдачу
    - do: просвайпить постеры фильмов влево
    - assert: карусель прокручивается
    - do: просвайпить постеры фильмов вправо
    - assert: карусель прокручивается
  Базовые проверки колдунщика сетей/рубрик [manual]:
    - automation: SERPTEST-549
    - v-team: VanillaGeo
    - do: открыть ссылку на залипание и закрыть вкладку
    - do: получить выдачу по запросу 'кафе'
    - screenshot: появился колдунщик сетей/рубрик [https://jing.yandex-team.ru/files/sladex/2021-09-24T12:26:28Z.205167a.png]
    - do: нажать на тайтл
    - assert: открылся сайдблок с картой и пинами
    - do: нажать на ссылку 'Назад' в левом верхнем углу сайдблока
    - assert: сайдблок закрылся и вернулись на страницу выдачи поиска
    - do: нажать на карту
    - assert: открылся сайдблок с картой и пинами
    - screenshot: примерный внешний вид [https://jing.yandex-team.ru/files/sladex/2021-09-24T12:27:36Z.9f9a224.png]
  Модальное окно с выбором маршрута при клике в кнопку «Маршрут» в колдунщике сетей/рубрик [manual]:
    - automation: SERPTEST-549
    - v-team: VanillaGeo
    - do: открыть ссылку на залипание и закрыть вкладку
    - do: получить выдачу по запросу 'кафе'
    - screenshot: появился колдунщик сетей/рубрик [https://jing.yandex-team.ru/files/sladex/2021-09-24T12:26:28Z.205167a.png]
    - do: нажать на карту
    - assert: открылся сайдблок с картой
  Фильтры в сайдблоке в колдунщике сетей/рубрик [manual]:
    - automation: SERPTEST-549
    - v-team: VanillaGeo
    - do: открыть ссылку на залипание и закрыть вкладку
    - do: получить выдачу по запросу 'кафе'
    - screenshot: появился колдунщик сетей/рубрик [https://jing.yandex-team.ru/files/skurhanski/browser_tBbXg8lcnZ.png]
    - do: нажать на карту
    - assert: открылся сайдблок с картой
    - do: тапнуть в заголовок 'Результаты поиска' внизу экрана
    - assert: выехал блок с результатами поиска, в верхней части строка с фильтрами
    - do: нажать на иконку открытия фильтров в левом углу
    - screenshot: появился блок с фильтрами [https://jing.yandex-team.ru/files/pdzianisevich/Media_viewer_2021-01-11_14.45.44.png]
  Открытие сайдблока при клике в название организации в колдунщике сетей/рубрик [manual]:
    - automation: SERPTEST-549
    - v-team: VanillaGeo
    - do: открыть ссылку на залипание и закрыть вкладку
    - do: получить выдачу по запросу 'кафе'
    - screenshot: появился колдунщик сетей/рубрик [https://jing.yandex-team.ru/files/likharad-m/STF_2019-04-01_18-57-37.png]
    - do: нажать на название организации в списке
    - assert: открылся сайдблок с детальной информацией по организации
  Проверка наличия опечаточника [manual]:
    - automation: SERPTEST-549
    - v-team: Freshness
    - priority: high
    - do: открыть ссылку на залипание и закрыть вкладку
    - do: получить выдачу по запросу 'малоко'
    - assert: на выдаче появился опечаточник
    - screenshot: внешний вид опечаточника [https://jing.yandex-team.ru/files/kseverina/browser_WVwUqLgfwV.png]
    - assert: в поисковой строке запрос 'малоко' исправился на 'молоко'
    - do: нажать на кнопку 'Отменить'
    - assert: |
        результаты поисковой выдачи обновились,
        в поисковой строке запрос исправился на 'малоко'
  Разворачивание сниппета по тапу на контрол 'Читать еще' [manual]:
    - automation: SERPTEST-549
    - v-team: Beauty
    - do: открыть ссылку на залипание и закрыть вкладку
    - do: получить выдачу по запросу 'тест'
    - assert: в результатах выдачи есть хотя бы один сниппет, содержащий ссылку 'Читать еще'
    - do: тапнуть по первой ссылке 'Читать еще'
    - assert: сниппет развернулся и отображается больше информации
  Проверка подгрузки второй страницы [manual]:
    - automation: SERPTEST-549
    - v-team: Beauty
    - do: открыть ссылку на залипание и закрыть вкладку
    - do: получить выдачу по запросу 'тест'
    - assert: загрузились результаты выдачи
    - do: пролистать до конца выдачи
    - screenshot: внизу есть кнопка 'Показать ещё' [https://jing.yandex-team.ru/files/likharad-m/STF_2019-04-01_19-10-47.png]
    - do: нажать по кнопке 'Показать еще'
    - assert: |
        загрузилась вторая страница с результатами,
        вместо кнопки появился разделитель страниц с номером 2
    - do: пролистать до конца выдачи и нажать 'Показать еще'
    - assert: |
        загрузилась третья страница с результатами,
        вместо кнопки появился разделитель страниц с номером 3
  Проверка органической выдачи [manual]:
    - automation: SERPTEST-549
    - v-team: Beauty
    - do: открыть ссылку на залипание и закрыть вкладку
    - do: получить выдачу по запросу ' тест'
    - do: нажать в тайтл любого сниппета
    - assert: произошёл переход на сторонний сайт в webview (внутренний браузер)
    - do: вернуться на поисковую выдачу, нажать по гринурлу в сниппете
    - assert: произошёл переход на сторонний сайт в webview (внутренний браузер)
  Проверка кнопки 'назад' [manual]:
    - automation: SERPTEST-549
    - v-team: Beauty
    - browsers:
        - android-pp-6.45-touch
    - do: открыть ссылку на залипание и закрыть вкладку
    - do: получить выдачу по запросу ' тест'
    - do: нажать в тайтл любого сниппета
    - assert: переход на сторонний сайт в webview (внутренний браузер)
    - do: нажать на стрелку Назад (НЕ в браузере, а на ту что в самом низу)
    - assert: возращаемся в поисковое приложение
  Проверка связанных запросов [manual]:
    - automation: SERPTEST-549
    - v-team: UniAnswer
    - do: открыть ссылку на залипание и закрыть вкладку
    - do: получить выдачу по запросу 'госуслуги личный кабинет'
    - do: проскроллить до конца выдачи
    - screenshot: под последним сниппетом показываются связанные запросы [https://jing.yandex-team.ru/files/etestova/searchapp-related.png]
    - do: нажать на любой из запросов
    - assert: |
        осуществился перезапрос
        отображается выдача по новому запросу
  Проверка соответствия выдачи региону, выбранному в настройках [manual]:
    - automation: SERPTEST-549
    - v-team: Suggest
    - do: открыть ссылку на залипание и закрыть вкладку
    - do: в Настройках приложения посмотреть свое местоположение (<ваш город>). 
    - do: в поисковой строке набрать 'погода в'
    - assert: в подсказках появилась 'погода в <вашем городе>'
    - do: нажать на подсказку 'погода в <вашем городе>'
    - do: нажать 'Найти'
    - assert: на выдаче отображается блок погоды с заголовком 'Погода в <вашем городе>' или 'Сейчас в <вашем городе>'
  Проверка БНО и навигации [manual]:
    - automation: SERPTEST-549
    - v-team: Beauty
    - do: открыть ссылку на залипание и закрыть вкладку
    - do:  получить выдачу по запросу 'ВТБ'  (или 'цб рф' или 'lenta ru')
    - assert: появился сниппет БНО
    - do: тапнуть на первый сайтлинк
    - assert: в новой вкладке открылся нужный раздел сайта
  Открытие турбо-страницы [manual]:
    - automation: SERPTEST-549
    - v-team: Turbo
    - tags: overlay
    - do: открыть ссылку на залипание и закрыть вкладку
    - do:  получить выдачу по запросу 'новости vesti.ru' (альтернативные запросы - 'новости news.rambler.ru', 'новости tass.ru')
    - assert: в выдаче присутствует новостной турбо сниппет [https://jing.yandex-team.ru/files/ju-nik/2022-01-10T10%3A37%3A37Z.443e884.png]
    - do: тапнуть на любую новостную карточку сниппета
    - assert: открылась турбо-страница (с иконкой ракеты в шапке) в новой вкладке (если открылась страница оригинального сайта,то попробовать альтернативные запросы)
    - assert: страница выглядит корректно
    - assert: ссылки в статье кликабельны и работают корректно


files: []

tags: [smoke, smoke_extended, required, skip_e2e_check, skip_manual_check]

v-team: Common

browsers:
  - android-pp-6.45-touch
  - ios-pp-3.2-touch

tlds: none
