feature: EcomCartForm

params:
    exp_flags:
        - turbo-app-any-ua=1
        - analytics-disabled=1

specs:
    beforeEach:
        - do: при дальнейшей проверке указанных ожидаемых результатов обращайте внимание на любые некорректные на ваш взгляд поведения, основываясь на свой опыт использования web-приложений (например, сохранение позиции при переходах туда-обратно кнопками на устройстве, пустые экраны при переходах, кривая верстка, скачкИ элементов, плавность скролла, неработающая функциональность и т.п.)

    Аватарка пользователя в корзине:
        не должна быть на странице если пользователь не залогинен:
            - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocart/
            - do: добавить любой товар в корзину
            - do: нажать кнопку Оформить заказ
            - assert: |
                осуществился переход к оформлению заказа
                в форме отсутствует аватарка с именем пользователя

        должна быть на странице если пользователь залогинен:
            - do: залогиниться на yandex.ru
            - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocart/
            - do: добавить любой товар в корзину
            - do: нажать кнопку Оформить заказ
            - assert: |
                осуществился переход к оформлению заказа
                в форме есть аватарка с именем пользователя
            - screenshot: примерный внешний вид [plain]

    Trust:
        Trust, успешно:
            - tags:
                  - no_assessors # не гоняем тесты на трасте
            - params:
                  exp_flags:
                      - turboforms_endpoint=/
            - do: открыть страницу https://yandex.ru/turbo/ymturbo.t-dir.com/s/catalog/underwear/underwear-white-freedom/?product_id=117&mock_payment_requests=1
            - do: кликнуть по кнопке добавить в корзину
            - tech: отправилась цель 'add-to-cart'
            - do: кликнуть по кнопке перейти в корзину
            - tech: отправилась цель 'open-cart-from-product'
            - do: нажать на кнопку оформить заказ
            - do: заполнить поля - 'имя name', 'телефон +7 800 800 80 80', 'email call@example.ru', выбрать вторую опцию доставки, в поле адрес доставки заполнить 'Адрес доставки'
            - do: нажать кнопку оплатить
            - assert: открылась страница с оплатой "Яндекс.Оплата" со спинером
            - assert: загрузилась страница с текстом "Trust status will be success"
            - screenshot: внешний вид [trust-iframe]
            - assert: произошел преход на страницу с результатом
            - screenshot: внешний вид соответствует скриншоту [success-payment]

        Trust, неудачно:
            - tags:
                  - no_assessors # не гоняем тесты на трасте
            - params:
                  exp_flags:
                      - turboforms_endpoint=https://test-turbo-forms.common.yandex.ru/
            - do: открыть страницу https://yandex.ru/turbo/ymturbo.t-dir.com/s/catalog/underwear/underwear-white-freedom/?product_id=117&mock_payment_requests=1
            - do: кликнуть по кнопке добавить в корзину
            - tech: отправилась цель 'add-to-cart'
            - do: кликнуть по кнопке перейти в корзину
            - tech: отправилась цель 'open-cart-from-product'
            - do: нажать на кнопку оформить заказ
            - do: заполнить поля - 'имя error-pay', 'телефон +7 800 800 80 80', 'email call@example.ru', выбрать вторую опцию доставки, в поле адрес доставки заполнить 'Адрес доставки'
            - do: нажать кнопку оплатить
            - assert: открылась страница с оплатой "Яндекс.Оплата" со спинером
            - assert: загрузилась страница с текстом "Trust status will be fail"
            - assert: произошел преход на страницу с результатом
            - screenshot: внешний вид соответствует скриншоту [error-payment]

    Валидация формы:
        Корретная форма:
            - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/?morda=1&ecommerce_main_page_preview=1
            - do: кликнуть по кнопке "В корзину" на картоке товара
            - do: кликнуть по кнопке "В корзине" на картоке товара
            - do: нажать на кнопку оформить заказ
            - do: заполнить поля - 'ФИО' - Фамилия, 'Телефон' - +7 800 800 80 80, 'email' — call@example.ru, выбрать вторую опцию доставки, раздел "Адрес доставки" заполнить корректными данными
            - screenshot: форма оплаты соответсвует скриншоту [right-cart-form-page-filled]
            - do: нажать кнопку отправить
            - screenshot: внешний вид соответствует скриншоту [success-validation]

        Форма с ошибками:
            - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/s/rnd/2lum7hf3
            - do: кликнуть по кнопке добавить в корзину
            - do: кликнуть по кнопке перейти в корзину
            - do: нажать на кнопку оформить заказ
            - do: заполнить поля - 'Телефон' - +7 800, 'email' — c@e..r
            - do: нажать кнопку отправить
            - screenshot: внешний вид соответствует скриншоту [error-validation]
            - do: заполнить поля - 'ФИО' - Фамилия, 'Телефон' - +7 800 800 80 80, 'email' — call@example.ru, выбрать вторую опцию доставки, в поле адрес доставки заполнить 'Адрес доставки'
            - do: нажать кнопку оплатить
            - assert: показался экран успешной оплаты

        Изменение способа доставки:
            - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/s/rnd/2lum7hf3
            - do: кликнуть по кнопке "Добавить в корзину"
            - do: кликнуть по кнопке "В корзину"
            - do: нажать на кнопку "Оформить заказ"
            - do: заполнить поля - 'ФИО' - Фамилия, 'Телефон' - +7 800 800 80 80, 'email' — call@example.ru
            - do: выбрать способ доставки "Самовывоз"
            - assert: поле "Адрес доставки" скрылось
            - screenshot: внешний вид соответствует скриншоту [delivery-pickup]

        Автокомплит формы:
            - automation: TURBOUI-3895
            - do: залогиниться на yandex.ru
            - do: получить выдачу по запросу 'site:fulmar.ru' (альтернативные запросы - site:kupicase.ru каталог, 'site:super01.ru')
            - assert: на выдаче присутствует турбо-сниппет(ы) с серой иконкой ракеты справа от гринурла
            - do: кликнуть по любой ссылке турбо-сниппета для перехода на страницу магазина
            - assert: открылась страница магазина с активной кнопкой Каталог на нижней панели
            - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_Gw9upIcJ8I.png]
            - do: кликнуть по пиктограмме Каталог на нижней панели
            - do: добавить любой товар в корзину
            - do: перейти в корзину и нажать кнопку "Оформить заказ"
            - assert: произошел переход к оформлению заказа
            - assert: переход произошел с плавной анимацией справа налево
            - assert: поля в разделе Получатель заполнены данными из вашего паспорта
            - assert: в разделе Способ доставки уже выбран один из способов
            - do: изменить данные в полях "ФИО", "Телефон", "Email", "Способ доставки"
            - do: кликнуть на ссылку "Корзина" в левом верхнем углу
            - assert: произошел переход в разде Корзина
            - assert: переход произошел с плавной анимацией слева на право
            - assert: переход произошел без белой страницы
            - do: нажать кнопку "Оформить заказ"
            - assert: произошел переход к оформлению заказа
            - assert: поля "ФИО", "Телефон", "Email", "Способ доставки" заполнены новыми (измененными) данными

        Автокомплит формы быстрого заказа:
            - automation: TURBOUI-3895
            - do: залогиниться на yandex.ru
            - do: получить выдачу по запросу 'site:fulmar.ru' (альтернативные запросы - site:kupicase.ru каталог, 'site:zymbo.ru', 'site:super01.ru')
            - assert: на выдаче присутствует турбо-сниппет(ы) с серой иконкой ракеты справа от гринурла
            - do: кликнуть по любой ссылке турбо-сниппета для перехода на страницу магазина
            - assert: открылась страница магазина с активной кнопкой Каталог на нижней панели
            - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_Gw9upIcJ8I.png]
            - do: кликнуть по пиктограмме Каталог на нижней панели
            - do: кликнуть по карточке любого товара
            - assert: открылась карточка выбранного товара
            - do: кликнуть по кнопке "Быстрый заказ"
            - assert: произошел переход к оформлению заказа
            - assert: поля в разделе Получатель заполнены данными из вашего паспорта
            - do: изменить данные в полях "ФИО", "Телефон", "Email", "Адрес доставки"
            - do: кликнуть на ссылку "Назад" в шапке
            - assert: произошел переход к карточке товара
            - assert: переход произошел без белой страницы
            - do: нажать кнопку "Быстрый заказ"
            - assert: произошел переход к оформлению заказа
            - assert: поля "ФИО", "Телефон", "Email", "Адрес доставки" заполнены новыми (измененными) данными

        Заполнение не всех необходимых полей:
            - automation: TURBOUI-3895
            - do: задание нужно выполнять в режиме инкогнито
            - do: получить выдачу по запросу 'site:fulmar.ru' (альтернативные запросы - site:kupicase.ru каталог, 'site:super01.ru')
            - assert: на выдаче присутствует турбо-сниппет(ы) с серой иконкой ракеты справа от гринурла
            - do: кликнуть по любой ссылке турбо-сниппета для перехода на страницу магазина
            - assert: открылась страница магазина с активной кнопкой Каталог на нижней панели
            - do: кликнуть по пиктограмме Каталог на нижней панели
            - do: добавить любой товар в корзину
            - do: перейти в корзину и нажать кнопку "Оформить заказ"
            - assert: произошел переход к оформлению заказа
            - do: выбрать тип доставки 'Курьером', если выбран другой тип
            - do: очистить поля "ФИО", "Телефон", "Email", "Адрес доставки" (если они были заполнены)
            - do: нажать на кнопку отправки заказа
            - assert: оформление заказа не произошло
            - assert: курсор находится в поле "ФИО", поле подсвечивается синим цветом
            - assert: поля "Телефон", "Email", "Адрес доставки" подсвечиваются красным цветом
            - do: заполнить поля "Телефон" и "Адрес доставки"
            - do: нажать на кнопку отправки заказа
            - assert: оформление заказа не произошло
            - assert: курсор находится в поле "ФИО", поле подсвечивается синим цветом
            - assert: красным подвечивается только поле "Email"
            - do: заполнить поля "ФИО" и "Email"
            - do: очистить поля "Телефон" и "Адрес доставки"
            - do: нажать на кнопку отправки заказа
            - assert: оформление заказа не произошло
            - assert: курсор находится в поле "Телефон", поле подсвечивается синим цветом
            - assert: красным подвечивается только поле из раздела "Адрес доставки"

    Пользовательское соглашение с магазином:
        - do: получить выдачу по запросу 'site:farkop.ru каталог'
        - assert: на выдаче присутствует турбо-сниппет(ы) с серой иконкой ракеты справа от гринурла
        - do: кликнуть по любой ссылке турбо-сниппета для перехода на страницу магазина
        - assert: открылась страница магазина
        - do: кликнуть по пиктограмме Каталог на нижней панели
        - do: добавить любой товар (без метки Под заказ) в корзину
        - do: перейти в корзину и нажать кнопку "Оформить заказ"
        - assert: произошел переход к оформлению заказа
        - do: выбрать способ оплаты "Картой онлайн"
        - assert: под кнопкой "Оплатить" отображается пользовательское соглашение с реквизитами магазина
        - screenshot: пример внешнего вида [meta]
        - do: выбрать способ оплаты "Наличными при получении"
        - assert: под кнопкой "Оплатить" отображается только пользовательское соглашение
        - assert: реквизиты магазина исчезли
        - do: удалить товары из корзины

    Способ оплаты:
        - automation: TURBOUI-3895
        - do: залогиниться на yandex.ru
        - do: перейти по ссылке https://yandex.ru/turbo/ymturbo.t-dir.com/n/yandexturbocatalog/
        - do: добавить любой товар (без метки Под заказ) в корзину
        - do: перейти в корзину и нажать кнопку "Оформить заказ"
        - assert: произошел переход к оформлению заказа
        - do: выбрать способ оплаты "Картой онлайн"
        - assert: кнопка называется "Оплатить" и в ней указана цена товара
        - assert: пример внешнего вида [https://jing.yandex-team.ru/files/narbutovich/with_price.jpg]
        - do: выбрать способ оплаты "Наличными"
        - assert: кнопка изменила название на "Отправить" и в ней не указана цена товара
        - assert: пример внешнего вида [https://jing.yandex-team.ru/files/narbutovich/no_price.jpg]
        - do: выбрать способ оплаты "Картой курьеру"
        - assert: кнопка изменила по-прежнему называется "Отправить" и в ней не указана цена товара
        - assert: пример внешнего вида [https://jing.yandex-team.ru/files/narbutovich/no_price.jpg]

    Сообщение ошибки при оплате:
        - automation: TURBOUI-3895
        - do: залогиниться на yandex.ru
        - do: получить выдачу по запросу 'site:fulmar.ru' (альтернативные запросы - site:kupicase.ru каталог, 'site:super01.ru')
        - assert: на выдаче присутствует турбо-сниппет(ы) с серой иконкой ракеты справа от гринурла
        - do: кликнуть по любой ссылке турбо-сниппета для перехода на страницу магазина
        - assert: открылась страница магазина с активной кнопкой Каталог на нижней панели
        - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_Gw9upIcJ8I.png]
        - do: кликнуть по пиктограмме Каталог на нижней панели
        - do: добавить любой товар в корзину
        - do: перейти в корзину и нажать кнопку "Оформить заказ"
        - assert: произошел переход к оформлению заказа
        - do: заполнить поля корректными данными
        - do: выбрать любой способ оплаты
        - do: отключить итернет соединение на устройстве
        - do: кликнуть по кнопке оплаты
        - assert: открылся попап с сообщением ошибки оплаты
        - assert: пример внешнего вида [https://jing.yandex-team.ru/files/narbutovich/info.jpg]

    Выбирать способ доставки по-умолчанию при отсутствии выбранного пользователем способа:
        - tags:
            - no_assessors
        - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/s/rnd/2lum7hf3
        - do: выполнить в консоли `localStorage.setItem('turbo-app-ecom--spideradio.github.io', '{delivery:"blabla"}')`
        - do: положить товар в корзину и перейти в корзину
        - assert: открылась страница корзины
        - do: нажать "Оформить заказ"
        - assert: в форме выбран первый способ доставки

    В новом дизайне:
        Форма с комментарием:
            - tags:
                - no_assessors
            - do: залогиниться на yandex.ru
            - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/?patch=addCartCommentField
            - do: добавить любой товар в корзину
            - do: перейти в корзину
            - do: нажать кнопку Оформить заказ
            - assert: осуществился переход к оформлению заказа
            - screenshot: внешний вид страницы [cart-form]
            - do: нажать на кнопку "Комментарий"
            - assert: открылся экран с вводом комментария
            - screenshot: внешний вид страницы [comment-form]

        Форма без комментария:
            - tags:
                - no_assessors
            - do: залогиниться на yandex.ru
            - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
            - do: добавить любой товар в корзину
            - do: перейти в корзину
            - do: нажать кнопку Оформить заказ
            - assert: осуществился переход к оформлению заказа
            - screenshot: внешний вид страницы [cart-form]

        Залипающая кнопка на форме чекаута:
            - automation: TURBOUI-3895
            - do: шаги выполнять в режиме инкогнито
            - do: получить выдачу по запросу 'site:fulmar.ru' (альтернативные запросы - site:kupicase.ru каталог, 'site:super01.ru')
            - assert: на выдаче присутствует турбо-сниппет(ы) с серой иконкой ракеты справа от гринурла
            - do: кликнуть по любой ссылке турбо-сниппета для перехода на страницу магазина
            - assert: открылась страница магазина с активной кнопкой Каталог на нижней панели
            - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_Gw9upIcJ8I.png]
            - do: кликнуть по пиктограмме Каталог на нижней панели
            - do: добавить любой товар в корзину
            - do: перейти в корзину
            - do: нажать кнопку Оформить заказ
            - assert: осуществился переход к оформлению заказа
            - assert: на экране отсутствует залипающий блок с кнопкой "Оплатить картой" (или "Отправить") [https://jing.yandex-team.ru/files/skurhanski/H2lIeHPmjv.png]
            - do: в блоке Доставка выбрать один из доступных способов Cамовывоз
            - do: заполнить поля ФИО, Телефон и Email (в таком же порядке)
            - do: после ввода данных убрать фокус из поля ввода, кликнув по любому некликабельному месту на странице
            - assert: появился залипающий блок с кнопкой "Оплатить картой" (или "Отправить") [https://jing.yandex-team.ru/files/skurhanski/GOFgEAX4ww.png]
            - do: в блоке Доставка выбрать один из доступных способов Курьером
            - assert: залипающий блок с кнопкой "Оплатить картой" (или "Отправить") исчез
            - do: заполнить адрес доставки
            - do: после ввода данных убрать фокус из поля ввода, кликнув по любому некликабельному месту на странице
            - assert: появился залипающий блок с кнопкой "Оплатить картой" (или "Отправить")

    Пользовательские адреса:
      Пользователь без адресов:
        - params:
            exp_flags:
              - turbo-app-cart-city-suggest=1
        - do: разлогиниться в Яндексе, если есть залогиненные пользователи
        - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
        - do: добавить любой товар в корзину
        - do: перейти в корзину
        - do: нажать кнопку Оформить заказ
        - assert: осуществился переход к оформлению заказа
        - screenshot: внешний вид блока "Адрес доставки" [user-address-form]
        - do: нажать кнопку Отправить
        - assert: сработает валидация
        - screenshot: внешний вид блока "Адрес доставки" [user-address-invalid-form]

      Пользователь c адресами:
        - params:
            exp_flags:
              - turbo-app-cart-city-suggest=1
        - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
        - do: залогиниться на yandex.ru
        - do: В паспорте на yandex.ru долюны быть заполнены адреса
        - do: добавить любой товар в корзину
        - do: перейти в корзину
        - do: нажать кнопку Оформить заказ
        - assert: осуществился переход к оформлению заказа
        - screenshot: внешний вид блока "Адрес доставки" [user-addresses]

      Новый адрес:
        - params:
            exp_flags:
              - turbo-app-cart-city-suggest=1
        - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
        - do: залогиниться на yandex.ru
        - do: В паспорте на yandex.ru должны быть заполнены адреса
        - do: добавить любой товар в корзину
        - do: перейти в корзину
        - do: нажать "Оформить заказ"
        - do: выбрать доставку курьером
        - do: нажать кнопку "Новый адрес" в блоке "Адрес доставки"
        - assert: осуществился переход к созданию адреса
        - screenshot: внешний вид формы [user-addresses-form]
        - do: нажать кнопку Отправить
        - assert: сработает валидация
        - screenshot: внешний вид формы [user-addresses-form-invalid]

      Редактирование адресов:
        - params:
            exp_flags:
              - turbo-app-cart-city-suggest=1
        - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
        - do: залогиниться на Яндексе пользователем, у которого имеются сохраненные адреса в паспорте https://passport.yandex.ru/profile/address
        - do: добавить любой товар в корзину
        - do: перейти в корзину и нажать Оформить заказ
        - do: нажать кнопку "Изменить" в паспортном адресе
        - assert: осуществился переход к редактировнаию адреса
        - assert: Надпись над формой "Изменение адреса"
        - assert: Рядом с кнопкой "Сохранить" отсутсвует кнопка уделения
        - do: Изменить поле "Дом"
        - do: нажать кнопку Сохранить
        - assert: осуществился переход на форму корзины
        - assert: В блоке "Адрес доставки" стало на один адрес больше
        - assert: выбран отредактированный адрес

      Город не из саджеста:
        - params:
            exp_flags:
              - turbo-app-cart-city-suggest=1
        - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
        - do: залогиниться на yandex.ru
        - do: в паспорте на yandex.ru должны быть заполнены адреса
        - do: добавить любой товар в корзину
        - do: перейти в корзину
        - do: нажать "Оформить заказ"
        - do: выбрать доставку курьером
        - do: нажать кнопку "Новый адрес" в блоке "Адрес доставки"
        - assert: осуществился переход к созданию адреса
        - do: в поле "Город" город вместо "Москва" написать "Нижний Новгород", из появившегося списка город не выбирать
        - do: нажать за область формы, чтобы скрылся попап со списком городов, например на подсказку "* Обязательно нужно заполнить"
        - do: в поле "Улица" ввести "площадь Минина и Пожарского", из появившегося списка улицу не выбирать
        - do: нажать за область формы, чтобы скрылся попап со списком улиц, например на подсказку "* Обязательно нужно заполнить"
        - do: в поле "Дом" ввести "5"
        - assert: ошибки валидации у формы отсутствуют [https://jing.yandex-team.ru/files/al88/New-address_1.png]
        - do: нажать кнопку Сохранить
        - assert: появилась ошибка валидации у формы рядом с полем с городом [https://jing.yandex-team.ru/files/al88/New-address_2.png]
        - assert: текст ошибки "Виберите населённый пункт из списка"

    iframe оплат (ошибка оплаты):
        - automation: TURBOUI-3895
        - do: получить выдачу по запросу 'site:fulmar.ru' (альтернативные запросы - site:kupicase.ru каталог, 'site:super01.ru')
        - assert: на выдаче присутствует турбо-сниппет(ы) с серой иконкой ракеты справа от гринурла
        - do: кликнуть по любой ссылке турбо-сниппета для перехода на страницу магазина
        - assert: открылась страница магазина с активной кнопкой Каталог на нижней панели
        - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_Gw9upIcJ8I.png]
        - do: кликнуть по пиктограмме Каталог на нижней панели
        - do: добавить любой товар в корзину (без метки 'Под заказ')
        - do: перейти в корзину и нажать кнопку "Оформить заказ"
        - assert: произошел переход к оформлению заказа
        - do: заполнить все поля корректными данными
        - do: выбрать способ оплаты картой
        - do: проскроллить страницу таким образом, чтобы кнопка оплаты была расположена максимально внизу экрана и чтобы не появилась залипающая кнопка оплаты
        - assert: примерная позиция кнопки оплаты [https://jing.yandex-team.ru/files/skurhanski/browser_kBHTtireX0.png]
        - do: кликнуть по кнопке оплаты
        - assert: |
            появилась форма для ввода данных платежной карты
            форма выглядит корректно
        - do: ввести номер карты - 5555555555554576
        - do: в качестве срока действия укажите любую дату (но больше текущей), CVC - любые числа
        - do: нажмите Оплатить
        - assert: появился спиннер, обозначающий процесс оплаты
        - assert: появилось сообщение об ошибке оплаты заказа
        - do: вернуться в корзину
        - assert: в корзине присутствует ранее добавленный товар

    Успешный экран для залогиненного пользователя:
        - params:
            exp_flags:
                - turbo-app-any-ua=1
                - turboforms_endpoint=https://test-turbo-forms.common.yandex.ru/
        - do: залогинется на yandex.ru
        - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
        - do: кликнуть по кнопке 'В корзину' у первого товара
        - do: кликнуть по кнопке 'В корзине'
        - assert: перешли в корзину
        - do: нажать на кнопку оформить заказ
        - do: заполнить поля - 'имя name', 'телефон +7 800 800 80 80', 'email call@example.ru', выбрать вторую опцию доставки, в поле адрес доставки заполнить 'Адрес доставки'
        - do: нажать кнопку 'Отправить'
        - assert: открылась страница успешного заказа
        - tech: проверить, что отправилась метричная цель `typ-registration`
        - screenshot: внешний вид [success]

    Оплата онлайн блокируется при корзине больше 150 000 р:
        - do: открыть страницу https://yandex.ru/turbo/ymturbo.t-dir.com/s/catalog/women-s-belts/strap-rainbow/?product_id=283
        - do: добавить товар в корзину
        - do: перейти в корзину
        - do: выставить товару в корзине количество 384
        - do: нажать на кнопку оформить заказ
        - assert: доступен способ оплаты "Картой онлайн"
        - screenshot: внешний вид [active]
        - do: выбрать 3й вариант доставки стоимостью 5 000 р
        - assert: способ оплаты "Картой онлайн" не доступен
        - screenshot: внешний вид [disabled]
        - do: выбрать 1й вариант доставки стоимостью 10 р
        - assert: доступен способ оплаты "Картой онлайн"
        - screenshot: внешний вид [available]

    Минимальный заказ:
        beforeEach:
            - do: получить выдачу по запросу 'site:darinalux.ru каталог' (альтернативные запросы - 'site:dolina-sad.ru каталог')
            - assert: на выдаче присутствует турбо-сниппет(ы) с серой иконкой ракеты справа от гринурла
            - do: кликнуть по любой ссылке турбо-сниппета для перехода на страницу магазина
            - assert: открылась страница магазина с активной кнопкой Каталог на нижней панели
            - do: кликнуть по пиктограмме "Каталог" на нижней панели
            - assert: осуществился переход в корень каталога
            - do: отсортировать товары 'Сначала дешевле'
            - assert: товары отсортировались корректно
            - do: положить самый дешевый товар в корзину и перейти в нее
            - assert: осуществился переход в корзину
            - assert: в корзине есть предупреждение о минимальном заказе [https://jing.yandex-team.ru/files/skurhanski/chrome_R957xhZZT2.png]
        Проверка ссылки в каталог:
            - automation: TURBOUI-5848
            - do: кликнуть по ссылке 'Перейти в каталог'
            - do: осуществился переход в разде Каталог
            - do: вернуться в корзину и удалить все товары из корзины
        Добавление товаров в каталоге:
            - automation: TURBOUI-5848
            - do: перейти в раздел Каталог, кликнув по соответствующей пиктограмме на нижней панели
            - do: осуществился переход в разде Каталог
            - do: добавить в корзину различные товары, чтобы общая стоимость превышала минимальный заказ и перейти в корзину
            - assert: осуществился переход в корзину
            - assert: в корзине отсутствует предупреждение о минимальном заказе
            - assert: в корзине есть кнопка 'Оформить заказ'
            - do: удалить все товары из корзины
        Добавление товаров в корзине:
            - automation: TURBOUI-5848
            - do: увеличить количество товаров, чтобы общая стоимость превышала минимальный заказ
            - assert: предупреждение о минимальном заказе исчезло
            - assert: появилась кнопка 'Оформить заказ'
            - do: удалить все товары из корзины
files:
    - components/EcomCartForm/__tests__/EcomCartForm@phone.hermione.js

tlds: ru

tags: ecom-tap

browsers:
    notFor:
        - ios-safari-12-touch
        - ios-safari-11-touch
        - ios-safari-10-touch
        - ios-safari-9-touch

v-team: Turbo
