feature: ЖД
type: Подтверждение
description: >-
  Описание логики (не для асессоров):

  По требованию партнера отправляем контакты пассажиров для уведомлений об
  изменении расписания.

  В приоритете поля для отправки контактов на вводе данных - отправляем их.

  Если поля не заполняли, и есть контакты для пассажира в ЗКП, отправляем их
  (независимо от чекбокса "Использовать для всех пассажиров в случае отмены или
  переноса поезда")

  Если пассажир один, или установлен чекбокс, для всех пассажиров из заказа
  отправляем данные из заказа (кроме тех пассажиров, у кого есть данные в ЗКП -
  тогда отправляем их).

  Незалогинены.

  Перейти на вкладку ЖД, выбрать любое направление и поезд, перейти по кнопке
  покупки.
specs:
  'ЖД: Передача контактных данных партнеру из полей на вводе данных':
    - do: >-
        На странице выбора мест установить 2 взрослых пассажиров, 1 ребенка с
        местом и 1 ребенка без места

        Выбрать любые места на схеме вагона

        Нажать Указать пассажиров
    - assert: >-
        * Произошел переход на страницу ввода данных

        * Внизу страницы по умолчанию установлен чекбокс "Использовать для всех
        пассажиров в случае отмены или переноса поезда"
    - do: Снять чекбокс уведомлений под контактной информацией
    - assert: >-
        * Развернулись поля ввода

        * Заголовками полей ввода являются названия пассажиров ("1. Взрослый",
        итд)

        * Если какие-то поля ФИО на странице ввода данных уже были
        предзаполнены, то отображается это ФИО

        * Для детей поля ввода контактов не отображаются

        ![image](https://jing.yandex-team.ru/files/shenfeld/2020-05-21_18.52.46-zdg2o.png)
    - do: >-
        Заполнить все поля в форме выше валидными данными (кроме последних двух
        полей для отправки уведомлений)
    - assert: >-
        * ФИО взрослых пассажиров подставились в заголовки полей контактных
        данных
    - do: |-
        Заполнить первое поле любой валидной почтой
        Заполнить второе поле любым валидным телефоном
        Нажать Проверить заказ и купить
    - assert: |-
        * Произошел переход на страницу подтверждения
        * Ошибок нет
manual: true
Функциональность: Бронь с разными условиями
Устройство:
  - Десктоп
  - Тач
Страница: Подтверждение
Сервис: ЖД
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Tag: Smoke
Автор: shenfeld
