feature: ЖД
type: Страница заказа
description: >-
  Кейс проверяет:

  - Что вернуть билет можно в любом момент до отправления поезда со станции
  посадки пассажира

  - Что при возврате билета менее чем за 2 часа до отправления возвращается 50%
  от цены билета

  * Перейти на вкладку ЖД

  * Найти такой поезд ЦППК на сегодня, чтобы отправление было как можно скорее
  (можно смотреть на Москва - Калуга, Москва - Рязань, Москва - Орехово-Зуево,
  Москва - Тула)

  ![image](https://jing.yandex-team.ru/files/shenfeld/2020-08-17_16.04.57-26bfm.png)

  * Купить билеты на 2 взрослых пассажиров, данные пассажиров любые

  * На хэппи пейдж нажать "Подробнее о заказе"



  **Для асессоров:** Кейс требует ожидания после покупки билета и до отправления
  поезда. Поэтому можно купить билет в отдельной вкладке, далее проходить
  следующие кейсы, дождаться прохождения нужного времени для выполнения шага 2 и
  вернуться к этому кейсу.

  Если поездов на выдаче с отправлением в пределах времени которое вы можете
  выждать нет, пропускайте кейс.
specs:
  'ЖД: Возврат в ЦППК возможен до отправления поезда':
    - do: Перейти на страницу заказа для поезда из Preconditions
    - assert: '* Есть кнопка Сдать билет для обоих билетов'
    - do: |-
        Дождаться, когда до отправления поезда останется 15 минут
        Обновить страницу
    - assert: >-
        * Появился текст на желтом фоне "Через 15 минут вернуть билет онлайн
        будет нельзя. Вы сможете сдать его в кассе вокзала."
    - do: |-
        Раскрыть расшифровку стоимости одного из билетов
        Запомнить позиции: цена билета и сервисный сбор
        https://jing.yandex-team.ru/files/shenfeld/2020-08-17_16.16.25-pn4s3.png
        Нажать Сдать билет для одного из билетов
    - assert: |-
        * Появилось модальное окно возврата
        * Сумма к возврату равна цена билета*0,5 + (сервисный сбор - 69,40)
    - do: Нажать Подтвердить
    - assert: >-
        * Через какое-то время осуществился возврат

        * У билета появился статус “Возврат”

        * Сумма к возврату на странице совпадает с суммой к возврату в модальном
        окне
    - do: |-
        Дождаться времени отправления поезда
        Обновить страницу
    - assert: >-
        * Для второго билета пропала кнопка Сдать билет, появилась ссылка Можно
        сдать в кассе
manual: true
Функциональность: Действия с заказом
Устройство: Десктоп
Страница: Страница заказа
Сервис: ЖД
Тестирование асессорами: Да
Окружение: Testing
Автор: shenfeld
