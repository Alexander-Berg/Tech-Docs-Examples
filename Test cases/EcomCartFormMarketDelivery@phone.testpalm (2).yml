feature: Пользовательские адреса
type: Супердоставки

params:
  exp_flags:
    - analytics-disabled=1
    - turbo-app-cart-city-suggest=1
    - turbo-app-cart-market-delivery=1

specs:
  Нет сохраненных адресов:
    beforeEach:
      - do: разлогиниться в Яндексе, если есть залогиненные пользователи
      - do: перейти по ссылке https://yandex.ru/turbo/ht-comp.ru/n/yandexturbocart/ (не забыть про слешь в конце ссылки, без него не откроется страница)
      - do: добавить любой товар в корзину
      - do: перейти в корзину и нажать кнопку "Оформить заказ"
      - assert: произошел переход к оформлению заказа
      - assert: на странице есть поле с городом доставки [https://jing.yandex-team.ru/files/dakhetov/delivery_input.png]
      - assert: в качестве города указан город фактического нахождения пользователя
      - do: если внизу страницы есть сохраненные адреса доставки - удилить их (Изменить -> Удалить), если нет сохраненных адресов - идем дальше по шагам
      - assert: вризу страницы отсутствуют сохраненные адреса доставки [https://jing.yandex-team.ru/files/skurhanski/6G6ez15t39.png]
      - assert: внизу страницы отображаются поля для ввода адреса доставки [https://jing.yandex-team.ru/files/skurhanski/chrome_6rJp9fyZOD.png]
      - assert: город указан такой же, что и сверху страницы
    Изменение города доставки:
      - automation: SERPTEST-1719
      - do: в блоке "Адрес доставки" удалить город и ввести 'Чекалин'
      - assert: появился саджест с подсказками
      - do: выбрать из саджеста искомый населенный пункт
      - assert: выбранный населенный пункт отображается в поле ввода
      - assert: верхнее поле с городом находится в области видимости
      - assert: под полем отображается сообщение о том, что доставки в этот город нет [https://jing.yandex-team.ru/files/skurhanski/chrome_HGsZwdqrap.png]
      - do: в верхем поле поменять город на 'Москва'
      - assert: сообщение с отсутствием доставок исчезло
      - assert: под блоком 'Получатель' появилась информация о доступных доставках в выбранном населенном пункте (блок 'Доставка')
      - assert: в блоке 'Адрес доставки' город также сменился на 'Москва'
      - do: перейти в корзину и удалить все товары
  Есть сохраненные адреса:
    beforeEach:
      - do: открыть браузер в режиме инкогнито
      - do: залогиниться в Яндексе пользователем, у которого в паспорте имеется сохраненный адрес(а)
      - do: перейти по ссылке https://yandex.ru/turbo/ht-comp.ru/n/yandexturbocart/ (не забыть про слешь в конце ссылки, без него не откроется страница)
      - do: добавить любой товар в корзину
      - do: перейти в корзину и нажать кнопку "Оформить заказ"
      - assert: произошел переход к оформлению заказа
      - assert: сверху страницы присутствует поле с городом доставки [https://jing.yandex-team.ru/files/skurhanski/chrome_aj2S2SRRMx.png]
      - assert: в качестве города указан город выбранного пользовательского адреса в блоке 'Адрес доставки'
    Сохраненные адреса не выбраны:
      - automation: SERPTEST-1719
      - do: в блоке 'Город доставки' изменить значение на город, которого нет в списке сохраненных адресов
      - assert: город в блоке 'Город доставки' изменился
      - assert: в списке сохраненных адресов ни один адрес не выбран (т.к. города в адресах не соответствуют городу, указанному в блоке 'Город доставки')
      - do: нажать 'Отправить'
      - assert: в блоке 'Адрес доставки' появилось сообщение о необходимости выбора адреса [https://jing.yandex-team.ru/files/skurhanski/chrome_tkFenggGY3.png]
      - do: выбрать любой адрес
      - assert: сообщение о необходимости выбора адреса исчезло
      - do: перейти в корзину и удалить все товары
    Проброс города на страницу добавления адреса:
      - automation: SERPTEST-1719
      - do: кликнуть по ссылке 'Добавить новый адрес' в блоке 'Адрес доставки'
      - assert: открылась страница для ввода нового адреса [https://jing.yandex-team.ru/files/skurhanski/chrome_mStbFIabxB.png]
      - assert: в качестве города указан город выбранного пользовательского адреса в блоке 'Адрес доставки'
      - do: вернуться на страницу оформления заказа и в блоке 'Город доставки' изменить значение на 'Чекалин'
      - do: кликнуть по ссылке 'Добавить новый адрес' в блоке 'Адрес доставки'
      - assert: открылась страница для ввода нового адреса
      - assert: в качестве города указан 'Чекалин'
      - do: перейти в корзину и удалить все товары
    Добавление адреса с новым городом без доставок:
      - automation: SERPTEST-1719
      - do: кликнуть по ссылке 'Добавить новый адрес' в блоке 'Адрес доставки'
      - assert: открылась страница для ввода нового адреса
      - do: указать новый адрес доставки, город указать 'Чекалин' и нажать 'Сохранить'
      - assert: осуществился переход на страницу оформления заказа
      - assert: произошел подскролл к верхнему полю с городом, в котором указан город только что добавленного адреса
      - assert: под полем отображается сообщение о том, что доставки в этот город нет
      - assert: в блоке 'Адрес доставки' отображается несколько адресов и выбран только что добавленный
      - do: перейти в корзину и удалить все товары
    Добавление адреса с новым городом с доставками:
      - automation: SERPTEST-1719
      - do: кликнуть по ссылке 'Добавить новый адрес' в блоке 'Адрес доставки'
      - assert: открылась страница для ввода нового адреса
      - do: указать новый адрес доставки, город указать 'Москва' и нажать 'Сохранить'
      - assert: осуществился переход на страницу оформления заказа
      - assert: в верхнем поле 'Город доставки' указана 'Москва'
      - assert: в блоке 'Адрес доставки' отображается несколько адресов и выбран только что добавленный
      - do: перейти в корзину и удалить все товары
    Отправка заказа без выбранного адреса:
      - automation: SERPTEST-1719
      - do: в блоке 'Город доставки' изменить значение на другой населенный пункт (которого нет в списке сохраненных адресов)
      - assert: город в блоке 'Город доставки' изменился
      - assert: в списке сохраненных адресов нет выбранного адреса
      - do: нажать 'Отправить'
      - assert: в блоке 'Адрес доставки' появилось сообщение о необходимости выбора адреса [https://jing.yandex-team.ru/files/skurhanski/chrome_tkFenggGY3.png]
      - do: выберете адрес
      - assert: сообщение о необходимости выбора адреса исчезло
      - do: перейти в корзину и удалить все товары
    Изменение города доставки:
      - automation: SERPTEST-1719
      - do: нажать по ссылке 'Добавить новый адрес'
      - do: указать новый адрес доставки (в т.ч. и новый город) и нажать 'Сохранить'
      - assert: осуществился переход на страницу оформления заказа
      - assert: в блоке 'Адрес доставки' отображается несколько адресов и выбран только что добавленный
      - assert: в блоке 'Город доставки' отображается город, соответствующий новому адресу
      - do: в блоке 'Город доставки' изменить значение на город из другого адреса в списке сохраненных
      - assert: город в блоке 'Город доставки' изменился
      - assert: в списке сохраненных адресов выбрался другой адрес, который соответствует указанному городу
      - do: перейти в корзину и удалить все товары

files: []

v-team: Turbo

tlds: ru

tags:
  - ecom-tap
