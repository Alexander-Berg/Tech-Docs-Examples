feature: Коммуникация с кандидатом
type: Внешняя коммуникация

specs:
  Добавление сообщения:
    - do: открыть страницу  кандидата /candidates/<id_кандидата>/messages/
    - assert: |
        на странице кандидата выбран таб 'Внешняя коммуникация'
        есть область для ввода текста письма
        пример внешнего вида [candidate_tabs_menu]
    - do: установить фокус в поле 'Текст письма'
    - assert: |
        открылась форма для коммуникации
        поле 'Email' либо пустое, либо заполнено в соответствии с контактными данными в профиле кандидата
        поле 'Тема' пустое
        поле 'Текст письма' пустое
        появились варианты шаблонов с кнопкой 'Применить шаблон'
        появились варианты подписи с кнопкой 'Добавить подпись'
        пример внешнего вида [candidate_external_message_form_focus]
    - do: заполнить поле 'Тема'
    - do: ввести 'Email' (если он заполнен, то ничего не делаем)
    - do: в поле 'Текст письма' ввести какой-нибудь текст
    - assert: пример внешнего вида [candidate_external_message_form_filled]
    - do: клик на кнопку 'Отправить письмо'
    - assert: |
        рядом с табом 'Внешняя коммуникация' изменилось колличество сообщений
        письмо отобразилось в списке внешней коммуникации с временем создания
        в письме есть информация о том кто отправил и куда
        текст в сообщении соответствует введенному в поля 'Тема' и 'Текст письма'
        появился месяц и год добавления письма
        форма внешней коммуникации свернулась
        поле 'Текст письма' стало пустым
        пример внешнего вида [candidate_external_messages_pane_new]

tags:
  - reviewed

priority: blocker

files:
    - tests/hermione/suites/desktop/candidates/communication/external_communication/external_communication.hermione.js

browsers:
  - yandex-browser-desktop
  - firefox-desktop
  - safari-desktop
