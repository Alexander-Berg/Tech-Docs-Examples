feature: Счетчик непрочитанных сообщений

specs:

    В окне приватного чата на кнопке скролла пропадает счетчик, если прочитать все непрочитанные сообщения[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный чат с 20 или более непрочитанными сообщениями
        - do: Открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Посмотреть на кнопку скролла в правом нижнем углу
        - assert: В окне чата в правом нижнем углу на кнопке скролла есть счетчик, отображающий число непрочитанных сообщений
        - do: Проскроллить историю с непрочитанными сообщениями вниз, либо нажать по стрелочке в правом нижнем углу окна чата.
        - assert: |
              В чате не осталось непрочитанных сообщений
              Счетчик в окне чата пропал
        - do: Проскроллить чат вверх на несколько сообщений
        - assert: |
              В правом нижнем углу чата появляется кнопка скролла
              Рядом с кнопкой нет счетчика непрочитанных сообщений
        - do: Проверить наличие счетчика на превью чата из description в списке чатов
        - assert: Счетчик непрочитанных сообщений не отображается

    В окне группового чата на кнопке скролла пропадает счетчик, если прочитать все непрочитанные сообщения[manual]:
        - automation:
        - tags: [advanced_smoke, b2b]
        - description: У авторизованного пользователя есть групповой чат с 20 или более непрочитанными сообщениями
        - do: Открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Посмотреть на кнопку скролла в правом нижнем углу
        - assert: В окне чата в правом нижнем углу на кнопке скролла есть счетчик, отображающий число непрочитанных сообщений
        - do: Проскроллить историю с непрочитанными сообщениями вниз, либо нажать по стрелочке в правом нижнем углу окна чата.
        - assert: |
              В чате не осталось непрочитанных сообщений
              Счетчик в окне чата пропал
        - do: Проскроллить чат вверх на несколько сообщений
        - assert: |
              В правом нижнем углу чата появляется кнопка скролла
              Рядом с кнопкой нет счетчика непрочитанных сообщений
        - do: Проверить наличие счетчика на превью чата из description в списке чатов
        - assert: Счетчик непрочитанных сообщений не отображается

    В превью чата на счетчике уведомлений отображается 1k, если непрочитанных сообщений >= 1000[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный / групповой чат в истории которого более 1000 непрочитанных сообщений
        - do: Открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Проверить корреткность отображения счетчика непрочитанных сообщений на списке чатов в превью чата из description
        - assert: На счетчике уведомлений чата вместо точного числа показывается "1k" (например, если непрочитанных сообщений больше 1100, то показывается 1.1k)

    На стрелке назад в окне чата на счетчике уведомлений отображается 1k, если непрочитанных сообщений >= 1000[manual]:
        - automation:
        - description: |
              У авторизованного пользователя есть приватные / групповые чаты в истории которых в сумме более 1000 непрочитанных сообщений
              При проверки тест-кейса в браузере необходимо уменьшить окно браузера (чтобы на экране был только список чатов, а при открытии чата - только окно чата)
        - do: Открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат, в котором нет непрочитанных сообщений
        - assert: Открыто окно чата
        - do: Проверить корреткность отображения счетчика непрочитанных сообщений на стрелке назад в шапке чата
        - assert: |
              На стрелке "Назад" отображается счетчик уведомлений
              Вместо точного числа показывается "1k" (например, если непрочитанных сообщений больше 1100, то показывается 1.1k)

    На стрелке назад в окне чата отображается счетчик непрочитанных сообщений от других чатов, если у пользователя есть непрочитанные сообщения[manual]:
        - tags: [advanced_smoke, b2b]
        - automation:
        - description: |
              У авторизованного пользователя есть приватные / групповые чаты в истории которых есть непрочитанные сообщения
              При проверки тест-кейса в браузере необходимо уменьшить окно браузера (чтобы на экране был только список чатов, а при открытии чата - только окно чата)
        - do: Открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат, в котором нет непрочитанных сообщений
        - assert: Открыто окно чата
        - do: Проверить корреткность отображения счетчика непрочитанных сообщений на стрелке назад в шапке чата
        - assert: |
              На стрелке "Назад" отображается счетчик уведомлений
              Счетчик непрочитанных сообщений совпадает с количеством непрочитанных сообщений

    На стрелке назад в окне чата не отображается счетчик непрочитанных сообщений от других чатов, если у пользователя нет непрочитанных сообщений[manual]:
        - automation:
        - description: |
              У авторизованного пользователя есть приватный / групповой чаты в истории которых есть непрочитанные сообщения
              У пользователя в других чатах нет непрочитанных сообщений
              При проверки тест-кейса в браузере необходимо уменьшить окно браузера (чтобы на экране был только список чатов, а при открытии чата - только окно чата)
        - do: Открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description и прочитать все непрочитанные сообщения
        - assert: |
              Чат открыт
              Все непрочитанные сообщения были прочтены
        - do: Проверить наличие счетчика непрочитанных сообщений на стрелке назад в шапке чата
        - assert: На стрелке "Назад" отсутствует счетчик непрочитанных сообщений

    Счетчик непрочитанных сообщений не отображается на первью чата, если у чата нет непрочитанных сообщений[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный / групповой чат в истории которых есть непрочитанные сообщения
        - do: Открыть список чатов
        - assert: |
              Открывается окно списка чатов
              В первью чата из description отображается счетчик непрочитанных сообщений
        - do: Открыть любой чат, который соответствует описанию указанному в description и прочитать все непрочитанные сообщения
        - assert: |
              Чат открыт
              Все непрочитанные сообщения были прочтены
        - do: Вернуться в список чатов и проверить наличие счетчик непрочитанных сообщений в превью чата из description
        - assert: В превью чата из description не отображается счетчик непрочитанных сообщений

    Счетчик непрочитанных сообщений уменьшается на N, если прочитали N новых сообщений[manual]:
        - automation:
        - description: |
              `ВАЖНО! В счетчике не учитываются сообщения из замьюченных чатов.`
              У авторизованного пользователя в списке чатов есть чат А (Чат может быть приватный/групповой чат), в котором нет непрочитанных сообщений
              У авторизованного пользователя в списке чатов также есть чаты Б  и С приватный/групповой чат - у которых есть по два непрочитанных сообщения
              При проверки тест-кейса в браузере необходимо уменьшить окно браузера (чтобы на экране был только список чатов, а при открытии чата - только окно чата)
        - do: Открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат А
        - assert: |
              Чат открыт
              На стрелке "Назад" в шапке чата счетчик  непрочитанных сообщений равен - 4
        - do: Нажать на стрелку "Назад"
        - assert: Открылся список чатов
        - do: Открыть чат Б
        - assert: |
              Чат открыт
              Непрочитанные сообщения становятся прочитанными
        - do: Посмотреть на стрелку "Назад" в шапке чата
        - assert: Счетчик непрочитанных сообщений на стрелке "Назад" равен - 2.

    показывается счетчик на кнопке прокрутки[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный чат с 20 или более непрочитанными сообщениями
        - do: Открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Посмотреть на кнопку скролла в правом нижнем углу
        - assert: На кнопке скролла в правом нижнем углу окна чата отображается счетчик непрочитанных сообщений

    Не отображается счетчик непрочитанных сообщений, если у пользователя есть непрочитанные сообщения только в этом чате[manual]:
        - automation:
        - description: |
              У авторизованного пользователя есть только один приватный/групповой чат с непрочитанными сообщениями
              При проверки тест-кейса в браузере необходимо уменьшить окно браузера (чтобы на экране был только список чатов, а при открытии чата - только окно чата)
        - do: Открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Посмотреть на стрелку "Назад" в шапке чата.
        - assert: В шапке чата, рядом со стрелочкой “назад” нет счетчика непрочитанных сообщений

    Кнопка скролла отображается с иконкой "1k", если непрочитанных сообщений >= 1000[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный / групповой чат в истории которого более 1000 непрочитанных сообщений
        - do: Открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Посмотреть на кнопку скролла в правом нижнем углу
        - assert: На кнопке скролла в правом нижнем углу окна чата отображается счетчик с количеством  непрочитанных сообщений "1k"
        - do: Проскроллить чат вниз на 20-30 сообщений
        - assert: На счетчике  сообщений рядом с кнопкой скролла отображается количество непрочитанных сообщений в чате (например 987), а не 1k

    Счетчик на кнопке скролла уменьшается на N прочитанных сообщений[manual]:
        - automation:
        - description: У авторизованного пользователя есть групповой чат с 20 или более непрочитанными сообщениями
        - do: Открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Посмотреть на кнопку скролла в правом нижнем углу
        - assert: В окне чата в правом нижнем углу на кнопке скролла есть счетчик, отображающий число непрочитанных сообщений
        - do: Медленно проскроллить чат на несколько сообщений вниз
        - assert: Количество непрочитанных сообщений на кнопке прокрутки уменьшилось в зависимости от того на сколько мы проскроллили
        - do: Проскроллить историю чата в самый низ
        - assert: |
              Все непрочитанные сообщения прочтены
              Кнопка скролла не отображается в окне чата

    При нажатии по кнопке скроллит к последнему непрочитанному сообщению[manual]:
        - automation:
        - description: У авторизованного пользователя есть групповой чат с 20 или более непрочитанными сообщениями
        - do: Открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Посмотреть на кнопку скролла в правом нижнем углу
        - assert: В окне чата в правом нижнем углу на кнопке скролла есть счетчик, отображающий число непрочитанных сообщений
        - do: Нажать на кнопку прокрутки чата
        - assert: |
              Происходит переход к последнему непрочитанному сообщению
              Кнопка прокрутки и счетчик сообщений пропадают из окна чата

    Счетчик не становится отрицательным, если сделали меншен[manual]:
        - automation:
        - description: |
              У авторизованного пользователя А в списке чатов есть групповой чат в котором состоит пользователь Б
              При проверки тест-кейса в браузере необходимо уменьшить окно браузера (чтобы на экране был только список чатов, а при открытии чата - только окно чата)
              У пользователя нет чатов с непрочитанными сообщениями
        - do: Под пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Пользователем Б призвать в чат из description Пользователя А
        - assert: Призыв отправляется
        - do: Под пользователем А посмотреть на стрелку "Назад" в шапке чата
        - assert: Рядом со стрелкой "назад" не появилось отрицательного счетчика непрочитанных сообщений

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
