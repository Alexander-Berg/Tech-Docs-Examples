feature: Органика
type: Доступность

browsers: chrome-desktop

specs:
  Проверка на доступность:
    - do: получить выдачу по запросу 'foreverdata'
    - params:
        foreverdata: '2456480268'
    - assert: отображается органический сниппет c тумбой
    - tech: у заголовка есть атрибут aria-labelledby с id указывающим на organic__url-text
    - tech: у тумбы есть атрибут aria-label="Изображение с сайта vk.com"
    - tech: скрытый визуально текст ачивки - "Подтвержденный профиль"
  Проверка меты на доступность:
    params:
      foreverdata: '1862929037'
    Телефон:
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на странице присутствует органический сниппет
      - do: включить скринридер
      - do: пронавигироваться до телефона в мете первого органического сниппета
      - assert: ридер зачитывает - 'телефон' и сообщает что это заголовок
      - do: пронавигировать стрелкой вправо или стрелкой вниз
      - assert: ридер зачитывает - номер телефона
      - assertMetrics: '-'
    Рейтинг:
      - tags:
          - no_assessors
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на странице присутствует органический сниппет
      - do: включить скринридер
      - do: пронавигироваться до рейтинга в мете первого органического сниппета
      - assert: ридер зачитывает - 'рейтинг' и сообщает что это заголовок
      - do: пронавигировать стрелкой вправо или стрелкой вниз
      - assert: ридер зачитывает - рейтинг организации
      - assertMetrics: '-'
    Метро:
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на странице присутствует органический сниппет
      - do: включить скринридер
      - do: пронавигироваться до метро в мете первого органического сниппета
      - assert: ридер зачитывает - 'метро' и сообщает что это заголовок
      - do: пронавигировать стрелкой вправо (или стрелкой вниз)
      - assert: ридер зачитывает - станцию метро
      - assertMetrics: '-'
  Ручная проверка на доступность:
    tags:
      - manual
      - skip_manual_check
    beforeEach:
      - do: получить выдачу по запросу 'сбербанк'
      - do: включить скринридер
      - do: c помощью горячих клавиш для навигации по заголовкам перейти к заголовку сниппета
    Проверка органического сниппета, скрытые ачивки:
      - automation: SERP-99500
      - assert: |
          произошел переход на заголовок
          скринридер озвучил: 'Сбербанк России, заголовок уровень 2' (текст заголовка примерный и может отличаться)
      - do: сделать переходы с помощью клавиш 'стрелка вниз'/'стрелка вверх'
      - assert: |
          происходит переход по элементам сниппета(гринурл, текст, ссылки)
          при этом ачивки, в том числе с текстом, не фокусируются и не зачитываются
    Проверка органического сниппета с тумбой(изображение в правой части сниппета):
      - automation: SERP-99500
      - do: c помощью кнопки 'Tab' дойти до сниппета с тумбой
      - assert: |
          сначала в фокус попадает ссылка в тумбе
          скринридер озвучил 'Изображение с сайта {vk.com}, ссылка' (название сайта для примера)
      - do: нажать 'Tab'
      - assert: |
          произошел переход на ссылку в заголовке сниппета
          скринридер озвучил: 'Сбербанк длинное тире ВКонтакте, ссылка' (текст заголовка примерый и может отличаться)

files:
  - features/desktop/organic/organic.a11y.hermione.js

v-team: Beauty

tags:
  - A11y_serp
  - skip_e2e_check
  - no_assessors

counter: /$page/$main/$result[@type="organic"]

tlds:
  - ru
