feature: Объектный ответ
type: Плеер
description:
   ВНИМАНИЕ !!Не проходите тест с Колхоза!! (будете видеть у некоторого контента черный экран в плеере - это не баг!! а специфика фермы)
   Все кейсы необходимо проходить неавторизованным пользователем, если не указано явно иного. Предварительно очистить данные и куки.
   Обратите внимание, у объектного ответа нет метки 'Все выпуски', пример как выглядит ОО (пример https://jing.yandex-team.ru/files/eksamoylova/2020-10-08_21-43-36%20%281%29.png), также ОО может быть не на первой позиции, необходимо поскролить страницу.
   Если время проигрывания видео находится не в центре, а справа над прогрессом - это не баг.


browsers:
  notFor:
    - android-pp-4.99-touch
    - android-pp-6.45-touch
    - ios-chrome-mobile-touch
specs:
  aliases:
    - &automationTicket
      - automation: SERP-105387

    # Открываем плеер для сериалов и начинаем воспроизведение
    - &seriesPlayerStart
      - *automationTicket
      - do: залогиниться пользователем с подпиской (например, test-serp-assessors-plus/hL5-tYe-VGX-fzg)
      - do: получить выдачу по запросу 'рик и морти' (альтернативные запросы 'клуб винкс – школа волшебниц мультсериал', 'доктор плюшева мультсериал')
      - assert: |
          на выдаче присутствует объектный ответ
          в объектном ответе есть заглушка с кнопкой 'Смотреть' (если заглушки нет или название кнопки "Купить", то проверьте наличие подписки и попробуйте альтернативные запросы)
          под заглушкой есть сериальный навигатор
      - screenshot: примерный внешний вид заглушки с сериальным навигатором [https://jing.yandex-team.ru/files/kulagin-iv/Screenshot_179.png]
      - do: нажать на кнопку "Смотреть" и выбрать там "Кинопоиск"
      - assert: плеер начал воспроизводиться
      - do: кликнуть в область плеера

    # Открываем сайдблок с плеером для блогера
    - &openOverlay
      - tags: oo_overlay
      - do: нажать на 'Выпуски' в карточке
      - assert: |
          открылся сайдблок, в котором автоматически начал играть плеер

    # Открываем сайдблок с плеером для фильма
    - &openAndCloseOverlayFilm
      - tags: oo_overlay
      - do: нажать на кнопку 'Трейлер' в карточке
      - assert: |
          открылся сайдблок, в котором автоматически начал играть трейлер
      - do: вернуться назад, закрыть сайдблок
      - assert: |
          плеер фильма не встал на паузу

    # Открываем сайдблок с плеером для сериала
    - &openAndCloseOverlaySerial
      - tags: oo_overlay
      - do: нажать на кнопку 'Сезоны' в карточке
      - assert: |
          открылся сайдблок
      - do: вернуться назад, закрыть сайдблок
      - assert: |
          плеер сериалаа не встал на паузу

    # Проверяем, что плеер не встал на паузу SERP-116083
    - &playerNeverStop
      - tags: oo_overlay
      - assert: |
          плеер не встал на паузу
      - do: вернуться назад, закрыть сайдблок
      - assert: |
          плеер не встал на паузу

    # Открываем сайдблок с плеером для трейлеров и начинается воспроизведение
    - &trailersPlayerStartSideblock
      - *automationTicket
      - tags: oo_overlay
      - do: получить выдачу по запросу 'грязь фильм 2013' (альтернативные запросы 'фея-крёстная фильм 2020', 'добейся успеха 1', 'артемис фаул фильм 2020')
      - assert: |
          на выдаче присутствует объектный ответ с трейлером
      - screenshot: примерный вид [https://jing.yandex-team.ru/files/aantonevich/uhura_2021-11-16T17%3A51%3A11.751659.jpg]
      - do: нажать кнопку "Трейлер" или тумбу "Трейлер"
      - assert: |
          на весь экран открылся сайдблок(может быть видна строка браузера - это не баг), запустить проигрывание, если воспроизведение не началось автоматически
          (может начаться реклама - это не баг)
      - screenshot: примерный вид [https://jing.yandex-team.ru/files/aantonevich/uhura_2021-11-16T17%3A53%3A15.468374.jpg]

    # Открываем плеер для фильмов и начинаем воспроизведение
    - &filmsPlayerStart
      - *automationTicket
      - do: залогиниться пользователем с подпиской (например, test-serp-assessors-plus/hL5-tYe-VGX-fzg)
      - do: |
          ЧИТАЙТЕ ВНИМАТЕЛЬНЕЕ КАКОЙ ТЕСТ ВЫПОЛНЯЕТСЯ, ЕСЛИ ПРО АУДИО И СУБТИТРЫ, ТО НУЖНЫ ОПРЕДЕЛЕННЫЕ ФИЛЬМЫ, КОТОРЫЕ УКАЗАНЫ НИЖЕ
          получить выдачу по запросу 'я худею на иви' (альтернативные запросы 'ультраамериканцы на иви', 'хардкор на иви', 'новая земля на иви')
          для теста по изменению АУДИО запрос 'жертвуя пешкой на иви' (альтернативные запросы 'глоток на иви', 'вкус ночи на иви')
          для теста по включению СУБТИТРОВ запрос 'Тот кто убивает узник тьмы' (альтернативные запросы 'джентльмены', 'настоящие боссы')
      - assert: |
          на выдаче присутствует объектный ответ
          в объектном ответе есть заглушка с кнопкой 'Смотреть' (если заглушки нет или название кнопки "Купить", то проверьте наличие подписки и попробуйте альтернативные запросы)
      - screenshot: примерный внешни вид заглушки [https://jing.yandex-team.ru/files/kulagin-iv/Screenshot_180.png]
      - do: нажать на кнопку "Смотреть" и выбрать там "Кинопоиск"
      - assert: плеер начал воспроизводиться
      - do: кликнуть в область плеера

    # Открываем плеер для клипов и начинаем воспроизведение
    - &clipsPlayerStart
      - *automationTicket
      - do: |
            получить выдачу по запросу 'рианна амбрелла' (альтернативные запросы 'evanescence bring me to life', 'lady gaga poker face', 'каста радиосигналы', 'Zombie The Cranberries', 'Обезоружена Полина Гагарина')
            если так и не появился ОО с плеером, то измените геолокацию на Москву и домен на .ru (в ПП достаточно поменять только геолокацию)
      - assert: |
          на выдаче присутствует объектный ответ с плеером
          если плеер находится на первой позиции, то он автоматически начал воспроизведение
          иначе необходимо кликнуть на плеер для старта воспроизведения
      - screenshot: примерный вид [https://jing.yandex-team.ru/files/av-denis/player-clips-touch.png]
      - screenshot: внешний вид может отличаться, время может быть не под таймлайном, а над справа - это не баг, пример [https://jing.yandex-team.ru/files/eksamoylova/dud__Yandeks_nashyolsya_1mlnrezultatov_2020-12-25_19-46-16.png]

    # Основные элементы управления для ОТТ-контента (фильмы, мультфильмы, сериалы, трейлеры)
    - &playerOttControlElements
      - do: проверить расположение элементов плеера, для этого кликнуть в любое место плеера, чтобы появились контролы
      - assert: |
          в плеере отображаются:
          окно проигрывание контента
          кнопка включения/выключения звука
          кнопка играть/пауза
          время проигрывания контента
          кнопка-шестеренка с настройками
          кнопка полноэкранного режима (fullscreen)
          контролы перемотки (могут отсутстовать)
          (возможен вариант, что одни кнопки отображаются, а другие нет - это не баг, а специфика размера устройства)

    # Основные элементы управления для Дзен-контента (блоггеры)
    - &playerEfirControlElements
      - do: проверить расположение элементов плеера, для этого кликнуть в любое место плеера, чтобы появились контролы
      - assert: |
          в плеере отображаются:
          окно проигрывание контента
          кнопка включения/выключения звука
          кнопка играть/пауза
          время проигрывания контента
          кнопка 'отправить на устройство' (может не быть на узких девайсах)
          кнопка 'поделиться' (может не быть на узких девайсах)
          кнопка-шестеренка с настройками
          кнопка полноэкранного режима (fullscreen)
          контролы перемотки (могут отсутстовать)
          (возможен вариант, что одни кнопки отображаются, а другие нет - это не баг, а специфика размера устройства)

    # Идет воспроизведение
    - &playerPlaying
      - assert: |
          индикатор времени будет отображать время проигрывания и время окончания
          движется ползунок скроллбара прогресса видео

    # Поставили на паузу
    - &playerPause
      - do: нажать на кнопку паузы
      - assert: |
          плеер перестал воспроизводиться
          на месте кнопки паузы теперь плей
      - do: снова нажать на кнопку воспроизведения в плеере
      - assert: |
          плеер продолжил воспроизведение
          на месте кнопки плер теперь пауза
      - do: снова нажать на кнопку паузы
      - assert: |
          плеер перестал воспроизводиться
          на месте кнопки паузы теперь плей

    # Отключение/включение звука
    - &playerVolumeChange
      - assert: если тест проходится на ферме (kolhoz), то там может не быть звука, это не является ошибкой
      - do: нажать на кнопку включения/отключения звука в левом нижнем углу
      - assert: |
          звук в плеере включается/отключается
          кнопка с включения/отключения звука изменяется на соответствующую кнопку для включения или отключения звука

    # Изменение качества воспроизведения в шестерёнке
    - &playerSettingsQualityChange
      - assert: в правом нижнем углу находится кнопка-шестерёнка с настройками
      - do: нажать на кнопку-шестерёнку с настройками
      - assert: |
          в плеере появилось всплывающее окошко с настройками воспроизведения
          в нём есть кнопка с изменением качества воспроизводимого контента
      - screenshot: примерный вид [https://jing.yandex-team.ru/files/shnurig/browser_cZ4qAFiGhl.png]
      - do: изменить качество на минимально возможное (блок с качеством можно скроллить на узких размера экрана)
      - assert: качество видео снизилось (может измениться с задержкой)
      - do: нажать на кнопку и изменить качество на максимально возможное
      - assert: качество видео увеличилось (может измениться с задержкой)
      - do: нажать на кнопку и изменить качество на 'Авто'
      - assert: |
          качество видео выбралось автоматически
          проигрывание продолжилось

    # Изменение скорости воспроизведения в шестерёнке
    - &playerSettingsSpeedChange
      - assert: в правом нижнем углу находится кнопка-шестерёнка с настройками
      - do: нажать на кнопку-шестерёнку с настройками
      - assert: |
          в плеере появилось всплывающее окошко с настройками воспроизведения
          в нём есть кнопка с изменением скорости воспроизведения контента
      - screenshot: примерный вид [https://jing.yandex-team.ru/files/eksamoylova/2020-05-26_14.25.56-8hwpz.png]
      - do: изменить скорость воспроизведения на минимальную из предложенных (блок со скоростью можно скроллить на узких размера экрана)
      - assert: скорость воспроизведения видео уменьшилась, окошко с настройками осталось открытым
      - do: изменить скорость воспроизведения на максимальную из предложенных
      - assert: скорость воспроизведения видео увеличилась, окошко с настройками осталось открытым
      - do: изменить скорость воспроизведения на обычную по-умолчанию (1x)
      - assert: скорость воспроизведения стала обычная, окошко с настройками осталось открытым

    # Включение субтитров в шестерёнке
    - &playerSettingsSubsChange
      - assert: в правом нижнем углу находится кнопка-шестерёнка с настройками
      - do: нажать на кнопку-шестерёнку с настройками
      - assert: |
          в плеере появилось всплывающее окошко с настройками воспроизведения
          в нём есть кнопка, включающая субтитры
      - screenshot: примерный вид [https://jing.yandex-team.ru/files/av-denis/touch-player-subs.png]
      - do: кликнуть по кнопке включения субтитров
      - assert: |
                в нижней части плеера появились субтитры
                настройки скрываться не должны - это не баг
      - do: кликнуть ещё раз по кнопке субтитров
      - assert: в нижней части плеера пропали субтитры

    # Изменение языка субтитров в шестерёнке
    - &playerSettingsLanguageChange
      - assert: в правом нижнем углу находится кнопка-шестерёнка с настройками
      - do: нажать на кнопку-шестерёнку с настройками
      - assert: |
          в плеере появилось всплывающее окошко с настройками воспроизведения
          в нём есть кнопка изменения языка
      - screenshot: примерный вид [https://jing.yandex-team.ru/files/av-denis/settings-lang.png]
      - do: кликнуть по кнопке изменения языка и выбрать любой язык
      - assert: |
                в нижней части плеера появились субтитры на выбранном языке
                настройки скрываться не должны - это не баг
      - do: кликнуть по кнопке изменения языка и выбрать другой язык
      - assert: в нижней части плеера появились субтитры на другом выбранном языке

    # Повторное проигрывание видео в плеере
    - &playerPlayedAgain
      - do: перемотать видео в конец (за 5-10 секунд)
      - assert: |
          после окончания проигрывания появилась кнопка с круговой стрелкой (возможно наличие рекламы в конце ролика, её можно пропустить)
      - screenshot: примерный вид [https://jing.yandex-team.ru/files/av-denis/touch-player-retry.png]
      - do: нажать на кнопку с круговой стрелкой
      - assert: видео проигрывается сначала
    # Повторное проигрывание видео в плеере для фильмов
    - &playerPlayedAgainFilm
      - do: перемотать видео в конец (за 5-10 секунд)
      - assert: |
          после окончания ролика не запустилась реклама
          после окончания проигрывания появилась кнопка с круговой стрелкой
      - do: нажать на кнопку с круговой стрелкой
      - assert: видео проигрывается сначала

    # Переход во весь экран и обратно
    - &playerFullscreen
      - assert: в правом нижнем углу находится кнопка перехода в полноэкранный режим
      - do: нажать на кнопку перехода в полноэкранный режим
      - assert: |
          плеер открылся на полный экран
          в правом нижнем углу теперь находится кнопка выхода из полноэкранного режима
          на iOS выход из полноэкранного режима находится в левом верхнем углу в виде крестика - это не баг
      - do: нажать на кнопку (крестик) для выхода из полноэкранного режима
      - assert: |
                плеер вернулся к первоначальному размеру
                на iOS плеер встает на паузу - это не баг, а нативное поведение

    # Перемотка содержимого
    - &playerRewind
      - do: нажать внутри плеера
      - assert: в нижней части плеера есть ползунок воспроизведения
      - do: нажать на ползунок воспроизведения и перетащить вперед на некоторое количество времени
      - assert: |
          содержимое плеера перемоталось вперед на выбранное количество времени
          время воспроизведения в нижней части плеера поменялось
      - do: нажать на ползунок воспроизведения и перетащить назад на некоторое количество времени
      - assert: |
          содержимое плеера перемоталось назад на выбранное количество времени
          время воспроизведения в нижней части плеера поменялось
      - do: нажать в конце прогресс-бара
      - assert: |
          содержимое плеера перемоталось в конец
          время воспроизведения в нижней части плеера поменялось

    # Браузеры, где есть шестеренка в углу
    - &playerBrowsersWithSettings
      - browsers:
        - chrome-phone
        - android-yandex-browser-17-touch
        - searchapp-phone
        - android-pp-6.45-touch
        notFor:
          - ios-touch-group

    # У этих браузеров sandbox-плеер с контролами перемотки
    - &browsersHasRewindControls
      - browsers:
        - chrome-phone
        - android-yandex-browser-17-touch
        - searchapp-phone-group
        notFor:
          - ios-safari-13-touch

    # Перемотка содержимого контролами плеера
    - &playerRewindWithControls
      - do: кликнуть в любую часть плеера, чтобы появились контролы
      - screenshot: примерный вид [https://jing.yandex-team.ru/files/av-denis/touch-player-rewind-controls.png]
      - do: нажать на кнопку перемотки вперед (10 со стрелкой)
      - assert: |
          содержимое плеера перемоталось вперед на 10 секунд
          время воспроизведения в нижней части плеера поменялось
      - do: нажать на кнопку перемотки назад (10 со стрелкой)
      - assert: |
          содержимое плеера перемоталось назад на 10 секунд
          время воспроизведения в нижней части плеера поменялось

    # Условие для кейсов с рекламой
    - &playerAdvCondition
      - assert: |
                этот кейс нужно выполнить в режиме инкогнито (в ПП нет инкогнито - это не баг)
                если реклама не пришла, то попробуйте другой запрос (если не помогло, то заскипайте тест)
                на iOS реклама может не разыграться - это не баг, а специфика платформы (заскипайте тест в таком случае)

    # Клик по рекламному содержимому
    - &playerAdvClick
      - do: |
          досмотреть видео до момента появления рекламы (обычно в конце ролика)
      - assert: |
          появился рекламный блок
      - screenshot: примерный вид [https://jing.yandex-team.ru/files/av-denis/player-adv.png]
      - screenshot: может быть еще такой вид  (вид банера может отличаться - это не баг) [https://jing.yandex-team.ru/files/eksamoylova/cbc3edc3-743a-4e40-8b12-351930541f7e.jpg_7201280_2020-11-19_13-24-28.png]
      - do: кликнуть на любую ссылку в содержимом рекламного блока (если нет ссылок - в любом месте блока)
      - assert: в новой вкладке открылся сайт с рекламным контентом

    # Досмотр рекламного ролика
    - &playerAdvWatch
      - do: |
          досмотреть видео до момента появления рекламы (обычно в конце ролика)
      - assert: |
          появился рекламный блок
      - screenshot: примерный вид [https://jing.yandex-team.ru/files/av-denis/player-adv.png]
      - screenshot: может быть еще такой вид (вид банера может отличаться - это не баг) [https://jing.yandex-team.ru/files/eksamoylova/cbc3edc3-743a-4e40-8b12-351930541f7e.jpg_7201280_2020-11-19_13-24-28.png]
      - do: досмотреть рекламу до конца (их может быть несколько)
      - assert: реклама закончилась и после рекламы отображается плеер с контролами, можно повторно запустить проигрывание ролика ЛИБО может начаться проигрывание следуюшего ролика при наличии

    # Пропуск рекламного ролика
    - &playerAdvSkip
      - do: |
          досмотреть видео до момента появления рекламы (обычно в конце ролика)
      - assert: |
          появился рекламный блок
          через какое-то время появится кнопка 'Пропустить'
          (если кнопки нет, то это не баг, просто ролик такой, дождитесь с кнопкой или скипнете тест)
      - screenshot: примерный вид [https://jing.yandex-team.ru/files/av-denis/player-adv.png]
      - sxreenshot: может быть еще такой вид (вид банера может отличаться - это не баг) [https://jing.yandex-team.ru/files/eksamoylova/cbc3edc3-743a-4e40-8b12-351930541f7e.jpg_7201280_2020-11-19_13-24-28.png]
      - do: кликнуть по кнопке 'Пропустить' (возможно, нужно будет сделать это несколько раз, если следом появится ещё реклама)
      - assert: реклама закончилась и после рекламы отображается плеер с контролами, можно повторно запустить проигрывание ролика ЛИБО может начаться проигрывание следуюшего ролика при наличии

    # Включилась следующая серия по очереди для блогеров
    - &playerAutoplayNext
      - do: нажать на ползунок воспроизведения и перемотать содержимое в конец ролика (за 5-10 секунд)
      - assert: |
          после окончания проигрывания начал автоматическое воспроизведение следующий эпизод по списку
          возможно начнется воспроизведение рекламы, в таком случае после окончания рекламы начнется воспроизведение следующего эпизода
      - do: перемотать теперь содержимое в конец ролика (за 5-10 секунд)
      - assert: |
          снова после окончания проигрывания начал автоматическое воспроизведение следующий эпизод по списку
          возможно начнется воспроизведение рекламы, в таком случае после окончания рекламы начнется воспроизведение следующего эпизода
    # Включилась следующая серия по очереди для сериалов
    - &playerAutoplayNextSerial
      - do: нажать на ползунок воспроизведения и перемотать содержимое в конец ролика (за 5-10 секунд)
      - assert: |
          после окончания ролика не запустилось проигрывание рекламы
          после окончания проигрывания начал автоматическое воспроизведение следующий эпизод по списку
      - do: перемотать теперь содержимое в конец ролика (за 5-10 секунд)
      - assert: |
          после окончания ролика не запустилось проигрывание рекламы
          снова после окончания проигрывания начал автоматическое воспроизведение следующий эпизод по списку
    - &browsersWithNativePlayer
      - browsers:
          notFor:
            - ios-touch-group

  Проверки по типам контента:
    Трейлеры:
      Основные элементы управления [manual]:
        - *browsersWithNativePlayer
        - *trailersPlayerStartSideblock
        - *playerOttControlElements

      Перемотка содержимого [manual]:
        - priority: normal
        - *browsersWithNativePlayer
        - *trailersPlayerStartSideblock
        - *playerRewind

      Перемотка содержимого контролами плеера [manual]:
        - priority: normal
        - *browsersHasRewindControls
        - *filmsPlayerStart
        - *playerRewindWithControls

      Воспроизведение контента [manual]:
        - tags: pp_new_core
        - priority: normal
        - *trailersPlayerStartSideblock
        - *playerPlaying

      Пауза [manual]:
        - priority: normal
        - *trailersPlayerStartSideblock
        - *playerPause

      Регулятор громкости звука [manual]:
        - priority: normal
        - *trailersPlayerStartSideblock
        - *playerVolumeChange

      Шестерёнка с настройками:
        Изменение качества [manual]:
          - priority: normal
          - *playerBrowsersWithSettings
          - *trailersPlayerStartSideblock
          - *playerSettingsQualityChange

        Изменение скорости воспроизведения [manual]:
          - priority: minor
          - *playerBrowsersWithSettings
          - *trailersPlayerStartSideblock
          - *playerSettingsSpeedChange

      Полноэкранный режим (fullscreen) [manual]:
        - priority: normal
        - *trailersPlayerStartSideblock
        - *playerFullscreen

      Повторное проигрывание видео в плеере [manual]:
         - priority: minor
         - *browsersWithNativePlayer
         - *trailersPlayerStartSideblock
         - *playerPlayedAgain

      Реклама:
        Открытие [manual]:
          - tags: pp_new_core
          - browsers:
             notFor: 'android-pp-6.5-touch'
          - *playerAdvCondition
          - *trailersPlayerStartSideblock
          - *playerAdvClick

        Бездействие [manual]:
          - priority: normal
          - *playerAdvCondition
          - *trailersPlayerStartSideblock
          - *playerAdvWatch

        Пропустить [manual]:
          - *playerAdvCondition
          - *trailersPlayerStartSideblock
          - *playerAdvSkip

    Фильмы:
      description: не проходите эти кейсы если у вас iOS 15.0 или 15.0.x. А так же если используете тестовое устройство Колхоз.
      Отсутствие паузы при входе/входе из сайдблока [manual]:
        - priority: minor
        - *filmsPlayerStart
        - *openAndCloseOverlayFilm

      Основные элементы управления [manual]:
        - *browsersWithNativePlayer
        - *filmsPlayerStart
        - *playerOttControlElements

      Перемотка содержимого [manual]:
        - priority: normal
        - *browsersWithNativePlayer
        - *filmsPlayerStart
        - *playerRewind

      Перемотка содержимого контролами плеера [manual]:
        - priority: normal
        - *browsersHasRewindControls
        - *filmsPlayerStart
        - *playerRewindWithControls

      Воспроизведение контента [manual]:
        - priority: normal
        - *filmsPlayerStart
        - *playerPlaying

      Пауза [manual]:
        - priority: normal
        - *filmsPlayerStart
        - *playerPause

      Регулятор громкости звука [manual]:
        - priority: normal
        - *filmsPlayerStart
        - *playerVolumeChange

      Шестерёнка с настройками:
        Изменение качества [manual]:
          - priority: normal
          - *playerBrowsersWithSettings
          - *filmsPlayerStart
          - *playerSettingsQualityChange

        Изменение скорости воспроизведения [manual]:
          - priority: minor
          - *playerBrowsersWithSettings
          - *filmsPlayerStart
          - *playerSettingsSpeedChange

        Изменение субтитров [manual]:
          - priority: normal
          - *playerBrowsersWithSettings
          - *filmsPlayerStart
          - *playerSettingsSubsChange

      Полноэкранный режим (fullscreen) [manual]:
        - tags: pp_new_core
        - priority: normal
        - *filmsPlayerStart
        - *playerFullscreen

      Повторное проигрывание видео в плеере [manual]:
        - priority: minor
        - *browsersWithNativePlayer
        - *filmsPlayerStart
        - *playerPlayedAgainFilm

      Реклама:
        tags: no_assessors # отключаю, т.к. после удаления авода с Серпа кейсы стали неактуальными
        Открытие [manual]:
          - browsers:
              notFor: 'android-pp-6.5-touch'
          - *playerAdvCondition
          - *filmsPlayerStart
          - *playerAdvClick

        Бездействие [manual]:
          - *playerAdvCondition
          - *filmsPlayerStart
          - *playerAdvWatch

        Пропустить [manual]:
          - *playerAdvCondition
          - *filmsPlayerStart
          - *playerAdvSkip

    Сериалы:
      description: не проходите эти кейсы если у вас iOS 15.0 или 15.0.x. А так же если используете тестовое устройство Колхоз.
      Отсутствие паузы при входе/входе из сайдблока [manual]:
        - priority: minor
        - *seriesPlayerStart
        - *openAndCloseOverlaySerial

      Основные элементы управления [manual]:
        - priority: normal
        - *browsersWithNativePlayer
        - *seriesPlayerStart
        - *playerOttControlElements

      Воспроизведение контента [manual]:
        - *seriesPlayerStart
        - *playerPlaying

      Пауза [manual]:
        - *seriesPlayerStart
        - *playerPause

      Автовоспроизведение следующей серии [manual]:
        - priority: minor
        - *seriesPlayerStart
        - *playerAutoplayNextSerial
      Реклама:
        tags: no_assessors # отключаю, т.к. после удаления авода с Серпа кейсы стали неактуальными
        Открытие [manual]:
          ##- *playerAdvCondition
          - browsers:
             notFor: 'android-pp-6.5-touch'
          - *seriesPlayerStart
          - *playerAdvClick

        Бездействие [manual]:
          ##- *playerAdvCondition
          - *seriesPlayerStart
          - *playerAdvWatch

        Пропустить [manual]:
          ##- *playerAdvCondition
          - *seriesPlayerStart
          - *playerAdvSkip

    Клипы:
      description: Если в карточке музыканта нет плеера, убедитесь что кейс проходится с местоположением РФ, иначе плеер может отсутствовать
      Основные элементы управления [manual]:
        - priority: normal
        - *browsersWithNativePlayer
        - *clipsPlayerStart
        - *playerOttControlElements

      Реклама:
        Открытие [manual]:
          - browsers:
             notFor: 'android-pp-6.5-touch'
          - *playerAdvCondition
          - *clipsPlayerStart
          - *playerAdvClick

        Бездействие [manual]:
          - priority: normal
          - *playerAdvCondition
          - *clipsPlayerStart
          - *playerAdvWatch

        Пропустить [manual]:
          - *playerAdvCondition
          - *clipsPlayerStart
          - *playerAdvSkip

    Проигрывание DRM контента [manual]:
      - tags: pp_new_core
      - description: не проходите этот кейс если у вас iOS 15.0 или 15.0.x. А так же если используете тестовое устройство Колхоз.
      - browsers:
          notFor: 'ios-safari-10-touch'
      - *automationTicket
      - do: залогиниться пользователем с подпиской (например, test-serp-assessors-plus/hL5-tYe-VGX-fzg)
      - do: получить выдачу по запросу 'веном фильм' (альтернативные запросы 'рик и морти', 'клиника сериал')
      - assert: в карточке ОО присутствует заглушка с кнопкой "Смотреть" (если заглушки нет или название кнопки "Купить", то проверьте наличие подписки и попробуйте альтернативные запросы)
      - do: нажать на кнопку "Смотреть" и выбрать там "Кинопоиск"
      - assert: плеер начал воспроизводиться (если произошел переход на сайт Кинопоиска или в приложение Кинопоиск - пропустите кейс)
      - do: немного перемотать ролик
      - assert: после перемотки ролик продолжает проигрываться

    Проигрывание EST контента:
      - description: не проходите этот кейс если у вас iOS 15.0 или 15.0.x. А так же если используете тестовое устройство Колхоз.
      - priority: normal
      - *automationTicket
      - do: залогиниться пользователем с купленным контентом (например, test-serp-assessors-plus/hL5-tYe-VGX-fzg)
      - do: получить выдачу по запросу 'Зверопой' (альтернативные запросы "Семейка Крудс", "Мадагаскар 1")
      - assert: в карточке ОО присутствует заглушка с кнопкой "Смотреть" (если заглушки нет или название кнопки "Купить", то проверьте наличие покупки и попробуйте альтернативные запросы)
      - do: нажать на кнопку "Смотреть" и выбрать там "Кинопоиск"
      - assert: плеер начал воспроизводиться (если произошел переход на сайт Кинопоиска или в приложение Кинопоиск - пропустите кейс)
      - do: немного перемотать ролик
      - assert: после перемотки ролик продолжает проигрываться

files: []

v-team: Video

priority: high

tags:
  - skip_manual_check
  - video_player
  - skip_e2e_check

tlds: ru
