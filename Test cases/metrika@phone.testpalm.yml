feature: Ecom-tap

tags:
  no_assessors

specs:
  Метрика:
    Добавляет utm-параметры к метричному урлу:
        - do: перейти на https://yandex.ru/turbo/spideradio.github.io/s/?product_id=107&pcgi=rnd%3Dc7hj4fr&rs=yamarket3_21578227_74475&ymclid=15936813805346869332500002&clid=928
        - tech: Отправился хит 'https://spideradio.github.io/rnd/c7hj4fr?rs=yamarket3_21578227_74475&ymclid=15936813805346869332500002&clid=928', ecom_spa 1, _ym { doc_ui "touch-phone" turbo_page 1 turbo_page_id undefined}

    Привязывает эксперименты к визиту метрики:
      - do: перейти на https://yandex.ru/turbo/spideradio.github.io/s/?product_id=107&pcgi=rnd%3Dc7hj4fr
      - tech: отправился запрос на привязку эксперимента к визиту метрики

    Data-Layer:
        Событие detail:
          - do: перейти на https://spideradio.github.io/rnd/c7hj4fr
          - tech: в window.dataLayer должен быть сохранён просмотр карточки товара
          - tech: в window.yaDataLayer должен быть сохранён аналогичный просмотр с префиксом магазина

        Событие add:
          - do: перейти на https://yandex.ru/turbo/spideradio.github.io/s/rnd/c7hj4fr
          - do: нажать на кнопку «Добавить в корзину»
          - tech: в window.dataLayer должно быть сохранено действие добавления товара в корзину
          - tech: в window.yaDataLayer должен быть сохранён аналогичный просмотр с префиксом магазина

        Событие add при изменении количества в корзине:
          - do: перейти на https://yandex.ru/turbo/spideradio.github.io/s/rnd/c7hj4fr
          - do: нажать на кнопку «Добавить в корзину»
          - do: нажать на кнопку «Перейти в корзину» и дождаться открытия корзины
          - do: нажать на кнопку увеличения количества единиц товара в корзине
          - tech: в window.dataLayer должно быть сохранено действие добавления товара в корзину с указанием одной единицы
          - tech: в window.yaDataLayer должно быть сохранено действие добавления товара в корзину с указанием одной единицы с префиксом магазина

        Событие add при покупке с витрины:
          - do: перейти на https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
          - do: нажать на кнопку «В корзину»
          - tech: в window.dataLayer должно быть сохранено действие добавления товара в корзину с указанием одной единицы
          - tech: в window.yaDataLayer должно быть сохранено действие добавления товара в корзину с указанием одной единицы с префиксом магазина

        Событие remove:
          - do: перейти на https://yandex.ru/turbo/spideradio.github.io/s/rnd/c7hj4fr
          - do: нажать на кнопку «Добавить в корзину»
          - do: нажать на кнопку «Перейти в корзину» и дождаться открытия корзины
          - do: нажать на кнопку «Удалить», чтобы удалить товар из корзины
          - tech: в window.dataLayer должно быть сохранено действие удаления товара из корзины
          - tech: в window.yaDataLayer должно быть сохранено действие удаления товара из корзины с префиксом магазина

        Событие remove при изменении количества:
          - do: перейти на https://yandex.ru/turbo/spideradio.github.io/s/rnd/c7hj4fr
          - do: нажать на кнопку «Добавить в корзину»
          - do: нажать на кнопку «Перейти в корзину» и дождаться открытия корзины
          - do: нажать на кнопку увеличения количества единиц товара в корзине
          - do: нажать на кнопку уменьшения количества единиц товара в корзине
          - tech: в window.dataLayer должно быть сохранено действие удаления товара из корзины
          - tech: в window.yaDataLayer должно быть сохранено действие удаления товара из корзины с префиксом магазина

        Событие purchase:
          - do: перейти на https://yandex.ru/turbo/spideradio.github.io/s/rnd/c7hj4fr
          - do: нажать на кнопку «Добавить в корзину»
          - do: нажать на кнопку «Перейти в корзину» и дождаться открытия корзины
          - do: нажать на кнопку «Оформить заказ»
          - assert: появилось окно оформления заказа
          - do: ввести имя «Иванов Павел Васильевич»
          - do: ввести телефон «+7 800 800 80 80»
          - do: ввести email «call@example.ru»
          - do: выбрать доставку самовывозом
          - do: нажать на кнопку «Отправить»
          - tech: в window.dataLayer должно быть сохранено действие отправки заказа
          - tech: в window.yaDataLayer должно быть сохранено действие отправки заказа с префиксом магазина

        Событие purchase в покупке в 1 клик:
          - do: перейти на https://yandex.ru/turbo/spideradio.github.io/s/rnd/c7hj4fr
          - do: нажать на кнопку «Купить в 1 клик»
          - assert: появилось окно оформления заказа
          - do: ввести имя «Иванов Павел Васильевич»
          - do: ввести телефон «+7 800 800 80 80»
          - do: ввести email «call@example.ru»
          - do: выбрать доставку самовывозом
          - do: нажать на кнопку «Отправить»
          - tech: в window.dataLayer должно быть сохранено действие отправки заказа
          - tech: в window.yaDataLayer должно быть сохранено действие отправки заказа с префиксом магазина

        Отправка промокода в событии purchase:
          - params:
              exp_flags:
                - turbo-app-cart-fresher=1
                - analytics-disabled=0
          - do: перейти по ссылке https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocart/
          - do: удалить все товары из корзины, если они там есть
          - do: перейти на страницу каталога
          - do: найти и добавить в корзину товар с названием "irure duis laborum esse mollit" и стоимостью 3999 рублей
          - do: перейти через нижнюю панель в корзину
          - assert: в корзине должен оказаться добавленный товар и поле промокода
          - do: ввести промокод "HWCOPTNOQ"
          - do: нажать на кнопку "Применить"
          - assert: цена товара и общий итог по корзине изменились
          - do: нажать на кнопку «Оформить заказ»
          - assert: появилось окно оформления заказа
          - do: ввести имя «Иванов Павел Васильевич»
          - do: ввести телефон «+7 800 800 80 80»
          - do: ввести email «call@example.ru»
          - do: выбрать доставку самовывозом
          - do: нажать на кнопку «Отправить»
          - tech: в window.dataLayer должно быть сохранено действие отправки заказа.
          - tech: в поле "ecommerce.purchase.actionField.coupon" должен быть передан промокод "HWCOPTNOQ"
          - tech: в товаре "ecommerce.purchase.products[0]" также присутствует поле "coupon" со значением "HWCOPTNOQ"
          - tech: в window.yaDataLayer должно быть сохранено действие отправки заказа с префиксом магазина
          - tech: в поле "ecommerce.purchase.actionField.coupon" должен быть передан промокод "HWCOPTNOQ"
          - tech: в товаре "ecommerce.purchase.products[0]" также присутствует поле "coupon" со значением "HWCOPTNOQ"

    Главная страница:
      Показ страницы:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/?morda=1
        - tech: Отправился хит 'https://spideradio.github.io'

      Ввод поискового запроса:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/?morda=1
        - do: Нажать на поле поиска
        - do: Ввести 'пантолеты'
        - do: Нажать кнопку 'Найти'
        - tech: Отправилась цель 'products-search-submit'
        - tech: Отправилась цель 'products-search-input-focus'
        - tech: Отправилась цель 'products-search-submit-via-button'
        - tech: Отправилась цель 'products-search-submit-main'
        - tech: Отправился хит 'http://spideradio.github.io', ecom_catalog=1

      Отправляются параметры визита после загруки данных:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
        - do: Нажать на 'Главная' в навигационной панели
        - tech: Отправился хит 'http://spideradio.github.io'
        - tech: Отправились параметры визита ecom_main=1

      Взаимодествие с елементами на странице:
        beforeEach:
          - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/?page_type=main&morda=1

        Клик в фасет:
          - do: Нажать на категорию
          - tech: Отправилась цель 'open-facet-main'

        Клик в баннер:
          - do: Нажать на банер
          - tech: Отправилась цель 'promo-banner-click'

        Клик в блок скидочных и популярных категорий:
          - do: Нажать категорию в блоке "Товары со скидкам"
          - tech: Отправилась цель 'collection-item-click'

        Клик в блок популярных товаров:
          - do: Нажать на товар в блоке "Популярные товары"
          - tech: Отправилась цель 'carousel-item-click' с параметром "type_recommendation = 'Популярные товары'"

        Клик в блок товаров "выгодно сегодня":
          - do: Нажать на товар в блоке "выгодно сегодня"
          - tech: Отправилась цель 'carousel-item-click' с параметром "type_recommendation = 'Выгодно сегодня'"

      Редизайн:
        Клик в блок скидочных и популярных категорий:
          - params:
              exp_flags:
                - turbo-app-morda-redesign=1
          - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/?page_type=main&morda=1
          - do: Нажать категорию в блоке "Товары со скидкам"
          - tech: Отправилась цель 'collection-item-click'

        Клик в блок с бесконечным каталогом:
          - params:
              exp_flags:
                - turbo-app-morda-redesign=1
          - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/?page_type=main&morda=1
          - do: Нажать на товар в блоке "Все товары"
          - tech: Отправилась цель 'main-global-product-list-click'

      Клик в блок с красивыми категориями:
        - params:
            exp_flags:
              - turbo-app-morda-redesign=1
        - do: открыть страницу https://yandex.ru/turbo/tvoisadrus.ru/n/yandexturbocatalog/main/?page_type=main&morda=1
        - do: кликнуть в блок популярной категории
        - tech: Отправилась цель 'pretty-category-click'

    Пользовательские адреса:
      Без адресов:
        Редактирование адреса:
          - do: разлогиниться в Яндексе, если есть залогиненные пользователи
          - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io?text=spideradio.github.io%2Fyandexturbocatalog%2F
          - do: добавить любой товар в корзину
          - do: перейти в корзину
          - do: нажать кнопку Оформить заказ
          - assert: осуществился переход к оформлению заказа
          - do: заполнить все поля в форме "Адрес доставки"
          - tech: Отправилась цель 'user-addresses-form-focus-field-locality'
          - tech: Отправилась цель 'user-addresses-form-focus-field-street'
          - tech: Отправилась цель 'user-addresses-form-focus-field-building'
          - tech: Отправилась цель 'user-addresses-form-focus-field-room'
          - tech: Отправилась цель 'user-addresses-form-focus-field-entrance'
          - tech: Отправилась цель 'user-addresses-form-focus-field-floor'
          - tech: Отправилась цель 'user-addresses-form-focus-field-intercom'

      Предзаполненные адреса:
        beforeEach:
          - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io?text=spideradio.github.io%2Fyandexturbocatalog%2F
          - do: залогиниться на yandex.ru
          - do: В паспорте на yandex.ru должны быть заполненны адреса
          - do: добавить любой товар в корзину
          - do: перейти в корзину
          - do: нажать "Оформить заказ"
          - assert: осуществился переход к оформлению заказа

        Форма загрузилась с адресами:
          - tech: Отправилась цель 'checkout-addresses-got-from-server'

        Выбор адреса:
          - do: выбрать доставку курьером
          - do: выбрать любой другой адрес из списка адресов
          - tech: Отправилась цель 'user-addresses-clicked-on-bullet'

        Клик по кнопке "Изменить":
          - do: выбрать доставку курьером
          - do: Нажать на кнопку "Изменить" в списке адресов
          - tech: Отправилась цель 'user-addresses-clicked-on-change'

        Клик по кнопке "Добавить новый адрес":
          - do: выбрать доставку курьером
          - do: Нажать на кнопку "Добавить новый адрес" под адресами
          - tech: Отправилась цель 'user-addresses-clicked-on-new'

        Редактирование адреса:
          - do: выбрать доставку курьером
          - do: Нажать на кнопку "Изменить" в списке адресов
          - assert: осуществился переход к редактировнаию адреса
          - do: изменить все поля в форме
          - tech: Отправилась цель 'user-addresses-form-focus-field-locality'
          - tech: Отправилась цель 'user-addresses-form-focus-field-street'
          - tech: Отправилась цель 'user-addresses-form-focus-field-building'
          - tech: Отправилась цель 'user-addresses-form-focus-field-room'
          - tech: Отправилась цель 'user-addresses-form-focus-field-entrance'
          - tech: Отправилась цель 'user-addresses-form-focus-field-floor'
          - tech: Отправилась цель 'user-addresses-form-focus-field-intercom'

        Сохранение паспортного адреса:
          - do: выбрать доставку курьером
          - do: Нажать на кнопку "Изменить" в списке адресов у паспортного адреса
          - assert: осуществился переход к редактировнаию адреса
          - do: внести изменения в адрес
          - do: Нажать "Сохранить"
          - tech: Отправилась цель 'user-addresses-saved'
          - tech: Отправилась цель 'user-addresses-passport-saved'

    Каталог:
      Показ страницы:
        - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
        - tech: Отправился хит 'http://spideradio.github.io'

      Ввод поискового запроса:
        - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
        - do: Нажать на поле поиска
        - do: Ввести 'пантолеты'
        - do: Нажать кнопку 'Найти'
        - tech: Отправилась цель 'products-search-submit'
        - tech: Отправилась цель 'products-search-input-focus'
        - tech: Отправилась цель 'products-search-submit-via-button'
        - tech: Отправился хит 'http://spideradio.github.io'

      Отправка целей опечаточника:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
        - do: Нажать на поле поиска
        - do: Ввести 'сообрашения'
        - do: Нажать кнопку 'Найти'
        - tech: Отправилась цель 'search-misspell'
        - do: Нажать на ссылку 'Отменить'
        - tech: Отправилась цель 'search-misspell-cancel'

      Отправка цели про пустые результаты поиска:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
        - do: Нажать на поле поиска
        - do: Ввести 'ese'
        - do: Нажать кнопку 'Найти'
        - tech: Отправилась цель 'search-empty-results'

      Отправка цели про повторный поиск:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
        - do: Нажать на поле поиска
        - do: Ввести 'esse'
        - do: Нажать кнопку 'Найти'
        - do: Дождаться завершения поиска
        - do: Ввести 'sunt'
        - do: Нажать кнопку 'Найти'
        - do: Дождаться завершения поиска
        - do: Ввести 'esse'
        - do: Нажать кнопку 'Найти'
        - tech: Отправилась цель 'search-repeated-request'

      Клик по категории:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
        - do: Нажать на первую категорию
        - tech: Отправилась цель 'open-facet'
        - tech: Отправился хит 'http://spideradio.github.io'

      Изменение сортировки:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
        - do: Нажать "По популярности"
        - do: Выбрать "Сначала дешевле"
        - tech: Отправилась цель 'sort-products'
        - tech: Отправился хит 'http://spideradio.github.io'

      Добавление и переход в корзину:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
        - do: На первом товаре нажать кнопку 'В корзину'
        - tech: Отправилась цель 'add-to-cart'
        - do: Дождаться изменения надписи на 'В корзине'
        - do: Нажать кнопку 'В корзине'
        - tech: Отправилась цель 'open-cart-from-product'
        - tech: Отправился хит 'http://spideradio.github.io', ecom_cart=1

      Переход в товар:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
        - do: Нажать на первый товар
        - tech: Отправилась цель 'open-product-item'
        - tech: Отправился хит 'https://spideradio.github.io/?rnd=c7hj4fr'

      Отправляются параметры визита после загруки данных:
        - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/?page_type=main&morda=1
        - do: Нажать на первую категорию
        - tech: Отправился хит 'http://spideradio.github.io'
        - tech: Отправились параметры визита ecom_catalog=1

    Корзина:
      Показ страницы:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocart/
        - tech: Отправился хит 'http://spideradio.github.io'

      Оформление заказа, оплата наличными:
        - do: Открыть страницу https://yandex.ru/turbo/ymturbo.t-dir.com/n/yandexturbocart/
        - do: Нажать кнопку 'Оформить заказ'
        - tech: Отправилась цель 'open-check-out-form-from-cart'
        - do: В поле 'ФИО' ввести 'Иванов Павел Васильевич'
        - do: В поле 'Телефон' ввести '+7 800 800 80 80'
        - do: В поле 'E-mail' ввести 'call@example.ru'
        - do: В поле 'Адрес доставки' ввести 'Адрес доставки'
        - do: Нажать кнопку 'Отправить'
        - tech: Отправилась цель 'send-check-out-form-from-cart', payment=cash
        - do: Дождаться появления сообщения об успешном заказе
        - tech: Отправилась цель 'check-out-form-success-from-cart', payment=cash
        - tech: для незалогиненного пользователя отправилась цель 'typ-registration'

      Оформление заказа, альбомная ориентация:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocart/
        - do: Нажать кнопку 'Оформить заказ'
        - do: Перевести телефон в альбомную ориентацию
        - do: В поле 'ФИО' ввести 'Иванов Павел Васильевич'
        - do: В поле 'Телефон' ввести '+7 800 800 80 80'
        - do: В поле 'E-mail' ввести 'call@example.ru'
        - do: Выбрать спотоб доставки - 'Самовывоз'
        - do: Нажать кнопку 'Отправить'
        - tech: Отправилась цель 'send-check-out-form-from-cart', payment=cash, orientation=landscape

      Оформление заказа, оплата картой, успешно:
        - do: Открыть страницу https://yandex.ru/turbo/ymturbo.t-dir.com/n/yandexturbocart/?mock_payment_requests=1
        - do: Нажать кнопку 'Оформить заказ'
        - tech: Отправилась цель 'open-check-out-form-from-cart'
        - do: В поле 'ФИО' ввести 'Иванов Павел Васильевич'
        - do: В поле 'Телефон' ввести '+7 800 800 80 80'
        - do: В поле 'E-mail' ввести 'call@example.ru'
        - do: В поле 'Адрес доставки' ввести 'Адрес доставки'
        - do: Нажать кнопку 'Отправить'
        - tech: Отправилась цель 'send-check-out-form-from-cart', payment=online
        - do: Дождаться появления сообщения об успешном заказе
        - tech: Отправилась цель 'check-out-form-success-from-cart', payment=online
        - tech: для незалогиненного пользователя отправилась цель 'typ-registration'

      Оформление заказа, оплата картой, неуспешно:
        - do: Открыть страницу https://yandex.ru/turbo/ymturbo.t-dir.com/n/yandexturbocart/?mock_payment_requests_throw=1
        - do: Нажать кнопку 'Оформить заказ'
        - tech: Отправилась цель 'open-check-out-form-from-cart'
        - do: В поле 'ФИО' ввести 'Иванов Павел Васильевич'
        - do: В поле 'Телефон' ввести '+7 800 800 80 80'
        - do: В поле 'E-mail' ввести 'call@example.ru'
        - do: В поле 'Адрес доставки' ввести 'Адрес доставки'
        - do: Нажать кнопку 'Отправить'
        - tech: Отправилась цель 'send-check-out-form-from-cart', payment=online
        - do: Дождаться появления сообщения об ошибке
        - tech: Отправилась цель 'send-check-out-form-from-cart', payment=online, error=UNKNOWN

      Оформление заказа, оплата картой, отмена:
        - do: Открыть страницу https://yandex.ru/turbo/ymturbo.t-dir.com/n/yandexturbocart/?mock_payment_requests_throw_not_started=1
        - do: Нажать кнопку 'Оформить заказ'
        - tech: Отправилась цель 'open-check-out-form-from-cart'
        - do: В поле 'ФИО' ввести 'Иванов Павел Васильевич'
        - do: В поле 'Телефон' ввести '+7 800 800 80 80'
        - do: В поле 'E-mail' ввести 'call@example.ru'
        - do: В поле 'Адрес доставки' ввести 'Адрес доставки'
        - do: Нажать кнопку 'Отправить'
        - tech: Отправилась цель 'send-check-out-form-from-cart', payment=online
        - do: Дождаться появления сообщения об ошибке
        - tech: Отправилась цель 'send-check-out-form-from-cart', payment=online, error=UNKNOWN

      Оформление заказа, изменение данных в форме:
        - do: Открыть страницу https://yandex.ru/turbo/ymturbo.t-dir.com/n/yandexturbocart/
        - do: Нажать кнопку 'Оформить заказ'
        - do: Поставить фокус в поле 'ФИО'
        - tech: Отправилась цель 'check-out-form-focus-field-name'
        - do: Поставить фокус в поле 'Телефон'
        - tech: Отправилась цель 'check-out-form-focus-field-customer_phone'
        - do: Поставить фокус в поле 'E-mail'
        - tech: Отправилась цель 'check-out-form-focus-field-customer_email'
        - do: Изменить "Способ доставки" на "Почтой, 500Р"
        - tech: Отправилась цель 'check-out-form-change-field-delivery'
        - do: Поставить фокус в поля 'Адресс дотавки'
        - tech: Отправилась цель 'user-addresses-form-focus-field-locality'
        - tech: Отправилась цель 'user-addresses-form-focus-field-street'
        - tech: Отправилась цель 'user-addresses-form-focus-field-building'
        - do: Изменить "Способ оплаты" на "Наличными при получении"
        - tech: Отправилась цель 'check-out-form-change-field-payment_method'

      Оформление заказа, Кнопка "Оформить заказ" попала в видимую область:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocart/
        - do: Нажать кнопку 'Оформить заказ'
        - do: Пролистать до кнопки  "Оплатить" чтобы она попала в область видимости
        - tech: Отправилась цель 'check-out-form-submit-button-in-viewport'

      Оформление заказа, Сработала валидация:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocart/
        - do: Нажать кнопку 'Оформить заказ'
        - do: Нажать на кнопку "Оплатить" оставив поля пустыми чтобы сработала валидация
        - tech: Отправилась цель 'check-out-form-validation-error'

      Оформление заказа, Возврат в корзину по хлебной крошке:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocart/
        - do: Нажать кнопку 'Оформить заказ'
        - do: Нажать на хлебную крошку "Корзина"
        - tech: Отправилась цель 'check-out-form-back-to-cart'

      Оформление заказа, Сработало автозаполнение с Blackbox:
        - do: залогиниться на yandex.ru
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocart/
        - do: Нажать кнопку 'Оформить заказ'
        - assert: |
            осуществился переход к оформлению заказа
            в форме есть аватарка с именем пользователя
        - tech: Отправилась цель 'check-out-form-load-data-from-storage'

      Отправляются параметры визита после загруки данных:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/?morda=1
        - do: Нажать на 'Корзина' в навигационной панели
        - tech: Отправился хит 'http://spideradio.github.io'
        - tech: Отправились параметры визита ecom_cart=1

    Страница товара:
      Показ страницы:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/s/?product_id=107&pcgi=rnd%3Dc7hj4fr
        - tech: Отправился хит 'https://spideradio.github.io/?rnd=c7hj4fr'

      Добавление и переход в корзину:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/s/?product_id=107&pcgi=rnd%3Dc7hj4fr
        - do: Нажать кнопку 'Добавить в корзину'
        - tech: Отправилась цель 'add-to-cart'
        - do: Дождаться изменения надписи на 'Перейти в корзину'
        - do: Нажать кнопку 'Перейти в корзину'
        - tech: Отправилась цель 'open-cart-from-product'
        - tech: Отправился хит 'http://spideradio.github.io/', ecom_cart=1

      Быстрый заказ:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/s/?product_id=107&pcgi=rnd%3Dc7hj4fr
        - do: Нажать кнопку 'Быстрый заказ'
        - tech: Отправилась цель 'open-check-out-form'
        - do: В поле 'ФИО' ввести 'Иванов Павел Васильевич'
        - do: В поле 'Телефон' ввести '+7 800 800 80 80'
        - do: В поле 'E-mail' ввести 'call@example.ru'
        - do: В поле 'Адрес доставки' ввести 'Адрес доставки'
        - do: Нажать кнопку 'Отправить'
        - tech: Отправилась цель 'send-check-out-form', payment=cash
        - do: Дождаться появления сообщения об успешном заказе
        - tech: Отправилась цель 'check-out-form-success', payment=cash
        - tech: для незалогиненного пользователя отправилась цель 'typ-registration'

      Быстрый заказ, альбомная ориентация:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/s/rnd/2lum7hf3&product_id=202
        - do: Нажать кнопку 'Быстрый заказ'
        - do: Перевести телефон в альбомную ориентацию
        - do: В поле 'ФИО' ввести 'Иванов Павел Васильевич'
        - do: В поле 'Телефон' ввести '+7 800 800 80 80'
        - do: В поле 'E-mail' ввести 'call@example.ru'
        - do: В поле 'Адрес доставки' ввести 'Адрес доставки'
        - do: Нажать кнопку 'Отправить'
        - tech: Отправилась цель 'send-check-out-form', payment=cash, orientation=landscape

      Клик на бейдж проверено маркетом:
        - params:
            exp_flags:
              - turbo-app-tested-by-market=1
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/s/rnd/2lum7hf3
        - do: Нажать кнопку 'Магазин проверен Яндекс.Маркетом'
        - tech: Отправилась цель 'click-market-check-link', page=ProductScreen

      Отправляются параметры визита после загруки данных:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/?morda=1
        - do: Открыть первый товар из блока 'Популярные товары'
        - tech: Отправился хит 'http://spideradio.github.io/rnd/806kb675j1h'
        - tech: Отправились параметры визита ecom_one_click_buy=1, ecom_product_card=1

    Страница фильтров:
      Показ страницы:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/?page_type=filter
        - tech: Отправился хит 'http://spideradio.github.io'

      Применение фильтров:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/?page_type=filter
        - do: Нажать кнопку 'Показать'
        - tech: Отправилась цель 'apply-filters'
        - tech: Отправился хит 'http://spideradio.github.io'

    О магазине:
      Показ страницы:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/about/
        - tech: Отправился хит 'http://spideradio.github.io'

      Клик на бейдж проверено маркетом:
        - params:
            exp_flags:
              - turbo-app-tested-by-market=1
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/about/
        - do: Нажать кнопку 'Магазин проверен Яндекс.Маркетом'
        - tech: Отправилась цель 'click-market-check-link', page=AboutShopScreen

    О магазине (подробности):
      Показ страницы:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/about_detail/
        - tech: Отправился хит 'http://spideradio.github.io'

    Goals:
      Отправляются при клике в BottomBar:
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/about/
        - do: Кликнуть по первой кнопке в BottomBar
        - tech: Отправилась цель navbar-main
        - do: Кликнуть по второй кнопке в BottomBar
        - tech: Отправилась цель navbar-catalog
        - do: Кликнуть по третей кнопке в BottomBar
        - tech: Отправилась цель navbar-cart
        - do: Кликнуть по четвертой кнопке в BottomBar
        - tech: Отправилась цель navbar-about
        - do: Кликнуть по пятой кнопке в BottomBar
        - tech: Отправилась цель navbar-auth

      Отправляется корректная цель при клике в иконку профиля, если пользователь залогинен:
        - tags: no_assessors # Используются патчи
        - do: Открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/about/?patch=setBlackboxData
        - do: Кликнуть по пятой кнопке в BottomBar
        - tech: Отправилась цель navbar-profile

      Отправляются при клике в блок с отзывами:
        - tags: no_assessors # Используются патчи
        - do: перейти по ссылке https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/about/?patch=setShopReviewsData&shopReviews=123%2C4.5
        - assert: на странице есть блок рейтинга магазина
        - do: нажать на блок рейтинга магазина
        - tech: отправилась цель shop-review-button-click

      Отправляются при клике добавлении/удалении товара в избранное:
        - do: залогиниться в Яндексе
        - do: перейти на https://yandex.ru/turbo/spideradio.github.io/s/?product_id=107&pcgi=rnd%3Dc7hj4fr
        - do: Добавить товар в избранное (нажать на сердечко)
        - tech: Отправилась цель save-favorite-from-product
        - do: Удалить товар из избранного (нажать на сердечко)
        - tech: Отправилась цель delete-favorite-from-product

      Отправляются при добавлении/удалении в избранное в корзине:
        - do: залогиниться в Яндексе
        - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocart/
        - do: добавить товар в избранное (нажать на сердечко)
        - tech: отправилась цель save-favorite-from-cart
        - do: удалить товар из избранного (нажать на сердечко)
        - tech: отправилась цель delete-favorite-from-cart

      Отправляются при добавлении/удалении в избранное из листинга:
        - do: залогиниться в Яндексе
        - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/?category_id=9
        - do: добавить товар в избранное (нажать на сердечко)
        - tech: отправилась цель save-favorite-from-item
        - do: удалить товар из избранного (нажать на сердечко)
        - tech: отправилась цель delete-favorite-from-item

      Отправляется при смене ориентации:
        - do: повернуть телефон в портретный режим
        - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/
        - tech: отправилась цель init-screen-orientation, portrait=1
        - do: повернуть телефон в горизонтальный режим
        - tech: отправилась цель change-screen-orientation, landscape=1
        - do: повернуть телефон в портретный режим
        - tech: отправилась цель change-screen-orientation, portrait=1

      Под флагом turbo-app-bottombar:
        params:
          exp_flags:
            - turbo-app-bottombar=1

        Отправляются при клике в BottomBar:
          - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/
          - do: Кликнуть по кнопке "Каталог" в BottomBar
          - tech: Отправилась цель navbar-catalog
          - do: Кликнуть по кнопке "Избранное" в BottomBar
          - tech: Отправилась цель navbar-favorites-auth
          - do: Кликнуть по кнопке "Корзина" в BottomBar
          - tech: Отправилась цель navbar-cart
          - do: Кликнуть по кнопке "Магазин" в BottomBar
          - tech: Отправилась цель navbar-about

        Отправляется при клике в избранное для залогина:
          - do: залогиниться в Яндексе
          - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/
          - do: Кликнуть по кнопке "Избранное" в BottomBar
          - tech: Отправилась цель navbar-favorites

        Отправляется при клике в профиль в шапке для залогина:
          - do: залогиниться в Яндексе
          - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/
          - do: Кликнуть по иконке профиля в шапке
          - tech: Отправилась цель open-profile-from-header

        Отправляется при клике в профиль в шапке для незалогина:
          - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/
          - do: Кликнуть по иконке профиля в шапке
          - tech: Отправилась цель auth-from-header

    Параметр визита для показа рейтинга/отзывов на товар:
      Отправляется с главной страницы, если в карусели есть товары с рейтингом:
        - do: открыть страницу https://yandex.ru/turbo/super01.ru/n/yandexturbocatalog/main/
        - do: кликнуть по кнопке "Главная" в BottomBar
        - tech: отправился параметр визита "shown-product-review-feat"

      Не отправляется с главной страницы, если в карусели нет товаров с рейтингом:
        - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocart/
        - do: кликнуть по кнопке "Главная" в BottomBar
        - tech: параметр визита "shown-product-review-feat" не отправлися

      Отправляется с листинга, если есть товары с рейтингом:
        - do: открыть страницу https://yandex.ru/turbo/super01.ru/n/yandexturbocatalog/main/
        - do: кликнуть по кнопке "Каталог" в BottomBar
        - tech: отправился параметр визита "shown-product-review-feat"

      Не отправляется с листинга, если нет товаров с рейтингом:
        - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocart/
        - do: кликнуть по кнопке "Каталог" в BottomBar
        - tech: параметр визита "shown-product-review-feat" не отправлися

      Отправляется с карточки товара, если есть рейтинг и отзывы:
        - do: открыть страницу https://yandex.ru/turbo/bealab.ru/s/wula-nailsoul-gel-lak-10ml-ton-368/?product_id=5335
        - tech: отправился параметр визита "shown-product-review-feat"

      Не отправляется с карточки товара, если нет рейтинга и отзывов:
        - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/
        - do: кликнуть на первый товар в карусели "Популярные товары"
        - tech: параметр визита "shown-product-review-feat" не отправлися

files:
    - __tests__/metrika@phone.hermione.js

tlds: ru
