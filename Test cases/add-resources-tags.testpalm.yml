feature: Теги ресурсов
type: Страница ресурсов сервиса

aliases:
  - &openFormForTagCreation
      - do: открыть страницу с ресурсами сервиса "autotest-add-tags-for-resources" (/services/autotest-add-tags-for-resources/resources/?view=consuming&layout=table)
      - screenshot: в правой части есть блок с фильтрами, внутри которого есть "Теги ресурсов" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-03%2019-02-00.png]
      - do: кликнуть на надпись "добавить" в блоке "Теги ресурсов"
      - screenshot: появился попап с формой "Добавить тег" для создания нового тега [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-03%2019-09-58.png]

specs:
  beforeEach:
    - tech: залогиниться под пользователем robot-abc-001
    - do: открыть страницу сервиса "autotest-add-tags-for-resources" (/services/autotest-add-tags-for-resources)
    - do: (PREPARE) кликнуть на иконку карандашика рядом с надписью "Управляющие" 
    - screenshot: (PREPARE) карандашик рядом с надписью "Управляющие" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-03%2019-03-50.png]
    - do: (PREPARE) в модалке "Редактирование управляющих" в поле "Добавить сотрудника" ввести свои имя и фамилию 
    - do: (PREPARE) под полем появился выпадающий список вариантов 
    - do: (PREPARE) выбрать в выпадающем списке себя 
    - assert: (PREPARE) в блоке "Управляющие" появился выбранный сотрудник 
    - do: (PREPARE) кликнуть на кнопку "Сохранить"

  Положительные:
    1. Добавление, изменение и удаление нового тега:
      - *openFormForTagCreation
      - do: ввести в попапе в блоке "Название" в поле "На русском" название ресурса - "Новый тестовый тег"
      - do: ввести в попапе в блоке "Название" в поле "На английском" название ресурса - "New test tag"
      - do: ввести в поле "Slug" значение "new_test-tag-1"
      - do: кликнуть на кнопку "Сохранить"
      - screenshot: в списке тегов ресурсов появился тег "Новый тестовый тег", рядом с ним есть иконки карандаша и урны [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-03%2019-22-29.png]
      - do: кликнуть на иконку карандаша
      - screenshot: появился попап "Редактировать тег", в котором заполнены названия на русском и английском значениями "Новый тестовый тег" и "New test tag" соответственно, поле "Slug" заполнено значением "new_test-tag-1" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-11%2014-00-45.png]
      - do: изменить в попапе название на русском с "Новый тестовый тег" на "Изменённый тестовый тег"
      - do: кликнуть на кнопку "-" (прочерк) под заголовком "Категория"
      - assert: появился список с вариантами "Использование", "Другое", "Окружение"
      - do: кликнуть на вариант "Другое"
      - assert: вариант "Другое" выбрался, написан на кнопке вместо прочерка
      - do: ввести в блоке "Описание" в поле "На русском" значение "тестовое **описание** тестового тега ABCASSESSORS-1"
      - do: ввести в блоке "Описание" в поле "На английском" значение "test"
      - screenshot: внешний вид формы отредактированного ресурса [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-03%2019-41-10.png]
      - do: кликнуть на кнопку "Сохранить"
      - assert: в списке тегов ресурсов есть тег "Изменённый тестовый тег"
      - do: кликнуть на значок вопросика рядом с тегом "Изменённый тестовый тег"
      - screenshot: появился попап с подсказками про тег; в попапе есть название тега, категория со значением "Другое" и описание тега [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-03%2019-43-05.png]
      - do: кликнуть на иконку корзины рядом с "Изменённый тестовый тег"
      - screenshot: появился попап с вопросом "Вы уверены, что хотите удалить этот тег?" и кнопками "Нет" и "Да" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-03%2019-43-46.png]
      - do: кликнуть в попапе на кнопку "Да"
      - screenshot: тег "Изменённый тестовый тег" пропал из блока "Теги ресурсов" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-03%2019-33-19.png]

    2. Поля "Название" и "Slug" обязательны для создания нового тега:
      - *openFormForTagCreation
      - do: кликнуть на кнопку "Сохранить" в попапе с формой создания нового тега
      - screenshot: появились ошибки валидации [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-11%2014-02-44.png]

files: []

priority: normal

tags:
  - reviewed
