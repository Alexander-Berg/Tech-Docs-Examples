feature: Страница "Сейчас в СМИ"

specs-integration:
  должна открываться:
      - do: перейти по ссылке https://yandex.ru/news/top
      - assert: открылась страница Сейчас в СМИ
      - assert: страница содержит таблицу с наиболее популярными сюжетами

  должна показывать название региона в региональном топе:
        - do: перейти по ссылке https://yandex.ru/news/top/region/moscow
        - assert: открылась страница Сейчас в СМИ
        - assert: в заголовке таблицы указано, что данный топ для Москвы

specs:
  открывается из футера:
    - tags:
      - smoke
      - backend_news
      - brow_only
      - smoke_zen
    - do: перейти в любую рубрику, кроме региональной, лучше - в рубрику Коронавирус
    - assert: страница обновляется, отображаются новости выбранной рубрики
    - do: доскроллить до футера
    - assert: отображается футер
    - do: тапнуть по 'Сейчас в СМИ Статистика'
    - assert: отображается страница 'Сейчас в СМИ' в новой вкладке

  для региона открывается по прямой ссылке:
    - tags:
      - smoke
      - backend_news
      - smoke_zen
    - do:  перейти на региональную страницу 'Сейчас в СМИ' по прямой ссылке https://yandex.ru/news/top/region/Moscow
    - assert: |
        отображается страница 'Сейчас в СМИ' для Москвы,
        заголовок страницы - Сейчас в СМИ: Москва. Статистика /дата, время/
    - do: поскроллить страницу вниз
    - assert: |
        страница содержит 15 разных новостей,
        все новости относятся к московскому региону,
        Обратите внимание! Что в региональные новости могут попасть статьи из других рубрик, которые тоже будут иметь отношение к региональным новостям, но большинство сюжетов всё равно будет относиться к региональной рубрике!

  скроллится по горизонтали для отображения данных статистики для 15 новостей в портретном режиме [manual]:
    - tags:
      - smoke
      - backend_news
    - do: перейти на страницу 'Сейчас в СМИ' по прямой ссылке https://yandex.ru/news/top
    - assert: |
        отображается страница 'Сейчас в СМИ',
        заголовок страницы - Сейчас в СМИ. Статистика /дата, время/
    - do: поскроллить страницу вниз
    - assert: |
        страница содержит 15 разных новостей,
        некоторые новости могут содержать связанные сюжеты,
        среди 15 новостей нет повторяющихся
    - do: поскроллить страницу по горизонтали
    - assert: |
        строки таблицы статистики с данными и заголовок таблицы скроллятся по горизонтали,
        для каждой новости есть статистика - в столбцах заголовки таблицы со статистикой - Сообщений за час, Документов в сюжете, Сюжетов в теме, Документов в теме, Просмотры, Интерес, Вес сюжета и Рубрика(в Рубрике может быть прочерк),
        внешний вид https://jing.yandex-team.ru/files/nightsonne/2020-11-06_15-55-26.png
    - do: тапнуть по заголовку 'Связанные сюжеты' под любой новостью и поскроллить страницу по горизонтали
    - assert: |
        разворачивается список связанных сюжетов,
        галочка в заголовке 'Связанные сюжеты' переворачивается вверх,
        для каждого связанного сюжета есть статистика, кроме столбцов 'Сюжетов в теме', 'Документов в теме', 'Просмотры' (если отсутствуют просмотры, в связанных на месте значения будет прочерк),
        внешний вид https://jing.yandex-team.ru/files/nightsonne/2020-11-06_16-03-02.png

  отображает данные статистики для 15 новостей в ландшафтном режиме [manual]:
    - tags:
      - smoke_zen
    - do: перейти на страницу 'Сейчас в СМИ' по прямой ссылке https://yandex.ru/news/top
    - assert: отображается страница 'Сейчас в СМИ'
    - do: изменить ориентацию устройства на ландшафтную
    - do: поскроллить страницу вниз
    - assert: |
        страница содержит 15 разных новостей,
        некоторые новости могут содержать связанные сюжеты,
        среди 15 новостей нет повторяющихся
    - do: поскроллить страницу по горизонтали
    - assert: |
        строки таблицы статистики с данными и заголовок таблицы скроллятся по горизонтали,
        для каждой новости есть статистика - в столбцах заголовки таблицы со статистикой - Сообщений за час, Документов в сюжете, Сюжетов в теме, Документов в теме, Просмотры, Интерес, Вес сюжета и Рубрика(в Рубрике может быть прочерк),
        верстка страницы не ломается и отображается корректно, элементы таблицы не наезжают друг на друга
    - do: тапнуть по заголовку 'Связанные сюжеты' под любой новостью и поскроллить страницу по горизонтали
    - assert: |
        разворачивается список связанных сюжетов,
        галочка в заголовке 'Связанные сюжеты' переворачивается вверх,
        для каждого связанного сюжета есть статистика, кроме столбцов 'Сюжетов в теме', 'Документов в теме', 'Просмотры',
        верстка страницы не ломается и отображается корректно, элементы таблицы не наезжают друг на друга

  позволяет перейти в сюжет:
    - tags:
      - smoke
      - backend_news
    - do: перейти на страницу 'Сейчас в СМИ' по прямой ссылке https://yandex.ru/news/top
    - assert: |
        отображается страница 'Сейчас в СМИ',
        заголовок страницы - Сейчас в СМИ. Статистика /дата, время/
    - do: поскроллить страницу, выбрать и запомнить заголовок сюжета, тапнуть по заголовку сюжета
    - assert: |
        в той же вкладке открывается страница соответствующего сюжета,
        заголовки на странице статистики и на странице сюжета совпадают
    - do: вернуться на страницу 'Сейчас в СМИ' с помощью браузерной кнопки Назад
    - do: тапнуть по заголовку 'Связанные сюжеты' под любой новостью, выбрать сюжет из связанных и запомнить заголовок сюжета
    - do: тапнуть по заголовку выбранного связанного сюжета сюжета
    - assert: |
        в той же вкладке открывается страница соответствующего сюжета,
        заголовки на странице статистики и на странице сюжета совпадают

  позволяет развернуть полное описание функциональности сервиса:
    - do: перейти на страницу 'Сейчас в СМИ' по прямой ссылке https://yandex.ru/news/top
    - assert: отображается страница 'Сейчас в СМИ'
    - do: проскроллить страницу вниз до футера
    - assert: |
        над футером серым шрифтом отображается описание функциональности сервиса Яндекс.Новости,
        полный текст скрыт за кнопкой 'Ещё' с галочкой
    - do: тап по кнопке 'Ещё'
    - assert: |
        разворачивается полный текст описания функциональности сервиса,
        текст не наезжает на футер
    - do: перевернуть устройство в ландшафтный режим
    - assert: |
        полный текст описания растягивается на всю ширину страницы,
        внешний вид https://jing.yandex-team.ru/files/nightsonne/2020-11-06_16-09-13.png
    - do: тапнуть на фразу 'как строится статистика сюжета'
    - assert: в новой вкладке открывается страница https://yandex.ru/support/news/plot-statistics.html

  по клику на интерес показывает тултип с источниками с наибольшим количеством визитов:
    - do: перейти на страницу 'Сейчас в СМИ' по прямой ссылке https://yandex.ru/news/top
    - do: тап по надписи интерес в строке сюжета (может быть высокий, средний или низкий)
    - assert: появился попап со списком источников

files:
  - features/news/top15/top15.phone.hermione.js
  - features/news/top15/top15.phone.hermione.e2e.js

tags:
  - neo
  - top15

manager: mrwhite

qa-engineer: nightsonne

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
