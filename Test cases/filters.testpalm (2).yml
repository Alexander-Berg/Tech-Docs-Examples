feature: Фильтры

specs:
  beforeEach:
    - do: открыть страницу /jobs/vacancies
    - assert: на странице присутствуют фильтры по вакансиям
  Проверка фильтра Локации [manual]:
    - automation: VACANCIES-780
    - assert: |
        присутствует фильтр 'Локации'
        присутствует иконка поиска рядом с названием 'Локации'
        присутствует список городов
        рядом с каждым городом присутствует кол-во вакансий по нему
        рядом с каждым городом присутствует чекбокс
        под списком отображается кнопка 'Показать все'
    - do: нажать на 'Показать все' в фильтре Локации
    - assert: |
        развернулся весь список городов
        появилась кнопка 'Свернуть'
        если у города 0 вакансий, то он недоступен
    - do: пролистнуть список вниз
    - assert: отображаются новые локации
    - do: нажать на доступный чекбокс рядом с новым городом
    - assert: |
        чек-бокс стал активен
        url содержит /?cities=<выбранный город>
        под поисковой строкой появился выбранный город с крестиком
        под поисковой строкой появилась кнопка 'Сбросить'
        вакансии в списке соответстуют фильтру
        первый город в карточках вакансий - город из выбранного ранее в фильтре
    - do: нажать на кнопку поиска рядом с названием 'Локации'
    - assert: |
        название 'Локации' скрылось
        отобразилась поисковая строка 'Введите название локации'
    - do: введите в поле поиска набор символов, не формирующих город
    - screenshot: отобразилось сообщение [https://jing.yandex-team.ru/files/alex-murashev/no_locations_desktop.png]
  Проверка несколько значений в фильтре Локации [manual]:
    - automation: VACANCIES-780
    - do: выбрать 8 или более городов в фильтре 'Локации'
    - assert: |
        url содержит /?cities=<первый выбранный город>&cities=<второй выбранный город>...
        блоки установленных фильтров с крестиками располагаются под строкой поиска
        блоки установленных фильтров не пролистываются
        в конце списка блоков городов присутствует кнопка 'Сбросить'
        вакансии в списке соответстуют фильтрам
        первый город в карточках вакансий - один из городов из выбранных ранее в фильтре
    - do: нажать на кнопку 'Сбросить'
    - assert: |
        отображается изначальный список вакансий
        под поисковой строкой пропали выбранные ранее города
        под поисковой строкой пропала кнопка 'Сбросить'
        url не содержит фильтров
        ранее выбранные чекбоксы перестали быть активными
  Проверка фильтра Направления [manual]:
    - automation: VACANCIES-780
    - do: пролистать фильтры до фильтра 'Направления'
    - assert: |
        присутствует фильтр 'Направления'
        присутствует иконка поиска рядом с названием 'Направления'
        присутствуют разварачиваемые списки профессиональных сфер
    - do: нажать на чекбокс рядом с профессиональной сферой
    - assert: |
        url содержит /?professions=<профессия из выбранной сферы>&professions=<профессия из выбранной сферы>...
        кол-во вакансий в других фильтрах изменилось
        под поисковой строкой появились профессии с крестиками из выбранной в фильтре сферы
        под поисковой строкой появилась кнопка 'Сбросить'
        вакансии в списке соответстуют фильтру
    - do: нажать на выбранный ранее чекбокс профессиональной сферы
    - assert: |
        под поисковой строкой пропали все профессии
        под поисковой строкой пропала кнопка 'Сбросить'
        отображается изначальный список вакансий
        url не содержит фильтров
    - do: нажать на стрелочку в профессиональной сфере
    - assert: |
        развернулся список профессий для этой сферы
        рядом с каждой профессией есть кол-во вакансий по ней
        если у всех профессий сферы 0 вакансий, то чекбокс профессиональной сферы недоступен
    - do: нажать на чекбокс рядом с названием профессии
    - assert: |
        чекбокс стал активен
        чекбокс профессиональной сферы так же стал активен
        под поисковой строкой появилась выбранная профессия
        под поисковой строкой появилась кнопка 'Сбросить'
        на странице отображаются вакансии для выбранной профессии
    - do: нажать на чекбокс у активной профессиональной сферы
    - assert: |
        чекбокс у профессии не активен
        чекбокс у проф. сферы не активен
        отображается изначальный список вакансий
    - do: нажать на стрелку рядом с проф. сферой
    - assert: список профессий свернулся
    - do: нажать на кнопку поиска рядом с названием 'Направления'
    - assert: отобразилась поисковая строка 'Введите название направления'
    - do: введите в поле поиска набор символов, не формирующих профессию
    - screenshot: отобразилось сообщение [https://jing.yandex-team.ru/files/alex-murashev/no_professions_desktop.png]
  Проверка фильтра Сервисы [manual]:
    - automation: VACANCIES-780
    - do: пролистать фильтры до фильтра 'Сервисы'
    - assert: |
        присутствует фильтр 'Сервисы'
        присутствует иконка поиска рядом с названием 'Сервисы'
        присутствует список сервисов
        рядом с каждым сервисом присутствует кол-во вакансий по нему
        под списком отображается кнопка 'Показать все'
    - do: нажать на кнопку 'Показать все'
    - assert: |
        количество отображаемых сервисов в фильтре изменилось
        отобразилась кнопка для сворачивания списка - 'Свернуть'
    - do: нажать на кнопку 'Свернуть'
    - assert: |
        отображается первоначальный список сервисов
        отображается текст 'Показать все'
    - do: нажать чекбокс рядом с названием сервиса
    - assert: |
        url содержит /?services=<выбранный сервис>
        вакансии в списке соответстуют фильтру
        под поисковой строкой появился выбранный сервис с крестиком
        под поисковой строкой появилась кнопка 'Сбросить'
        в других фильтрах изменилось кол-во найденных вакансий по ним
    - do: нажать на кнопку поиска рядом с названием 'Сервисы'
    - assert: отобразилась поисковая строка 'Введите название сервиса'
    - do: введите в поле поиска набор символов, не формирующих сервис
    - screenshot: отобразилось сообщение [https://jing.yandex-team.ru/files/alex-murashev/no_services_desktop.png]
  Проверка фильтра Технологии/Навыки [manual]:
    - automation: VACANCIES-780
    - do: пролистать фильтры до фильтра 'Технологии/Навыки'
    - assert: |
        присутствует фильтр 'Технологии/Навыки'
        присутствует иконка поиска рядом с названием 'Технологии/Навыки'
        присутствует список навыков/технологий
        рядом с каждым навыком/технологией присутствует кол-во вакансий по нему
        под списком отображается кнопка 'Показать все'
    - do: нажать на иконку поиска рядом с 'Технологии/Навыки'
    - assert: отобразилась поисковая строка 'Введите название технологии'
    - do: ввести имеющуюся технологию в поле поиска
    - assert: отобразился навык/технология, соответствующий поисковому запросу
    - do: нажать на чекбокс рядом с найденным навыком/технологией
    - assert: |
        вакансии соответствуют установленному фильтру
        первая технология в карточках вакансий - выбранная технология
        ссылка содержит ?skills=<id выбранной технологии>
        под поисковой строкой появился выбранный технология/навык с крестиком
        под поисковой строкой появилась кнопка 'Сбросить'
    - do: очистить поле поиска
    - do: введите в поле поиска набор символов, не формирующих технологию/навык
    - screenshot: отобразилось сообщение [https://jing.yandex-team.ru/files/alex-murashev/no_technologies_desktop.png]
  Проверка фильтра Уровень [manual]:
    - automation: VACANCIES-780
    - do: пролистать фильтры до фильтра 'Уровень'
    - assert: |
        присутствует фильтр 'Уровень'
        присутствует список уровней
        рядом с каждым уровнем присутствует кол-во вакансий по нему
    - do: нажать на фильтры 'Стажер', 'Младший', 'Специалист'
    - assert: |
        ссылка содержит ?pro_levels=1&pro_levels=2&pro_levels=3
        вакансии соответствуют установленным фильтрам
        под поисковой строкой появились выбранные уровни
        под поисковой строкой появилась кнопка 'Сбросить'
    - do: нажать на крестик у каждого блока уровня под поисковой строкой
    - assert: |
        в url отсутствуют фильтры
        отображается изначальчный список вакансий
        под поисковой строкой пропали уровни с крестиком
        под поисковой строкой пропала кнопка 'Сбросить'
        чекбоксы в фильтре 'Уровень' не активны
  Предзаполнение фильтров по ссылке [manual]:
    - automation: VACANCIES-780
    - do: открыть страницу /jobs/vacancies?cities=moscow&professions=backend-developer&services=yandex&skills=62&pro_levels=4
    - assert: |
        в фильтре 'Локации' активен чекбокс у города 'Москва'
        в фильтре 'Направления' активен чекбокс у направления 'Разработка'
        в фильтре 'Сервисы' активен чекбокс у сервиса 'Общие сервисы Яндекса'
        в фильтре 'Технологии/Наввыки' активен чекбокс у 'С++'
        в фильтре 'Уровень' активен чекбокс у 'Старший'
        под поисковой строкой присутствуют блоки выбранных фильтров с крестиками
        под поисковом строкой присутствует кнопка 'Сбросить'
        вакансии соответствуют установленным фильтрам
    - do: нажать на кнопку 'Сбросить' под поисковой строкой
    - assert: |
        в url отсутствуют фильтры
        отображается изначальчный список вакансий
        блоки установленных фильтров отсутствуют
        чекбоксы не активны в фильтрах
  Подгрузка с фильтрами [manual]:
    - automation: VACANCIES-780
    - do: открыть страницу /jobs/vacancies
    - do: установить один или более фильтров, чтобы в счетчике вакансий указывалось значение >20
    - do: начать листать вниз
    - assert: загружаемые вакансии соответствуют установленым фильтрам

platform:
  - desktop

tlds:
  - ru
  - by
  - ua

priority: normal

browsers:
  - yandex-browser-desktop
  - chrome-browser-desktop
  - firefox-desktop
  - safari-desktop
  - opera-desktop
  - edge-desktop
  - msie-desktop
