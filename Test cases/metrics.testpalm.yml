feature: Метрики

description: Проверка основных АБТ-метрик (https://wiki.yandex-team.ru/jandekspoisk/kachestvopoiska/abt/factors/)

specs:
  Один запрос:
    - do: получить выдачу по запросу "котики"
    - tech: значение метрики "daily.total_session_count" == 1
    - tech: значение метрики "web.total_request_count" == 1
    - tech: значение метрики "web.total_click_count" == 0
    - tech: значение метрики "web.abandonment" == 100
    - tech: значение метрики "web.total_all_click" == 0
  Несколько запросов от одного пользователя:
    - do: получить выдачу по запросу 'котики'
    - do: под тем же пользователем получить выдачу по запросу 'котики няшные'
    - do: под тем же пользователем получить выдачу по запросу 'котики няшные фото'
    - tech: daily.total_session_count = 1
    - tech: web.total_request_count = 3
    - tech: web.abandonment = 100
  Один запрос и клик без нового запроса:
    - do: получить выдачу по запросу "тест"
    - do: кликнуть по тайтлу первого органического сниппета
    - tech: значение метрики "web.total_request_count" == 1
    - tech: значение метрики "web.total_click_count" == 1
    - tech: значение метрики "web.abandonment" == 0
    - tech: значение метрики "web.tech_part_misc_click" == 0
    - tech: значение метрики "web.total_all_click" == 1
    - tech: значение метрики "web.total_title_click" == 1
    - tech: значение метрики "web.web_ctr1" == 1
  Один запрос и клик в связанные запросы:
    - do: получить выдачу по запросу 'котики'
    - tech: есть хотя бы один пункт в связанных запросах (блок "Вместе с ... также ищут")
    - do: кликнуть в первый пункт связанных запросов
    - tech: web.total_request_count = 2
    - tech: web.total_click_count = 0
    - tech: web.abandonment = 100
    - tech: web.total_all_click = 1
    - tech: web.tech_part_misc_click = 100
  Один запрос и клик, ведущий на сервис Яндекса:
    - do: получить выдачу по запросу "котики"
    - do: кликнуть по тайтлу колдунщика картинок
    - tech: значение метрики "web.total_request_count" == 1
    - tech: значение метрики "web.total_click_count" == 1
    - tech: значение метрики "web.abandonment" == 0
    - tech: значение метрики "web.total_title_click" == 1
    - tech: значение метрики "web.total_all_click" == 1
    - tech: значение метрики "web.tech_part_misc_click" == 0
  Один запрос и переход на морду:
    - do: получить выдачу по запросу "котики"
    - do: кликнуть по логотипу
    - tech: значение метрики "web.total_request_count" == 1
    - tech: значение метрики "web.total_click_count" == 1
    - tech: значение метрики "web.abandonment" == 100
    - tech: значение метрики "web.total_title_click" == 1
    - tech: значение метрики "web.total_all_click" == 1
    - tech: значение метрики "web.tech_part_misc_click" == 100
  Один запрос и несколько кликов по разным результатам органики:
    - do: получить выдачу по запросу "тест"
    - do: кликнуть по тайтлу первого органического сниппета
    - do: кликнуть по тайтлу второго органического сниппета
    - do: кликнуть по тайтлу тертьего органического сниппета
    - tech: значение метрики "web.total_click_count" == 3
    - tech: значение метрики "web.total_all_click" == 3
    - tech: значение метрики "web.total_request_count" == 1
    - tech: значение метрики "web.total_title_click" == 3
    - tech: значение метрики "web.web_ctr1" == 300
  Один запрос и несколько кликов по одному результату:
    - do: получить выдачу по запросу "тест"
    - do: кликнуть 3 раза по тайтлу первого органического сниппета
    - tech: значение метрики "web.total_click_count" == 3
    - tech: значение метрики "web.total_all_click" == 3
    - tech: значение метрики "web.total_request_count" == 1
    - tech: значение метрики "web.total_title_click" == 3
    - tech: значение метрики "web.web_ctr1" == 300
  Один запрос и клик в тумбу колдунщика:
    - do: получить выдачу по запросу "котики"
    - do: кликнуть по первой тумбе колдунщика картинок
    - tech: значение метрики "web.total_click_count" == 1
    - tech: значение метрики "web.total_title_click" == 1
    - tech: значение метрики "web.images_total_click_count" == 1
    - tech: значение метрики "web.images_ctr" == 100
  Один запрос и клик по рекламному результату над выдачей (спецразмещение):
    - do: получить выдачу по запросу "пластиковые окна"
    - do: кликнуть по тайтлу первого сниппета рекламы
    - tech: значение метрики "web.total_click_count" == 0
    - tech: значение метрики "web.abandonment" == 100
  Один запрос и клик по рекламному результату под выдачей (гарантия):
    - do: получить выдачу по запросу "пластиковые окна"
    - do: кликнуть по тайтлу первого сниппета рекламы после органики
    - tech: значение метрики "web.total_click_count" == 0

files:
  - features/common/metrics/metrics.hermione.js

v-team: Architecture

tags:
  - no_assessors
  - skip_e2e_check

tlds: none
