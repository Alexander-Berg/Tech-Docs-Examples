feature: card

specs:
  Внешний вид базовой карточки Спорта:
    - do: открыть страницу "https://yandex.ru/turbo?stub=card/default.json"
    - assert: должны быть видны разные вариации блока заголовка
    - screenshot: внешний вид соответствует скриншоту [text-card]
    - screenshot: внешний вид соответствует скриншоту [picture-card]
    - screenshot: внешний вид соответствует скриншоту [video-card]
    - screenshot: внешний вид нижней части второй карточки соответствует скриншоту [footer-filled]

  с большим фото позволяет перейти на страницу сюжета [manual]:
    - automation: NERPA-8437
    - tags: backend_sport
    - do: открыть сервис Я.Спорт на странице любой рубрики (Кроме Главное)
    - do: проскроллить рубрику, найти несколько карточек с большим фото
    - assert: |
        некоторые карточки содержат большое фото под заголовком и аннотацией,
        внизу расположены метка издательства и время публикации, иконка добавления в коллекции, иконка комментатора, иконка лайка, счетчики лайков и комментариев (счетчики со значением 0 не отображаются),
        длинные заголовок и аннотация обрезаются троеточием,
        аннотация не содержит более 3х строк,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-06-06_13-12-59.png
    - do: тапнуть по метке издательства и времени публикации
    - assert: |
        (для браузера) происходит переход на страницу сюжета в той же вкладке,
        (для ПП) происходит переход на страницу сюжета в новой вкладке,
        сюжет соответствует карточке
    - do: вернуться назад любым способом
    - do: тапнуть по заголовку карточки с большим фото
    - assert: |
        (для браузера) происходит переход на страницу сюжета в той же вкладке,
        (для ПП) происходит переход на страницу сюжета в новой вкладке,
        сюжет соответствует карточке
    - do: вернуться назад любым способом
    - assert: рубрика проскроллена к карточке, с которой был переход на страницу сюжета
    - do: тапнуть по аннотации карточки с большим фото
    - assert: |
        (для браузера) происходит переход на страницу сюжета в той же вкладке,
        (для ПП) происходит переход на страницу сюжета в новой вкладке,
        сюжет соответствует карточке
    - do: вернуться назад любым способом
    - assert: рубрика проскроллена к карточке, с которой был переход на страницу сюжета
    - do: тапнуть по большому фото в карточке
    - assert: |
        (для браузера) происходит переход на страницу сюжета в той же вкладке,
        (для ПП) происходит переход на страницу сюжета в новой вкладке,
        сюжет соответствует карточке

  без фото позволяет перейти на страницу сюжета [manual]:
    - automation: NERPA-8437
    - tags: backend_sport
    - do: открыть сервис Я.Спорт на странице любой рубрики (Кроме Главного)
    - do: проскроллить рубрику , найти несколько карточек без фото
    - assert: |
        внизу расположены метка издательства и время публикации, иконка добавления в коллекции, иконка комментатора, иконка лайка, счетчики лайков и комментариев (счетчики со значением 0 не отображаются),
        длинные заголовок и аннотация обрезаются троеточием,
        аннотация не содержит более 5ти строк,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-06-06_13-21-59.png
    - do: тапнуть по метке издательства и времени публикации
    - assert: |
        (для браузера) происходит переход на страницу сюжета в той же вкладке,
        (для ПП) происходит переход на страницу сюжета в новой вкладке,
        сюжет соответствует карточке
    - do: вернуться назад любым способом
    - do: тапнуть по заголовку карточки без фото
    - assert: |
        (для браузера) происходит переход на страницу сюжета в той же вкладке,
        (для ПП) происходит переход на страницу сюжета в новой вкладке,
        сюжет соответствует карточке
    - do: вернуться назад любым способом
    - do: тапнуть по аннотации карточки без фото
    - assert: |
        (для браузера) происходит переход на страницу сюжета в той же вкладке,
        (для ПП) происходит переход на страницу сюжета в новой вкладке,
        сюжет соответствует карточке

  содержит флажок избранного, который:
    добавляет карточку в избранное [manual]:
      - automation: NERPA-8437
      - tags: backend_sport
      - do: открыть сервис Я.Спорт на странице любой рубрики в авторизованном состоянии
      - do: найти в ленте любую карточку
      - assert: карточка содержит флажок избранного
      - do: тапнуть по флажку избранного
      - assert: |
          флажок меняет цвет с серого на красный,
          внизу всплывает тултип 'Добавлено в коллекцию Мои ссылки',
      - do: тапнуть по тултипу
      - assert: |
          в отдельной вкладке открывается страница с коллекцией Мои ссылки,
          на странице есть добавленная карточка
      - do: тапнуть по заголовку добавленной карточки на странице коллекций
      - assert: происходит редирект на сюжет
      - do: вернуться назад
      - do: разлогиниться и обновить страницу сервиса Я.Спорт
      - do: тапнуть по флажку избранного
      - assert: |
          флажок меняет цвет с серого на красный,
          внизу всплывает тултип 'Добавлено в коллекцию Мои ссылки'
      - do: тапнуть по тултипу
      - assert: |
          в папке 'Мои ссылки' отсутствует карточка, добавленная под авторизацией,
          в папке 'Мои ссылки' есть карточка, добавленная под незалогином,
          возможно появление поп-апа для авторизации на сервисе Я.Коллекции
      - do: снова авторизоваться тем же пользователем и обновить страницу сервиса Я.Спорт
      - do: тапнуть по флажку избранного у другой карточки
      - assert: |
          флажок меняет цвет с серого на красный,
          внизу всплывает тултип 'Добавлено в коллекцию Мои ссылки',
      - do: тапнуть по тултипу
      - assert: в папке 'Мои ссылки' есть 2 карточки, добавленные под авторизацией и 1 карточка, добавленная под незалогином (последняя иногда отображается после обновления страницы)

    удаляет карточку из избранного в авторизованном состоянии [manual]:
      - automation: NERPA-8437
      - tags: backend_sport
      - do: открыть сервис Я.Спорт на странице любой рубрики в авторизованном состоянии
      - do: найти в ленте любую карточку
      - assert: карточка содержит флажок избранного
      - do: тапнуть по флажку избранного
      - assert: |
          флажок меняет цвет с серого на красный (#e31740),
          внизу всплывает тултип 'Добавлено в коллекцию Мои ссылки',
      - do: тапнуть по тултипу
      - assert: |
          в отдельной вкладке открывается страница с коллекцией Мои ссылки,
          на странице есть добавленная карточка
      - do: вернуться на сервис Я.Спорт, не закрывая вкладку коллекций с коллекцией Мои ссылки (кроме ПП - в ПП вкладка закроется)
      - do: тапнуть по флажку избранного в той же карточке
      - assert: флажок меняет цвет с красного на серый
      - do: (для рана в браузере) вернуться к вкладке коллекций с коллекцией Мои ссылки, обновить вкладку
      - do: (для рана в ПП) тапнуть по флажку избранного в другой карточке, затем по тултипу (откроется страница Мои ссылки)
      - assert: (для рана в браузере) в папке 'Мои ссылки' добавленная ранее карточка удалена
      - assert: (для рана в ПП) в папке 'Мои ссылки' добавленная ранее карточка удалена, присутствует добавленная на текущем шаге карточка

    удаляет карточку из избранного в неавторизованном состоянии [manual]:
      - automation: NERPA-8437
      - tags: backend_sport
      - do: открыть сервис Я.Спорт на странице любой рубрики в неавторизованном состоянии
      - do: найти в ленте любую карточку
      - assert: карточка содержит флажок избранного
      - do: тапнуть по флажку избранного
      - assert: |
          флажок меняет цвет с серого на красный,
          внизу всплывает тултип 'Добавлено в коллекцию Мои ссылки',
      - do: тапнуть по тултипу
      - assert: |
          в отдельной вкладке открывается страница с коллекцией Мои ссылки,
          на странице есть добавленная карточка,
          возможно появление поп-апа для авторизации на сервисе Я.Коллекции
      - do: вернуться назад, не закрывая вкладку коллекций с коллекцией Мои ссылки (кроме ПП - в ПП вкладка закроется)
      - do: тапнуть по флажку избранного в той же карточке
      - assert: флажок меняет цвет с красного на серый
      - do: (для рана в браузере) вернуться к вкладке коллекций с коллекцией Мои ссылки, обновить вкладку
      - do: (для рана в ПП) тапнуть по флажку избранного в другой карточке, затем по тултипу (откроется страница Мои ссылки)
      - assert: (для рана в браузере) в папке 'Мои ссылки' добавленная ранее карточка удалена
      - assert: (для рана в ПП) в папке 'Мои ссылки' добавленная ранее карточка удалена, присутствует добавленная на текущем шаге карточка

  добавляется в избранное и отображается там с соответствующей карточке картинкой [manual]:
    - automation: NERPA-8437 #Кейс неавтоматизируемый т.к. используется 2 сервиса для проверки
    - do: открыть сервис Я.Спорт на странице любой рубрики
    - do: проскроллить рубрику, найти карточку с фотографией
    - assert: в карточке с фотографией есть иконка флажка избранного (добавление в коллекцию)
    - do: запомнить фотографию на карточке и тапнуть по флажку избранного
    - assert: иконка изменила свой цвет на красный  (#e31740),
    - do: тапнуть по тултипу
    - assert: |
        в отдельной вкладке открывается страница с коллекцией Мои ссылки,
        возможно появление поп-апа для авторизации на сервисе Я.Коллекции,
        на странице есть добавленная карточка,
        у карточки есть изображение (фотография на ней может отличаться от фотографии на карточке)

files:
  - platform/components/Card/__tests__/cardSport@phone.hermione.js

v-team: Sport

qa-engineer: nightsonne

manager: skhovaev

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
