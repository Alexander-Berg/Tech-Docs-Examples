feature: Коронавирусный информер

specs:
  позволяет перейти в чат Яндекс.Мессенджер Москва:
    - browsers:
        notFor:
            - win-ie11
    - tags:
        - smoke
        - backend_news
    - do: установить в https://yandex.ru/tune регион Москва
    - do: перейти в рубрику Коронавирус, нажать на первый виджет в информере "Оперштаб Москвы"
    - assert: в новой вкладке открывается страница чата Яндекс Мессенджер "Оперштаб Москвы"
    - do: вернуться на страницу рубрики, проскроллить информер ина второй виджет в информере "Коронавирус в России"
    - assert: в новой вкладке открывается страница чата Яндекс Мессенджер "Коронавирус в России"

  позволяет перейти в чат Яндекс Мессенджер регион [manual]:
    - reasonNotToAuto:
      - Нет возможности сменить регион в автотесте
    - do: в https://yandex.ru/tune выставить местоположение "Камчатка"
    - do: перейти в рубрику Коронавирус в сервисе Новости либо по прямой ссылке https://yandex.ru/news/rubric/koronavirus
    - assert: |
        в рубрике Коронавирус отображается только два виджета в информере ("Коронавирус в России" и "Главное о COVID-19"), виджет с чатом региона отсутствует,
        внешний вид виджетов - https://jing.yandex-team.ru/files/vasekerka/2022-01-19_15-46-39.png,
        Обратите внимание: если ширина экрана меньше 1260px, информеры будут находиться сразу под рубрикатором, это не баг!

  позволяет перейти на страницу-информер в основном поиске:
    - browsers:
        notFor:
            - win-ie11
    - tags:
        - smoke
        - backend_news
        - smoke_zen
    - do: установить в https://yandex.ru/tune регион Москва
    - do: перейти в рубрику Коронавирус
    - do: нажать на последний виджет "Главное о COVID-19"
    - assert: |
        в новой вкладке открывается серповая страница с колдунщиком по ковиду,
        внешний вид - https://jing.yandex-team.ru/files/umansai5/Снимок%20экрана%202022-06-09%20в%2017.12.33.png

  отображается в соответствующей рубрике:
    - tags:
        - smoke
        - backend_news
        - smoke_zen
    - do: открыть страницу https://yandex.ru/news/rubric/koronavirus
    - assert: |
        виджеты отобржаются сбоку на одном уровне с блоками сюжетов,
        блоки виджетов не наезжают на блоки сюжетов,
        текст в виджетах не выходит за пределы блока а обрезается до "троеточия",
        внешний вид соответствует скриншоту https://jing.yandex-team.ru/files/an-smirn0v/shot_201102_183254.png
    - do: изменить разрешение браузера на 1245px или меньше (чтобы проверить, что ширина окна действительно 1245px или меньше, откройте консоль и введите туда 'window.innerWidth' (без кавычек) и нажмите enter. Полученное значение и будет действительная ширина окна)
    - assert: |
        виджеты отобржаются сверху,
        виджеты находятся на одном уровне с блоками сюжетов,
        блоки виджетов не наезжают на блоки сюжетов,
        текст в виджетах не выходит за пределы блока а обрезается до "троеточия",
        внешний вид соответствует скриншоту https://jing.yandex-team.ru/files/an-smirn0v/shot_201102_183337.png

  не отображается в рубрике Политика:
    - tags:
        - smoke
        - backend_news
        - smoke_zen
    - do: открыть страницу https://yandex.ru/news/rubric/politics
    - assert: убедиться, что на странице нет коронавирусного информера

  позволяет перейти в чат Яндекс.Мессенджер (Севастополь) [manual]:
    - browsers:
        notFor:
            - win-ie11
    - tags:
      - rareCase
      - smoke_zen
    - reasonNotToAuto:
      - Нет возможности сменить регион в автотесте
    - do: открыть https://yandex.ru/tune и сменить местоположение на Севастополь (который в Крыму - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-29_14-14-24.png), сохранить изменения
    - do: открыть главную Новостей и перейти в рубрику "Коронавирус"
    - assert: |
        cправа отображаются информеры, внешний вид соответствует скриншоту https://jing.yandex-team.ru/files/vasekerka/sevastopol_korona.png
        если ширина экрана < 1250px информеры выглядят так https://jing.yandex-team.ru/files/vasekerka/sevastopol_korona1.png
    - do: кликнуть по очереди на информеры "Оперштаб Севастополя" и "Коронавирус в России"
    - assert: |
        в новой вкладке открывается Яндекс.Мессенджер,
        в мессенджере присутствует информация о коронавирусе

files:
  - features/news/CovidInformer/CovidInformer.desktop.hermione.js

tags:
  - covidInformer

manager: mrwhite

qa-engineer: an-smirn0v

tlds:
  - ru
