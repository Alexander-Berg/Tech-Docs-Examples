feature: ЖД
type: Страница заказа
description: >-
  **Информация для асессоров: форма оплаты с полями ввода данных карты в
  тестинге намеренно пропускается, это нормально. Заказ должен оформляться без
  ввода карты**


  Для заполнения форм на странице оплаты использовать тестовые карты, подробнее
  здесь: https://wiki.yandex-team.ru/TRUST/testdata/#operaciisbankovskimikartami


  Например:

  Номер карты: 5100003697253468

  CVN: 090

  Дата: 01/20

  Создать заказ для 4 взрослых пассажиров. Для этого перейти на любую выдачу на
  вкладке ЖД, например, Москва - Санкт-Петербург и нажать на кнопку Выбрать
  место. Далее следовать по шагам покупки.

  Дойти до страницы успешного заказа (хэппи пейдж), нажать "Подробнее о заказе"
  - произойдет переход на страницу заказа с данными о заказе.
specs:
  'ЖД: Кнопки возврата дизейблятся во время возврата':
    - do: |-
        Дойти до страницы заказа
        Для одного из пассажиров кликнуть по кнопке Сдать билет
    - assert: |-
        * Появилось модальное окно для ввода смс
        * На указанный при оформлении заказа номер пришла смс с кодом
    - do: |-
        Ввести код из смс
        Кликнуть Подтвердить
    - assert: >-
        * Через какое-то время модальное окно закрылось и началось формирование
        квитанции
    - do: >-
        Пока квитанция не сформировалась, кликнуть по кнопке Сдать билет для
        другого билета
    - assert: |-
        * Кнопка задизейблена (при наведении не подсвечивается, текст серый)
        * Появился попап с текстом "Дождитесь возврата билета"
    - do: |-
        Дождаться, пока квитанция сформируется
        Кликнуть по кнопке Сдать билет еще раз
    - assert: |-
        * Кнопка не задизейблена (подсвечивается при наведении, текст черный)
        * Попап не появился
        * При нажатии открывается модальное окно с полем для кода
    - do: >-
        Ввести код, кликнуть Подтвердить

        Пока не сформировалась квитанция для второго билета, кликнуть по кнопке
        Сдать все билеты вверху страницы
    - assert: |-
        * Кнопка задизейблена (при наведении не подсвечивается, текст серый)
        * Появился попап с текстом “Дождитесь возврата билета”
    - do: |-
        Дождаться формирования квитанции по второму возврату
        Кликнуть по кнопке Сдать все билеты
    - assert: |-
        * Кнопка активна (подсвечивается при наведении, текст черный)
        * Попап не появляется
        * Открылось модальное окно для возврата
manual: true
Устройство: Десктоп
Страница: Страница заказа
Сервис: ЖД
Тестирование асессорами: Да
Окружение: Testing
Автор: shenfeld
