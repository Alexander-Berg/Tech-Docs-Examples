feature: Эмоджи в Спорте

description: |
    Эмоджи - сущность в сюжете, позволяющая пользователям выразить свое мнение о новости посредством выбора реакции из набора эмоджи.
    Доступные эмоджи: Нравится, Хаха, Ого, Апчхи, Грусть, Возмутительно, Не нравится

specs:
  позволяют авторизованному пользователю оценить новость в сюжете без эмоджи:
    - tags: 
      - backend_sport
    - do: авторизоваться на сервисе Я.Спорт
    - do: | 
        перейти в сюжет без поставленных эмоджи (не из топа новостей),
        внешний вид блока эмоджи без реакций https://jing.yandex-team.ru/files/kossakovskaya/2022-04-19_19-48-09.png
    - assert: |
        внизу сюжета есть кнопка 'Оценить' со значком смайла,
        элементы расположены в одну строку, не наезжают друг на друга
    - do: навести курсор мыши на кнопку 'Оценить'
    - assert: |
        меняется стиль курсора и слова 'Оценить',
        появляется блок с доступными эмоджи
    - do: навести курсор мыши на иконки эмоджи
    - assert: по ховеру каждая эмоджи увеличивается, сверху появляется соответствующая подпись
    - do: убрать курсор мыши с блока эмоджи
    - assert: блок с эмоджи пропадает
    - do: навести курсор мыши на кнопку 'Оценить' и кликнуть по любой эмоджи в появившемся блоке
    - assert: |
        блок с доступными эмоджи пропадает,
        выбранная эмоджи появляется на месте смайла,
        'Оценить' меняется на 'Вы оценили'

  отображают топ популярных реакций и количество отреагировавших на спортивную новость:
    - tags: 
      - backend_sport
    - do: авторизоваться на сервисе Я.Спорт
    - do: перейти в сюжет с количеством эмоджи > 1000 (обычно это сюжеты из топ-5 в рубрике "Главное". Если таких сюжетов не нашлось - пропустите кейс)
    - assert: |
         отображается топ из 3 самых популярных эмоджи, кнопка Оценить и количество оценивших '(N)K' (например, 2,2K),
         элементы расположены в одну строку, не наезжают друг на друга, 
         внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/Screen%20Shot%202021-09-07%20at%2020.46.12.png
    - do: навести курсор мыши на кнопку 'Оценить'
    - assert: |
        меняется стиль курсора и слова 'Оценить',
        появляется блок с доступными эмоджи
    - do: навести курсор мыши на иконки эмоджи
    - assert: по ховеру каждая эмоджи увеличивается, сверху появляется соответствующая подпись
    - do: убрать курсор мыши с блока эмоджи
    - assert: блок с эмоджи пропадает
    - do: навести курсор мыши на кнопку 'Оценить' и кликнуть по любой эмоджи в появившемся блоке
    - assert: |
        блок с доступными эмоджи пропадает,
        выбранная эмоджи появляется справа от трех популярных эмоджи,
        'Оценить' меняется на "Вы +NK" (Вы - черным шрифтом, +NK - серым),
        количество N не изменилось
    - do: обновить страницу
    - assert: количество N не изменилось
    - do: навести курсор мыши на кнопку 'Вы +NK'
    - assert: |
        меняется стиль курсора и 'Вы +NK',
        блок с доступными эмоджи не появляется
    - do: кликнуть по 'Вы +NK'
    - assert: |
        выбранная эмоджи пропала,
        'Вы +NK' меняется на 'Оценить' +NK
        
  позволяют авторизованному пользователю изменить реакцию:
    - tags: 
      - backend_sport
    - do: авторизоваться на сервисе Я.Спорт
    - do: перейти в сюжет БЕЗ ПОСТАВЛЕННЫХ ЭМОДЖИ (не из топа новостей), как выглядит сюжет без эмоджи - https://jing.yandex-team.ru/files/an-smirn0v/shot_210408_121735.png
    - assert: |
        под аннотацией есть кнопки 'Оценить' со значком смайла,
        элементы расположены в одну строку, не наезжают друг на друга
    - do: навести курсор мыши на кнопку 'Оценить' и кликнуть по любой эмоджи в появившемся блоке
    - assert: |
        блок с доступными эмоджи пропадает,
        выбранная эмоджи появляется на месте смайла,
        'Оценить' меняется на 'Вы оценили'
    - do: навести курсор мыши на кнопку 'Вы оценили'
    - assert: |
        меняется стиль курсора и 'Вы оценили',
        блок с доступными эмоджи не появляется
    - do: кликнуть по 'Вы оценили'
    - assert: |
        выбранная эмоджи пропала,
        'Вы оценили' меняется на 'Оценить' с иконкой смайла
    - do: кликнуть по кнопке 'Оценить' и кликнуть по любой другой эмоджи в появившемся блоке
    - assert: |
        блок с доступными эмоджи пропадает,
        выбранная другая эмоджи появляется на месте смайла,
        'Оценить' меняется на 'Вы оценили'
    - do: обновить страницу
    - assert: отображается только последняя выбранная эмоджи и черная надпись "Вы оценили"
    - do: залогиниться другим пользователем
    - do: в том же сюжете кликнуть по кнопке 'Оценить', выбрать эмоджи, отличную от ранее поставленной
    - assert: |
        отобразилась выбранная эмоджи, рядом появилась надпись "Вы +1" (Вы - черным шрифтом, +1 - серым),
        левее отображается топ эмоджи - эмоджи первого пользователя + выбранная эмоджи

  авторизация через таб эмоджи [manual]:
    - reasonNotToAuto: Нет возможности авторизоваться в тесте через поп-ап. Также кейс содержит ХП.
    - Case Type: CH
    - tags: 
      - backend_sport
# добавила про топ-5 и уже присутствующие оценки для ХП
    - do: перейти в спортивный сюжет из ТОП-5 без залогина. ВАЖНО выбрать сюжет, в котором уже есть оценки, как выглядит блок с эмоджи - https://jing.yandex-team.ru/files/vasekerka/2022-06-20_16-23-22.png
    - assert: |
        отображается топ из 3 самых популярных эмоджи,
        кнопка 'Оценить' и количество оценивших '(N)K',
        элементы расположены в одну строку, не наезжают друг на друга
    - do: нажать на кнопку 'Оценить'
    - assert: |
        появился попап с предложением авторизации 'Хотите оценить новость? Войдите в аккаунт, чтобы оставить свою оценку',
        отображаются кнопки 'Закрыть' и 'Войти'
    - do: нажать на кнопку 'Закрыть'
    - assert: поп-ап авторизации пропадает
    - do: повторно нажать на кнопку 'Оценить'
    - assert: появился попап с предложением авторизации
    - do: нажать на кнопку 'Войти' и авторизоваться на сервисе
    - assert: произошел возврат к сюжету
    - do: навести курсор мыши на кнопку 'Оценить' и кликнуть по любой эмоджи в появившемся блоке
    - assert: |
        блок с доступными эмоджи пропадает,
        выбранная эмоджи появляется справа от трех популярных эмоджи,
        'Оценить' меняется на 'Вы оценили'
# заменяю шаг ниже на немного другой для ХП
#        'Оценить' меняется на "Вы +NK", количество N не изменилось

files:
  - features/sport/reaction/reaction.desktop.hermione.js

tags:
  - backend_sport

qa-engineer: an-smirn0v

manager: mrwhite

tlds:
  - ru
  - by
  - kz
  - ua
  - com
