feature: beruSnippet

specs:
  Внешний вид блока:
    - do: открыть страницу (https://yandex.ru/turbo?stub=berusnippet/default.json)
    - assert: должны быть видны разные вариации сниппета
    - screenshot: внешний вид соответствует скриншоту [plain]
  Внешний вид блока с кнопкой "В корзину":
    - do: открыть страницу (https://yandex.ru/turbo?stub=berusnippet/add-to-cart.json)
    - assert: должны быть видны разные вариации сниппета c кнопкой 'В корзину' и разобранный
    - screenshot: внешний вид соответствует скриншоту [add-to-cart]
  Кнопка "В корзину" должна быть кликабельна и вести на переданный url:
    - do: открыть страницу (https://yandex.ru/turbo?stub=berusnippet/add-to-cart.json)
    - do: найти первый сниппет
    - do: нажать в нем на кнопку 'В корзину'
    - assert: кнопка должна быть кликабельна и вести на https://yandex.ru/
  Цель должна отправляться в метрику при клике по кнопке "В корзину":
    - do: открыть страницу (https://yandex.ru/turbo?stub=berusnippet/add-to-cart.json&exp_flags=analytics-disabled=0)
    - do: найти первый сниппет
    - do: нажать в нем на кнопку 'В корзину'
    - assert: "цель 'ADD_TO_CART' должна отправится в счетчик '11111111' c параметрами {one: 1}"
  Сниппет должен быть кликабельным и вести на переданный url:
    - do: открыть страницу (https://yandex.ru/turbo?stub=berusnippet/add-to-cart.json)
    - do: найти первый сниппет
    - do: кликнуть по нему
    - assert: сниппет должен быть кликабельным и вести на https://beru.ru/
  Клик по сниппету должен инициировать отправку гола в метрику:
    - do: открыть страницу (https://yandex.ru/turbo?stub=berusnippet/add-to-cart.json&exp_flags=analytics-disabled=0)
    - do: кликнуть по первому сниппету
    - assert: "цель 'NAVIGATE_GOAL' должна отправится в счетчик '11111111' c параметрами {one: 1, two: 2}"
  При попадании сниппета в видимую область экрана, должен отправлять гол видимости элемента:
    - do: открыть страницу (https://yandex.ru/turbo?stub=berusnippet/add-to-cart.json&exp_flags=analytics-disabled=0)
    - assert: "цель 'VISIBILITY_GOAL' первого сниппета должна отправится в счетчик '11111111' c параметрами {one: 1, two: 2}"
    - do: доскролить до третьего сниппета, чтобы он полностью попал в экран
    - assert: "цель 'VISIBILITY_GOAL' третьего сниппета должна отправится в счетчик '11111111' c параметрами {one: 1, three: 2}"



files:
  - platform/components/BeruSnippet/__tests__/BeruSnippet@phone.hermione.js

v-team: Beru

manager: seoshnik

tlds: none
