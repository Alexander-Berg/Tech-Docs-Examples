feature: Авиабилеты
type: Выдача
description: Проверка фильтра Авиакомпаний

specs:
    Проверка фильтра Авиакомпаний:
        - do: 'открыть главную страницу путешествий, вкладка Авиабилеты'
        - do: |-
              Заполнить форму поиска билетов
              Откуда: Екатеринбург
              Куда: Санкт-Петербург
              Туда: 5 число следующего месяца, дату обратно не ставить.
              Пассажиры: 1 взрослых
              Класс: Эконом
        - do: Нажать кнопку “Найти”
        - do: >-
              Assert: Открылась страница выдачи. В фильтре авиакомпаний ничего не
              выбрано.
        - do: Нажать на кнопку фильтра авиакомпаний
        - assert: |
              Показался блок фильтра.
              Галочки не на одном из пунктов не стоит.
              Есть галочка Комбинации авиакомпаний, она снята
              Есть кнопка сбросить, она неактивна
              Кнопка альянсов активна на “Все альянсы”
        - do: Выбрать авиакомпанию “S7 Airlines”
        - assert: |
              В чек-боксе появилась галочка, фон чек-бокса стал жёлтым.
              Цвет кнопки фильтра изменился на тёмно-серый.
              Активировалась кнопка альянсов Oneworld.
              В блоке фильтров появилась красная кнопка “Сбросить”.
              В фильтре авиакомпаний синяя надпись Сбросить стала активна

              screen: https://jing.yandex-team.ru/files/gouken67/aviacompany_1.png
        - assert: |
              В выдаче остались только предложения где все сегменты перелёта
              выполняет авиакомпания “S7 Airlines
        - do: Выбрать авиакомпанию “Аэрофлот”
        - assert: В чек-боксе появилась галочка, фон чек-бокса стал жёлтым.
        - assert: |
              В выдаче остались только предложения где все сегменты перелёта
              выполняет авиакомпания “S7 Airlines” или “Аэрофлот”, а так же смежные
              рейсы где перелёт осуществляют эти компании
        - do: |
              Снова открыть фильтр авиакомпаний
              Установить чекбокс Комбинации авиакомпаний
        - assert: |
              Выдача обновилась. Теперь в ней присутствуют варианты от S7, Аэрофлота и смежные рейсы с участием других компаний, где как минимум один перелёт выполняется S7 или Аэрофлотом.
        - do: |
              Снова открыть фильтр авиакомпаний
              Навести курсор на цену напротив S7
              Кликнуть по появившейся надписи Только
        - assert: |
              Выдача обновилась.
              Остались только варианты от S7, либо смежные рейсы
              Чекбокс с Аэрофлота снят
        - do: |
              Снова открыть фильтр авиакомпаний
              Кликнуть по синей надписи Сбросить
        - assert: Значение фильтра сбросилось. Выдача содержит варианты не только от S7

files:
    - tests/desktop/avia/serp/serp-filtering-aviacompany.hermione.ts

tags: smoke

Сервис: Авиа
Страница: Выдача
Функциональность: Фильтры и сортировки
Устройство:
    - Десктоп
Окружение:
    - Testing
    - Production
Тестирование асессорами: Да
