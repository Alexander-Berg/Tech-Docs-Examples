feature: Страница хоккейного матча

specs:
  aliases:
    &goTo
      - do: (для рана в браузере) открыть главную страницу сервиса Я.Спорт
      - do: (для рана в ПП) открыть вертикаль Спорта в ПП тапом по иконке в бендере
#      - assert: на странице могут присутствовать футбольный и хоккейный календари с кнопками "Все матчи" справа от каждого из них
#      - assert: (Если блока Хоккей в матч-тизере нет, значит нет хоккейных матчей. В этом случае кейсы требуется скипнуть)
#      - do: открыть спортивный календарь тапом по "Все матчи" в матч-тизере напротив заголовка Хоккей
      - do: (для рана в браузере) открыть в той же вкладке хоккейный календарь по прямой ссылке https://yandex.ru/sport/calendar/hockey
      - do: (для рана в ПП) открыть хоккейный календарь по прямой ссылке https://yandex.ru/sport/calendar/hockey (вставить в поисковую строку и нажать "Перейти")
      - assert: |
          (для рана в браузере) произошел переход на хоккейный календарь,
          (для рана в ПП) в новом апп-табе внутреннего браузера ПП, а не в вертикали, открывается хоккейный календарь,
          хоккейный календарь содержит дата пикер https://jing.yandex-team.ru/files/nightsonne/2020-04-13_18-51-29.png

  может содержать видео [manual]:
    - automation: NERPA-9339
    - tags: backend_sport
    - *goTo
    - do: тапнуть на дата-пикер и установить дату 5 марта 2020
    - assert: |
        открыт список матчей за 5 марта,
        некоторые матчи содержат иконку-индикатор видео, скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-11_16-18-53%20%282%29.png
    - do: перейти на страницу хоккейного матча тапом на матч с иконкой видео
    - assert: |
          страница матча может содержать большое видео, скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-11_16-25-34.png,
          под большим видео расположено название матча,
          под большим видео может быть расположена карусель видео моментов матча
    - do: тапнуть на большое видео
    - assert: в новой вкладке открывается видео матча на сервисе Яндекс.Эфир (или другом сервисе)
    - do: вернуться на вкладку с матчем
    - do: поскроллить карусель видео
    - assert: |
          карусель скроллится,
          каждое видео содержит подпись момента (максимум 2 строки),
          длинные названия моментов корректно обрезаются многоточием
    - do: тапнуть на любое видео в карусели
    - assert: в новой вкладке открывается видео момента

#  из блоков 'Вчера' или 'Сегодня' содержит хоккейный виджет [manual]:
  из списка прошедших матчей содержит хоккейный виджет [manual]:
    - automation: NERPA-9339
    - tags: backend_sport
    - *goTo
    - do: тапнуть на дата-пикер и установить дату 5 марта 2020
    - assert: открыт список матчей за 5 марта
    - do: перейти на страницу хоккейного матча тапом на матч со счетом
    - assert: |
        страница матча содержит хоккейный виджет,
        виджет содержит название лиги, статус матча, для завершенных матчей - время завершения, названия команд, счет,
        при победе по буллитам или в овертайме виджет содержит соответствующее указание под названием лиги,
        счет и название команды-победителя выделено жирным шрифтом,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-11_16-40-17.png

# закомменчено до лучших времен, когда появятся матчи
#  из блока 'Завтра' содержит хоккейный виджет [manual]:
#    - automation: NERPA-9339
#    - *goTo
#    - do: перейти на страницу хоккейного матча тапом на матч в разделе 'Завтра'
#    - assert: |
#        страница матча содержит хоккейный виджет,
#        виджет содержит название лиги, названия команд, время начала матча, надпись 'Завтра',
#        скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-11_16-43-42.png
#
#  из блока 'Завтра' может содержать превью трансляции матча [manual]:
#    - automation: NERPA-9339
#    - *goTo
#    - do: перейти на страницу хоккейного матча тапом на матч в разделе 'Завтра' (проще найти в матчах НХЛ)
#    - assert: страница матча может содержать большое видео - превью трансляции матча
#    - do: тапнуть на большое видео
#    - assert: в новой вкладке открывается страница трансляции на сервисе Яндекс.Эфир (или другом сервисе) с превью и временем начала матча

#  из блоков 'Вчера' или 'Сегодня' может содержать блок 'Ход матча' [manual]:
  из списка прошедших матчей может содержать блок 'Ход матча' [manual]:
    - automation: NERPA-9339
    - tags: backend_sport
    - *goTo
    - do: тапнуть на дата-пикер и установить дату 5 марта 2020
    - assert: открыт список матчей за 5 марта
    - do: перейти на страницу хоккейного матча тапом на матч со счетом
    - assert: |
        страница матча может содержать блок 'Ход матча' (если в данном матче блока нет, открыть другой матч),
        блок содержит логотипы команд или флаги стран,
        в блоке отображаются все события матча с подписью характера события и времения,
        голы отмечены значком шайбы, буллиты - иконкой с буквой Б поверх шайбы,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-11_17-35-36.png

#  из блоков 'Вчера' или 'Сегодня' может содержать блок 'Состав' [manual]:
  из списка прошедших матчей может содержать блок 'Состав' [manual]:
    - automation: NERPA-9339
    - tags: backend_sport
    - *goTo
    - do: тапнуть на дата-пикер и установить дату 5 марта 2020
    - assert: открыт список матчей за 5 марта
    - do: перейти на страницу хоккейного матча тапом на матч со счетом
    - assert: |
        страница матча может содержать блок 'Состав' (если в данном матче блока нет, открыть другой матч),
        в блоке есть переключатель состава команд с лого и названием команд,
        длинные названия команд корректно обрезаются многоточнием в переключателе и не выходят за рамки блока переключателя,
        по умолчанию отображается состав первой команды,
        рядом с фамилией игрока, забившего гол, есть иконка шайбы и счетчик с количеством голов,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-11_17-14-57.png
    - do: тапнуть по переключателю
    - assert: |
        с анимацией отобразился состав второй команды,
        в блоке с переключателем выделена вторая команда

#  из блоков 'Вчера' или 'Сегодня' может содержать карточки о связанных с матчем новостях [manual]:
  из списка прошедших матчей может содержать карточки о связанных с матчем новостях [manual]:
    - automation: NERPA-9339
    - tags: backend_sport
    - *goTo
    - do: тапнуть на дата-пикер и установить дату 5 марта 2020
    - assert: открыт список матчей за 5 марта
    - do: перейти на страницу хоккейного матча тапом на матч со счетом
    - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав', но ДО раздела 'Новости хоккея'
    - assert: |
        страница матча может содержать карточки о связанных с матчем новостях (если в данном матче карточек нет, открыть другой матч),
        карточки о связанных с матчем новостях (при наличии располагаются над заголовком Новости хоккея) содержат иконку добавления в избранное (но не содержат иконку лайка и комментария),
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-11_17-41-40.png
    - do: тапнуть по любой карточке о связанных с матчем новостях
    - assert: в новой вкладке открывается страница источника

#  из блоков 'Вчера' или 'Сегодня' может содержать турнирную таблицу [manual]:
  из списка прошедших матчей может содержать турнирную таблицу [manual]:
    - automation: NERPA-9339
    - tags: backend_sport
    - *goTo
    - do: тапнуть на дата-пикер и установить дату 5 марта 2020
    - assert: открыт список матчей за 5 марта
    - do: перейти на страницу хоккейного матча тапом на матч со счетом
    - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав'
    - assert: |
        страница матча может содержать блок 'Турнирная таблица' (если в данном матче блока нет, открыть другой матч),
        по умолчанию открыта вкладка той группы, к которой относятся команды данного матча,
        команды данного матча выделены жирным шрифтом,
        верстка таблицы корректна,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-12-18_14-40-38.png
    - do: попереключать вкладки в таблице
    - assert: вкладки переключаются, отображается новый список команд

#  из блоков 'Вчера' или 'Сегодня' может содержать блок 'Другие матчи' [manual]:
  из списка прошедших матчей может содержать блок 'Другие матчи' [manual]:
    - automation: NERPA-9339
    - tags: backend_sport
    - *goTo
    - do: тапнуть на дата-пикер и установить дату 5 марта 2020
    - assert: открыт список матчей за 5 марта
    - do: перейти на страницу хоккейного матча тапом на матч со счетом
    - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав', 'Турнирная таблица'
    - assert: |
        страница матча может содержать блок 'Другие матчи' (если в данном матче блока нет, открыть другой матч),
        блок содержит названия и лого команд, время, дату, счет (в зависимости от того прошел матч или нет),
        внизу есть кнопка 'Все матчи',
        верстка блока корректна,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-12-18_14-49-50.png
    - do: тапнуть на любой матч в блоке 'Другие матчи'
    - assert: в той же вкладке открывается страница выбранного матча
    - do: вернуться назад
    - do: тапнуть на 'Все матчи'
    - assert: в той же вкладке открывается страница хоккейного календаря

  содержит Новости хоккея [manual]:
    - automation: NERPA-9339
    - tags: backend_sport
    - *goTo
    - do: тапнуть на дата-пикер и установить дату 5 марта 2020
    - assert: открыт список матчей за 5 марта
    - do: перейти на страницу хоккейного матча тапом на любой матч
    - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав' до блока 'Новости хоккея'
    - assert: страница матча содержит новостные карточки
    - do: проскроллить страницу матча до лоадера
    - assert: загружаются новые карточки
    - do: проскроллить страницу на несколько порций карточек
    - assert: |
        новостной блок помимо новостных карточек может содержать карточки с каруселями видео и рекламные блоки,
        карусели видео скроллятся
    - do: тапнуть по заголовку или картинке любой новостной карточки
    - assert: в той же вкладке открывается сюжет
    - do: перейти назад на страницу хоккейного матча
    - do: тапнуть по любому видео в любой карусели
    - assert: в новой вкладке открывается страница с видео

files: []

qa-engineer:
  - nightsonne

tags:
  - sport
  - sport-fb

priority:
  - middle

tlds:
  - ru
  - ua
  - by
  - kz
  - uz
  - com

v-team: Sport

manager: skhovaev
