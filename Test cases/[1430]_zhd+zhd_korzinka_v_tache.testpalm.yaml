feature: ЖД
type: Подтверждение
description: >-
  Бронируем места в оба поезда со схемой.


  Пример ссылки на выбор мест для пересадок:
  https://travel-test.yandex.ru/trains/order/?adults=1&forward=P1_049А_c2_c213_2021-07-10T13.32%2CP1_070Ч_c213_c54_2021-07-111T13.50&fromId=c213&fromName=Москва&number=049А&provider=P1&time=13.32&toId=c54&toName=Екатеринбург&when=2021-07-10
specs:
  'ЖД+ЖД: Корзинка в таче':
    - do: >-
        Перейти на страницу выбора мест в первый поезд, для сложного заказа с
        пересадкой

        Выбрать 1 взрослого пассажира, 1 ребенка с местом, 1 ребенка без места
    - assert: >-
        - внизу отображается корзинка с кнопкой Далее, заголовком "Стоимость
        билетов" и направлением для первого рейса
    - do: |-
        Выбрать тип вагона Плацкарт
        Выбрать любые места
    - assert: |-
        - корзина переместилась под схему
        - отображается стоимость за 2 места
    - do: Нажать на иконку вопроса
    - assert: >-
        - открылось окно с расшифровкой стоимости

        - есть заголовок с направлением движения первого поезда

        - отображается стоимость за все билеты, для ребенка без места стоимость
        = 0

        - есть чекбокс постельного белья, установлен

        - есть сумма Итого, она включает сумму за все билеты в первый поезд
    - do: Нажать "Далее"
    - assert: |-
        - произошел переход на страницу выбора мест во второй поезд
        - внизу страницы в корзинке появился блок с направлением второго рейса
    - do: Выбрать любые места в плацкарте
    - assert: |-
        - корзина переместилась к схеме
        - отображается стоимость за 2 места во втором поезде
    - do: Нажать на иконку вопроса
    - assert: >-
        - открылось окно с расшифровкой стоимости

        - есть 2 блока, в заголовках направление движения первого и второго
        поезда

        - отображается стоимость за все билеты, для ребенка без места стоимость
        = 0

        - есть чекбокс постельного белья для обоих рейсов, установлен

        - есть сумма Итого, она включает сумму за все билеты в оба поезда
    - do: Снять чекбокс "Постельное белье" для второго рейса
    - assert: |-
        - чекбокс снялся
        - сумма Итого уменьшилась на сумму за белье
    - do: |-
        Нажать Указать пассажиров
        Ввести любые данные
        Нажать Проверить заказ и купить
    - assert: >-
        - открылась страница подтверждения заказа

        - внизу страницы в корзине есть два блока: с билетами на первый рейс и
        на второй

        - для каждого блока есть заголовок с направлением рейса

        - в блоке с билетами во второй рейс нет информации о белье, в блоке с
        первым рейсом есть текст "Бельё включено в стоимость"

        - есть сумма Итого, она совпадает с суммой за все билеты на оба рейса
    - do: Установить чекбокс страховки
    - assert: '- сумма Итого увеличилась на сумму страховки'
manual: true
Функциональность: 'ЖД+ЖД: Пересадки'
Устройство: Тач
Страница: Подтверждение
Сервис: ЖД
Тестирование асессорами: Нет
Окружение:
  - Production
  - Testing
Автор: shenfeld
