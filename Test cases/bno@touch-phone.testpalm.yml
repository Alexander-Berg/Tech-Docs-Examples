feature: БНО

specs:
  Основные проверки:
    beforeEach:
      - do: получить выдачу по запросу 'ламода' _ALTERNATIVE_SEARCH_QUERIES_
      - assert: появился сниппет БНО
    Внешний вид:
      - screenshot: внешний вид [plain]
      - assertMetrics: '*'
    Проверка заголовка:
      - do: кликнуть на заголовок БНО
      - assert: в новой вкладке открылся сайт
      - screenshot: заголовок имеет цвет посещенной ссылки (фиолетовый) [visited]
      - tech: проверить счётчик в заголовке
      - assertMetrics: '*'
    Проверка сайтлинков:
      - do: кликнуть на первый сайтлинк БНО
      - assert: открылся выбранный раздел сайта
      - tech: проверить счётчик в первом сайтлинке
      - assertMetrics: '*'
  Нажатие на кнопку "еще" в сайтликах:
    - do: проскролить до кнопки 'ещё' и нажать ее
    - screenshot: примерный вид БНО со всеми сайтлинками [opened-sitelinks]
    - assert: появились все сайтлинки
    - screenshot: примерный вид развернутого списка сайтлинков [extended-sitelinks]
    - tech: проверить счётчик кнопки 'еще' на разворачивание сайтлинков
    - do: кликнуть на кнопку 'еще'
    - assert: часть сайтлинков скрылась
    - tech: проверить счётчик на кнопке 'еще' на сворачивание сайтлинков
    - assertMetrics: '*'
  Длинный тайтл сайтлинка:
    - params:
        foreverdata: '1800832681'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: |
        в выдаче присутствует сниппет БНО
        тайтл первого сайтлинка размещается на 2-3 строки
    - screenshot: пример внешнего вида [bno-long-sitelinks]
    - assertMetrics: '*'
  Проверка "Читать еще" в описании:
    - do: получить выжачу по запросу 'ламода' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: |
        на выдаче есть сниппет БНО
        в тексте сниппета есть ссылка 'Читать еще'
    - screenshot: пример внешнего вида [bno-read-more-before]
    - do: тапнуть на ссылку 'Читать еще'
    - assert: |
        раскрылся полный текст описания
        вместо 'Читать еще' появилась ссылка 'Скрыть'
    - screenshot: пример внешнего вида [bno-read-more-after]
    - tech: проверить счетчик на 'Читать еще'
    - do: тапнуть на ссылку 'Скрыть'
    - assert: |
        видимая часть описания вернулась к первоначальному состоянию
        вместо 'Скрыть' появилась ссылка 'Читать еще'
    - tech: проверить счетчик на 'Скрыть'
    - screenshot: пример внешнего вида [bno-read-more-final]
    - assertMetrics: '*'

specs-integration:
  Присутствует на странице:
    - do: получить выдачу по запросу 'ламода' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: |
        появился сниппет с БНО
        у сниппета есть ссылки-сайтлинки
    - counter: /$page/$main/$result/bno

files:
  - features/bno/bno-common@touch-phone.hermione-helper.js
  - features/bno/bno@touch-phone.hermione.js
  - features/bno/bno@touch-phone.hermione.e2e.js

v-team: Beauty

tags:
  - reviewed
  - pp_new_core

tlds:
  - ru
  - by
  - ua
  - kz
  - uz
  - com.tr
  - com

counter: /$page/$main/$result/bno

priority: high
