feature: ЖД
type: Билеты и бронирования
description: >-
  **Для асессоров: Выполнить вход удается ТОЛЬКО через кнопку Мои поездки (рядом с
  кнопкой Войти в десктопе и в боковом меню, клик по трем полоскам) > кликнуть Войдите в аккаунт > Авторизоваться тестовым
  аккаунтом (ссылка ведет на passport-test.yandex.ru). Важно чтобы это был
  именно тестовый аккаунт, т.к. через свой аккаунт не впустит**

  Для того, чтобы создать тестовый заказ, нужно:

  * Залогиниться (для тестинга асессоры могут пользоваться аккаунтом
  vladlen@yandex.ru password: v12345678)

  * Перейти на вкладку ЖД

  * Сделать поиск по любому направлению на дату через месяц от текущей(в тестинге желательно использовать
  поиск из Москвы, например, Москва - Санкт-Петербург)

  * Для любого поезда, на который можно купить билеты кликнуть по кнопке Выбрать место
  * Выбрать любой вагон, а в нем выбрать место №10 и №11

  * Далее следовать по шагам покупки


  Для оплаты в тестинге можно использовать карту: 5100003697253468 01/20 090
  (асессорам не надо вводить карту)


  **Информация для асессоров: шаг оплаты в тестинге намеренно пропускается, это
  нормально. Данные карты вводить не нужно, переход на страницу заказа
  произойдет без шага оплаты.**

  - Сделать заказ по инструкции из описания на 2 взрослых, 1 ребенка от 5 до 10
  лет и 1 ребенка без места

  - Находимся на главной Путешествий, залогинены.
specs:
  Отображение информации на бронировании ЖД на странице заказов:
    - do: >-
        Перейти на страницу "Мои поездки", кликнув по иконке личного
        кабинета в правом верхнем углу (для тача "Мои поездки" скрыта в  бургер меню в правом верхнем углу)
    - assert: '* Осуществился переход на страницу с поездками'
    - do: Найти поездку (по дате и направлению). Перейти внутрь поездки
    - assert: >-
        * На карточке заказа есть информация: пункты отправления и прибытия,
        дата, номер, фирменность (если есть)
        и название поезда (начальная и конечная станции), кнопки "Скачать" и "Распечатать" 
        Для тача только кнопка "Скачать"

        * Вся информация на сниппете соответствует созданному заказу
        
    - do: Кликнуть по сниппету заказа
    - assert: '* Произошел переход на страницу созданного заказа'
    - do: >-
        В созданном заказе сдать билет - детский без места и взрослый (кнопка будет только у взрослого билета)
        
    - assert: >-
        * Внизу сниппета появилась серая плашка
        Десктоп https://jing.yandex-team.ru/files/arhey/2022-01-14T09:04:37Z.c2c8236.png
        Тач https://jing.yandex-team.ru/files/arhey/2022-01-14T09:05:49Z.7af95b5.png

        * Сумма к возврату соответствует сумме в чеке из письма о возврате (в
        тестинге чека может не быть - пропускаем ОР)

        * Статус заказа Выполнен
    - do: |-
        Сдать оставшийся билет
    - assert: >-
        * Статус заказа Отменен

        * На серой плашке внизу поменялся текст на "Возврат двух билетов"

        * Сумма к возврату изменилась - соответствует сумме первого и второго
        возвратов

        * Информация о пассажирах на бронировании отображается серым цветом
manual: true
Функциональность: Поиск заказа
Устройство:
  - Десктоп
  - Тач
Страница: Билеты и бронирования
tlds: hard
Сервис: ЖД
Тестирование асессорами: Да
Окружение: Testing
Tag:
  - automation (iliasova)
  - Smoke
  - Blocker
Автор: shenfeld
