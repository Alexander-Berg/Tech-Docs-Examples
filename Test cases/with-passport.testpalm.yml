feature: user2

description: user2 – блок пользователя, расположенный в правой части шапки страницы. Для выполнения теста надо авторизоваться в Яндекс.Паспорт

specs:

  beforeEach:
    - do: разлогиниться на Яндексе (если был логин).
    - do: Убедиться, что этот пример открыт в домене *.yandex.ru
    - do: залогиниться через форму в примере в любой аккаунт с непустым почтовым ящиком и ненулевым количеством непрочитанных писем

  Проверить корректность работы примера №1(Пример с ручной установкой аккаунтов и непрочитанных писем):
#    - do: Проверить внешний вид блока после авторизации, ссылки, реакция блока на действия при помощи клавиатуры и мышки.

   Общий вид и ховеры:

    - do: вернуться на страницу примера, перезагрузить страницу
    - assert: После авторизации отображается аватарка пользователя с количеством непрочитанных писем и имя пользователя (логин), в имени первая буква выделена красным цветом
    - do: навести курсор мыши на имя пользователя (без клика)
    - assert: цвет шрифта изменился на красный
    - do: убрать курсор мыши с имени пользователя
    - assert: вернулись исходные цвета шрифта (красным выделена только первая буква)
#    - do: навести курсор мыши на число непрочитанных писем
#    - assert: рядом отобразилось другое (большее) число (общее количество писем в ящике) # - Уточнить, что за число и всегда ли есть

   Попап - открытие, закрытие:

    - do: перезагрузить страницу
    - do: кликнуть в имя пользователя
    - assert: открылся попап с меню
    - do: нажать на клавиатуре 'Esc'
    - assert: попап с меню исчез
    - do: кликнуть в аватарку пользователя
    - assert: снова открылся попап с меню
    - do: кликнуть в любую точку страницы вне попапа
    - assert: попап с меню исчез

   Попап - вид, ховеры, фокус:

    - do: перезагрузить страницу
    - do: кликнуть в имя пользователя 
    - assert: открылся попап с меню
    - assert: в попапе есть аватарка пользователя с количеством непрочитанных писем, имя пользователя (логин), полный адрес электронной почты, подменю с пунктами 'Почта', 'Управление аккаунтом', 'Выйти', пункт 'Добавить аккаунт' с иконкой слева, подвал с пунктами 'Настройки', 'Помощь'
    - assert: при наведении курсора мыши (без клика) на пункты 'Почта', 'Управление аккаунтом', 'Выйти', 'Добавить аккаунт' меняется (темнеет) цвет подложки у конкретного пункта
    - assert: при наведении курсора мыши (без клика) на пункты 'Настройки', 'Помощь' меняется (светлеет) цвет шрифта в конкретном пункте
    - assert: можно навести фокус кнопкой Tab на пункты 'Почта', 'Управление аккаунтом', 'Выйти', 'Добавить аккаунт', 'Настройки', 'Помощь', сочетанием Alt+Tab - также на аватарку пользователя


   Попап - ссылки:

    - do: перезагрузить страницу
    - do: вызвать попап с меню кликом в имя пользователя
    - do: кликнуть в пункт 'Почта'
    - assert: в той же вкладке открылся почтовый ящик пользователя в домене mail.yandex.ru
    - do: вернуться на страницу примера, перезагрузить страницу, вызвать попап с меню кликом в имя пользователя 
    - do: кликнуть в пункт 'Управление аккаунтом'
    - assert: в той же вкладке открылся профайл пользователя в домене passport.yandex.ru
    - do: вернуться на страницу примера, перезагрузить страницу, вызвать попап с меню кликом в имя пользователя 
    - do: кликнуть в пункт 'Добавить аккаунт'
    - assert: в той же вкладке открылась страница в домене passport.yandex.ru с формой входа и регистрации (в попапе)
    - do: вернуться на страницу примера, перезагрузить страницу, вызвать попап с меню кликом в имя пользователя 
    - do: кликнуть в пункт 'Настройки'
    - assert: в той же вкладке открылась страница настроек Яндекса # https://yandex.ru/tune/
    - do: вернуться на страницу примера, перезагрузить страницу, вызвать попап с меню кликом в имя пользователя 
    - do: кликнуть в пункт 'Помощь'
    - assert: в той же вкладке открылась страница Яндекс.Помощи # https://yandex.ru/support/
    - do: вернуться на страницу примера, перезагрузить страницу, вызвать попап с меню кликом в имя пользователя 
    - do: кликнуть в пункт 'Выйти'
    - assert: страница перезагрузилась, имя и аватарка пользователя в примере больше не отображаются


  Проверить корректность работы примера №2(Пример с автоматической ajax-подзагрузкой аккаунтов и непрочитанных писем):
#    - do: Это блок должен вести себя так же как и предыдущий, у блоков есть небольшая разница в реализации. Проверить внешний вид блока после авторизации, ссылки, реакция блока на действия при помощи клавиатуры и мышки.

   Общий вид и ховеры:

    - assert: После авторизации отображается аватарка пользователя с количеством непрочитанных писем и имя пользователя (логин), в имени первая буква выделена красным цветом
    - do: навести курсор мыши на имя пользователя (без клика)
    - assert: цвет шрифта изменился на красный
    - do: убрать курсор мыши с имени пользователя
    - assert: вернулись исходные цвета шрифта (красным выделена только первая буква)
#    - do: навести курсор мыши на число непрочитанных писем
#    - assert: рядом отобразилось другое (большее) число (общее количество писем в ящике) # - Уточнить, что за число и всегда ли есть

   Попап - открытие, закрытие:

    - do: перезагрузить страницу
    - do: кликнуть в имя пользователя
    - assert: открылся попап с меню
    - do: нажать на клавиатуре 'Esc'
    - assert: попап с меню исчез
    - do: кликнуть в аватарку пользователя
    - assert: снова открылся попап с меню
    - do: кликнуть в любую точку страницы вне попапа
    - assert: попап с меню исчез

   Попап - вид, ховеры, фокус:

    - do: перезагрузить страницу
    - do: кликнуть в имя пользователя 
    - assert: открылся попап с меню
    - assert: в попапе есть аватарка пользователя с количеством непрочитанных писем, имя пользователя (логин), полный адрес электронной почты, подменю с пунктами 'Почта', 'Управление аккаунтом', 'Выйти', пункт 'Добавить аккаунт' с иконкой слева, подвал с пунктами 'Настройки', 'Помощь'
    - assert: при наведении курсора мыши (без клика) на пункты 'Почта', 'Управление аккаунтом', 'Выйти', 'Добавить аккаунт' меняется (темнеет) цвет подложки у конкретного пункта
    - assert: при наведении курсора мыши (без клика) на пункты 'Настройки', 'Помощь' меняется (светлеет) цвет шрифта в конкретном пункте
    - assert: можно навести фокус кнопкой Tab на пункты 'Почта', 'Управление аккаунтом', 'Выйти', 'Добавить аккаунт', 'Настройки', 'Помощь', сочетанием Alt+Tab - также на аватарку пользователя


   Попап - ссылки:

    - do: перезагрузить страницу
    - do: вызвать попап с меню кликом в имя пользователя
    - do: кликнуть в пункт 'Почта'
    - assert: в той же вкладке открылся почтовый ящик пользователя в домене mail.yandex.ru
    - do: вернуться на страницу примера, перезагрузить страницу, вызвать попап с меню кликом в имя пользователя 
    - do: кликнуть в пункт 'Управление аккаунтом'
    - assert: в той же вкладке открылся профайл пользователя в домене passport.yandex.ru
    - do: вернуться на страницу примера, перезагрузить страницу, вызвать попап с меню кликом в имя пользователя 
    - do: кликнуть в пункт 'Добавить аккаунт'
    - assert: в той же вкладке открылась страница в домене passport.yandex.ru с формой входа и регистрации (в попапе)
    - do: вернуться на страницу примера, перезагрузить страницу, вызвать попап с меню кликом в имя пользователя 
    - do: кликнуть в пункт 'Настройки'
    - assert: в той же вкладке открылась страница настроек Яндекса # https://yandex.ru/tune/
    - do: вернуться на страницу примера, перезагрузить страницу, вызвать попап с меню кликом в имя пользователя 
    - do: кликнуть в пункт 'Помощь'
    - assert: в той же вкладке открылась страница Яндекс.Помощи # https://yandex.ru/support/
    - do: вернуться на страницу примера, перезагрузить страницу, вызвать попап с меню кликом в имя пользователя 
    - do: кликнуть в пункт 'Выйти'
    - assert: страница перезагрузилась, имя и аватарка пользователя в примере больше не отображаются

  Проверить корректность работы примера №3:
# Добавлено ради соответствия пункту 'Пример с автоматической ajax-подгрузкой аккаунтов и непрочитанных писем (maxAccounts: 10)'

   Общий вид и ховеры:

    - assert: После авторизации отображается аватарка пользователя с количеством непрочитанных писем и имя пользователя (логин), в имени первая буква выделена красным цветом
    - do: навести курсор мыши на имя пользователя (без клика)
    - assert: цвет шрифта изменился на красный
    - do: убрать курсор мыши с имени пользователя
    - assert: вернулись исходные цвета шрифта (красным выделена только первая буква)
#    - do: навести курсор мыши на число непрочитанных писем
#    - assert: рядом отобразилось другое (большее) число (общее количество писем в ящике) # - Уточнить, что за число и всегда ли есть

   Попап - открытие, закрытие:

    - do: перезагрузить страницу
    - do: кликнуть в имя пользователя
    - assert: открылся попап с меню
    - do: нажать на клавиатуре 'Esc'
    - assert: попап с меню исчез
    - do: кликнуть в аватарку пользователя
    - assert: снова открылся попап с меню
    - do: кликнуть в любую точку страницы вне попапа
    - assert: попап с меню исчез

   Попап - вид, ховеры, фокус:

    - do: перезагрузить страницу
    - do: кликнуть в имя пользователя 
    - assert: открылся попап с меню
    - assert: в попапе есть аватарка пользователя с количеством непрочитанных писем, имя пользователя (логин), полный адрес электронной почты, подменю с пунктами 'Почта', 'Управление аккаунтом', 'Выйти', пункт 'Добавить аккаунт' с иконкой слева, подвал с пунктами 'Настройки', 'Помощь'
    - assert: при наведении курсора мыши (без клика) на пункты 'Почта', 'Управление аккаунтом', 'Выйти', 'Добавить аккаунт' меняется (темнеет) цвет подложки у конкретного пункта
    - assert: при наведении курсора мыши (без клика) на пункты 'Настройки', 'Помощь' меняется (светлеет) цвет шрифта в конкретном пункте
    - assert: можно навести фокус кнопкой Tab на пункты 'Почта', 'Управление аккаунтом', 'Выйти', 'Добавить аккаунт', 'Настройки', 'Помощь', сочетанием Alt+Tab - также на аватарку пользователя


   Попап - ссылки:

    - do: перезагрузить страницу
    - do: вызвать попап с меню кликом в имя пользователя
    - do: кликнуть в пункт 'Почта'
    - assert: в той же вкладке открылся почтовый ящик пользователя в домене mail.yandex.ru
    - do: вернуться на страницу примера, перезагрузить страницу, вызвать попап с меню кликом в имя пользователя 
    - do: кликнуть в пункт 'Управление аккаунтом'
    - assert: в той же вкладке открылся профайл пользователя в домене passport.yandex.ru
    - do: вернуться на страницу примера, перезагрузить страницу, вызвать попап с меню кликом в имя пользователя 
    - do: кликнуть в пункт 'Добавить аккаунт'
    - assert: в той же вкладке открылась страница в домене passport.yandex.ru с формой входа и регистрации (в попапе)
    - do: вернуться на страницу примера, перезагрузить страницу, вызвать попап с меню кликом в имя пользователя 
    - do: кликнуть в пункт 'Настройки'
    - assert: в той же вкладке открылась страница настроек Яндекса # https://yandex.ru/tune/
    - do: вернуться на страницу примера, перезагрузить страницу, вызвать попап с меню кликом в имя пользователя 
    - do: кликнуть в пункт 'Помощь'
    - assert: в той же вкладке открылась страница Яндекс.Помощи # https://yandex.ru/support/
    - do: вернуться на страницу примера, перезагрузить страницу, вызвать попап с меню кликом в имя пользователя 
    - do: кликнуть в пункт 'Выйти'
    - assert: страница перезагрузилась, имя и аватарка пользователя в примере больше не отображаются

files: []

v-team: lego

example: /with-passport/with-passport.html

manager:
  - kuznecov

qa-engineer:
  - spiker

priority:
  - high

tags:
  - bem
