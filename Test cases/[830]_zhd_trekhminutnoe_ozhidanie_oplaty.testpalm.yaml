feature: ЖД
type: Оплата
description: >-
  Кейс проверяет, что когда что-то пошло не так при оплате (заказ находится в
  статусе paid), ожидание оплаты для пользователя составляет 3 минуты (вместо 6
  минут раньше) и показывается соответствующее сообщение.

  * Попросить бэкенд-разработчика воспроизвести для тестинга такую ситуацию,
  чтобы статус заказа после ввода карты менялся на paid

  * Создать заказ на любое направление и любую дату, дойти до шага ввода карты.

  В тестинге можно использовать карту: _5100003697253468 01/20 090_

  * В оркестраторе использовать ФИО для воспроизведения "Впроцессе Ошибкаим
  Статусстраховки"
specs:
  'ЖД: Трехминутное ожидание оплаты':
    - do: 'На странице ввода карты ввести данные карты из описания, открыть консоль'
    - do: Кликнуть по кнопке Оплатить
    - assert: >-
        * Появился лоадер "Подождите, идет оплата билетов"

        * Через 30 секунд текст сменился на "Процесс оплаты занимает больше
        времени, чем обычно. Подождите ещё 3 минуты"

        * В консоли появилось событие _order_payment_delay_

        * Через 30 секунд текст сменился на "Процесс оплаты занимает больше
        времени, чем обычно. Подождите ещё 2 минуты"

        * Через минуту "Процесс оплаты занимает больше времени, чем обычно.
        Подождите ещё 1 минуту"

        * Через минуту билеты выкупились, произошел переход на страницу заказа
manual: true
Устройство: Десктоп
Страница: Оплата
Сервис: ЖД
Тестирование асессорами: Нет
Окружение: Testing
Автор: shenfeld
