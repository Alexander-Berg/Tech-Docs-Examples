feature: Реклама
type: Скрываем рекламы и показываем плашку

specs:
  Общие проверки:
    - params:
        exp_flags: 'freshness_adv_disabled=5'
        foreverdata: '3315150972'
    - do: получить выдачу по запросу "foreverdata"
    - assert: в выдаче есть плашка "Мы скрыли для вас рекламные ссылки"
    - assert: рекламы нет

  Плашка отсутствует:
    - params:
        exp_flags: 'freshness_adv_disabled=2'
        foreverdata: '1494457670'
        text: 'окна пвх'
    - do: получить выдачу по запросу "foreverdata"
    - assert: в выдаче нет плашки "Мы скрыли для вас рекламные ссылки"
    - assert: рекламы есть

  Плашка с отзывами (like):
    - params:
        text: 'foreverdata'
        foreverdata: '3315150972'
        exp_flags:
          - freshness_adv_disabled=5
          - intent_adv_disabled_reaction=1
    - do: получить выдачу по запросу "foreverdata"
    - assert: в выдаче есть плашка "По этому запросу мы скрыли от вас рекламные ссылки"
    - screenshot: внешний вид плашки должен соответствовать скриншоту [misspell-reactions]
    - do: кликнуть по кнопке Нравится (палец вверх)
    - screenshot: внешний вид плашки должен соответствовать скриншоту [misspell-reactions-liked]

  Плашка с отзывами (dislike):
    - params:
        text: 'foreverdata'
        foreverdata: '3315150972'
        exp_flags:
          - freshness_adv_disabled=5
          - intent_adv_disabled_reaction=1
    - do: получить выдачу по запросу "foreverdata"
    - assert: в выдаче есть плашка "По этому запросу мы скрыли от вас рекламные ссылки"
    - screenshot: внешний вид плашки должен соответствовать скриншоту [misspell-reactions]
    - do: кликнуть по кнопке Не нравится (палец вниз)
    - screenshot: внешний вид плашки должен соответствовать скриншоту [misspell-reactions-disliked]

files:
  - features/freshness_adv_disabled/freshness_adv_disabled@touch-phone.hermione.js

tags:
  - reviewed
  - no_assessors

tlds:
  - ru

v-team: Freshness
