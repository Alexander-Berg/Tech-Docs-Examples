feature: Колдунщик видео

tlds:
  - ru

priority: normal

specs:
  В просмотрщике открывается видео того источника который указан первым у видео в колдунщике:
    - tags: pp_new_core
    - do: получить выдачу по запросу "Toyota Land Gruiser Prado & Toyota Tundra" (альтернативный запрос "я худею")
    - assert: в колдунщике есть сниппет видео с дубликатами (если нет сменить запрос )
    - assert: |
        если источника только два - отображаются через запятую
        если источников больше двух - отображется один и надпись "еще n"
        в колдунщике нет дублей данного видео
    - do: выбрать сниппет с несколькими источниками
    - do: кликнуть по заголовку или превью в этом сниппете
    - assert: открылся просмотрщик с источником указанным первым в колдунщике

  Отображение источников в видео с фрагментами:
    - params:
        foreverdata: '621447914'
    - do: открыть выдачу по запросу 'foreverdata'
    - assert: |
        появился колдунщик видео
        в колдунщике отобразилась большая тумба с фрагментом и несколькими источниками
        отображается названия первых 2-х источников и надпись "и еще N"
    - screenshot: примерный вид видео c фрагментом [hosts-with-fragments]
  Переход на сайт источника по его урлу в колдунщике:
    - do: получить выдачу по запросу "Toyota Land Gruiser Prado & Toyota Tundra" (альтернативный запрос "я худею")
    - assert: в колдунщике есть сниппет видео с несколькими источниками (если нет сменить запрос)
    - assert: |
        если источника только два - отображаются через запятую
        если источников больше двух - отображется один и надпись "еще n"
    - do: нажать на урл первого источника
    - assert: открылся сайт источника указанный в урле
  Внешний вид с двумя источниками:
    - params:
        foreverdata: '3567899132'
    - do: открыть выдачу по запросу 'foreverdata'
    - assert: |
        появился колдунщик видео
        в колдунщике есть видео с двумя источниками
        названия источников отображены полностью
    - screenshot: примерный внешний вид [2-hosts]
  Внешний вид с количеством источников больше 2-х:
    - params:
        foreverdata: '3567899132'
    - do: открыть выдачу по запросу 'foreverdata'
    - assert: |
        появился колдунщик видео
        в колдунщике есть видео более чем с двумя источниками
        отображается название первого источника и надпись "и еще N"
    - screenshot: примерный внешний вид [many-hosts]

tags:
  - wizard
  - dedup

v-team: Video

files:
  - features/touch-phone/adapter-videowiz/deduplication.hermione.js
