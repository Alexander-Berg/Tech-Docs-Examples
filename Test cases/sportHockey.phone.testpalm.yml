feature: Страница хоккейного матча

specs:
  aliases:
    &goTo
      - do: открыть главную страницу сервиса Я.Спорт
#      - do: (для рана в ПП) открыть вертикаль Спорта в ПП тапом по иконке в бендере
#      - assert: на странице могут присутствовать футбольный и хоккейный календари с кнопками "Все матчи" справа от каждого из них
#      - assert: (Если блока Хоккей в матч-тизере нет, значит нет хоккейных матчей. В этом случае кейсы требуется скипнуть)
#      - do: открыть спортивный календарь тапом по "Все матчи" в матч-тизере напротив заголовка Хоккей
      - do: тапнуть на Матч-центр в рубрикаторе
      - assert: |
          произошел переход в матч-центр,
          в рубрикаторе выделена рубрика Матч-центр,
          в подрубрикаторе выделена вкладка Футбол и открыт футбольный календарь
#      - do: (для рана в ПП) открыть хоккейный календарь по прямой ссылке https://yandex.ru/sport/calendar/hockey (вставить в поисковую строку и нажать "Перейти")
      - do: тапнуть на Хоккей в подрубрикаторе матч центра https://jing.yandex-team.ru/files/nightsonne/2020-12-07_14-45-30.png (если вкладки Хоккей нет - пропустить кейс, так как матчи не проводятся в определенные периоды, например, летом)
      - assert: |
          открыт хоккейный календарь на вкладке Сегодня,
          хоккейный календарь содержит дата-пикер https://jing.yandex-team.ru/files/nightsonne/2020-04-13_18-51-29.png

  может содержать видео в мачте КХЛ [manual]:
    - tags: backend_sport
    - *goTo
    - do: тапнуть на дата-пикер и установить дату 13 октября 2021
    - assert: |
          открыт список матчей за 13 октября,
          некоторые матчи содержат иконку-индикатор видео, скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-11_16-18-53%20%282%29.png
    - do: перейти на страницу хоккейного матча тапом на матч с иконкой видео
    - assert: |
          страница матча может содержать блок c видео,
          скрин https://jing.yandex-team.ru/files/kossakovskaya/2021-10-14_16-34-41.png
    - do: тапнуть на кнопку плей по центру видео
    - assert: |
          в новой вкладке открывается страница сервиса video.khl.ru
          видео на странице соответствует тому матчу, с которого вы перешли
    - do: вернуться на сервис Спорт и поскроллить карусель видео
    - assert: | 
          карусель скроллится,
          на первом видео-превью отображается время - длительность видео,
          на последующих видео время не отображается,
          каждое видео содержит подпись момента (максимум 3 строки),
          длинные названия моментов корректно обрезаются многоточием
    - do: тапнуть на любое видео в карусели
    - assert: |
          в новой вкладке открывается страница сервиса video.khl.ru
          видео на странице соответствует тому матчу, с которого вы перешли
  
  может содержать видео в мачте НХЛ [manual]:
    - tags: backend_sport
    - *goTo
    - do: тапнуть на дата-пикер и установить дату 12 мая 2021
    - assert: открыт список матчей за 12 мая
    - do: авторизоваться пользователем с подпиской Плюс (логин и пароль можно взять тут - https://wiki.yandex-team.ru/eva/testing/projects/nerpa/#loginyiparolidljatestovyxpolzovatelejjspodpiskojjpljusa)
    - do: перейти на страницу хоккейного матча НХЛ тапом на матч
    - assert: |
          страница матча может содержать блок "Видео о матче", 
          скрин - https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-30%20в%2014.19.39.png,
    - do: поскроллить карусель видео
    - assert: | 
          карусель скроллится,
          на видео-превью отображается время - длительность видео,
          каждое видео содержит подпись момента (может быть 2-3 строки),
          длинные названия моментов корректно обрезаются многоточием
    - do: тапнуть на любое видео в карусели
    - assert: |
          открывается просмотрщик,
          видео воспроизводится сначала, 
          ВНИМАНИЕ! Если вы проходите кейс не из РФ - вместо видео может отображаться заглушка "Нет доступных лицензий", и это не баг (в этом случае пропустите шаг),
          внешний вид для пользователя не из России - https://jing.yandex-team.ru/files/vasekerka/2022-01-11_12-58-09.png

  из списка прошедших матчей содержит хоккейный виджет [manual]:
    - tags: backend_sport
    - *goTo
    - do: тапнуть на вкладку Вчера или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу хоккейного матча тапом на матч со счетом
    - assert: |
          страница матча содержит хоккейный виджет,
          виджет содержит название лиги, статус матча, для завершенных матчей - дату завершения (или вчера/сегодня), названия команд, счет,
          при победе по буллитам или в овертайме виджет содержит соответствующее указание под названием лиги,
          счет и название команды-победителя выделено жирным шрифтом,
          внешний вид - https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-29%20в%2014.44.38.png

  из блока 'Завтра' содержит хоккейный виджет [manual]:
    - tags: backend_sport
    - *goTo
    - do: тапнуть на вкладку Завтра
    - do: перейти на страницу хоккейного матча тапом на матч в разделе 'Завтра' (если матчей в этот день не будет, пропустите кейс)
    - assert: |
          страница матча содержит хоккейный виджет,
          виджет содержит название лиги, названия команд, надпись 'Завтра'

#  из блока 'Завтра' может содержать превью трансляции матча [manual]:
#    - *goTo
#    - do: перейти на страницу хоккейного матча тапом на матч в разделе 'Завтра' (проще найти в матчах НХЛ)
#    - assert: страница матча может содержать видео - превью трансляции матча
#    - do: тапнуть на любое видео
#    - assert: в новой вкладке открывается страница трансляции на сервисе Яндекс.Эфир (или другом сервисе) с превью и временем начала матча

  из списка прошедших матчей может содержать блок 'Ход матча' [manual]:
    - tags: backend_sport
    - *goTo
    - do: тапнуть на вкладку Вчера или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу хоккейного матча тапом на матч со счетом
    - assert: |
        страница матча может содержать блок 'Ход матча' (если в данном матче блока нет, открыть другой матч),
        блок содержит логотипы команд или флаги стран,
        в блоке отображаются все события матча с подписью характера события и времения,
        голы отмечены значком шайбы, буллиты - иконкой с буквой Б поверх шайбы,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-11_17-35-36.png

  из списка прошедших матчей может содержать блок 'Состав' [manual]:
    - tags: backend_sport
    - *goTo
    - do: тапнуть на вкладку Вчера или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 29 мая 2021 матч Швейцария - Россия)
    - do: перейти на страницу хоккейного матча тапом на матч со счетом
    - assert: |
        страница матча может содержать блок 'Состав' (если в данном матче блока нет, открыть другой матч),
        в блоке есть переключатель состава команд с лого и названием команд,
        длинные названия команд корректно обрезаются многоточнием в переключателе и не выходят за рамки блока переключателя,
        по умолчанию отображается состав первой команды,
        рядом с фамилией игрока, забившего гол, есть иконка шайбы и счетчик с количеством голов,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-11_17-14-57.png
    - do: тапнуть по переключателю
    - assert: |
        с анимацией отобразился состав второй команды,
        в блоке с переключателем выделена вторая команда

  #из списка прошедших матчей может содержать карточки о связанных с матчем новостях [manual]:
  #  - tags: backend_sport
  #  - *goTo
  #  - do: тапнуть на вкладку Вчера или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 декабря 2020
  #  - assert: открыт список матчей за вчера (или за 5 декабря)
  #  - do: перейти на страницу хоккейного матча тапом на матч со счетом
  #  - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав', но ДО раздела 'Новости хоккея'
  #  - assert: |
  #      страница матча может содержать карточки о связанных с матчем новостях (если в данном матче карточек нет, открыть другой матч),
  #      карточки о связанных с матчем новостях (при наличии располагаются над заголовком Новости хоккея) содержат иконку добавления в избранное (но не содержат иконку лайка и комментария),
  #      скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-11_17-41-40.png
  #  - do: тапнуть по любой карточке о связанных с матчем новостях
  #  - assert: в новой вкладке открывается страница источника

  из списка прошедших матчей может содержать турнирную таблицу [manual]:
    - tags: backend_sport
    - *goTo
    - do: тапнуть на вкладку Вчера или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 29 мая 2021 матч Швейцария - Россия)
    - do: перейти на страницу хоккейного матча тапом на матч со счетом
    - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав'
    - assert: |
        страница матча может содержать блок 'Турнирная таблица' (если в данном матче блока нет, открыть другой матч),
        по умолчанию открыта вкладка той группы, к которой относятся команды данного матча,
        команды данного матча выделены жирным шрифтом,
        верстка таблицы корректна,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-12-18_14-40-38.png
    - do: попереключать вкладки в таблице
    - assert: вкладки переключаются, отображается новый список команд

  из списка прошедших матчей может содержать блок 'Другие матчи' [manual]:
    - tags: backend_sport
    - *goTo
    - do: тапнуть на вкладку Вчера или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 29 мая 2021 матч Швейцария - Россия)
    - do: перейти на страницу хоккейного матча тапом на матч со счетом
    - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав', 'Турнирная таблица'
    - assert: |
        страница матча может содержать блок 'Другие матчи' (если в данном матче блока нет, открыть другой матч),
        блок содержит названия и лого команд, время, дату, счет (в зависимости от того прошел матч или нет),
        внизу есть кнопка 'Все матчи',
        верстка блока корректна,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-12-18_14-49-50.png
    - do: тапнуть на любой матч в блоке 'Другие матчи'
    - assert: в той же вкладке открывается страница выбранного матча
    - do: вернуться назад
    - do: тапнуть на 'Все матчи'
    - assert: в той же вкладке открывается страница хоккейного календаря

  содержит Новости хоккея [manual]:
    - tags: backend_sport
    - *goTo
    - do: тапнуть на вкладку Вчера или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря 2020)
    - do: перейти на страницу хоккейного матча тапом на любой матч 
    - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав' до блока 'Новости хоккея'
    - assert: страница матча содержит новостные карточки
    - do: проскроллить страницу матча до лоадера
    - assert: загружаются новые карточки
    - do: проскроллить страницу на несколько порций карточек
    - assert: |
        новостной блок, помимо новостных карточек, может содержать карусель с видео и рекламные блоки,
        Обратите внимание! Карусели с видео может не быть, либо она может быть расположена среди карточек очень далеко (нужно долго скролить). Это ок, заводить на такое баги не нужно!
        карусели видео скроллятся
    - do: тапнуть по заголовку или картинке любой новостной карточки
    - assert: в той же вкладке открывается сюжет
    - do: перейти назад на страницу хоккейного матча
    - do: тапнуть по любому видео в любой карусели (если в матче все видео имеют надпись 'На сайте КХЛ' то откройте матч из чемпионата  НХЛ)
    - assert: |
        в текущей вкладке в просмотрщике открывается видео,
        ВНИМАНИЕ! Если вы проходите кейс не из РФ - вместо видео может отображаться заглушка "Нет доступных лицензий", и это не баг (в этом случае пропустите шаг),
        внешний вид для пользователя не из России - https://jing.yandex-team.ru/files/vasekerka/2022-01-11_12-58-09.png

files: []

qa-engineer:
  - nightsonne

manager: mrwhite

tlds:
  - ru
  - ua
  - by
  - kz
  - uz
  - com
