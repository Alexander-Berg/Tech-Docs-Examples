feature: Чат-лист Очереди

import-steps:
    - tests/hermione/suites/desktop/shared-steps/backoffice.testpalm.steps.yml
    - tests/hermione/suites/desktop/shared-steps/new-dialogue.testpalm.steps.yml
    - tests/hermione/suites/desktop/shared-steps/open-backoffice.testpalm.steps.yml

tlds: ru

specs:
    Отображение дефолтного аватара чата:
        - automation: YDO-6833
        - attach: Открытие Очереди
        - assert: в списке чатов отображается картинка "буква К и первая цифра номера клиента"
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/tony-prots/45A.0BK_2019-04-16_10-46-48.png]

    Контекстное меню чата:
        - automation: YDO-6833
        - attach: Открытие Очереди
        - do: нажать правой кнопкой мыши на любой чат в списке чатов
        - assert: контекстное меню чата не открылось

    Отображение последнего короткого отправленного сообщения:
        - automation: YDO-6833
        - attach: Открытие Очереди
        - assert: отправленное сообщение отображается в чате в списке чатов, например "Текст_Вашего_Отправленного_Сообщения"
        # - screenshot: пример внешнего вида

    Отображение последнего полученного длинного сообщения:
        - automation: YDO-6833
        - do: перейти по ссылке https://yandex.ru/chat?build=chamb&guid=7162de39-4140-455f-9c2a-5966b6d4b4b8 в режиме инкогнито
        - assert: открылся диалог с организацией
        - do: в поле ввода ввести сообщение больше 4 строк
        - do: кликнуть/тапнуть по кнопке отправки
        - attach: Авторизация и открытие бэкоффиса
        - assert: открылась админка на вкладке Очередь
        - assert: в списке чатов полученное сообщение отображается в виде допустимого количества символов, а остальные символы заменены на "...", например "Текст_Полученного_длинного_сообщ..."
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/tony-prots/2019-05-21_16-42-17.png]

    Скролл ползунком:
        - automation: YDO-6833
        - do: перейти по ссылке https://yandex.ru/chat?build=chamb&guid=7162de39-4140-455f-9c2a-5966b6d4b4b8 в режиме инкогнито
        - assert: открылся диалог с организацией
        - do: написать короткое сообщение организации
        - do: повторить шаги 1-3 четыре раза (каждый раз переоткрывая окно с режимом инкогнито или используя иной браузер)
        - attach: Авторизация и открытие бэкоффиса
        - assert: открылась админка на вкладке Очередь
        - do: уменьшить размер окна с админкой, что бы был возможен скролл в списке чатов
        - do: навести курсор на список чатов
        - assert: отобразился ползунок скролла
        - do: навести курсор на ползунок
        - assert: ползунок увеличился  в размере
        - do: проскроллить вниз списка чатов с помощью ползунка
        - assert: список чатов скроллится

    Скролл мышью-трекпадом:
        - automation: YDO-6833
        - do: перейти по ссылке https://yandex.ru/chat?build=chamb&guid=7162de39-4140-455f-9c2a-5966b6d4b4b8 в режиме инкогнито
        - assert: открылся диалог с организацией
        - do: написать короткое сообщение организации
        - do: повторить шаги 1-3 четыре раза (каждый раз переоткрывая окно с режимом инкогнито или используя иной браузер)
        - attach: Авторизация и открытие бэкоффиса
        - assert: открылась админка на вкладке Очередь
        - do: уменьшить размер окна с админкой, что бы был возможен скролл в списке чатов
        - do: навести курсор на список чатов
        - do: с помощью колесика мыши или трекпада просклоллить список чатов вниз
        - assert: список чатов скроллится

    Cортировка по времени последнего сообщения в чате:
        - automation: YDO-6833
        - do: перейти по ссылке https://yandex.ru/chat?build=chamb&guid=7162de39-4140-455f-9c2a-5966b6d4b4b8 в режиме инкогнито
        - assert: открылся диалог с организацией
        - do: написать сообщение организации
        - do: повторить последние три шага три раза (каждый раз переоткрывая окно с режимом инкогнито или используя иной браузер)
        - attach: Авторизация и открытие бэкоффиса
        - assert: открылась админка на вкладке Очередь
        - do: нажать на любой чат
        - do: отправить в него сообщение
        - do: повторить последние два действия один раз
        - assert: в списке чатов сначала идут чаты, где последнее сообщение написано не из админки, чаты сортируются по времени (сверху показываются самые старые). После идут чаты, где последнее сообщение - от вас, из админки, чаты сортируются по времени (сверху показываются самые свежие).


    Отображение времени отправки последнего сообщения:
        - automation: YDO-6833
        - attach: Открытие Очереди
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/tony-prots/2019-05-21_16-35-41.png]
        - assert: у чата отображается время отправки последнего сообщения в формате ЧЧ:ММ

files: []

v-team: Uslugi

tags:
    - no_assessors
    - skip_manual_check
    - floyd
