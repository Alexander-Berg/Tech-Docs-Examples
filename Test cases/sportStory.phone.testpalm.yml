feature: Спортивный сюжет

description: Сюжет - это основная сущность сервиса, которая состоит из нескольких блоков. Блоки заголовка, суммаризации и медиаблок позволяют пользователю ознакомиться с кратким содержанием сюжета, блок Подробнее о событии предоставляет пользователю выбор информационного агентства для полного ознакомления с сюжетом

specs:
  имеет внешний вид [manual]:
    - tags: backend_sport
    - do: открыть любой сюжет на сервисе Я.Спорт
    - assert: |
        на странице сюжета отображается заголовок с источником над ним,
        присутствует суммаризация сюжета, соответствующая заголовку, и наименование источника,
        сюжет может содержать медиаблок с фото или видео,
        ниже может отображаться блок 'Подробнее о событии' с источниками,
        внешний вид https://jing.yandex-team.ru/files/nightsonne/2022-05-19_19-34-00.png

  должен содержать ссылки на источник [manual]:
    - tags: backend_sport
    - do: открыть любой сюжет на сервисе Я.Спорт
    - assert: |
        открывается страница выбранного сюжета,
        над заголовком отображается название источника,
        после пункта суммаризации располагается наименование источника (выделен серым цветом - https://jing.yandex-team.ru/files/kossakovskaya/2021-10-18_20-15-45.png)
    - do: тапнуть по названию источника над заголовком
    - assert: |
        страница источника открывается в новой вкладке,
        если это турбо-источник, то в url доменом будет указано 'turbopages.org' либо 'turbo.site' (где site - название сайта-источника сюжета)
    - do: вернуться на страницу сюжета Яндекс.Спорт
    - do: тапнуть по наименованию источника в блоке суммаризации 
    - assert: |
        в новой вкладке (либо в текущей, не имеет значения в данном случае) открылась новость от выбранного источника,
        тема сюжета в источнике совпадает с темой сюжета, с которого вы перешли по ссылке источника,
        если это турбо-источник, то в url доменом будет указано 'turbopages.org' либо 'turbo.site' (где site - название сайта-источника сюжета)

  может содержать блок 'Подробнее о событии' [manual]:
    - tags: backend_sport
    - do: открыть сюжет из блока Главные новости на Главной сервиса Я.Спорт
    - assert: |
        в сюжете под суммаризацией или медиаблоком присутствует блок 'Подробнее о событии' с источниками по сюжету (в виде горизонтальной карусели),
        в карусели не более 5 источников, если в одном из них есть блок "Самое цитируемое",
        в карусели не более 4 источников, если ни в одном нет блока "Самое цитируемое"
    - assert: внешний вид - https://jing.yandex-team.ru/files/nightsonne/2022-05-19_19-34-00.png
    - do: тапнуть по любому источнику
    - assert: |
        страница источника открывается в новой вкладке,
        если это турбо-источник, то в url доменом будет указано 'turbopages.org' либо 'turbo.site' (где site - название сайта-источника сюжета)

  может содержать ссылку на все источники по сюжету [manual]:
    - tags: backend_sport
    - do: открыть сюжет на Я.Спорт, который содержит блок 'Подробнее о событии' под суммаризацией или медиаблоком
    - assert: блок 'Подробнее о событии' содержит не менее 4х источников по сюжету (если меньше, перейти в другой сюжет)
    - do: кликнуть по заголовку 'Подробнее о событии'
    - assert: в новой вкладке осуществляется переход на страницу со всеми источниками по сюжету
    - assert: внешний вид https://jing.yandex-team.ru/files/kossakovskaya/2021-04-07_17-22-34.png

#  может содержать:
#    цитату [manual]:
#      - tags:
#        - backend_sport
#      - do: открыть сюжет на сервисе Я.Спорт, который содержит цитату, например, https://yandex.ru/sport/story/Berezuckij_nazval_CSKA_favoritom_gruppy_Kubka_Rossii--c099f44479cb7cb161a47d8a190f0e56?lang=ru&wan=1&stid=7YCkv-k5AlLbg_04wmAH&t=1628865100&persistent_id=155721005
#      - assert: |
#          после соц блока (эмоджи и комментарии) отображается цитата на сером фоне, под цитатой присутствует аватарка и фио автора,
#          внешний вид (скрин не сюжета по ссылке, а просто то, как должны выглядеть основные элементы) - https://jing.yandex-team.ru/files/kossakovskaya/2021-08-05_16-43-43.png ,
#          Обратите внимание! Соц блок в архивном сюжете может отсутствовать! Это ок, заводить баг на такое не нужно. Но можно отправить запрос на правку кейса, мы обновим ссылку на свежий сюжет
    
  может содержать блок "Самое цитируемое"[manual]:
    - do: перейти в сюжет https://yandex.ru/sport/story/aaa--b1416e2327d999f117779443095c179f и поскроллить ленту новостей ниже этого сюжета
    - assert: |
        каждый сюжет содержит до 5ти источников в карусели в блоке "Подробнее о событии",
        некоторые источники могут содержать блок "Самое цитируемое" под заголовком,
        внешний вид - https://jing.yandex-team.ru/files/umansai5/Снимок%20экрана%202022-05-16%20в%2014.51.49.png,
        ОБРАТИТЕ ВНИМАНИЕ! блок "Самое цитируемое" может отсутствовать в сюжетах - это нормально, баг заводить на это не нужно! 

  видео с автовоспроизведением [manual]:
      - tags: backend_sport
      - do: открыть нетраурный сюжет на сервисе Я.Спорт, содержащий видео
      - assert: |
          на секунду появляется спиннер в центре видео,
          видео воспроизводится автоматически, без звука(возможно автовоспроизведение рекламы)
      - do: включить звук у видео
      - assert: видео вопроизводится со звуком
      - do: обновить страницу
      - assert: обновляется страница сюжета, видео воспроизводится автоматически, без звука

  видео в траурном сюжете [manual]:
      - tags:
        - no_assessors
        - backend_sport
      - do: открыть траурный сюжет на сервисе Я.Спорт, который содержит видео
      - assert: |
          происходит переход на сюжет с видео, видео не воспроизводится автоматически,
          по центру изображения находится кнопка Плей
      - do: тапнуть по кнопке плей
      - assert: видео воспроизводится без звука

  подгружает ленту под сюжетом после включения интернета [manual]:
    - tags: backend_sport
    - do: открыть сюжет из ленты на Главной (после блока Главные новости и рекламы) на сервисе Я.Спорт
    - assert: открывается соответствующий сюжет
    - do: пролистать сюжет ниже блока 'Подробнее о событии'
    - assert: отображается рекламный блок, ниже подгружается новостная лента
    - do: отключить интернет на устройстве
    - do: пролистать страницу вниз
    - assert: под последней карточкой в ленте серый фон со спиннером
    - do: включить интернет на устройстве
    - assert: появляется спинер, подгружается следующая порция карточек

#  содержит комментарии [manual]:
#    - tags: backend_sport
#    - assert: комментарии писать строго ЗАПРЕЩЕНО
#    - do: открыть любой сюжет на сервисе Я.Спорт
#    - assert: |
#        под аннотацией отображается бабл, слово Комментировать и счетчик комментариев (при нуле счетчик не отображается),
#        внешний вид - https://jing.yandex-team.ru/files/terenandrevna/2020-03-31_12.05.43-Yfa5W.png
# расскомментить и отредактировать, если вернут сюжеты в ленте под сюжетом вместо рубрики
#  отображает соответствующее заголовку название таба в браузере [manual]:
#    - do: открыть любой сюжет на сервисе
#    - assert: |
#        произошел переход на сюжет,
#        заголовок сюжета соответствует названию таба браузера, внешний вид - https://jing.yandex-team.ru/files/e-l-agafon0va/2020-01-14-8.png
#    - do: поскроллить вниз (чтоб предыдущий сюжет скрылся за границей экрана)
#    - assert: |
#        отображаются карточки ленты новостей раздела "Главное",
#        название таба браузера не меняется

  подгружает ленту новостей под сюжетом [manual]:
    - tags: backend_sport
    - do: открыть любой сюжет на Главной сервиса Я.Спорт
    - do: проскроллить сюжет ниже блока 'Подробнее о событии'
    - assert: отображается рекламный блок, ниже подгружается новостная лента
    - do: проскроллить страницу вниз
    - assert: |
        подгружается новая порция сюжетов,
        при медленном соединении перед подгрузкой может отобразиться спинер на серой подложке

  архивный отображается корректно [manual]:
    - tags:
      - backend_sport
    - do: открыть архивный сюжет на сервисе, например, https://yandex.ru/sport/story/a--356b79377bda6d9132a6bedf7fb6ab9c
    - assert: |
        сюжет отображается корректно,
        присутствуют заголовок, аннотация сюжета и ссылка "В источнике"
        над заголовком присутствует источник
    - assert: внешний вид соответствует скриншоту - https://jing.yandex-team.ru/files/nightsonne/2022-05-19_19-40-51.png
    - do: перейти по ссылке 'В источнике'
    - assert: в новой вкладке открывается новость от источника
    - do: вернуться к сюжету, кликнуть по любому источнику из блока Подробнее о событии
    - assert: в новой вкладке открывается новость от источника
    - do: вернуться к сюжету, проскроллить сюжет ниже блока 'Подробнее о событии'
    - assert: подгружается новостная лента раздела "Главное"

# дивной карточки спорта на морде больше нет
#  открывается с главной страницы Яндекса [manual]:
#    - tags:
#      - backend_sport
#    - do: открыть главную страницу yandex.ru
#    - do: проскроллить страницу вниз до дивной карточки Спорта (если вы не можете ее найти в ленте, проверьте, включен ли блок в ваших настройках - откройте yandex.ru с десктопа под вашим аккаунтом и в настройках блоков проверьте, включен ли блок https://jing.yandex-team.ru/files/kossakovskaya/2021-04-19_18-22-54.png)
#    - assert: |
#          на главной Яндекса присутствует дивная карточка Спорта,
#          дивная карточка состоит из карусели карточек Спорта, содержащих картинку и заголовок,
#          внешний вид https://jing.yandex-team.ru/files/nightsonne/2020-12-07_18-53-04.png
#    - do: тапнуть по картинке первой карточки в карусели
#    - assert: |
#          открывается сюжет в той же вкладке,
#          тематика сюжета та же, что и в дивной карточке (может отличаться заголовок и источник),
#          сюжет имеет заголовок и источник над ним,
#          присутствует аннотация сюжета, соответствующая заголовку, и ссылка В источнике,
#          ниже расположен бабл Комментировать,
#          сюжет может содержать медиаблок с фото или видео,
#          сюжет может содержать блок 'С чего все начиналось',
#          ниже может отображаться блок 'Подробнее о событии' с тремя источниками,
#          под сюжетом расположен рекламный блок,
#          под рекламой находится лента
#    - do: тапнуть на название источника над заголовком
#    - assert: в новой вкладке открывается новость от источника
#    - do: вернуться на страницу сюжета
#    - do: перейти по ссылке 'В источнике'
#    - assert: в новой вкладке открывается та же новость от источника
#    - do: вернуться на страницу сюжета
#    - assert: в сюжете под аннотацией, цитатой или блоком 'С чего все начиналось' может присутствовать блок 'Подробнее о событии' с источниками по сюжету (до трех)
#    - assert: внешний вид - https://jing.yandex-team.ru/files/e-l-agafon0va/2020-01-10-5.png
#    - do: тапнуть по любому источнику в списке
#    - assert: в новой вкладке открывается страница с новостью от источника
#    - do: вернуться на страницу сюжета
#    - do: проскроллить вертикаль вниз до спиннера
#    - assert: |
#        под сюжетом грузится лента,
#        после спиннера грузится новая порция карточек

  содержит блок суммаризации [manual]:
    - tags:
      - backend_sport
    - do: открыть любой сюжет на сервисе
    - assert: |
        страница сюжета открывается в той же вкладке, 
        блок суммаризации в свернутом состоянии, 
        отображается первый пункт и ссылка "Читать далее"
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-10-18_20-09-51.png
    - do: тапнуть по ссылке "Читать далее"
    - assert: |
        раскрывается весь блок суммаризации, 
        отображаются следующие 3 пункта, всего в блоке должно быть 4 пункта,
        в конце блока суммаризации отображается ссылка "Свернуть", 
        все пункты суммаризации относятся к теме сюжета, 
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-10-18_20-10-30.png

files: []

manager: mrwhite

qa-engineer: nightsonne

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
