feature: Объектный ответ
type: Оценки фильмов

counter: /$page/$parallel/$result[@wizard_name="entity_search"]/tabs/main/object-badge/ratings-list/stars/about

specs-integration:
  Базовое поведение оценки в карточке:
    - do: получить выдачу по запросу 'квантовый скачок'
    - assert: в карточке фильма есть звезды
    - do: кликнуть по звезде
    - assert: звезда выставилась

specs:
  beforeEach:
    - do: под залогином получить выдачу по запросу 'квантовый скачок'
    - assert: |
        появилась карточка фильма,
        в карточке есть рейтинг
  Выставление оценки в карточке:
    - screenshot: внешний вид рейтинга в карточке [ratings]
    - do: кликнуть на первую звезду
    - assert: выставилась оценка 1
    - screenshot: оценка 1 оставлена [first-checked]
    - tech: сработал счетчик $page.$parallel.$result.tabs.main.object-badge.ratings-list.stars.rating-dynamic, data.action=set
    - do: кликнуть на пятую звезду
    - assert: оценка изменилась на 5
    - screenshot: оценка изменена на 5 [fifth-checked]
    - tech: сработал счетчик $page.$parallel.$result.tabs.main.object-badge.ratings-list.stars.rating-dynamic, data.action=change
    - do: кликнуть на пятую звезду еще раз
    - assert: оценка сбросилась
    - tech: сработал счетчик $page.$parallel.$result.tabs.main.object-badge.ratings-list.stars.rating-dynamic, data.action=reset
    - assertMetrics: '*'
  Закрытие повторно открытого попапа:
    - do: кликнуть на вопросик (небольшой серый вопросик рядом с надписью 'Оцените сериал' или рядом со значением персонального рейтинга "Подходит вам")
    - assert: появилось модальное окно с описанием оценок (или с описанием персонального рейтинга)
    - do: нажать на крестик в попапе
    - assert: попап закрылся
    - do: повторно кликнуть на вопросик (небольшой серый вопросик рядом с надписью 'Оцените сериал' или рядом со значением персонального рейтинга "Подходит вам")
    - assert: появилось модальное окно с описанием оценок (или с описанием персонального рейтинга)
    - do: кликнуть по паранже вне попапа
    - assert: попап закрылся с первого раза
    - assertMetrics: '*'

files:
  - features/deskpad/z-entity-search/likes/likes.hermione.js
  - features/deskpad/z-entity-search/likes/likes.hermione.e2e.js

v-team: OO

tags:
  - reviewed
  - oo_rating

tlds:
  - ru
  - by
  - kz
  - ua
