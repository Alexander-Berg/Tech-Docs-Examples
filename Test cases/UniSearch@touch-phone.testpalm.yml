feature: Универсальный колдунщик образования

specs:
  Клик по ссылке:
    - tags: no_assessors
    - params:
        foreverdata: '4087341600'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче есть универсальный колдунщик образования
    - tech: |
        в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/item/link"
        и аттрибутами url, title и itemPos
    - do: кликнуть в первый сниппет в колдунщике
    - tech: сработал счётчик "/$page/$main/$result/unisearch_education/item/link"

  Обогащённое превью:
    params:
      foreverdata: '603351045'

    Счётчик закрытия по клику в паранжу:
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче есть универсальный колдунщик образования
      - do: нажать на первый курс в блоке
      - assert: отобразилось превью курса
      - do: тапнуть в затенённую область вне контента модального окна
      - assert: превью закрылось
      - tech: сработал счётчик 'preview-closed'

    Разметка контента baobab:
      - tags: no_assessors
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче есть универсальный колдунщик образования
      - do: кликнуть в первый сниппет в колдунщике
      - assert: появилось превью курса
      - tech: |
          в baobab дереве есть узел по пути "/$page/$main/$result/unisearch_education/preview_content"
          с атрибутами title и url
      - tech: |
          в baobab дереве есть узел по пути "/$page/$main/$result/unisearch_education/preview_content/key-value"
          c атрибутом duration
      - tech: |
          в baobab дереве есть узел по пути "$page/$main/$result/unisearch_education/preview_content/price-item"
          с атрибутами periodicity, full и discount
      - tech: |
          в baobab дереве есть узел по пути "$page/$main/$result/unisearch_education/preview_content/extended-text"
          с атрибутами type и cutted
      - tech: |
          в baobab дереве есть узел по пути "$page/$main/$result/unisearch_education/preview_content/bullet-list"
          с атрибутом type

    Скрытие превью при возврате назад:
      - tags:
        - smoke
        - smoke_extended
        - pp_new_core
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче есть универсальный колдунщик образования
      - do: кликнуть в первый сниппет в колдунщике
      - assert: |
          появилось превью курса
      - do: нажать в браузере или на устройстве назад
      - assert: |
          превью курса скрылось
          страница не перезагрузилась
      - do: нажать в браузере вперед
      - assert: |
          превью курса снова отобразилось
          страница не перезагрузилась
      - do: скрыть превью курса свайпом вниз
      - assert: |
          превью курса скрылось
          страница не перезагрузилась

    UGC отзывы:
      Внешний вид:
        - tags:
          - smoke
          - smoke_extended
          - pp_new_core
        - params:
            foreverdata: '3361526588'
        - do: получить выдачу по запросу "foreverdata"
        - assert: на выдаче есть универсальный колдунщик образования
        - do: нажать на первый курс в блоке
        - assert: отобразилось превью курса
        - do: проскроллить страницу до блока с отзывами
        - screenshot: внешний вид блока отзывов соответствует скриншоту [plain]

      Курсы где 0 отзывов:
        - params:
            foreverdata: '1906630350'
        - do: получить выдачу по запросу "foreverdata"
        - assert: на выдаче есть универсальный колдунщик образования
        - do: нажать на первый курс в блоке
        - assert: отобразилось превью курса
        - do: проскроллить страницу до блока с отзывами
        - assert: форма сбора отзывов отобразилась

  Курсы со скрытой ценой:
    params:
      foreverdata: '3975423565'

    Внешний вид в заголовке превью:
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче есть универсальный колдунщик образования
      - do: кликнуть в сниппет в колдунщике
      - screenshot: внешний вид описания курса в шапке превью соответствует скриншоту [plain]

    Внешний вид кнопки:
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче есть универсальный колдунщик образования
      - do: кликнуть в сниппет в колдунщике
      - screenshot: внешний вид кнопки в подвале превью соответствует скриншоту [plain]

    Описание цены в шапке превью имеет правильную baobab-разметку:
      - tags: no_assessors
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче есть универсальный колдунщик образования
      - do: кликнуть в сниппет в колдунщике
      - tech: |
          в baobab дереве есть узел по пути "$page/$main/$result/unisearch_education/preview_content/price-item"
          с атрибутом text и значением "Цена на сайте"

  Cсылка на агрегатора в шторке:
    Внешний вид:
      - params:
          foreverdata: '920191366'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче есть универсальный колдунщик образования
      - do: кликнуть в сниппет в колдунщике
      - screenshot: внешний вид описания курса в шапке превью соответствует скриншоту [plain]

  Фильтры:
    params:
      foreverdata: '1116343441'

    Внешний вид:
      Сниппет:
        - do: получить выдачу по запросу 'foreverdata'
        - assert: на выдаче есть универсальный тематический блок образования
        - screenshot: внешний вид заголовка [plain]
      Шторка с направлениями:
        - tags:
          - smoke
          - smoke_extended
          - pp_new_core
        - do: получить выдачу по запросу 'foreverdata'
        - assert: на выдаче есть универсальный тематический блок образования
        - do: нажать на ссылку "Все направления" над заголовком
        - assert: открылось окно с выбором направлений
        - screenshot: внешний вид окна [plain]
      Шторка с профессиями:
        - tags:
          - smoke
          - smoke_extended
          - pp_new_core
        - do: получить выдачу по запросу 'foreverdata'
        - assert: на выдаче есть универсальный тематический блок образования
        - do: нажать на кнопку с надписью "Разработка на Python"
        - assert: открылось окно с выбором профессий
        - screenshot: внешний вид окна [plain]
      Шторка с общими фильтрами:
        - do: получить выдачу по запросу 'foreverdata'
        - assert: на выдаче есть универсальный тематический блок образования
        - do: нажать на кнопку с надписью "Цель обучения"
        - assert: открылось окно с выбором цели обучения, цены курса и требуемого опыта
        - screenshot: внешний вид окна [plain]
    Baobab-разметка:
      Кнопки фильтров в сниппете:
        - tags: no_assessors
        - do: получить выдачу по запросу 'foreverdata'
        - assert: на выдаче есть универсальный тематический блок образования
        - tech: |
            в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/filter-appendix"
            и атрибутом "text" = "Все направления"
        - tech: |
            в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/filters/filter-select-button"
            и атрибутом "title" = "Направление"
        - tech: |
            в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/scroller/filters/filter-select-button"
            и атрибутами "title" = "Цель обучения" и "order" = "1"
        - tech: |
            в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/scroller/filters/filter-select-button"
            и атрибутами "title" = "Цена курса" и "order" = "2"
        - tech: |
            в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/scroller/filters/filter-select-button"
            и атрибутами "title" = "Требуемый опыт" и "order" = "3"
      Шторка с направлениями:
        - tags: no_assessors
        - do: получить выдачу по запросу 'foreverdata'
        - assert: на выдаче есть универсальный тематический блок образования
        - do: нажать на ссылку "Все направления" над заголовком
        - assert: открылось окно с выбором направлений
        - tech: |
            в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/filters/filters-popup-content/filter-select-popup/filter-select-first-level-list-popup"
            и атрибутом "title" = "Направление"
        - tech: в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/filters/filters-popup-content/filters-cancel-button-popup"
        - tech: в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/filters/filters-popup-content/filters-accept-button-popup"
      Шторка с профессиями:
        - tags: no_assessors
        - do: получить выдачу по запросу 'foreverdata'
        - assert: на выдаче есть универсальный тематический блок образования
        - do: нажать на кнопку с надписью "Разработка на Python"
        - assert: открылось окно с выбором профессий
        - tech: |
            в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/filters/filters-popup-content/filter-select-popup/filter-select-second-level-list-popup"
            и атрибутом "title" = "Профессии"
        - tech: |
            в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/filters/filters-popup-content/filter-select-popup/filter-select-second-level-list-popup/filter-select-to-first-level-link-popup"
            и атрибутом "text" = "Направления"
        - tech: в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/filters/filters-popup-content/filters-cancel-button-popup"
        - tech: в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/filters/filters-popup-content/filters-accept-button-popup"
      Шторка с общими фильтрами:
        - tags: no_assessors
        - do: получить выдачу по запросу 'foreverdata'
        - assert: на выдаче есть универсальный тематический блок образования
        - do: нажать на кнопку с надписью "Цель обучения"
        - assert: открылось окно с выбором цели обучения, цены курса и требуемого опыта
        - tech: |
            в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/scroller/filters/filters-popup-content/filter-select-popup"
            и атрибутами "title" = "Цель обучения" и "order" = "1"
        - tech: |
            в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/scroller/filters/filters-popup-content/filter-select-popup"
            и атрибутами "title" = "Цена курса" и "order" = "2"
        - tech: |
            в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/scroller/filters/filters-popup-content/filter-select-popup"
            и атрибутами "title" = "Требуемый опыт" и "order" = "3"
        - tech: в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/scroller/filters/filters-popup-content/filters-cancel-button-popup"
        - tech: в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_education/scroller/filters/filters-popup-content/filters-accept-button-popup"
    Кликнутый фильтр поднимается в шторке:
      - tags:
        - smoke
        - smoke_extended
        - pp_new_core
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче есть универсальный тематический блок образования
      - do: нажать на кнопку с надписью "Цель обучения"
      - assert: открылось окно выбора параметров курсов
      - assert: порядок заголовков следующий - "Цель обучения", "Цена курса", "Требуемый опыт"
      - do: нажать на кнопку "Отмена"
      - assert: окно выбора параметров курсов закрылось
      - do: нажать на кнопку с надписью "Опыт"
      - assert: открылось окно выбора параметров курсов
      - assert: порядок заголовков следующий - "Требуемый опыт", "Цель обучения", "Цена курса"

files:
  - src/features/UniSearch/UniSearch.features/UniSearchEducation/UniSearchEducation.test/UniSearchEducation@touch-phone.hermione.js

v-team: UniSearch

tlds: [ru, by, ua, kz, uz]

tags:
  - react
  - skip_e2e_check
