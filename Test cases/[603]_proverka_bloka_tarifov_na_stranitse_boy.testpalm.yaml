feature: Авиа
type: ''
description: >-
  Как попасть на страницу бронирования аэрофлота:


  **Если вы тестируете тач-версию, можно для удобства создавать нужную ссылку на
  бронирование (или другие ссылки из кейсов) в десктопе, потом просто копировать
  и проверять кейс в таче.**


  * В поиске авиа поискать по направлению, по которому летает аэрофлот
  (например, Москва - Екатеринбург, или направление, указанное в кейсе).

  * Выбрать в фильтре по авиакомпаниям Аэрофлот

  * Кликнуть по сниппету с предложением Я.Путешествий (где есть приписка Продает
  авиакомпания).

  * На открывшейся странице кликнуть по кнопке Купить для Я.Путешествий. //
  произойдет переход на travel-test

  ![image](https://jing.yandex-team.ru/files/gouken67/aeroflot_to_travel.png)

  * **У Асессоров откроется travel.crowdtest** - должна открыться страница
  бронирования с формой ввода данных пассажиров



  Отсутствие лого АК не является багом или проблемой кейса!


  При переходе по ссылке на Правила применения тарифов может происходить
  редирект на другой адрес - важно проверить, что открывается страница,
  соответствующая по содержанию.

  Необходимо перейти на страницу бронирования, чтобы тарифов было больше двух
  (отображалась кнопка "Показать все тарифы"):

  https://jing.yandex-team.ru/files/shenfeld/2021-03-16_12.12.15-atnly.png
specs:
  Проверка блока тарифов на странице BOY:
    - do: Выполнить переход как описано в Description.
    - assert: >-
        1) Переход сработал, открылась страница бронирования

        2) Справа от информации о перелёте есть блок с тарифами (для тача - блок
        внизу страницы)

        3) Для каждого тарифа есть описание

        4) Для каждого тарифа есть название и цена

        5) Отображается 2 тарифа, дальше кнопка "Показать все тарифы"

        6) Вверху расположен самый недорогой вариант, ниже дороже

        https://jing.yandex-team.ru/files/iliasova/2020-11-18_21.53.02-7bl8l.png
    - do: Кликнуть по ссылке "Показать все тарифы"
    - assert: >-
        1) Открылось окно с выбором тарифа

        2) Выбранный тариф выделен жёлтой рамкой и вместо кнопки "Выбрать"
        кнопка "Текущий"

        3) Для каждого тарифа есть информация о возврате, обмене, ручной клади,
        багаже, милях (миль может и не быть)

        4) Для каждого тарифа есть название и цена - соответствует тем же, что
        показаны на странице ввода пассажиров

        5) Внизу блока есть ссылка на "Правила применения тарифов Авиакомпании"
        ссылка ведёт на страницу Правила применения тарифов на сайте Аэрофлота
        (ссылка ведет на
        https://www.aeroflot.ru/ru-ru/online_services/purchase/rate/fare_rules)

        https://jing.yandex-team.ru/files/iliasova/2020-11-18_21.55.14-jdbmd.png
    - do: Выбрать следующий по очерёдности тариф
    - assert: >-
        1) Попап закрылся

        2) Выбран указанный тариф

        3) В блоке "итого" цена соответствует выбранной

        4) В блоке выбора тарифов теперь отображается выбранный тариф и
        предыдущий по очерёдности

        https://jing.yandex-team.ru/files/megamgistr/Yandeks.Puteshestviya__aviabilety_bilety_na_poezd_bronirovanie_otelei_2019-04-01_12-09-59.png
    - do: |-
        Кликнуть по ссылке Показать все тарифы.
        В появившемся попапе кликнуть по кнопке Выбрать для следующего тарифа
    - assert: |-
        1) Попап закрылся
        2) Выбрался следующий тариф
        3) Цена в "Итого" соответствует указанной рядом с тарифом
    - do: Кликнуть по радиокнопке предыдущего тарифа
    - assert: >-
        1) Выбрался предыдущий тариф

        2) В блоке выбора тарифов теперь отображается выбранный тариф и
        предыдущий по очерёдности

        3) Цена в “Итого” соответствует указанной рядом с тарифом
    - do: Кликнуть по ссылке “Показать все тарифы”
    - assert: 1) Открылся попап с выбором тарифа
    - do: |-
        Кликнуть по крестику в попапе
        Для тача - по кнопке Вернуться к покупке
    - assert: |-
        1) Попап закрылся
        2) Тариф остался прежним
manual: true
Функциональность: Бронирование
Устройство:
  - Десктоп
  - Тач
tlds: hard
Сервис: Авиа
Тестирование асессорами: Да
Окружение: Testing
Tag: Smoke
