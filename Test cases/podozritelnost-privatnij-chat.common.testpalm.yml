feature: Подозрительность в приватных чатах

specs:

    Показывается замаскированная нотификация, если сообщение пришло от неизвестного собеседника[manual]:
        - automation:
        - description: |
              Ни в коем случае не удалять  спам-плашку в чате
              Пользователь А yndx-mssngr-900/QazMssngr1 (900Def-Имя-autotests D900) - авторизован в браузере в обычной вкладке
              Пользователь Б yndx-mssngr-940/QazMssngr1(940Def-Имя-autotests D940) - авторизован в этом же браузере, но во вкладке инкогнито 
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Зайти в Настройки и включить, если  надо "Получать уведомления", "Показывать текс собщений" и выключить "Получать фоновые уведомления" (если есть такой перключатель)
        - assert: Настройки уведомлений  выставлены верно
        - do: Открыть рядом новую пустую вкладку
        - assert: Рядом открыта новая пустая вкладка и она активна
        - do: Пользователем Б отправить сообщение пользователю А ( найти можно по имени 900Def-Имя-autotests D900)
        - assert: Сообщение ушло
        - do: Посмотреть пользователем А на пришедший пуш
        - assert: |
              В пуше указано следующее:
              Тайтл: Яндекс.Мессенджер от yandex.ru
              Текст: Новые сообщение
    
    Показывается плашка, если с вами пользователь не из вашей адресной книги создал приватный чата[manual]:
        - automation:
        - description: |
              Пользователем А не отвечать в чат пользователю Б, чтобы не испортить тестовые данные, что бы не пропала спам-плашка,   
              Пользователь А yndx-mssngr-900/QazMssngr1 (900Def-Имя-autotests D900)- авторизован в браузере в обычной вкладке
              Пользователь Б yndx-mssngr-903/QazMssngr1(903Def-Имя-autotests D903) - авторизован в этом же браузере, но во вкладке инкогнито
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Зайти в Настройки и включить, если  надо "Получать уведомления", "Показывать текс собщений" и выключить "Получать фоновые уведомления" (если есть такой перключатель)
        - assert: Настройки уведомлений  выставлены верно
        - do: Открыть рядом новую пустую вкладку
        - assert: Рядом открыта новая пустая вкладка и она активна        
        - do: Пользователем Б отправить сообщение пользователю А ( найти можно по имени 900Def-Имя-autotests D900)
        - assert: Сообщение ушло
        - do: Пользователем А перейти в чат с пользователем Б**!!!!!!Пользователем А Не писать сообщения пользователю Б**
        - assert: Чат открыт и есть спам плашка **СПАМ ПЛАШКУ НЕ ЗАКРЫВАТЬ И НИЧЕГО С НЕЙ НЕ ДЕЛАТЬ**
    
    Приходит НЕ замаскированная нотификация, если сняли подозрительность с чата[manual]:
        - automation:
        - description: |
              Пользователь А yndx-mssngr-900/QazMssngr1 (900Def-Имя-autotests D900)
              Пользователь Б yndx-mssngr-910/QazMssngr1(910Def-Имя-autotests D910) авторизован в этом же браузере, но во вкладке инкогнито
              Между пользователями была ранее снята подозрительность, поэтому спам плашки в приватном чате нет
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Зайти в Настройки и включить, если  надо "Получать уведомления", "Показывать текс собщений" и выключить "Получать фоновые уведомления" (если есть такой перключатель)
        - assert: Настройки уведомлений  выставлены верно
        - do: Открыть рядом новую пустую вкладку
        - assert: Рядом открыта новая пустая вкладка и она активна
        - do: Пользователем Б отправить сообщение пользователю А (найти можно по имени 900Def-Имя-autotests D900)
        - assert: Сообщение ушло
        - do: Посмотреть пользователем А на пришедший пуш
        - assert: |
              В пуш не замаскирован:
              есть- аватар(может быть и заглушка
              имя пользователя Б
              текст сообщения
    
files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
    - chamb
