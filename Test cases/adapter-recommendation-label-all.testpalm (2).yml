feature: Метка
type: Набор всех меток

specs-integration:
  Метка "Навигационный ответ" присутствует в выдаче:
    - counter: /$page/$main/$result/verified-list/verified/link
    - do: получить выдачу по запросу 'википедия'
    - assert: метка "Навигационный ответ" присутствует в выдаче [https://jing.yandex-team.ru/files/vtroshina/2021-10-28T07:26:53Z.d209023.png]

specs:
  aliases:
    - &BaseActions
      - do: получить выдачу по запросу 'foreverdata'
      - assert: органический сниппет с метками присутствует на странице
      # SERP-107331
      - screenshot: вид сниппета с метками (гринурл может состоять из 1 или 2х частей) [plain]
      - do: навести мышку на первую метку (для тачей - тапнуть в метку)
      - assert: появилась всплывающая подсказка с текстом (текст может отличаться) и ссылкой 'Подробнее о сайте'(текст ссылки может отличаться)
      # SERP-107331
      - screenshot: вид сниппета с меткой и подсказкой (гринурл может состоять из 1 или 2х частей) [hover-official]
      - tech: сработал счётчик показа тултипа c хвостом '/official/tooltip', vars='action=dynamic_click'
      - do: навести мышку на вторую метку (для тачей - тапнуть в метку)
      - assert: появилась всплывающая подсказка с текстом (текст может отличаться) и ссылкой 'Подробнее о сайте'(текст ссылки может отличаться)
      # SERP-107331
      - screenshot: вид сниппета с меткой и подсказкой (гринурл может состоять из 1 или 2х частей) [hover-green_trafic]
      - tech: сработал счётчик показа тултипа c хвостом '/green_trafic/tooltip', vars='action=dynamic_click'
      - do: кликнуть на ссылку 'Подробнее о сайте' (текст ссылки может отличаться) в подсказке
      - assert: произошел переход на страницу с информацией о сайте
      - tech: сработал счётчик на клик c хвостом 'green_trafic/link'
      - assertMetrics:
          - web.total_request_count
          - web.total_click_count
          - web.total_dynamic_click_count
          - web.abandonment
          - web.total_all_click
  В органике:
    - params:
        foreverdata: '1270476809'
    - *BaseActions
    - tech: значение метрики "web.total_request_count" == 1
    - tech: значение метрики "web.total_click_count" == 1
    - tech: значение метрики "web.total_dynamic_click_count" == 0
    - tech: значение метрики "web.abandonment" == 0
    - tech: значение метрики "web.total_all_click" == 1
  В рекламе:
    - tags:
        - smoke
    - params:
        foreverdata: '1270476809'
    - *BaseActions
    - tech: значение метрики "web.total_request_count" == 1
    - tech: значение метрики "web.total_click_count" == 0
    - tech: значение метрики "web.total_dynamic_click_count" == 0
    - tech: значение метрики "web.abandonment" == 100
    - tech: значение метрики "web.total_all_click" == 0
  Длинный гринурл:
    - tags: pp_new_core
    - params:
        foreverdata: '2435085004'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: органический сниппет с метками присутствует на странице
    - assert: метки находятся в одной строке с гринурлом
    - screenshot: вид сниппета с метками и длинным гринурлом [long-greenurl]
  С меткой свежести:
    - params:
        foreverdata: '1005922275'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: органический сниппет с метками и свежестью присутствует на странице
    - assert: метки и свежесть находятся в одной строке с гринурлом
    - screenshot: вид сниппета с метками и свежестью [freshness]

files:
  - features/touch-phone/adapter-recommendation-label/adapter-recommendation-label-all.hermione.js
  - features/touch-phone/adapter-recommendation-label/adapter-recommendation-label-all.hermione.e2e.js

tags:
  - reviewed

v-team: Beauty

tlds: all
