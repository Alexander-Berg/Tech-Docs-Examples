feature: Эмоджи

description: |
    Эмоджи - сущность в сюжете, позволяющая пользователям выразить свое мнение о новости посредством выбора реакции из набора эмоджи.
    Доступные эмоджи:
    Нравится - like
    Хаха - haha
    Ого - wow
    Скучно - bored
    Грустно - sad
    Возмутительно - angry
    Не нравится - dislike
specs:
  позволяют авторизованному пользователю оценить новость[manual]:
    - automation: NERPADUTY-54
    - do: авторизоваться на сервисе
    - do: перейти в сюжет без поставленных эмоджи (не из топа новостей)
    - assert: |
        под аннотацией есть кнопки "Оценить" со значком смайла,
        'Комментировать' (может быть только баббл комментария, а так же возможно отображение счетчика комментариев),
        'Поделиться' с черным значком,
        элементы расположены в одну строку, не наезжают друг на друга
    - do: тапнуть по кнопке Оценить
    - assert: |
        появляется блок с доступными эмоджи,
        все эмоджи отображаются корректно, блок эмоджи не выезжает за границу экрана
    - do: тапнуть по эмоджи
    - assert: |
        блок с эмоджи скрылся,
        выбранная эмоджи отобразилась вместо значка смайла, рядом появилась серая надпись "Вы оценили"
    - do: кликнуть "Вы оценили"
    - assert: на месте выбранной эмоджи, появился значок черный смайлик, рядом кнопка 'Оценить'
    - do: тапнуть по кнопке 'Оценить'
    - do: появляется блок с доступными эмоджи
    - do: выбрать другую эмоджи
    - assert: |
        блок с эмоджи скрылся,
        отображается только новая эмоджи
    - do: подождать 4 секунды, обновить страницу
    - assert: отображается только последняя выбранная эмоджи и серая надпись "Вы оценили"
    - do: авторизоваться под другим пользователем
    - do: в том же сюжете тапнуть по кнопке 'Оценить', выбрать эмоджи, отличную от ранее поставленной
    - assert: |
        отобразилась выбранная эмоджи, рядом появилась серая надпись "Вы +1"
        левее отображается топ эмоджи - эмоджи первого пользователя + выбранная эмоджи
  отображают топ популярных реакций и количество отреагировавших на новость[manual]:
    - automation: NERPADUTY-54
    - do: авторизоваться на сервисе
    - do: перейти в сюжет с количеством эмоджи > 1000
    - assert: |
         отображается топ из 3 самых популярных эмоджи, кнопка Оценить и количество оценивших '(N)K' (например, 2,2K),
         'Комментировать' (может быть только баббл комментария, а так же возможно отображение счетчика комментариев),
         'Поделиться' с черным значком,
         элементы расположены в одну строку, не наезжают друг на друга
    - do: тапнуть по кнопке Оценить, выбрать эмоджи
    - assert: |
        отображается топ из 3 самых популярных эмоджи, выбранная эмоджи расположена рядом с топом 3 и имеет больший размер,
        рядом появилась серая надпись "Вы +NK",
        'Комментировать' (может быть только баббл комментария, а так же возможно отображение счетчика комментариев),
        'Поделиться' с черным значком,
        элементы расположены в одну строку, не наезжают друг на друга, отображаются корректно
        количество N не изменилось
    - do: подождать 4 секунды, обновить страницу
    - assert: количество N не изменилось

  позволяют неавторизованному пользователю залогиниться, чтобы оценить новость[manual]:
    - automation: NERPADUTY-54
    - do: неавторизованным пользователем перейти в любой сюжет имеющий лайки
    - do: тапнуть на кнопку Оценить
    - assert: появляется блок с доступными эмоджи
    - do: тапнуть на эмоджи
    - assert: |
        блок с эмоджи скрылся,
        выбранная эмоджи отобразилась вместо значка смайла, рядом появилась серая надпись "Вы +N",
        левее отображается топ эмоджи

#кейс ждёт введения функциональности
#  не отображают позитивные реакции в топе эмоджи у траурных сюжетов[manual]:
#    - do: авторизованным пользователем перейти в траурный сюжет без лайков (смерть/пропажа людей, тяжелые травмы, терракт)
#    - do: навести курсор на кнопку Оценить, выбрать эмоджи "ха-ха" или "лайк"
#    - assert: отобразилась выбранная эмоджи, рядом появилась серая надпись "Вы оценили"
#    - do: авторизоваться под вторым пользователем, оставаясь на странице сюжета
#    - assert: отображается кнопка Оценить, эмоджи "ха-ха" и "лайк" не отображаются

  позволяют отменить реакцию[manual]:
    - automation: NERPADUTY-54
    - do: перейти в сюжет с эмоджи (из топа новостей)
    - assert: под аннотацией есть топ популярных эмоций, кнопка Оценить и количество оценивших
    - do: тапнуть по кнопке Оценить
    - assert: появляется блок с доступными эмоджи
    - do: выбрать любую эмоджи
    - assert: отобразилась выбранная эмоджи, рядом появилась серая надпись "Вы +N"
    - do: тапнуть на поставленную эмоджи
    - assert: |
        отображается топ популярных эмоций, кнопка Оценить и количество оценивших,
        выбранная эмоджи и надпись "Вы +N" пропали
    - do: подождать 4 секунды, обновить страницу
    - assert: отображается топ популярных эмоций, кнопка Оценить и количество оценивших

  cодержат кнопку, позволяющую поделиться новостью[manual]:
    - automation: NERPADUTY-54
    - do: перейти в нетраурный сюжет без лайков
    - assert: |
        под аннотацией есть кнопки "Оценить" со значком смайла,
        'Комментировать' (может быть только баббл комментария, а так же возможно отображение счетчика комментариев),
        'Поделиться' с черным значком,
        элементы расположены в одну строку, не наезжают друг на друга
    - do: тапнуть на кнопку Поделиться
    - assert: |
          появляется выпадающий список сервисов, в которых возможно поделиться сюжетом,
          выпадающий список отображается полностью на экране, не уезжает за границы экрана,
          список содержит пункт "Скопировать ссылку" или отображает саму ссылку, которую можно выделить и скопировать вручную (зависит от браузера)
    - do: проскроллить страницу вверх - вниз
    - assert: выпадашка при скролле не перекрывает рубрикатор и другие элементы страницы
    - do: тапнуть на любой сервис из списка
    - assert: в новом окне браузера открывается страница авторизации того сервиса, который был выбран
    - do: авторизоваться в форме и отправить сюжет в ленту сервиса
    - assert: на внешнем сервисе отобразится новая запись с ссылкой на сюжет сервиса Яндекс.Новости
    - do: на внешнем сервисе кликнуть по ссылке на сюжет сервиса Яндекс.Новости
    - assert: открывается сюжет на странице сервиса Яндекс.Новости
    - do: тапнуть по кнопке "Поделиться"
    - assert: |
          появляется выпадающий список сервисов, в которых возможно поделиться сюжетом,
          выпадающий список отображается полностью на экране, не уезжает за границы экрана,
          список содержит пункт "Скопировать ссылку" или отображает саму ссылку, которую можно выделить и скопировать вручную (зависит от браузера)
    - do: в выпадашке выбрать 'Скопировать ссылку'(если отображается ссылка - скопировать вручную)
    - do: создать новую вкладку в браузере
    - do: вставить скопированную ранее ссылку в адресную строку
    - assert: отображается страница сюжета

  отображают пользовательские реакции на домене отличном от ru [manual]:
    - automation: NERPADUTY-54
    - tags:
      - no_assessors
    - tlds:
      - ua
    - do: на домене ua авторизироваться на сервисе новостей
    - do: перейти в любой сюжет
    - do: тапнуть по кнопке Оценить
    - assert: появляется блок с доступными эмоджи
    - do: выбрать любую эмоджи
    - assert: отобразилась выбранная эмоджи, рядом появилась серая надпись "Вы +N"
    - do: подождать 4 секунды, перезагрузить страницу
    - assert: отобразилась выбранная эмоджи, рядом появилась серая надпись "Вы +N"

files: []

tags:
  - emoji
  - newsinturbo
  - backend_news

v-team: News

qa-engineer:
  - e-l-agafon0va

manager: glushneva

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
