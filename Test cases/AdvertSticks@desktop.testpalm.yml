feature: AdvertSticks
tlds: ru

params:
  exp_flags:
    - adv-disabled=0

specs:
  beforeEach:
    - do: при дальнейшей проверке указанных ожидаемых результатов обращайте внимание на любые некорректные на ваш взгляд поведения, основываясь на свой опыт использования web-приложений (например, сохранение позиции при переходах туда-обратно кнопками на устройстве, пустые экраны при переходах, кривая верстка, скачкИ элементов, плавность скролла, неработающая функциональность и т.п.)

  Стандартная работа рекламы [manual]:
    - automation: TURBOUI-1260
    - do: Открыть страницу yandex.ru/turbo?stub=advertsticks/page.json
    - assert: В правой колонке появился первый рекламный блок
    - do: Подождать больше 1.5 секунд
    - do: Проскролить 3100px (полностью первый серый блок)
    - assert: В правой колонке поменялся рекламный блок
    - do: Подождать больше 1.5 секунды
    - do: Проскролить до конца страницы
    - assert: подгрузилась следующая страница
    - assert: В правой колонке поменялась реклама
    - do: Подождать больше 1.5 секунды
    - do: Проскролить еще один блок в 3000px со следующей страницы
    - assert: В правой колонке поменялась реклама
    - do: Подождать больше 1.5 секунды
    - do: Проскролить до конца страницы
    - assert: В правой колонке поменялась реклама
    - do: Бытро проскролить вверх страницы
    - assert: Рекламные блоки менялись не чаще чем раз в 1.5 секунд

  Переключение рекламы с триггером высоте и ограничением по времени [manual]:
    - automation: TURBOUI-1260
    - params:
        exp_flags:
          - advert-throttle-time=3000
          - advert-switch-height-step=1000
    - do: Открыть страницу yandex.ru/turbo?stub=advertsticks/page.json&exp_flags=adv-disabled=0&exp_flags=advert-throttle-time=3000&exp_flags=advert-switch-height-step=1000
    - assert: В правой колонке появился первый рекламный блок
    - do: Доскролить до конца страницы
    - assert: Подгрузилась вторая страница
    - do: Доскролить до начала страницы
    - do: Начать скролить страницу до конца
    - assert: Рекламный блок справа меняется каждые 1000px, но не чаще раз в 3 секунды

  Автоматическое переключение рекламы [manual]:
    - automation: TURBOUI-1260
    - params:
        exp_flags:
          - advert-auto-switch-time=3000
    - do: Открыть страницу yandex.ru/turbo?stub=advertsticks/page.json&exp_flags=adv-disabled=0&exp_flags=advert-auto-switch-time=3000
    - assert: В правой колонке появился первый рекламный блок
    - do: Подождать 3 секунда
    - assert: В правой колонке поменялась реклама
    - do: Начать скролить до конца страницы и обратно
    - assert: Рекламный блок справа продолжает автоматически переключаться раз в 3 секунды

v-team: Turbo

manager: tanzwuta

qa-engineer: dakhetov, olga0321

