feature: Карусель городов с ценами
        
specs:
  Внешний вид:
    - params:
        foreverdata: '2653903181'
        exp_flags:
          - travel_city_carousel_enable=1
    - do: получить выдачу по запросу 'foreverdata' 
    - assert: на выдаче присутствует карусель с карточками городов
    - screenshot: пример внешнего вида [carouselEntityWithPrice]

  Внешний вид с перезапросом:
    - params:
        foreverdata: '2653903181'
        exp_flags:
          - travel_city_carousel_enable=1
        ento: '0oCghydXczMTA4ORKfAWxzdC5zbG1DalFLQkhSbGVIUVNMSE5mWjJWdlgzQmhjbVZ1ZERweWRYY3pNVEE0T1NBbUppQnpYMjkwZVhCbE9rZGxieTlEYVhSNVFHOXVDaDRLQlhKbGJHVjJFaFZtYjNKdGRXeGhQVWsyTURFd01EQXdNREF3VmpNS0dBb01ibUZ0WldSZlpXNTBhWFI1RWdoeWRYY3pNVEE0T1E9PQZ0aNw'
    - do: получить выдачу по запросу 'foreverdata' 
    - assert: на выдаче присутствует карусель с карточками городов на белом фоне
    - screenshot: пример внешнего вида [carouselEntityWithPrice_white]

  Счетчик на ссылке на авиа:
    - params:
        foreverdata: '2653903181'
        exp_flags:
          - travel_city_carousel_enable=1
    - do: получить выдачу по запросу 'foreverdata' 
    - assert: на выдаче присутствует карусель с карточками городов
    - do: нажать на строку с ценой авиабилетов в первой карточке
    - assert: в той же вкладке открылась выдача по запросу 'Авиабилеты Кемер'
    - tech: сработал счетчик /$page/$main/$result/carousel/showcase/item/avia-link'

  Счетчик на ссылке на отели:
    - params:
        foreverdata: '2653903181'
        exp_flags:
          - travel_city_carousel_enable=1
    - do: получить выдачу по запросу 'foreverdata' 
    - assert: на выдаче присутствует карусель с карточками городов
    - do: нажать на строку с ценой отеля в первой карточке
    - assert: в той же вкладке открылась выдача по запросу 'Отели Кемер'
    - tech: сработал счетчик /$page/$main/$result/carousel/showcase/item/hotel-link'
  Ссылки под флагом внутренних переходов авиа:
    - params:
        foreverdata: '2653903181'
        exp_flags:
          - travel_city_carousel_enable=1
          - FRESHNESS_entity_price_touch_links=1
    - do: получить выдачу по запросу 'foreverdata' 
    - assert: на выдаче присутствует карусель с карточками городов
    - do: проверить ссылку с ценами на авиаперелёты
    - assert: в url присутствует параметр 'serp-reload-from=entity_carousel'
    - tech: сработал счетчик /$page/$main/$result/carousel/showcase/item/avia-link'

  Ссылки под флагом внутренних переходов отели:
    - params:
        foreverdata: '2653903181'
        exp_flags:
          - travel_city_carousel_enable=1
          - FRESHNESS_entity_price_touch_links=1
    - do: получить выдачу по запросу 'foreverdata' 
    - assert: на выдаче присутствует карусель с карточками городов
    - do: проверить ссылку с ценами на отели
    - assert: в url присутствует параметр 'serp-reload-from=entity_carousel'
    - tech: сработал счетчик /$page/$main/$result/carousel/showcase/item/hotel-link'

files:
  - features/touch-phone/FRESHNESS_entity_price/FRESHNESS_entity_price.hermione.js

v-team: Freshness

tags:
  - skip_e2e_check

tlds: [ru]
