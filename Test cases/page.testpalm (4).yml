feature: Page

specs:
  Отправляет счетчик глубины скролла страницы:
    - tags: no_assessors
    - do: открыть страницу 'https://yandex.ru/turbo?text=test_news'
    - assert: открылась турбо страница
    - do: проскроллить страницу вниз
    - tech: |
        отправлен счетчик '$page' с событием 'tech', типом 'page-scroll'
        и параметрами:
        'y-pixel' равным количеству проскролленых пикселей,
        'y-percent' равным проценту проскролленой страницы

  Отправляет счетчик глубины скролла статьи в бесконечной ленте:
    - tags: no_assessors
    - do: открыть страницу 'https://yandex.ru/turbo?stub=page/scroll-deep.json'
    - do: проскролить страницу немного вниз, так, чтобы второй заголовок не вошел во вьюпорт более чем на 20%
    - tech: |
        отправлен счетчик '$page.$main.$result'
        с событием 'tech', типом 'page-article-scroll' и параметрами:
        'y-pixel' равным количеству проскролленых пикселей от начала страницы,
        'y-percent' равным проценту проскролленой высоты
    - do: скролить страницу вниз до тех пор, пока второй заголовок не войдет во вьюпорт более чем на 20%
    - do: проскролить страницу еще немного вниз
    - tech: |
        отправлен счетчик '$page.$main.$result'
        с событием 'tech', типом 'page-article-scroll' и параметрами:
        'y-pixel' равным проскролленых пикселей от начала страницы результата (от заголовка)
        'y-percent' равным проценту проскролленой страницы результата

  Элемент ending отправляет счетчик и удаляется:
    - tags: no_assessors
    - do: открыть страницу 'https://yandex.ru/turbo?stub=page/scroll-deep.json'
    - tech: отправлен счетчик '$page.$main.$result' с событием 'tech', типом 'page-show' и параметром height равным высоте первого результата
    - tech: первый результат не содержит в разметке элемент с классом '.page__ending'
    - do: скроллить страницу вниз до третьего заголовка
    - tech: отправлен счетчик '$page.$main.$result' с событием 'tech', типом 'page-show' и параметром height равным высоте первого результата
    - tech: второй результат не содержит в разметке элемент с классом '.page__ending'

files:
  - features/common/blocks/page/page.hermione.js

v-team: Turbo

manager: tanzwuta

qa-engineer: olga0321, dakhetov

tlds: none
