feature: Добавление участников в чат

import-steps:
    - tests/hermione/suites/messenger/shared-steps/open-messenger.testpalm.steps.yml

tlds: ru

specs:
    Добавление участников в групповой чат из меню группового чата:
        - attach: Авторизация и открытие группового чата
        - screenshot: пример внешнего вида кнопки для вызова меню группового чата [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_12-18-59.png]
        - do: открыть меню группового чата, нажав на кнопку с правой стороны шапки
        - screenshot: пример внешнего вида меню группового чата(администратор) [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_12-19-30.png]
        - do: в меню нажать на "Добавить участников"
        - assert: |
            открылось модальное окно добавления участников в групповой чат
            кнопка "ДОБАВИТЬ" серого цвета
        - screenshot: пример внешнего вида [add-members-popup]
        - do: нажать на кнопку "ДОБАВИТЬ"
        - assert: кнопка не активна (не нажимается, не выделяется)
        - do: выбрать любого пользователя, нажав на него
        - assert: |
            выбран пользователь
            выбранный пользователь добавлен в пункт "Добавленные участники"
            кнопка "Добавить" синего цвета
        - screenshot: пример внешнего вида [selected-member]
        - do: нажать на кнопку "ДОБАВИТЬ"
        - assert: |
            закрылось модальное окно
            в чате появилось информационное сообщение "Пользователь_1 добавил(а) Пользователь_2"
        - screenshot: пример внешнего вида [message-member-added]
        - do: открыть меню группового чата, нажав на кнопку с правой стороны шапки
        - do: в меню нажать на "Показать информацию"
        - assert: |
            открылось модальное окно информации о чате
            добавленный пользователь находится в списке участников
        - screenshot: пример внешнего вида [chat-info]

    Добавление участников в групповой чат из модального окна информации о чате:
        - attach: Авторизация и открытие группового чата
        - do: открыть меню группового чата, нажав на кнопку с правой стороны шапки
        - do: в меню нажать на "Показать информацию"
        - assert: открылось модальное окно информации о чате
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-08_01-28-42.png]
        - do: в модальном окне нажать кнопку "Добавить участников"
        - assert: открылось модальное окно добавления участников в групповой чат
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_17-19-57.png]
        - do: выбрать любого пользователя, нажав на него
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_17-32-46.png]
        - do: нажать на кнопку "ДОБАВИТЬ"
        - assert: появилось информационное сообщение "Пользователь_1 добавил(а) Пользователь_2"
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_12-24-28.png]
        - do: открыть меню группового чата, нажав на кнопку с правой стороны шапки
        - do: в меню нажать на "Показать информацию"
        - assert: |
            открылось модальное окно информации о чате
            добавленный пользователь находится в списке участников
        - screenshot: пример внешнего вида [message-member-added-modal]

    Поиск пользователей в модальном окне добавления участников в групповой чат:
        - attach: Авторизация и открытие группового чата
        - do: открыть меню группового чата, нажав на кнопку с правой стороны шапки
        - screenshot: пример внешнего вида меню группового чата (не администратор) [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_19-24-35.png]
        - do: в меню нажать на "Показать информацию"
        - assert: открылось модальное окно информации о чате
        - screenshot: пример внешнего вида (не администратор) [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_19-25-22.png]
        - do: в модальном окне нажать на "Добавить участников"
        - assert: открылось модальное окно добавления участников в групповой чат
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_17-19-57.png]
        - do: нажать на поле ввода "Поиск по контактам и чатам"
        - do: ввести любое имя (например Ольга) в поле ввода
        - assert: высветился список пользователей, удовлетворяющий запросу поиска (введенному имени)
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-08_13-38-55.png]

    Отмена добавления участников в чат:
        - attach: Авторизация и открытие группового чата
        - do: открыть меню группового чата, нажав на кнопку с правой стороны шапки
        - do: в меню нажать на "Добавить участников"
        - assert: появилось модальное окно добавления участников в групповой чат
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_17-19-57.png]
        - do: отменить добавления участников, нажав на кнопку в виде крестика
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_12-27-21.png]
        - assert: закрылось модальное окно добавления участников

    Отправление ссылки на публичный чат другому пользователю:
        - attach: Авторизация и открытие группового чата
        - do: открыть меню группового чата, нажав на кнопку с правой стороны шапки
        - do: в меню нажать на "Показать информацию"
        - assert: открылось модальное окно информации о чате
        - screenshot: пример внешнего вида [chat-info-popup]
        - do: включить доступ по публичной ссылке, нажав на кнопку включения справа от надписи "Публичная ссылка"
        - assert: появилась ссылка публичного доступа
        - do: нажать на кнопку "Скопировать ссылку"
        - assert: появилось информационное сообщение "Ссылка скопирована в буфер обмена"
        - do: открыть чат с другим пользователем
        - do: отправить сообщение с публичной ссылкой
        - assert: публичная ссылка отправилась другому пользователю

    Присоединение к чату по публичной ссылке:
        - do: на главной странице yandex.ru удалить все параметры и добавить к урлу '/chat?build=yamb/#/join/e5ce1c2d-9b1a-413b-9f24-4e19c6308697'
        - assert: открылся чат, поле ввода перекрыто кнопкой "присоединиться"
        - do: нажать на кнопку "присоединиться"
        - assert: появилось поле ввода в контейнере чата

files:
    - tests/hermione/suites/messenger/message-history/group-chat/add-member.common.hermione.ts

v-team: Chat

tags:
    - no_assessors
    - yamb
    - y-team
