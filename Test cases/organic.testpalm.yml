feature: Органика

counter: /$page/$main/$result[@type="organic"]

specs:
  Проверка метки "Ссылки на страницу содержат":
    - params:
        foreverdata: '634110443'
    - tags:
        - smoke_extended
    - do: дописать в адресную строку в браузер &text=foreverdata и получить выдачу
    - screenshot: внешний вид [plain]
    - assert: |
        на выдаче отображается сниппет с меткой 'Ссылки на страницу содержат'
        (на доменах отличных от ru может осуществляться перевод)
    - assertMetrics: '-'
  Проверка посещенных ссылок:
    - do: |
        получить выдачу по запросу "ветеринар москва"
        (если по данному запросу нет сниппета с сайтлинками, попробуйте другой)
    - assert: отображается органический сниппет
    - do: кликнуть ссылку в тайтле
    - counter: /$page/$main/$result[@type="organic"]/title
    - screenshot: пример внешнего вида [visitedTitle]
    - do: кликнуть ссылку в гринурле
    - counter: /$page/$main/$result[@type="organic"]/title
    - screenshot: пример внешнего вида [visitedGreenurl]
    - do: кликнуть ссылку в первом сайтлинке
    - screenshot: пример внешнего вида [visitedSitelinks]
    - assertMetrics: '*'

specs-integration:
  beforeEach:
    - do: получить выдачу по запросу 'лента ру рубрики' (альтернативные запросы 'почта', 'пятерочка каталог', 'test')
    - assert: появился сниппет с сайтлинками (сниппет НЕ ОБЯЗАТЕЛЬНО должен прийти на первой позиции, надо промотать всю выдачу, чтобы убедиться)
    - assert: если проверка идет на десктопе
    - screenshot: внешний вид сайтлинков на десктопе (заголовок, гринурл, текст сниппета и внизу горизонтальный список синих ссылок) [https://jing.yandex-team.ru/files/vtroshina/2021-07-31T14:59:30Z.7cfdc5f.png]
    - assert: если проверка идет на тачах
    - screenshot: внешний вид сайтлинков на тачах (заголовок, гринурл, текст сниппета и внизу вертикальный список синих ссылок) [https://jing.yandex-team.ru/files/karinatsay/2021-12-21T07%3A19%3A29Z.48e171b.png]
  Проверить сайтлинки:
    - counter: /$page/$main/$result[@type="organic"]/sitelinks
    - tags:
        - smoke_extended
        - pp_new_core
    - assert: сайтлинки сниппета присутствуют на странице
    - assert: первый сайтлинк содержит ссылку на сайт
    - assert: второй сайтлинк содержит ссылку на сайт
    - assert: последний сайтлинк содержит ссылку на сайт
    - assertMetrics: '-'

files:
  - features/common/organic/organic.hermione.js
  - features/common/organic/organic.hermione.e2e.js

v-team: Beauty

tags:
  - use_constr
  - c_by-link
  - c_organic
  - reviewed
  - organic

tlds: all

browsers:
  notFor:
    - searchapp-phone
