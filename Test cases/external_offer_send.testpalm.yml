feature: Внешний оффер
type: Отправка кандидату

description: |
    установить у вакансии бюджетную позицию 'БП' (10001 ... 20000) /admin/vacancies/vacancy/
    после отправки оффера кандидату проверить, что пришло письмо-уведомление на рассылку mtest
    после прохождения всех шагов кейса 'Отправка оффера кандидату' проверить, что в JOB-тикете появился комментарий с текстом письма о том, что 'Оффер отправлен кандидату'
    после прохождения всех шагов кейса 'Отправка оффера кандидату' проверить, что статус JOB-тикета поменялся на 'Решен'

specs:
    Отправка оффера кандидату:
        - do: открыть страницу оффера со статусом 'Согласование' и типом вывода 'Новый сотрудник' offers/<id_оффера>/
        - do: нажать 'Отправить'
        - assert: открылось модальное окно 'Отправка оффера'
        - screenshot: пример внешнего вида модального окна 'Отправка оффера' [offer_send_dialog_form]
        - do: в поле 'Получатель' ввести мейл кандидата (если поле заполнено, введенное значение соответствует мейлу в профиле кандидата)
        - do: нажать 'Отправить'
        - assert: |
            модальное окно пропало
            статус оффера сменился на 'Отправлен кандидату'
        - screenshot: пример внешнего вида шапки профиля [offer]

tags:
  - reviewed

priority: blocker

files:
    - tests/hermione/suites/desktop/candidates/external_offers/external_offer_send/external_offer_send.hermione.js

browsers:
  - yandex-browser-desktop
  - firefox-desktop
  - safari-desktop
