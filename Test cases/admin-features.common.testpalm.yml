feature: Возможности админа канала

specs:

    Администратор может отправлять текстовые  сообщения в канал:
        - tags: [advanced_smoke, b2b]
        - description: У авторизованного пользователя в списке чатов есть канал, в котором он является администратором
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой канал, который соответствует описанию указанному в description
        - assert: Канал открыт
        - do: Отправить текстовое сообщение в канал
        - assert: Сообщение отправлено и отображается слева

    Администратор может отправлять картинки в канал[manual]:
        - automation: MSSNGRFRONT-5013
        - description: У авторизованного пользователя в списке чатов есть канал, в котором он является администратором
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой канал, который соответствует описанию указанному в description
        - assert: Канал открыт
        - do: Отправить изображение в канал
        - assert: Изображение отправлено и отображается слева

    Администратор может отправлять файловые сообщения в канал[manual]:
        - automation: MSSNGRFRONT-5013
        - description: У авторизованного пользователя в списке чатов есть канал, в котором он является администратором
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой канал, который соответствует описанию указанному в description
        - assert: Канал открыт
        - do: Отправить файл в канал
        - assert: Файл отправлен и отображается слева

    В канал можно попасть по прямому приглашению админа[manual]:
        - tags: [advanced_smoke]
        - automation: MSSNGRFRONT-5013
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом нужно будет авторизовываться в другом браузере
              Пользователь А состоит в канале с историей сообщений, Пользователя Б в этом канале нет. Пользователь А - администратор, пользователь Б - подписчик
              Между пользователем А и Б есть общий приватный чат
        - do: Пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть канал в котором вы являетесь Администратором
        - assert: Окно канала открыто
        - do: Кликнуть / Тапнуть на шапку канала и скопировать ссылку для приглашения в канал
        - assert: Ссылка скопирована
        - do: Отправить ссылку пользователю Б в приватный чат
        - assert: Пользователь Б получил ссылку
        - do: Пользователем Б нажать на ссылку для того что бы попасть в канал
        - assert: |
              Открывается окно канала
              Внизу кнопка "Подписаться на канал"
        - do: Нажать на кнопку "Подписаться на канал"
        - assert: |
              Пользователь Б подписан на канал
              Надпись "подписаться на канал" заменилась на кнопки "Поделиться каналом" (самолетик) и "Отключить уведомления" (колокольчик)

    Администратору канала доступен список участников[manual]:
        - automation: MSSNGRFRONT-5013
        - description: У авторизованного пользователя в списке чатов есть канал, в котором он является администратором
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть канал в котором вы являетесь Администратором
        - assert: Окно канала открыто
        - do: Кликнуть / Тапнуть на шапку канала
        - assert: Открывается карточка канала, в которой есть раздел "Подписчики и администраторы"
        - do: Нажать на "Подписчики и администраторы"
        - assert: |
              Открывается окно "Подписчики и администраторы"
              Есть раздел "Администраторы"
              Есть кнопка "Добавить администраторов"
              Есть раздел "Подписчики"

    Администратор канала может любого участника канала сделать администратором[manual]:
        - automation: MSSNGRFRONT-5013
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом нужно будет авторизовываться в другом браузере
              Пользователь А и Б состоят в канале с историей сообщений. Пользователь А - администратор, пользователь Б - подписчик
              У пользователя Б в настройках конфиденциальности нет запрета на добавления себя в чаты
        - do: Пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой канал, который соответствует описанию указанному в description
        - assert: Канал открыт
        - do:  Кликнуть / Тапнуть на шапку канала и выбрать вкладку “Подписчики и администраторы”
        - assert: Открывается окно где видны администраторы/подписчики канала
        - do: Тапнуть по троеточию и сделать админом подписчика Б
        - assert: Подписчик Б перемещается в Администраторы
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть канал из description
        - assert: Открывается канал из description
        - do: Пользователем Б отправить сообщение
        - assert: Сообщение отправлено и находится слева

    Администратор может переименовать канал и описание к каналу[manual]:
        - tags: [advanced_smoke]
        - automation: MSSNGRFRONT-5013
        - description: У авторизованного пользователя в списке чатов есть канал, в котором он является администратором
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой канал, который соответствует описанию указанному в description
        - assert: Канал открыт
        - do: Кликнуть / Тапнуть на шапку канала
        - assert: Открывается карточка канала
        - do: Нажать на "Настройки канала"
        - assert: Открылось окно редактирования канала
        - do: Изменить название и описание канала и нажать кнопку "Сохранить"
        - assert: Название и описание корректно изменяются

    Администратор может отправлять стикеры[manual]:
        - automation: MSSNGRFRONT-5013
        - description: У авторизованного пользователя в списке чатов есть канал, в котором он является администратором
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой канал, который соответствует описанию указанному в Preconditions
        - assert: Канал открыт
        - do: Отправить стикер в канала
        - assert: Стикер отравляется и отображается слева

    Администратор может отправлять эмодзи[manual]:
        - automation: MSSNGRFRONT-5013
        - description: У авторизованного пользователя в списке чатов есть канал, в котором он является администратором
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой канал, который соответствует описанию указанному в description
        - assert: Канал открыт
        - do: Отправить эмоджи в канал
        - assert: Эмоджи отправлено и отображается слева

    Администратор может отправлять Reply[manual]:
        - automation: MSSNGRFRONT-5013
        - description: У авторизованного пользователя в списке чатов есть канал с историей сообщений, в котором он является администратором
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой канал, который соответствует описанию указанному в description
        - assert: Канал открыт
        - do: Вызвать контекстное меню для сообщения на которое хотим ответить кликнув ПКМ / тапнув по нему
        - assert: Показывается контекстное меню
        - do: Выбрать "Ответить"
        - assert: над полем ввода появляется плашка reply
        - do: Ввести в поле ввода любой текст и нажать кнопку "Отправить"
        - assert: |
              Сообщение с реплай корректно отображается
              Вместо имени автора отображается название канала

    Администратор может отправлять Forward[manual]:
        - automation: MSSNGRFRONT-5013
        - description: У авторизованного пользователя в списке чатов есть канал с историей сообщений, в котором он является администратором
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой канал, который соответствует описанию указанному в description
        - assert: Канал открыт
        - do: Вызвать контекстное меню для сообщения на которое хотим переслать кликнув ПКМ / тапнув по нему
        - assert: Показывается контекстное меню
        - do: Выбрать "Переслать"
        - assert: Появляется список чатов для пересылки сообщения
        - do: Выбрать любой чат из списка, кроме канала откуда делается Forward
        - assert: |
              Открылось окно выбранного чата
              Фокус курсора в поле ввода
              Над полем ввода появилась плашка Forward
        - do: Ввести в поле ввода любой текст и нажать кнопку "Отправить"
        - assert: |
              Форвард корректно отображается в окне чата
              Вместо автора видно название канала

    Администратор не теряет права, если открыл канал через Глобальный поиск[manual]:
        - automation: MSSNGRFRONT-5013
        - description: У авторизованного пользователя в списке чатов есть канал с историей сообщений, в котором он является администратором
        - do: Открыть глобальный поиск и ввести в поиск название Канала из description
        - assert: В секции "Чаты" отображается нужный канал
        - do: Нажать по найденному каналу
        - assert: Открывается окно канала
        - do: Отправить сообщение в канал
        - assert: Сообщение отправляется
        - do: Кликнуть / тапнуть на шапку канала
        - assert: Открывается информация о канале
        - do: Открыть блок "Подписчики" и убедиться, что Вы являетесь администратором
        - assert: Вы не потеряли права администратора

    Администратор может сделать поиск сообщения по каналу:
        - description: У авторизованного пользователя в списке чатов есть канал с историей сообщений, в котором он является администратором
        - do: Открыть канал в котором вы являетесь администратором
        - assert: Окно канала открыто
        - do: кликнуть / нажать на значок поиска "Лупу" в правом верхнем углу
        - assert: |
              под шапкой чата появилась панель поиска с полем ввода
              в поле ввода плейсхолдер "Поиск" и фокус курсора находится в поле ввода
              рядом с полем ввода есть стрелки переключения результатов поиска и "крестик" закрытия режима поиска
        - do: Ввести в поле поиска слово которое встречается в канале
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к самому свежему результату поиска (если результат поиска находится в пределах просматриваемого экрана - то подскролл не происходит)
              отображенный результат поиска временно выделен

    Администратор для себя может вкл/отключить уведомления для канала[manual]:
        - automation: MSSNGRFRONT-5013
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом нужно будет авторизовываться в другом браузере
              Пользователь А и Б состооят в канале с историей сообщений. Пользователь А - администратор, пользователь Б - администратор
              В браузере, где авторизован пользователь А, в настройках включены уведомления (как в настрйоках мессенджера, так и в настройках самого браузера)
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: В списке чатов на канале из description кликнуть ПКМ (нажать лонгатпом если это мобильное устройство)
        - assert: Появляется контекстное меню данного канала
        - do: Выбрать "Отключить уведомления"
        - assert: |
              Уведомления отключены
              В превью канала в списке чатов появился значок перечеркнутого колокольчика
        - do: Свернуть браузер
        - assert: Браузер свернут
        - do: Под пользователем Б запустить тестовое прилоежние и открыть список чатов
        - assert: Открывается список чатов
        - do: Отправить в канал из description сообщение
        - assert: Пользователю А не пришло уведомление

    Администратор канала может удалять любые сообщения из канала[manual]:
        - automation: MSSNGRFRONT-5013
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом нужно будет авторизовываться в другом браузере
              Пользователь А и Б состоят в канале с историей сообщений. Пользователь А - администратор, пользователь Б - подписчик
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть канал в котором вы являетесь Администратором
        - assert: Окно канала открыто
        - do: Кликнуть ПКМ / тапнуть по любому сообщению в канале
        - assert: Появляется контекстное меню для этого сообщения
        - do: выбрать "Удалить" и подтвердить удаление
        - assert: |
              Сообщение было удалено
              Вместо удаленного сообщения в окне чата появилась надпись "Сообщение было удалено"
        - do: Под пользователем Б открыть канал из description
        - assert: Окно канала открыто.
        - do: Убедиться что для Подписчика канала сообщения отображаются удаленными
        - assert: Подписчик видит что сообщения которые удалил Администратор действительно удалены и не отображаются в канале

files:
    - tests/hermione/suites/messenger/channels/admin-features.common.hermione.ts

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
