feature: Нотификатор

import-steps:
    - tests/hermione/suites/messenger/shared-steps/open-messenger.testpalm.steps.yml

tlds: ru

specs:

    Проверка нотификатора непрочитанных сообщений при включенных уведомлениях[manual]:
        - automation: MSSNGRFRONT-2150
        - attach: Авторизация и открытие чата yamb
        - do: отправить произвольное сообщение в чат с пользователем stas.mihailov666
        - do: в любом другом браузере перейти по ссылке "https://passport.yandex.ru"
        - do: авторизоваться пользователем с логином stas.mihailov666 пароль pazone
        - do: перейти по ссылке на бету с чатом
        - assert: у пользователя stas.mihailov666 в списке чатов в чате с пользователем fobshitelniy отобразился нотификатор синего цвета с одним непрочитанным сообщением
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_1_novoe_soobschenie_2019-01-29_10-17-23.png]
        - do: пользователем fobshitelniy отправить несколько произвольных сообщений в чат с пользователем stas.mihailov666
        - assert: у пользователя stas.mihailov666, по мере получения входящих сообщений, число в нотификаторе увеличивается на количество отправленных сообщений
        - do: пользователем stas.mihailov666 открыть чат с пользователем fobshitelniy
        - do: пользователем stas.mihailov666 посмотреть все полученные сообщения
        - assert: у пользователя stas.mihailov666 отобразились все сообщения, отправленные пользователем fobshitelniy
        - do: пользователем stas.mihailov666 перейти в список чатов
        - assert: у пользователя stas.mihailov666 нотификатор непрочитанных сообщений не отображается в чате с пользователем fobshitelniy

    Проверка нотификатора непрочитанных сообщений при выключенных уведомлениях[manual]:
        - automation: MSSNGRFRONT-2150
        - attach: Авторизация и открытие чата yamb
        - do: открыть контекстное меню чата, нажав правой кнопкой мыши(desktop) или нажать и держать несколько секунд(touch) на чат с пользователем stas.mihailov666 в списке чатов
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-29_10-23-10.png]
        - do: в меню чата нажать на "Выключить уведомления"
        - assert: в списке чатов в чате с пользователем stas.mihailov666 отображается иконка выключенных уведомлений в виде перечеркнутого динамика
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-29_10-27-32.png]
        - do: в любом другом браузере перейти по ссылке "https://passport.yandex.ru"
        - do: авторизоваться пользователем с логином stas.mihailov666 пароль pazone
        - do: перейти по ссылке на бету с чатом
        - do: пользователем stas.mihailov666 отправить произвольное сообщение в чат с пользователем fobshitelniy
        - do: вернуться в первый браузер и открыть чат с пользователем stas.mihailov666
        - assert: у пользователя fobshitelniy в списке чатов в чате с пользователем stas.mihailov666 отобразился нотификатор серого цвета с одним непрочитанным сообщением
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-29_10-32-26.png]

    Проверка нотификатора непрочитанных сообщений на кнопке скролла[manual]:
        - automation: MSSNGRFRONT-2150
        - attach: Авторизация и открытие чата yamb
        - do: открыть чат с пользователем stas.mihailov666
        - do: отправить то количество сообщений, что бы был доступен скролл в контейнере
        - do: проскроллить контейнер чата вверх, что бы появилась кнопка скролла (в правом нижнем углу)
        - assert: появилась кнопка скролла
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_3_novyh_soobscheniya_2019-02-18_16-31-23.png]
        - do: в любом другом браузере перейти по ссылке "https://passport.yandex.ru"
        - do: авторизоваться пользователем с логином stas.mihailov666 пароль pazone
        - do: перейти по ссылке на бету с чатом
        - do: пользователем stas.mihailov666 отправить произвольное сообщение в чат с пользователем fobshitelniy
        - assert: у пользователя fobshitelniy на кнопке скролла отобразился нотификатор синего цвета с одним непрочитанным сообщением
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_1_novoe_soobschenie_2019-02-18_16-33-31.png]
        - do: пользователем stas.mihailov666 отправить несколько произвольных сообщений в чат с пользователем fobshitelniy
        - assert: у пользователя fobshitelniy, по мере получения входящих сообщений, число в нотификаторе увеличивается на количество отправленных сообщений
        - do: пользователем fobshitelniy нажать на кнопку скролла
        - assert: |
              контейнер чата проскроллился вниз
              у пользователя fobshitelniy отобразились все сообщения, отправленные пользователем stas.mihailov666
              нотификатор непрочитанных сообщений не отображается

files: []

v-team: Chat

tags:
    - yamb
    - y-team
    - no_assessors
