feature: Карточка контакта стабильность поведения
tlds: ru

import-steps:
    - tests/hermione/suites/messenger/contact-card/shared-steps/open-private-chat.testpalm.steps.yml

specs:
    Поведение при изменении размеров окна браузера [manual]:
        - automation: MSSNGRFRONT-1966
        - attach: Открытие личного чата
        - do: открыть карточку контакта, кликнув на имя или аватарку собеседника в максимально развернутом окне браузера
        - assert: карточка контакта открылась, находится по центру экрана, изображение за карточкой покрыто серым затемнением
        - screenshot: максимальное окно [https://jing.yandex-team.ru/files/lapkinakris/Messenger_2019-02-15_13-26-45.png]
        - do: изменить размер вполовину (сдвинув границы окна браузера)
        - assert: окно осталось по центру, затемнение осталось
        - screenshot: среднее окно [https://jing.yandex-team.ru/files/lapkinakris/Messenger_2019-02-15_13-29-38.png]
        - do: изменить окно браузера до минимального размера
        - assert: карточка контакта изменила размер, сохранила видимыми аватарку, имя и статус в сети
        - screenshot: минимальное окно [https://jing.yandex-team.ru/files/lapkinakris/Messenger_2019-02-15_13-35-14.png]

    Поведение при сворачивании окна браузера и его разворачивании [manual]:
        - automation: MSSNGRFRONT-1966
        - attach: Открытие личного чата
        - do: вызвать карточку контакта, кликнув на аватарку или имя собеседника в максимально открытом окне браузера
        - assert: карточка контакта открылась, находится по центру экрана, изображение за карточкой покрыто серым затемнением
        - do: свернуть окно браузера
        - assert: окно браузера свернулось
        - do: развернуть окно браузера
        - assert: окно браузера развернулось, карточка контакта выглядит как в первом шаге, ничего не сместилось

    Проверка стабильности работы и отображения карточки контакта при смене ориентации на планшетах и мобильных устройствах [manual]:
        - automation: MSSNGRFRONT-1966
        - do: на планшете/телефоне в вертикальной ориентации открыть любой чат
        - assert: открылся чат
        - do: открыть карточку контакта, кликнув на имя или аватарку собеседника изменить ориентацию устройства, перевернув устройство
        - assert: изображение перевернулось соответственно экрану, карточка не сместилась, у карточки появился активный скролл

    Проверка стабильности работоспособности при многократном клике на тумблер уведомлений [manual]:
        - automation: MSSNGRFRONT-1966
        - attach: Открытие личного чата
        - do: вызвать карточку контакта, кликнув на аватарку или имя собеседника
        - assert: открылась карточка контакта
        - do: несколько раз очень быстро нажать на тумблер уведомлений (в нижней части карточки)
        - screenshot: тумблер уведомлений [https://jing.yandex-team.ru/files/lapkinakris/Messenger_2019-02-15_13-22-10.png]
        - assert: программа работает стабильно, ошибок нет, тумблер от каждого клика меняет положение и цвет, не зависает

    Отключение уведомлений при 2 открытых вкладках [manual]:
        - automation: MSSNGRFRONT-1966
        - do: открыть групповой чат по публичной ссылке https://q.yandex-team.ru/#/join/be7dd0cd-1c56-459c-a5eb-fc4a59ab74c4 в двух вкладках
        - assert: открылись 2 вкладки с одним и тем же чатом
        - do: открыть карточку одного и того же контакта в обеих вкладках
        - assert: открылись две вкладки с карточками контакта, на обеих карточках уведомления активны
        - do: на одной из вкладок нажать на тумблер Уведомлений, сделать его неактивным
        - assert: на обеих вкладках тумблер стал неактивным, уведомления отключены

    Закрывание карточки на 2 открытых вкладках [manual]:
        - automation: MSSNGRFRONT-1966
        - do: открыть групповой чат по публичной ссылке https://q.yandex-team.ru/#/join/be7dd0cd-1c56-459c-a5eb-fc4a59ab74c4 в двух вкладках
        - assert: открылись 2 вкладки с одним и тем же чатом
        - do: открыть карточку одного контакта в 2 вкладках
        - assert: открылись две вкладки с карточками контакта
        - do: на одной из вкладок закрыть карточку контакта
        - assert: карточка контакта закрылась на вкладке, где ее закрыли, на второй вкладке карточка не закрылась

    Стабильность работы при отутствии сети [manual]:
        - automation: MSSNGRFRONT-1966
        - attach: Открытие личного чата
        - do: отключить сеть (и проводную, и беспроводную)
        - assert: сеть отключена
        - do: открыть карточку контакта, кликнув на имя или аватарку собеседника
        - assert: карточка контакта открылась, остальной экран неактивен, покрыт светло-серым затемнением
        - do: восстановить сетевое соединение
        - assert: карточка контакта не поменяла внешний вид или положение

tags:
    - no_assessors
    - y-team

files: []

v-team: Chat
