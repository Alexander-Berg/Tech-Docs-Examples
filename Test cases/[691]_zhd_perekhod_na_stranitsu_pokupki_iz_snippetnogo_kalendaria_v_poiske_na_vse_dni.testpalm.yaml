feature: ЖД
type: Выдача
description: |-
  Перейти на главную сервиса
  Перейти на вкладку Ж/Д билеты
specs:
  'ЖД: Переход на страницу покупки из сниппетного календаря в поиске на все дни':
    - do: >-
        Открыть выдачу Москва - Самара на все дни с прописанным параметром в
        метрику ?_ym_debug=1, открыть консоль браузера
    - do: >-
        Для одного из сниппетов, для которого есть рейс сегодня, кликнуть по
        кнопке "Выбрать дату"
    - assert: '* Открылся календарь для этого сниппета'
    - do: Выбрать сегодняшнюю дату
    - assert: >-
        * В консоли появилось событие в метрику на клик по дате:
        trains_segment_datepicker_click и на переход на страницу покупки:
        trains_order_places_page_load

        * Осуществился переход на страницу покупки для этой даты

        * Если поезд уже ушел или нет мест есть сообщение: На заданном
        направлении (или поезде) мест нет - в этом случае события
        trains_order_places_page_load не будет- надо найти другой день/поезд в
        котором есть билеты и проверить еще раз
    - do: Вернуться к выдаче
    - do: >-
        Для одного из сниппетов, для которого есть рейсы в ближайшие будущие
        даты, кликнуть по кнопке "Выбрать дату"
    - assert: '* Открылся календарь для этого сниппета'
    - do: 'Выбрать ближайшую будущую дату, например, послезавтра'
    - assert: '* Осуществился переход на страницу покупки на эту дату'
    - do: Открыть выдачу Киев - Львов на все дни
    - do: >-
        Для одного из сниппетов, где есть дни хождения в ближайшие будущие даты,
        кликнуть по кнопке “Выбрать дату”
    - assert: '* Открылся календарь для этого сниппета'
    - do: 'Выбрать ближайшую будущую дату, например завтра'
    - assert: '* Осуществился переход на сайт УФС на эту дату'
manual: true
Функциональность: Форма поиска
Устройство: Десктоп
Страница: Выдача
Сервис: ЖД
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Автор: shenfeld
