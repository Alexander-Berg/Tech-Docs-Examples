feature: Страница "Инстори"

description: Страница со списком новостей по сюжету (instory на десктопе)

specs-integration:
  содержит блоки рекламы с включенным адблоком при ширине больше 1260px:
    - tags:
      - advertisement
    - do: Открыть Новости на странице рубрики "Главная"
    - do: Перейти на сюжет с большим количеством источников (такой сюжет можно найти, как правило, в топ-5 - это должно быть не самое свежее событие, о котором с большой вероятностью написали все сми. Обратите внимание! Сюжет не должен быть траурным, а также сюжет не должен быть спортивным!)
    - do: Кликнуть на кнопку "Показать ещё" под блоком "Подробнее о событии"
    - assert: |
        список источников в блоке "Подробнее о событии" разворачивается,
        под списком источников есть ссылка "Показать все источники",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-07-22_16-07-22.png 
    - do: Нажать на ссылку "Показать все источники"
    - do: Включить блокировщик рекламы и обновить странцу
    - assert: |
        осуществляется переход на страницу со списком новостей по сюжету от всех источников,
        справа от выдачи отображается вертикальный блок с рекламой,
        слева от рекламы присутствует виджет "Главное", 
        если баннеры не появляются, требуется подождать 20 секунд
    - do: Проскроллить страницу вниз
    - assert: вертикальный рекламный блок справа фиксируется и всегда отображается на экране
    - do: Установить ширину экрана <1260px. Обязательно проверить это, выполнив в консоли команду "window.innerWidth" (без кавычек), скрин - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-02_15-59-06.png
    - assert: |
        верстка перестраивается и не едет,
        виджет "Главное" уходит под рекламный блок (можно увидеть, если проскроллить страницу ниже)
    - do: Установить ширину экрана >1260px. Обязательно проверить это, выполнив в консоли команду "window.innerWidth" (без кавычек), скрин - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-02_15-59-06.png 
    - assert: 
        верстка перестраивается обратно, не едет,
        виджет "Главное" возвращается на место
    - do: Проскроллить страницу до футера и обратить внимание на рекламные блоки
    - assert: |
        между источниками отображается рекламный блок с двумя объявлениями,
        реклама подгружается, верстка не едет
        пример рекламного блока - https://jing.yandex-team.ru/files/vasekerka/2021-07-23_13-37-08.png

  содержит блоки рекламы с включенным адблоком при ширине меньше 1260px:
    - assert: проверка того же теста выше, но при меньшей ширине экрана

  содержит блоки рекламы с выключенным адблоком:
    - tags:
      - advertisement
    - do: Открыть Новости на странице рубрики "Главная"
    - do: Перейти на сюжет с большим количеством источников (такой сюжет можно найти, как правило, в топ-5 - это должно быть не самое свежее событие, о котором с большой вероятностью написали все сми. Обратите внимание! Сюжет не должен быть траурным, а также сюжет не должен быть спортивным!)
    - do: Кликнуть на кнопку "Показать ещё" под блоком "Подробнее о событии"
    - assert: |
        список источников в блоке "Подробнее о событии" разворачивается,
        под списком источников есть ссылка "Показать все источники",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-07-22_16-07-22.png 
    - do: Нажать на ссылку "Показать все источники"
    - do: Выключить блокировщик рекламы и обновить странцу
    - assert: |
        отображается страница со списком новостей по сюжету от всех источников,
        справа от выдачи отображается вертикальный блок с рекламными баннерами,
        если баннер не появился требуется подождать 20 секунд
    - do: проскролить страницу вниз, кликнуть по кнопке "Больше результатов" и проскроллить страницу (Обратите внимание! Кнопка "Больше результатов" может отсутствовать, если источников не достаточно. Нужно проверить 2-3 сюжета. Также можно ориентироваться на количество двойных рекламных блоков перед кнопкой, их должно быть минимум 17. Внешний вид блоков - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-28_14-25-44.png)
    - assert: |
         нет бесконечного спиннера при попытке загрузить страницу,
         загружается вторая страница выдачи, 
         рекламные блоки присутствуют, реклама в них прогружается, вертска не едет

  подгружает выдачу по кнопке "Больше результатов":
    - tags: 
      - backend_news
      - smoke_zen
    - do: Открыть Новости на странице рубрики "Главная"
    - do: Перейти на сюжет с большим количеством источников (такой сюжет можно найти, как правило, в топ-5 - это должно быть не самое свежее событие, о котором с большой вероятностью написали все сми. Обратите внимание! Сюжет не должен быть траурным, а также сюжет не должен быть спортивным!)
    - do: Кликнуть на заголовок "Подробнее о событии" (https://jing.yandex-team.ru/files/kossakovskaya/2021-09-23_18-14-52.png)
    - assert: |
        в той же вкладке открывается страница, которая содержит 'instory' (без кавычек) в адресной строке,
        у каждого источника на странице есть иконка, название и дата/время публикации
    - do: проскроллить страницу вниз до конца
    - assert: перед футером присутствует кнопка "Больше результатов" (если кнопки нет найти другой сюжет)
    - do: нажать на кнопку "Больше результатов"
    - assert: |
        загружается вторая страница выдачи,
        страница отделена от первой номером и разделителем,
        карточки со второй страницы не дублируют карточки на первой странице,
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-07-22_16-52-49.png
    - do: проскроллить вторую страницу выдачи и нажать на кнопку "Больше результатов" (если кнопки нет - пропустить шаг)
    - assert: |
        загружается третья страница выдачи,
        страница отделена от второй номером и разделителем,
        нет бесконечного спиннера при попытке загрузить страницу,
        все карточки загружаются сразу, карточки третьей страницы не дублируют карточки второй и первой страницы

specs:
  содержит кнопку "Показать все источники" с переходом на instory:
    - tags: 
      - backend_news
      - smoke_zen
    - do: Открыть Новости на странице рубрики "Главная"
    - do: Перейти на сюжет с большим количеством источников (такой сюжет можно найти, как правило, в топ-5 - это должно быть не самое свежее событие, о котором с большой вероятностью написали все сми. Обратите внимание! Сюжет не должен быть траурным, а также сюжет не должен быть спортивным!)
    - do: Кликнуть на кнопку "Показать ещё" под блоком "Подробнее о событии"
    - assert: |
        список источников в блоке "Подробнее о событии" разворачивается,
        под списком источников есть ссылка "Показать все источники",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-07-22_16-07-22.png 
    - do: Нажать на ссылку "Показать все источники"
    - assert: |
        в той же вкладке открывается страница, которая содержит 'instory' (без кавычек) в адресной строке (то есть, ссылка должна начинаться вот так - https://yandex.ru/news/instory/ и далее продолжение ссылки с различными параметрами),
        у каждого источника на странице есть иконка, название и дата/время публикации

  позволяет перейти на новость на странице источника:
    - do: Открыть Новости на странице рубрики "Главная"
    - do: Перейти на сюжет с большим количеством источников (такой сюжет можно найти, как правило, в топ-5 - это должно быть не самое свежее событие, о котором с большой вероятностью написали все сми. Обратите внимание! Сюжет не должен быть траурным, а также сюжет не должен быть спортивным!)
    - do: Кликнуть на кнопку "Показать ещё" под блоком "Подробнее о событии"
    - assert: |
        список источников в блоке "Подробнее о событии" разворачивается,
        под списком источников есть ссылка "Показать все источники",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-07-22_16-07-22.png 
    - do: Нажать на ссылку "Показать все источники"
    - do: Навести курсор на любой заголовок новости https://jing.yandex-team.ru/files/vasekerka/2021-07-22_17-39-04.png
    - assert: по ховеру на заголовок меняется курсор и стиль отображения заголовка
    - do: Кликнуть по заголовку новости
    - assert: |
        в новой вкладке открывается сюжет на странице источника,
        в адресной строке присутствуют utm_source и utm_medium

  позволяет вернуться к сюжету: 
    - do: Открыть Новости на странице рубрики "Главная"
    - do: Перейти на сюжет с большим количеством источников (такой сюжет можно найти, как правило, в топ-5 - это должно быть не самое свежее событие, о котором с большой вероятностью написали все сми. Обратите внимание! Сюжет не должен быть траурным, а также сюжет не должен быть спортивным!)
    - do: Кликнуть на кнопку "Показать ещё" под блоком "Подробнее о событии"
    - assert: |
        список источников в блоке "Подробнее о событии" разворачивается,
        под списком источников есть ссылка "Показать все источники",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-07-22_16-07-22.png
    - do: Нажать на ссылку "Показать все источники"
    - do: Кликнуть на заголовок сюжета https://jing.yandex-team.ru/files/vasekerka/2021-07-22_17-39-04.png 
    - assert: осуществился переход на страницу сюжета

files:
  - features/news/instory/instory.desktop.hermione.js
  - features/news/instory/instory.desktop.hermione.e2e.js
  

manager: luorlova

qa-engineer: vasekerka

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
