feature: Navigation

params:
  exp_flags:
    - turbo-app-any-ua=1

specs:
  Кнопка назад:
    Главная → Категория → Подкатегория → Товар:
      - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/?morda=1&ecommerce_main_page_preview=1
      - assert: на главной странице не видна кнопка возврата
      - do: перейти в первую категорию
      - assert: текст кнопки возврата должен быть «Главная»
      - do: перейти в первую подкатегорию
      - assert: текст кнопки возврата должен соответствовать названию предыдущей категории
      - do: перейти в первый товар
      - assert: текст кнопки возврата должен соответствовать названию предыдущей подкатегории
      - assert: все кнопки возврата должны вести назад по истории
    Главная → Товар → Быстрый заказ:
      - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/?morda=1&ecommerce_main_page_preview=1
      - do: перейти в первый товар
      - assert: текст кнопки возврата должен быть «Главная»
      - do: перейти в быстрый заказ
      - assert: текст кнопки возврата должен быть «Назад»
      - assert: все кнопки возврата должны вести назад по истории
    Каталог → Категория → Подкатегория → Товар:
      - do: открыть страницу https://yandex.ru/turbo/super01.ru/n/yandexturbocatalog/
      - assert: в каталоге не видна кнопка возврата
      - do: перейти в категорию «Обувь»
      - assert: текст кнопки возврата должен быть «Каталог»
      - do: перейти в первую подкатегорию
      - assert: текст кнопки возврата должен соответствовать названию предыдущей категории
      - do: перейти в первый товар
      - assert: текст кнопки возврата должен соответствовать названию предыдущей подкатегории
      - assert: все кнопки возврата должны вести назад по истории
    Каталог → Товар:
      - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
      - do: перейти в первый товар
      - assert: текст кнопки возврата должен быть «Каталог»
      - assert: кнопка возврата должна вести назад по истории
    Товар:
      - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/s/rnd/2lum7hf3?product_id=202
      - assert: |
          текст кнопки возврата должен быть «Спортивная Одежда»
          кнопка ведёт на категорию "Спортивная Одежда" вне зависимости от истории переходов во вкладке
    Товар → Главная → Категория → Товар ← Категория:
      - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/s/rnd/2lum7hf3?product_id=202
      - do: перейти на главную по кнопке в навигационной панели
      - do: перейти в первую категорию
      - assert: текст кнопки возврата должен быть «Главная»
      - do: перейти в первый товар
      - assert: текст кнопки возврата должен соответствовать названию предыдущей категории
      - do: вернуться назад нажатием кнопки возврата
      - assert: текст кнопки возврата должен быть «Главная»
    Главная → Корзина → Товар:
      - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/?morda=1&ecommerce_main_page_preview=1
      - do: |
          добавить в корзину первый из популярных товаров
          перейти в корзину по изменившейся кнопке добавления товара в корзину
          после открытия корзины перейти на карточку товара по его изображению
      - assert: текст кнопки возврата должен быть «Корзина»

    Фасетная категория → Подкатегория → Каталог:
      - tags: no_assessors
      - do: открыть странницу https://yandex.ru/turbo/mnogodivanov.ru/n/yandexturbolisting/katalog/kozhanie-divani
      - assert: |
          текст кнопки возврата - «Главная»
          заголовок - «Аксессуары»
      - do: перейти в первую подкатегорию
      - do: перейти в каталог по кнопке в навигационной панели
      - assert: |
          в корне каталога отсутствует кнопка возврата
          в корне каталога отсутствует заголовок

    Фасетная категория → Подкатегория → Родителькая категория:
      - do: открыть странницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/?category_id=1
      - assert: |
          текст кнопки возврата - «Каталог»
          заголовок - «Тягово-сцепные устройства»
      - do: перейти в первую подкатегорию
      - assert: текст кнопки возврата соответствует названию предыдущей категории
      - do: обновить страницу
      - assert: текст кнопки возврата не изменился
      - do: кликнуть по кнопке возврата в предыдущую категорию
      - assert: осуществился переход в раздел «Тягово-сцепные устройства»

    Каталог → Поиск → Пустая страница → Переход на страницу товара:
      - params:
          exp_flags:
            - turbo-app-global-search=1
      - do: открыть странницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/?query=qwerty1234
      - assert: открылась страница каталога
      - do: перейти в любой из товаров который находится под блоком пустого результата
      - assert: текст кнопки возврата - «Назад»
      - do: обновить страницу
      - assert: текст кнопки возврата изменился на название категории
      - do: кликнуть по кнопке возврата в странице с пустым результатом поиска

    Навигация после сортировки товаров:
      - do: открыть странницу https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
      - do: сделать сортировку "По скидке"
      - do: перейти на первый товар из списка
      - assert: текст кнопки возврата "Каталог"
      - do: нажать на кнопку возврата
      - assert: произошел возврат на предыдущую страницу

files:
    - __tests__/navigation@phone.hermione.js

v-team: Turbo

tlds: ru

tags:
  - ecom-tap
