feature: ЖД
type: Страница заказа
description: >-
  Проверяется случай, когда возврат уже в процессе, и происходит ошибка (падает
  ручка информации о заказе - например когда ИМ недоступен).

  Создать заказ на любое направление и кол-во пассажиров. Для этого:

  * Перейти на вкладку ЖД, перейти на любую выдачу (в тестинге - из Москвы)

  * Для любого поезда кликнуть по кнопке покупки

  * Далее следовать по шагам покупки

  * На хэппи пейдж нажать "Подробнее о заказе"


  Для оплаты использовать карту в тестинге:

  Номер карты: 5100003697253468

  CVN: 090

  Дата: 01/20


  Для асессоров намеренно пропускается шаг оплаты в тестинге, данные карты
  вводить не нужно.
specs:
  'ЖД: Отображение ошибки, когда во время возврата что-то пошло не так':
    - do: |-
        На странице созданного заказа кликнуть Сдать билет для любого пассажира
        Открыть консоль браузера, вкладка Network
    - assert: '* Появилось модальное окно возврата'
    - do: >-
        Ввести код из смс (если требуется)

        Нажать Подтвердить

        Сразу после нажатия на кнопку, когда возврат уже начался, включить режим
        оффлайн в браузере

        ![image](https://jing.yandex-team.ru/files/shenfeld/2019-10-09_13.11.52-wt1br.png)
    - assert: >-
        * На странице появилась ошибка в модальном окне

        ![image](https://jing.yandex-team.ru/files/shenfeld/2019-10-09_13.14.25-kq915.png)
    - do: |-
        Отключить режим оффлайн в браузере
        Кликнуть Перезагрузить страницу
    - assert: |-
        * Открылась страница заказа
        * Возврат в процессе, через какое-то время возврат завершился
manual: true
Функциональность: Действия с заказом
Устройство: Десктоп
Страница: Страница заказа
Сервис: ЖД
Тестирование асессорами: Да
Окружение: Testing
Автор: shenfeld
