feature: ЖД
type: Страница заказа
description: |-
  Кейс для проверки покупки дежурным тестировщиком.
  Реквизиты тестовой карты: 5100002767155462, 12/22, 454

  Пересадочные рейсы можно найти
  москва-тихвин
  москва-питер
  пермь-анапа
  серов-ростов на дону
specs:
  'ЖД+ЖД: Покупка и возврат билетов с пересадкой, шаг оплаты включен':
    - do: >-
        Перейти на выдачу Москва - Санкт-Петербург через неделю

        Для поезда с пересадкой кликнуть по кнопке покупки

        Выбрать 3 пассажиров - 1 взрослого, 1 ребенка от 5 до 10 лет, 1 ребенка
        без места

        Выбрать места на первый поезд

        Выбрать места на второй поезд

        Нажать на кнопку “Указать пассажиров”

        Заполнить все поля валидными данными

        В поле электронной почты указать почту на @yandex-team.ru

        Нажать по кнопке “Проверить заказ и купить”
    - assert: |-
        * Осуществился переход на страницу подтверждения
        * Все данные о поезде и пассажирах соответствуют выбранным
    - do: |-
        Нажать на кнопку “Ввести карту и оплатить”
        На странице оплаты ввести данные тестовой карты из описания кейса
        Нажать на кнопку “Оплатить”
        На хэппи пейдж нажать на кнопку "Подробнее о заказе"
    - assert: >-
        * Произошел переход на страницу подробного заказа для 3 пассажиров

        * На странице есть кнопка “Скачать билеты” (в таче просто Скачать)

        * На почту пришло письмо о покупке (письмо может прийти в течение
        получаса, так как не будет чека)

        * Стоимость заказа в письме совпадает с итоговой суммой со страницы
        подтверждения

        * Для ребенка без места Цена билета и Сервисный сбор равны 0
    - do: Нажать на кнопку “Скачать билеты” (в таче просто Скачать)
    - assert: '* Произошло скачивание pdf-файла'
    - do: Открыть чек со страницы заказа
    - assert: >-
        * итоговая сумма в чеке совпадают с суммами в письме и на странице
        заказа
    - do: Нажать на кнопку “Сдать билет” для одного из билетов
    - assert: '* Появилось модальное окно возврата'
    - do: |-
        Запомнить сумму, которая отображается как “К возврату”
        Нажать на кнопку “Подтвердить”
    - assert: >-
        * Через какое-то время появился статус Возврат

        * Через какое-то время сформировалась КРС

        * На указанную почту пришло письмо о возврате

        * Сумма к возврату в письме и на странице заказа совпадает с суммой,
        которая была указана в модальном окне возврата
    - do: Открыть чек и КРС на странице заказа
    - assert: >-
        * В чеке есть “Услуги перевозки пассажира ж/д

        транспортом”

        * Общая сумма к возврату совпадает с суммой в письме и суммой в
        модальном окне при возврате

        * Произошло скачивание квитанции о возврате
manual: true
Функциональность:
  - Действия с заказом
  - 'ЖД+ЖД: Пересадки'
Устройство:
  - Десктоп
  - Тач
Страница: Страница заказа
Сервис: ЖД
Тестирование асессорами: Нет
Окружение: Testing
Tag: Smoke
Автор: shenfeld
