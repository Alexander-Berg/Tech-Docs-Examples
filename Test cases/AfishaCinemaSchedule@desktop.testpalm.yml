feature: 1орг. Витрина фильмов кинотеатра (десктоп)

specs-integration:
  Проверка наличия элементов:
    - do: получить выдачу по запросу 'мега теплый стан расписание сеансов' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: |
        появился колдунщик 1org с витриной фильмов,
        блок содержит тайл и шоукейс

specs:
  Проверка внешнего вида:
    - label: 1org-afisha-cinema
    - do: получить выдачу по запросу 'кинотеатр октябрь' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: |
        появился колдунщик организации справа,
        в колдунщике есть блок с витриной фильмов
    - screenshot: примерный внешний вид [plain]
  Ссылки и счётчики:
    - tags: [title, thumb, scroll, showcase]
    - do: получить выдачу по запросу 'кинотеатр октябрь' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: виден колдунщик 1org с витриной фильмов
    - screenshot: примерный внешний вид [1org-afisha-cinema >> plain]
    - do: кликнуть на заголовок витрины фильмов
    - assert: |
        открылась страница афиши для кинотеатра октябрь
        url страницы содержит параметр 'from=afisha-venue-movie-desktop'
    - tech: записался счетчик с префиксом '/$page/$parallel/$result/composite/tabs/about/afisha_cinema/title'
    - do: кликнуть на картинку первого фильма
    - assert: открылась страница афиши про соответствующий фильм
    - tech: записался счетчик с префиксом '/$page/$parallel/$result/composite/tabs/about/afisha_cinema/showcase/item/thumb'
    - do: кликнуть на название первого фильма
    - assert: |
        открылась страница афиши про соответствующий фильм
        url страницы содержит параметр 'from=afisha-venue-movie-desktop'
    - tech: записался счетчик с префиксом '/$page/$parallel/$result/composite/tabs/about/afisha_cinema/showcase/item/text'
    - do: проскролить блок до конца
    - assert: в конце шоукейса присудствует ссылка с текстом "Посмотреть все фильмы"
    - do: кликнуть по ссылке "Посмотреть все фильмы"
    - assert: |
        открылась страница афиши для кинотеатра октябрь
        url страницы содержит параметр 'from=afisha-venue-movie-desktop'
    - tech: записался счетчик с префиксом '/$page/$parallel/$result/composite/tabs/about/afisha_cinema/showcase/item/thumb'
    - assertMetrics: '*'

files:
  - src/features/Companies/Companies.features/AfishaCinemaSchedule/AfishaCinemaSchedule.test/AfishaCinemaSchedule@desktop.hermione.js
  - src/features/Companies/Companies.features/AfishaCinemaSchedule/AfishaCinemaSchedule.test/AfishaCinemaSchedule@desktop.hermione.e2e.js

v-team: VanillaGeo
tags: [reviewed, hasE2E]
counter: /$page/$parallel/$result[@wizard_name="companies" and @subtype="company"]//afisha_cinema/title

tlds: [ru, by, ua, kz, uz, com]
