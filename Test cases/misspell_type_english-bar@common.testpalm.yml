feature: Опечатка и Ко
type: Поиск по англоязычным документам

specs:
  Переход на поиск по англоязычным документам:
    params:
      foreverdata: '3780444850'
      exp_flags: 'intent_show_english_bar=1'
    beforeEach:
      - do: получить выдачу по запросу 'foreverdata'
      - assert: над выдачей присутствует сообщение о том, что можно посмотреть документы на английском языке
    Внешний вид:
      - screenshot: внешний вид сообщения над выдачей [english-bar-on]
    Ссылка и счетчик:
      - do: нажать на ссылку 'Показать'
      - assert: выдача обновилась
      - tech: сработал счетчик '/$page/$main/misspell/type_english-bar-on/english-bar-on'
      - assert: в урле есть параметры lang=en, rsts=-202 и onlangpref=1 (для ПП - нет возможности проверить визуально, игнорируем этот пункт)
  Возврат на поиск по русскоязычным документам:
    params:
      foreverdata: '1891162477'
      exp_flags: 'intent_show_english_bar=1'
    beforeEach:
      - do: получить выдачу по запросу 'foreverdata'
      - assert: над выдачей присутствует сообщение о том, что показаны только документы на английском языке
      - do: добавить в урл параметры lang=en, rsts=-202 и onlangpref=1 (для ПП - нет возможности выставить параметры, игнорируем этот пункт) и обновить выдачу
      - assert: сообщение по прежнему присутствует на выдаче
    Внешний вид:
      - screenshot: внешний вид сообщения над выдачей [english-bar-off]
    Ссылка и счетчик:
      - do: нажать на ссылку 'Показать всё'
      - assert: выдача обновилась
      - tech: сработал счетчик '/$page/$main/misspell/type_english-bar-off/english-bar-off'
      - assert: в урле нет параметров lang, rsts и onlangpref=1 (для ПП - нет возможности проверить визуально, игнорируем этот пункт)
tags:
  - skip_e2e_check

files:
  - features/misspell/misspell_type_english-bar@common.hermione.js

v-team: Freshness

tlds: all
