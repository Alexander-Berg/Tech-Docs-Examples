feature: Работа с маскированными чатами

specs:

    Чату дается имя с бекенда, если пришел title[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Убедиться что у чата верное название Taxi chat 1627910200
        - assert: Название чата верное 
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Убедиться что у чата верное название Taxi chat 1627910200
        - assert: Название чата верное
    

    Чату дается маскированное имя собеседника, если не пришел title[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Для Пользователь А название чата Пассажир 1627910230
              Для Пользователь Б название чата Водитель 1627910230
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Убедиться что у чата верное название Пассажир 1627910230
        - assert: Название чата верное 
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Убедиться что у чата верное название Водитель 1627910230
        - assert: Название чата верное
    

    В списке чата маскируется имя собеседника[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить в чат сообщение
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Найти в списке чатов чат из description и убедиться что имя собеседника замаскировано 
        - assert: Имя в списке чатов замаскировано и звучит как "Водитель 1627910200"
    

    В пуше маскируется имя собеседника[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
              Пользователем А авторизованы в проверяемом браузере , а пользователем Б во втором браузере
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть любой чат  кроме чата из description и свернуть браузере
        - assert: Браузер свернут
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить в чат сообщение
        - assert: Сообщение отправлено
        - do: Пользователем А посмотреть на Push-нотификацию, которая пришла
        - assert: В Push-нотификации маскируется имя собеседника (Пассажир 1627910200)
    

    Показывается подпись Вы в первью чата на списке чатов для своего сообщения[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить в чат сообщение
        - assert: Сообщение отправлено
        - do: Открыть список чатов и убедиться что есть подпись "Вы", если последнее сообщение ваше
        - assert: В превью чата на списке чатов есть приставка "Вы"
    

    Показывается маскированное имя в превью чата на списке чатов для последнего сообщения собеседника[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить в чат сообщение
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: В списке чатов найти чат из description и убедиться что в превью замаскированное имя собеседника 
        - assert: В превью замаскированное имя собеседника(Водитель 1627910200)
    

    Показывается маскированное имя при Reply своего сообщения[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить в чат сообщение
        - assert: Сообщение отправлено
        - do: Сделать reply на отравленное сообщение выше
        - assert: В reply показывается замаскированное имя (Водитель 1627910200)
    

    Показывается маскированное имя при Reply сообщения собеседника[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить в чат сообщение
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Сделать reply на сообщение собеседника
        - assert: В reply показывается замаскированное имя собеседника (Водитель 1627910200)
    

    НЕ показывается маскированное имя в плашке при редактировании сообщения[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить в чат сообщение
        - assert: Сообщение отправлено
        - do: Вызвать контекстное меню для ранее отправленного сообщения  и выбрать редактировать его
        - assert: Над полем ввода в плашке не показывается имя, а вместо этого видим текст Редактирование сообщения и ниже текст исходного  сообщения
    

    Корректный экран Информация о чате для маскированного чата[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Тапнуть по шапке чата.
        - assert: Открылась карточка чата;
        - do: Убедиться что карточка чата содержит следующие пункты
        - assert: |
              Карточка чата корректная и отображаются только нужные пункты
              Логотип пассажира 
              название Taxi chat 1627910200
              Уведомления
              Найти в чате
              Картинки, файлы и ссылки
              Важные сообщения
              Пожаловаться
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Тапнуть по шапке чата.
        - assert: Открылась карточка чата;
        - do: Убедиться что карточка чата содержит следующие пункты
        - assert: |
              Карточка чата корректная и отображаются только нужные пункты
              Логотип водителя
              Название чата Taxi chat 1627910200
              Уведомления
              Найти в чате
              Картинки, файлы и ссылки
              Важные сообщения
              Пожаловаться
    

    Корректное контекстное меню  сообщения для участников маскированного чата[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить в чат сообщение
        - assert: Сообщение отправлено
        - do: Вызвать контекстное меню и убедиться что есть все пункты
        - assert: |
              Все пункты есть
              Редактировать
              Ответить
              Cкопировать текст
              Выбрать
              Сделать важным
              Удалить
        - do: проверить работу всех пунктов в контекстном меню
        - assert: Все пункты отрабатывают корректно
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Вызвать контекстное меню для сообщения собеседника и убедиться что есть нужные пункты
        - assert: |
              Все пункты есть
              Ответить
              Cкопировать текст
              Выбрать
              Сделать важным
              Пожаловаться
        - do: Проверить работу всех пунктов в контекстном меню
        - assert: Все пункты отрабатывают корректно
    

    Показывается маскированное имя при открытии изображения в фуллскрин[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отравить в чат изображение
        - assert: Изображение отправлено
        - do: Открыть изображение в фуллскрин и убедиться что там показывается маскированное имя 
        - assert: Показывается маскированное имя (Водитель 1627910200)
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Открыть ранее отправленное изображение в фуллскрин и убедиться что там показывается маскированное имя
        - assert: Показывается маскированное имя (Водитель 1627910200)
    

    Маскируется имя чата при поиске сообщения из этого чата[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить в чат сообщение
        - assert: Сообщение отправлено
        - do: Вернуться на список чатов и открыть глобальный поиск
        - assert: Открыт глобальный поиск
        - do: Ввести в поиск ранее отправленное слово из пункта 3
        - assert: поиск отдает результат и при этом видим замаскированное имя чата(Taxi chat 1627910200) плюс показывается искомое слово в превью поиска
    

    Маскируется имя чата при поиске его через глобальный поиск[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть глобальный поиск и ввести имя маскированного чата (Taxi chat 1627910200)
        - assert: поиск отдает маскированный чат и название его корректное (Taxi chat 1627910200)
    

#    В истории поиска показывается онлайновость[manual]:
#       - automation:
#        - description: |
#              Пользователь А - yndx-mssngr-913/QazMssngr1
#              Пользователь Б yndx-mssngr-914/QazMssngr1
#              Между ними есть маскированный чат Taxi chat 1627910200
#        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
#        - assert: Авторизация прошла успешно.
#        - do: Открыть глобальный поиск и ввести имя маскированного чата
#       - assert: поиск отдает маскированный чат и имя отображается корректно (Taxi chat 1627910200)
#        - do: Тапнуть в поиске на маскированный чат
#        - assert: Открывается маскированный чат
#        - do: Вернуться на список чатов и открыть поиск 
#        - assert: В блоке "история поиска" показывается маскированный чат и в превью показывается онлайновость собеседника 
    

    Не показывается спам плашка для маскированного чата[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Для Пользователь А название чата Пассажир 1627910230
              Для Пользователь Б название чата Водитель 1627910230
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается экран маскированного чата
        - do: Убедиться что нет спам-плашки
        - assert: Спам плашка отсутствует
    

    Нельзя отправить Forward в маскированный чат[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть приватный чат между пользователем А и пользователем Б (914Def-Имя-autotests D914)
        - assert: Приватный чат открыт
        - do: Отправить в чат сообщение
        - assert: Сообщение отправлено
        - do: Вызвать контекстное меню и выбрать переслать
        - assert: Открывается экран пересылки сообщения
        - do: Найти маскированный чат в списке чатов
        - assert: Не находит такой чат
        - do: В поле поиска ввести имя маскированного чата из description
        - assert: Поиск не отдает маскированный чат
    

    Корректно работает прочитанность для маскированных чатов[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить в чат сообщение
        - assert: Сообщение отправлено
        - do: Убедить что рядом с сообщением стоит одна галочка(сообщение еще не прочитано)
        - assert: Стоит одна галочка
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: прочитать сообщение
        - assert: Сообщение прочитано
        - do: Открыть чат пользователем А и убедиться, что поменялся статус прочитанности
        - assert: Статус поменялся с одной галочки на две
    

    Нельзя открыть профиль замаскированного собеседника из экрана чата[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить в чат сообщение
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Тапнуть по замаскированному имени собеседника на экране чата рядом с сообщением
        - assert: ничего не происходит - профиль собеседника не открывается
    

    Показывается маскированное имя при тайпингах[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
              Пользователем А авторизованы в проверяемом браузере , а пользователем Б во втором браузере
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: На списке чатов найти чат из description
        - assert: Чат найден
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Начать печатать в чат сообщение
        - assert: Сообщение печатается 
        - do: пока пользователь Б печатает, пользователь А посмотреть на превью чата в списке чатов
        - assert: В тайпинге видим замаскированное имя 
        - do: пользователем А открыть чат из description и посмотреть на шапку чата, пока печатает пользователь Б
        - assert: В шапке чата показывается замаскированное имя в тайпинге  Пассажир 1627910200
    

    В шапке чата показывается онлайновость[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
              Пользователем А авторизованы в проверяемом браузере , а пользователем Б во втором браузере
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Убедиться что в шапке чата показывается верная онлайновость
        - assert: Показывается статус "В Сети" и есть зеленая точка на аватарке замаскированного чата
        - do: пользователем Б выйти из мессенджера, а пользователем А минуты чез 1-2 посмотреть на статус онлайновости
        - assert: Показывается статус, что был в сети N минут назад
    

    Показывается онлайновость в карточке чата[manual]:
        - automation:
        - description: |
              Пользователь А - yndx-mssngr-913/QazMssngr1
              Пользователь Б yndx-mssngr-914/QazMssngr1
              Между ними есть маскированный чат Taxi chat 1627910200
              Пользователем А авторизованы в проверяемом браузере , а пользователем Б во втором браузере
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Тапнуть по шапке чата чтобы открыть карточку чата
        - assert: Открывается карточка чата и в ней показывается онлайновость "В сети"" и на аватарке чата показывается зеленая точка
        - do: пользователем Б выйти из мессенджера, а пользователем А минуты чез 1-2 посмотреть на статус онлайновости
        - assert: Показывается статус, что был в сети N минут назад
    
files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
    - chamb
