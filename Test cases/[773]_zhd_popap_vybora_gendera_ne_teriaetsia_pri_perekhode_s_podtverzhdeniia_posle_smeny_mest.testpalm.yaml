feature: ЖД
type: Подтверждение
description: >-
  Кейс будет отрабатывать, если в одном купе есть достаточное количество
  свободных мест, но места выбираются в разных купе (фишка экспресса).


  Добавлена проверка попапа гендера при переходе назад на страницу выбора мест,
  поэтому:

  Для прохождения кейса требуется найти поезд с гендерными купе, где пол хотя бы
  в одном купе еще не был определен.

  ![image](https://jing.yandex-team.ru/files/shenfeld/2019-09-18_11.54.00-3bnl7.png)

  Перейти на главную сервиса

  Перейти на вкладку Ж/Д билеты
specs:
  'ЖД: Попап выбора гендера не теряется при переходе с подтверждения после смены мест':
    - do: Открыть выдачу Москва - Санкт-Петербург поездами через месяц
    - do: >-
        Для поезда, у которого есть свободные места в купе (такие, как требуется
        в описании кейса), кликнуть по кнопке "Выбрать место"
    - do: Установить два взрослых пассажира
    - do: Выбрать тип вагона Купе (гендерное)
    - do: >-
        Выбрать 2 места в разных купе, где пол еще не был определен, выбрать
        любой пол (или места в неопределенном купе + определенном, тогда пол
        должен быть такой, какой уже определен в одном из купе)

        ![image](https://jing.yandex-team.ru/files/shenfeld/Vybor_mest_v_poezde_016A_Moskva_Murmansk_iz_Moskvy_v_Sankt-Peterburg_na_3_maya__Yandeks.Puteshestviya_2019-04-12_13-06-36.png)
    - do: >-
        Кликнуть по кнопке  перехода на следущий шаг покупки. (Кнопка может
        называться по разному, сейчас называется "Указать пассажиров"
    - do: Заполнить все поля валидной информацией
    - do: Кликнуть кнопку "Проверить заказ и купить"
    - assert: >-
        * Произошел переход на страницу подтверждения

        * На странице есть желтый блок с текстом "Выбранные места успели купить.
        Мы подобрали другие. Если они не подходят — выберите заново. Введенные
        данные сохранятся." и кнопкой "Выбрать места заново"

        * На схеме одно из выбранных мест заменено другим местом
    - do: Кликнуть по кнопке "Выбрать места заново"
    - assert: '* Осуществился переход на страницу выбора мест, в класс с тем же вагоном'
    - do: 'Кликнуть снова по месту в гендерном купе, где пол не определен'
    - assert: '* Появляется попап для выбора пола'
    - do: Выбрать любой пол
    - assert: '* Попап закрылся, место выбралось'
manual: true
Функциональность: Действия на подтверждении
Устройство:
  - Десктоп
  - Тач
Страница: Подтверждение
Сервис: ЖД
Тестирование асессорами: Да
Окружение:
  - Production
  - Testing
Автор: shenfeld
