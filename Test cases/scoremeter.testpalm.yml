feature: Балломер

description: карточка балломера на страницах (home-page, subject-page, topic-page, task-page, statistics-pagek, lesson-page)

specs:
    Неавторизованный пользователь:
        beforeEach:
            - do: убедиться, что пользователь не залогинен (очистить cash и cookies браузера)
            - assert: пользователь не залогинен - чистая сессия
        Чистый прогресс:
            - do: перейти на главную страницу
            - screenshot: внешний вид карточки балломера [plain]
            - assert: |
                кол-во баллов в карточке балломера 0
                кол-во дней без пропуска в карточке балломера 0
                столбики прогресса на графике на отметке 0
                список предметов под графиком отсутствует
        Решение задачи верно:
            - tags: smoke
            - do: перейти на страницу любой задачи по предмету ЕГЭ Физика
            - do: ввести верный ответ и кликнуть Проверить ответ
            - assert: |
                кол-во баллов в карточке балломера N
                крайний правый столбик прогресса (текущий день недели) заполнился с отметкой в N баллов
                под графиком присутствует предмет Физика с N баллов
            - do: перейти на страницу любой задачи по предмету ОГЭ Физика
            - do: ввести верный ответ и кликнуть Проверить ответ
            - screenshot: внешний вид карточки балломера [plain]
            - assert: |
                кол-во баллов в карточке балломера N+M (сумма баллов за обе решенные задачи)
                кол-во дней без пропуска в карточке балломера 1
                крайний правый столбик прогресса (текущий день недели) заполнился с отметкой в N+M (сумма баллов за обе решенные задачи)
                под графиком присутствует два предмета Физика с N и M баллами
        Решение задачи неверно:
            - tags: smoke
            - do: перейти на страницу любого топика по предмету Математика (базовый уровень)
            - do: ввести неверный ответ в любой задаче и кликнуть Проверить ответ
            - assert: |
                кол-во баллов в карточке балломера 0
                кол-во дней без пропуска в карточке балломера 0
                столбики прогресса на графике на отметке 0
                список предметов под графиком отсутствует
        Начисление баллов:
            - do: перейти на страницу урока Математика (базовый уровень) в раздел задач
            - do: ввести верный ответ в поле любой задачи и кликнуть "Проверить ответ"
            - assert: |
                кол-во баллов в карточке балломера увеличилось на 1
                кол-во баллов в строчке предмета под графиком увеличилось на 1
            - do: кликнуть еще раз "Проверить ответ" в той же задаче
            - assert: |
                кол-во баллов не изменилось
                кол-во баллов в строчке предмета под графиком не изменилось
            - do: ввести верный ответ в поле любой другой задачи и кликнуть "Проверить ответ"
            - assert: |
                кол-во баллов в карточке балломера увеличилось еще на 1
                кол-во баллов в строчке предмета под графиком увеличилось еще на 1
        Решение варианта неверно [manual]:
            - automation: YOUNGLINGS-2901
            - tags:
                - no_assessors
                - e2e
            - do: перейти на страницу любого варианта по предмету Математика (базовый уровень)
            - do: кликнуть "Завершить тест"
            - assert: отображена страница репорта с карточкой балломера
            - assert: |
                кол-во баллов в карточке балломера 0
                кол-во дней без пропуска в карточке балломера 0
                столбики прогресса на графике на отметке 0
                список предметов под графиком отсутствует
        Решение варианта без второй части [manual]:
            - automation: YOUNGLINGS-2901
            - tags:
                - no_assessors
                - e2e
            - do: перейти на страницу любого варианта по предмету Математика (профильный уровень)
            - do: ввести верные ответы для всех заданий первой части (присутствует поле ответ) и кликнуть "Завершить тест"
            - assert: отображена страница второй части
            - do: оставить задания второй части с отметкой в 0 баллов и кликнуть "Завершить тест"
            - assert: отображена страница репорта с карточкой балломера
            - assert: |
                кол-во баллов в карточке балломера соответствует кол-ву баллов (N баллов) за решение варианта
                кол-во дней без пропуска в карточке балломера 1
                крайний правый столбик прогресса (текущий день недели) заполнился с отметкой в N баллов
                под графиком присутствует предмет Математика (профильный уровень) с N баллов
        Решение варианта целиком [manual]:
            - automation: YOUNGLINGS-2901
            - tags:
                - no_assessors
                - e2e
            - do: перейти на страницу любого варианта по предмету Математика (профильный уровень)
            - do: ввести верные ответы для всех заданий и кликнуть "Завершить тест"
            - assert: отображена страница второй части
            - do: проставить всем заданиям второй части любые оценки кроме 0 и кликнуть "Завершить тест"
            - screenshot: внешний вид карточки балломера [plain]
            - assert: отображена страница репорта с карточкой балломера
            - assert: |
                кол-во баллов в карточке балломера соответствует кол-ву баллов (N баллов) за решение варианта
                кол-во дней без пропуска в карточке балломера 1
                крайний правый столбик прогресса (текущий день недели) заполнился с отметкой в N баллов
                под графиком присутствует предмет Математика (профильный уровень) с N баллов
    Авторизованный пользователь:
            # нужен подготовленный passport_uid=ballomerCase с несколькими решенными задачами и вариантами
            # по разным предметам в разные дни недели
            # с timestamp, чтобы прогресс за неделю так же не был пустой
            # например пнд - решали, вт - не решали, ср, чтв и птн - решали, в итоге три дня подряд
            - tags: no_assessors
            - do: убедиться, что пользователь залогинен либо залогиниться
            - assert: пользователь залогинен
            - do: перейти на главную страницу
            - assert: |
                кол-во баллов в карточке балломера больше 0
                кол-во дней без пропуска в карточке балломера больше 0
                под графиком присутствует список предметов с кол-вом баллов для каждого


v-team: Younglings

qa-engineer:
    - helm

platform:
    - common

tags:
    - edu-front
    - home-page
    - subject-page
    - problem-page
    - topic-page
    - report-page
    - statistics-page
    - lesson-page

files:
    - tests/hermione/suites/common/scoremeter/scoremeter.hermione.js
