feature: SocialButtons
experiment: Круглые залипающие кнопки на тачах

specs:
  Отображение залипающих кнопок с подсказками:
    - params:
        exp_flags:
          - social-buttons=1
          - social-buttons-time-before-expand=1000
    - do: открыть ссылку https://yandex.ru/turbo?stub=socialbuttons/page.json
    - assert: кнопки появились справа внизу
    - screenshot: внешний вид соответствует скриншоту [plain]
    - do: подождать одну секунду
    - do: медленно проскроллить статью на два экрана вниз
    - assert: выехал текст для кнопки комментариев
    - screenshot: внешний вид соответствует скриншоту [expanded-comment]
    - do: подождать три секунды
    - assert: кнопка свернулась обратно
    - do: медленно проскроллить до начала следующей статьи
    - do: подождать одну секунду
    - do: медленно проскроллить до конца
    - assert: должен выехать текст для кнопки лайков
    - screenshot: внешний вид соответствует скриншоту [expanded-like]


  Отображается сообщение после нажатия на "Скопировать ссылку":
    - params:
        exp_flags:
          - social-buttons=1
          - social-buttons-toast-show-time=4000
    - do: открыть ссылку https://yandex.ru/turbo?stub=socialbuttons/page.json
    - assert: кнопки появились справа внизу
    - do: нажать на кнопку с иконкой ссылки
    - assert: появилось сообщение вверху экрана "Ссылка скопирована"
    - screenshot: внешний вид соответствует скриншоту [toast]

  Взаимодействие кнопок с залипающей плашкой рекламы:
    - params:
        exp_flags:
          - social-buttons=1
          - social-buttons-blue=1
          - advert-bottom-min-height=400
          - social-buttons-time-before-expand=10
    - do: открыть ссылку https://yandex.ru/turbo?stub=socialbuttons/page-sticky-advert.json
    - assert: кнопки появились справа внизу
    - do: проскроллить страницу на один экран
    - assert: внизу появилась плашка рекламы с кнопкой закрытия, из трех кнопок справа осталась только одна
    - screenshot: внешний вид соответствует скриншоту [with-advert]
    - do: нажать на иконку закрытия на нижней плашке рекламы
    - assert: плашка рекламы исчезла, все кнопки вернулись на место
    - do: проскроллить страницу до конца
    - screenshot: внешний вид соответствует скриншоту [without-advert]

  При перезагрузке страницы кнопка не разворачивается повторно:
    - params:
        exp_flags:
          - social-buttons=1
          - social-buttons-time-before-expand=10
    - do: открыть ссылку https://yandex.ru/turbo?stub=socialbuttons/page.json
    - assert: кнопки появились справа внизу
    - do: проскроллить статью до конца
    - assert: развернулась кнопка комментариев
    - do: обновить страницу
    - assert: кнопки появились справа внизу
    - assert: развернулась кнопка лайков
    - do: обновить страницу
    - assert: кнопки появились справа внизу
    - assert: развернулась кнопка копирования ссылки (если не развернулась сразу после обновления, проскролить статью до конца)

files:
- platform/components/SocialButtons/__tests__/SocialButtons@phone.hermione.js

tags:
  - no_assessors #кнопки оторвали, тесты можно будет удалить после завершения обратного экспа https://st.yandex-team.ru/TURBO-3934

v-team: Turbo

tlds: none
