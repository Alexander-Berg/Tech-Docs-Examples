feature: Саджест
type: Богатые подсказки

specs:
  beforeEach:
    - do: получить выдачу по запросу "тест"
    - assert: получена выдача по указанному запросу
    - do: кликнуть в кнопку "х" поисковой стрелки
    - assert: поисковая стрелка очищена
    - assert: инпут активен
    - assert: саджест открыт
  Богатые подсказки - АОН:
    - tags: [smoke_extended, suggest_regress]
    - do: введите в поисковую стрелку "+79037030428"
    - assert: элементы саджеста обновились
    - assert: в саджесте присутствует богатая навигационная подсказка "Возможно, злоумышленники"
    - screenshot: примерный внешний вид [suggest/rich/portrait/aon]
    - do: кликнуть в богатую подсказку
    - assert: выдача обновилась
    - assert: саджест закрыт
    - assert: запрос в поисковой стрелке соответствует запросной части богатой подсказки
    - screenshot: пример запросной части богатой подсказки [https://jing.yandex-team.ru/files/qwee/2020-01-31_13.59.02-596cJ.png]
    - assertMetrics: '*'
  Богатые подсказки - Метка официальности и фавиконка:
    - tags: [smoke_extended, suggest_regress]
    - do: введите в поисковую стрелку "вконтакте" (Пробуйте альтернативные запросы "youtube", "одноклассники", "google", "госуслуги сайт", "кинопоиск" если подсказка не пришла в данных или отображается как историческая)
    - assert: элементы саджеста обновились
    - assert: в саджесте присутствует навигационная подсказка с синей меткой официальности справа от гринурла и фавиконкой слева
    - screenshot: примерный внешний вид [suggest/rich/portrait/verified]
    - do: кликнуть в навигационную подсказку
    - assert: открылась страница выбранной соц сети  (в той же вкладке, в новой странице, в приложении - не имеет значения)
    - assertMetrics: '*'
  Колдунщик ценных бумаг:
    Внешний вид с графиком:
      - do: введите в поисковую стрелку "акции яндекс"
      - assert: элементы саджеста обновились, в саджесте присутствует подсказка со стоимостью акций и графиком цены
      - screenshot: примерный внешний вид саджеста [suggests]
    Внешний вид с длинным названием:
      - do: введите в поисковую стрелку "акции сбербанк привилегированные цена" (альтернативные запросы "акции сбербанк привилегированные цена", "акции сургутнефтегаз привилегированные цена")
      - assert: элементы саджеста обновились, в саджесте присутствует подсказка со стоимостью акций и графиком цены
      - screenshot: примерный внешний вид саджеста [suggests]
    Клик ведет на СЕРП:
      - do: введите в поисковую стрелку "акции яндекс"
      - assert: элементы саджеста обновились, в саджесте присутствует подсказка со стоимостью акций и графиком цены
      - do: нажмите на подсказку с графиком
      - assert: загрузилсь поисковая выдача, в стрелке указан запрос "акции яндекс"

specs-integration:
  beforeEach:
    - do: получить выдачу по запросу "тест"
    - assert: получена выдача по указанному запросу
    - do: кликнуть в кнопку "х" поисковой стрелки
    - assert: поисковая стрелка очищена
    - assert: инпут активен
    - assert: саджест открыт
  Богатые подсказки - АОН:
    - do: введите в поисковую стрелку "+79037030428"
    - assert: элементы саджеста обновились
    - assert: в саджесте присутствует богатая навигационная подсказка "Возможно, злоумышленники"
    - do: кликнуть в богатую подсказку
    - assert: выдача обновилась аяксом
    - assert: саджест закрыт
    - assert: параметр 'text' в урле равен тексту введенного запроса (кириллица и часть символов в ссылке могут быть закодированы спецсимволами, например "%3D%25D0%25B2...". Для раскодирования можно воспользоваться сервисами типа "URL Decoder")
  Богатые подсказки - Метка официальности и фавиконка:
    - do: введите в поисковую стрелку "vk"
    - assert: элементы саджеста обновились
    - assert: в саджесте присутствует навигационная подсказка соц сети с синей меткой официальности и фавиконкой слева
    - do: кликнуть в навигационную подсказку
    - assert: открылась страница выбранной соц сети  (в той же вкладке, в новой странице, в приложении - не имеет значения)
  Колдунщик ценных бумаг:
    - do: введите в поисковую стрелку "акции яндекс"
    - assert: элементы саджеста обновились, в саджесте присутствует подсказка со стоимостью акций и графиком цены
    - do: нажмите на подсказку с графиком
    - assert: загрузилсь поисковая выдача, в стрелке указан запрос "акции яндекс"


files:
  - features/touch-phone/suggest/suggest-rich.hermione.js
  - features/touch-phone/suggest/suggest-rich.hermione.e2e.js

tags:
  - suggest
  - input

browsers:
  notFor:
    - searchapp-phone-group

v-team: Suggest

priority: high

tlds:
  - ru
  - by
  - ua
  - kz
  - uz
  - com
  - com.tr
