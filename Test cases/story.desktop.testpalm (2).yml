feature: Cюжет Яндекс.Спорта

description: Сюжет - это основная сущность сервиса, которая обладает несколькими блоками. Блоки заголовка, аннотации, суммаризации и медиаблок позволяют пользователю ознакомиться с кратким содержанием сюжета, блок "Подробнее о событии" предоставляет пользователю выбор лицензированного информационного агентства для полного ознакомления с сюжетом. Траурный сюжет - сюжет об убийстве, смерти, тяжелых травмах, захвате заложников, теракте.

specs-integration:
  должен открываться:
    - do: перейти по ссылке https://yandex.ru/sport/rubric/football
    - assert: страница открылась
    - do: кликнуть по первой карточке в рубрике
    - assert: открылась страница сюжета
    - do: поскроллить вниз до следующего сюжета
    - assert: подгружается новый сюжет

  архивный должен открываться:
    - tags:
      - backend_sport    
    - do: открыть архивный сюжет на сервисе, например, https://yandex.ru/sport/story/Konor_MakGregor_poyavilsya_na_duehli_vzglyadov_KHabiba_i_Gehtzhi--585217fd3db10c7ed4ea24aa3686d608	
    - assert: |	
        сюжет отображается корректно,	
        присутсвуют заголовок, аннотация сюжета и ссылка В источнике	
        над заголовком отображается источник,	
        отсутствует блок с комментариями и лайками,	
        может остутствовать миедиаблок	
    - assert: внешний вид соответствует скриншоту - https://jing.yandex-team.ru/files/an-smirn0v/shot_210407_150540.png	
    - do: перейти по ссылке 'В источнике'	
    - assert: в новой вкладке открывается новость от источника	
    - do: вернуться к сюжету, кликнуть по любому источнику из блока Подробнее о событии	
    - assert: в новой вкладке открывается новость от источника	
    - do: вернуться к сюжету, проскроллить сюжет ниже блока 'Подробнее о событии'	
    - assert: отображается название блока "Новости", ниже подгружается новостная лента
    
  архивный битый урл не должен пятисотить:
    - do: перейти по ссылке https://yandex.ru/sport/story/a--1
    - assert: открылась страница с надписью "Не удалось отобразить сюжет"

  архивный траурный не должен пятисотить:
    - do: перейти по ссылке https://yandex.ru/sport/story/Portugalskij--88dcd853ddf61549f49a7fe97949d200
    - assert: открылась страница с сюжетом

  должен открываться под кукой адблока:
    - do: перейти по ссылке https://yandex.ru/news
    - assert: открылась страница рубрикаи Главное
    - do: установить куку bltsr=1
    - do: кликнуть по первой карточке в рубрике
    - assert: открылась страница сюжета
    - do: поскроллить вниз до следующего сюжета
    - assert: подгружается новый сюжет

  только с аннотацией без медиа открывается без пятисоток:
    - do: перейти на https://yandex.ru/sport/story/Motokross--72741359b692d158910bb824eb9bf4b8
    - assert: произошел переход без ошибок

  должен содержать ссылки на источник:
    - tags:
        - smoke
        - backend_sport  
    - do: открыть сюжет из топа новостей на Главной
    - assert: |
        открывается страница выбранного сюжета,
        над заголовком отображается название источника,
        после суммаризации располагается ссылка 'В источнике'
    - do: кликнуть по названию источника над заголовком
    - assert: |
        в новой вкладке открывается страница с новостью от источника,
        в урле присутствуют параметры utm_source=yxsport, utm_medium=desktop
    - do: вернуться на страницу сюжета Яндекс.Новости
    - do: кликнуть по наименованию источника в блоке суммаризации (выделено серым шрифтом - https://jing.yandex-team.ru/files/kossakovskaya/2021-10-18_20-35-03.png)
    - assert: |
        в новой вкладке (либо в текущей, не имеет значения в данном случае) открылась новость от выбранного источника,
        тема сюжета в источнике совпадает с темой сюжета, с которого вы перешли по ссылке источника,
        в урле присутствуют параметры utm_source=yxsport, utm_medium=desktop

  подгружает ленту новостей под сюжетом:
    - tags:
      - backend_sport  
    - do: открыть любой сюжет на сервисе Яндекс.Спорт
    - do: поскроллить страницу сюжета ниже блока "Подробнее о событии"
    - assert: |
        отображается рекламный блок,
        ниже подгружается новостная лента с сюжетами
    - do: проскроллить страницу вниз
    - assert: |
        подгружается новая порция сюжетов,
        при медленном соединении в конце порции сюжетов и перед подгрузкой новой может отображаться жёлтый спиннер

  содержит рекламу:
    - tags:
      - backend_sport
    - do: открыть любой нетраурный сюжет на сервисе Яндекс.Спорт
    - assert: |
        в правой колонке отображается рекламный блок,
        скриншот внешнего вида https://jing.yandex-team.ru/files/kudyukova/browser_KKKtx6rJNw.png
    - do: поскроллить страницу ниже блока "Подробнее о событии"
    - assert: |
        под блоком "Подробнее о событии" отображается рекламный блок,
        скриншот внешнего вида https://jing.yandex-team.ru/files/kudyukova/browser_RKlFWyB1qW.png
    - do: поскроллить страницу вниз
    - assert: |
        после рекламы под блоком "Подробнее о событии" отображается лента с карточками сюжетов,
        в ленте есть карточки с рекламой,
        рекламный блок справа залипает и остаётся на месте при скролле страницы

specs:
  может содержать цитату:
    - tags: no_assessors
    - do: открыть сюжет на сервисе Яндекс.Спорт, содержащий цитату
    - assert: |
        открылась страница сюжета,
        после аннотации на сером фоне отображается цитата,
        слева от аннотации есть фото автора цитаты,
        в начале цитаты указано имя автора и его профессия/род занятий,
        после текста цитаты указан источник,
        рядом с источником может быть указана дата публикации,
        скриншот внешнего вида блока https://jing.yandex-team.ru/files/kudyukova/browser_8JhiVuCfGy.png
    - do: кликнуть на имя автора цитаты
    - assert: в новой вкладке открылась выдача поискового запроса по имени автора
    - do: вернуться назад на страницу сюжета
    - do: кликнуть на источник в конце цитаты
    - assert: в новой вкладке открылась новость от источника

  может содержать блок "С чего все началось" с официальным источником:
    - tags:
      - backend_sport
    - do: чтобы быстро найти сюжет, который содержит блок 'С чего все началось' с заголовком и иконкой издательства, нужно поискать его на таче по шагам ниже
    - do: после перехода на тестовый стенд открыть DevTools и включить эмуляцию тача (общая инструкция тут https://wiki.yandex-team.ru/eva/testing/tech/DevTools/#kakperekljuchitotobrazheniesajjtavmobilnyjjvid)
    - do: обновить страницу
    - assert: отображается мобильная версия сервиса Яндекс Спорт на странице рубрики 'Главное'
    - do: перейти в любой сюжет тапом по заголовку карточки
    - assert: открывается сюжет
    - do: скроллить ленту сюжетов, пока не попадется сюжет с блоком  'С чего все началось' с официальным источником
    - assert: |
        отображается  сюжет с блоком 'С чего все началось' с официальным источником,
        скрин https://jing.yandex-team.ru/files/an-smirn0v/shot_211014_161033.png
    - do: убедиться, что сюжет расположен на экране так, что урл совпадает с заголовком сюжета
    - assert: скрин https://jing.yandex-team.ru/files/an-smirn0v/shot_211014_161258.png
    - do: выключить эмуляцию тача, закрыть консоль и обновить страницу
    - assert: открыт тот же сюжет, что и на таче, но в десктопной версии (может измениться заголовок на похожий заголовок и источник)
    - do: поскроллить до блока 'С чего все началось'
    - assert: |
        отображается  сюжет с блоком 'С чего все началось' с официальным источником,
        блок 'С чего все началось' располагается над блоком 'Подробнее о событии',
        блок содержит иконку издания, заголовок, аннотацию, название источника, время публикации,
        внешний вид - https://jing.yandex-team.ru/files/an-smirn0v/shot_211014_161519.png
    - do: навести курсор на любой элемент блока под его названием 'С чего все началось'
    - assert: меняется стиль курсора, заголовок по ховеру на блок меняет шрифт на красный
    - do: кликнуть на любой элемент блока
    - assert: |
        в новой вкладке открывается новость от источника,
        в урле прокинуты параметры &utm_source=yxsport и utm_medium=desktop
    - do: вернуться на вкладку с сюжетом Яндекс.Спорт
    - assert: сюжет проскроллен к рекламе под сюжетом (для трагичных - к ленте)

  может содержать блок "С чего все началось" с неофициальным источником:
    - tags:
      - backend_sport
    - do: чтобы быстро найти сюжет, который содержит блок 'С чего все началось' без заголовка и иконки издательства, нужно поискать его на таче по шагам ниже
    - do: после перехода на тестовый стенд открыть DevTools и включить эмуляцию тача (общая инструкция тут https://wiki.yandex-team.ru/eva/testing/tech/DevTools/#kakperekljuchitotobrazheniesajjtavmobilnyjjvid)
    - do: обновить страницу
    - assert: отображается мобильная версия сервиса Яндекс Спорт на странице рубрики 'Главное'
    - do: перейти в любой сюжет тапом по заголовку карточки
    - assert: открывается сюжет
    - do: скроллить ленту сюжетов, пока не попадется сюжет с блоком 'С чего все началось' с неофициальным источником
    - assert: |
        отображается  сюжет с блоком 'С чего все началось' с неофициальным источником - без заголовка и иконки издательства,
        скрин https://jing.yandex-team.ru/files/an-smirn0v/2020-08-27_18-56-27.png
    - do: убедиться, что сюжет расположен на экране так, что урл совпадает с заголовком сюжета
    - assert: скрин https://jing.yandex-team.ru/files/an-smirn0v/2020-08-27_18-57-04.png
    - do: выключить эмуляцию тача, закрыть консоль и обновить страницу
    - assert: открыт тот же сюжет, что и на таче, но в десктопной версии (может измениться заголовок на похожий заголовок и источник)
    - do: поскроллить до блока 'С чего все началось'
    - assert: |
        отображается  сюжет с блоком 'С чего все началось' с неофициальным источником,
        блок 'С чего все началось' располагается над блоком 'Подробнее о событии',
        блок содержит аннотацию и в тексте ссылку на неофициальный источник (может отображаться логотип),
        название ссылающегося источника, время публикации,
        внешний вид - https://jing.yandex-team.ru/files/nightsonne/2020-08-27_18-57-59.png
    - do: навести курсор на название неофициального источника в тексте аннотации
    - assert: меняется стиль курсора, название источника поменяет шрифт на красный
    - do: кликнуть на название неофициального источника в тексте аннотации
    - assert: |
        в новой вкладке открывается новость на сайте неофициального источника,
        в урле прокинуты параметры &utm_source=yxsport и utm_medium=desktop
    - do: вернуться на вкладку с сюжетом Яндекс.Спорт
    - assert: сюжет проскроллен к рекламе под сюжетом (для трагичных - к ленте)
    - do: кликнуть по названию источника с отображенным временем публикации
    - assert: |
        в новой вкладке открывается новость от источника,
        в урле прокинуты параметры &utm_source=yxsport и utm_medium=desktop,
    - do: вернуться на вкладку с сюжетом Яндекс.Спорт
    - assert: сюжет проскроллен к рекламе под сюжетом (для трагичных - к ленте)

  блок "Ещё по теме" отображается корректно:
    - do: открыть любой сюжет на сервисе Яндекс.Спорт
    - assert: | 
        открывается сюжет, на странице сюжета есть блок "Ещё по теме" 
        внешний вид соответствует скриншоту - https://jing.yandex-team.ru/files/umansai5/2022-03-23_15-51-52.png

  содержит суммаризацию, разворачивающуюся по кнопке "Читать далее":
    - tags:
      - backend_sport  
    - do: открыть любой сюжет со страницы Яндекс Спорт https://yandex.ru/sport
    - assert: |
        открывается сюжет, под заголовком есть страница суммаризации 
        внешний вид соответствует скриншоту https://jing.yandex-team.ru/files/umansai5/2022-03-23_16-46-13.png
    - do: кликнуть "Читать далее"
    - assert: |
        суммаризация разворачивается,
        отображаются следующие 3 пункта, всего в блоке должно быть 4 пункта,	
        в конце блока суммаризации отображается ссылка "Свернуть",
        внешний вид соответствует скриншоту https://jing.yandex-team.ru/files/umansai5/2022-03-23_16-40-14.png
    - do: кликнуть "Свернуть"
    - assert: |
        суммаризация сворачивается 
        внешний вид соответствует скриншоту https://jing.yandex-team.ru/files/umansai5/2022-03-23_16-46-13.png

  содержит суммаризацию, скрывающуюся по кнопке "Свернуть":
    - params:
        flags:
          - yxnews_yt_request_summary=1,
          - yxneo_sport_story_blocks-sequence=summarization,
          - yxneo_sport_desktop_story_summarization=3,
          - yxneo_sport_story_summarization_collapse=1,
          - yxneo_sport_story_summarization_auto-expand=1,
    - do: открыть любой сюжет со страницы Яндекс Спорт https://yandex.ru/sport
    - assert: |
        открывается сюжет, под заголовком есть страница суммаризации
        внешний вид соответствует скриншоту https://jing.yandex-team.ru/files/umansai5/2022-03-23_16-46-13.png
    - do: кликнуть "Читать далее"
    - assert: |
        суммаризация разворачивается
        внешний вид соответствует скриншоту https://jing.yandex-team.ru/files/umansai5/2022-03-23_16-40-14.png
    - do: кликнуть "Свернуть"
    - assert: |
        суммаризация сворачивается 
        внешний вид соответствует скриншоту https://jing.yandex-team.ru/files/umansai5/2022-03-23_16-46-13.png

  содержит ссылку на источник:
    - tags:
      - backend_sport  
    - do: открыть любой сюжет на сервисе Яндекс.Спорт
    - assert: |
        открылась страница выбранного сюжета,
        над заголовком отображается название источника,
        в конце каждого пункта суммаризации располагается ссылка на источник (ссылка на источник = наименование источника, написанное серым цветом)
    - do: кликнуть по названию источника над заголовком
    - assert: в новой вкладке открылась новость от источника
    - do: вернуться назад на странцу сюжета
    - do: кликнуть по наименованию любого источника в суммаризации - https://jing.yandex-team.ru/files/kossakovskaya/2021-10-18_19-00-44.png
    - assert: |
        в новой вкладке открылась новость от источника, по которому вы кликнули,
        тема источника совпадает с темой сюжета в сервисе "Спорт"

  может содержать блок "Подробнее о событии":
    - tags:
      - backend_sport  
    - do: открыть сюжет из блока "Главные новости" на странице любой рубрики ("Главные новости" - это первый 5 новостей в рубрике "Главное", внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-11-25_13-54-54.png)
    - assert: |
        открылась страница выбранного сюжета,
        под суммаризацией (или под цитатой или блоком "С чего всё началось", которые могут присутствовать или отсутствовать) есть блок "Подробнее о событии" с источниками по сюжету,
        отображается от одного до трёх источников,
        внизу блока есть кнопка "Показать еще",
        скриншот внешнего вида блока https://jing.yandex-team.ru/files/an-smirn0v/shot_210422_172345.png
    - do: кликнуть по любому источнику (серым цветом)
    - assert: в новой вкладке открылась новость от источника
    - do: вернуться назад на страницу сюжета
    - do: кликнуть по заголовку блока "Подробнее о событии"
    - assert: |
        в этой же вкладке открылась страница со всеми источниками по сюжету,
        скриншот внешнего вида страницы https://jing.yandex-team.ru/files/kudyukova/browser_DWyW4VfyOD.png
    - do: вернуться назад на страницу сюжета
    - do: кликнуть по кнопке "Показать еще"
    - assert: список с источниками раскрывается
    - do: кликнуть по ссылке "Показать все источники"
    - assert: в этой же вкладке открылась страница со всеми источниками по сюжету

  может содержать видео с автовоспроизведением [manual]:
    - reasonNotToAuto:
      - нет возможности проверить воспроизведение звука
    - browsers:
        notFor: win-ie11
    - tags:
      - backend_sport        
    - do: открыть нетраурный сюжет, содержащий видео
    - do: |
        ВАЖНО! В браузере ие11 видео не воспроизводится и это ок, баг заводить на это не нужно, выполните проверку в другом браузере, 
        ВАЖНО! Так выглядит ВЫКЛЮЧЕННЫЙ тумблер "Автовоспроизведение" https://jing.yandex-team.ru/files/vasekerka/2021-09-29_15-08-19.png, если у вас тумблер в таком положении включать его на этом шаге НЕ нужно,
        ВКЛЮЧЕННЫЙ тумблер выглядит так https://jing.yandex-team.ru/files/vasekerka/2021-09-29_15-12-01.png, в таком случае его необходимо отключить кликом по нему и обновить страницу
    - assert: |
        на секунду появляется желтый спиннер в центре видео, затем вместо спиннера появляется иконка "Плей",
        видео не воспроизводится автоматически,
        справа от кнопки "Видео" присутствует иконка "Фото" и выключенный тумблер "Автовоспроизведение"
    - do: нажать на кнопку "Плей" и включить звук у видео, если иконка звука перечеркнута (если нет - оставить настройку звука как есть)
    - assert: видео вопроизводится со звуком
    - do: включить Автоплей видео
    - do: обновить страницу
    - assert: |
        обновляется страница сюжета, видео воспроизводится автоматически (возможно автовоспроизведение рекламы),
        обратите внимание! видео может проигрываться как со звуком, так и без - это зависит от ваших предыдущих настроек (и/или от эксперимента)
    - do: нажать на само видео
    - assert: видео становиться на паузу
    - do: выключить Автоплей видео
    - do: обновить страницу
    - assert: видео не воспроизводится автоматически

  может содержать медиаблок c видео и фото:
    - browsers:
        notFor: win-ie11
    - tags:
      - backend_sport         
    - do: открыть сюжет (из топа с Главной страницы Яндекс.Спорта или любой другой сюжет на сервисе Спорт), содержащий фото и видео
    - assert: |
        под блоком суммаризации располагается медиаблок,
        над основным видео есть переключатели "видео", "фото", а также тумблер автовоспроизведения,
        внешний вид блока https://jing.yandex-team.ru/files/kossakovskaya/2022-04-14_12-29-57.png
    - do: кликнуть по переключателю "Фото"
    - assert: |
        вместо видео отображается фото с подписанным источником в левом верхнем углу,
        в этой же вкладке вместо видео открывается карусель со всеми фото по сюжету,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-08-17_13-43-55.png
    - do: полистать фото вправо и влево стрелками
    - assert: стрелки кликабельны, по клику на них фото переключаются
    - do: кикнуть по переключателю "Видео"
    - assert: |
        показано первое видео по сюжету,
        слева от видео есть иконка источника,
        если видео несколько, их можно пролистать вправо и влево (стрелками, которые появляются при наведении на видео)

  может содержать медиаблок только с фото:
    - do: открыть сюжет, содержащий только несколько фото (без видео)
    - assert: |
        под блоком суммаризации располагается медиаблок,
        внешний вид блока https://jing.yandex-team.ru/files/nightsonne/2021-11-11_15-59-51.png,
        если изображений более трёх, их можно пролистать с помощью стрелок в галерее

  подгружает ленту под сюжетом после включения интернета [manual]:
    - tags:
      - backend_sport
    - reasonNotToAuto:
      - не удалось автоматизировать, тк выполнение команды setNetworkConnection в десктопных браузерах заканчивается ошибкой 'unknown error - network connection must be enabled'
    - do: открыть любой сюжет на сервисе Яндекс.Спорт
    - do: поскроллить страницу сюжета ниже блока "Подробне о событии"
    - assert: |
        отображается рекламный блок,
        ниже подгружается новостная лента с сюжетами
    - do: отключить интернет на устройстве
    - do: проскроллить вниз до конца текущей порции сюжетов
    - assert: под последней карточкой отображается жёлтый спиннер
    - do: включить интернет на устройстве
    - assert: |
        спиннер пропадает,
        подгружается новая порция сюжетов

  позволяет взаимодействовать с фото в медиаблоке [manual]:
    - reasonNotToAuto:
      - Нужно проверить взаимодействие с медиаблоком, когда сюжет уходит в архив - падает е2е, оставляем ручным.
    - do: открыть сюжет, содержащий только несколько фото (без видео)
    - assert: |
        под блоком суммаризации располагается медиаблок,
        внешний вид блока https://jing.yandex-team.ru/files/nightsonne/2021-11-11_15-59-51.png,
        если изображений более трёх, их можно пролистать с помощью стрелок в галерее
    - do: полистать фото вправо и влево стрелками
    - assert: стрелки кликабельны, по клику на них фото переключаются

#  содержит комментарии [manual]:
#    - assert: писать комментарии ЗАПРЕЩЕНО
#    - do: открыть на сервисе Яндекс.Спорт сюжет без комментариев
#    - assert: |
#        под аннотацией отображается бабл и слово "Комментировать",
#        счётчик комментариев отсутствует
#    - do: открыть сюжет с комментариями
#    - assert: |
#        под аннотацией отображается бабл и слово "Комментировать",
#        после "Комментировать" есть счётчик комментариев
#    - do: кликнуть на "Комментировать"
#    - assert: открылась модалка с комментариями

#  содержит настройки комментариев [manual]:
#    - assert: писать комментарии ЗАПРЕЩЕНО
#    - do: авторизоваться на сервисе Яндекс.Спорт и открыть сюжет без комментариев кликом на оглавление сюжета или аннотацию (возле иконки комментариев на странице рубрики не будет счетчика - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-15_21-12-20.png)
#    - assert: |
#        под аннотацией отображается блок эмоджи, бабл и слово "Комментировать",
#        счётчик комментариев отсутствует,
#        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-15_21-14-14.png ,
#        Обратите внимание! На скрине эмоджи не проставлены, у вас в сюжете они могут быть, это ок! Заводить на такое баги не нужно! Скриншот призван показать, как должен выглядеть блок "Комментировать", когда в нем нет ни одного комментария!
#    - do: кликнуть по иконке комментариев или по самому слову "Комментировать"
#    - assert: |
#        открылось модальное окно комментариев,
#        в окне не отображается комментарий, а только настройки,
#        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-15_21-16-22.png
#    - do: кликнуть на настройку отображения комментариев - "По умолчанию"
#    - assert: |
#        открылась выпадушка с вариантами настроек порядка отображения комментариев,
#        все элементы выпадушки и модалки комментариев корректно отображаются,
#        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-15_21-19-20.png
#    - do: в выпадушке выбрать "Старые"
#    - assert: |
#        закрылась выпадушка,
#        вместо "По умолчанию" теперь отображается "Старые", иконка около надписи также изменена,
#        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-15_21-23-12.png
#    - do: нажать на "Подписаться" справа от "Старые"
#    - assert: |
#        сменилась иконка, надпись отображается теперь - "Вы подписаны",
#        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-15_21-24-46.png
#    - do: нажать на "Вы подписаны"
#    - assert: |
#        открылась выпадушка с одним вариантом - "Отписаться",
#        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-15_21-26-30.png
#    - do: нажать на "Отписаться"
#    - assert: |
#        закрылась выпадушка,
#        вместо "Вы подписаны" вновь отображается "Подписаться"

  содержит рекламный блок справа при ресайзе страницы [manual]:
    - reasonNotToAuto:
      - нужна проверка подгрузки рекламы внутри рекламного блока на странице команды, рубрики или турнира после ресайза.
    - tags: rareCase
    - do: установить ширину экрана меньше 1250px. Чтобы проверить, что ширина окна действительно меньше 1250px, откройте консоль и введите туда 'window.innerWidth' (без кавычек) и нажмите enter. Полученное значение и будет действительная ширина окна
    - do: открыть страницу любой команды (рубрики, турнира), например, https://yandex.ru/sport/competition/3270
    - assert: справа отсутствует рекламный блок
    - do: увеличить ширину экрана до 1260px или больше
    - assert: справа появился рекламный блок, реклама подгружается

  содержит кнопку, позволяющую поделиться сюжетом:
    - browsers:
        notFor: win-ie11
    - do: открыть любой сюжет на сервисе Яндекс.Спорт
    - assert: |
        в правой верхней части карточки сюжета есть кнопка "Поделиться",
        скриншот внешнего вида https://jing.yandex-team.ru/files/an-smirn0v/browser_nvRfUnrV8e.png
    - do: кликнуть по кнопке "Поделиться"
    - assert: |
        появляется выпадающее меню со списком сервисов, в которых можно поделиться сюжетом,
        выпадающее меню при скролле скрывается под рубрикатором
    - do: поделиться сюжетом на любом из сервисов из списка (если понадобится, авторизоваться на выбранном сервисе)
    - assert: на внешнем сервисе опубликовано сообщение/запись со ссылкой на сюжет сервиса Я.Спорт
    - do: на внешнем сервисе кликнуть по ссылке на сюжет Я.Спорта из записи
    - assert: открылся сюжет на сервисе Я.Спорт

  содержит блок Главное:
    - tags:
      - backend_sport
    - do: установить ширину экрана больше 1260px. Чтобы проверить, что ширина окна действительно больше 1260px, откройте консоль и введите туда 'window.innerWidth' (без кавычек) и нажмите enter. Полученное значение и будет действительная ширина окна 
    - do: открыть любой сюжет на сервисе Яндекс.Спорт
    - assert: |
        справа от карточки сюжета отображается блок "Главное",
        снизу под сюжетом и рекламным блоком отображается блок "Ещё по теме",
        обратите внимание! блока "Ещё по теме" может не быть в сюжете, тогда его нужно поискать. Как это сделать проще всего - открыть любой сюжет на таче (можно в эмуляции) и поскролить ленту под сюжетом до тех пор, пока вы не найдете данный блок. И затем, уже с десктопа открыть нужный сюжет,
        блоки могут содержать разное количество новостей,
        для каждой новости указан заголовок, источник и время публикации,
        скриншот внешнего вида блока "Главное" - https://jing.yandex-team.ru/files/kudyukova/browser_5HMDj04Put.png,
        скриншот внешнего блока "Ещё по теме" - https://jing.yandex-team.ru/files/vasekerka/2021-05-26_14-08-16.png
    - do: поскроллить страницу вниз до рекламы под сюжетом
    - assert: блок "Главное" заканчивается на одной линии с рекламой под сюжетом

  с главной страницы открывается на сервисе Я.Спорт [manual]:
    - tags:
      - backend_sport
    - reasonNotToAuto:
      - нет возможности открыть морду
    - do: перейти на главную yandex.ru
    - do: навести курсор на блок "Сейчас в СМИ" и кликнуть на троеточие
    - do: кликнуть на пункт "Настроить"
    - do: выбрать любимую рубрику "Спорт"
    - do: в блоке "Сейчас в СМИ" появилась дополнительная рубрика "спорт"
    - do: кликнуть по рубрике "Спорт" (проростание спорта может занять несколько секунд или обновите страницу)
    - do: кликнуть по любой спортивной новости из блока
    - assert: произошёл переход на страницу соответствующего сюжета на сервисе Яндекс.Спорт
    - do: проскроллить ниже блока "Подробнее о событии"
    - assert: |
        отображается рекламный блок,
        ниже подгружается новостная лента со спортивными сюжетами

  архивный отображается корректно:
    - tags: no_assessors
    - do: открыть архивный сюжет https://yandex.ru/sport/story/a--356b79377bda6d9132a6bedf7fb6ab9c
    - assert: |
        страница сюжета открывается,
        отображается заголовок, картинка (если есть), аннотация сюжета и ссылка "В источнике",
        над заголовком указан источник и присутствует иконка поделяшки,
        под аннотацией отсутствует блок комментариев
    - do: перейти по ссылке "В источнике"
    - assert: в новой вкладке открылась новость от источника
    - do: вернуться назад на страницу сюжета
    - do: в блоке "Подробнее о событии" кликнуть по любому источнику
    - assert: в новой вкладке открылась новость от источника
    - do: вернуться назад на страницу сюжета
    - do: поскроллить ниже блока "Подробнее о событии"
    - assert: подгружается лента с сюжетам (сюжеты при этом не архивные)

  архивный траурный с видео отображается корректно [manual]:
    - reasonNotToAuto:
      - на спорте сложно найти траурный сюжет, с видео в архивном сюжете еще сложнее. Пока ручной, если словим видео в траурном можно будет автоматизировать
    - browsers:
        notFor:
          - win-ie11
    - tags: no_assessors
    - do: открыть архивный траурный сюжет, содержащий медиблок https://yandex.ru/sport/story/Portugalskij_motogonshhik_Gonsalvesh_pogib_vo_vremya_ralli_Dakar--88dcd853ddf61549f49a7fe97949d200?lang=ru&stid=6vkGWR80MuwHfwY48--d&t=1578910136&tt=true&persistent_id=84574308 (если в сюжете нет видео, найти другой)
    - assert: |
        страница сюжета открывается,
        под сюжетом и в правой колонке нет рекламных блоков,
        отображается заголовок, аннотация сюжета и ссылка "В источнике",
        отсутствует блок комментариев,
        видео не воспроизводится автоматически,
        в центре изображения есть иконка play
    - do: нажать на иконку play
    - assert: видео воспроизводится

  позволяет открыть попап статистики через настройку-троеточие:
      - tags:
          - backend_sport
      - do: открыть выдачу сервиса на странице рубрики 'Главное'
      - do: перейти в первый сюжет из топ-5 новостей спорта кликом по заголовку в карточке
      - do: навести мышку на иконку с тремя точками в блоке сюжета и кликнуть на нее
      - assert: |
          по ховеру меняется стиль курсора, иконка становится красной,
          после клика раскрывается выпадающее меню с пунктом 'Статистика сюжета' https://jing.yandex-team.ru/files/an-smirn0v/shot_211029_144014.png
      - do: кликнуть по пункту меню 'Статистика сюжета'
      - assert: |
          раскрывается окно с заголовком 'Статистика' и информационной таблицей по сюжету,
          в таблице присутствуют обязательные пункты Документы в сюжете, Документы за час, Документы в сюжете, Сюжеты в теме, Общий интерес, Вес сюжета, Позиция в топе,
          в конце таблицы отображается ссылка на справочную информацию,
      - do: закрыть окно Статистики по крестику и перейти на страницу рубрики Футбол
      - do: открыть любой сюжет рубрики и раскрыть в нем попап статистики из трех точек
      - assert: |
          раскрывается окно с заголовком 'Статистика' и информационной таблицей по сюжету,
          в графе 'Общий интерес' и 'Вес сюжета' могут стоять значения, выделенные соотвествующими цветами: низкий (красный), средний (желтый), высокий (зеленый), большой (черный),
          у каждого пункта в таблице имеется свое цифровое или буквенное значение,
          в конце таблицы отображается ссылка на справочную информацию

  содержит внешние ссылки в суммаризации:
    - params:
        flags:
          - yxneo_sport_desktop_story_external-link-in-summarization=1
    - do: открыть любой сюжет со страницы Яндекс Спорт https://yandex.ru/sport
    - assert: |
        открывается сюжет, под заголовком есть страница суммаризации 
        внешний вид соответствует скриншоту https://jing.yandex-team.ru/files/umansai5/2022-03-23_16-46-13.png
    - do: кликнуть "Читать далее"
    - assert: суммаризация разворачивается, в подзаголовках сюжета суммаризации могут присутствовать внешние ссылки

  содержит объектный ответ в суммаризации, который открывается по клику:
    - params:
        flags:
          - yxneo_sport_desktop_story_entity-object-in-summarization=1
    - do: открыть страницу во внутренней сети https://yandex.ru/sport/story/Aleksandr_Usik_pokinet_Ukrainu_dlyapodgotovki_krevanshu_sDzhoshua--84c4d054fb142088a2ca885096621118?lang=ru&wan=1&stid=lx0J63s5a9cwSiSl7tt-&t=1648042895&persistent_id=187363602&story=097a1829-9902-5c18-9cd3-51de453c473f&flags=yxneo_sport_desktop_story_entity-object-in-summarization=1
    - assert: |
        открывается сюжет , под заголовком есть страница суммаризации
        внешний вид соответствует скриншоту https://jing.yandex-team.ru/files/umansai5/2022-03-23_18-23-20.png
    - do: кликнуть "Читать далее"
    - assert: |
        суммаризация разворачивается 
        внешний вид соответствует скриншоту https://jing.yandex-team.ru/files/umansai5/2022-03-23_18-19-26.png 
    - do: нажать на любой объектный ответ суммаризации
    - assert: |
        открылся объектный ответ , который не выезжает за границу сюжета 
        внешний вид соответствует скриншоту https://jing.yandex-team.ru/files/umansai5/2022-03-23_18-13-47.png
    
  архивный сюжет не содержит настройку-троеточие:
      - tags:
          - backend_sport
      - do: открыть архивный сюжет https://yandex.ru/sport/story/Gorodok_primet_vtoroj_ehtap_Kubka_Belorusskoj_federacii_biatlona--4dd69a4f4e00cef7a0a90fdd88e2249e?lang=ru&wan=1&stid=7J4J&t=1629907120&persistent_id=156438767
      - assert: открылся архивный сюжет, в сюжете отсутствует настройка-троеточие

  содержит блок  "С чего все началось" в хвосте:
    - params:
        flags:
          - yxnews_add_origin=1
          - yxnews_tail_flatten=1
          - yxnews_tail_origins_place=1
    - do: открыть страницу https://yandex.ru/sport/story/a--d6697a733e92401008488c508d184acb?flags=yxnews_add_origin=1;yxnews_tail_flatten=1;yxnews_tail_origins_place=1
    - assert: |  
        блок “С чего все начиналось” не отображается,
        в блоке “Подробнее о событии” появился источник с плашкой “Самое цитируемое”,
        внешний вид соответствует скриншоту https://jing.yandex-team.ru/files/umansai5/2022-03-29_15-48-21.png
  
  не содержит рекламу для пользователей с подпиской Плюс:
    - do: открыть https://yandex.ru/sport/story/a--f2d9fd62a21fe8554ed176319a675ac8?flags=yxneo_sport_story_disable-plus-users-advert=1
    - assert: реклама отсутствует

  не содержит блока комментариев:
    - tags:
      - backend_sport
    - do: авторизоваться на сервисе
    - do: открыть сервис Я.Спорт на странице любой рубрики
    - do: найти в ленте любую карточку
    - do: кликнуть по заголовку карточки
    - assert: |
          в той же вкладке открылась страница сюжета,
          под аннтотацией сюжета ОТСУТСТВУЕТ бабл комментирования

files:
  - features/sport/story/story.desktop.hermione.e2e.js
  - features/sport/story/story.desktop.hermione.js

tags:
  - sport-neo
  - story

manager: mrwhite

qa-engineer: an-smirn0v

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
