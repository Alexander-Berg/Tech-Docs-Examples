feature: Дерево ролей

specs:
  Дерево ролей в Public API:
    - do: запустить в Runner сценарий "Дерево ролей в Public API" (https://github.yandex-team.ru/pixel/idm-runner)
    - do: отправить запрос "/rolenodes для testsystem" с токеном "robot-cat-leopold"
    - assert: пришёл ответ со статусом "200"
    - screenshot: в запросе "/rolenodes для testsystem" все поля "slug" должны иметь значение "testsystem" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-02-12%2015-10-41.png]
    - do: кликнуть по табе "Test Results" в Response части postman UI
    - assert: на табе "Test Results" все тесты со статусом "PASS"
    - do: отправить запрос "/rolenodes для несуществующей системы" с токеном "robot-cat-leopold"
    - assert: пришёл ответ со статусом "400"
    - screenshot: запрос "/rolenodes для несуществующей системы" должен содержать поля [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-02-12%2015-12-39.png]
    - do: кликнуть по табе "Test Results" в Response части postman UI
    - assert: на табе "Test Results" все тесты со статусом "PASS"
    - do: отправить запрос "Информация о ноде по пути к ней" с токеном "robot-cat-leopold"
    - assert: пришёл ответ со статусом "200"
    - screenshot: запрос "Информация о ноде по пути к ней" должен содержать поля [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-02-12%2015-13-38.png]
    - do: кликнуть по табе "Test Results" в Response части postman UI
    - assert: на табе "Test Results" все тесты со статусом "PASS"
    - do: отправить запрос "Запрос с ошибкой. Несуществующая нода" с токеном "robot-cat-leopold"
    - assert: пришёл ответ со статусом "404"
    - screenshot: запрос "Запрос с ошибкой. Несуществующая нода" должен содержать поля [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-02-12%2015-14-03.png]
    - do: кликнуть по табе "Test Results" в Response части postman UI
    - assert: на табе "Test Results" все тесты со статусом "PASS"

priority: critical

files:
  - idm/tests/api/frontend/test_rolenode.py

tags:
  - reviewed
  - no_assessors
  - postman_automation
  - fitcher:idm_backend_palmsync:idm/tests/api/frontend/test_rolenode.py
