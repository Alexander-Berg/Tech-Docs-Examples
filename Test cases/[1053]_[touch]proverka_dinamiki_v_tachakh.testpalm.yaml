feature: Авиа
type: Выдача
description: ''
specs:
  '[Touch]Проверка динамики в тачах':
    - do: 'открыть главную страницу путешествий, вкладка Авиабилеты в таче'
    - do: |-
        Заполнить форму поиска билетов:
        Откуда: Екатеринбург
        Куда: Москва
        Туда: 4 число следующего месяца, Обратно: не ставить
        Пассажиры: 1 взрослых
        Класс: Эконом
    - do: Нажать кнопку “Найти”
    - do: >-
        Assert: |
        Открылась страница выдачи.
        На выдаче присутствует блок Динамики цен с кнопками:

        https://jing.yandex-team.ru/files/gouken67/1442_1_touch.png

        В блоке 3 кнопки с ценами и одна кнопка Смотреть. Кнопки с ценами содержат цены и даты для текущего дня и +-1 ближайших дня.

        - Если Текущие цены сильно выше средних цен в динамике, то информация о
        том, что текущие цены сравнительно выше.

        - Если цены примерно такие же, то будет просто написано "Цены на соседние даты".

        - Если Текущие цены существенно ниже, то информация о том что в другие
        дни лететь дороже.

        - Если известны цены не для всех ближайших дней - текст будет "Цены на соседние даты"
    - do: нажать на кнопку “Смотреть весь календарь”
    - do: >-
        Assert: Открылся календарь цен по выбранному направлению. Даты в виде
        столбиков расположены друг под другом, слева число, справа цена.

        Пока происходит опрос партнёров, на столбиках рисуется жёлтый спиннер

        После загрузки всех цен столбик с ценой ниже текущей имеет цену зелёного
        цвета, **но только при условии, что его цена отличается от текущей более
        чем на 10%**
    - do: Нажать на кнопку _"Смотреть полный календарь"_
    - do: >-
        Assert: Раскрывается список всех дней, начиная с сегодня. У некоторых
        дат присутствуют приблизительные цены. Если цена не
        известна - в правом конце столбика написано "Цена неизвестна" и значок обновления
    - do: Нажать на столбик с примерной ценой.
    - do: >-
        Assert: Примерная цена пропадает. На выбранном столбике возник жёлтый спиннер.

        После установки конечной цены спиннер исчезает, появляется сама цена.
    - do: Нажать на столбик с "Цена неизвестна"
    - do: >-
        Assert: На выбранном столбике возник жёлтый спиннер. После установки конечной цены спиннер исчезает, появляется сама цена.
    - do: Нажать на столбик с известной ценой
    - do: >-
        Assert: открылась страница выдачи для выбранного направления и выбранной
        в динамике даты.
manual: true
Функциональность: Фильтры и сортировки
Устройство: Тач
Страница: Выдача
tlds: ru
Сервис: Авиа
Тестирование асессорами: Да
Окружение: Testing
Tag: Regress
