feature: Десктопный поиск Яндекс.Новостей

specs-integration:
  содержит рекламу в результатах выдачи:
    - tags:
      - advert
      - backend_news
      - smoke_zen
    - do: в поисковой строке ввести "котики" и кликнуть "Найти"
    - assert: происходит переход на страницу поиска по новостям с выдачей по запросу
    - do: поскроллить страницу до кнопки "Больше результатов"
    - assert: рекламные карточки 2 в ряд есть только перед кнопкой "Больше результатов"
    - do: нажать на кнопку "Больше результатов"
    - assert: |
          загружается вторая страница выдачи,
          страница отделена от первой номером и разделителем
    - do: проскроллить вторую страницу выдачи до конца
    - assert: рекламные карточки 2 в ряд есть только перед кнопкой "Больше результатов", внешний вид - https://jing.yandex-team.ru/files/weberxks/2022-05-12%2015.18.11.jpg

  сохраняет настройки поиска при смене поискового запроса:
    - do: в поисковой строке ввести "котики" и кликнуть "Найти"
    - assert: |
        происходит переход на страницу с выдачей поиска по новостям,
        результаты сгруппированы по сюжетам, внешний вид - https://jing.yandex-team.ru/files/nightsonne/2021-11-19_14-03-58.png ,
        в фильтре справа выделена вкладка "Релевантность" и отмечена галочка в пункте "Группировать по сюжетам",
        выделен пункт "За всё время",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-08-03_17-33-10.png
    - do: кликнуть по пункту "Период" в списке фильтров
    - do: выбрать в календаре любой период и кликнуть "Применить"
    - assert: |
        страница перезагружается,
        вместо слова "Период" в фильтре отображен выбранный период в виде интервала дат,
        справа от интервала дат отображается иконка карандашика
    - do: изменить запрос, написав в поисковой строке "кот"
    - assert:  |
        страница перезагружается,
        в выдаче отображаются документы за выбранный период,
        в списке фильтров отображается тот же период, который вы выбирали ранее

  группирует сюжеты при поиске за последние три дня и не группирует, при поиске старше 3х дней:
    - tags:
      - backend_news
      - smoke_zen
    - do: в поисковой строке ввести "котики" и кликнуть "Найти"
    - assert: |
        происходит переход на страницу с выдачей поиска по новостям,
        результаты сгруппированы по сюжетам, внешний вид - https://jing.yandex-team.ru/files/nightsonne/2021-11-19_14-03-58.png ,
        в фильтре справа выделена вкладка "Релевантность" и отмечена галочка в пункте "Группировать по сюжетам",
        выделен пункт "За всё время",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-08-03_17-33-10.png
    - do: кликнуть по пункту "Период" в списке фильтров
    - do: выбрать в календаре любой период за любой прошлый (кроме текущего!) месяц и кликнуть "Применить"
    - assert: |
        страница перезагружается,
        вместо слова "Период" в фильтре отображен выбранный период в виде интервала дат,
        справа от интервала дат отображается иконка карандашика,
        документы НЕ сгруппированы по сюжетам
    - do: кликнуть по пункту "3 дня" в списке фильтров
    - assert:  |
        страница перезагружается,
        в выдаче отображаются документы за выбранный период,
        документы сгруппированы по сюжетам

  корректно отображается и исправляет опечатки:
    - do: перейти по ссылке https://yandex.ru/news/search?text=Hjccbz
    - assert: страница открылась
    - assert: в поисковой строке отображаено значение "Россия"
    - assert: отображается сообщение "Показаны результаты по запросу «Россия». Искать вместо этого «Hjccbz»"
    - assert: отображаются карточки с результатами поиска
    - assert: есть карточки, в которых "Россия" выделено жёлтым
    - assert: справа есть виджеты "Интересное" и "Главное"
    - do: кликнуть кнопку "Больше результатов"
    - assert: ниже появилась вторая страница с результатами
    - do: кликнуть сообщение с предложением искать другой текст
    - assert: пропало сообщение с предложением искать другой текст
    - assert: в поисковой строке отображаено значение "Hjccbz"

  корректно отображается в случае пустого результата:
    - do: перейти по ссылке https://yandex.ru/news/search?text=фдлырофвыajhsdgha
    - assert: страница открылась
    - assert: на странице присутствует кнопка "Расширенный поиск"

specs:
  имеет внешний вид:
    - tags:
      - backend_news
    - do: в поисковой строке ввести "произошли пожары" и кликнуть "Найти"
    - assert: |
        происходит переход на страницу поиска по новостям,
        домен поисковой страницы https://newssearch.yandex.ru/news,
        присутствует шапка новостей, общепортальный рубрикатор,
        ниже отображается выдача по поисковому запросу,
        справа от выдачи отображается блок с фильтрами "За все время", "Сегодня", "3 дня", "Неделя", "Период",
        фильтр "За все время" выделен черно-желтым кружочком,
        в блоке фильтров присутствует 2 вкладки "Релевантность" и "Хронология",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-08-03_17-33-10.png
    - do: поскроллить страницу вниз
    - assert: слова из запроса встречаются в выдаче в разных формах (например, произошли/произошел)
    # - assert: залипает рубрикатор новостей (остается в зоне видимости при скролле)
    # - assert: внешний вид - https://jing.yandex-team.ru/files/nightsonne/2020-10-12_17-57-38.png
    # - do: тапнуть по любой рубрике в рубрикаторе (кроме рубрики Спорт)
    # - assert: |
    #    произошел переход в соответствующую рубрику,
    #    запрос в поисковой строке очистился

#  позволяет перейти в старый поиск по прямой ссылке [manual]:
#    - tags:
#      - backend_news
#    - reasonNotToAuto:
#      - Нет возможности автоматизировать проверку на странице нерпы
#    - do: перейти в старый поиск по прямой ссылке https://newssearch.yandex.ru/yandsearch?text=Путин&rpt=nnews2&grhow=clutop&nsbr=1
#    - assert: |
#        открывается старая версия поиска,
#        вертска не едет, элементы не наезжают друг на друга,
#        под поисковой строкой отображается дисклеймер "Данная версия поиска по новостям перестает поддерживаться. Новая версия доступна по адресу https://newssearch.yandex.ru/news/search",
#        (ссылка в дисклеймере не кликабельна - это ОК, заводить баг не нужно!)
#        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-08-04_14-35-13.png
#    - do: проскроллить вниз страницы к футеру
#    -  assert: |
#        над футером отображается дисклеймер "Старый поиск по новостям включает сообщения только за последние 3 дня"
#        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-08-04_14-35-27.png

  очищает поле ввода по крестику:
    - tags:
      - smoke
    - do: в поисковой строке ввести "заявил" и кликнуть "Найти"
    - assert: происходит переход на страницу поиска по новостям
    - do: навести курсор мыши на крестик в поле ввода
    - assert: по ховеру крестик меняет цвет
    - do: кликнуть по крестику
    - assert: |
        поле ввода очистилось,
        в поле ввода мигает курсор

  содержит сюжеты и документы по запросу:
    - tags:
      - smoke
      - backend_news
    - do: в поисковой строке ввести "котики" и кликнуть "Найти"
    - assert: |
        происходит переход на страницу поиска по новостям,
        в поиске могут встречаться карточки сюжетов и карточки документов,
        карточка документа содержит иконку источника, заголовок, аннотацию, название источника и время обновления,
        карточка сюжета содержит заголовок, название источника и время обновления,
        ниже отображается документ (или несколько) по сюжету и может отображаться ссылка "Посмотреть еще",
        подсвечиваются совпадения по словам в заголовках и аннотациях,
        внешний вид - https://jing.yandex-team.ru/files/nightsonne/2020-10-12_18-13-09.png

  выделяет посещенные ссылки на источник серым цветом:
    - do: этот кейс нужно пройти в обычной вкладке браузера, не в Инкогнито
    - do: в поисковой строке ввести "котики" и кликнуть "Найти"
    - assert: происходит переход на страницу поиска по новостям
    - do: кликнуть по карточке документа
    - assert: |
        в новой вкладке происходит переход на сайт источника,
        в урле присутствуют параметры utm_source=yxnews, utm_medium=desktop,
        в урле присутствует параметр utm_referrer=https%3A%2F%2Fyandex.ru%2Fnews%2Fsearch%3Ftext
    - do: вернуться к поиску по новостям, найти карточку посещенного документа
    - assert: цвет тайтла посещенного документа закрасился в серый (не будет работать в Инкогнито)
    - do: навести курсором на карточку посещенного документа
    - assert: цвет ссылки сменился на красный

  выделяет посещенные ссылки на сюжет серым цветом:
    - do: этот кейс нужно пройти в обычной вкладке браузера, не в Инкогнито
    - do: в поисковой строке ввести "котики" и кликнуть "Найти"
    - assert: происходит переход на страницу поиска по новостям
    - do: найти карточку сюжета
    - do: тапнуть по заголовку сюжета
    - assert: в новой вкладке открывается страница соответствующего сюжета на Яндекс.Новостях
    - do: вернуться к поиску по новостям, найти карточку посещенного сюжета
    - assert: цвет тайтла посещенного сюжета закрасился в серый (не будет работать в Инкогнито)
    - do: навести курсором на карточку посещенного сюжета
    - assert: цвет ссылки сменился на красный

  открывает список всех источников из поиска по кнопке Показать еще:
    - do: в поисковой строке ввести "котики" и кликнуть "Найти"
    - assert: происходит переход на страницу поиска по новостям
    - do: найти карточку сюжета с кнопкой "Посмотреть еще"
    - do: клик по "Посмотреть еще"
    - assert: в новой вкладке открывается страница cо списком всех источников по сюжету

  содержит правую колонку с виджетами, которая:
    залипает при скролле на странице > 1260px:
      - do: растянуть окно браузера так, чтобы ширина окна была больше 1260px. Чтобы проверить, что ширина окна действительно больше 1260px, откройте консоль и введите туда 'window.innerWidth' (без кавычек) и нажмите enter. Полученное значение и будет действительная ширина окна.
      - do: в поисковой строке ввести "котики" и кликнуть "Найти"
      - assert: |
          происходит переход на страницу поиска по новостям,
          справа присутствует колонка с виджетами,
          должен присутствовать виджет "Интересное" и под ним - виджет "Главное",
          справа от колонки с виджетами есть рекламный блок
      - do: поскроллить страницу вниз и доскроллить до кнопки "Больше результатов"
      - assert: |
          правая колонка залипает внизу страницы и остается в зоне видимости пользователя,
          правая колонка при доскролле до футера не наезжает на футер
      - do: нажать на кнопку "Больше результатов"
      - assert: |
            загружается вторая страница выдачи,
            страница отделена от первой номером и разделителем,
            внешний вид https://jing.yandex-team.ru/files/nightsonne/2020-10-16_13-42-13.png,
            правая колонка залипает внизу страницы и остается в зоне видимости пользователя
      - do: поскроллить страницу еще раз вниз и доскроллить до следующей кнопки "Больше результатов"
      - assert: |
          правая колонка залипает внизу страницы и остается в зоне видимости пользователя,
          правая колонка при доскролле до футера не наезжает на футер
      - do: поскроллить страницу выдачи вверх
      - assert: правая колонка залипает вверху страницы и остается в зоне видимости пользователя

    залипает при скролле на странице < 1260px:
      - do: растянуть окно браузера так, чтобы ширина окна была меньше 1260px. Чтобы проверить, что ширина окна действительно меньше 1260px, откройте консоль и введите туда 'window.innerWidth' (без кавычек) и нажмите enter. Полученное значение и будет действительная ширина окна.
      - do: в поисковой строке ввести "котики" и кликнуть "Найти"
      - assert: |
          происходит переход на страницу поиска по новостям,
          справа присутствует колонка с рекламой и виджетами,
          первой в правой колонке располагается рекламный блок, под ним - виджет "Интересное" и виджет "Главное"
      - do: поскроллить страницу вниз и доскроллить до кнопки "Больше результатов"
      - assert: |
          правая колонка залипает внизу страницы и остается в зоне видимости пользователя (на экране виден виджет "Главное"),
          правая колонка при доскролле до футера не наезжает на футер
      - do: нажать на кнопку "Больше результатов"
      - assert: |
          загружается вторая страница выдачи,
          страница отделена от первой номером и разделителем,
          правая колонка залипает внизу страницы и остается в зоне видимости пользователя (на экране виден виджет "Главное")
      - do: поскроллить страницу еще раз вниз и доскроллить до следующей кнопки "Больше результатов"
      - assert: |
          правая колонка залипает внизу страницы и остается в зоне видимости пользователя,
          правая колонка при доскролле до футера не наезжает на футер
      - do: поскроллить страницу выдачи вверх
      - assert: правая колонка залипает вверху страницы и остается в зоне видимости пользователя (после доскролла до правого рекламного блока на экране виден рекламный блок)

    перестраивает элементы правой колонки при ресайзе:
      - tags:
        - smoke
      - do:
           растянуть окно браузера так, чтобы ширина окна была больше 1260px, чтобы проверить, что ширина окна действительно больше 1260px, откройте консоль и введите туда 'window.innerWidth' (без кавычек) и нажмите enter. Полученное значение и будет действительная ширина окна.
      - do: в поисковой строке ввести "котики" и кликнуть "Найти"
      - assert:
          происходит переход на страницу поиска по новостям,
          справа присутствует колонка с виджетами,
          должен присутствовать виджет "Интересное" и под ним - виджет "Главное",
          справа от правой колонки есть рекламный блок
      - do: уменьшить ширину окна браузера так, чтобы она стала меньше 1260px
      - assert: правая колонка перестраивается - реклама располагается над виджетами
      - do: снова растянуть окно браузера так, чтобы ширина окна была больше 1260px
      - assert: правая колонка перестраивается - рекламный блок располагается справа от виджетов

    позволяет перейти в сюжет:
      - tags:
        - smoke
        - backend_news
        - smoke_zen
      - do: отключить блокировщик рекламы в браузере и обновить страницу
      - do:
          растянуть окно браузера так, чтобы ширина окна была больше 1260px, чтобы проверить, что ширина окна действительно больше 1260px, откройте консоль и введите туда 'window.innerWidth' (без кавычек) и нажмите enter. Полученное значение и будет действительная ширина окна.
      - do: в поисковой строке ввести "котики" и кликнуть "Найти"
      - assert:
          происходит переход на страницу поиска по новостям,
          справа присутствует колонка с виджетами,
          должен присутствовать виджет "Интересное" и под ним - виджет "Главное",
          справа от правой колонки есть рекламный блок
      - do: навести курсор мыши на любую новость в правой колонке
      - assert: изменяется стиль отображения курсора, заголовок становится красным
      - do: поскроллить правую колоку вниз
      - assert: |
          у каждой новости есть заголовок, наименование издания, время и (или) дата,
          длинные название источников корректно обрезаются многоточием, элементы не наползают друг на друга,
          внешний вид https://jing.yandex-team.ru/files/an-smirn0v/shot_201228_143835.png
      - do: кликнуть по любому заголовку в правой колонке
      - assert: осуществляется переход на страницу соответствующего сюжета в новой вкладке

    позволяет перейти в рубрику:
      - tags:
        - smoke
        - backend_news
      - do:
          растянуть окно браузера так, чтобы ширина окна была больше 1260px, чтобы проверить, что ширина окна действительно больше 1260px, откройте консоль и введите туда 'window.innerWidth' (без кавычек) и нажмите enter. Полученное значение и будет действительная ширина окна.
      - do: в поисковой строке ввести "котики" и кликнуть "Найти"
      - assert:
          происходит переход на страницу поиска по новостям,
          справа присутствует колонка с виджетами,
          должен присутствовать виджет "Интересное" и под ним - виджет "Главное",
          справа от правой колонки есть рекламный блок
      - do: навести курсор мыши на название виджета "Главное" или "Интересное"
      - assert: изменяется стиль отображения курсора, название виджета становится красным
      - do: кликнуть по названию виджета "Главное" или "Интересное"
      - assert: в новой вкладке открывается страница соответствующей рубрики

  подгружает выдачу по кнопке Больше результатов:
    - tags:
      - smoke
      - backend_news
      - smoke_zen
    - do: в поисковой строке ввести "котики" и кликнуть "Найти"
    - assert: происходит переход на страницу поиска по новостям с выдачей по запросу
    - do: проскроллить страницу вниз до конца
    - assert: перед футером присутствует кнопка "Больше результатов" (если кнопки нет, ввести другой запрос)
    - do: нажать на кнопку "Больше результатов"
    - assert: |
          загружается вторая страница выдачи,
          страница отделена от первой номером и разделителем
    - do: проскроллить вторую страницу выдачи и нажать на кнопку "Больше результатов"
    - assert: |
          загружается третья страница выдачи,
          страница отделена от второй номером и разделителем,
          нет бесконечного спиннера при попытке загрузить страницу

  обрабатывает опечатки ввода:
    - tags:
      - backend_news
      - smoke_zen
    - do: в поисковой строке ввести "путен" и кликнуть "Найти"
    - assert: |
        происходит переход на страницу поиска по новостям,
        в поисковой строке отображается "путин",
        перед первой карточкой выдачи присутствует плашка опечаточника,
        выдача соответствует запросу "путин",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-08-03_17-55-40.png
    - do: кликнуть по плашке опечаточника
    - assert: |
        страница поиска обновляется,
        в поисковой строке отображается "путен",
        выдача соответствует запросу "путен" (могут быть другие формы слова, например "путный")

  не ломается при пустом запросе:
    - tags:
        - backend_news
        - smoke_zen
    - do: в поисковой строке ввести пробел, кликнуть "Найти"
    - assert: |
        происходит переход на страницу поиска по новостям,
        отображается надпись "Задан пустой поисковый запрос" и кнопка "На главную",
        ниже отображаются рекламные блоки, под ним располагается футер,
        справа отображается - рекламный блок (только если ширина экрана >1260px)
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/pustoi_zapros.png
    - do: кликнуть по кнопке "На главную"
    - assert: произошел переход на главную страницу Яндекс.Новостей в той же вкладке

  позволяет перейти к расширенному поиску:
    - tags:
      - backend_news
      - smoke_zen
    - do: Перед прохождением кейса убедитесь, что блокировщик рекламы отключен!
    - do: в поисковой строке ввести "абракадабрадабрадабра" и кликнуть "Найти"
    - assert: |
        происходит переход на страницу поиска по новостям,
        отображается надпись "Новостей по вашему запросу не найдено",
        кнопка "Расширенный поиск",
        ссылка "На главную",
        ниже отображаются рекламные блоки, под ним располагается футер,
        справа отображается блок "Главное" и еще правее - рекламный блок (только если ширина экрана >1260px)
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/ne_naideno.png
    - do: кликнуть по кнопке "Расширенный поиск"
    - assert: происходит переход в Яндекс.Поиск с выдачей по запросу (выдача может быть пустой)
    - do: вернуться на страницу поиска Яндекс.Новостей
    - do: кликнуть по ссылке "На главную"
    - assert: произошел переход на главную страницу Яндекс.Новостей в той же вкладке

  перенаправляет пользователя на домен newssearch.yandex.ru из поиска в других сервисах [manual]:
    - tags:
      - backend_news
      - smoke_zen
    - reasonNotToAuto:
      - Нет возможности автоматизировать переход из другого сервиса
    - do: после перехода на тестовый стенд кликнуть по логотипу "Яндекс" в шапке
    - assert: происходит переход на главную страницу Яндекса в той же вкладке
    - do: ввести поисковый запрос "котик" в поисковую строку
    - assert: получаем выдачу по запросу в поиске Яндекса
    - do: кликнуть на таб "Новости" в таббаре https://jing.yandex-team.ru/files/nightsonne/2020-11-11_17-14-35.png
    - assert: |
        в новой вкладке открывается выдача на сервисе Новости по тому же запросу,
        в адресной строке домен newssearch.yandex.ru,
        в адресной строке присутствует параметр text=котик (ВНИМАНИЕ! В некоторых браузерах кириллица может быть эндокодирована, параметр может быть вида: text=%D0%9A%D0%BE%D1%82%D0%B8%D0%BA%D0%B8. Это НЕ БАГ!)

  корректно отображает фильтр с возможностью группировки по сюжетам:
    - params:
        flags:
          - yxneo_search_flat-grouping=1
    - do: перейти по ссылке https://newssearch.yandex.ru/news/search?text=котики&flags=yxneo_search_flat-grouping=1
    - do: изменить ширину экрана до 1366
    - assert: откроется страница поиска
    - screenshot: внешний вид фильтров соответствует скриншоту [filter-1366]
    - do:
          изменить ширину экрана до 1260
          чтобы проверить, что ширина окна действительно 1260px, откройте консоль и введите туда 'window.innerWidth' (без скобок) и нажмите enter. Полученное значение и будет действительная ширина окна.
    - screenshot: внешний вид фильтров соответствует скриншоту [filter-1366]

  корректно отображает фильтр для периода с возможностью группировки по сюжетам:
    - params:
        flags:
          - yxneo_search_flat-grouping=1
    - do: перейти по ссылке https://newssearch.yandex.ru/news/search?text=котики+date%3A20210214..20210214&filter_date=1613250000000%2C1613250000000&flags=yxneo_search_flat-grouping=1
    - do: изменить ширину экрана до 1366
    - assert: откроется страница поиска
    - screenshot: внешний вид фильтров соответствует скриншоту [period-filter-1366]
    - do:
          изменить ширину экрана до 1260
          чтобы проверить, что ширина окна действительно 1260px, откройте консоль и введите туда 'window.innerWidth' (без скобок) и нажмите enter. Полученное значение и будет действительная ширина окна.
    - screenshot: внешний вид фильтров соответствует скриншоту [period-filter-1366]

  корректно отображает фильтр без группировки по сюжетам:
    - tags:
      - backend_news
    - do: в поисковой строке ввести "котики" и кликнуть "Найти"
    - assert: |
        происходит переход на страницу с выдачей поиска по новостям,
        результаты сгруппированы по сюжетам, внешний вид - https://jing.yandex-team.ru/files/nightsonne/2021-11-19_14-03-58.png ,
        в фильтре справа выделена вкладка "Релевантность" и отмечена галочка в пункте "Группировать по сюжетам",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-08-03_17-33-10.png ,
    - do: снять галочку в пункте "Группировать по сюжетам"
    - assert: |
        страница поиска перезагружается, поисковой запрос остается в поисковом инпуте,
        результаты разбиты на отдельные документы, внешний вид - https://jing.yandex-team.ru/files/nightsonne/2021-11-19_14-07-34.png ,
        в фильтре справа выделена вкладка "Релевантность", галочка в пункте "Группировать по сюжетам" не проставлена

  корректно отображает фильтр для периода без группировки по сюжетам:
    - tags:
      - backend_news
    - do: в поисковой строке ввести "котики" и кликнуть "Найти"
    - assert: |
        происходит переход на страницу с выдачей поиска по новостям,
        результаты сгруппированы по сюжетам, внешний вид - https://jing.yandex-team.ru/files/nightsonne/2021-11-19_14-03-58.png ,
        в фильтре справа выделена вкладка "Релевантность" и отмечена галочка в пункте "Группировать по сюжетам",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-08-03_17-33-10.png ,
    - do: снять галочку в пункте "Группировать по сюжетам"
    - assert: |
        страница поиска перезагружается, поисковой запрос остается в поисковом инпуте,
        результаты разбиты на отдельные документы, внешний вид - https://jing.yandex-team.ru/files/nightsonne/2021-11-19_14-07-34.png ,
        в фильтре справа выделена вкладка "Релевантность", галочка в пункте "Группировать по сюжетам" не проставлена
    - do: кликнуть по пункту "3 дня" в списке фильтров
    - assert: |
        страница поиска перезагружается, поисковой запрос остается в поисковом инпуте,
        на странице отображаются результаты за последние 3 дня
        в группе фильтров выделен фильтр "3 дня"

  не отображает галку группировки по сюжетам во вкладке Хронология:
    - tags:
      - backend_news
      - smoke_zen
    - do: в поисковой строке ввести "котики" и кликнуть "Найти"
    - assert: |
        происходит переход на страницу с выдачей поиска по новостям,
        результаты сгруппированы по сюжетам, внешний вид - https://jing.yandex-team.ru/files/nightsonne/2021-11-19_14-03-58.png ,
        в фильтре справа выделена вкладка "Релевантность" и отмечена галочка в пункте "Группировать по сюжетам",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-08-03_17-33-10.png
    - do: кликнуть на вкладку "Хронология"
    - assert: |
        страница поиска перезагружается, поисковой запрос остается в поисковом инпуте,
        выдача новостей отображается в хронологическом порядке,
        под адресной строкой появляется плашка "Поиск по хронологии находится в бета-тестировании",
        группировка по сюжетам не кликабельна, проставить галочку невозможно (Обратить внимание, что группировка по сюжетам не работает, если выбрать сортировку по хронологии - это НЕ БАГ),
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-08-03_18-15-45.png

  позволяет получить выдачу за сегодня:
    - tags:
      - backend_news
    - do: в поисковой строке ввести "котики" и кликнуть "Найти"
    - assert: |
        происходит переход на страницу с выдачей поиска по новостям,
        (если результат выдачи пустой - поискать по любому другому широкому запросу),
        результаты сгруппированы по сюжетам, внешний вид - https://jing.yandex-team.ru/files/nightsonne/2021-11-19_14-03-58.png ,
        в фильтре справа выделена вкладка "Релевантность" и отмечена галочка в пункте "Группировать по сюжетам",
        выделен пункт "За всё время",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-08-03_17-33-10.png
    - do: кликнуть по пункту "Сегодня" в списке фильтров
    - assert: |
        страница поиска перезагружается, поисковой запрос остается в поисковом инпуте,
        на странице отображаются результаты за сегодняшний день  (дата сюжетов может быть любой, нас интересует именно дата документов - https://jing.yandex-team.ru/files/kossakovskaya/2021-12-16_18-12-23.png),
        в группе фильтров выделен фильтр "Сегодня"

  позволяет получить выдачу за неделю:
    - tags:
      - backend_news
    - do: в поисковой строке ввести "котики" и кликнуть "Найти"
    - assert: |
        происходит переход на страницу с выдачей поиска по новостям,
        результаты сгруппированы по сюжетам, внешний вид - https://jing.yandex-team.ru/files/nightsonne/2021-11-19_14-03-58.png ,
        в фильтре справа выделена вкладка "Релевантность" и отмечена галочка в пункте "Группировать по сюжетам",
        выделен пункт "За всё время",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-08-03_17-33-10.png
    - do: кликнуть по пункту "Неделя" в списке фильтров
    - assert: |
        страница поиска перезагружается, поисковой запрос остается в поисковом инпуте,
        на странице отображаются результаты за последнюю неделю (проверить, подгрузив 3-4 страницы по кнопке "Больше результатов"),
        в группе фильтров выделен фильтр "Неделя",
        Внимание! В данном кейсе новостные данные идут за последние 7 дней, а не за текущую неделю!

  корректно отображает календарь выбора периода выдачи:
    - do: в поисковой строке ввести "котики" и кликнуть "Найти"
    - assert: |
        происходит переход на страницу с выдачей поиска по новостям,
        результаты сгруппированы по сюжетам, внешний вид - https://jing.yandex-team.ru/files/nightsonne/2021-11-19_14-03-58.png ,
        в фильтре справа выделена вкладка "Релевантность" и отмечена галочка в пункте "Группировать по сюжетам",
        выделен пункт "За всё время",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-08-03_17-33-10.png
    - do: кликнуть по пункту "Период" в списке фильтров
    - assert: |
        основной фон страницы чуть затемняется,
        в модальном окне появляется календарь с неактивной кнопкой "Применить"
    - do: полистать месяцы кнопками < и >
    - assert: |
        месяцы корректно переключаются,
        в будущих месяцах числа недоступны для выбора, отображаются светло-серым шрифтом
    - do: кликнуть на любую дату в текущем месяце
    - assert: |
        дата выделяется,
        кнопка "Применить" остается недоступной
    - do: кликнуть на любую другую дату в текущем месяце
    - assert: |
        вторая дата выделяется, отображается выделенный период,
        кнопка "Применить" становаится кликабельной
    - do: кликнуть вне календаря
    - assert: |
        календарь закрылся,
        выбран фильтр "За всё время"

  позволяет получить выдачу за выбранный период:
    - tags:
      - backend_news
      - smoke_zen
    - do: в поисковой строке ввести "котики" и кликнуть "Найти"
    - assert: |
        происходит переход на страницу с выдачей поиска по новостям,
        результаты сгруппированы по сюжетам, внешний вид - https://jing.yandex-team.ru/files/nightsonne/2021-11-19_14-03-58.png ,
        в фильтре справа выделена вкладка "Релевантность" и отмечена галочка в пункте "Группировать по сюжетам",
        выделен пункт "За всё время",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-08-03_17-33-10.png
    - do: кликнуть по пункту "Период" в списке фильтров
    - do: выбрать в календаре любой период и кликнуть "Применить"
    - assert: |
        страница перезагружается,
        вместо слова "Период" в фильтре отображен выбранный период в виде интервала дат,
        справа от интервала дат отображается икнока карандашика
    - do: пролистать выдачу (если выдача пустая, выбрать другой период, кликнув на карандаш)
    - assert: |
        в выдаче документы за выбранный период,
        обратите внимание! возможно расхождение в рамках +/-2 часа
    - do: изменить дату периода в пределах текущего месяца
    - assert: |
        страница перезагружается,
        в выдаче отображаются документы за выбранный период,
        в фильтре отображен выбранный период в виде интервала дат,
        в url отображается выбранный период (пример text=котики+date%3A20211101..20211103),
        даты в фильтре и url совпадают,
        внешний вид https://jing.yandex-team.ru/files/an-smirn0v/2021-11-29%20в%2012.10.49.png
    - do: поскролить страницу, нажать на кнопку "Больше результатов"
    - assert: |
        загружается вторая страница выдачи,
        отображаются документы за выбранный период
    - do: нажать кнопку "Назад" в браузере
    - assert: |
        выбранный ранее период в виде интервала дат сбрасывается,
        в инпуте запроса отображается тот же текст, что и был введен ранее

  корректно отображает ховер на элементах фильтра:
    - do: открыть https://newssearch.yandex.ru/news/search?text=котики
    - assert: ховер на невыбранном радиобаттоне
    - assert: ховер на невыбранной вкладке "Хронология"

  отображает заголовок По сюжетам в IE при ресайзе страницы:
    - do: перейти по ссылке https://newssearch.yandex.ru/news/search?text=котики
    - do: изменить ширину экрана до 1100
    - assert: на странице поиска отображается заголовок По сюжетам

  корректно отображает фильтры с сортировкой по хронологии:
    - params:
        flags:
          - yxneo_desktop_search_sortbydate-disclaimer=1
    - do: перейти по ссылке https://newssearch.yandex.ru/news/search?text=котики&sortby=date&flags=yxneo_desktop_search_sortbydate-disclaimer=1
    - assert: откроется страница поиска, новости отсортированы по хронологии, начиная от самой свежей
    - do: изменить ширину экрана до 1280
    - screenshot: внешний вид фильтров соответствует скриншоту [filter-1280]
    - do: изменить ширину экрана до 1024
    - screenshot: внешний вид фильтров соответствует скриншоту [filter-1024]

files:
  - features/news/search/search.desktop.hermione.js
  - features/news/search/search.desktop.hermione.e2e.js

tags:
  - neo
  - searchdesktop

manager: suholet

qa-engineer: nightsonne

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
