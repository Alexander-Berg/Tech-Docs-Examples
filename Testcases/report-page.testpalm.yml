feature: Страница репорта

description: страница репорта и все эл-ты на ней по адресу /tutor/subject/variant/report

specs:
    Breadcrumbs:
        beforeEach:
            - do: перейти на страницу репорта, завершив вариант по любому предмету
            - assert: открыта страница репорта
        Внешний вид:
            - screenshot: внешний вид хлебных крошек [plain]
        Четвертая ссылка:
            - do: кликнуть по четвертой серой ссылке содержащей название результатов
            - assert: ничего не произошло (ссылка не активна)
        Третья ссылка:
            - do: кликнуть по третьей ссылке содержащей название варианта
            - assert: произошло перенаправление на страницу выполнения варианта /tutor/subject/variant
            - assert: в адресе присутствует параметр 'variant_id'
        Вторая ссылка:
            - do: кликнуть по второй ссылке содержащей название предмета
            - assert: произошло перенаправление на страницу предмета /tutor/subject
            - assert: в адресе присутствует параметр 'subject_id'
        Первая ссылка:
            - do: кликнуть по первой ссылке содержащей название экзамена
            - assert: произошло перенаправление на главную страницу /tutor
            - assert: в адресе присутствует параметр 'exam_id'
    Карточка связанных вариантов:
        - do: перейти на страницу репорта, завершив вариант по любому предмету
        - assert: открыта страница репорта
        - screenshot: внешний вид карточки похожих тестов [plain]
        - do: кликнуть по любой ссылке в списке похожих тестов
        - assert: произошло перенаправление на страницу выполнения варианта /tutor/subject/variant
        - assert: в адресе присутствует параметр 'variant_id'
    Карточка результатов:
        beforeEach:
            - do: перейти на страницу репорта, завершив вариант по любому предмету
            - assert: открыта страница репорта
        Внешний вид:
            - tags: smoke
            - screenshot: внешний вид карточки результатов варианта [plain]
        Переход к первому заданию:
            - do: кликнуть по номеру 1-ого задания в столбце "ID задания"
            - assert: пользователь опустился к первому заданию
        Переход к последнему заданию:
            - tags: smoke
            - do: кликнуть по номеру последнего задания в столбце "ID задания"
            - assert: пользователь опустился к последнему заданию
        Ссылка "Моя статистика":
            - do: кликнуть по ссылке "Моя статистика" в карточке результатов варианта
            - assert: произошло перенаправление на страницу выполнения статистики '/tutor/user/statistics/'
    Отображение только неверно решенных задач:
        - tags: smoke
        - do: перейти на страницу варианта по любому предмету
        - assert: открыта страница выполнения варианта
        - do: ВЕРНО заполнить ответы для 4х заданий теста (правильные ответы можно увидеть в таблице, завершив тест без заполнения)
        - do: кликнуть по кнопке "Завершить тест"
        - assert: произошло перенаправление на страницу репорта
        - assert: количество заданий под таблицей результатов равняется N
        - do: кликнуть по чекбоксу "Только задания с ошибками"
        - assert: количество заданий под таблицей результатов равняется (N - 4)
    Карточка результатов - порог не пройден:
        - tags: smoke
        - do: перейти на страницу варианта по предмету Математика (профильный уровень)
        - assert: открыта страница выполнения варианта
        - do: НЕВЕРНО заполнить ответы для всех заданий теста (правильные ответы можно увидеть в таблице, завершив тест без заполнения)
        - do: кликнуть по кнопке "Завершить тест"
        - assert: |
            произошло перенаправление на страницу репорта
            кол-во решенных заданий "Вы правильно решили 0 из N"
            кол-во набранных первичных баллов "Первичный балл 0 из N"
            кол-во баллов "В 2018 году ваш балл за тестовую часть составил бы 0 из N"
            мин порог "Минимальный порог (M баллов) не пройден"
        - screenshot: внешний вид карточки результатов [plain]
    Карточка результатов - порог пройден:
        - tags: smoke
        - do: перейти на страницу варианта по любому предмету
        - assert: открыта страница выполнения варианта
        - do: ВЕРНО заполнить ответы для всех заданий теста (правильные ответы можно увидеть в таблице, завершив тест без заполнения)
        - do: кликнуть по кнопке "Завершить тест"
        - assert: |
            произошло перенаправление на страницу репорта
            кол-во решенных заданий "Вы правильно решили N из N"
            кол-во набранных первичных баллов "Первичный балл N из N"
            кол-во баллов "В 2018 году ваш балл за тестовую часть составил бы N из N"
        - screenshot: внешний вид карточки результатов [plain]
    Карточка задачи - верно:
        - tags: smoke
        - do: перейти на страницу варианта по любому предмету
        - assert: открыта страница выполнения варианта
        - do: верно заполнить поле ответа для первого задания
        - do: кликнуть по кнопке "Завершить тест"
        - assert: произошло перенаправление на страницу репорта
        - screenshot: внешний вид карточки первой задачи варианта [plain]
        - assert: в поле ответа указана подсказка "Верно"
        - do: ввести в поле ответа неверный ответ и кликнуть "Проверить"
        - assert: |
            поле ответа выделено красной рамкой
            в поле ответа указана подсказка "Неверно"
    Карточка задачи - неверно:
        - tags: smoke
        - do: перейти на страницу варианта по любому предмету
        - assert: открыта страница выполнения варианта
        - do: НЕверно заполнить поле ответа для последнего задания с полем ответа
        - do: кликнуть по кнопке "Завершить тест"
        - assert: произошло перенаправление на страницу репорта
        - screenshot: внешний вид карточки последней задачи варианта с неверно заполненным ответом[plain]
        - assert: |
            поле ответа выделено красной рамкой
            в поле ответа указана подсказка "Неверно"
        - do: ввести в поле ответа верный ответ и кликнуть "Проверить"
        - assert: в поле ответа указана подсказка "Верно"
    Результаты контрольной работы до открытия ответов:
        - tags: no_assessors
        - do: перейти на страницу варианта 326, добавив в адрес параметр "server_time=1556259200"
        - assert: открыта страница выполнения варианта
        - assert: у заданий отсутствуют id
        - do: кликнуть по кнопке "Завершить тест"
        - assert: произошло перенаправление на страницу репорта
        - screenshot: внешний вид карточки результатов [plain]
        - assert: в таблице результатов отсутствуют id заданий и ответы
        - assert: в карточках заданий отсутствуют id заданий
        - assert: в карточках заданий отсутствует возможность посмотреть ответ и решение
    Результаты с дополнительной информацией:
        - do: перейти на страницу варианта 340 'tutor/subject/variant/?variant_id=340'
        - assert: открыта страница выполнения варианта
        - do: ВЕРНО заполнить ответы для заданий 1-6, 8-10, 12-14 (ответы можно найти на странице репорта после завершения теста без прорешивания)
        - do: кликнуть по кнопке "Завершить тест"
        - assert: появилось модальное окно подтверждения завершения варианта
        - do: нажать на кнопку "Да, сдать"
        - assert: модальное окно скрылось
        - assert: открылась вторая страница варианта
        - do: выбрать "2 балла" у заданий 21-23
        - do: нажать на кнопку "Завершить тест"
        - assert: произошло перенаправление на страницу репорта
        - assert: в блоке результатов присутствует надпись "Набрано менее 2 баллов за модуль Геометрия"
        - screenshot: внешний вид блока со вторичными баллами [plain]
    Рекомендации:
        Без авторизации:
            - tags: smoke
            - do: убедиться, что пользователь не авторизован, либо разлогиниться
            - do: перейти на страницу репорта завершив любой вариант по предмету Информатика
                открыта страница задачи
                пользователь не авторизован
                на странице присутствует блок рекомендаций
            - screenshot: внешний вид блока рекомендаций без данных [plain]
        С авторизацией:
            - tags:
                - smoke
                - no_assessors
            - do: убедиться, что пользователь авторизован, либо залогинитсья
            - do: перейти на страницу репорта завершив любой вариант по предмету Информатика
            - assert: |
                открыта страница задачи
                пользователь авторизован
                на странице пристуствует блок рекомендаций с задачами
            - screenshot: внешний вид блока рекомендаций с данными [plain]
    ПДД:
        Общий вид:
            - tags: no_assessors
            - do: перейти на страницу отчета варианта 1338
            - assert: |
                отображена страница с отчетом варианта ПДД билета №40
                на странице присутствует переключатель заданий и видны все задания
            - screenshot: внешний вид переключателя задач в отчете ПДД варианта [switcher]
            - screenshot: внешний вид задачи для отчета ПДД варианта [todo fisrt] # FRONTEND-753

v-team: Younglings

qa-engineer:
    - helm

platform:
    - common

tags:
    - edu-front
    - report-page

files:
    - tests/hermione/suites/common/report-page/report-page.hermione.js
