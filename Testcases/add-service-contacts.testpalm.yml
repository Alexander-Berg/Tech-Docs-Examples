feature: Страница сервиса

specs:
  beforeEach: 
    - tech: залогиниться пользователем robot-abc-001

  aliases:
    - &prepareTestData
      - do: (PREPARE) нажать на карандашик рядом с заголовком блока "Контакты"
      - do: (PREPARE) в модальном окне "Редактирование списка контактов" удалить все контакты кликом на иконку урны
      - do: (PREPARE) нажать "Сохранить"

  Положительные:
    1. Добавление контакта типа "ID метрики":
      - automation: ABC-10186
      - do: открыть страницу сервиса "autotest-contacts" (/services/contacts_testing/)
      - screenshot: в правой части есть блок "Контакты", под ним написано "пусто" [https://jing.yandex-team.ru/files/pixel/service-contacts.jpeg]
      - do: навести курсор на заголовок "Контакты"
      - assert: справа от заголовка появилась иконка карандашика
      - do: кликнуть на карандашик
      - assert: появилось модальное окно "Редактирование списка контактов", в которой по умолчанию выбран тип контакта "ID метрики"
      - screenshot: внешний вид модального окна "Редактирование списка контактов" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-01-20%2018-49-21.png]
      - do: ввести в модальном окне в поле "Название" текст "Счётчик Метрики"
      - do: ввести в модальном окне в поле "Адрес" текст "123"
      - do: кликнуть на кнопку "Сохранить"
      - assert: |
              модальное окно закрылось
              в блоке "Контакты" под заголовком появился пункт "Счётчик Метрики"
      - screenshot: вид заполненного блока "Контакты" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-01-20%2018-52-12.png]
      - *prepareTestData

    2. Добавление нескольких контактов разных типов:
      - automation: ABC-10186
      - do: открыть страницу сервиса "autotest-contacts" (/services/contacts_testing/)
      - do: навести курсор на заголовок "Контакты"
      - assert: справа от заголовка появилась иконка карандашика
      - do: кликнуть на карандашик
      - assert: появилось модальное окно "Редактирование списка контактов", в которой по умолчанию выбран тип контакта "ID метрики"
      - do: кликнуть на поле "ID метрики"
      - assert: появился выпадающий список с разными типами контактов
      - do: кликнуть на вариант "E-mail рассылка"
      - assert: |
              выпадающий список с вариантами скрылся 
              в поле подставилось значение "E-mail рассылка"
      - do: ввести в модальном окне в поле "Название" текст "Рассылка сервиса"
      - do: ввести в модальном окне в поле "Адрес" текст "test@yandex-team.ru"
      - do: кликнуть в модальном окне на кнопку "Добавить"
      - assert: появилась ещё одна строка для добавления контакта, по умолчанию выбран тип "ID метрики"
      - do: кликнуть на поле "ID метрики"
      - assert: появился выпадающий список с разными типами контактов
      - do: кликнуть на вариант "Вики"
      - assert: |
              выпадающий список с вариантами скрылся 
              в поле подставилось значение "Вики"
      - do: ввести в модальном окне в поле "Название" текст "Вики-страница"
      - do: ввести в модальном окне в поле "Адрес" текст "https://wiki.yandex-team.ru/eva/testing/projects/abc/"
      - do: кликнуть на кнопку "Сохранить"
      - assert: |
              модальное окно закрылось
              в блоке "Контакты" под заголовком появились пункты "Рассылка сервиса" и "Вики-страница"
      - screenshot: вид заполненного блока "Контакты" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-01-20%2019-00-18.png]
      - *prepareTestData

    3. Изменение порядка отображения контактов:
      - automation: ABC-11194
      - do: открыть страницу сервиса "autotest-several-contacts" (/services/autotest-several-contacts/)
      - screenshot: в блоке контакты есть данные по контактам в следующем порядке - "метрика №1" -> "Вики №2" -> "рассылка №3" -> "прочие ссылки №4" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-08-17%2020-24-00.png]
      - do: навести курсор на заголовок "Контакты"
      - assert: справа от заголовка появилась иконка карандашика
      - do: кликнуть на карандашик
      - screenshot: появилось модальное окно "Редактирование списка контактов", порядок контактов в окне такой же, как и в списке [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-08-17%2020-25-39.png]
      - screenshot: в модальном окне рядом с каждой строчкой есть кнопка изменения порядка контактов [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-08-17%2020-29-29.png]
      - do: поменять местами второй (Вики №2) и третий (рассылка №3) контакты 
      - do: перетащить контакт "прочие ссылки №4" на самый верх
      - screenshot: порядок контактов изменился [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-08-17%2020-31-28.png]
      - do: кликнуть в модалке на кнопку "Сохранить"
      - assert: модалка закрылась
      - screenshot: обновлённый порядок контактов - "прочие ссылки №4" -> "метрика №1" -> "рассылка №3" -> "Вики №2"  [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-08-17%2020-33-43.png]
      - do: (PREPARE) кликнуть на карандашик рядом с заголовком блока контакты
      - do: (PREPARE) в модалке "Редактирование списка контактов" восстановить порядок контактов - "метрика №1", "Вики №2", "рассылка №3", "прочие ссылки №4"
      - do: (PREPARE) кликнуть на кнопку "Сохранить"


files: []

priority: critical

tags:
  - reviewed
