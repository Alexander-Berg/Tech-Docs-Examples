feature: Сниппет форумов
type: Подфорумы

# форум штука с количеством тем
specs:
  Внешний вид и ссылки:
    - do: получить выдачу Поиска по запросу 'мазда форумы'
    - screenshot: на выдаче есть форумный сниппет с разделами (с количествои тем), пример внешнего вида [plain]
    - tech: проверить счетчик на показ тайтла
    - tech: проверить счетчик на показ гринурла
    - tech: проверить счетчик на показ первого подфорума
    - tech: проверить счетчик на показ второго подфорума
    - assert: |
        ссылка в тайтле форумного сниппета работает и открывается
        ссылка в гринурле форумного сниппета работает и открывается
        первая ссылка на подфорум в форумном сниппете работает и открывается
        вторая ссылка на подфорум в форумном сниппете работает и открывается
    - tech: проверить счетчик в тайтле path = "/$page/$main/$result[@type="organic" and @subtype="forum_forums"]/title"
    - tech: проверить счетчик в гринурле path = "/$page/$main/$result[@type="organic" and @subtype="forum_forums"]/path/urlnav"
    - tech: проверить счетчик в первом подфоруме path = "/$page/$main/$result[@type="organic" and @subtype="forum_forums"]/table/link[@item=0]"
    - tech: проверить счетчик во втором подфоруме path = "/$page/$main/$result[@type="organic" and @subtype="forum_forums"]/table/link[@item=1]"
  Ссылка еще с сайта:
    - params:
        foreverdata: '115437789'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче есть форумный сниппет с ссылкой 'Еще с сайта' внизу
    - screenshot: внешний вид [sitemore-link]
    - do: нажать на ссылку 'Еще с сайта'
    - assert: в той же вкладке открылась выдача по запросу 'site:stackoverflow.com foreverdata'
    - tech: сработал счетчик '/$page/$main/$result/table/more-link'

specs-integration:
  Внешний вид:
    - do: получить выдачу Поиска по запросу 'мазда форумы'
    - assert: на выдаче есть форумный сниппет с разделами (с количествои тем)
    - counter: /$page/$main/$result[@type="organic" and @subtype="forum_forums"]

files:
  - features/forum/forum_type_forums@deskpad.hermione.js
  - features/forum/forum_type_forums@deskpad.hermione.e2e.js

v-team: Turbo

tags:
  - reviewed

tlds:
  - com
  - ru
  - by
  - ua
  - kz

counter: /$page/$main/$result[@type="organic" and @subtype="forum_forums"]
