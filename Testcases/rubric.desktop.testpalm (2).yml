feature: Рубрика

description: Рубрика - страница сервиса, на которой отображаются новости и другие релевантные материалы по конкретному виду спорта

specs-integration:
  должна открываться из Главной:
    - do: перейти по ссылке https://yandex.ru/sport
    - do: кликнуть на рубрику Футбол
    - assert: |
        страница открылась,
        на странице есть блок топ новостей, блок рекоммендуемых новостей, лента новостей рубрики

  загружает новые карточки при скролле:
    - do: открыть сервис Я.Спорт на странице любой рубрики, кроме рубрики Матч-центр, дождаться загрузки карточек первого экрана
    - assert: на странице отображаются карточки с новостями спорта
    - do: скроллить страницу вниз, пока не закончатся карточки
    - assert: |
        под карточками отображается спиннер,
        далее загружается новая порция карточек,
        карточки отображаются корректно (нет проблем с вёрсткой),
        часть фото на новостных карточках может не прогружаться - это ок. Главное, чтобы при скролле страницы последующие порции карточек прогружались корректно

  содержит рекламу:
    - tags:
      - backend_sport
    - do: открыть сервис Я.Спорт на странице любой рубрики, кроме рубрики Матч-центр и Трансляции
    - do: установить ширину экрана >1260px. Чтобы проверить, что ширина окна действительно больше 1260px, откройте консоль и введите туда 'window.innerWidth' (без скобок) и нажмите enter. Полученное значение и будет действительная ширина окна.
    - do: подождать, пока страница полностью загрузится
    - do: поскроллить страницу ниже блока топ-5 и матч-центра
    - assert: |
        в ленте присутствуют рекламные блоки,
        справа отображается блок рекламы,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2022-06-03_13-44-19.png
    - do: перейти в любую другую рубрику и дождаться загрузки страницы
    - do: поскроллить страницу вниз
    - assert: |
        в ленте присутствуют рекламные блоки,
        справа отображается блок рекламы,
        рекламные блоки прогружаются

  отображает рекламный блок справа при ресайзе:
    - do: открыть сервис Я.Спорт и перейти в рубрику Матч-центр
    - do: перейти на страницу турнира, кликом по наименованию турнира (слева от матчей) - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-07_18-20-38.png
    - do: отключить блокировщик рекламы
    - do: растянуть окно браузера так, чтобы ширина окна была больше 1260px. Чтобы проверить, что ширина окна действительно больше 1260px, откройте консоль и введите туда 'window.innerWidth' (без скобок) и нажмите enter. Полученное значение и будет действительная ширина окна.
    - assert: справа от правой колонки есть рекламный блок
    - do: уменьшить ширину окна браузера так, чтобы она стала меньше 1260px
    - assert: правая колонка исчезает
    - do: снова растянуть окно браузера так, чтобы ширина окна была больше 1260px
    - assert: правая колонка отображается
    - do: перейти в любую рубрику спорта (например баскетбол)
    - do: |
        растянуть окно браузера так, чтобы ширина окна была больше 1260px
        чтобы проверить, что ширина окна действительно больше 1260px, откройте консоль и введите туда 'window.innerWidth' (без скобок) и нажмите enter. Полученное значение и будет действительная ширина окна.
    - assert: справа от правой колонки есть рекламный блок
    - do: уменьшить ширину окна браузера так, чтобы она стала меньше 1260px
    - assert: правая колонка исчезает
    - do: снова растянуть окно браузера так, чтобы ширина окна была больше 1260px
    - assert: правая колонка отображается

specs:
  выделена в рубрикаторе:
    - tags:
      - backend_sport  
    - do: открыть сервис Я.Спорт на странице любой рубрики, кроме рубрик трансляция и матч-центр
    - assert: |
        отображается страница рубрики,
        на странице присутствуют карточки топа,	
        первая карточка может быть двойной,
        название рубрики в рубрикаторе выделено красным цветом,
        скриншот https://jing.yandex-team.ru/files/kossakovskaya/2022-05-31_09-40-31.png
    - do: тапнуть на любую другую рубрику
    - assert: |
        отображается страница выбранной рубрики,
        название рубрики в рубрикаторе выделено красным цветом

  позволяет перейти на страницу сюжета с карточки из ленты:
    - tags:
      - backend_sport
    - do: открыть сервис Я.Спорт на странице любой рубрики, кроме рубрики Матч-центр
    - do: подождать, пока страница полностью загрузится
    - assert: на странице отображаются карточки спортивных сюжетов
    - do: тапнуть по заголовку любой карточки сюжета
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет соответствует карточке, с которой произошёл переход
    - do: вернуться назад на страницу рубрики
    - do: тапнуть по аннотации любой карточки
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет соответствует карточке, с которой произошёл переход
    - do: вернуться назад на странцу рубрики
    - do: тапнуть по картинке любой карточки
    - assert: |
        произошёл переход на страницу сюжета,
        сюжет соответствует карточке, с которой произошёл переход

  загружает новые карточки после восстановления соединения [manual]:
    - tags:
      - backend_sport
    - reasonNotToAuto:
      - не удалось автоматизировать, тк выполнение команды setNetworkConnection в десктопных браузерах заканчивается ошибкой 'unknown error - network connection must be enabled'
    - do: открыть сервис Я.Спорт на странице любой рубрики, кроме рубрики Матч-центр и Трансляции
    - do: дождаться загрузки карточек первого экрана
    - do: скроллить страницу вниз, пока не закончатся карточки
    - assert: |
        под карточками ненадолго отображается спиннер,
        далее загружается новая порция карточек
    - do: дождаться загрузки новой порции карточек и отключить интернет на устройстве
    - do: проскроллить вниз до конца порции
    - assert: |
        новые карточки не загружаются,
        в конце ленты отображается спиннер,
        ВНИМАНИЕ! в IE11 нет спинера (это не баг!), в IE11 просто пространство загрузки - это ОК
    - do: включить интернет на устройстве
    - assert: |
        спиннер пропадает,
        загружается новая порция карточек,
        карточки отображаются корректно (нет проблем с вёрсткой),
        часть фото на новостных карточках может не прогружаться - это ок. Главное, чтобы при скролле страницы последующие порции карточек прогружались корректно

  содержит подрубрикатор спортивных турниров:
    - params:
        flags:
          - yxneo_sport_desktop_rubric_tournaments=1
    - do: открыть сервис Я.Спорт на странице рубрики c параметром flags=yxneo_sport_desktop_rubric_tournaments=1
    - assert: отображается подрубрикатор с турнирами по виду спорта
    - do: кликнуть по табу "Все турниры"
    - assert: откроется модальное окно со списком всех турниров
    - assert: внешний вид соответсвует скриншоту [tournaments-list-modal]

#выпилили комментарии
#  позволяет открыть чат с комментариями [manual]:
#    - assert: писать комментарии к карточкам ЗАПРЕЩЕНО
#    - do: открыть сервис Я.Спорт на странице любой рубрики
#    - do: подождать, пока страница полностью загрузится (в топ-5 и топ-5 рекомендаций иконки комментариев отсуствуют)
#    - do: поскроллить страницу до раздела "Новости"
#    - assert: |
#        в ленте есть карточки спортивных новостей,
#        карточки имеют иконку комментариев
#    - do: тапнуть на иконку комментариев
#    - assert: |
#        произошёл переход на страницу сюжета,
#        открылся попап комментариев
#    - do: тапнуть по браузерной кнопке "назад"
#    - assert: |
#        попап комментариев закрыт,
#        отображается сюжет, около которого вы ранее нажали на инконку комментариев

# там этих каруселей почти нет, проверяем карусели в рамках других кейсов - в турнире, на страницах команд хоккея, в фнл
#  может содержать карусель видео [manual]:
#    - do: открыть сервис Я.Спорт на странице рубрики Главное
#    - do: проскроллить страницу
#    - assert: |
#        в ленте отображаются карусели с видео,
#        названия карусели корректны
#    - do: поскроллить любую карусель вправо-влево
#    - assert: |
#        карусель скроллится,
#        названия матчей корректно обрезаются многоточием
#    - do: кликнуть по любому видео
#    - assert: |
#        в отдельной вкладке открывается видео на сервисе Я.Эфир или другом спортивном источнике
#    - do: перейти в рубрику Футбол или Хоккей
#    - do: проскроллить страницу
#    - assert: |
#        в ленте отображаются карусели с видео,
#        названия карусели корректны,
#        карусели соответствуют тематике рубрики
#    - do: поскроллить любую карусель вправо-влево
#    - assert: |
#        карусель скроллится,
#        если названия матчей не помещается в 2 строки, названия корректно обрезаются многоточием
#    - do: кликнуть по любому видео
#    - assert: |
#        в отдельной вкладке открывается видео на сервисе Я.Эфир или другом спортивном источнике
#        на сервисе Я.Эфир может отображаться заглушка про устаревшую версию браузера, это ок

#невозможно на данный момент найти такую карточку, кейс всегда заскипан асессорами
#  может содержать видео, и его можно запустить [manual]:
#    - tags: backend_sport
#    - do: открыть сервис Я.Спорт на странице рубрики Главное, Футбол или Хоккей
#    - do: подождать, пока страница полностью загрузится
#    - assert: страница загрузилась
#    - do: скроллить страницу, пока на экране не отобразится карточка с видео
#    - assert: внешний вид карточки с видео https://jing.yandex-team.ru/files/terenandrevna/02122019video.png
#    - assert: (Если карточки с видео нет - это нормальное поведение. Их мало в ленте. Кейс в этом случае скипнуть)
#    - do: кликнуть по видео
#    - assert: видео запустилось поверх страницы
#  загружает новые карточки при скролле [manual]:
#    - tags: backend_sport
#    - do: открыть сервис Я.Спорт на странице рубрики Хоккей или Футбол
#    - do: скроллить страницу вниз, пока не закончатся карточки
#    - assert: |
#        под карточками отображается спиннер,
#        загружается новая пачка карточек,
#        карточки отображаются корректно

  позволяет открыть live-страницу Кинопоиска из рубрики:
    - do: открыть сервис Я.Спорт
    - assert: в рубрикаторе есть присутствует рубрика "Трансляции" с иконкой Я.Плюс
    - do: кликнуть на рубрику "Трансляции"
    - assert: в этой же вкладке открывается live-страница Кинопоиска

  позволяет открыть live-страницу Кинопоиска кликом на баннер:
    - do: открыть сервис Я.Спорт
    - assert: после топ-5 сюжет отображается баннер "Смотрите спорт в прямом эфире по подписке Яндекс Плюс"
    - do: кликнуть на баннер
    - assert: в этой же вкладке открывается live-страница Кинопоиска

files:
  - features/sport/rubric/rubric.desktop.hermione.e2e.js
  - features/sport/rubric/rubric.desktop.hermione.js

tags:
  - sport-neo
  - rubric

manager: mrwhite

qa-engineer: kossakovskaya

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
