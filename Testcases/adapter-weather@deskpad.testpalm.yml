feature: Колдунщик погоды

specs-integration:
  Погода на сегодня:
    - do: открыть страницу https://yandex.ru/tune/geo (вместо домена ru нужно указать тестируемый домен)
    - do: запомнить город указанный на данной странице
    - do: перейти на тестовый стенд
    - do: получить выдачу по запросу 'погода сегодня'
    - assert: в результатах поиска появился колдунщик погоды
    - do: отредактировать url, удалив оттуда параметр lr= и его значение
    - do: перейти по отредактированному url
    - assert: в результатах поиска появился колдунщик погоды для региона из шага 2
    - assert: тайтл присутствует в колдунщике
    - assert: блок с текущей температурой присутствует в колдунщике
    - assert: блок с детализацией погоды присутствует в колдунщике
    - assert: блок с прогнозом по дням присутствует в колдунщике
    - counter: /$page/$main/$result[@wizard_name="weather"]/today/nowcast
  Погода на выходные:
    - do: открыть страницу https://yandex.ru/tune/geo (вместо домена ru нужно указать тестируемый домен)
    - do: запомнить город указанный на данной странице
    - do: перейти на тестовый стенд
    - do: получить выдачу по запросу 'погода на выходные'
    - assert: в результатах поиска появился колдунщик погоды на выходные
    - do: отредактировать url, удалив оттуда параметр lr= и его значение
    - do: перейти по отредактированному url
    - assert: в результатах поиска появился колдунщик погоды на выходные для региона из шага 2
    - assert: тайтл присутствует в колдунщике
    - assert: блок с текущей температурой присутствует в колдунщике
    - assert: блок с детализацией погоды присутствует в колдунщике
    - assert: блок с прогнозом по дням присутствует в колдунщике
    - counter: /$page/$main/$result[@wizard_name="weather"]/current
  Погода по запросу в падежной форме:
    - do: получить выдачу по запросу 'погода в екатеринбурге'
    - assert: в результатах поиска появился колдунщик погоды для Екатеринбурга
    - assert: тайтл присутствует в колдунщике
    - assert: блок с текущей температурой присутствует в колдунщике
    - assert: блок с детализацией погоды присутствует в колдунщике
    - assert: блок с прогнозом по дням присутствует в колдунщике
    - counter: /$page/$main/$result[@wizard_name="weather"]/today/nowcast

specs:
  Погода на сегодня:
    - tags: smoke_extended
    - params:
        foreverdata: '661363645'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: появился колдунщик погоды
    - screenshot: колдунщик погоды соответствует виду [weather-today]
  Погода на выходные:
    - tags: smoke_extended
    - params:
        foreverdata: '3570126027'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: появился колдунщик погоды
    - screenshot: колдунщик погоды соответствует виду [weather-holidays]
  Погода на конкретный день:
    - tags: smoke_extended
    - params:
        foreverdata: '2177196224'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: появился колдунщик погоды
    - screenshot: колдунщик погоды соответствует виду [weather-exact-day]
  Погода по запросу в падежной форме:
    - tags: smoke_extended
    - params:
        foreverdata: '1871187353'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: появился колдунщик погоды
    - screenshot: колдунщик погоды соответствует виду [weather-where]
  Спецсимволы в данных:
    - params:
        foreverdata: '3284928401'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче есть колдунщик погоды
    - assert: страница загружена без ошибок

files:
  - features/adapter-weather/adapter-weather@deskpad.hermione.js
  - features/adapter-weather/adapter-weather@deskpad.hermione.e2e.js

v-team: Weather

manager:
  - podnebesnaya

tlds:
  - ru
  - by
  - ua
  - kz
  - com.tr

counter: /$page/$main/$result[@wizard_name="weather"]
