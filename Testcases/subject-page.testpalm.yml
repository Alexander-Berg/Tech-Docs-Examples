feature: Страница предмета

description: страница предмета и все эл-ты на ней по адресу /tutor/subject

specs:
    Переход на страницу предмета:
        - tags: smoke
        - do: перейти на главную страницу сервиса Яндекс.Репетитор
        - do: кликнуть по предмету "Математика (профильный уровень)"
        - assert: |
            произошло перенаправление на страницу предмета "Математика (профильный уровень)"
            в адресе присутствует параметр 'subject_id=2'
        - screenshot: внешний вид страницы предмета [todo plain] # FRONTEND-753
    Карточка вариантов:
        beforeEach:
            - do: перейти на страницу любого предмета (например Математика (профильный уровень))
            - assert: открыта страница предмета
        Просмотр всех вариантов:
            - tags: smoke
            - screenshot: внешний вид карточки предмета [plain]
            - do: кликнуть по ссылке "Еще N вариант/ов"
            - assert: |
                появилось N вариантов
                ссылка "Еще N вариант/ов" сменилась на "Скрыть"
            - screenshot: внешиний вид карточки предмета с полным списком вариантов [plain]
            - do: кликнуть по ссылке "Скрыть"
            - assert: |
                N вариантов скрылось
                ссылка "Скрыть" сменилась на "Еще N вариант/ов"
        Фильтр по авторам:
            - tags: smoke
            - do: кликнуть в выпадающий список с выбором авторов
            - assert: |
                отображен список авторов вариантов
                отпция "Все авторы" выбрана по умолчанию
            - screenshot: внешний вид карточки варианта с открытым списком [plain]
            - do: выбрать любого автора из списка
            - assert: |
                список закрылся
                страница не обновилась
                список вариантов обновился в соответствии с выбранным автором
        Фильтр по году:
            - tags: smoke
            - do: кликнуть в выпадающий список с выбором года
            - assert: |
                отображен список лет издания вариантов
                опция "2020" выбрана по умолчанию
            - screenshot: внешний вид карточки варианта с открытым списком [plain]
            - do: выбрать любого год из списка
            - assert: |
                список закрылся
                страница не обновилась
                список вариантов обновился в соответствии с выбранным годом
    Список топиков:
        beforeEach:
            - do: перейти на страницу любого предмета (например Математика (профильный уровень))
            - assert: открыта страница предмета
        Проверка внешнего вида карточки:
            - do: перейти на страницу любого предмета (например Математика (профильный уровень))
            - tags: smoke
            - screenshot: внешний вид карточки предмета [plain]
        Проверка работы расхлопа:
            - tags: smoke
            - do: кликнуть по первому топику (теме) предмета из списка
            - assert: |
                первый топик расскрылся, под ним появилась ссылка "Все задания"
                справа от ссылки "Все задания" указано кол-во заданий данного топика
            - do: кликнуть по второму топику (теме) предмета из списка
            - assert: |
                второй топик расскрылся, под ним появилась ссылка "Все задания"
                справа от ссылки "Все задания" указано кол-во заданий данного топика
            - screenshot: внешний вид карточки топиков предмета "Математика (профильный уровень)" [todo plain] # FRONTEND-753
            - do: кликнуть по ссылке "Все задания"
            - assert: |
                произошло перенаправление на страницу топика по "Математика (профильный уровень)" /tutor/subject/tag/problems
                в адресе присутствуют параметры 'ege_number_id','tag_id'
    Карточка подписки:
        Проверка внешнего вида карточка подписки:
            - do: перейти на страницу любого предмета (например Математика (профильный уровень))
            - assert: открыта страница предмета
            - screenshot: внешний вид карточки подписки [plain]
            - do: кликнуть в кнопку "Подписаться" в карточке подписки на рассылку
            - assert: в новой вкладке браузера открыт сервис Яндекс.Формы 'https://forms.yandex.ru/surveys/10010361/'
    Список уроков:
        Проверка внешнего вида карточки со списком уроков:
            - tags: smoke
            - do: перейти на страницу предмета Математика (профильный уровень)
            - assert: |
                открыта страница предмета
                на странице присутствует карточка уроков
            - screenshot: внешний вид карточки уроков [plain]
        Переход на урок:
            - tags: smoke
            - do: перейти на страницу предмета Математика (профильный уровень)
            - do: кликнуть в первый раздел в карточке уроков
            - assert: |
                раздел расхлопнулся
                под выбранным разделом появились топики
            - do: кликнуть в первый топик в первом разделе в карточке уроков
            - assert: |
                произошло перенаправление на страницу урока
                в адресе присутствует параметры 'lesson_id' и 'subject_id'
    Карточка с контрольными:
        Проверка внешнего вида карточки с контрольными:
            - do: перейти на страницу предмета Математика (профильный уровень), добавив в адрес параметр "server_time=1555718400"
            - assert: на странице присутствует карточка контрольных работ
            - screenshot: внешний вид карточки с контрольными работами [plain]
    Рекомендации:
        params:
            problems_count: '5'
            check_only: '1'
        Без авторизации:
            beforeEach:
                - do: убедиться, что пользователь не авторизован или разлогиниться
                - assert: пользователь не авторизован
            Блок онбординга:
                - do: перейти на страницу любого предмета Математика
                - assert: |
                    открыта страница предмета
                    пользователь не авторизован
                    на странице присутствует блок рекомендаций
                - screenshot: внешний вид пустого блока рекомендаций [plain]
            Стартовый тест:
                - do: перейти на страницу предмета Физика
                - assert: |
                    открыта страница предмета
                    на странице присутствует блок рекомендаций
                - do: кликнуть по кнопке "Решить задачи"
                - assert: |
                    произошло перенаправления на страницу теста по соответствующему предмету
        С авторизацией:
            beforeEach:
                - do: убедиться, что пользователь авторизован или залогиниться
                - do: перейти на страницу любого предмета Математика
                - assert: |
                    пользователь авторизован
                    отображена страница предмета
                    на странице присутствует блок рекомендаций
            Кнопка "Решить подборку":
                - do: кликнуть по кнопку "Решить подборку" в блоке рекомендаций
                - assert: |
                    страница не обновилась
                    блок рекомендаций раскрылся
                    в блоке отображено задание
                    кнопка "Решить подборку" сменилась на "Скрыть"
                - screenshot: внешний вид раскрытого блока рекомендаций [todo plain] # FRONTEND-753
                - do: кликнуть по кнопке "Скрыть"
                - assert: |
                    страница не обновилась
                    блок рекомендаций схлопнулся
                    кнопка "Решить подборку" сменилась на "Скрыть"
                - screenshot: внешинй вид свернутого блока рекомендаций [todo plain] # FRONTEND-753
            Решение Верно:
                - do: кликнуть по кнопку "Решить подборку" в блоке рекомендаций
                - do: ввести в поле ответа задачи Верный ответ и кликнуть "Проверить ответ" (верный ответ можно найти на странице данной задачи)
                - assert: |
                    в поле ответа появилась надпись "Верно"
                    рядом с номером задания появилась надпись "Задание было решено верно"
                    кнопка проверить ответ стала некликабельной
                    кнопка "Пропустить" сменилась на "Следующее задание"
                    процент верно решенных задач блока рекомендаций увеличился
                    кол-во решенных заданий увеличилось на 1
                - screenshot: внешний вид блока рекомендаций с ВЕрно решенной задачей [todo plain] # FRONTEND-753
                - do: кликнуть кнопку "Следующее задание"
                - assert: |
                    страница не обновилась
                    отображено следующее задание
            Решение Неверно:
                - do: кликнуть по кнопку "Решить подборку" в блоке рекомендаций
                - do: ввести в поле ответа задачи НЕверный ответ и кликнуть "Проверить ответ"
                - assert: |
                    в поле ответа появилась надпись "Неверно"
                    рядом с номером задания появилась надпись "Задание было решено неверно"
                    кнопка проверить ответ стала некликабельной
                    кнопка "Пропустить" сменилась на "Следующее задание"
                    процент верно решенных задач блока рекомендаций уменьшился
                    кол-во решенных заданий увеличилось на 1
                - screenshot: внешний вид блока рекомендаций с НЕверно решенной задачей [todo plain] # FRONTEND-753
                - do: кликнуть кнопку "Следующее задание"
                - assert: |
                    страница не обновилась
                    отображено следующее задание
            Решение Пропустить:
                - do: кликнуть по кнопке "Решить подборку" в блоке рекомендаций
                - do: кликнуть кнопку "Пропустить задание"
                - assert: |
                    страница не обновилась
                    отображено следующее задание
                    процент верно решенных задач блока рекомендаций не изменился
                    кол-во решенных заданий не изменилось
            Верный процент:
                - tags:
                    - no_assessors
                    - e2e
                - do: добавить в адрес страницы параметр 'БЛАБЛАБЛА хочу 5 задач, а не 50'
                - do: кликнуть по кнопке "Решить подборку" в блоке рекомендаций
                - assert: |
                    отображена страница предмета
                    в блоке рекомендаций представлены 5 задач
                - do: решить первую задачу ВЕрно и кликнуть "Следующее задание"
                - assert: |
                    указано "Решено 1 заданий из 5"
                    указан процент верно решенных задач 100%
                    отображено второе задание
                - do: пропустить решение второй задачи кликнув "Пропустить задание"
                - assert: |
                    указано "Решено 1 заданий из 5"
                    указан процент верно решенных залач 100%
                    отображено третье задание
                - do: решить третью задачу НЕверно и кликнуть "Следующее задание"
                - assert: |
                    указано "Решено 2 заданий из 5"
                    указан процент верно решенных залач 50%
                    отображено четвертое задание
                - do: решить четвертую задачу НЕверно и кликнуть "Следующее задание"
                - assert: |
                    указано "Решено 3 заданий из 5"
                    указан процент верно решенных залач 33%
                    отображено пятое задание
                - do: решить пятую задачу ВЕрно и кликнуть "Следующее задание"
                - assert: |
                    указано "Решено 4 заданий из 5"
                    указан процент верно решенных залач 50%
                    отображена карточка репорта рекомендаций
            Карточка мини-репорта рекомендаций:
                - tags:
                    - no_assessors
                    - e2e
                - do: добавить в адрес страницы параметр 'БЛАБЛАБЛА хочу 5 задач, а не 50'
                - do: кликнуть по кнопке "Решить подборку" в блоке рекомендаций
                - assert: |
                    отображена страница предмета
                    в блоке рекомендаций представлены 5 задач
                - do: пропустить все 5 заданий кликнув по кнопке "Пропустить задание"
                - assert: |
                    в блоке рекомендаций отображены результаты решений
                    указано Верно: 0%
                    указано Неверно 0%
                    указано Решено 0 заданий из 5
                - screenshot: внешний вид блока рекомендаций с результатами [plain]
        ПДД:
            - tags:
                - no_assessors
                - e2e
            - do: перейти на страницу ПДД Категории ABM добавив в адрес страницы параметр 'БЛАБЛАБЛА хочу 5 задач, а не 50'
            - do: кликнуть по кнопке "Решить подборку" в блоке рекомендаций
            - assert: |
                отображена страница предмета Категория ABM
                на странице представлен блок рекомендаций
            - screenshot: внешний вид блока рекомендаций [plain]
            - do: кликнуть в верный ответ в первой задаче
            - assert: |
                выбраный ответ подсвечен желтым
            - screenshot: внешний вид блока рекомендаций [plain]
            - do: кликнуть в "Проверить ответ"
            - assert: |
                отображена вторая задача
                указано Решено 1 заданий из 5
                указано Верно 100%
            - do: решить второе задание НЕверно
            - assert: |
                отображена третья задача
                указано Решно 2 заданий из 5
                указано Верно 50%
            - do: пропустить остальные три задания кликнув по кнопке "Пропустить задание"
            - assert: |
                в блоке рекомендаций отображены результаты решений
                    указано Верно: 50%
                    указано Неверно 50%
                    указано Решено 2 заданий из 5

v-team: Younglings

qa-engineer:
    - helm

platform:
    - common

tags:
    - edu-front
    - subject-page

files:
    - tests/hermione/suites/common/subject-page/subject-page.hermione.js
