feature: Объектный ответ
type: Трейлеры

specs:
  aliases:
    - &CheckMetrics
      - assertMetrics:
        - daily.total_session_count
        - web.total_request_count
        - web.total_click_count
        - web.total_all_click
        - web.abandonment
        - web.tech_part_misc_click
        - all.total_dynamic_click_count
        - feature.web.wizards_common.entity_search_wizard_main.total.clicks

  Трейлер с афишой в центре:
    - do: получить выдачу по запросу 'фильмы в прокате'
    - do: выбрать первый фильм
    - screenshot: внешний вид [trailer-with-afisha]
    - assert: на выдаче под трейлером присутствует блок с афишей
    - *CheckMetrics
  Трейлер для фильмов из списка:
    - params:
        ento: 0oCgpydXc3MjgzODgwEjtsc3Quc2xtQ2lNS0JIUmxlSFFTRzJsZmVXVmhjam95TURFNUlDWW1JSE5mWjJWdWNtVTZabWxzYlE9PRgCQhHRhNC40LvRjNC80YsgMjAxOSItH1I
        text: 'завод фильм 2019'
    - do: просмотреть выдачу полученную по запросу 'завод трейлер' с параметром &ento=0oCgpydXc3MjgzODgwEjtsc3Quc2xtQ2lNS0JIUmxlSFFTRzJsZmVXVmhjam95TURFNUlDWW1JSE5mWjJWdWNtVTZabWxzYlE9PRgCQhHRhNC40LvRjNC80YsgMjAxOSItH1I
    - screenshot: внешний вид (отзывы могут отсутствовать) [trailer-with-list]
    - *CheckMetrics
  Трейлер для будущих фильмов:
    - do: получить выдачу по запросу трейлера будущего фильмы с известной датой фильма (примеры 'бэтмен фильм 2022', 'морбиус трейлер', 'стервелла фильм 2021')
    - screenshot: примерный внешний вид [trailer-for-future-films]
    - *CheckMetrics
  В правой колонке:
    Пример внешнего вида:
      - do: получить выдачу по запросу 'ярость фильм'
      - assert: на выдаче присутствует трейлер в колонке справа
      - screenshot: внешний вид [plain]
      - do: кликнуть на трейлер
      - assert: началось воспроизведение трейлера на этом же месте
      - assertMetrics:
        - daily.total_session_count
        - web.total_request_count
        - web.total_click_count
        - web.total_all_click
        - web.abandonment
        - web.tech_part_misc_click
        - all.total_dynamic_click_count
        - feature.web.wizards_common.entity_search_wizard_parallel.total.clicks
  В правой колонке нет если в центре есть:
    Пример внешнего вида:
      - do: получить выдачу по запросу 'игра престолов трейлер'
      - assert: |
          на выдаче присутствует трейлер в центральной колонке
          на выдаче нет трейлера в правой колонке
      - screenshot: внешний вид [plain]
  В правой колонке есть если в центре нет:
    Пример внешнего вида:
      - params:
          ento: 0oCgpydXc3MzA5NjM2Egtsc3QucmVjZmlsbRgCQgzRhNC40LvRjNC80Yt6da7o
      - do: получить выдачу по запросу "дамбо фильм 2019" с параметром &ento=0oCgpydXc3MzA5NjM2Egtsc3QucmVjZmlsbRgCQgzRhNC40LvRjNC80Yt6da7o
      - assert: |
          на выдаче присутствует трейлер в правой колонке
          на выдаче нет трейлера в центральной колонке
      - screenshot: внешний вид [plain]

files:
  - features/deskpad/z-entity-search/trailers/trailers.hermione.js

tags:
  - reviewed
  - oo_trailers

tlds: ['ru', 'ua', 'by', 'kz', 'com', 'com.tr']

v-team: OO
