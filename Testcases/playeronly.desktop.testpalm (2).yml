feature: Видео-плеер

description: Кейсы для проверки функциональностей НЕ вёрстки сервиса "Яндекс Спорт", а видео-плеера.

specs:
  beforeEach:
    - do: открыть сервис Яндекс Спорт (Обратите внимание! В данном кейсе не важна верстка страницы Спорта - мы проверяем исключительно работу видео-плеера, поэтому не нужно заводить баги, если в самом сервисе что-то отображается не так!)
    - do: В IE11 вместо видео находится заглушка (видео не воспроизводится) - это НЕ баг, заводить баг не нужно!
    - do: Обратите внимание! Если вы находитесь не в РФ, видео у вас может не воспроизводится - это ок, пропустите шаги, которые вы не можете выполнить

  aliases:
    &goTo     
    - do: перейти в любой нетраурный сюжет с видео
    - do: чтобы быстро найти сюжет, который содержит видео, нужно поискать его на таче по шагам ниже
    - do: после перехода на тестовый стенд открыть DevTools и включить эмуляцию тача (общая инструкция тут https://wiki.yandex-team.ru/eva/testing/tech/DevTools/#kakperekljuchitotobrazheniesajjtavmobilnyjjvid)
    - do: обновить страницу
    - assert: отображается мобильная версия сервиса Яндекс Спорт на странице рубрики 'Главное'
    - do: перейти в любой сюжет тапом по заголовку карточки
    - assert: открывается сюжет
    - do: скроллить ленту сюжетов, пока не попадется сюжет с медиаблоком
    - assert: |
        отображается сюжет с медиаблоком,
        внешний вид - https://jing.yandex-team.ru/files/umansai5/Снимок%20экрана%202022-07-25%20в%2019.22.42.png
    - do: выключить эмуляцию тача, закрыть консоль и обновить страницу
    - assert: |
        открыт тот же сюжет, что и на таче, но в десктопной версии (может измениться заголовок на похожий заголовок и источник),
        в сюжете отображается медиаблок с видео,
        Обратите внимание! Видео воспроизводится автоматически только при включенной кнопке автовоспроизведения,  
        внешний вид - https://jing.yandex-team.ru/files/umansai5/Снимок%20экрана%202022-07-25%20в%2019.24.49.png
    - do: пропустить рекламу, кнопка пропуска рекламы в правом нижнем углу плеера (в некоторых видео рекламы может и не быть, это нормально и заводить баг не нужно)
    - assert: видео о сюжете воспроизводится без звука, с самого сначала

  дает возможность запускать/останавливать видео, а также проматывать его [manual]:
    - browsers:
        notFor:
          - win-ie11
    - *goTo
    - do: навести курсор на видео
    - assert: |
        отобразились контролсы видео,
        внешний вид - https://jing.yandex-team.ru/files/umansai5/Снимок%20экрана%202022-07-21%20в%2012.21.53.png
    - do: навести курсор на видео и кликнуть
    - assert: |
        видео встало на паузу,
        иконка слева на панели контролсов изменилась с иконки "паузы" на иконку "запуск" (треугольничек)
    - do: навести курсор на панели контролсов снизу на иконку запуска видео и кликнуть по ней
    - assert: видео продолжило проигрываться
    - do: перемотать видео вперед и назад, кликами по полосе прогресса видео 
    - assert: видео продолжает проигрываться с выбранного места

  дает возможность развернуть видео во весь экран [manual]:
    - browsers:
        notFor: 
          - win-ie11        
    - *goTo
    - do: кликнуть по иконке фуллскрина (самая правая на панели контроллсов),
    - assert: видео отобразилось во весь экран, продолжает воспроизводиться
    - do: кликнуть по иконке фуллскрина ещё раз
    - assert: видео вернулось к прежнему размеру   

  дает возможность включать/выключать звук в видео видео, а также открывать его в полноэкранном режиме [manual]:
    - browsers:
        notFor:
          - win-ie11
    - *goTo
    - do: навести курсор на видео
    - assert: |
        отобразились контролсы видео,
        внешний вид - https://jing.yandex-team.ru/files/umansai5/Снимок%20экрана%202022-07-21%20в%2012.21.53.png
    - do: кликнуть по иконке звука на панели контроллсов
    - assert: если звук был выключен - он включился, звук видео слышно (если был включен - соответственно наоборот - выключился)
    - do: увеличить-уменьшить громкость звука
    - assert: громкость звука соответственно увеличивается или уменьшается, видео продолжает проигрываться
    - do: кликнуть по иконке фуллскрина (самая правая на панели контроллсов)
    - assert: |
        видео отобразилось в полноэкранном режиме,
        кнопки с панели контроллсов не исчезли
    - do: снова кликнуть по иконке фуллскрина (самая правая на панели контроллсов)
    - assert: |
        видео вернулось к первоначальному размеру на странице,
        кнопки с панели контроллсов не исчезли

  дает возможность настраивать в видео скорость и качество воспроизведения [manual]:
    - browsers:
        notFor:
          - ios-safari-9-touch
          - ios-safari-10-touch
          - ios-safari-11-touch
          - ios-safari-12-touch
          - ios-safari-13-touch         
          - win-ie11
    - *goTo
    - do: навести курсор на видео
    - assert: |
        отобразились контролсы видео,
        внешний вид - https://jing.yandex-team.ru/files/umansai5/Снимок%20экрана%202022-07-21%20в%2012.21.53.png
    - do: нажать на иконку шестеренки
    - assert: |
        отобразился поп-ап с настройками качества, скорости, и возможностью сообщить о проблеме,
        внешний вид - https://jing.yandex-team.ru/files/volkhonov/touch-video-settings.png
    - do: кликнуть по "Качество" и выбрать другое качество видео
    - assert: |
        видео продолжает воспроизводиться уже в новом качестве (допустима небольшая пауза для прогрузки видео),
        Обратите внимание! при переключении на качество "АВТО" доигрывается текущее качество, находящееся в буфере, если качество сразу не улучшается - это ок.
    - do: кликнуть по иконке шестеренки, затем кликнуть по "Скорость" - и выбрать скорость воспроизведения видео 0.25
    - assert: воспроизведение видео продолжилось и сильно замедлилось
    - do: изменить скорость воспроизведения на х2
    - assert: воспроизведение видео продолжилось, скорость воспроизведения видео сильно увеличилась относительно первоначальной (обычной)
    - do: вернуть скорость воспроизведения на значение "Обычная"
    - assert: видео продолжило воспроизводится, но уже на обычной скорости

  дает возможность перейти на обратную связь [manual]:
    - browsers:
        notFor:
          - win-ie11
    - *goTo
    - do: навести курсор на видео
    - assert: |
        отобразились контролсы видео,
        внешний вид - https://jing.yandex-team.ru/files/umansai5/Снимок%20экрана%202022-07-21%20в%2012.21.53.png
    - do: в поп-апе настроек кликнуть по "Сообщить о проблеме"
    - assert: |
        произошел переход на страницу Яндекс Справки, отобразился заголовок "Сообщить о проблеме с видеоплеером",
        Обратите внимание! Яндекс Справки - сторонний сервис и в даном случае нам не важна корректность отображения сервиса, мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если на сервисе Яндекс.Справки что-то отображается не так!  

  не сбрасывает позицию видео при переключении на фото [manual]:
    - browsers:
        notFor:
          - win-ie11  
    - *goTo
    - do: навести курсор на видео
    - assert: |
        отобразились контролсы видео,
        внешний вид - https://jing.yandex-team.ru/files/umansai5/Снимок%20экрана%202022-07-21%20в%2012.21.53.png
    - do: включить звук у видео
    - assert: видео вопроизводится со звуком        
    - do: кликнуть по иконке "Фото" на панели контроллсов
    - assert: |
        открывается медиаблок фото,
        внешний вид - https://jing.yandex-team.ru/files/umansai5/Снимок%20экрана%202022-07-21%20в%2014.17.53.png,
        звук видео прекращается
    - do: кликнуть по иконке "Видео" на панели контроллсов
    - assert: видео воспроизводится со звуком, с той же позиции, где прервалось

  в траурном сюжете не содержит рекламу в видео [manual]:
    - do: | 
        открыть траурный сюжет с видео (траурный сюжет - сюжет, в котором говорится о смерти/убийстве, терактах),
        ВНИМАНИЕ! Если на странице сервиса в течение минуты вы не нашли траурный сюжет, то кейс можно скипнуть
    - assert: видео о сюжете воспроизводится без рекламы ни в начале, ни после минуты просмотра видео

files: []

tags:
  - playeronly

manager: mrwhite

qa-engineer: umansai5

tlds:
  - ru
  - by
  - kz
  - uz
  - com