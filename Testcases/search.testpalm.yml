feature: Поисковая стрелка

specs:
  beforeEach:
    - do: получить выдачу по запросу 'картошечка'
    - assert: на странице есть поисковая стрелка
    - screenshot: на экране есть поисковая стрелка [yandex-search/index-63-{{PLATFORM}} >> plain]
    - tech: hermione [yandex-search/index-63-{{PLATFORM}} >> filled]
    - tech: hermione [yandex-search/index-63-{{PLATFORM}} >> scrolled]
  Проверка BackSpace:
    - do: нажать BackSpace (удалить последний символ 'а' из запроса в поисковой строке)
    - assert: значение инпута стало 'картошечк'
  Очистка инпута:
    - do: нажать на крестик в поле ввода запроса (в правой части)
    - assert: поле запроса очистилось
  Выполняется перезапрос с другим запросом:
    - do: сделать перезапрос с текстом 'punk'
    - assert: выдача обновилась по новому запросу
    - assert: значение параметра 'text' в URL изменилось на 'punk'
    - tech: получить значение инпута
    - tech: текст в инпуте должен измениться
  Запрос меняется при переходе по кнопке браузера 'назад':
    - do: сделать перезапрос с текстом 'котлетка'
    - assert: поисковая выдача обновилась
    - assert: текст в поисковой строке 'котлетка'
    - tech: получить значение инпута
    - tech: текст в инпуте должен измениться
    - do: нажать кнопку 'Назад'
    - assert: текст в поисковой строке поменялся и стал 'картошечка'
    - assert: саджест закрыт
    - assert: кнопка 'Найти' отсутствует в поисковой строке
  Выполняется перезапрос с пустым запросом:
    - do: нажать на крестик в поле ввода запроса (в правой части)
    - do: нажать в кнопку 'Найти'
    - assert: выдача обновилась
    - assert: значение параметра 'text' в URL изменилось на пустое
  Проверка установки курсора в конец запроса [manual]:
    - automation: SERP-74710
    - do: сделать перезапрос с текстом ‘котики пушистые'
    - assert: поисковая выдача обновилась по новому запросу
    - do: кликнуть перед словом ‘пушистые'
    - assert: курсор установлен после слова ‘пушистые'
  Проверка ссылок и счётчиков сервисов:
    - do: нажать на таб 'Картинки'
    - assert: открылся сервис картинок с таким же поисковым запросом
    - tech: проверка счетчика ссылки табика "Картинки"
    - do: нажать на таб 'Видео'
    - assert: открылся сервис видео с таким же поисковым запросом
    - tech: проверка счетчика ссылки табика "Видео"
    - do: нажать на таб 'Карты'
    - assert: открылся сервис Яндекс.Карты или открылось приложение
    - tech: проверка счетчика ссылки табика "Карты"
    - do: нажать на таб 'Товары' (для доменов не .ru таб 'Маркет')
    - assert: открылся сервис Товары ('Янднекс.Маркет' для доменов не .ru) с таким же поисковым запросом
    - tech: проверка счетчика ссылки табика "Маркет"
    - do: нажать на таб 'Новости'
    - assert: открылись Яндекс.Новости с таким же поисковым запросом
    - do: нажать на таб 'Все сервисы'
    - assert: открылась страница с другими сервисами яндекса
    - tech: проверка счетчика ссылки табика "Все"
  Проверка ресайза шапки при повороте устройства [manual]:
    - automation: SERP-74710
    - tags: manual
    - do: перевернуть устройство в горизонтальное положение
    - screenshot: поисковая стрелка и логотип подстроились под размер экрана [yandex-search/index/horizontal-64-{{PLATFORM}} >> plain]
    - do: перевернуть устройство обратно в вертикальное положение
    - assert: поисковая стрелка и логотип подстроились под размер экрана

files:
  - hermione/test-suites/touch-phone/yandex-search.hermione.js
# - features/touch-phone/yandex-search.autogenerated.hermione.js

v-team: Beauty

manager: osumerina

description: в опере мини поисковая стрелка и выдача не ресайзятся при поворотах, скроллы в опере мини не работают

tags:
  - smoke
  - smoke_extended
  - suggest
  - head
  - button
  - input
  - smart
  - winphone7

priority:
  - high

tlds: none
