feature: beruFilters

specs:
  Range фильтр:
    beforeEach:
      - do: Открыть ссылку https://yandex.ru/turbo?stub=berufilters/default.json
      - do: Кликнуть на строку с надписью "Диагональ экрана (точно)"
      - assert: Должен открыться режим редактирования фильтра
      - assert: 'Текст счетчика должен быть "Выбрано: 0"'
      - assert: Кнопка "Cбросить" не должна отображаться
      - assert: Кнопка "Закрыть"(✕) не должна отображаться
      - assert: Кнопка "Готово" не должна отображаться
      - assert: Должна отображатсья кнопка "Назад"(←)

    Внешний вид фильтра по умолчанию:
      - assert: Должны быть виден Range фильтр
      - screenshot: Внешний вид соответствует скриншоту [range-filter]

    Внешний вид фильтра с заполненными значениями:
      - do: Ввести в первое поле "4"
      - do: Ввести во второе поле "5"
      - assert: Должны быть виден Range фильтр c заполнеными полями
      - screenshot: Внешний вид соответствует скриншоту [range-filter-filled]

    При изменении значений фильтра, счетчик изменений должен показывать кол-во измененных значений:
      - do: Ввести в первое поле "4"
      - assert: 'Текст счетчика должен быть "Выбрано: 1"'
      - do: Ввести во второе поле "5"
      - assert: 'Текст счетчика должен быть "Выбрано: 2"'
      - do: Cтереть введенное значение из первого поля нажав "Backspace"
      - assert: 'Текст счетчика должен быть "Выбрано: 1"'
      - do: Cтереть введенное значение из второго поля нажав "Backspace"
      - assert: 'Текст счетчика должен быть "Выбрано: 0"'

    Кнопка "Cбросить" должна отображаться если значение фильтра отличается от дефолтного, в противном случае скрываться:
      - do: Ввести в первое поле "4"
      - assert: Кнопка "Сбросить" должна отображаться"
      - do: Cтереть введенное значение из первого поля нажав "Backspace"
      - assert: Кнопка "Сбросить" не должна отображаться

    Нажатие по кнопке "Cбросить" должно сбрасывать значение фильтра до дефолтного и скрывать саму кнопку:
      - do: Ввести в первое поле "4"
      - do: Ввести во второе поле "5"
      - do: Нажать на кнопку "Сбросить"
      - assert: Значения обоих полей должны быть пустыми
      - assert: Кнопка "Сбросить" не должна отображаться

    Кнопка "Готово" должна всегда отображаться, если значение фильтра изменилось:
      - do: Ввести в первое поле "4"
      - assert: Кнопка "Готово" должна отображаться
      - do: Нажать на кнопку "Сбросить"
      - assert: Кнопка "Готово" должна отображаться

    Нажатие по кнокпе "Готово", должно применять значения фильтра и возвращать к списку фильтров:
      - do: Ввести в первое поле "4"
      - do: Нажать на кнопку "Готово"
      - assert: Должены быть виден список фильтров
      - assert: Выбранное значение должно отображаться напротив названия фильтра

    Нажатие по кнопке "Назад"(←), должно возвращать к списку фильтров и сбрасывать не примененные изменения:
      - do: Ввести в первое поле "4"
      - do: Нажать на кнопку "Назад"(←)
      - assert: Должены быть виден список фильтров
      - assert: Напротив названия фильтра не должно быть выбранного значения
      - do: кликнуть на строку с надписью "Диагональ экрана (точно)"
      - assert: Значение у первого поля должно быть пустым

  Enum фильтр:
    beforeEach:
      - do: Открыть ссылку https://yandex.ru/turbo?stub=berufilters/default.json
      - do: Кликнуть на строку с надписью "Производитель"
      - assert: Должен открыться режим редактирования фильтра
      - assert: 'Текст счетчика должен быть "Выбрано: 0"'
      - assert: Кнопка "Cбросить" не должна отображаться
      - assert: Кнопка "Закрыть"(✕) не должна отображаться
      - assert: Кнопка "Готово" не должна отображаться
      - assert: Должна отображатсья кнопка "Назад"(←)

    Внешний вид фильтра по умолчанию:
      - assert: Должны быть виден Enum фильтр
      - screenshot: Внешний вид соответствует скриншоту [enum-filter]

    Внешний вид фильтра с выбранными значениями:
      - do: Выбрать первый чекбокс
      - do: Выбрать второй чекбокс
      - assert: Должны быть виден Enum фильтр с выбранными значениями
      - screenshot: Внешний вид соответствует скриншоту [enum-filter-filled]

    Внешний вид фильтра в раскрытом состоянии:
      - do: Нажать на кнопку "Еще"
      - assert: Список должен развернуться и показать оставшиеся значения
      - assert: Кнопка "Еще" не должна отображаться
      - screenshot: Внешний вид соответствует скриншоту [enum-filter-expanded]

    При изменении значений фильтра, счетчик изменений должен показывать кол-во измененных значений:
      - do: Выбрать первый чекбокс
      - assert: 'Текст счетчика должен быть "Выбрано: 1"'
      - do: Выбрать второй чекбокс
      - assert: 'Текст счетчика должен быть "Выбрано: 2"'
      - do: Убрать выбор с первого чекбокса
      - assert: 'Текст счетчика должен быть "Выбрано: 1"'
      - do: Убрать выбор со второго чекбокса
      - assert: 'Текст счетчика должен быть "Выбрано: 0"'

    Кнопка "Cбросить" должна отображаться, если есть выбранные значение, в противном случае скрываться:
      - do: Выбрать первый чекбокс
      - assert: Кнопка "Сбросить" должна отображаться
      - do: Убрать выбор с первого чекбокса
      - assert: Кнопка "Сбросить" не должна отображаться

    Нажатие по кнопке "Cбросить" должно сбрасывать все выбранные значения и скрывать саму кнопку:
      - do: Выбрать первый чекбокс
      - do: Выбрать второй чекбокс
      - do: Нажать на кнопку "Сбросить"
      - assert: Значения обоих выбранных чекбоксов должны сброситься
      - assert: Кнопка "Сбросить" не должна отображаться

    Кнопка "Готово" должна всегда отображаться, если значение фильтра изменилось:
      - do: Выбрать первый чекбокс
      - assert: Кнопка "Готово" должна отображаться
      - do: Убрать выбор с первого чекбокса
      - assert: Кнопка "Готово" должна отображаться

    Нажатие по кнокпе "Готово", должно применять значения фильтра и возвращать к списку фильтров:
      - do: Выбрать первый чекбокс
      - do: Нажать на кнопку "Готово"
      - assert: Должены быть виден список фильтров
      - assert: Выбранное значение должно отображаться напротив названия фильтра

    Нажатие по кнопке "Назад"(←), должно возвращать к списку фильтров и сбрасывать не примененные изменения:
      - do: Выбрать первый чекбокс
      - do: Нажать на кнопку "Назад"(←)
      - assert: Должены быть виден список фильтров
      - assert: Напротив названия фильтра не должно быть выбранного значения

  Фильтр выбора цвета(enum подобный):
    beforeEach:
      - do: Открыть ссылку https://yandex.ru/turbo?stub=berufilters/default.json
      - do: Кликнуть на строку с надписью "Цвет"
      - assert: Должен открыться режим редактирования фильтра
      - assert: 'Текст счетчика должен быть "Выбрано: 0"'
      - assert: Кнопка "Cбросить" не должна отображаться
      - assert: Кнопка "Закрыть"(✕) не должна отображаться
      - assert: Кнопка "Готово" не должна отображаться
      - assert: Должна отображатсья кнопка "Назад"(←)

    Внешний вид фильтра по умолчанию:
      - assert: Должны быть виден список цветов
      - screenshot: Внешний вид соответствует скриншоту [color-filter]

    Внешний вид фильтра с выбранными значениями:
      - do: Выбрать первый цвет
      - do: Выбрать второй цвет
      - assert: Должны быть виден фильтр с выбранными значениями
      - screenshot: Внешний вид соответствует скриншоту [color-filter-filled]

  Radio фильтр:
    beforeEach:
      - do: Открыть ссылку https://yandex.ru/turbo?stub=berufilters/default.json
      - do: Кликнуть на строку с надписью "Шипы"
      - assert: Должен открыться режим редактирования фильтра
      - assert: Cчетчик не должен отображаться
      - assert: Кнопка "Закрыть"(✕) не должна отображаться
      - assert: Кнопка "Готово" не должна отображаться
      - assert: Кнопка "Cбросить" не должна отображаться
      - assert: Должна отображатсья кнопка "Назад"(←)

    Внешний вид фильтра по умолчанию:
      - assert: Должны быть виден Radio фильтр
      - screenshot: Внешний вид соответствует скриншоту [radio-filter]

    Внешний вид фильтра с выбранными значением отличным от дефолтного:
      - do: Нажать на первую радио кнопку
      - assert: Должны быть виден Radio фильтр с выбранным значением
      - screenshot: Внешний вид соответствует скриншоту [radio-filter-filled]

    При изменении значения фильтра, счетчик и кнопка "Cбросить" не должны отображаться:
      - do: Нажать на первую радио кнопку
      - assert: Кнопка "Cбросить" не должна отображаться
      - assert: Cчетчик не должен отображаться

    Кнопка "Готово" должна отображаться, если значение фильтра изменилось:
      - do: Нажать на первую радио кнопку
      - assert: Кнопка "Готово" должна отображаться

    Нажатие по кнокпе "Готово", должно применять значение фильтра и возвращать к списку фильтров:
      - do: Нажать на первую радио кнопку
      - assert: Должены быть виден список фильтров
      - assert: Выбранное значение должно отображаться напротив названия фильтра

    Нажатие по кнопке "Назад"(←), должно возвращать к списку фильтров и сбрасывать не примененное изменение:
      - do: Нажать на первую радио кнопку
      - do: Нажать на кнопку "Назад"(←)
      - assert: Должены быть виден список фильтров
      - assert: Напротив названия фильтра должно быть значение "Не важно"

  Boolean фильтр:
    beforeEach:
      - do: Открыть ссылку https://yandex.ru/turbo?stub=berufilters/default.json

    При клике по превью фильтра не происходит переход к редактированию:
      - do: Кликнуть на строку с надписью "NFC"
      - assert: Никаких изменений на странице не должно произойти

    Внешний вид фильтра по умолчанию:
      - assert: Видно название фильтра, а напротив тумблер смены значения
      - screenshot: Внешний вид соответствует скриншоту [boolean-filter]

    Внешний вид фильтра в активном состоянии:
      - do: Нажать на тумблер напротив названия "NFC"
      - assert: Тумблер должен изменить состояние
      - screenshot: Внешний вид соответствует скриншоту [boolean-filter-selected]

  Превью фильтров:
    beforeEach:
      - do: Открыть ссылку https://yandex.ru/turbo?stub=berufilters/default.json
      - assert: Cчетчик не должен отображаться
      - assert: Кнопка "Закрыть"(✕) должна отображаться
      - assert: Кнопка "Готово" не должна отображаться
      - assert: Кнопка "Cбросить" не должна отображаться
      - assert: Кнопка "Назад"(←) не должна отображаться

    Внешний вид по умолчанию:
      - assert: Отображается список фильтров
      - screenshot: Внешний вид соответствует скриншоту [preview-default]

    Кнопка "Закрыть"(✕) должна быть кликабельна и вести на страницу выдачи со всеми пришедшими параметрами:
      - assert: Ссылка должна быть кликабельна и вести в этом же окне на "/turbo?text=https://m.beru.ru/catalog/123/list?hid=444&anyParam=1&anyParam=2"

  Превью фильтров(c предвыбранными значениями):
    beforeEach:
      - do: Открыть ссылку https://yandex.ru/turbo?stub=berufilters/all-selected.json
      - assert: 'Текст счетчика должен быть "Выбрано: 6"'
      - assert: Кнопка "Закрыть"(✕) должна отображаться
      - assert: Кнопка "Готово" не должна отображаться
      - assert: Кнопка "Cбросить" должна отображаться
      - assert: Кнопка "Назад"(←) не должна отображаться

    Внешний вид cо всеми выбранными значениями:
      - assert: Должен быть виден список фильтров со всеми выбранными значениями
      - screenshot: Внешний вид соответствует скриншоту [preview-all-selected]

    При клике по кнопке "Сбросить", должны сбрасываться все значения фильтров:
      - do: Нажать на кнопку "Cбросить"
      - assert: Кнопка "Закрыть"(✕) должна отображаться
      - assert: Кнопка "Готово" должна отображаться
      - assert: Кнопка "Cбросить" не должна отображаться
      - assert: Кнопка "Назад"(←) не должна отображаться
      - assert: Cчетчик не должен отображаться
      - assert: Выбранное значение у Radio фильтра(NFC) должно быть "Не важно"
      - screenshot: Внешний вид соответствует скриншоту [dropped-values]

files:
  - platform/components/BeruFilters/BeruFilters.tests/BeruFilters@phone.hermione.js

v-team: Beru

manager: seoshnik

tlds: none
