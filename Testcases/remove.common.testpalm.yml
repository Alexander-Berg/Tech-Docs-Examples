feature: Пункт Удалить

specs:

    beforeEach:
        - do: Перейти по ссылке "https://passport.yandex.ru" и авторизоваться.
        - assert: Авторизация прошла успешно.
        - do: В соседней вкладке открыть мессенджер.
        - assert: Открылся список чатов.
        - do: В списке чатов открыть любой приватный чат/групповой чат, который соответствует описанию из description.
        - assert: Чат открыт.

    Есть пункт для своего сообщения с текстом[manual]:
        - tags: [advanced_smoke, b2b]
        - automation: MSSNGRFRONT-5024
        - description: |
              В истории чата есть собственное текстовое сообщение (если такого сообщения нет - отправить в чат любое текстовое сообщение).
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом нужно будет авторизовываться в другом браузере.
              Пользователь А - основной аккаунт, пользователь Б - вспомогательный, между пользователями А и Б есть общий групповой чат.
              Изначально авторизованы пользователем А.
        - do: Тапнуть/кликнуть ПКМ по области своего текстового сообщения из description.
        - assert: Открылось контекстное меню.
        - do: В контекстном меню выберите "Удалить" и подтвердить удаление.
        - assert: В окне чата появляется надпись "Сообщение было удалено".
        - do: Открыть список чатов в браузере, где авторизован пользователь Б.
        - assert: Открывается окно списка чатов.
        - do: Открыть тот же чат.
        - assert: Чат открыт.
        - do: Посмотреть на сообщение, которое удаляли.
        - assert: В окне чата есть надпись "Сообщение было удалено".

    Есть пункт для своего сообщения с ссылкой[manual]:
        - automation: MSSNGRFRONT-5024
        - description: |
              В истории чата есть собственное сообщение с ссылкой (если такого сообщения нет - отправить в чат любую ссылку).
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом нужно будет авторизовываться в другом браузере.
              Пользователь А - основной аккаунт, пользователеь Б - вспомогательный, между пользователями А и Б есть общий групповой чат.
              Изначально авторизованы пользователем А.
        - do: Тапнуть/кликнуть ПКМ по баллуну со своим сообщением в чате из description.
        - assert: Появляется контекстное меню.
        - do: В контекстном меню выберите "Удалить" и подтвердить удаление.
        - assert: В окне чата появляется надпись "Сообщение было удалено".
        - do: Открыть список чатов в браузере, где авторизован пользователь Б
        - assert: Открывается окно списка чатов.
        - do: Открыть тот же чат.
        - assert: Чат открыт.
        - do: Посмотреть на сообщение, которое удаляли.
        - assert: Сообщение удалено.

    Есть пункт для своего сообщения с эмодзи[manual]:
        - automation: MSSNGRFRONT-5024
        - description: |
              В истории чата есть собственное сообщение с эмодзи (если такого сообщения нет - отправить сообщение с эмодзи в чат).
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом нужно будет авторизовываться в другом браузере.
              Пользователь А - основной аккаунт, пользователеь Б - вспомогательный, между пользователями А и Б есть общий групповой чат.
              Изначально авторизованы пользователем А.
        - do: Тапнуть/кликнуть ПКМ по области своего сообщения в чате из description.
        - assert: Появляется контекстное меню.
        - do: В контекстном меню выберите "Удалить" и подтвердить удаление.
        - assert: В окне чата появляется надпись "Сообщение было удалено".
        - do: Открыть список чата в браузере, где авторизован пользователь Б.
        - assert: Открывается окно списка чатов.
        - do: Открыть тот же чат.
        - assert: Чат открыт.
        - do: Посмотреть на сообщение, которое удаляли.
        - assert: Сообщение удалено.

    Есть пункт для своего сообщения со стикером[manual]:
        - automation: MSSNGRFRONT-5024
        - description: |
              В истории чата есть собственное сообщение со стикером (если такого сообщения нет - отправить стикер в чат).
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом нужно будет авторизовываться в другом браузере.
              Пользователь А - основной аккаунт, пользователеь Б - вспомогательный, между пользователями А и Б есть общий групповой чат.
              Изначально авторизованы пользователем А.
        - do: Тапнуть/кликнуть ПКМ по области своего сообщения в чате из description.
        - assert: Появляется контекстное меню.
        - do: В контекстном меню выберите "Удалить" и подтвердить удаление.
        - assert: В окне чата появляется надпись "Сообщение было удалено".
        - do: Открыть список чатов в браузере, где авторизован пользователь Б.
        - assert: Открывается окно списка чатов.
        - do: Открыть тот же чат.
        - assert: Чат открыт.
        - do: Посмотреть на сообщение, которое удаляли.
        - assert: Сообщение удалено.

    Есть пункт для своего сообщения с изображением[manual]:
        - automation: MSSNGRFRONT-5024
        - description: |
              В истории чата есть собственное сообщение с изображением (если такого сообщения нет - отправить любое изображение в чат).
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом нужно будет авторизовываться в этом же браузере.
              Пользователь А - основной аккаунт, пользователеь Б - вспомогательный, между пользователями А и Б есть общий групповой чат.
              Изначально авторизованы пользователем А.
        - do: Тапнуть/кликнуть ПКМ по области своего сообщения в чате из description.
        - assert: появляется контекстное меню.
        - do: В контекстном меню выберите "Удалить" и подтвердить удаление.
        - assert: в окне чата появляется надпись "Сообщение было удалено"
        - do: Открыть список чатов в браузере, где авторизован пользователь Б.
        - assert: открывается окно списка чатов.
        - do: Открыть тот же чат.
        - assert: Чат открыт.
        - do: Посмотреть на сообщение, которое удаляли.
        - assert: Сообщение удалено.

    Есть пункт для своего сообщения с файлом[manual]:
        - automation: MSSNGRFRONT-5024
        - description: |
              В истории чата есть собственное сообщение с файлом (если такого сообщения нет - отправить любой файл в чат).
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом нужно будет авторизовываться в другом браузере.
              Пользователь А - основной аккаунт, пользователеь Б - вспомогательный, между пользователями А и Б есть общий групповой чат.
              Изначально авторизованы пользователем А.
        - do: Тапнуть/кликнуть ПКМ по области своего сообщения в чате из description.
        - assert: Появляется контекстное меню.
        - do: В контекстном меню выберите "Удалить" и подтвердить удаление.
        - assert: В окне чата появляется надпись "Сообщение было удалено".
        - do: Открыть список чатов в браузере, где авторизован пользователь Б.
        - assert: Открывается окно списка чатов.
        - do: Открыть тот же чат.
        - assert: Чат открыт.
        - do: Посмотреть на сообщение, которое удаляли.
        - assert: Сообщение удалено.

    Есть пункт для своего сообщения с Reply-ем[manual]:
        - automation: MSSNGRFRONT-5024
        - description: |
              В истории чата есть собственный reply (если такого сообщения нет - ответить на любое свое сообщение).
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом нужно будет авторизовываться в другом браузере.
              Пользователь А - основной аккаунт, пользователеь Б - вспомогательный, между пользователями А и Б есть общий групповой чат.
              Изначально авторизованы пользователем А.
        - do: Тапнуть/кликнуть ПКМ по подписи к собственному reply.
        - assert: Контекстное меню появляется.
        - do: В контекстном меню выберите "Удалить" и подтвердить удаление.
        - assert: В окне чата появляется надпись "Сообщение было удалено".
        - do: Открыть список чатов в браузере, где авторизован пользователь Б.
        - assert: Открывается окно списка чатов.
        - do: Открыть тот же чат.
        - assert: Чат открыт.
        - do: Посмотреть на сообщение, которое удаляли.
        - assert: Сообщение удалено.

    Есть пункт для своего сообщения с Forward-ом[manual]:
        - automation: MSSNGRFRONT-5024
        - description: |
              В истории чата есть собственное пересланное сообщение (если такого сообщения нет - переслать в чат любое сообщение).
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом нужно будет авторизовываться в другом браузере.
              Пользователь А - основной аккаунт, пользователеь Б - вспомогательный, между пользователями А и Б есть общий групповой чат.
              Изначально авторизованы пользователем А.
        - do: Тапнуть/кликнуть ПКМ по области своего сообщения в чате из description.
        - assert: Контекстное меню появляется.
        - do: В контекстном меню выберите "Удалить" и подтвердить удаление.
        - assert: В окне чата появляется надпись "Сообщение было удалено".
        - do: Открыть браузер, где авторизован пользователь Б.
        - do: Открыть список чатов.
        - assert: Открывается окно списка чатов.
        - do: Открыть тот же чат.
        - assert: Чат открыт.
        - do: Посмотреть на сообщение, которое удаляли.
        - assert: Сообщение удалено.

    Есть пункт для сообщения собеседника (если пользователь является администратором)[manual]:
        - automation: MSSNGRFRONT-5024
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом нужно будет авторизовываться в другом браузере.
              Пользователь А (администратор)- основной аккаунт, пользователеь Б - вспомогательный, между пользователями А и Б есть общий групповой чат.
              В истории чата есть любое сообщение собеседника (если такого сообщения нет - отправить пользователем Б в чат любое сообщение).
              Изначально авторизованы пользователем А.
        - do: Тапнуть/кликнуть ПКМ по области сообщения собеседника в чате из description.
        - assert: Контекстное меню появляется.
        - do: В контекстном меню выберите "Удалить" и подтвердить удаление.
        - assert: В окне чата появляется надпись "Сообщение было удалено".
        - do: Открыть список чатов в браузере, где авторизован пользователь Б.
        - assert: Открывается окно списка чатов.
        - do: Открыть тот же чат.
        - assert: Чат открыт.
        - do: Посмотреть на сообщение, которое удаляли.
        - assert: Сообщение удалено.

    Нельзя удалить сообщение собеседника в приватных чатах и групповых (если пользователь не является администратором)[manual]:
        - tags: [advanced_smoke, b2b]
        - automation: MSSNGRFRONT-5024
        - description: |
              Пользователь не является администратором
              В истории чата есть текстовое сообщение, сообщение с изображением, с видео, с файлом, с ссылкой, с эмоджи, со стикером, с forward’ом, c reply от другого пользователя (если такого сообщения нет - отправить другим пользователем в чат все типы сообщений).
        - do: Тапнуть/кликнуть ПКМ по области текстового сообщения из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Удалить".
        - do: Тапнуть/кликнуть ПКМ по области сообщения с изображением из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Удалить".
        - do: Тапнуть/кликнуть ПКМ по области сообщения с файлом из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Удалить".
        - do: Тапнуть/кликнуть ПКМ по области сообщения с ссылкой из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Удалить".
        - do: Тапнуть/кликнуть ПКМ по области сообщения с эмоджи из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Удалить".
        - do: Тапнуть/кликнуть ПКМ по области сообщения со стикером из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Удалить".
        - do: Тапнуть/кликнуть ПКМ по области сообщения с forward’ом из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Удалить".
        - do: Тапнуть/кликнуть ПКМ по области сообщения с reply из description.
        - assert: |
              Открылось контекстное меню.
              В контекстном меню отсутствует пункт "Удалить".

    Отмена удаления сообщения с помощью клавиши Esc[manual]:
        - automation: 
        - description: У авторизованного пользователя в списке чатов есть привватный / групповой чат
        - do: Отправить в чат любое текстовое сообщение
        - assert: Сообщение было отправлено
        - do: Тапнуть/кликнуть ПКМ по области своего текстового сообщения
        - assert: Открылось контекстное меню
        - do: В контекстном меню выберите "Удалить"
        - assert: Открылось модальное окно подтверждения удаления сообщения
        - do: Отменить удаление, нажав на клавиатуре на клавишу Esc
        - assert: |
              Закрылось модальное окно
              Отправленное сообщение осталось в чате

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
