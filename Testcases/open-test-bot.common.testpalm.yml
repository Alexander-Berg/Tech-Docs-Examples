feature: Проверка открытия тестового сапортового бота по ссылке

specs:
  beforeEach:
    - do: Открыть мессенджер и тапнуть по иконке логотипа мессенджера
    - accert: Открыт главный экран приложения, ни один чат не открыт


  Открытие чата с ботом по ссылке[manual]:
    - automation:
    - do: Нажать в адресную строку браузера, после "chat?lr=213#/" добавить "user/3dfa1506-6b07-9a8b-4cfd-0e94cf3b2977". (Должно получиться https://yandex.ru/chat?lr=213#/user/3dfa1506-6b07-9a8b-4cfd-0e94cf3b2977 ) 
    - assert: |
          Открылся чат с ботом
          При входе в чат отправилось сообщение от бота
          Чат с ботом отображается в списке чатов
    - screenshot: пример сообщения [https://jing.yandex-team.ru/files/akudenko/Снимок%20экрана%202022-04-29%20в%2017.36.20.png]
    - do: перейти в другой любой чат и вернуться в чат с ботом через список чатов 
    - accert: пришло еще одно сообщение от бота
  

  Открытие чата с сапортовым ботом через контекст[manual]:
    - automation:
    - do: Нажать в адресную строку браузера, после "chat?lr=213" добавить "&context=%7B%22entrypoint%22%3A%22yatv%22%2C%22data_id%22%3A86376543%7D#/user/3dfa1506-6b07-9a8b-4cfd-0e94cf3b2977". Убрать в конце ссылки символы "#/". (Должно получиться https://yandex.ru/chat?lr=213&context=%7B%22entrypoint%22%3A%22yatv%22%2C%22data_id%22%3A86376543%7D#/user/3dfa1506-6b07-9a8b-4cfd-0e94cf3b2977 )
    - assert: |
          Чат открыт
          В чат приходит сообщение от бота
          В сообщении бота появляется информация о контексте
    - screenshot: пример сообщения [https://jing.yandex-team.ru/files/akudenko/Снимок%20экрана%202022-04-29%20в%2017.36.32.png] 
    - do: Отправить в чат "?" и выбрать любую команду из списка, например playload
    - accert: Следующий ответ бота будет содержать тот же context
    - screenshot: пример сообщения [https://jing.yandex-team.ru/files/akudenko/Снимок%20экрана%202022-04-29%20в%2018.38.25.png]


  Открытие чата с сапортовым ботом с текстом в поле ввода:
    - tags: [advanced_smoke]
    - do: Нажать в адресную строку браузера. После "chat?lr=213" вставить "&text=HelloText#/user/3dfa1506-6b07-9a8b-4cfd-0e94cf3b2977". Убрать в конце ссылки символы "#/" (Должно получиться https://yandex.ru/chat?lr=213&text=HelloText#/user/3dfa1506-6b07-9a8b-4cfd-0e94cf3b2977 )
    - assert: |
          Чат открыт
          В чат приходит сообщение от бота
          В поле для ввода текста появляется текст «HelloText»
    - screenshot: пример сообщения [https://jing.yandex-team.ru/files/akudenko/Снимок%20экрана%202022-04-29%20в%2017.40.43.png]

files:
    - tests/hermione/suites/messenger/test-support-bot/open-test-bot.common.hermione.ts

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team