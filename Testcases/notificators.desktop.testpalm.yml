feature: Нотификаторы

import-steps:
    - tests/hermione/suites/desktop/shared-steps/backoffice.testpalm.steps.yml

tlds: ru

specs:
    beforeEach:
        - attach: Войти в админку

    Ховер иконки Диалогов:
        - automation: YDO-6833
        - do: нажать на кнопку "Диалоги" в левом блоке страницы
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/tony-prots/2019-05-22_14-48-33.png]
        - assert: после перехода на страницу Диалогов иконка Диалогов стала светлой

    Ховер иконки Очереди:
        - automation: YDO-6833
        - do: нажать на кнопку "Очередь" в левом блоке страницы
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/tony-prots/2019-05-22_14-49-14.png]
        - assert: после перехода на страницу Очереди иконка Очереди стала светлой

    Ховер иконки Архива:
        - automation: YDO-6833
        - do: нажать на кнопку "Архив" в левом блоке страницы
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/tony-prots/2019-05-22_14-49-30.png]
        - assert: после перехода на страницу Архива иконка Архива стала светлой

    Ховер иконки Спама:
        - automation: YDO-6833
        - do: нажать на кнопку "Спам" в левом блоке страницы
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/tony-prots/2019-05-22_14-49-56.png]
        - assert: после перехода на страницу Спама иконка Спама стала светлой

    Нотификатор в Очереди +1:
        - automation: YDO-6833
        - tags: smoke
        - attach: Открытие Очереди
        - screenshot: пример внешнего вида нотификатора [https://jing.yandex-team.ru/files/tony-prots/Yandeks.Chaty_2019-05-22_14-58-25.png]
        - assert: нотификатор у иконки Очереди в левом блоке вырос на 1 значение

    Нотификатор в Очереди -1:
        - automation: YDO-6833
        - attach: Открытие Очереди
        - do: нажать на диалог в Очереди
        - do: применить к нему любое действие (Принять, Пометить как решенный, Пометить как Спам)
        - screenshot: пример внешнего вида нотификатора [https://jing.yandex-team.ru/files/tony-prots/Yandeks.Chaty_2019-05-22_14-58-25.png]
        - assert: нотификатор Очереди уменьшился на одно значение

    Уведомления в Диалогах:
        - automation: YDO-6833
        - tags: smoke
        - attach: Открытие Диалогов
        - do: перейти по ссылке https://yandex.ru/chat?build=chamb&guid=7162de39-4140-455f-9c2a-5966b6d4b4b8 в режиме инкогнито
        - assert: открылся диалог с организацией
        - do: написать короткое сообщение организации
        - do: отправить сообщение
        - do: не закрывая открытую инкогнито-вкладку, перейти по ссылке %Ссылка%
        - assert: открылась админка на вкладке Очередь
        - do: кликнуть на ранее созданный чат
        - do: нажать "Принять"
        - assert: произошел переход на страницу "Диалоги"
        - do: перейти в любой другой раздел админки, например, в Спам
        - do: перейти в ранее открытую вкладку диалога с организацией в инкогнито
        - do: отправить любое сообщение в диалог
        - do: отправить второй любое сообщение в диалог
        - do: вернуться во вкладку с админкой
        - screenshot: пример внешнего вида нотификатора [https://jing.yandex-team.ru/files/tony-prots/Yandeks.Chaty_2019-05-22_14-58-25.png]
        - assert: нотификатор у иконки Очереди в левом блоке вырос на 1 значение
        - do: перейти в раздел Диалоги
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/tony-prots/2019-05-22_15-45-22.png]
        - assert: |
              у иконки Диалогов нотификатор отражает количество непрочитанных диалогов, а не количество непрочитанных сообщений в них
              в списке чатов нотификатор отражает количество непрочитанных сообщений в диалоге (2)
        - do: нажать на диалог с нотификатором
        - assert: |
              у иконки Диалогов нотификатор уменьшился на 1
              в списке чатов нотификатор исчез

    Уведомления в Спаме:
        - automation: YDO-6833
        - tags: smoke
        - attach: Открытие Диалогов
        - do: перейти по ссылке https://yandex.ru/chat?build=chamb&guid=7162de39-4140-455f-9c2a-5966b6d4b4b8 в режиме инкогнито
        - assert: открылся диалог с организацией
        - do: написать короткое сообщение организации
        - do: отправить сообщение
        - do: не закрывая открытую инкогнито-вкладку, перейти по ссылке %Ссылка%
        - assert: открылась админка на вкладке Очередь
        - do: кликнуть на ранее созданный чат
        - do: нажать "Пометить как спам"
        - assert: диалог исчез из Очереди
        - do: перейти в ранее открытую вкладку диалога с организацией в инкогнито
        - do: отправить любое сообщение в диалог
        - do: отправить второй любое сообщение в диалог
        - do: вернуться во вкладку с админкой
        - assert: |
              диалог не появился в Очереди
              у Спама не появился нотификатор непрочитанных

files: []

v-team: Uslugi

tags:
    - no_assessors
    - skip_manual_check
    - floyd
