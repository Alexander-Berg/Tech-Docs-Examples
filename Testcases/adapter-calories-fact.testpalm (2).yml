feature: Факт
type: Калории

specs:
  С картинкой:
    - do: получить выдачу Поиска по запросу 'хурма калорийность' _ALTERNATIVE_SEARCH_QUERIES_
    - screenshot: на первой позиции выдачи есть Фактовый ответ с картинкой [image]
    - assertMetrics: '*'
    - tech: проверить счетчик на показ селекта
    - do: |
        запомнить текущее значение калорий в Фактовом ответе
        выбрать в селекте другое значение
    - tech: сработал динамический счетчик
    - assert: количество калорий изменилось
    - screenshot: количество калорий изменилось [image-after-select]
    - tech: проверить счетчик в картинке
    - do: кликнуть на картинку в Фактовом ответе
    - assert: в новой вкладке открылись Я.Картинки по искомому запросу (в поисковом приложении в той же вкладке)
    - tech: проверить счетчик в ссылке 'Источник данных'
    - do: кликнуть на ссылку 'Источник данных'
    - assert: |
        в новой вкладке открылся сайт-источник данных на странице запрашиваемого продукта
        ссылка 'Источник данных' после клика не перекрасилась
    - assertMetrics: '*'
  Без картинки:
    - params:
        foreverdata: '3936697568'
    - do: получить выдачу Поиска по запросу 'foreverdata'
    - screenshot: на первой позиции выдачи есть Фактовый ответ без картинки [without-image]
    - assertMetrics: '*'
  С единственным объемом:
    - params:
        foreverdata: '4030436693'
    - do: получить выдачу Поиска по запросу 'foreverdata'
    - screenshot: на первой позиции выдачи есть Фактовый ответ с неактивным селектом [one-select]
    - assertMetrics: '*'

specs-integration:
  Проверка показа блоков:
    - do: получить выдачу Поиска по запросу 'хурма калорийность' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: на первой позиции выдачи есть Фактовый ответ
    - counter: /$page/$main/$result[@wizard_name="calories_fact"]

files:
  - features/touch-phone/adapter-calories-fact/adapter-calories-fact.hermione.js
  - features/adapter-calories-fact/adapter-calories-fact@common.hermione.e2e.js

counter: /$page/$main/$result[@wizard_name="calories_fact"]/thumb

v-team: Facts

tlds:
  - ru
  - by
  - ua
  - kz
  - uz
  - com.tr
  - com
