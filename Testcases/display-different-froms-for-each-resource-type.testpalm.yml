feature: Ресурсы
type: Страница ресурсов сервиса

aliases:
  - &query
    - do: залогиниться под пользователем robot-abc-002
    - do: открыть вкладку "Ресурсы" на странице сервиса "Автотест фронтенда для сервиса с уникальным названием24" (/services/frontend-test_service-with-parent24/resources/)
    - do: нажать кнопку "Запросить ресурс"
    - assert: |
       появилась всплывающая форма для запроса ресурса,
       в форме в поле "Для какого сервиса" автоматически подставился сервис "Автотест фронтенда для сервиса с уникальным названием24"
    - screenshot: всплывающая форма для запроса ресурса [https://jing.yandex-team.ru/files/sergeyzxc/uhura_2021-01-13T13%3A28%3A50.583268.png]
    - do: кликнуть по полю тип ресурса ("Выберите тип ресурса из категории Все категории")
    - assert: появился выпадающий список из нескольких типов ресурсов
  - &query2
    - do: залогиниться под пользователем robot-abc-002
    - do: открыть вкладку "Ресурсы" на странице сервиса "Автотест фронтенда для сервиса с уникальным названием24"
    - do: нажать кнопку "Запросить ресурс"
    - assert: появилась всплывающая форма для запроса ресурса
    - screenshot: всплывающая форма для запроса ресурса [https://jing.yandex-team.ru/files/sergeyzxc/uhura_2021-01-13T13%3A28%3A50.583268.png]

specs:
 Отображение форм при запросе ресурсов:

  Положительные:
   1. Запрос ресурса типа "Баланс — Клиент Баланса":
    - automation: ABC-10135
    - *query
    - do: напечатать в поле "Клиент"
    - assert: появился выпадающий список из нескольких типов ресурсов, содержащих в названии слово "клиент"
    - do: выбрать ресурс "Баланс — Клиент Баланса"
    - assert: |
            ресурс выбрался,
            отобразилась подсказка "Кто может запрашивать этот ресурс?"
            отобразилось поле "client_id"
            отобразилась кнопка "Отправить"
    - do: ввести в поле "client_id" значение "23"
    - do: нажать кнопку "Отправить"
    - assert: появилось сообщение "Спасибо! Ваше сообщение отправлено."
    - do: закрыть попап

   2. Запрос ресурса типа "Метрика — Метрика CounterId":
    - automation: ABC-10135
    - *query
    - do: напечатать в поле "Метрика"
    - assert: появился выпадающий список из одного типа ресурсов, содержащий в названии слово "Метрика"
    - do: выбрать ресурс "Метрика — Метрика CounterId"
    - assert: |
            ресурс выбрался,
            отобразилась подсказка "Кто может запрашивать этот ресурс?"
            отобразилось поле "CounterId"
            отобразилась кнопка "Отправить"
    - do: ввести в поле "CounterId" значение "24"
    - do: нажать кнопку "Отправить"
    - assert: появилось сообщение "Спасибо! Ваше сообщение отправлено."
    - do: закрыть попап

   4. Запрос ресурса типа "Спамооборона — User Activity API":
    - automation: ABC-10135
    - *query
    - do: выбрать ресурс "Спамооборона — User Activity API"
    - assert: |
            ресурс выбрался,
            отобразилась подсказка "Кто может запрашивать этот ресурс?"
            отобразилось поле "Скоупы"
            отобразился чек бокс "read – Чтение данных"
            отобразилась кнопка "Отправить"
    - do: поставить галочку напротив чек бокса "read – Чтение данных"
    - do: нажать кнопку "Отправить"
    - assert: появилось сообщение "Ресурс запрошен"
    - do: закрыть попап
 
   5. Запрос ресурса типа "YT — Аккаунт":
    - automation: ABC-10135
    - *query
    - do: выбрать ресурс "YT — Аккаунт"
    - assert: |
            ресурс выбрался,
            отобразилась подсказка "Кто может запрашивать этот ресурс?"
            отобразился переключатель "Запросить/Привязать", выбрано по умолчанию "Запросить"
            отобразилось поле "Название" с подсказкой под полем ввода "Укажите латиницей название"
            отобразился чек бокс "Нужно ограничить доступ к данным"
            отобразился чек бокс "Нужен гарантированный вычислительный пул "
            отобразился чек бокс "Важно расположение YT-кластера (ДЦ) в связи с сетевой топологией рабочей схемы"
            отобразилось поле "Входные данные для обработки и расчетов"
            отобразилось поле с выпадающим списком "Кластер"
            отобразилось поле "Квота"
            отобразилось поле "Важный комментарий"
            отобразилась кнопка "Отправить"
    - do: ввести в поле "Название" значение "abc"
    - do: выбрать в выпадающем списке "Кластер" значение "Hahn"
    - do: нажать кнопку "Отправить"
    - assert: появилось сообщение "Спасибо, заявка отправлена в st/TEST! В скором времени, вы получите уведомление."
    - do: закрыть попап

   6. Запрос ресурса типа "Стафф — Робот":
    - automation: ABC-10135
    - *query
    - do: напечатать в поле "робот"
    - assert: появился выпадающий список из одного типа ресурсов, содержащий в названии слово "робот"
    - do: выбрать ресурс "Стафф — Робот"
    - assert: |
            ресурс выбрался,
            отобразилась подсказка "Кто может запрашивать этот ресурс?"
            отобразился переключатель "Запросить/Привязать", выбрано по умолчанию "Запросить"
            отобразилось поле "Логин робота"
            отобразилась кнопка "Отправить"
    - do: ввести в поле "Логин робота" значение "robot-internal-1"
    - do: нажать кнопку "Отправить"
    - assert: появилось сообщение "Ресурс запрошен"
    - do: закрыть попап
   
   7. Запрос ресурса типа "Вьюверы Поиска — Вьювер":
    - automation: ABC-10135
    - *query2
    - do: выбрать категорию "Безопасность" в листовом списке "Выберите тип ресурса из категории"
    - do: кликнуть по полю тип ресурса ("Выберите тип ресурса из категории Безопасность")    
    - assert: появился выпадающий список из нескольких типов ресурсов
    - do: выбрать ресурс "Вьюверы Поиска — Вьювер"
    - assert: |
            ресурс выбрался,
            отобразилась подсказка "Кто может запрашивать этот ресурс?"
            отобразилось поле "Название"
            отобразилось поле "Зона"
            отобразилось поле "Бекэнды"
            отобразилось поле "Ответственные"
            отобразилось поле "Комментарий"
            отобразилась кнопка "Отправить"
    - do: ввести в поле "Название" значение "abc"
    - do: выбрать в поле "Зона" значение "viewer.yandex-team.ru"
    - do: ввести в поле "Бекэнды" значение "192"
    - do: ввести в поле "Ответственные" значение "robot-abc"
    - assert: отобразился выпадающий список из нескольких логинов
    - do: выбрать "full-access abc-robot (robot-abc-002)"
    - do: нажать кнопку "Отправить" 
    - assert: появилось сообщение "Спасибо за ответ на опрос"
    - do: закрыть попап
   
   8. Запрос ресурса типа "Sentry —  Организация":
    - automation: ABC-10135
    - *query2
    - do: выбрать категорию "Аккаунты" в листовом списке "Выберите тип ресурса из категории"
    - do: кликнуть по полю тип ресурса ("Выберите тип ресурса из категории Аккаунты")    
    - assert: появился выпадающий список из нескольких типов ресурсов
    - do: выбрать ресурс "Sentry —  Организация"
    - assert: |
            ресурс выбрался,
            отобразилась подсказка "Кто может запрашивать этот ресурс?"
            отобразилось поле "Название организации"
            отобразился чек бокс "Публичные проекты"
            отобразилось поле "Нагрузка"
            отобразилось поле "Комментарий"
            отобразилась кнопка "Отправить"
    - do: ввести в поле "Название организации" значение "abc"
    - do: нажать кнопку "Отправить" 
    - assert: появилось сообщение "Ресурс запрошен"
    - do: закрыть попап
   
   9. Запрос ресурса типа "YP — Квота":
    - automation: ABC-10135
    - *query2
    - do: выбрать категорию "Аккаунты" в листовом списке "Выберите тип ресурса из категории"
    - do: кликнуть по полю тип ресурса ("Выберите тип ресурса из категории Аккаунты")    
    - assert: появился выпадающий список из нескольких типов ресурсов
    - do: выбрать ресурс "YP — Квота"
    - assert: |
            ресурс выбрался,
            отобразилась подсказка "Кто может запрашивать этот ресурс?"
            отобразилось поле c листовым списком значений "Сценарий"
            отобразилась кнопка "Отправить"
    - do: выбрать в поле "Сценарий" значение "Просто спросить"
    - do: нажать кнопку "Отправить" 
    - assert: появилось сообщение "Ресурс запрошен"
    - do: закрыть попап

files: []

priority: critical

tags:
  - reviewed
  - no_assessors
