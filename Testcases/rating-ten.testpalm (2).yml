feature: Объектный ответ
type: 10 баллов

tlds: all
tags: [10_points]

specs:
  Внешний вид в попапе:
    - tags: pp_new_core
    - params:
        foreverdata: '1758493613'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче есть Объектный ответ, в карточке есть блок рейтингов с проставленной оценкой
    - do: кликнуть на звездочку с проставленной оценкой
    - assert: загрузилось модальное окно со слайдером и выставленной оценкой
    - screenshot: внешний вид модального окна [rating-ten-modal]

  Предложение оставить отзыв после выставления оценки:
    - params:
        foreverdata: '672155008'
    - do: авторизоваться любым доступным аккаунтом
    - do: получить выдачу по запросу 'foreverdata' (альтернативные запросы 'круэлла', 'один дома', 'не смотрите наверх' )
    - assert: на выдаче есть Объектный ответ, в карточке есть блок рейтингов
    - assert: у пользователя не должно быть оценок фильмов, сериалов и т.д., для незалогина очистить историю браузера
    - do: выставить на слайдере оценку 6
    - assert: в блоке рейтингов появилась предложение оставить свой отзыв
    - screenshot: внешний вид с предложением оставить отзыв [rating-ten-set]

  Модальное окно после первичной простановки оценки фильму:
    - do: разлогиниться
    - do: открыть вкладку инкогнито (для ПП - очистить историю) и получить выдачу по запросу 'Веном 2'
    - assert: на выдаче есть Объектный ответ, в карточке есть блок рейтингов
    - assert: у пользователя не должно быть оценок фильмов, сериалов, игр и т.д., для незалогина очистить историю браузера
    - do: поставить фильму оценку 6
    - assert: открылось модальное окно с описанием оценок
    - do: кликнуть по крестику в правом верхнему углу модального окна
    - assert: модальное окно закрылось
    - assert: в блоке рейтингов появилась оценка пользователя со смайлом

  Вопросик рядом с оставленной оценкой у фильмов:
    - params:
        foreverdata: '1285358806'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице есть блок с проставленной ранее оценкой
    - do: кликнуть на вопросик рядом с 'Ваша оценка' (или 'Оценка')
    - assert: открылось модальное окно с описанием оценок
    - tech: сработал счетчик /snippet/entity_search/object-badge/rating/about
    - assertMetrics: '*'

files:
  - features/touch-phone/z-entity-search/rating-ten/rating-ten.hermione.js

v-team: Video

priority: normal
