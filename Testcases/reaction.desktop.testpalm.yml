feature: Эмоджи

description: |
    Эмоджи - сущность в сюжете, позволяющая пользователям выразить свое мнение о новости посредством выбора реакции из набора эмоджи.
    Доступные эмоджи: Нравится, Хаха, Ого, Апчхи, Грусть, Возмутительно, Не нравится

specs:
  позволяют авторизованному пользователю оценить новость в сюжете без эмоджи:
    - do: авторизоваться на сервисе
    - do: перейти в неспортивный сюжет без поставленных эмоджи (не из топа новостей) - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-29_17-40-10.png
    - assert: |
        внизу сюжета есть кнопка 'Оценить' со значком смайла,
        справа от кнопки расположены иконка поделения и меню троеточия,
        элементы расположены в одну строку, не наезжают друг на друга
    - do: навести курсор мыши на кнопку 'Оценить'
    - assert: |
        меняется стиль курсора и слова 'Оценить',
        появляется блок с доступными эмоджи
    - do: навести курсор мыши на иконки эмоджи
    - assert: по ховеру каждая эмоджи увеличивается, сверху появляется соответствующая подпись
    - do: убрать курсор мыши с блока эмоджи
    - assert: блок с эмоджи пропадает
    - do: навести курсор мыши на кнопку 'Оценить' и кликнуть по любой эмоджи в появившемся блоке
    - assert: |
        блок с доступными эмоджи пропадает,
        выбранная эмоджи появляется на месте смайла,
        'Оценить' меняется на 'Вы оценили'

  отображают топ популярных реакций и количество отреагировавших на новость:
    - do: авторизоваться на сервисе
    - do: перейти в сюжет с проставленными эмоджи (количество проставленных эмоджи должно быть больше 10, если меньше - откройте другой сюжет)
    - assert: |
         отображается топ из 3 самых популярных эмоджи, кнопка Оценить и количество оценивших '(N)K' (например, 2,2K),
         справа от кнопки расположены иконка поделения и меню троеточия,
         элементы расположены в одну строку, не наезжают друг на друга
    - do: навести курсор мыши на кнопку 'Оценить'
    - assert: |
        меняется стиль курсора и слова 'Оценить',
        появляется блок с доступными эмоджи
    - do: кликнуть по любой эмоджи в появившемся блоке
    - assert: |
        блок с доступными эмоджи пропадает,
        выбранная эмоджи появляется справа от трех популярных эмоджи,
        'Оценить' меняется на "Вы +NK" (Вы - черным шрифтом, +NK - серым),
        количество N не изменилось
    - do: обновить страницу
    - assert: количество N не изменилось
    - do: навести курсор мыши на кнопку 'Вы +NK'
    - assert: |
        меняется стиль курсора и 'Вы +NK',
        блок с доступными эмоджи не появляется
    - do: кликнуть по 'Вы +NK'
    - assert: |
        выбранная эмоджи пропала,
        'Вы +NK' меняется на 'Оценить' +NK

  позволяют авторизованному пользователю изменить реакцию:
    - tags:
        - backend_news
        - smoke_zen
    - do: авторизоваться на сервисе
    - do: перейти в неспортивный сюжет БЕЗ ПОСТАВЛЕННЫХ ЭМОДЖИ (не из топа новостей), как выглядит сюжет без эмоджи - https://jing.yandex-team.ru/files/nightsonne/2021-01-19_17-36-10.png
    - assert: |
        под аннотацией есть кнопки 'Оценить' со значком смайла,
        справа от кнопки расположены иконка поделения и меню троеточия,
        элементы расположены в одну строку, не наезжают друг на друга
    - do: навести курсор мыши на кнопку 'Оценить' и кликнуть по любой эмоджи в появившемся блоке
    - assert: |
        блок с доступными эмоджи пропадает,
        выбранная эмоджи появляется на месте смайла,
        'Оценить' меняется на 'Вы оценили'
    - do: навести курсор мыши на кнопку 'Вы оценили'
    - assert: |
        меняется стиль курсора и 'Вы оценили',
        блок с доступными эмоджи не появляется
    - do: кликнуть по 'Вы оценили'
    - assert: |
        выбранная эмоджи пропала,
        'Вы оценили' меняется на 'Оценить' с иконкой смайла
    - do: кликнуть по кнопке 'Оценить' и кликнуть по любой другой эмоджи в появившемся блоке
    - assert: |
        блок с доступными эмоджи пропадает,
        выбранная другая эмоджи появляется на месте смайла,
        'Оценить' меняется на 'Вы оценили'
    - do: обновить страницу
    - assert: отображается только последняя выбранная эмоджи и черная надпись "Вы оценили"

  авторизация через таб эмоджи [manual]:
    - tags:
        - smoke_zen
    - reasonNotToAuto:
      - Нет возможности авторизоваться в тесте через поп-ап
    - do: перейти в сюжет без залогина (кроме рубрики "Спорт"), в сюжете количество проставленных эмоджи должно быть больше 10, если меньше - откройте другой сюжет
    - assert: |
        отображается топ из 3 самых популярных эмоджи, кнопка Оценить и количество оценивших '(N)K', элементы расположены в одну строку, не наезжают друг на друга,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-08-31_20-32-42.png
    - do: нажать на кнопку 'Оценить'
    - assert: |
        появился попап с предложением авторизации 'Хотите оценить новость? Войдите в аккаунт, чтобы оставить свою оценку', отображаются кнопки 'Закрыть' и 'Войти'
        внешний вид поп-апа - https://jing.yandex-team.ru/files/vasekerka/pop-up_desktop.png
    - do: нажать на кнопку 'Закрыть'
    - assert: поп-ап авторизации пропадает
    - do: повторно нажать на кнопку 'Оценить'
    - assert: появился попап с предложением авторизации
    - do: нажать на кнопку 'Войти' и авторизоваться на сервисе
    - assert: произошел возврат к сюжету
    - do: навести курсор мыши на кнопку 'Оценить' и кликнуть по любой эмоджи в появившемся блоке
    - assert: |
        блок с доступными эмоджи пропадает,
        выбранная эмоджи появляется справа от трех популярных эмоджи,
        'Оценить' меняется на "Вы +NK", количество N не изменилось

  отображают пользовательские реакции на домене, отличном от ru:
    - tags:
#      - ua_suite
      - by_suite
      - backend_news
      - smoke_zen
    - tlds:
#      - ua
      - by
    - do: перейти в сюжет с эмоджи на домене by, в сюжете количество проставленных эмоджи должно быть больше 10, если меньше - откройте другой сюжет
    - do: авторизоваться
    - assert: |
        отображается топ из 3 самых популярных эмоджи, кнопка Оценить и количество оценивших '(N)K' (например, 2,2K),
        справа от кнопки расположены иконка поделения и меню троеточия,
        элементы расположены в одну строку, не наезжают друг на друга
    - do: навести курсор мыши на кнопку 'Оценить'
    - assert: |
        меняется стиль курсора и слова 'Оценить',
        появляется блок с доступными эмоджи
    - do: навести курсор мыши на иконки эмоджи
    - assert: по ховеру каждая эмоджи увеличивается, сверху появляется соответствующая подпись
    - do: убрать курсор мыши с блока эмоджи
    - assert: блок с эмоджи пропадает
    - do: навести курсор мыши на кнопку 'Оценить' и кликнуть по любой эмоджи в появившемся блоке
    - assert: |
        блок с доступными эмоджи пропадает,
        выбранная эмоджи появляется справа от трех популярных эмоджи,
        'Оценить' меняется на "Вы +NK" (Вы - черным шрифтом, +NK - серым),
        количество N не изменилось
    - do: обновить страницу
    - assert: количество N не изменилось

  не отображают реакцию "Лайк" в топе эмоджи у траурных сюжетов:
    - do: авторизованным пользователем перейти в траурный сюжет (траурный сюжет содержит упоминания о смерти, тяжелых травмах, либо терракте). В сюжете ОБЯЗАТЕЛЬНО не должно быть реакций - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-29_17-25-27.png
    - do: навести курсор на кнопку "Оценить"
    - assert: |
        изменился стиль курсора,
        цвет иконки и текста "Оценить" стали красными,
        появился бабл со списком эмоджи
    - do: кликнуть по первой эмоджи из списка ("Лайк")
    - assert: |
        блок с доступными эмоджи пропадает,
        выбранная эмоджи появляется справа от иконки оценить,
        справа от выбранной эмоджи появилась серая надпись "Вы оценили",
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-29_17-30-30.png
    - do: авторизоваться под другим пользователем, оставаясь на текущей странице траурного сюжета
    - assert: |
        отображается иконка и кнопка "Оценить",
        справа от "Оценить" отображается цифра 1,
        эмоджи "Лайк" не отображается,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-29_17-33-16.png
    - do: навести курсор на кнопку "Оценить"
    - assert: |
        изменился стиль курсора,
        цвет иконки и текста "Оценить" стали красными,
        появился бабл со списком доступных эмоджи
    - do: кликнуть по первой эмоджи ("Лайк")
    - assert: |
        блок с доступными эмоджи пропадает,
        выбранная эмоджи появляется справа от иконки оценить,
        справа от выбранной эмоджи появилась серая надпись "Вы +1",
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-08-04_17-13-11.png

  не отображают реакцию "Ха-ха" в топе эмоджи у траурных сюжетов:
    - do: авторизованным пользователем перейти в траурный сюжет (траурный сюжет содержит упоминания о смерти, тяжелых травмах, либо терракте). В сюжете ОБЯЗАТЕЛЬНО не должно быть реакций - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-29_17-25-27.png
    - do: навести курсор на кнопку "Оценить"
    - assert: |
        изменился стиль курсора,
        цвет иконки и текста "Оценить" стали красными,
        появился бабл со списком эмоджи
    - do: кликнуть по второй эмоджи ("Ха-ха")
    - assert: |
        блок с доступными эмоджи пропадает,
        выбранная эмоджи появляется справа от иконки оценить,
        справа от выбранной эмоджи появилась серая надпись "Вы оценили",
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-08-04_17-12-29.png
    - do: авторизоваться под другим пользователем, оставаясь на текущей странице траурного сюжета
    - assert: |
        отображается иконка и кнопка "Оценить",
        справа от "Оценить" отображается цифра 1,
        эмоджи "Ха-ха" не отображается,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-29_17-33-16.png
    - do: навести курсор на кнопку "Оценить"
    - assert: |
        изменился стиль курсора,
        цвет иконки и текста "Оценить" стали красными,
        появился бабл со списком доступных эмоджи
    - do: кликнуть по второй эмоджи ("Ха-ха")
    - assert: |
        блок с доступными эмоджи пропадает,
        выбранная эмоджи появляется справа от иконки оценить,
        справа от выбранной эмоджи появилась серая надпись "Вы +1",
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-29_17-36-04.png


files:
  - features/news/reaction/reaction.desktop.hermione.js

tags:
  - reaction
  - neo
  - neodesktop

qa-engineer: nightsonne

manager: glushneva

tlds:
  - ru
  - by
  - kz
  - ua
  - com
