feature: Объектный ответ
type: Карусель фильмов
counter: /$page[@ui="touch"]/$main/$result[@wizard_name="entity_search"]/carousel/filters/scroller/select

description: Карусель может быть не на первой позиции, потребуется проскроллить выдачу вниз

specs-integration:
  Присутствует на странице:
    - tags: [smoke]
    - counter: /$page[@ui="touch"]/$main/$result[@wizard_name="entity_search"]/carousel/filters/scroller/select
    - do: получить выдачу по запросу «фильмы» _ALTERNATIVE_SEARCH_QUERIES_
    - assert: на выдаче есть карусель фильмов
    - assert: у карусели есть заголовок
    - assert: у карусели есть фильтры (Например, Жанр или Год выпуска)
    - screenshot: примерный вид [https://jing.yandex-team.ru/files/boronchiev/2020-04-26T08%3A51%3A56Z.png]

specs:
  Проверка внешнего вида:
    - label: carousel-film-{{SET_NAME}}
    - do: выполнить авторизациию и получить выдачу по запросу 'фильмы'
    - assert: на выдаче есть карусель
    - screenshot: внешний вид [plain]
  Проверка дозагрузки карусели:
    - tags: pp_new_core
    - label: carousel-film-scrolled-{{SET_NAME}}
    - do: выполнить авторизациию и получить выдачу по запросу 'фильмы'
    - assert: на выдаче есть карусель
    - do: проскроллить карусель до конца
    - assert: загрузилось еще несколько фильмов
    - screenshot: внешний вид [scrolled]
  Клик в карточку:
    - tags: [smoke, pp_new_core]
    - do: выполнить авторизациию и получить выдачу по запросу 'фильмы'
    - assert: на выдаче есть карусель
    - do: кликнуть на первый фильм в карусели
    - assert: карусель и выдача перезагрузились
    - tech: сработал счетчик /$page/$main/$result/carousel/showcase/item/thumb
    - do: кликнуть на кнопку назад в браузере
    - assert: |
        открылась предыдущая страница с каруселью,
        в карусели ни один элемент не выделен
  Фильтрация по жанру:
    - tags: [smoke, pp_new_core]
    - do: выполнить авторизациию и получить выдачу по запросу 'фильмы'
    - assert: на выдаче есть карусель
    - do: в фильтре по жанру выбрать аниме (или любой другой)
    - assert: карусель и выдача перезагрузились
    - tech: сработал счетчик /$page/$main/$result/carousel/filters/scroller/select
    - assert: страница подскроллена наверх (к поисковому полю с текстом запроса, если карусель была первой в выдаче, иначе подскролл может произойти к карусели) 
  Отображение карусели в альбомной ориентации:
    - do: выполнить авторизациию и получить выдачу по запросу 'фильмы'
    - assert: на выдаче есть карусель
    - do: повернуть устройство в альбомную ориентацию
    - screenshot: внешний вид [plain-landscape]
  Заголовок с хлебными крошками:
    - params:
        ento: 0oEg1ydXcyMjE0OC1wcm9qGALF2s0j
    - do: получить выдачу по запросу 'Квентин Тарантино фильмы' с параметром ento=0oEg1ydXcyMjE0OC1wcm9qGALF2s0j
    - screenshot: пример внешнего вида [films-breadcrumb]
    - assert: |
        на выдаче есть карусель
        в карусели есть заголовок "Фильмы"
        в карусели есть ссылка-хинт "Квентин Тарантино"
    - do: кликнуть на ссылку "Квентин Тарантино" над главным заголовком карусели
    - assert: |
        выдача перезагрузилась,
        на выдаче есть карточка ОО
    - tech: сработал счетчик /$page/$main/$result/carousel/entity-carousel-header/breadcrumb
  Заголовок с источником списка фильмов:
    - tags:
        - smoke_extended
    - do: получить выдачу по запросу 'kinopoisk.ru' с параметром ento=entlist=lstff5b9fb..0;entlistskip=20
    - screenshot: примерный внешний вид [films-source]
    - assert: |
        на выдаче есть карусель
        в карусели есть заголовок "аниме сериалы"
        в карусели есть ссылка-источник "kinopoisk.ru"
    - do: кликнуть на ссылку "kinopoisk.ru"
    - assert: открылась внешняя страница kinopoisk.ru

files:
  - features/touch-phone/z-entity-search/carousel/films/films.hermione.js
  - features/touch-phone/z-entity-search/carousel/films/films.hermione.e2e.js

v-team: Video

tags:
  - reviewed
  - hasE2E
  - oo_lists

tlds: [ru, by, kz, ua, com.tr, com]

browsers:
  notFor:
    - android-touch-group
    - searchapp-phone
