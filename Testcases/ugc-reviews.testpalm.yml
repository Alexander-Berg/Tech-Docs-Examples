feature: Объектный ответ
type: Отзывы в карточках ОО у игр и фильмов

counter: /$page/$parallel/$result[@wizard_name="entity_search"]/tabs/reviews

specs-integration:
  Табы Главное и Отзывы:
    - counter: /$page[@ui="desktop"]/$parallel/$result[@wizard_name="entity_search"]/tabs/reviews/reviews-loader/reviews/list/review-item
    - do: получить выдачу по запросу «игра wow» _ALTERNATIVE_SEARCH_QUERIES_
    - assert: на выдаче есть карточка объекта
    - assert: в карточке есть таб Отзывы
    - do: клик на таб Отзывы
    - assert: открылся таб Отзывы, отзывы загрузились

specs:
  Табы Главное и Отзывы:
    - do: открыть выдачу по запросу 'игра wow'
    - screenshot: примерный внешний вид [plain]
    - assert: |
        на выдаче есть карточка ОО
        в карточке игры есть табы Главное и Отзывы
        карточка игры разбита табами на две части: заголовок и остальная часть карточки
        после перехода в соответствующий таб появились 10 отзывов
        при скролле до конца списка отзывов подгружается новая порция из еще 10 отзывов
    - screenshot: примерный внешний вид [reviews-next-page-loaded]

  Пустой таб с отзывами:
    - do: открыть выдачу по запросу 'тоска фильм 2021' с параметром ento=0oCgtraW4wNDc0MjUwNBJjbHN0LnJlY0NqY0tCSFJsZUhRU0wybGZlV1ZoY2pveU1ESXhJQ1ltSUhOZloyVnVjbVU2Wm1sc2JTQW1KaUJ6WDJkbGJuSmxPbkoxZHpFek9Ua3dDZ2tLQlhScGRHeGxFZ0E9GALJeJ91
    - assert: |
        на выдаче есть карточка ОО
        в карточке фильма нет табов
    - screenshot: примерный внешний вид [plain]

  Открытие по умолчанию вкладки с отзывами:
    - do: открыть выдачу по запросу 'фильм аквамен 2018'
    - do: дописать в урл параметр &intent=reviews
    - assert: |
        на выдаче есть карточка ОО
        в карточке фильма открыт таб Отзывы
    - screenshot: примерный внешний вид [plain]

files:
  - features/deskpad/z-entity-search/ugc-reviews/ugc-reviews.hermione.js
  - features/deskpad/z-entity-search/ugc-reviews/ugc-reviews.hermione.e2e.js

v-team: OO

tlds: all
