feature: Домашний экран

specs:
    Карусель:
        - do: перейти по адресу /home/0/?offset=0
        - assert: |
            открылась карусель "Фильмы для вас"
            у карусели есть заголовок
            на карточках есть номера, бейджи, рейтинг фильма
            под карточкой есть заголовок фильма, год, жанр
            под каруселью тизерение следующей карусели
        - screenshot: внешний вид [main]

    Карусель. Команда "в самый верх":
        - do: |
            перейти по адресу /home/0/?offset=5
            эмулируем команду quasarApi navigate с payload {direction: 'up', amount: 'tillEnd'}
        - assert: |
            произошла смена url
            "на экране должны быть элементы главного экрана: гритингсы, промо, рекомендации"

    Карусель. Команда "в самый низ":
        - do: перейти по адресу /home/0/?offset=5
        - do: выполнить навигацию в направлении down с payload tillEnd
        - assert: |
            На странице должен появиться блок "Карусель"
            URL должен содержать параметр "offset" равным 19
            URL должен содержать путь home/0/
        - screenshot: внешний вид [last-carousel]

    Карусель сериалов [manual]:
        - do: перейти по адресу /home/0/?offset=1
        - assert: открылась карусель "Сериалы для вас"
        # - screenshot: внешний вид [main]

    Карусель мультфильмов [manual]:
        - do: перейти по адресу /home/0/?offset=2
        - assert: открылась карусель "Мультфильмы для вас"
        # - screenshot: внешний вид [main]

    Карусель мультсериалов [manual]:
        - do: перейти по адресу /home/0/?offset=3
        - assert: открылась карусель "Мультсериалы для вас"
        # - screenshot: внешний вид [main]

    Карусель рекомендаций [manual]:
        - do: перейти по адресу /home/0/?offset=4
        - assert: |
            открылась двурядная карусель "Рекомендации"
            у карусели есть заголовок без аватарки
            на всех тумбах есть номера и мета с длительностью
            на тумбах с фильмами есть бейдж и рейтинг фильма
            на блогерских тумбах нет бейджа и рейтинга
            под тумбой есть заголовок фильма или ролика
            под заголовком на тумбах с фильмами есть год и жанр
            под заголовком на блогерских тумбах дата ролика
            под каруселью есть тизерение следующей карусели
        # - screenshot: внешний вид [main]

    Карусель блогеров [manual]:
        - do: перейти на последнюю карусель (по адресу /home/0/?offset=19)
        - assert: |
            открылась двурядная карусель блогеров
            у карусели есть заголовок и иконка
            на тумбах есть номера и мета с длительностью
            на тумбах нет бейджа и рейтинга
            под тумбой есть заголовок ролика, под заголовком дата ролика
            под каруселью нет тизерения следующей карусели
        # - screenshot: внешний вид [main]

    Тизерение на однорядной карусели [manual]:
        - do: перейти по адресу /home/56/?offset=0
        - assert: |
            открылась карусель
            слева есть тизерение предыдущей тумбы
            справа нет тизерения следующей тумбы
        # - screenshot: внешний вид [main]

    Тизерение на двурядной карусели [manual]:
        - do: перейти в конец карусели (по адресу /home/28/?offset=5)
        - assert: |
            открылась карусель
            слева есть тизерение двух предыдущих тумб
            справа нет тизерения следующих тумб
        # - screenshot: внешний вид [main]

    Проверка бейджей [manual]:
        - do: перейти по адресу /home/0/?offset=0
        - assert: |
            на тумбе с фильмом доступным по подписке Плюс присутствует бейдж Плюса, бейдж узкий
            на тумбе с фильмом доступным по подписке Плюс+Амедиатека присутствует бейдж Плюса, бейдж узкий
            на тумбе с фильмом доступным для покупки отсутствует бейдж
            на тумбе с бесплатным фильмом отсутствует бейдж

    Проверка бейджей (без подписки) [manual]:
        - do: перейти по адресу /home/0/?offset=0
        - assert: |
            на тумбе с фильмом доступным по подписке присутствует бейдж Плюса, бейдж широкий
            на тумбе с фильмом доступным по подписке Плюс+Амедиатека присутствует бейдж Плюса, бейдж широкий
            на тумбе с фильмом доступным для покупки отсутствует бейдж
            на тумбе с бесплатным фильмом отсутствует бейдж

    Подсказки в саджесте [manual]:
        - do: перейти на первую карусель (по адресу /home/0/?offset=0)
        - assert: |
            под каруселью есть саджеты с подсказками
            подсказки релевантны тумбам на экране
        - do: пролисать карусель влево
        - assert: |
            саджеты с подсказками изменились
            подсказки релевантны тумбам на экране
        - do: пролисать карусель вниз
        - assert: |
            саджеты с подсказками изменились
            подсказки релевантны тумбам на экране
        - do: долистать карусели вниз до карусели рекомендаций
        - assert: |
            саджеты с подсказками изменились
            подсказки релевантны тумбам на экране
        - do: пролисать карусель влево
        - assert: |
            саджеты с подсказками изменились
            подсказки релевантны тумбам на экране
        - do: пролисать карусель вниз
        - assert: |
            саджеты с подсказками изменились
            подсказки релевантны тумбам на экране

# v-team: your team

files:
    - tests/hermione/suites/home/carousel.hermione.js
