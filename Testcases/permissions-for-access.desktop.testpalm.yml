feature: Пермишены на доступ к камере и микрофону

specs:

    Появление пермишена на доступ к микрофону при старте аудиозвонка[manual]:
        - tags: [smoke_videocalls]
        - automation:
        - description: |
              Авторизованы пользователем Б
              Между пользователем А и Б есть общий приватный чат
              В приложении ранее не осуществляли звонок и не было запроса на дсотуп к микрофону
              Данный тест-кейс аткуален только для данных браузеров Firefox, Yabro и Chrome
        - do: Под пользователем Б открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на кнопку вызова в шапке чата
        - assert: Открылось меню с возможностью выбора типа звонка
        - do: Нажать на "звонок"
        - assert: Поверх экрана исходящего звонка появляется пермишен на доступ к микрофону
        - do: Нажать "Разрешить"
        - assert: Отображается экран "Исходящий звонок"

    Появление подсказки при старте аудиозвонка, если ранее доступ к микрофону был отклонен[manual]:
        - automation:
        - description: |
              Авторизованы пользователем Б
              Между пользователем А и Б есть общий приватный чат
              Данный тест-кейс аткуален только для данных браузеров Firefox, Yabro и Chrome
              В браузере / прилоежнии не разрешен доступ к микрофону
        - do: Под пользователем Б открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на кнопку вызова в шапке чата
        - assert: Открылось меню с возможностью выбора типа звонка
        - do: Нажать на "звонок"
        - assert: |
              Отобража экран укаазываеющий на то, что отсутствет доступ к микрофону и камере
              Есть подсказка, что решрешить доступ можно через браузер
              Вверху списка чатов есть индикаатор с надписью "Разрешите досутп"
        - do: Выдать разрещение на доступ к микрофону согласно подсказе
        - assert: У пользователя Б отображается экран "Исходящий звонок"

    Отсутствие пермишена на доступ к микрофону при старте аудиозвонка после обновления страницы браузера, если доступ к микрофону ранее был разрешен[manual]:
        - automation:
        - description: |
              Авторизованы пользователем Б
              Между пользователем А и Б есть общий приватный чат
              В приложении ранее не осуществляли звонок и не было запроса на дсотуп к микрофону
              Данный тест-кейс аткуален только для данных браузеров Firefox, Yabro и Chrome
        - do: Под пользователем Б открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на кнопку вызова в шапке чата
        - assert: Открылось меню с возможностью выбора типа звонка
        - do: Нажать на "звонок"
        - assert: Поверх экрана исходящего звонка появляется пермишен на доступ к микрофону
        - do: Нажать "Разрешить"
        - assert: Отображается экран "Исходящий звонок"
        - do: Нажать на кнопку отмены исходящего звонка (красная трубка)
        - assert: Звонок отменен
        - do: Обновить странциу браузера
        - assert: |
              Страница браузера обновлена
              Загрузились чаты аккаунта
              Открыто окно чата из description
        - do: Нажать на кнопку вызова в шапке чата
        - assert: Открылось меню с возможностью выбора типа звонка
        - do: Нажать на "звонок"
        - assert: Отображается экран "Исходящий звонок"

    Отсутствие пермишена на доступ к микрофону при старте аудиозвонка, если ранее доступ к микрофону был разрешен[manual]:
        - automation:
        - description: |
              Авторизованы пользователем Б
              Между пользователем А и Б есть общий приватный чат
              В Мессенджере и проверяемом браузере разрешены  доступы к камере и микрофону
              Данный тест-кейс аткуален только для данных браузеров Firefox, Yabro и Chrome
        - do: Под пользователем Б открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на кнопку вызова в шапке чата
        - assert: Открылось меню с возможностью выбора типа звонка
        - do: Нажать на "звонок"
        - assert: Отображается экран "Исходящий звонок"

    Появление пермишена на доступ к микрофону при принятии аудиозвонка[manual]:
        - automation:
        - description: |
              Авторизованы пользователем Б
              Между пользователем А и Б есть общий приватный чат
              Пользователь Б ранее не осуществляли звонок и не было запроса на дсотуп к микрофону
              У пользвователя А разрешены  доступы к камере и микрофону
              Данный тест-кейс аткуален только для данных браузеров Firefox, Yabro и Chrome
        - do: Под пользователем Б открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Под пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на кнопку вызова в шапке чата
        - assert: Открылось меню с возможностью выбора типа звонка
        - do: Нажать на "звонок"
        - assert: На экране отображается "Исходящий звонок"
        - do: Проверить наличие входящего пользователем Б
        - assert: |
              На экране появляется окно входящего звонка
              В окне есть кнопки "Принять" (зеленная трубка) и "Отклонить" (красная трубка)
              На экране входящшего отображается аватар и имя звонящего пользоваателя
        - do: Пользователем Б принять входящий вызов от пользователя А
        - assert: У пользователя Б появляется пермишен на доступ к микрофону
        - do: Выдать разрешение на доступ к микрофону
        - assert: Между пользователями А и Б устанавливается соединение

    Отсутствие пермишена на доступ к камере при старте аудиозвонка[manual]:
        - automation:
        - description: |
              Авторизованы пользователем Б
              Между пользователем А и Б есть общий приватный чат
              В приложении ранее не осуществляли звонок и не было запроса на дсотуп к микрофону
              Данный тест-кейс аткуален только для данных браузеров Firefox, Yabro и Chrome
        - do: Под пользователем Б открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на кнопку вызова в шапке чата
        - assert: Открылось меню с возможностью выбора типа звонка
        - do: Нажать на "звонок"
        - assert: Поверх экрана исходящего звонка появляется пермишен на доступ к микрофону
        - do: Нажать "Разрешить"
        - assert: |
              Отображается экран "Исходящий звонок"
              Пермишен на доступ к камере не появился

    Отсутствие пермишена на доступ к камере при принятии аудиозвонка[manual]:
        - automation:
        - description: |
              Авторизованы пользователем Б
              Между пользователем А и Б есть общий приватный чат
              Пользователь Б ранее не осуществляли звонок и не было запроса на дсотуп к микрофону
              У пользвователя А разрешены  доступы к камере и микрофону
              Данный тест-кейс аткуален только для данных браузеров Firefox, Yabro и Chrome
        - do: Под пользователем Б открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Под пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на кнопку вызова в шапке чата
        - assert: Открылось меню с возможностью выбора типа звонка
        - do: Нажать на "звонок"
        - assert: На экране отображается "Исходящий звонок"
        - do: Проверить наличие входящего пользователем Б
        - assert: |
              На экране появляется окно входящего звонка
              В окне есть кнопки "Принять" (зеленная трубка) и "Отклонить" (красная трубка)
              На экране входящшего отображается аватар и имя звонящего пользоваателя
        - do: Пользователем Б принять входящий вызов от пользователя А
        - assert: У пользователя Б появляется пермишен на доступ к микрофону
        - do: Выдать разрешение на доступ к микрофону
        - assert: |
              Между пользователями А и Б устанавливается соединение
              Пермишен на доступ к камере не появился

    Отсутствие  пермишена на доступ к микрофону при принятии аудиозвонка, если ранее доступ к микрофону был разрешен[manual]:
        - automation:
        - description: |
              Авторизованы пользователем Б
              Между пользователем А и Б есть общий приватный чат
              Пользователь Б ранее не осуществляли звонок и не было запроса на дсотуп к микрофону
              У пользвователя А  и пользователя Б разрешены  доступы к камере и микрофону
              Данный тест-кейс аткуален только для данных браузеров Firefox, Yabro и Chrome
        - do: Под пользователем Б открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Под пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на кнопку вызова в шапке чата
        - assert: Открылось меню с возможностью выбора типа звонка
        - do: Нажать на "звонок"
        - assert: На экране отображается "Исходящий звонок"
        - do: Проверить наличие входящего пользователем Б
        - assert: |
              На экране появляется окно входящего звонка
              В окне есть кнопки "Принять" (зеленная трубка) и "Отклонить" (красная трубка)
              На экране входящшего отображается аватар и имя звонящего пользоваателя
        - do: Пользователем Б принять входящий вызов от пользователя А
        - assert: |
              Между пользователями А и Б устанавливается соединение
              Пермишен на доступ к микрофону не появился

    Появление пермишена на доступ к камере при старте видеозвонка[manual]:
        - automation:
        - description: |
              Авторизованы пользователем Б
              Между пользователем А и Б есть общий приватный чат
              В приложении ранее не осуществляли звонок и не было запроса на дсотуп к микрофону
              Данный тест-кейс аткуален только для данных браузеров Firefox, Yabro и Chrome
        - do: Под пользователем Б открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на кнопку вызова в шапке чата
        - assert: Открылось меню с возможностью выбора типа звонка
        - do: Нажать на "видеозвонок"
        - assert: Поверх экрана исходящего звонка появляется пермишен на доступ к камере и микрофону
        - do: Нажать "Разрешить"
        - assert: Отображается экран "Исходящий звонок"

    Появление подсказки при старте видеозвонка, если ранее доступ к камере был отклонен[manual]:
        - automation:
        - description: |
              Авторизованы пользователем Б
              Между пользователем А и Б есть общий приватный чат
              Данный тест-кейс аткуален только для данных браузеров Firefox, Yabro и Chrome
              В браузере / прилоежнии не разрешен доступ к камере
        - do: Под пользователем Б открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на кнопку вызова в шапке чата
        - assert: Открылось меню с возможностью выбора типа звонка
        - do: Нажать на "видеозвонок"
        - assert: |
              Отобража экран укаазываеющий на то, что отсутствет доступ к микрофону и камере
              Есть подсказка, что решрешить доступ можно через браузер
              Вверху списка чатов есть индикатор с надписью "Разрешите досутп"

    Отсутствие пермишена на доступ к камере при старте видеозвонка после обновления страницы браузера, если доступ к камере ранее был разрешен[manual]:
        - automation:
        - description: |
              Авторизованы пользователем Б
              Между пользователем А и Б есть общий приватный чат
              В приложении ранее не осуществляли звонок и не было запроса на дсотуп к камере
              Данный тест-кейс аткуален только для данных браузеров Firefox, Yabro и Chrome
        - do: Под пользователем Б открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на кнопку вызова в шапке чата
        - assert: Открылось меню с возможностью выбора типа звонка
        - do: Нажать на "видеозвонок"
        - assert: Поверх экрана исходящего звонка появляется пермишен на доступ к микрофону и камере
        - do: Нажать "Разрешить"
        - assert: Отображается экран "Исходящий звонок"
        - do: Нажать на кнопку отмены исходящего звонка (красная трубка)
        - assert: Звонок отменен
        - do: Обновить странциу браузера
        - assert: |
              Страница браузера обновлена
              Загрузились чаты аккаунта
              Открыто окно чата из description
        - do: Нажать на кнопку вызова в шапке чата
        - assert: Открылось меню с возможностью выбора типа звонка
        - do: Нажать на "видеозвонок"
        - assert: Отображается экран "Исходящий звонок"

    Отсутствие пермишена на доступ к камере при старте видеозвонка, если ранее доступ к камере был разрешен[manual]:
        - automation:
        - description: |
              Авторизованы пользователем Б
              Между пользователем А и Б есть общий приватный чат
              В Мессенджере и проверяемом браузере разрешены  доступы к камере и микрофону
              Данный тест-кейс аткуален только для данных браузеров Firefox, Yabro и Chrome
        - do: Под пользователем Б открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на кнопку вызова в шапке чата
        - assert: Открылось меню с возможностью выбора типа звонка
        - do: Нажать на "видеозвонок"
        - assert: Отображается экран "Исходящий звонок"

    Появление пермишена на доступ к камере при принятии видеозвонка[manual]:
        - tags: [smoke_videocalls]
        - automation:
        - description: |
              Авторизованы пользователем Б
              Между пользователем А и Б есть общий приватный чат
              Пользователь Б ранее не осуществляли звонок и не было запроса на дсотуп к камере
              У пользвователя А разрешены  доступы к камере и микрофону
              Данный тест-кейс аткуален только для данных браузеров Firefox, Yabro и Chrome
        - do: Под пользователем Б открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Под пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на кнопку вызова в шапке чата
        - assert: Открылось меню с возможностью выбора типа звонка
        - do: Нажать на "видеозвонок"
        - assert: На экране отображается "Исходящий звонок"
        - do: Проверить наличие входящего пользователем Б
        - assert: |
              На экране появляется окно входящего звонка
              В окне есть кнопки "Принять" (зеленная трубка) и "Отклонить" (красная трубка)
              На экране входящшего отображается аватар и имя звонящего пользоваателя
        - do: Пользователем Б принять входящий вызов от пользователя А
        - assert: У пользователя Б появляется пермишен на доступ к микрофону и камере
        - do: Выдать разрешение на доступ к микрофону и камере
        - assert: Между пользователями А и Б устанавливается соединение

    Отсутствие пермишена на доступ к микрофону при принятии видеозвонка, если ранее доступ к микрофону был разрешен[manual]:
        - automation:
        - description: |
              Авторизованы пользователем Б
              Между пользователем А и Б есть общий приватный чат
              Пользователь Б ранее не осуществляли звонок и не было запроса на дсотуп к микрофону
              У пользвователя А  и пользователя Б разрешены  доступы к камере и микрофону
              Данный тест-кейс аткуален только для данных браузеров Firefox, Yabro и Chrome
        - do: Под пользователем Б открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Под пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открыто окно чата
        - do: Нажать на кнопку вызова в шапке чата
        - assert: Открылось меню с возможностью выбора типа звонка
        - do: Нажать на "видеозвонок"
        - assert: На экране отображается "Исходящий звонок"
        - do: Проверить наличие входящего пользователем Б
        - assert: |
              На экране появляется окно входящего звонка
              В окне есть кнопки "Принять" (зеленная трубка) и "Отклонить" (красная трубка)
              На экране входящшего отображается аватар и имя звонящего пользоваателя
        - do: Пользователем Б принять входящий вызов от пользователя А
        - assert: |
              Между пользователями А и Б устанавливается соединение
              Пермишен на доступ к камере не появился

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
