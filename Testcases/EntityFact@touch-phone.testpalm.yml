feature: Факт
type: Объектный
counter: /$page/$main/$result[@wizard_name="entity-fact"]

specs:
  Ссылка в тумбе:
    - tags: ['smoke']
    - do: получить выдачу по запросу 'сколько лет мадонне' (альтернативные запросы "сколько лет киркорову", "сколько лет путину")
    - assert: на первой позиции выдачи есть Фактовый ответ с картинкой (тумбой)
    - screenshot: внешний вид соответствует скриншоту [plain]
    - assertMetrics: '-'
    - do: тапнуть по картинке (тумбе) в Фактовом ответе
    - tech: проверить счетчик в тумбе
    - assert: |
        произошел перезапрос в той же вкладке
        в строке поиска изменился запрос
    - assertMetrics: '-'

  Ссылка в первой хлебной крошке:
    - tags: ['smoke']
    - do: получить выдачу по запросу 'сколько лет мадонне' (альтернативные запросы "сколько лет киркорову", "сколько лет путину")
    - assert: на первой позиции выдачи есть Фактовый ответ с картинкой (тумбой)
    - assertMetrics: '-'
    - do: тапнуть по первой хлебной крошке в Фактовом ответе
    - tech: проверить счетчик в первой хлебной крошки
    - assert: |
        произошел перезапрос в той же вкладке
        в строке поиска изменился запрос
    - do: вернуться на предыдущую выдачу
    - assert: цвет в первой хлебной крошки остался серый
    - assertMetrics: '-'

  Горизонтальная картинка:
    - do: получить выдачу по запросу 'деньги в швеции'
    - assert: на первой позиции выдачи есть Фактовый ответ с горизонтальной картинкой (тумбой)
    - screenshot: внешний вид соответствует скриншоту [horizontal]

  Подсказка "Что это":
    - do: получить выдачу по запросу 'сколько лет мадонне' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: на первой позиции выдачи есть быстрый ответ
    - do: кликнуть в вопросик напротив заголовка быстрого ответа
    - tech: сработал счётчик '/$page/$main/fact-header/hint'
    - assert: открылась шторка с более подробной информацией
    - screenshot: внешний вид [drawer]

  Шторка обратной связи:
    - do: кликнуть по ссылке "Сообщить об ошибке" в нижней части факта
    - assert: открылась шторка для обратной связи
    - screenshot: внешний вид шторки для обратной связи [feedback-drawer]

files:
  - src/features/EntityFact/EntityFact.test/EntityFact@touch-phone.hermione.js

v-team: Facts

tlds: [ru, by, ua, kz, uz, com.tr, com]
