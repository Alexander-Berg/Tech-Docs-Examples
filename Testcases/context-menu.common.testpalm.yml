feature: Контекстное меню в канале

specs:

    У администртора канала в меню есть пункт Ответить[manual]:
        - automation: MSSNGRFRONT-5015
        - description: У авторизованного пользователя в списке чатов есть канал с историей сообщений, в котором он является администратором
        - do: Открыть канал из description
        - assert: Открывается окно канала
        - do: Вызвать контекстное меню для сообщения на которое хотим ответить кликнув ПКМ / тапнув по нему
        - assert: Показывается контекстное меню, в котором есть пункт "Ответить"
        - do: Выбрать "Ответить"
        - assert: над полем ввода появляется плашка reply
        - do: Ввести в поле ввода любой текст и нажать кнопку "Отправить"
        - assert: |
              Сообщение с реплай корректно отображается
              Вместо имени автора отображается название канала

    У администртора канала в меню есть пункт Переслать[manual]:
        - automation: MSSNGRFRONT-5015
        - description: У авторизованного пользователя в списке чатов есть канал с историей сообщений, в котором он является администратором
        - do: Открыть канал из description
        - assert: Открывается окно канала
        - do: Вызвать контекстное меню для сообщения на которое хотим ответить кликнув ПКМ / тапнув по нему
        - assert: Показывается контекстное меню, в котором есть пункт "Переслать"
        - do: Выбрать "Переслать"
        - assert: Появляется список чатов для пересылки сообщения
        - do: Выбрать любой чат из списка, кроме канала откуда делается Forward
        - assert: |
              Открылось окно выбранного чата
              Фокус курсора в поле ввода
              Над полем ввода появилась плашка Forward
        - do: Ввести в поле ввода любой текст и нажать кнопку "Отправить"
        - assert: |
              Форвард корректно отображается в окне чата
              Вместо автора видно название канала

    У администртора канала в меню есть пункт Копировать[manual]:
        - automation: MSSNGRFRONT-5015
        - description: У авторизованного пользователя в списке чатов есть канал (в истории которого есть текстовое сообщение), в котором он является администратором
        - do: Открыть канал из description
        - assert: Открывается окно канала
        - do: Вызвать контекстное меню кликнув ПКМ / тапнув по сообщению из description
        - assert: Показывается контекстное меню, в котором есть пункт "Скопировать текст"
        - do:  Нажать "Скопировать текст"
        - assert: На короткое время в окне чата всплывает сообщение о том, что текст скопирован

    У администртора канала в меню есть пункт Выбрать:
        - description: У авторизованного пользователя в списке чатов есть канал с историей сообщений, в котором он является администратором
        - do: Открыть канал из description
        - assert: Открывается окно канала
        - do: Вызвать контекстное меню кликнув ПКМ / тапнув по сообщению из description
        - assert: Показывается контекстное меню, в котором есть пункт "Выбрать"
        - do: Нажать "Выбрать"
        - assert: |
              Сообщение выделенно
              Внизу экрана, вместо поля ввода, появилась панель мультивыбора

    У администртора канала в меню есть пункт Редактировать:
        - description: У авторизованного пользователя в списке чатов есть канал (в истории которого есть текстовое сообщение), в котором он является администратором
        - do: Открыть канал из description
        - assert: Открывается окно канала
        - do: Вызвать контекстное меню кликнув ПКМ / тапнув по сообщению из description
        - assert: Показывается контекстное меню, в котором есть пункт "Редактировать"
        - do: В контекстном меню выбераать "Редактировать"
        - assert: |
              Текст редактируемого сообщения появляется в поле ввода
              Плашка с исходным сообщением появляется над полем ввода
        - do: Ввести в поле ввода несколько символов
        - assert: В поле ввода к тексту добавляются вводимые символ
        - do: Отправить сообщение
        - assert: |
              Текст исходного сообщения меняется на то, которое мы изменили
              В баллуне данного сообщения появляется “карандаш”

    У администртора канала в меню есть пункт Закрепить сообщение:
        - description: У авторизованного пользователя в списке чатов есть канал с историей сообщений, в котором он является администратором
        - do: Открыть канал из description
        - assert: Открывается окно канала
        - do: Вызвать контекстное меню кликнув ПКМ / тапнув по сообщению из description
        - assert: Показывается контекстное меню, в котором есть пункт "Закрепить сообщение"
        - do: Нажать "Закрепить сообщение"
        - assert: Сообщение было закреплено

    У администртора канала в меню есть пункт Удалить[manual]:
        - automation: MSSNGRFRONT-5015
        - description: У авторизованного пользователя в списке чатов есть канал с историей сообщений, в котором он является администратором
        - do: Открыть канал, который описан в description
        - assert: Открывается окно канала
        - do: Вызвать контекстное меню кликнув ПКМ / тапнув по сообщению из description
        - assert: Показывается контекстное меню, в котором есть пункт "Удалить"
        - do: В контекстном меню выберать "Удалить" и подтвердить удаление
        - assert: В окне чата появляется надпись "Сообщение было удалено"

    У подписчика канала в меню есть пункт Переслать[manual]:
        - automation: MSSNGRFRONT-5015
        - description: У авторизованного пользователя в списке чатов есть канал с иисторией сообщений, в котором он является подписчиком
        - do: Открыть канал из description
        - assert: Открывается канал из description
        - do: Кликнуть / Тапнуть по сообщению из канала
        - assert: Появляется контекстное меню
        - do: Выбрать пункт "Переслать"
        - assert: Открылся экран пересылки сообщения в чаты
        - do: Проскроллить список предлагаемых чатов и выбрать любой чат
        - assert: Открывается окно выбранного чата и над полем ввода появилась плашка Forward
        - do: Нажать кнопку "Отправить"
        - assert: Сообщение отправляется и отображается в окне чата

    У подписчика канала в меню есть пункт Копировать[manual]:
        - automation: MSSNGRFRONT-5015
        - description: У авторизованного пользователя в списке чатов есть канал (в истории которого есть текстовое сообщение), в котором он является подписчиком
        - do: Открыть канал из description
        - assert: Открывается окно канала
        - do: Вызвать контекстное меню кликнув ПКМ / тапнув по сообщению из description
        - assert: Показывается контекстное меню, в котором есть пункт "Скопировать текст"
        - do:  Нажать "Скопировать текст"
        - assert: На короткое время в окне чата всплывает сообщение о том, что текст скопирован

    У подписчика канала в меню есть пункт Выбрать:
        - description: У авторизованного пользователя в списке чатов есть канал с историей сообщений, в котором он является подписчиком
        - do: Открыть канал из description
        - assert: Открывается окно канала
        - do: Вызвать контекстное меню кликнув ПКМ / тапнув по сообщению из description
        - assert: Показывается контекстное меню, в котором есть пункт "Выбрать"
        - do: Нажать "Выбрать"
        - assert: |
              Сообщение выделенно
              Внизу экрана, вместо кнопок "Поделиться каналом" и Отключить / Включить уведолмения, появилась панель мультивыбора

    У подписчика канала в меню есть пункт Пожаловаться[manual]:
        - description: У авторизованного пользователя в списке чатов есть канал с историей сообщений, в котором он является подписчиком
        - automation: MSSNGRFRONT-5015
        - do: Открыть канал из description
        - assert: Открывается окно канала
        - do: Вызвать контекстное меню кликнув ПКМ / тапнув по сообщению из description
        - assert: Появляется контекстное меню в котором присутствует пункт "Пожаловаться"
        - do: Нажать "Пожаловаться"
        - assert: Появляется контекстное меню с причиными жалоб - “Спам”, “Неуместный материал” и “Нарушение авторских прав”

    У подписчика канала в меню есть кнопка Копировать[manual]:
        - automation: MSSNGRFRONT-5015
        - description: У авторизованного пользователя в списке чатов есть канал с историей сообщений, в котором он является подписчиком
        - do: Открыть канал из description
        - assert: Открывается окно канала
        - do: Вызвать контекстное меню кликнув ПКМ / тапнув по сообщению из description
        - assert: Появляется контекстное меню
        - do: Выбрать пункт "выбрать"
        - assert: Вызывается мультивыбор и в нижнем меню есть кнопка "Скопировать"
        - do:  Нажать "Скопировать"
        - assert: На короткое время в окне чата всплывает сообщение о том, что сообщение скопировано

    В меню есть кнопка Добавить в сохраненные[manual]:
        - automation: MSSNGRFRONT-5015
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом нужно будет авторизовываться в этом же браузере
              Пользователь А и Б состоят в канале с историей сообщений. Пользователь А - администратор, пользователь Б - подписчик
              Изначально авторизованы пользователем А
        - do: Открыть канал из description
        - assert: Открывается окно канала
        - do: Вызвать контекстное меню кликнув ПКМ / тапнув по сообщению из description
        - assert: Появляется контекстное меню, в котором есть пункт "Добавить в сохраненные"
        - do: Нажать "Добавить в сохраненные"
        - assert: На короткое время в окне чата всплывает сообщение о том, что сообщение сохранено
        - do: Открыть чат "Сохраненные сообщения" и проверить наличие сохраненного сообщения
        - assert: Сохраненное сообщение отображается в окне чата в виде Forward
        - do: Повторить шаги 1-5 для пользователя Б
        - assert: Сохраненное сообщение отображается в окне чата в виде Forward

    В меню есть кнопка Forward[manual]:
        - tags: [advanced_smoke]
        - automation: MSSNGRFRONT-5015
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом нужно будет авторизовываться в этом же браузере
              Пользователь А и Б состоят в канале с историей сообщений. Пользователь А - администратор, пользователь Б - подписчик
              Изначально авторизованы пользователем А
        - do: Открыть канал из description
        - assert: Открывается окно канала
        - do: Вызвать контекстное меню кликнув ПКМ / тапнув по сообщению из description
        - assert: Появляется контекстное меню
        - do: Нажать на пункт "Выбрать"
        - assert: Вызывается мультивыбор. В нижнем меню есть пункт "Переслать" для выбранных сообщений
        - do: Нажать "Переслать"
        - assert: Появляется список чатов для пересылки сообщения
        - do: Выбрать любой чат из списка, кроме канала откуда делается Forward
        - assert: |
              Открылось окно выбранного чата
              Фокус курсора в поле ввода
              Над полем ввода появилась плашка Forward
        - do: Ввести в поле ввода любой текст и нажать кнопку "Отправить"
        - assert: |
              Форвард корректно отображается в окне чата
              Вместо автора видно название канала
        - do: Повторить шаги 1-11 для пользователя Б
        - assert: |
              Форвард корректно отображается в окне чата
              Вместо автора видно название канала

files:
    - tests/hermione/suites/messenger/channels/context-menu.common.hermione.ts

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
