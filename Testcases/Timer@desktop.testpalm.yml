feature: Таймер

counter: /$page/$main/$result[@wizard_name="timer"]

params:
  foreverdata: '2950075779'

specs:
  Внешний вид:
    - do: получить выдачу по запросу 'foreverdata'
    - tech: сработал серверный счётчик /$page/$main/$result[@wizard_name="timer"]/timer
    - assert: на выдаче есть быстрый ответ 'Таймер'
    - screenshot: пример внешнего вида [not_started]
    - do: |
        очистить поле ввода минут,
        ввести значение '1' в поле ввода секунд,
        нажать кнопку 'Запустить'
    - tech: сработал счётчик /$page/$main/$result[@wizard_name="timer"]/timer/start
    - assert: таймер запустился
    - screenshot: пример внешнего вида [started]
    - do: подождать 1 секунду
    - assert: |
        сработал таймер,
        звучит звуковой сигнал
    - screenshot: пример внешнего вида [finished]
    - do: нажать кнопку 'Остановить'
    - tech: сработал счётчик /$page/$main/$result[@wizard_name="timer"]/timer/stop
    - assert: |
        звуковой сигнал прекратился,
        таймер перешел в изначальное состояние
    - screenshot: пример внешнего вида [not_started_again]

  Редактирование формы:
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче есть быстрый ответ 'Таймер'
    - do: кликнуть на поле ввода минут
    - assert: было выделено текущее значение в поле ввода
    - screenshot: пример внешнего вида [focused]
    - do: очистить поле ввода минут
    - assert: кнопка 'Запустить' стала неактивной
    - screenshot: пример внешнего вида [disabled_controls]
    - do: |
        ввести значение '99' в поле ввода часов,
        ввести значение '59' в поле ввода минут,
        ввести значение '59' в поле ввода секунд
    - assert: значения ввелись, кнопка 'Запустить' стала активной
    - screenshot: пример внешнего вида [filled]
    - do: нажать на кнопку 'Запустить'
    - assert: таймер запустился
    - screenshot: пример внешнего вида [started]
    - do: |
        подождать 1 секунду,
        нажать на кнопку 'Пауза',
        затем нажать на кнопку 'Сбросить'
    - assert: |
        таймер перешел в изначальное состояние,
        в полях часы:минуты:секунды заполнены значения 99:59:59
    - screenshot: пример внешнего вида [after_reset]

  Пауза:
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче есть быстрый ответ 'Таймер'
    - do: |
        нажать на кнопку 'Запустить',
        затем нажать на кнопку 'Пауза'
    - tech: сработал счётчик /$page/$main/$result[@wizard_name="timer"]/timer/pause
    - assert: таймер стоит на паузе, отображаются кнопки 'Сбросить' и 'Продолжить'
    - screenshot: пример внешнего вида [paused_controls]
    - do: нажать на кнопку 'Продложить'
    - tech: сработал счётчик /$page/$main/$result[@wizard_name="timer"]/timer/resume
    - assert: таймер продолжил отсчёт, отображается кнопка 'Пауза'
    - screenshot: пример внешнего вида [resumed_controls]

  Полноэкранный режим:
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче есть быстрый ответ 'Таймер'
    - do: |
        нажать на кнопку 'Запустить',
        затем нажать на кнопку 'Пауза',
        затем нажать на иконку полноэкранного режима (в правом верхнем углу таймера)
    - tech: сработал счётчик /$page/$main/$result[@wizard_name="timer"]/timer/toggle-fullscreen
    - assert: таймер перешёл в полноэкранный режим
    - screenshot: пример внешнего вида [fullscreen]
    - do: кликнуть мышкой на кнопку 'Пробел' внизу страницы
    - tech: сработал счётчик /$page/$main/$result[@wizard_name="timer"]/timer/space-fullscreen
    - assert: таймер возобновил отсчёт
    - do: подождать 3 секунды, при этом не совершая никаких движений мышкой
    - assert: пропали кнопки управления таймером, внизу страницы появился логотип "Яндекс"
    - screenshot: пример внешнего вида [fullscreen-logo]
    - do: подвигать мышкой
    - assert: логотип "Яндекс" исчез, вместо него появились кнопки управления таймером
    - do: кликнуть мышкой на кнопку 'Esc' внизу страницы
    - tech: сработал счётчик /$page/$main/$result[@wizard_name="timer"]/timer/esc-fullscreen
    - assert: таймер вышел из полноэкранного режима
    - do: кликнуть на иконку полноэкранного режима (в правом верхнем углу таймера)
    - assert: таймер перешёл в полноэкранный режим
    - do: кликнуть на крестик (в правом верхнем углу таймера)
    - tech: сработал счётчик /$page/$main/$result[@wizard_name="timer"]/timer/toggle-fullscreen
    - assert: таймер вышел из полноэкранного режима

  Полноэкранный режим - горячие клавиши:
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче есть быстрый ответ 'Таймер'
    - do: |
        нажать на кнопку 'Запустить',
        затем нажать на иконку полноэкранного режима (в правом верхнем углу таймера)
    - assert: таймер перешёл в полноэкранный режим
    - do: нажать на клавиатуре клавишу 'пробел'
    - assert: таймер остановил отсчёт, внизу страницы появилась подпись 'пробел - возобновить таймер'
    - screenshot: пример внешнего вида [fullscreen-controls-paused]
    - do: нажать на клавиатуре клавишу 'esc'
    - assert: таймер вышел из полноэкранного режима

files:
  - src/features/Timer/Timer.test/Timer@desktop.hermione.js

v-team: Facts

tlds: all
