feature: Спортивный сюжет

description: Сюжет - это основная сущность сервиса, которая состоит из нескольких блоков. Блоки заголовка, суммаризации и медиаблок позволяют пользователю ознакомиться с кратким содержанием сюжета, блок Подробнее о событии предоставляет пользователю выбор информационного агентства для полного ознакомления с сюжетом

specs:
  имеет внешний вид [manual]:
    - do: открыть любой сюжет на сервисе
    - assert: |
        на странице сюжета отображается заголовок с источником над ним,
        присутствует суммаризация сюжета, соответствующая заголовку, и наименование источника,
        сюжет может содержать медиаблок с фото или видео,
        сюжет может содержать блок 'С чего все начиналось' ,
        ниже может отображаться блок 'Подробнее о событии' с тремя источниками
    - assert: внешний вид соответствует скриншоту - https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202022-02-10%20в%2012.56.00.png
    - do: установите ширину экрана >1260px. Обязательно проверьте это, выполнив в консоли команду "window.innerWidth" (просто скопируйте то, что написано в скобках и вставьте в консоль). Те цифры, которые у вас будут показаны - и есть ширина окна браузера. Если значение <1260px, необходимо увеличить ширину и выполнить ее проверку в консоли еще раз. И так до тех пор, пока вы не получите нужное значение
    - do: прочитать заголовки в виджете "Главное" справа
    - assert: заголовки всех новостей спортивные

  должен содержать ссылки на источник [manual]:
    - do: открыть любой сюжет на сервисе
    - assert: |
        открывается страница выбранного сюжета,
        над заголовком отображается название источника,
        присутствует суммаризация сюжета, соответствующая заголовку, и наименование источника
    - do: кликнуть на название источника над заголовком
    - assert: в новой вкладке открывается новость от источника
    - do: вернуться на страницу сюжета Яндекс.Спорт
    - do: тапнуть по наименованию источника в блоке суммаризации (выделено серым шрифтом - https://jing.yandex-team.ru/files/kossakovskaya/2021-10-18_20-35-03.png)
    - assert: |
        в новой вкладке (либо в текущей, не имеет значения в данном случае) открылась новость от выбранного источника,
        тема сюжета в источнике совпадает с темой сюжета, с которого вы перешли по ссылке источника,
        в урле присутствуют параметры utm_source=yxsport, utm_medium=desktop

  может содержать блок 'Подробнее о событии' [manual]:
    - do: открыть сюжет из блока 'Рекомендуем'
    - assert: в сюжете под суммаризацией, цитатой или блоком 'С чего все начиналось' может присутствовать блок 'Подробнее о событии' с источниками по сюжету (до трех)
    - assert: внешний вид - https://jing.yandex-team.ru/files/e-l-agafon0va/2020-01-10-5.png
    - do: кликнуть по любому источнику в списке
    - assert: в новой вкладке открывается страница с новостью от источника

  может содержать ссылку на все источники по сюжету [manual]:
    - do: открыть сюжет, который содержит блок 'Подробнее о событии' под суммаризацией, цитатой или блоком 'С чего все начиналось'
    - assert: блок 'Подробнее о событии' содержит до трех источников по сюжету
    - do: кликнуть по заголовку 'Подробнее о событии'
    - assert: в текущей вкладке осуществляется переход на страницу со всеми источниками по сюжету

  может содержать:
    цитату [manual]:
      - do: открыть архивный сюжет, который содержит цитату https://yandex.ru/sport/story/Gimnastka_Soldatova_priznalas_chto_bolna_bulimiej--b0ee0bdba27d1c5ec98b1390656be6d8?persistent_id=87826950
      - assert:
          после медиаблока и описания отображается цитата на сером фоне, слева от цитаты присутствует аватарка, в начале -  имя-фамилия или фио автора
          внешний вид - https://jing.yandex-team.ru/files/an-smirn0v/shot_210407_145716.png

    блок 'С чего все началось' [manual]:
      - do: открыть сюжет, который содержит блок 'С чего все началось', например, https://yandex.ru/sport/story/Zasluzhennyj_master_sporta_SSSR_YUrij_Vlasov_skonchalsya_v_vozraste_85_let--da4b35400d2f7bd059b403bf84308184?lang=ru&wan=1&stid=Qtiamwg8gG4QFjRIdoeY&t=1613467113&persistent_id=129716459
          над блоком 'Подробнее о событии' располагается блок 'С чего все началось'(Если блок не отображается, открыть другой сюжет), который содержит иконку издания, заголовок, аннотацию и название источника,
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-10-18_20-38-32.png
      - do: кликнуть по названию источника
      - assert: в новой вкладке открывается новость от источника
      - do: вернуться на вкладку с сюжетом на Яндекс.Спорт
      - do: кликнуть по заголовку в блоке
      - assert: в новой вкладке открывается та же новость от источника

    медиаблок с фото и видео по сюжету [manual]:
      - do: открыть сюжет с видео из топа на Главной
      - assert: |
          в медиаблоке, слева от основного фото или видео есть список медиаэлементов с источником,
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-08-17_13-36-00.png
      - do: кликнуть по иконке "Фото"
      - assert: |
          вместо видео отображается фото с подписанным источником в левом верхнем углу,
          в этой же вкладке вместо видео открывается карусель со всеми фото по сюжету,
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-08-17_13-43-55.png
      - do: поскролить карусель под основным фото вправо-влево
      - assert: |
          карусель скроллиться корректно, все превью подгружаются,
          пустых превью нет
      - do: кликнуть по иконке Плей ("Видео")
      - assert: вместо фото отображается видео, которое открылось в сюжете изначально

    видео с автовоспроизведением [manual]:
      - do: открыть нетраурный сюжет, содержащий видео
      - do: |
          ВАЖНО! Так выглядит ВЫКЛЮЧЕННЫЙ тумблер "Автовоспроизведение" https://jing.yandex-team.ru/files/vasekerka/2021-09-29_15-08-19.png, если у вас тумблер в таком положении включать его на этом шаге НЕ нужно,
          ВКЛЮЧЕННЫЙ тумблер выглядит так https://jing.yandex-team.ru/files/vasekerka/2021-09-29_15-12-01.png, в таком случае его необходимо отключить кликом по нему и обновить страницу
      - assert: |
          на секунду появляется желтый спиннер в центре видео, затем вместо спиннера появляется иконка "Плей",
          видео не воспроизводится автоматически,
          справа от кнопки "Видео" присутствует иконка "Фото" и выключенный тумблер "Автовоспроизведение"
      - do: нажать на кнопку "Плей" и включить звук у видео, если иконка звука перечеркнута (если нет - оставить настройку звука как есть)
      - assert: видео вопроизводится со звуком
      - do: включить Автоплей видео
      - do: обновить страницу
      - assert: |
          обновляется страница сюжета, видео воспроизводится автоматически (возможно автовоспроизведение рекламы),
          обратите внимание! видео может проигрываться как со звуком, так и без - это зависит от ваших предыдущих настроек (и/или от эксперимента)
      - do: нажать на само видео
      - assert: видео становиться на паузу
      - do: выключить Автоплей видео
      - do: обновить страницу
      - assert: видео не воспроизводится автоматически

#    видео в траурном сюжете [manual]:
#      - tags: no_assessors
#      - do: открыть траурный сюжет, который содержит видео (https://yandex.ru/sport/story/Portugalskij_motogonshhik_Gonsalvesh_pogib_vo_vremya_ralli_Dakar--88dcd853ddf61549f49a7fe97949d200?lang=ru&stid=6vkGWR80MuwHfwY48--d&t=1578910136&tt=true&persistent_id=84574308)
#      - assert: |
#          происходит переход на сюжет с видео, видео не воспроизводится автоматически
#          сверху видео есть иконка Плей, иконка Изображение, отсутствует троеточие (настройка автоплея)
#      - do: тапнуть по кнопке плей
#      - assert: видео воспроизводится, без звука

  подгружает под сюжетом ленту новостей [manual]:
    - do: открыть любой сюжет на Главной
    - do: проскроллить сюжет ниже блока 'Подробнее о событии'
    - assert: отображается название блока "Новости", ниже подгружается новостная лента
    - do: проскроллить страницу вниз
    - assert: отображается спинер на серой подложке
    - assert: через какое-то время спинер пропадает, подгружается новая порция карточек

  #содержит карусель видео в ленте  [manual]:
  #  - do: перейти в рубрику Футбол
  #  - do: открыть сюжет из рубрики
  #  - do: проскроллить сюжет ниже блока 'Подробнее о событии'
  #  - assert: отображается название блока "Новости", ниже подгружается новостная лента
  #  - assert: |
  #      в ленте отображается хотя бы одна карусель с видео (если карусели с видео нет, открыть другой сюжет),
  #      Обратите внимание! карусель не должны быть сразу в сюжете, вам нужно полистать ленту новостей после сюжета!
  #      названия карусели корректны,
  #      внешний вид - https://jing.yandex-team.ru/files/e-l-agafon0va/2020-01-13-4.png
  #  - do: полистать любую карусель вправо-влево
  #  - assert: |
  #      карусель листается,
  #      длинные названия матчей корректно обрезаются многоточием
  #  - do: тапнуть по любому видео
  #  - assert: в новой вкладке открывается соответсвующий матч, который содержит видео, на которое вы тапнули
#   может содержать коллекции в ленте [manual]:
#     - automation: NERPADUTY-54
#     - do: открыть любой сюжет на Главной
#     - do: проскроллить сюжет ниже блока 'Подробнее о событии'
#     - assert: отображается название блока "Новости", ниже подгружается новостная лента
#     - assert: |
#         в ленте отображаются коллекции,
#         внешний вид - https://jing.yandex-team.ru/files/e-l-agafon0va/2020-01-13-3.png
#     - do: полистать коллекции вправо-влево
#     - assert: карточки листаются
#     - do: кликнуть на любую карточку
#     - assert: |
#         в отдельной вкладке открывается страница коллекции

  #подгружает под сюжетом ленту новостей из рубрики, из которой был сделан переход [manual]:

#  содержит комментарии [manual]:
#    - assert: комментарии писать строго ЗАПРЕЩЕНО
#    - do: открыть любой сюжет на сервисе
#    - assert: |
#        под аннотацией отображается бабл, слово Комментировать и счетчик комментариев (счетчик может не отображаться),
#        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-08-17_13-36-00.png
  архивный отображается корректно [manual]:
    - do: открыть архивный сюжет на сервисе, например, https://yandex.ru/sport/story/Konor_MakGregor_poyavilsya_na_duehli_vzglyadov_KHabiba_i_Gehtzhi--585217fd3db10c7ed4ea24aa3686d608
    - assert: |
        сюжет отображается корректно,
        присутсвуют заголовок, аннотация сюжета и ссылка В источнике
        над заголовком отображается источник,
        отсутствует блок с комментариями и лайками,
        может остутствовать миедиаблок
    - assert: внешний вид соответствует скриншоту - https://jing.yandex-team.ru/files/an-smirn0v/shot_210407_150540.png
    - do: перейти по ссылке 'В источнике'
    - assert: в новой вкладке открывается новость от источника
    - do: вернуться к сюжету, кликнуть по любому источнику из блока Подробнее о событии
    - assert: в новой вкладке открывается новость от источника
    - do: вернуться к сюжету, проскроллить сюжет ниже блока 'Подробнее о событии'
    - assert: отображается название блока "Новости", ниже подгружается новостная лента

# дивной карточки спорта на морде больше нет
#  открывается с главной страницы Яндекса [manual]:
#    - tags:
#      - backend_sport
#    - do: открыть главную страницу yandex.ru
#    - do: проскроллить страницу вниз до дивной карточки Спорта
#    - assert: |
#          на главной Яндекса присутствует дивная карточка Спорта,
#          дивная карточка состоит из карусели карточек Спорта, содержащих картинку и заголовок,
#          внешний вид https://jing.yandex-team.ru/files/nightsonne/2020-12-07_19-00-27.png
#    - do: кликнуть по картинке первой карточки в карусели
#    - assert: |
#          открывается сюжет в новой вкладке,
#          тематика сюжета та же, что и в дивной карточке (может отличаться заголовок и источник),
#          сюжет имеет заголовок и источник над ним,
#          присутствует аннотация сюжета, соответствующая заголовку, и ссылка В источнике,
#          ниже расположен бабл Комментировать,
#          сюжет может содержать медиаблок с фото или видео,
#          сюжет может содержать блок 'С чего все начиналось',
#          ниже может отображаться блок 'Подробнее о событии' с тремя источниками,
#          под сюжетом расположен рекламный блок,
#          под рекламой находится лента
#    - do: кликнуть на название источника над заголовком
#    - assert: в новой вкладке открывается новость от источника
#    - do: вернуться на страницу сюжета
#    - do: перейти по ссылке 'В источнике'
#    - assert: в новой вкладке открывается та же новость от источника
#    - do: вернуться на страницу сюжета
#    - assert: в сюжете под аннотацией, цитатой или блоком 'С чего все начиналось' может присутствовать блок 'Подробнее о событии' с источниками по сюжету (до трех)
#    - assert: внешний вид - https://jing.yandex-team.ru/files/e-l-agafon0va/2020-01-10-5.png
#    - do: тапнуть по любому источнику в списке
#    - assert: в новой вкладке открывается страница с новостью от источника
#    - do: вернуться на страницу сюжета
#    - do: проскроллить вертикаль вниз до спиннера
#    - assert: |
#        под сюжетом грузится лента,
#        после спиннера грузится новая порция карточек
#    - do: вернуться на yandex.ru
#    - do: проскроллить до дивной карточки Спорта и прокликать еще 2-3 карточки
#    - assert: |
#        каждый раз открывается сюжет в новой вкладке,
#        тематика каждого сюжета та же, что и в дивной карточке (может отличаться заголовок и источник)

  содержит блок суммаризации [manual]:
    - tags:
      - backend_sport
    - do: открыть любой сюжет на сервисе
    - assert: |
        страница сюжета открывается в той же вкладке,
        блок суммаризации в свернутом состоянии,
        отображается первый пункт и ссылка "Читать далее"
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-10-18_19-55-17.png
    - do: нажать на ссылку "Читать далее"
    - assert: |
        раскрывается весь блок суммаризации,
        отображаются следующие 3 пункта, всего в блоке должно быть 4 пункта,
        в конце блока суммаризации отображается ссылка "Свернуть",
        все пункты суммаризации относятся к теме сюжета,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-10-18_19-57-25.png

files: []

tags: backend_sport

qa-engineer: nightsonne

manager: mrwhite

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
