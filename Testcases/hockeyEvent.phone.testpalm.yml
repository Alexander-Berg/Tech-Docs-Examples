feature: Страница хоккейного матча

specs-integration:
  содержит рекламные блоки и ленту новостей:
    - do: перейти на страницу хоккейного матча по клику на матч
    - assert: |
        новостные карточки спорта отображаются под блоками,
        в новостой ленте присутствуют рекламные блоки
    - do: кликнуть на любую рубрику в рубрикаторе
    - assert: |
        происходит переход в выбранную рубрику,
        в рубрикаторе выделена выбранная рубрика

  содержит Новости хоккея:
    - tags: 
      - backend_sport  
    - do: тапнуть на вкладку "Вчера" или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу хоккейного матча тапом на любой матч
    - do: поскроллить матч ниже блоков видео, "Ход матча", "Состав" до блока "Новости хоккея"
    - assert: |
        страница матча содержит новостные карточки,
        Обратите внимание! блока "Состав" может не быть - это ок, заводить на такое баги не нужно!
    - do: проскроллить страницу матча до лоадера
    - assert: загружаются новые карточки
    - do: проскроллить страницу на несколько порций карточек
    - assert: |
        новостной блок помимо новостных карточек может содержать карточки с каруселями видео и рекламные блоки (карусели видео могут отсуствовать, это ок, заводить баг на такое не нужно),
        карусели видео скроллятся (если они есть)
    - do: тапнуть по заголовку или картинке любой новостной карточки
    - assert: в той же вкладке открывается сюжет
    - do: перейти назад на страницу хоккейного матча
    - assert: страница отображается корректно, новостные карточки присутствуют на странице
    - do: тапнуть по любому видео в любой карусели (если в матче все видео имеют надпись 'На сайте КХЛ' то откройте матч из чемпионата  НХЛ)
    - assert: |
        в текущей вкладке в просмотрщике открывается видео,
        ВНИМАНИЕ! Если вы проходите кейс не из РФ - вместо видео может отображаться заглушка "Нет доступных лицензий", и это не баг (в этом случае пропустите шаг),
        внешний вид для пользователя не из России - https://jing.yandex-team.ru/files/vasekerka/2022-01-11_12-58-09.png    

  может переключать состав команд в блоке Состав:
    - do: тапнуть по переключателю в блоке Состав
    - assert: |
        с анимацией отобразился состав второй команды,
        в блоке с переключателем выделена вторая команда

  может переключать федерации в блоке Турнирная таблица:
    - do: тапнуть по переключателю Запад в блоке Турнирная таблица
    - assert: |
        с анимацией отобразился состав западной федерации,
        в блоке с переключателем выделен Запад

specs:
  aliases:
    &goTo
      - do: открыть главную страницу сервиса Я.Спорт
      - do: тапнуть на Матч-центр в рубрикаторе
      - assert: |
          произошел переход в матч-центр,
          в рубрикаторе выделена рубрика Матч-центр,
          в подрубрикаторе выделена вкладка Футбол и открыт футбольный календарь
      - do: тапнуть на Хоккей в подрубрикаторе матч центра https://jing.yandex-team.ru/files/weberxks/Screen%20Shot%202022-03-03%20at%2015.41.14.png
      - assert: |
          открыт хоккейный календарь на вкладке Сегодня,
          хоккейный календарь содержит дата-пикер https://jing.yandex-team.ru/files/weberxks/Screen%20Shot%202022-03-03%20at%2015.42.32.png,
          обратите внимание! если матчей нет ни вчера, ни сегодня, ни завтра - ни одна вкладка календаря не будет выделена, а будет заглушка о том, что событий не найдено - это ок, заводить на такое баги не нужно! если матчи есть вчера - будет выделена вкладка "Вчера"

  может содержать иконку-индикатор видео:
    - *goTo
    - do: тапнуть на вкладку Вчера или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: |
          открыт список матчей за вчера (или за 4-5 декабря),
          некоторые матчи содержат иконку-индикатор видео, 
          внешний вид - https://jing.yandex-team.ru/files/nightsonne/2019-11-11_16-18-53%20%282%29.png

  может содержать просмотрщик видео для прошедших матчей [manual]:
    - reasonNotToAuto:
      - Нет возможности автоматизировать воспроизведение видео.
    - do: открыть матч https://yandex.ru/sport/event/m540077
    - assert: |
        отображается информация о матче, в том числе медиаблок "Видео о матче",
        внещний вид - https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-29%20в%2015.30.40.png ,
        Обратите внимание! Если вы находитесь не в РФ - вместо видео у вас будет отображена заглушка "Нет доступных лицензий". В данном случае это ок, заводить на такое баги не нужно!
    - do: нажать на любое видео без иконки "Смотреть с плюсом"
    - assert: |
        открылся просмотрщик видео,
        в основном блоке играет видео, которое вы открыли ранее,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-10-20_16-48-26.png ,
        ОБРАТИТЕ ВНИМАНИЕ! Если вы проходите кейс на устройствах < 10 ios или < 5 android вместо видео будет появляться заглушка "Ваш браузер устарел и не может воспроизвести трансляцию",
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2022-04-08_18-59-38.png     
    - do: просмотреть видео до конца (можно просто промотать видео ближе к концу и дождаться окончания воспроизведения)
    - assert: |
        после окончания воспроизведения происходит подскрол к следующему видео, которое было снизу,
        видео воспроизводится автоматически
    - do: проскролить карусель видео в просмотрщике снизу вверх на нексколько видео вниз
    - assert: каждое видео начинает воспроизведение сначала
    - do: включить звук в видео, если не был включен и закрыть просмотрщик тапом по крестику справа вверху страницы
    - assert: |
        закрылся просмотрщик, видео не воспроизводится в фоне (нет звука),
        отображается страница матча https://yandex.ru/sport/event/m540077 (в урле могут присутствовать дополнительные параметры, это ок)

  может содержать видео в мачте КХЛ [manual]:
    - reasonNotToAuto:
      - Данные блоки уже проверяются в других автотестах
    - tags: 
      - backend_sport
    - do: Перейти на страницу хоккейного календаря https://yandex.ru/sport/calendar/hockey
    - do: тапнуть на дата-пикер и установить дату 13 октября 2021
    - assert: |
          открыт список матчей за 13 октября,
          некоторые матчи содержат иконку-индикатор видео,
          внешний вид - https://jing.yandex-team.ru/files/nightsonne/2019-11-11_16-18-53%20%282%29.png
    - do: перейти на страницу хоккейного матча лиги КХЛ тапом на матч с иконкой видео
    - assert: |
          страница матча может содержать блок c видео,
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-10-14_16-34-41.png
    - do: тапнуть на кнопку плей по центру видео
    - assert: |
          в новой вкладке открывается страница сервиса video.khl.ru,
          видео на странице соответствует тому матчу, с которого вы перешли
    - do: вернуться на сервис Спорт и поскроллить карусель видео
    - assert: | 
          карусель скроллится,
          на первом видео-превью отображается время - длительность видео,
          на последующих видео время не отображается,
          каждое видео содержит подпись момента (максимум 3 строки),
          длинные названия моментов корректно обрезаются многоточием
    - do: тапнуть на любое видео в карусели
    - assert: |
          в новой вкладке открывается страница сервиса video.khl.ru
          видео на странице соответствует тому матчу, с которого вы перешли        

  может содержать видео в мачте НХЛ [manual]:
    - reasonNotToAuto:
      - Аналогичные блоки уже проверяются в других автотестах
    - tags: 
      - backend_sport
    - do: тапнуть на дата-пикер и установить дату 12 мая 2021
    - assert: открыт список матчей за 12 мая
    - do: авторизоваться пользователем с подпиской Плюс (логин и пароль можно взять тут - https://wiki.yandex-team.ru/eva/testing/projects/nerpa/#loginyiparolidljatestovyxpolzovatelejjspodpiskojjpljusa)
    - do: перейти на страницу хоккейного матча НХЛ тапом на матч
    - assert: |
          страница матча может содержать блок "Видео о матче", 
          внешний вид - https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-30%20в%2014.19.39.png,
    - do: поскроллить карусель видео
    - assert: | 
          карусель скроллится,
          на видео-превью отображается время - длительность видео,
          каждое видео содержит подпись момента (может быть 2-3 строки),
          длинные названия моментов корректно обрезаются многоточием
    - do: тапнуть на любое видео в карусели
    - assert: |
          открывается просмотрщик,
          видео воспроизводится сначала,
          ОБРАТИТЕ ВНИМАНИЕ! если вы тапаете по видео с кнопкой "Весь матч" - происходит переход на страницу Кинопоиска, страница Кинопоиска может быть пустой - это ОК.
          ВНИМАНИЕ! Если вы проходите кейс не из РФ - вместо видео может отображаться заглушка "Нет доступных лицензий", и это не баг (в этом случае пропустите шаг),
          внешний вид для пользователя не из России - https://jing.yandex-team.ru/files/vasekerka/2022-01-11_12-58-09.png   

  содержит переход на сайт КХЛ для видео в прошедших матчах турнира КХЛ:
    - do: открыть матч https://yandex.ru/sport/event/m539525
    - assert: |
        на странице отображается медиаблок "Видео о матче",
        внешний вид - https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-29%20в%2015.32.09.png
    - do: нажать на любую кнопку "На сайте КХЛ"
    - assert: |
        в новой вкладке открывается видео на сайте https://video.khl.ru (в урле могут быть параметры, это ок, в кейсе указано лишь начало урла, какое оно должно быть),
        обратите внимание! это сторонний сайт, не нужно заводить баги, если на этом сайте что-то сломано!

  может содержать видеопревью с прямой трансляцией:
    - do: открыть идущий матч NHL
    - assert: |
        отображается видеопревью с прямой трансляцией

  из списка прошедших матчей содержит хоккейный виджет:
    - tags: 
      - backend_sport  
    - *goTo
    - do: тапнуть на вкладку Вчера или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу хоккейного матча тапом на матч со счетом
    - assert: |
          страница матча содержит хоккейный виджет,
          виджет содержит название лиги, статус матча, для завершенных матчей - дату завершения, названия команд, счет,
          при победе по буллитам или в овертайме виджет содержит соответствующее указание под названием лиги,
          счет и название команды-победителя выделено жирным шрифтом,
          внешний вид - https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-29%20в%2015.32.49.png

  из блока 'Завтра' содержит хоккейный виджет [manual]:
    - tags: backend_sport  
    - reasonNotToAuto:
      - Нет возможности автоматизировать, т.к. во внутренних функциях берется не время запроса из данных, а new Date(), поэтому "завтра" становится "сегодня" на следующий день, а тест падает.
    - *goTo
    - do: тапнуть на вкладку Завтра. Обратите внимание! До сентября 2022 года матчей по хоккею не предвидится. Если при тапе на "Завтра" матчей нет - пропустите кейс
    - do: перейти на страницу хоккейного матча тапом на матч в разделе 'Завтра' (если матчей не найдено, в календаре выберите любую будущую дату, где подберутся матчи - например, 14 января 2022)
    - assert: |
          страница матча содержит хоккейный виджет,
          виджет содержит название лиги, названия команд, время начала матча, надпись 'Завтра',
          внешний вид - https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-29%20в%2015.33.34.png,
          обратите внимание! если вы выбирали другую дату, то вместо "Завтра" будет указана выбранная вами дата

  из списка прошедших матчей может содержать блок Ход матча:
    - tags: 
      - backend_sport  
    - *goTo
    - do: тапнуть на вкладку "Вчера" или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу хоккейного матча тапом на матч со счетом
    - assert: |
        страница матча может содержать блок "Ход матча",
        обратите внимание! в открытом вами матче может не быть блока "Ход матча" - это нормально, баг заводить не надо!
        если вы открыли матч, а блока "Ход матча" нет, можно открыть конктретный матч, где блок есть, https://yandex.ru/sport/event/m512516,
        блок содержит логотипы команд или флаги стран,
        в блоке отображаются все события матча с подписью характера события и времения,
        голы отмечены значком шайбы, буллиты - иконкой с буквой Б поверх шайбы,
        внешний вид - https://jing.yandex-team.ru/files/nightsonne/2019-11-11_17-35-36.png

  из списка прошедших матчей может содержать блок Состав:
    - tags: 
      - backend_sport  
    - *goTo
    - do: тапнуть на вкладку "Вчера" или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу хоккейного матча тапом на матч со счетом
    - assert: |
        страница матча может содержать блок "Состав" (Если на странице матча отсутствует блок "Состав" - выберите другой матч),
        Обратите внимание! Блока "Состав" не будет, если вы открыли матч из турнира КХЛ (https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-29%20в%2015.35.14.png). Это ок! Заводить на такое баги не нужно!,
        в блоке есть переключатель состава команд с лого и названием команд,
        длинные названия команд корректно обрезаются многоточнием в переключателе и не выходят за рамки блока переключателя,
        по умолчанию отображается состав первой команды,
        рядом с фамилией игрока, забившего гол, есть иконка шайбы и счетчик с количеством голов,
        Обратите внимание! иконка шайбы может отсутствовать - это ок и баги на такое заводить не нужно!,
        внешний вид - https://jing.yandex-team.ru/files/nightsonne/2019-11-11_17-14-57.png
    - do: тапнуть по переключателю
    - assert: |
        с анимацией отобразился состав второй команды,
        в блоке с переключателем выделена вторая команда

  из списка прошедших матчей содержит иконку шайбы в блоке "Состав" [manual]:
    - reasonNotToAuto:
      - Уже есть автотест со скриншотом блока состав, где также видно иконку шайбы.
    - *goTo
    - do: перейти на страницу хоккейного матча https://yandex.ru/sport/event/m540226
    - assert: |
        страница матча содержит блок "Состав",
        в блоке есть переключатель состава команд с лого и названием команд,
        длинные названия команд корректно обрезаются многоточнием в переключателе и не выходят за рамки блока переключателя,
        по умолчанию отображается состав первой команды,
        рядом с фамилией игрока, забившего гол, есть иконка шайбы и счетчик с количеством голов,
        внешний вид - https://jing.yandex-team.ru/files/nightsonne/2019-11-11_17-14-57.png
    - do: тапнуть по переключателю
    - assert: |
        с анимацией отобразился состав второй команды,
        в блоке с переключателем выделена вторая команда

#закомментировала, так как таких новостей сейчас не найти
#  из списка прошедших матчей может содержать карточки о связанных с матчем новостях [manual]:
#    - *goTo
#    - do: тапнуть на вкладку Вчера или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 декабря 2020
#    - assert: открыт список матчей за вчера (или за 5 декабря)
#    - do: перейти на страницу хоккейного матча тапом на матч со счетом
#    - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав', но ДО раздела 'Новости хоккея'
#    - assert: |
#        страница матча может содержать карточки о связанных с матчем новостях (если в данном матче карточек нет, открыть другой матч, карточки могут и отсутствовать, баг заводить не нужно),
#        карточки о связанных с матчем новостях (при наличии располагаются над заголовком Новости хоккея) содержат иконку добавления в избранное (но не содержат иконку лайка и комментария),
#        скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-11_17-41-40.png
#    - do: тапнуть по любой карточке о связанных с матчем новостях
#    - assert: в новой вкладке открывается страница источника

  из списка прошедших матчей может содержать турнирную таблицу:
    - tags: 
      - backend_sport  
    - *goTo
    - do: тапнуть на вкладку Вчера или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу хоккейного матча тапом на матч со счетом
    - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав' (Обратите внимание! Блока "Состав" не будет, если вы открыли матч из турнира КХЛ (https://jing.yandex-team.ru/files/weberxks/Screen%20Shot%202022-03-03%20at%2015.47.20.png). Это ок! Заводить на такое баги не нужно!)
    - assert: |
        страница матча может содержать блок 'Турнирная таблица' (если в данном матче блока нет, открыть другой матч),
        по умолчанию открыта вкладка той группы, к которой относятся команды данного матча,
        команды данного матча выделены жирным шрифтом,
        верстка таблицы корректна,
        внешний вид - https://jing.yandex-team.ru/files/nightsonne/2019-12-18_14-40-38.png
    - do: попереключать вкладки в таблице
    - assert: вкладки переключаются, отображается новый список команд

  из списка прошедших матчей может содержать блок Другие матчи:
    - tags: 
      - backend_sport  
    - *goTo
    - do: тапнуть на вкладку Вчера или если вчера матчей не было тапнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу хоккейного матча тапом на матч со счетом
    - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав', 'Турнирная таблица'
    - assert: |
        страница матча может содержать блок 'Другие матчи' (если в данном матче блока нет, открыть другой матч),
        блок содержит названия и лого команд, время, дату, счет (в зависимости от того прошел матч или нет),
        обратите внимание! время в блоке 'Другие матчи' отображается только для предстоящих матчей, для прошедших - дата или 'Вчера' (редко - 'Сегодня', если матч закончился сегодня),
        внизу есть кнопка 'Все матчи',
        верстка блока корректна,
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-07_12-21-10.png
    - do: тапнуть на любой матч в блоке 'Другие матчи'
    - assert: в той же вкладке открывается страница выбранного матча
    - do: вернуться назад
    - do: тапнуть на 'Все матчи'
    - assert: в той же вкладке открывается страница хоккейного календаря

files:
  - features/sport/event/hockeyEvent.phone.hermione.js
  - features/sport/event/hockeyEvent.phone.hermione.e2e.js


tags:
  - sport-neo
  - event

manager: mrwhite

qa-engineer: an-smirn0v

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
