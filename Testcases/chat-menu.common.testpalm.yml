feature: Меню чата

specs:

      beforeEach:
        - do: Перейти по ссылке "https://passport.yandex.ru" и авторизоваться.
        - assert: Авторизация прошла успешно.
        - do: В соседней вкладке открыть мессенджер.
        - assert: Открылся список чатов.
        - do: В списке чатов открыть любой чат, который соответствует описанию из description.
        - assert: Чат открыт.

      В шапке приватного чата есть кнопка вызова меню[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть приватный чат.
        - do: Проверить на наличие кнопки вызова меню (три точки) в шапке чата.
        - assert: Кнопка вызова меню (три точки) есть в шапке чата из description.
        - do: Тапнуть/Кликнуть ЛКМ на меню в шапке чата.
        - assert: Открылось контекстное меню.

      В шапке группового чата есть кнопка вызова меню[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть групповой чат.
        - do: Проверить на наличие кнопки вызова меню (три точки) в шапке чата из description.
        - assert: Кнопка вызова меню (три точки) есть в шапке чата.
        - do: Тапнуть/Кликнуть ЛКМ на меню в шапке чата.
        - assert: Открылось контекстное меню.

      В шапке чата с оператором Jivosite есть есть кнопка вызова меню[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть чат с оператором Jivosite.
        - do: Проверить на наличие кнопки вызова меню (три точки) в шапке чата из description.
        - assert: Кнопка вызова меню (три точки) есть в шапке чата.
        - do: Тапнуть/Кликнуть ЛКМ на меню в шапке чата.
        - assert: Открывается контекстное меню.

      Меню можно закрыть с помощью кнопки "ESC"[manual]:
        - automation:
        - description: |
              У авторизованного пользователя в списке чатов есть приватный чат / групповой чат
              Данный тест-кейс неактуален для мобильного клиента
        - do: Проверить на наличие кнопки вызова меню (три точки) в шапке чата из description.
        - assert: Кнопка вызова меню (три точки) есть в шапке чата.
        - do: Тапнуть/Кликнуть ЛКМ на меню в шапке чата.
        - assert: Открылось контекстное меню.
        - do: Нажать на кнопку "ESC" на клавиатуре.
        - assert: |
              Контекстное меню было закрыто
              Открыто окно чата

      Можно открыть карточку контакта, через меню (три точки) в шапке приватного чата[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть приватный чат.
        - do: Тапнуть/Кликнуть ЛКМ на меню (три точки) в шапке чата из description.
        - assert: Открылось контекстное меню.
        - do: В появившемся контекстном меню нажать на "Информация о чате"
        - assert: Открылась карточка контакта.

      Можно открыть карточку чата, через меню (три точки) в шапке группового чата[manual]:
        - tags: [advanced_smoke, b2b]
        - automation:
        - description: У авторизованного пользователя в списке чатов есть групповой чат.
        - do: Тапнуть/Кликнуть ЛКМ на меню (три точки) в шапке чата из description.
        - assert: Открылось контекстное меню управления чатом.
        - do: В появившемся контекстном меню нажать на “Информация о чате”
        - assert: Открылась карточка чата

      Можно открыть карточку чата, через меню (три точки) в шапке чата с оператором Jivosite[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть чат с оператором Jivosite.
        - do: Тапнуть/Кликнуть ЛКМ на меню (три точки) в шапке чата из description.
        - assert: Открылось контекстное меню управления чатом.
        - do: В появившемся контекстном меню нажать на “Информация о чате”
        - assert: Открылась карточка чата

      Можно отключить/включить уведомления через меню (три точки) в шапке приватного чата[manual]:
        - automation:
        - description:
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом можно авторизоваться в другом браузере/на девайсе.
              У пользователя А (проверяемый) и Б (вспомогательный) есть приватный чат, в котором включены уведомления.
        - do: Пользователем А тапнуть/кликнуть ЛКМ на меню (три точки) в шапке чата из description.
        - assert: Открылось контекстное меню.
        - do: Тапнуть/Кликнуть ЛКМ по пункту "Отключить уведомления"
        - assert: |
              Статус настройки меняется.
              Контекстное меню закрывается.
        - do: Открыть другой чат.
        - assert: Чат открыт.
        - do: Пользователем Б отправить сообщение в чат из description.
        - assert: |
              У пользователя А нет нотификации о новом сообщении.
              В превью этого чата появляется счетчик непрочитанных сообщений (серого цвета).
        - do: Пользователем А открыть чат из description и тапнуть/кликнуть ЛКМ на меню (три точки).
        - assert: |
              Открывается окно чата.
              Появляется контекстное меню чата.
        - do: Тапнуть/Кликнуть ЛКМ на "Включить уведомления".
        - assert: |
              Статус настройки меняется.
              Контекстное меню закрывается.
        - do: Открыть другой чат.
        - assert: Чат открыт.
        - do: Пользователем Б отправить сообщение в чат из description.
        - assert: |
              У пользователя А есть нотификации о новом сообщении.
              В превью этого чата появляется счетчик непрочитанных сообщений (бирюзового цвета).

      Можно отключить/включить уведомления через меню (три точки) в шапке группового чата[manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом можно авторизоваться в другом браузере/на девайсе.
              У пользователя А (проверяемый) и Б (вспомогательный) есть групповой чат, в котором включены уведомления.
        - do: Пользователем А тапнуть/кликнуть ЛКМ на меню (три точки) в шапке чата из description.
        - assert: Открылось контекстное меню управления чатом.
        - do: Тапнуть/Кликнуть ЛКМ по пункту “Отключить уведомления”.
              Статус настройки меняется.
              Контекстное меню закрывается.
        - do: Открыть другой чат.
        - assert: Чат открыт.
        - do: Пользователем Б устройства отправить сообщение в чат из description.
        - assert: |
              На первом устройстве нет нотификации о новом сообщении.
              В превью этого чата появляется счетчик непрочитанных сообщений (серого цвета).
        - do: Пользователем А открыть чат из description и тапнуть/кликнуть ЛКМ на меню (три точки).
        - assert: |
              Открывается окно чата.
              Появляется контекстное меню чата.
        - do: Тапнуть/Кликнуть ЛКМ на “Включить уведомления”.
        - assert: |
              Статус настройки меняется.
              Контекстное меню закрывается.
        - do: Открыть другой чат.
        - assert: Чат открыт.
        - do: Пользователем Б отправить сообщение в чат из description.
        - assert: |
              У пользователя есть нотификации о новом сообщении.
              В превью этого чата появляется счетчик непрочитанных сообщений (бирюзового цвета).

      Можно Отключить/включить уведомления через меню (три точки) в шапке чата с оператором Jivosite[manual]:
        - automation:
        - description:
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом (тестовой организацией) можно авторизоваться в другом браузере.
              У пользователя А (проверяемый) есть чат с оператором JivoSite (с тестовой организацией), в котором включены уведомления.
        - do: Пользователем А тапнуть/кликнуть ЛКМ на меню (три точки) в шапке чата из description.
        - assert: Открылось контекстное меню.
        - do: Тапнуть/Кликнуть ЛКМ по пункту “Отключить уведомления”
        - assert: |
              Статус настройки меняется.
              Контекстное меню закрывается.
        - do: Открыть другой чат.
        - assert: Чат открыт.
        - do: Под тестовой организацией отправить сообщение в чате из description пользователю А.
        - assert: |
              У пользователя нет нотификации о новом сообщении.
              В превью этого чата появляется счетчик непрочитанных сообщений (серого цвета).
        - do: Пользователем А открыть чат из description и тапнуть/кликнуть ЛКМ на меню (три точки).
        - assert: |
              Открывается окно чата.
              Появляется контекстное меню чата.
        - do: Тапнуть/Кликнуть ЛКМ на “Включить уведомления”.
        - assert: |
              Статус настройки меняется.
              Контекстное меню закрывается.
        - do: Открыть другой чат.
        - assert: Чат открыт.
        - do: Под тестовой организацией отправить сообщение в чате пользователю А.
        - assert: |
              У пользователя А есть нотификации о новом сообщении.
              В превью этого чата появляется счетчик непрочитанных сообщений (бирюзового цвета).

      # Можно скрыть чат через меню (три точки) в шапке приватного чата[manual]:
      #   - automation:
      #   - description: У авторизованного пользователя в списке чатов есть приватные чаты.
      #   - do: Тапнуть/кликнуть ЛКМ на меню (три точки) в шапке чата из description.
      #   - assert: Открылось контекстное меню.
      #   - do: Выбрать "Скрыть чат"
      #   - assert: Появляется окно, информирующее пользователя, что чат скрывается.
      #   - do: Нажать “Скрыть чат”.
      #   - assert: |
      #         Окно пропадает.
      #         Скрываемый чат не отображается в списке чатов.

      Можно выйти из чата через меню (три точки) в шапке группового чата[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть групповой чаты.
        - do: Тапнуть/Кликнуть ЛКМ на меню (три точки) в шапке чата из description.
        - assert: Открылось контекстное меню управления чатом.
        - do: Выбрать "Покинуть чат"
        - assert: Появляется окно “Вы действительно хотите покинуть чат?”
        - do: Нажать "ОК"
        - assert: |
              Окно пропадает
              Если в чате была отключена публичная ссылка, то выбранный чат пропадает из списка чатов
              Если в чате включена публичная ссылка, то вместо поля ввода появилась кнопка "Присоединиться", а выбранный чат остается в списке чатов до тех пор пока мы не откроем любой другой чат

      # Можно скрыть чат через меню (три точки) в шапке чата с оператором Jivosite[manual]:
      #   - automation:
      #   - description: У авторизованного пользователя в списке чатов есть чаты с оператором Jivosite.
      #   - do: Тапнуть/Кликнуть ЛКМ на меню (три точки) в шапке чата из description.
      #   - assert: Открылось контекстное меню.
      #   - do: Выбрать "Скрыть чат".
      #   - assert: Появляется окно, информирующее пользователя, что чат скрывается.
      #   - do: Нажать “Скрыть чат”.
      #   - assert: |
      #         Окно пропадает.
      #         Выбранный чат пропадает из списка чатов.

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
