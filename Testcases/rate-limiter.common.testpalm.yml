feature: Rate limiter

specs:

    Нельзя отправить текстовой сообщение при достижении лимита на отправку сообщений[manual]:
        - tags: [advanced_smoke]
        - automation: MSSNGRFRONT-5930
        - description: |
              Для проверки следует присоединиться  к данному чату - https://yandex.ru/chat/#/join/66763107-e3dc-4447-80e6-16b7c52a40ca
              Для данного чата Rate limiter = 30 сек, т. е. пользователь имеет возможность отправить только 1 сообщение в течение 30 сек
        - do: Пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию, указанному в description
        - assert: Чат открыт
        - do: Отправить текстовое сообщение в чат
        - assert: |
              Сообщение отправлено
              Отображается кнопка голосового ввода
        - do: В поле ввода ввести несколько символов
        - assert: |
              Символы введены
              Отображается кнопка часов вместо кнопки отправки сообщения
        - do: Нажать на кнопку часов
        - assert: |
              Сообщение не отправляется
              Появляется тост "Не отправляйте сообщения так часто"

    Нельзя отправить файл/изображение/видео при достижении лимита на отправку сообщений[manual]:
        - automation: MSSNGRFRONT-5930
        - description: |
              Для проверки следует присоединиться  к данному чату - https://yandex.ru/chat/#/join/66763107-e3dc-4447-80e6-16b7c52a40ca
              Для данного чата Rate limiter = 30 сек, т. е. пользователь имеет возможность отправить только 1 сообщение в течение 30 сек
        - do: Пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию, указанному в description
        - assert: Чат открыт
        - do: Отправить текстовое сообщение в чат
        - assert: |
              Сообщение отправлено
              Отображается кнопка голосового ввода
        - do: Нажать на скрепку рядом  паолем ввода
        - assert: |
              Файловый менеджер не открывается
              Появляется тост "Не отправляйте сообщения так часто"

    Нельзя отправить стикер при достижении лимита на отправку сообщений[manual]:
        - automation: MSSNGRFRONT-5930
        - description: |
              Для проверки следует присоединиться  к данному чату - https://yandex.ru/chat/#/join/66763107-e3dc-4447-80e6-16b7c52a40ca
              Для данного чата Rate limiter = 30 сек, т. е. пользователь имеет возможность отправить только 1 сообщение в течение 30 сек
        - do: Пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию, указанному в description
        - assert: Чат открыт
        - do: Отправить текстовое сообщение в чат
        - assert: |
              Сообщение отправлено
              Отображается кнопка голосового ввода
        - do: Нажать на иконку смайлика в панели ввода
        - assert: Открыта панель  со стикерами
        - do: Нажать на любой стикер
        - assert: |
              Стикер не отправляется
              Панель со стикерами остается развернутой
              Отображается тост "Не отправляйте сообщения так часто"

    Нельзя отправить реплай на  сообщение при достижении лимита на отправку сообщений[manual]:
        - automation: MSSNGRFRONT-5930
        - description: |
              Для проверки следует присоединиться  к данному чату - https://yandex.ru/chat/#/join/66763107-e3dc-4447-80e6-16b7c52a40ca
              Для данного чата Rate limiter = 30 сек, т. е. пользователь имеет возможность отправить только 1 сообщение в течение 30 сек
        - do: Пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию, указанному в description
        - assert: Чат открыт
        - do: Отправить текстовое сообщение в чат
        - assert: |
              Сообщение отправлено
              Отображается кнопка голосового ввода
        - do: Вызвать контекстное меню к только что отпраленному сообщению
        - assert: Открылось контекстное меню
        - do: Выбрать “Ответить”
        - assert: Над полем ввода показывается reply на сообщение
        - do: Ввести несколько символов в поле ввода
        - assert: Символы введены, отображается кнопка часов
        - do: Нажать на кнопку часов
        - assert: |
              Сообщение не отправляется
              Отображается тост "Не отправляйте сообщения так часто

    Нельзя переслать сообщение в чат, где достигнут лимит на отправку сообщений[manual]:
        - automation: MSSNGRFRONT-5930
        - description: |
              Для проверки следует присоединиться  к данному чату - https://yandex.ru/chat/#/join/66763107-e3dc-4447-80e6-16b7c52a40ca
              Для данного чата Rate limiter = 30 сек, т. е. пользователь имеет возможность отправить только 1 сообщение в течение 30 сек
              У пользователя есть несколько приватных/групповых чатов с историей сообщений
        - do: Пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию, указанному в description
        - assert: Чат открыт
        - do: Отправить текстовое сообщение в чат
        - assert: |
              Сообщение отправлено
              Отображается кнопка голосового ввода
        - do: В поле ввода ввести несколько символов
        - assert: |
              Символы введены
              Отображается кнопка часов вместо кнопки отправки сообщения
        - do: Нажать на кнопку часов
        - assert: |
              Сообщение не отправляется
              Появляется тост "Не отправляйте сообщения так часто"
        - do: Перейти в список чатов
        - assert: Открыт список чатов.
        - do: Открыть любой другой чат
        - assert: Чат открыт
        - do: Вызвать контекстное меню для любого сообщения
        - assert: Открылось контекстное меню
        - do: Нажать "Переслать"
        - assert: Появляется список чатов для пересылки сообщения
        - do: Выбрать чат из description
        - assert: |
              Открывается чат из description
              Сообщение отображается над полем ввода, отображается кнопка часов.
        - do: Нажать на кнопку часов
        - assert: |
              Сообщение не отправляется
              Отображается тост "Не отправляйте сообщения так часто"

    Можно отредактировать сообщение в чате  при достижении лимита на отправку сообщений[manual]:
        - automation: MSSNGRFRONT-5930
        - description: |
              Для проверки следует присоединиться  к данному чату - https://yandex.ru/chat/#/join/66763107-e3dc-4447-80e6-16b7c52a40ca
              Для данного чата Rate limiter = 30 сек, т. е. пользователь имеет возможность отправить только 1 сообщение в течение 30 сек
        - do: Пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию, указанному в description
        - assert: Чат открыт
        - do: Отправить текстовое сообщение в чат
        - assert: |
              Сообщение отправлено
              Отображается кнопка голосового ввода
        - do: Вызвать контекстное меню для отправленного сообщения
        - assert: Открылось контекстное меню
        - do: Нажать "Редактировать"
        - assert: Открывается форма редактирования сообщения
        - do: Ввести несколько символов
        - assert: Символы введены
        - do: Нажать на кнопку отправки сообщения
        - assert: |
              Сообщение не было отредактировано
              Отображается тост "Не отправляйте сообщения так часто"

    Можно удалить сообщение в чате  при достижении лимита на отправку сообщений.[manual]:
        - automation: MSSNGRFRONT-5930
        - description: |
              Для проверки следует присоединиться  к данному чату - https://yandex.ru/chat/#/join/66763107-e3dc-4447-80e6-16b7c52a40ca
              Для данного чата Rate limiter = 30 сек, т. е. пользователь имеет возможность отправить только 1 сообщение в течение 30 сек
        - do: Пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию, указанному в description
        - assert: Чат открыт
        - do: Отправить текстовое сообщение в чат
        - assert: |
              Сообщение отправлено
              Отображается кнопка голосового ввода
        - do: В поле ввода ввести несколько символов
        - assert: |
              Символы введены
              Отображается кнопка часов вместо кнопки отправки сообщения
        - do: Вызвать контекстное меню для отправленного сообщения
        - assert: Открылось контекстное меню
        - do: Нажать "Удалить" и подтверждить удаоеение
        - assert: Сообщение удаляется

    Кнопка часов не пропадает до истечения Rate Limiter.[manual]:
        - automation: MSSNGRFRONT-5930
        - description: |
              Для проверки следует присоединиться  к данному чату - https://yandex.ru/chat/#/join/66763107-e3dc-4447-80e6-16b7c52a40ca
              Для данного чата Rate limiter = 30 сек, т. е. пользователь имеет возможность отправить только 1 сообщение в течение 30 сек
        - do: Пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию, указанному в description
        - assert: Чат открыт
        - do: Отправить текстовое сообщение в чат
        - assert: |
              Сообщение отправлено
              Отображается кнопка голосового ввода
        - do: Вести несколько символов в поле ввода
        - assert: Символы введены, отображается кнопка с часами
        - do: Дождаться окончания действия Rate limiter
        - assert: Кнопка часов заменяется на кнопку "Отправить"
        - do: Нажаит кнопку "Отправить"
        - assert: Сообщение отправлено

    В оффлайне отправка сообщений не ограничена для чатов с Rate Limiter.[manual]:
        - automation: MSSNGRFRONT-5930
        - description: |
              Для проверки следует присоединиться  к данному чату - https://yandex.ru/chat/#/join/66763107-e3dc-4447-80e6-16b7c52a40ca
              Для данного чата Rate limiter = 30 сек, т. е. пользователь имеет возможность отправить только 1 сообщение в течение 30 сек
        - do: Пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию, указанному в description
        - assert: Чат открыт
        - do: Отключить интернет
        - assert: Интернет отключен
        - do: Отправить 2 и более сообщений в чат
        - assert: |
              Сообщения отправляются
              Сообщение висит в статусе вечной отправки 

    При выходе в онлайн отправляются первые сообщения, которые попадают в лимит.[manual]:
        - automation: MSSNGRFRONT-5930
        - description: |
              Для проверки следует присоединиться  к данному чату - https://yandex.ru/chat/#/join/66763107-e3dc-4447-80e6-16b7c52a40ca
              Для данного чата Rate limiter = 30 сек, т. е. пользователь имеет возможность отправить только 1 сообщение в течение 30 сек
        - do: Пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию, указанному в description
        - assert: Чат открыт
        - do: Отключить интернет
        - assert: Интернет отключен
        - do: Отправить 2 и более сообщений в чат
        - assert: |
              Сообщения отправляются
              Рядом с сообщениями отображается красный круг с восклицательным знаком (может появится не сразу, так как существуют ретраи)
        - do: Включить интернет
        - assert: Интернет-соединение восстановленно
        - do: Нажать на крсный круг с восклицательным знаком рядом с одним из сообщений
        - assert: Сообщение отправляется
        - do: Нажать на красный круг с восклицательным знаком рядом с одним из сообщений
        - do:  Появился тост "Не отправляйте сообщения так часто"

    После обновления страницы cтатус для Rate limiter сохраняется[manual]:
        - automation: MSSNGRFRONT-5930
        - description: |
              Для проверки следует присоединиться  к данному чату - https://yandex.ru/chat/#/join/66763107-e3dc-4447-80e6-16b7c52a40ca
              Для данного чата Rate limiter = 30 сек, т. е. пользователь имеет возможность отправить только 1 сообщение в течение 30 сек
        - do: Пользователем А открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть любой чат, который соответствует описанию, указанному в description
        - assert: Чат открыт
        - do: Отправить текстовое сообщение в чат
        - assert: |
              Сообщение отправлено
              Отображается кнопка голосового ввода
        - do: В поле ввода ввести несколько символов
        - assert: |
              Символы введены
              Отображается кнопка часов вместо кнопки отправки сообщения
        - do: Нажать на кнопку часов
        - assert: |
              Сообщение не отправляется
              Появляется тост "Не отправляйте сообщения так часто"
        - do: Обновить страницу браузера
        - assert: |
              Страница браузера обновлена
              Открыто окно чата из description
        - do: Отправить сообщение в чат
        - assert: |
              Сообщение не отправляется
              Появляется тост "Не отправляйте сообщения так часто"

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
