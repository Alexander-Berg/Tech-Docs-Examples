feature: Страница Темы

description: Данная функциональность позволяет пользователю узнавать предысторию события и следить за темой, если она развивается на протяжении длительного времени.

specs-integration:
  должна открываться:
      - do: перейти по ссылке https://yandex.ru/news/theme/Novyj_koronavirus_v_Kitae--522
      - assert: открылась страница темы
      - assert: страница темы содержит виджет тем и карточки новостей

  с малым количеством сюжетов и с мелкой аннотацией должна открываться:
      - do: перейти по ссылке https://yandex.ru/news/theme/Snos_pamyatnikov--577
      - assert: открылась страница темы
      - assert: страница темы содержит виджет тем и карточки новостей

  должна открываться на нацдоменах:
    - do: перейти по ссылке https://yandex.kz/news/theme/Pandemiya_koronavirusa--522
    - assert: нет 500х ошибок, открылась страница темы

specs:
  содержит карточку темы с заголовком и аннотацией:
      - tags:
        - smoke
        - backend_news
      - do: перейти на страницу темы по ссылке https://yandex.ru/news/theme/Vakcinaciya_ot_koronavirusa--981
      - assert: |
          отображается карточка темы,
          карточка содержит заголовок, аннотацию, ссылку 'Читать дальше',
          список источников с названиями и иконками,
          три точки с выпадающим списком для большого количества источников,
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-27_19-59-15.png
      - do: нажать на ссылку 'Читать дальше'
      - assert: |
          аннотация раскрылась полностью,
          в концке аннотации отображается источник,
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-27_20-01-58.png
  содержит карточку темы без аннотации:
      - tags:
        - smoke
      - do: перейти на страницу темы по ссылке https://yandex.ru/news/theme/Vojna_v_Sirii--136
      - assert: |
          отображается карточка темы,
          карточка содержит заголовок и список источников с названиями и иконками,
          три точки с выпадающим списком для большого количества источников,
          внешний вид https://jing.yandex-team.ru/files/nightsonne/2020-06-11_19-06-10.png
  содержит карточку темы, которая раскрывает аннотацию по ссылке Читать дальше:
      - tags:
        - smoke
        - backend_news
        - smoke_zen
      - do: перейти на страницу темы по ссылке https://yandex.ru/news/theme/Vakcinaciya_ot_koronavirusa--981
      - assert: |
          отображается карточка темы,
          карточка содержит заголовок, аннотацию, ссылку 'Читать дальше',
          список источников с названиями и иконками,
          три точки с выпадающим списком для большого количества источников,
          внешний вид https://jing.yandex-team.ru/files/nightsonne/2020-06-11_18-52-42.png          
      - do: навести курсор мыши на ссылку 'Читать дальше'
      - assert: меняется стиль курсора и стиль ссылки         
      - do: клик по ссылке 'Читать дальше'
      - assert: полностью разворачивается аннотация, внизу присутствует наименование источника
      - do: клик по названию источника
      - assert: в отдельной вкладке открывается страница источника
  содержит ссылки на источники:
      - tags:
        - smoke
        - backend_news
        - smoke_zen
      - do: перейти на страницу темы по ссылке https://yandex.ru/news/theme/Vakcinaciya_ot_koronavirusa--981
      - assert: |
          отображается карточка темы,
          карточка содержит заголовок, аннотацию, ссылку 'Читать дальше',
          список источников с названиями и иконками,
          три точки с выпадающим списком для большого количества источников,
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-27_19-59-15.png  
      - do: навести курсор мыши на любой источник
      - assert: меняется стиль курсора, фон источника становится темнее
      - do: кликнуть по любому источнику
      - assert: |
          в новой вкладке открывается страница источника,
          в урле есть параметры utm_source=yxnews и utm_medium=desktop
  содержит выпадающее меню со списком всех источников:
      - tags:
        - smoke
      - do: перейти на страницу темы по ссылке https://yandex.ru/news/theme/Covid--522
      - assert: |
          отображается карточка темы,
          карточка содержит заголовок, аннотацию, источник,
          список источников с названиями и иконками,
          три точки с выпадающим списком для большого количества источников,
          внешний вид https://jing.yandex-team.ru/files/nightsonne/2020-06-11_18-52-42.png
      - do: навести курсор мыши на три точки после списка источников
      - assert: |
          меняется стиль курсора, три точки становятся темнее,
          появляется выпадающее меню с остальными источниками
      - do: убрать курсор с трех точек
      - assert: выпадающее меню исчезает
      - do: кликнуть по трем точкам
      - assert: появляется выпадающее меню со списком остальных источников
      - do: поскроллить выпадающий список
      - assert: список скроллится
      - do: навести курсор мыши на любой источник в выпадающем списке
      - assert: меняется стиль курсора, фон источника становится темнее
      - do: кликнуть по любому источнику в выпадающем списке
      - assert: |
          в новой вкладке открывается страница источника,
          в урле есть параметры utm_source=yxnews и utm_medium=desktop
  cодержит ленту новостей по теме, правую колонку и рекламу для экрана шириной больше 1250px:
    - tags:
      - smoke
      - backend_news
      - smoke_zen
    - do: перейти на страницу темы по ссылке https://yandex.ru/news/theme/Vakcinaciya_ot_koronavirusa--981
    - do: растянуть окно браузера так, чтобы ширина окна была больше 1250px (иначе правая колонка не будет отображаться)
    - assert: |
        отображается страница темы,
        справа присутствует колонка с виджетом 'Главное' и рекламный блок,
        под карточкой темы присутствует лента новостей
    - do: поскроллить страницу вниз
    - assert: |
        лента новостей скроллится, рекламные блоки располагаются через каждые 4 новостные карточки,
        при этом последняя карточка в ленте также может быть рекламной, вне зависимости от того, какой порядок карточек был до этого,
        правая колонка и правый рекламный блок залипают и остаются в зоне видимости пользователя
    - do: навести курсор мыши на любую новость в ленте
    - assert: изменяется стиль отображения курсора, заголовок становится красным
    - do: кликнуть по любому сюжету новостей в ленте
    - assert: в той же вкладке происходит переход в соответствующий сюжет
    - do: вернуться на страницу темы с помощью браузерной кнопки 'Назад'
    - do: поскроллить правую колоку вниз
    - assert: |
        у каждой новости есть заголовок, наименование издания, время и (или) дата,
        длинные название источников корректно обрезаются многоточием, элементы не наползают друг на друга,
        внешний вид https://jing.yandex-team.ru/files/kossakovskaya/2021-07-20_21-00-32.png
    - do: навести курсор мыши на любую новость в правой колонке
    - assert: изменяется стиль отображения курсора, заголовок становится красным
    - do: кликнуть по любому сюжету новостей в правой колонке
    - assert: в той же вкладке происходит переход в соответствующий сюжет

  не ломается при попытке перейти на несуществующую тему:
    - do: перейти на страницу темы по ссылке https://yandex.ru/news/theme/Vojna_v_Sirii--1a
    - assert: открывается страница 404 "Нет такой страницы"

  отображается даже без ленты новостей:
    - do: перейти на страницу темы по ссылке https://yandex.ru/news/theme/N--566 или https://yandex.ru/news/theme/Postavki_rossijskoj_nefti_na_NPZ_Belorussii--567(или подставить другой id, если темы больше нет или по ней появились новости)
    - do: растянуть окно браузера так, чтобы ширина окна была больше 1250px (иначе правая колонка не будет отображаться)
    - assert: |
        отображается карточка темы,
        справа присутствует колонка с виджетом 'Главное' и рекламный блок,
        под карточкой темы отсутствует лента новостей

  не должна содержать рекламу, если в теме есть флаг отключения рекламы:
    - do: перейти в любую тему с флагом yxneo_news_theme_tragic-ids
    - assert: нет рекламы справа (полено) и в ленте новостей

files: 
  - features/news/theme/theme.desktop.hermione.js
  - features/news/theme/theme.desktop.hermione.e2e.js

tags:
  - neo
  - theme
  - neodesktop

manager: glushneva

qa-engineer: nightsonne

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
