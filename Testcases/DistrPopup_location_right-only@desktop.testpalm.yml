feature: Popup на СЕРПе
type: Справа сверху

params:
  foreverdata: '118631519'
  srcskip: 'YABS_DISTR'

specs:
  beforeEach:
    - do: получить выдачу по запросу 'foreverdata'
    - assert: показан попап-блок залогина возле кнопки Войти
  Клик на кнопку установки:
    # - screenshot: пример внешнего вида попап-блока авторизации [distr-promo-popup/right-only >> right-only]
    - do: клик на кнопку 'Зачем?'
    - tech: сработал счетчик клика на кнопку 'Зачем' /$page/promo_popup/click
    - assert: должен произойти редирект на passport с пар-ром retpath в ссылке
    - assertMetrics: "*"
  Изменения размера окна браузера:
    # - screenshot: пример внешнего вида попап-блока авторизации [distr-promo-popup/right-only >> right-only]
    - do: сжать окно браузера до 850px шириной
    - assert: попап-блок залогина скрылся
    - do: расширить окно браузера до 1200px шириной
    - assert: попап-блок залогина показался
  Взаимодействие с саджестом:
    # - screenshot: пример внешнего вида попап-блока авторизации [distr-promo-popup/right-only >> right-only]
    - do: открыть саджест
    - assert: попап-блок залогина скрылся
    - do: закрыть саджест
    - assert: попап-блок залогина не показывается снова
  Отображение попап-блока при скролле:
    # - screenshot: пример внешнего вида попап-блока авторизации [distr-promo-popup/right-only >> right-only]
    - do: сделать скролл страницы вниз
    - assert: попап-блок должен оставаться на одном месте на экране
    - do: сделать скролл страницы вверх
    - assert: попап-блок должен оставаться на одном месте на экране
  При авторизованном пользователе:
    Взаимодействие с блоком пользователя:
      - params:
          foreverdata: '2982326350'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: показан дистрибуционный попап возле кнопки Войти
      - do: авторизованным пользователем кликнуть в инонку пользователя в шапке
      - assert: попап пользователя открылся над дистрибуционным попапом

files:
  - src/features/DistrPopup/DistrPopup.test/_location/DistrPopup_location_right-only@desktop.hermione.js

tags:
  - skip_e2e_check
  - distribution
  - popup

v-team: Distribution

tlds: [ru, by]
