feature: Обработка запросов ролей

specs:
  beforeEach:
    - do: (PREPARE) залогиниться под пользователем robot-internal-003
    - do: (PREPARE) перейти на страницу сервиса "Роли (автотесты)" (/services/podozrevaka27021/)
    - do: (PREPARE) нажать на значок плюса около количества участников команды
    - do: (PREPARE) вписать "robot-internal-003" в поле добавления сотрудника
    - do: (PREPARE) выбрать из саджеста "robot-internal-003 robot-internal-003"
    - do: (PREPARE) выбрать из саджеста ролей "Робот"
    - do: (PREPARE) нажать "Добавить"

  Положительные:
    1. Подтверждение роли:
      - do: залогиниться под пользователем robot-abc-001
      - do: перейти на страницу сервиса "Роли (автотесты)" (/services/podozrevaka27021/)
      - screenshot: роль для пользователя robot-internal-003 находится в состоянии "ожидающие подтверждения" [role-request]
      - do: нажать кнопку "подтвердить участие" (палец вверх)
      - assert: роль находится в статусе "подтверждена"
      - do: (PREPARE) перейти на страницу сервиса "Роли (автотесты)" (/services/podozrevaka27021/)
      - do: (PREPARE) удалить robot-internal-003 из состава команды нажав на иконку корзины рядом с ним

    2. Отказ в выдаче роли:
      - do: залогиниться под пользователем robot-abc-001
      - do: перейти на страницу сервиса "Роли (автотесты)" (/services/podozrevaka27021/)
      - assert: роль для пользователя robot-internal-003 находится в состоянии "ожидающие подтверждения"
      - do: нажать кнопку "отклонить участие" (палец вниз)
      - assert: исчез раздел "ожидающие подтверждения"

files: 
  - test/features/desktop/roles/handle-role-request.hermione.js

priority: critical

tags:
  - reviewed
  - no_assessors
