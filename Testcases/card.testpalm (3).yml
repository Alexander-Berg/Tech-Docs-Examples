feature: Объектный ответ
type: Карточка объекта

counter: /$page/$parallel/$result[@wizard_name="entity_search"]/tabs/main/object-badge

specs:
  Проверить карточку при изменении рамера экрана:
    - do: получить выдачу по запросу 'мастер и маргарита книга'
    - assert: должна появиться карточка объекта
    - do: установить размер экрана 1030x1200
    - screenshot: пример внешнего вида [plain-cols-6]
    - assert: ширина блока изменилась, размер изображения объекта изменился
    - do: установить размер экрана 1130x1200
    - screenshot: пример внешнего вида [plain-cols-8]
    - assert: ширина блока увеличилась, размер изображения объекта увеличился
    - do: установить размер экрана 1230x1200
    - screenshot: пример внешнего вида [plain-cols-10]
    - assert: ширина блока увеличилась, размер изображения объекта увеличился
    - assertMetrics: '*'

  Проверка ссылок:
    - label: features/desktop/z-entity-search/card/card-{{SET_NAME}}
    - tags:
        - smoke
    - do: получить выдачу по запросу 'мастер и маргарита книга'
    - screenshot: пример внешнего вида [plain]
    - assert: |
        появилась карточка объекта,
        в карточке есть одинокая картинка
        на некоторых планшетах с низким разрешением экрана в книжной ориентации карточка может не отображаться, переверните устройство в альбомную ориентацию
    - tech: должен сработать счетчик показа бейджа
    - do: проверить ссылку на одинокой картинке
    - assert: ссылка ведёт на страницу Картинок
    - tech: проверить счётчик на одинокой картинке
    - do: проверить ссылку Википедия в описании объекта
    - assert: ссылка ведёт на Википедию
    - tech: проверить счётчик на ссылке 'Википедия' в описании объекта
    - assertMetrics: '*'

  Кнопка "Читать дальше":
    - tags:
        - smoke
    - do: получить выдачу по запросу 'мастер и маргарита книга'
    - screenshot: пример внешнего вида [features/desktop/z-entity-search/card/card-{{SET_NAME}} >> plain]
    - assert: |
        появилась карточка объекта,
        в карточке есть одинокая картинка
        на некоторых планшетах с низким разрешением экрана в книжной ориентации карточка может не отображаться, переверните устройство в альбомную ориентацию
    - do: кликнуть ссылку 'Читать дальше'
    - assert: появилась скрытая часть описания объекта
    - tech: проверить счётчик на ссылке 'Читать дальше' в описании объекта

  Отсутствие карточки объекта с недостаточными данными:
    - tags: no_assessors
    - params:
        foreverdata: '358649090'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче отсутствует карточка ОО (потому что в foreverdata недостаточно данных для построения карточки)

files:
  - features/desktop/z-entity-search/card/card.hermione.js

v-team: OO

tags:
  - reviewed
  - smoke_extended

tlds:
  - ru
  - ua
  - by
  - kz
  - com
  - com.tr
