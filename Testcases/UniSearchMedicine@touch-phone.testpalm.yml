feature: Универсальный колдунщик поиска врачей

specs:
  Фильтры:
    params:
      foreverdata: '843763667'

    Внешний вид:
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче есть универсальный колдунщик врачей
      - screenshot: внешний вид его заголовка [plain]

    Баобаб-разметка фильтров:
      - tags: no_assessors
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче есть универсальный колдунщик врачей
      - tech: |
          в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_medicine/scroller/filters/filter-select-button"
          и атрибутами "title" = "Специализация по возрасту" и "order" = "1"
      - tech: |
          в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_medicine/scroller/filters/filter-select-button"
          и атрибутами "title" = "Цена приёма" и "order" = "3"
      - tech: |
          в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_medicine/scroller/filters/filter-select-button"
          и атрибутами "title" = "Стаж" и "order" = "4"
      - tech: |
          в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_medicine/scroller/filters/filter-bool-button"
          и атрибутами "title" = "Онлайн-запись" и "order" = "5"
      - tech: |
          в баобаб дереве присутствет узел по пути "/$page/$main/$result/unisearch_medicine/scroller/filters/filter-select-button"
          и атрибутами "title" = "Учёная степень" и "order" = "6"

  Обогащённое превью:
    Скрытие превью при возврате назад:
      - do: получить выдачу по запросу 'терапевты москва'
      - assert: на выдаче есть универсальный колдунщик поиска врачей
      - do: нажать на первого врача из списка колдунщика
      - assert: |
          открылось модальное окно с информацией о враче
      - do: нажать в браузере или на устройстве назад
      - assert: |
          модальное окно с информацией о враче скрылось
          страница не перезагрузилась
      - do: нажать в браузере вперед
      - assert: |
          модальное окно с информацией о враче снова отобразилось
          страница не перезагрузилась
      - do: скрыть окно с информацией о враче свайпом вниз
      - assert: |
          модальное окно с информацией о враче скрылось
          страница не перезагрузилась

    Разметка превью baobab:
      - tags: no_assessors
      - do: получить выдачу по запросу 'терапевт москва'
      - assert: на выдаче есть универсальный колдунщик врачей
      - do: кликнуть в первый сниппет в колдунщике
      - assert: появилась карточка врача
      - tech: |
          в baobab дереве есть узел по пути "/$page/$main/$result/unisearch_medicine/preview/offer/link"
          c атрибутами offer_url, offer_source, offer_price, offer_rating
      - tech: |
          в baobab дереве есть узел по пути "/$page/$main/$result/unisearch_medicine/preview/unisearch-clinics/clinic/title-link"
          с атрибутами url
      - tech: в baobab дереве есть узел по пути "$page/$main/$result/unisearch_medicine/preview/unisearch-review"

  Список врачей:
    Рейтинг:
      - params:
          foreverdata: '4119715856'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче есть универсальный колдунщик поиска врачей c рейтиногом
      - screenshot: внешний вид рейтинга [plain]

files:
  - src/features/UniSearch/UniSearch.features/UniSearchMedicine/UniSearchMedicine.test/UniSearchMedicine@touch-phone.hermione.js

v-team: UniSearch

tlds: [ru, by, ua, kz, uz]

tags:
  - react
  - skip_e2e_check
