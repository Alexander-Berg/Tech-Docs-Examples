feature: Факт
type: Саджест

description: для UC browser в настройках просмотра параметр 'Открыть ссылку' выставить в 'Авто'

specs:
  Ссылки в карточке:
    - tags:
      - pp_new_core
    - do: получить выдачу Поиска по запросу 'сколько муки в столовой ложке'  _ALTERNATIVE_SEARCH_QUERIES_
    - assert: на первой позиции выдачи есть Фактовый ответ (быстрый ответ)
    - screenshot: пример внешнего вида без (текст может отличаться) [plain]
    - assertMetrics: '*'
    - tech: проверить счетчик в синем тайтле
    - do: кликнуть на синий тайтл Фактового ответа
    - assert: открылась статья на источнике информации в новой вкладке или в сайдблоке
    - tech: проверить счетчик в гринурле
    - do: кликнуть на гринурл Фактового ответа
    - assert: открывается статья на источнике информации в новой вкладке или в сайдблоке
    - assertMetrics: '*'

  Внешний вид с длинным текстом:
    - params:
        foreverdata: '1784668803'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на первой позиции выдачи есть Фактовый ответ (быстрый ответ)
    - screenshot: пример внешнего вида [overflow]
    - assertMetrics: '*'

  Ссылка на Яндекс.Кью:
    - params:
        foreverdata: '1987571745'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на первой позиции выдачи есть Фактовый ответ со ссылкой на Яндекс.Кью (быстрый ответ)
    - screenshot: пример внешнего вида [q]

  Ссылка c иконкой в дополнительном сегменте (extra):
    - params:
        foreverdata: '3271209657'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на первой позиции (или на второй, если сверху есть еще один сниппет) над выдачей есть Фактовый ответ (быстрый ответ)
    - screenshot: пример внешнего вида [extra-link-with-icon]
    - do: тапнуть в ссылку "Главная страница Яндекса"
    - do: в текущей вкладке (в ПП может открыться в новой вкладке, это ок) открылась главная страница Яндекса

  Официальный сайт:
    - params:
        foreverdata: '910469330'
    - do: получить выдачу Поиска по запросу 'foreverdata'
    - assert: на первой позиции выдачи есть Фактовый ответ (быстрый ответ), рядом с адресом сайта есть синяя галка
    - screenshot: пример внешнего вида [verified]
    - do: нажать на синюю галку
    - assert: появилась подсказка 'Официальный сайт'
    - screenshot: пример внешнего вида [verified-tooltip]

  ЦБ РФ:
    - params:
        foreverdata: '887165590'
    - do: получить выдачу Поиска по запросу 'foreverdata'
    - assert: на первой позиции выдачи есть Фактовый ответ (быстрый ответ), рядом с адресом сайта есть синяя галка
    - screenshot: пример внешнего вида [cbrf]

  Кириллический домен:
    - do: получить выдачу Поиска по запросу 'как получить паспорт' (альтернативные запросы 'как зарегистрировать право собственности на квартиру')
    - assert: на первой позиции выдачи есть Фактовый ответ (быстрый ответ), рядом с адресом сайта отображается иконка сайта
    - screenshot: пример внешнего вида [cyrillic]

  Шторка обратной связи:
    - tags:
      - pp_new_core
    - do: получить выдачу по запросу 'сколько живут попугаи'
    - assert: на первой позиции выдачи есть фактовый ответ (быстрый ответ)
    - do: кликнуть по ссылке "Сообщить об ошибке"
    - assert: открылась шторка для обратной связи
    - screenshot: внешний вид шторки обратной связи [feedback-drawer]

specs-integration:
  Проверка наличия элементов:
    - do: получить выдачу по запросу 'принятие великой хартии вольностей в англии год' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: |
        на первой позиции выдачи есть Фактовый ответ (быстрый ответ)
        в фактовом ответе есть синий тайтл (внизу, ссылка)
        в фактовом ответе есть гринурл

  Проверка наличия факта c википедии:
    - counter: /$page/$main/$result[@wizard_name="suggest_fact" and @subtype="wikipedia_fact"]/title
    - do: получить выдачу по запросу 'субд' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: |
        на первой позиции выдачи есть быстрый ответ с сайта wikipedia.org
        в быстром ответе есть синий тайтл (внизу, ссылка)
        в быстром ответе есть гринурл

files:
  - features/touch-phone/adapter-suggest-fact/adapter-suggest-fact.hermione.js
  - features/adapter-suggest-fact/adapter-suggest-fact@common.hermione.e2e.js

v-team: Facts

tlds:
  - ru
  - by
  - ua
  - kz
  - com.tr
  - com

counter: /$page/$main/$result[@wizard_name="suggest_fact"]/title

tags:
  - smoke
  - reviewed

priority: high
