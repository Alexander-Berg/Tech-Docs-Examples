feature: Расширенный факт

specs:
  Текст - картинка - список:
    - params:
        foreverdata: '1415652665'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ
    - screenshot: внешний вид [plain]
    - do: нажать на первую ссылку
    - assert: произошёл переход на страницу
    - tech: сработал счётчик path="/$page/$main/$result/rich_fact/fold/link"
    - do: нажать на картинку
    - assert: произошёл переход на страницу
    - tech: сработал счётчик path="/$page/$main/$result/rich_fact/fold/thumb"

  Заголовок - текст с инлайн картинкой - список:
    - params:
        foreverdata: '422557946'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ
    - screenshot: внешний вид [plain]

  Список второго уровня:
    - params:
        foreverdata: '3664134757'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ
    - screenshot: внешний вид [unfolded]

  Список с числами:
    - params:
        foreverdata: '2056998479'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ
    - screenshot: внешний вид [plain]

  Несколько абзацев:
    - params:
        foreverdata: '3998832003'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ
    - screenshot: внешний вид [unfolded]

  Суммарный ответ и скрывающиеся элементы:
    - params:
        foreverdata: '1126770084'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ
    - screenshot: внешний вид [plain]
    - do: нажать на кнопку-стрелку
    - tech: сработал счётчик path="/$page/$main/$result/rich_fact/fold/arrow[@behaviour@type="dynamic"]"
    - assert: быстрый ответ раскрылся
    - screenshot: внешний вид [unfolded]
    - do: раскрыть первый элемент со скрытым контентом
    - assert: элемент раскрылся
    - screenshot: внешний вид [uncollapsed]

  Суммарный ответ:
    - params:
        foreverdata: '3656539762'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ
    - screenshot: внешний вид [plain]

  Флаг для раскрытия коллапсеров:
    - params:
        foreverdata: '2996317234'
        exp_flags:
          - fact_rich_fact_expand_collapsers=1
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ
    - do: нажать на кнопку-стрелку
    - tech: сработал счётчик path="/$page/$main/$result/rich_fact/fold/arrow[@behaviour@type="dynamic"]"
    - assert: быстрый ответ раскрылся, все скрывающиеся элементы внутри раскрыты

  С меткой «Подтверждено» (recommendation_label):
    - counter: /$page/$main/$result/rich_fact/title/official
    - do: получить выдачу по запросу "как получить снилс" _ALTERNATIVE_SEARCH_QUERIES_
    - assert: на странице присутствует быстрый ответ с галочкой возле greenurl'а
    - screenshot: внешний вид ссылки с синей галкой [fact-source]
    - do: навести мышь на синюю галочку
    - assert: под галочкой появилась подсказка
    - screenshot: внешний вид тултипа [tooltip]

  С меткой «Подтверждено» (cbrf_info):
    - params:
        foreverdata: '593328920'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ с галочкой возле greenurl'а
    - screenshot: внешний вид [plain]
    - do: навести мышь на синюю галочку
    - assert: под галочкой появилась подсказка
    - screenshot: внешний вид тултипа [tooltip]

  Факт с социальным источником:
    - params:
        foreverdata: '3361919896'
    - do: получить выдачу по запросу "москва"
    - assert: на странице присутствует быстрый ответ с подтвержденным источником
    - screenshot: внешний вид [plain]

  Со связанными фактами:
    - params:
        foreverdata: '424076375'
    - do: получить выдачу по запросу "foreverdata"
    - assert: на странице присутствует быстрый ответ c кнопками для связанных запросов
    - screenshot: внешний вид [plain]
    - do: кликнуть в первую кнопку в карусели кнопок
    - tech: сработал счётчик "/$page/$main/$result/rich_fact/related/link"
    - assert: произошел перезапрос к поиску, в тексте запроса содержится правильное значение

  Шторка обратной связи:
    - do: получить выдачу по запросу 'как получить снилс'
    - assert: на первой позиции выдачи есть фактовый ответ
    - do: кликнуть по ссылке "Сообщить об ошибке" в нижней части факта
    - assert: открылось модальное окно для обратной связи
    - screenshot: внешний вид модального окна для обратной связи [feedback-drawer]

files:
  - src/features/RichFact/RichFact.tests/RichFact@desktop.hermione.js

v-team: Facts

tags:
  # Эксперимент
  - skip_e2e_check
  - react

tlds: ru
