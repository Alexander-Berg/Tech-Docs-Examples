feature: Страница футбольного матча на десктопе

specs-integration:
  содержит основные элементы:
    - do: перейти на страницу футбольного матча по клику на матч
    - assert: |
        новостные карточки спорта отображаются под блоками,
        справа присутствует рекламный блок (если ширина окна браузера >1260px)
    - do: кликнуть на любую рубрику в рубрикаторе
    - assert: |
        происходит переход в выбранную рубрику,
        в рубрикаторе выделена выбранная рубрика

  содержит Новости футбола:
    - tags: 
      - backend_sport  
    - do: кликнуть на вкладку Вчера или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу футбольного матча кликом на любой матч
    - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав' до блока 'Новости футбола'
    - assert: страница матча содержит новостные карточки
    - do: проскроллить страницу матча до лоадера
    - assert: загружаются новые карточки
    - do: проскроллить страницу на несколько порций карточек
    - assert: |
        новостной блок помимо новостных карточек может содержать карточки с каруселями видео и рекламные блоки,
        если каруселей видео нет - это ок, заводить на такое баги не нужно,
        карусели видео скроллятся
    - do: кликнуть по заголовку или картинке любой новостной карточки
    - assert: в этой же вкладке открывается страница сюжета
    - do: вернуться назад на страницу футбольного матча
    - do: кликнуть по любому видео в любой карусели (пропустить шаг, если карусели нет)
    - assert: в новой вкладке открывается страница с видео

specs:

  aliases:
    &goTo
      - do: открыть главную страницу сервиса Я.Спорт
      - do: кликнуть на Матч-центр в рубрикаторе
      - assert: |
          произошел переход в матч-центр,
          в рубрикаторе выделена рубрика Матч-центр,
          в подрубрикаторе выделена вкладка Футбол и открыт футбольный календарь на вкладке Сегодня,
          в календаре присутствует дата-пикер https://jing.yandex-team.ru/files/nightsonne/2020-04-13_19-58-59.png ,
          обртите внимание! если матчей нет ни вчера, ни сегодня, ни завтра - ни одна вкладка календаря не будет выделена, а будет заглушка о том, что событий не найдено - это ок, заводить на такое баги не нужно! если матчи есть вчера - будет выделена вкладка "Вчера"

  содержит основные элементы [manual]:
    - tags: backend_sport
    - reasonNotToAuto:
      - Скриншоты этих блоков повторно не нужны, т.к. они уже сделаны в соседних тестах.
    - do: перейти на страницу футбольного матча по клику на матч
    - assert: |
        на странице есть виджет результата матча со счетом, иконками и названием команд,
        под виджетом может располагаться блок с видео матча, который содержит одно большое видео и несколько маленьких видео справа от большого,
        под виджетом могут быть блоки 'Ход матча', 'Состав',
        справа от виджета с результатом матча могут быть блоки 'Турнирная таблица','Другие матчи',
        новостные карточки спорта отображаются под блоками,
        справа присутствует рекламный блок (если ширина окна браузера >1260px)
    - do: кликнуть на любую рубрику в рубрикаторе
    - assert: |
        происходит переход в выбранную рубрику,
        в рубрикаторе выделена выбранная рубрика

  может содержать иконку-индикатор видео:
    - *goTo
    - do: кликнуть на вкладку Вчера или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: |
        открыт список матчей за вчера (или за 5 декабря),
        некоторые матчи содержат иконку-индикатор видео, скрин https://jing.yandex-team.ru/files/an-smirn0v/shot_210407_154220.png
  # закомментила, потому что видео в матче проверяются в рамках лайв-страницы (для бразилии и фнл) + есть проверка для хоккейных матчей, этого достаточно
  #  - do: перейти на страницу футбольного матча кликом на матч с иконкой видео в разделе 'Вчера' или 'Сегодня'
  #  - assert: |
  #        страница матча может содержать большое видео, скрин https://jing.yandex-team.ru/files/nightsonne/2021-09-16_22-42-09.png,
  #        справа от большого видео может быть расположена карусель видео моментов матча,
  #        основное видео добавляется в карусель, если кроме основного матча есть видео моментов матча
  #  - do: кликнуть на большое видео
  #  - assert: в текущей вкладке открывается видео матча (Обратите внимание! Если вы находитесь не в РФ - вместо видео у вас будет отображена заглушка "Нет доступных лицензий". В данном случае это ок, заводить на такое баги не нужно!)
  #  - do: поскроллить карусель видео
  #  - assert: |
  #        карусель скроллится,
  #        каждое видео содержит подпись момента (максимум 3 строки),
  #        длинные названия моментов корректно обрезаются многоточием
  #  - do: кликнуть на любое видео в карусели
  #  - assert: в новой вкладке открывается видео момента на сервисе Яндекс.Спорт (Обратите внимание! Если вы находитесь не в РФ - вместо видео у вас будет отображена заглушка "Нет доступных лицензий". В данном случае это ок, заводить на такое баги не нужно!)

  из списка прошедших матчей содержит футбольный виджет:
    - tags: 
      - backend_sport    
    - *goTo  
    - do: кликнуть на вкладку Вчера или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу футбольного матча кликом на матч со счетом
    - assert: |
        страница матча содержит футбольный виджет,
        виджет содержит название чемпионата, статус матча, для завершенных матчей - дату (и/или день) завершения, названия команд, счет,
        при победе по буллитам или в овертайме виджет содержит соответствующее указание под названием лиги,
        счет и название команды-победителя выделено жирным шрифтом,        
        внешний вид - https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-29%20в%2014.34.15.png

  из блока 'Завтра' содержит футбольный виджет [manual]:
    - tags: backend_sport  
    - reasonNotToAuto:
      - Нет возможности автоматизировать, т.к. во внутренних функциях берется не время запроса из данных, а new Date(), поэтому "завтра" становится "сегодня" на следующий день, а тест падает.
    - *goTo
    - do: кликнуть на вкладку Завтра
    - do: перейти на страницу футбольного матча кликом на матч в разделе 'Завтра' (если раздела нет - найти другой матч)
    - assert: |
        страница матча содержит футбольный виджет,
        виджет содержит название чемпионата, названия команд, время начала матча, надпись 'Завтра'

  из списка прошедших матчей может содержать блок Ход матча:
    - tags: 
      - backend_sport    
    - *goTo
    - do: кликнуть на вкладку 'Вчера' или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу футбольного матча кликом на матч со счетом
    - assert: |
        страница матча может содержать блок 'Ход матча' (если в данном матче блока нет, открыть другой матч),
        блок содержит логотипы команд или флаги стран,
        рядом с каждым событием указана минута матча,
        внешний вид - https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-29%20в%2015.03.42.png
    - do: найти в блоке 'Ход матча' гол или гол с пенальти
    - assert: |
        голы отмечены значком мяча, пенальти - иконкой с буквой П поверх мяча,
        рядом со значком мяча указана фамилия игрока, забившего гол,
        над фамилией игрока есть надпись 'Гооол!' серым шрифтом,
        под фамилией игрока серым шрифтом может быть указан игрок, отдавший пас,
        под фамилией игрока может быть иконка видео голевого момента с кнопкой плэй (видео может и не быть, это ок, заводить на такое баг не нужно),
        внешний вид - https://jing.yandex-team.ru/files/an-smirn0v/shot_210428_164654.png
    - do: кликнуть по иконке видео рядом с голом (если такого видео нет - пропустите текущий шаг)
    - assert: в новой вкладке открывается видео голевого момента
    - do: вернуться на вкладку с матчем
    - do: найти в блоке 'Ход матча' событие выдачи желтой или красной карточки
    - assert: |
        карточки отмечены значком соответствующего цвета,
        рядом со значком указана фамилия игрока, которому выдана карточка,
        над фамилией игрока есть надпись 'Желтая карточка' или 'Красная карточка' серым шрифтом
    - do: найти в блоке 'Ход матча' событие замены игрока
    - assert: |
        замены отмечены цветными стрелками,
        фамилия замененного игрока отображена серым шрифтом,
        фамилия заменяющего игрока отображена черным шрифтом,
        над фамилиями игроков есть надпись 'Замена' серым шрифтом,
        внешний вид - https://jing.yandex-team.ru/files/an-smirn0v/shot_210428_164936.png

  из списка прошедших матчей может содержать блок Состав:
    - tags: 
      - backend_sport    
    - *goTo    
    - do: кликнуть на вкладку Вчера или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу футбольного матча кликом на матч со счетом
    - assert: |
        страница матча может содержать блок 'Состав' (если в данном матче блока нет, открыть другой матч),
        длинные названия команд корректно обрезаются многоточнием и не выходят за рамки блока,
        отображается составт обеих команд,
        номер и позиция игрока отображены серым шрифтом (позиция игрока сокращена - вр, пз, зщ, нп),
        скрин https://jing.yandex-team.ru/files/an-smirn0v/shot_210407_153555.png
    - do: найти в блоке 'Состав' гол или гол с пенальти
    - assert: |
         рядом с фамилией игрока, забившего гол, есть иконка мяча и счетчик с количеством голов,
         скрин https://jing.yandex-team.ru/files/an-smirn0v/shot_210407_153634.png
    - do: найти в блоке 'Состав' событие замены игрока
    - assert: |
        замены отмечены цветными стрелками,
        рядом с фамилией замененного игрока указана минута замены,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-11-11_18-52-41.png
    - do: найти в блоке 'Состав' событие событие выдачи желтой или красной карточки
    - assert: справа от фамилии игрока есть значок красной или желтой карточки
    - do: проскроллить до конца блока 'Состав'
    - assert: внизу указан тренер команды

  из списка прошедших матчей может содержать турнирную таблицу:
    - tags: 
      - backend_sport    
    - *goTo
    - do: кликнуть на вкладку Вчера или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу футбольного матча кликом на матч со счетом
    - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав'
    - assert: |
        страница матча может содержать блок 'Турнирная таблица' (если блока нет - это ок, заводить баг на такое на нужно, просто пропустите этот и следующий шаги),
        если есть вкладки групп - по умолчанию открыта вкладка той группы, к которой относятся команды данного матча,
        команды данного матча выделены жирным шрифтом,
        верстка таблицы корректна,
        скрин https://jing.yandex-team.ru/files/nightsonne/2019-12-18_15-02-01.png
    - do: попереключать вкладки групп в таблице (если есть, если нет - пропустите шаг)
    - assert: вкладки переключаются, отображается новый список команд

  из списка прошедших матчей может содержать блок Другие матчи:
    - tags: 
      - backend_sport    
    - *goTo   
    - do: кликнуть на вкладку Вчера или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2020
    - assert: открыт список матчей за вчера (или за 5 декабря)
    - do: перейти на страницу футбольного матча кликом на матч со счетом
    - assert: |
        страница может содержать блоки "Ход матча", "Состав", "Турнирная таблица",
        страница матча может содержать блок "Другие матчи" (если в данном матче блока нет, открыть другой матч),
        блок содержит названия и лого команд, время, дату, счет (в зависимости от того прошел матч или нет),
        внизу есть кнопка "Все матчи",
        верстка блока корректна,
        скрин блока "Другие матчи" - https://jing.yandex-team.ru/files/an-smirn0v/Снимок%20экрана%202021-11-29%20в%2015.06.46.png
    - do: кликнуть на любой матч в блоке "Другие матчи"
    - assert: в той же вкладке открывается страница выбранного матча
    - do: вернуться назад
    - do: кликнуть на "Все матчи"
    - assert: в той же вкладке открывается страница футбольного календаря

  #закомментировала, так как пока таких матчей нет (или их просто невозможно найти)
  #из списка прошедших матчей может содержать карточки о связанных с матчем новостях [manual]:
  #  - *goTo
  #  - do: кликнуть на вкладку Вчера или если вчера матчей не было кликнуть на дата-пикер и установить дату 5 декабря 2020
  #  - assert: открыт список матчей за вчера (или за 5 декабря)
  #  - do: перейти на страницу футбольного матча кликом на матч со счетом
  #  - do: поскроллить матч ниже блоков видео, 'Ход матча', 'Состав', но ДО блока 'Новости футбола'
  #  - assert: |
  #      страница матча может содержать карточки о связанных с матчем новостях (если в данном матче карточек нет, открыть другой матч, карточки могут и отсутствовать, баг заводить не нужно),
  #      карточки о связанных с матчем новостях (при наличии располагаются над таблицей "Ход матча") содержат иконку добавления в избранное (но не сожержат иконку лайка и комментария)
  #  - do: кликнуть по любой карточке о связанных с матчем новостях
  #  - assert: в новой вкладке открывается страница источника
  #  - do: вернуться на предыдущую вкладку с футбольным матчем
  #  - do: проскролить страницу к блоку 'Новости футбола' и кликнуть на любой сюжет
  #  - assert: в текущей вкладке открылся выбранный сюжет
  #  - do: кликнуть по любому источнику в блоке 'Подробнее о событии'
  #  - assert: в новой вкладке открывается страница источника

  отсутствует лишний разделительный маркер в неначавшемся матче:
    - do: открыть неначавшийся матч https://yandex.ru/sport/event/m531524
    - assert: в матче отсутвует лишний разделительный маркер

  отображает корректное время начала матча в разных часовых поясах [manual]:
    - tags:
      - backend_sport
    - reasonNotToAuto: 
      - Нет возможности сменить регион в автотесте  
    - do: перейти на страницу https://yandex.ru/tune/geo, выставить город "Торонто" и нажать на кнопку "Сохранить" 
    - do: открыть страницу футбольного календаря https://yandex.ru/sport/calendar/football
    - assert: |
        на странице присутствует календарь, по умолчанию открыта вкладка "Сегодня", название вкладки выделено шрифтом,
        обратите внимание! если сегодня матчей нет, в календаре присутствует плашка "Сегодня событий не найдено. Показаны ближайшие", Это ок, заводить баги на такое на нужно!
        внешний вид - https://jing.yandex-team.ru/files/umansai5/Снимок%20экрана%202022-07-11%20в%2013.46.42.png  
    - do: кликнуть по любому не начавшемуся матчу 
    - assert: |
        открылась страница выбранного матча,
        страница матча содержит футбольный виджет,
        виджет содержит название чемпионата, названия команд, время начала матча,
        внешний вид - https://jing.yandex-team.ru/files/umansai5/Снимок%20экрана%202022-07-11%20в%2013.47.32.png
    - do: открыть в соседней вкладке страницу https://yandex.ru/tune/geo, выставить город "Сеул" и нажать на кнопку "Сохранить"        
    - do: вернуться на страницу матча и обновить страницу
    - assert: |
        страница обновилась,
        в виджете изменилась информация о дате и времени начала матча, согласно новому часовому поясу, +13 часов от Торонто,
        внешний вид - https://jing.yandex-team.ru/files/umansai5/Снимок%20экрана%202022-07-11%20в%2013.48.11.png      

files:
  - features/sport/event/footballEvent.desktop.hermione.js
  - features/sport/event/footballEvent.desktop.hermione.e2e.js

tags:
  - sport-neo
  - event

manager: mrwhite

qa-engineer: an-smirn0v

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
