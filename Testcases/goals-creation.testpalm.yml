feature: Создание новой цели

specs:
  beforeEach:
    - do: Залогиниться под пользователем user3993
  Положительные:
    1. Создание цели только с заполненным названием со страницы "Мои цели", предзаполнение ответственного:
      - automation: GOALS-493
      - do: Перейти на страницу "/compilations/2997"
      - do: Кликнуть на кнопку "Новая цель"
      - assert: |
          - Открылась карточка создания цели
          - В поле "Ответственный" подставился текущий пользователь Марат Январев
      - screenshot: Внешний вид карточки создания цели [todo plain]
      - do: Заполнить поле "Название цели" значением "Создание цели с предзаполненным ответственным"
      - do: Нажать на кнопку "Создать цель"
      - assert: |
          - Открылась карточка цели без оверлея
          - Созданная цель появилась в списке "Мои цели"
      - screenshot: Внешний вид карточки цели [todo card]

    2. Создание цели без предзаполнения ответственного:
      - automation: GOALS-493
      - do: Перейти на страницу "/filter?importance=2"
      - do: Кликнуть на кнопку "Новая цель"
      - assert: |
          - Открылась карточка создания цели
          - В поле "Ответственный" пусто
      - screenshot: Внешний вид карточки создания цели [todo plain]
      - do: Заполнить поле "Название цели" значением "Создание цели без предзаполнения ответственного"
      - do: Заполнить поле "Ответственный" значением "user3993"
      - assert: Появился саджест
      - do: Выбрать "Марат Январев" из списка
      - assert: В поле "Ответственный" подставилось значение "Марат Январев"
      - do: Нажать на кнопку "Создать цель"
      - assert: |
          - Открылась карточка цели с оверлеем
      - screenshot: Внешний вид карточки цели [todo card]

    3. Отмена создания цели по кнопке "Отмена":
      - automation: GOALS-493
      - do: Перейти на страницу "/compilations/2997"
      - do: Кликнуть на кнопку "Новая цель"
      - assert: Открылась карточка создания цели
      - do: Заполнить поле "Название цели" значением "Отмена создания цели"
      - do: Нажать на кнопку "Отмена"
      - assert: Карточка создания цели закрылась

  Отрицательные:
    1. Создание цели без заполнения названия:
      - automation: GOALS-493
      - do: Перейти на страницу "/compilations/2997"
      - do: Кликнуть на кнопку "Новая цель"
      - do: Нажать на кнопку "Создать цель"
      - assert: |
          - Цель не создалась
          - Отображается ошибка "Название цели не должно быть пустым"

    2. Создание цели без заполнения ответственного:
      - automation: GOALS-493
      - do: Перейти на страницу "/filter?importance=2"
      - do: Кликнуть на кнопку "Новая цель"
      - do: Заполнить поле "Название цели" значением "Цель на автотесты"
      - do: Поле "Ответственный" оставить пустым
      - do: Нажать на кнопку "Создать цель"
      - assert: |
          - Цель не создалась
          - Отображается тултип с ошибкой "У цели должен быть ответственный"

    3. Создание цели со слишком длинным названием:
      - automation: GOALS-493
      - do: Перейти на страницу "/compilations/2997"
      - do: Кликнуть на кнопку "Новая цель"
      - do: Заполнить поле "Название цели" строкой из 256 символов
      - do: Нажать на кнопку "Создать цель"
      - assert: |
          - Цель не создалась
          - Отображается тултип с ошибкой "Название цели слишком длинное"


priority: blocker

tags:
  - reviewed
