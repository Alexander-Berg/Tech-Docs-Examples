feature: Список ресторанов Мишлен

specs-integration:
  beforeEach:
    - do: получить выдачу по запросу 'рестораны мишлен москва' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: на выдаче есть список ресторанов мишлен в москве
  Наличие элементов:
    - tags:
        - pp_new_core
    - assert: |
        в списке ресторанов мишлен есть тайтл,
        в списке ресторанов мишлен есть сабтайтл,
        в списке ресторанов мишлен есть карточки,
        в конце списка есть кнопка '"Смотреть ещё"'
  Открытие оверлея организации:
    - do: кликнуть на первую организацию в списке
    - assert: открылся оверлей с карточкой организации
  Дозагрузка списка:
    - tags:
        - pp_new_core
    - do: кликнуть на кнопку '"Смотреть ещё"'
    - assert: загрузились еще организации

specs:
  beforeEach:
    - do: получить выдачу по запросу "рестораны мишлен великобритании"
    - assert: в выдаче есть колдунщик списка ресторанов мишлен
  Внешний вид:
    - screenshot: внешний вид [plain]
  Количество элементов в списке:
    - assert: в списке событий/организаций должно быть 7 элементов
  Попап с информацией о Мишлен:
    - do: нажать на знак вопроса рядом с заголовком колдунщика
    - tech: сработал счётчик path="/$page/$main/$result/companies-top/help[@behaviour@type = "dynamic"]"
    - assert: на странице появился попап с информацией о Мишлен
    - screenshot: внешний вид [popup]
    - do: нажать на кнопку "Подробнее на guide.michelin.com"
    - assert: произошёл переход на сайт Мишлен
    - tech: сработал счётчик path="/$page/$main/$result/companies-top/help/michelin-modal/button"
  Открытие оверлея по клику в карточку:
    - do: кликнуть в элемент списка
    - assert: открылся сайдблок с подробностями
  Проверка элемента после дозагрузки:
    - do: кликнуть на кнопку "Ещё места"
    - assert: в конец списка добавилось 5 элементов
    - do: кликнуть в 11-й элемент списка
    - assert: открылся сайдблок с подробностями
    - tech: сработал счётчик /$page/$main/$result/companies-top/map/minibadge/item
  Заголовок:
    - do: кликнуть по черному заголовку над картой
    - tech: сработал счётчик path="/$page/$main/$result/companies-top/title"
    - assert: на странице оверлей с картой

files:
  - src/features/Companies/Companies.features/CompaniesTopPlaces/CompaniesTopPlaces.test/CompaniesTopPlaces@touch-phone.hermione.e2e.js
  - src/features/Companies/Companies.features/CompaniesTopPlaces/CompaniesTopPlaces.test/CompaniesTopPlaces@touch-phone.hermione.js

counter: /$page/$main/$result/companies-top

v-team: VanillaGeo

tags:
  - react
  - hasE2E
  - geo
  - geo_top_list

tlds: all
