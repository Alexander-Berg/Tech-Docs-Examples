feature: Поиск по сообщениям

specs:

    beforeEach:
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: открыть чат из description
        - assert: чат открылся
        - do: кликнуть / нажать на значок поиска "Лупу" в правом верхнем углу
        - assert: |
              под шапкой чата появилась панель поиска с полем ввода
              в поле ввода плейсхолдер "Поиск" и фокус курсора находится в поле ввода
              рядом с полем ввода есть стрелки переключения результатов поиска и "крестик" закрытия режима поиска

    Поиск работает по тексту сообщений[manual]:
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть несколько одинаковых текстовых сообщений от другого пользователя (если такого сообщения нет - отправить другим пользователем в чат любое текстовое сообщение)
        - do: ввести в поле поиска слово, которое использовалось в чате более одного раза
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к самому свежему результату поиска (если результат поиска находится в пределах просматриваемого экрана - то подскролл не происходит)
              отображенный результат поиска временно выделен

    Поиск работает по тексту реплаев[manual]:
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть Reply (если такого сообщения нет - сделать Reply на любое сообщение).
        - do: ввести в поле поиска слово из reply
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к сообщению в reply с комментарием (если результат поиска находится в пределах просматриваемого экрана - то подскролл не происходит)
              cообщение в reply с комментарием временно выделено

    Поиск работает по тексту форвардов[manual]:
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть Forward (если такого сообщения нет - сделать Forward любого сообщения в этот чат)
        - do: ввести в поле поиска слово из forward
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к forward (если результат поиска находиться в пределах просматриваемого экрана - то подскролл не происходит)
              forward временно выделен

    Поиск работает по меншенам[manual]:
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть групповой чат, в истории которого есть меншен (призыв в чат:@имя) от другого пользователя (если такого сообщения нет - отправить в чат меншен)
        - do: ввести в поле поиска отправленный меншен
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к самому свежему результату поиска (если результат поиска находится в пределах просматриваемого экрана - то подскролл не происходит)
              отображенный результат поиска временно выделен

    Поиск осуществляется по всему тексту сообщения[manual]:
        - automation: MSSNGRFRONT-4760
        - description: |
              Если у нас есть сообщения “котомка” и “антрекот”, то по запросу “кот” должен быть один результата
              У авторизованного пользователя есть приватный/групповой чат, в истории которого есть текстовые сообщения “котомка” и “антрекот” (если таких сообщений нет - отправить в чат эти два текстовых сообщения)
              Другие сообщения в чате не содержат слов “кот”
        - do: ввести в поле поиска слово “кот”
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к самому свежему результату поиска (если результат поиска находится в пределах просматриваемого экрана - то подскролл не происходит)
              отображенный результат поиска временно выделен

    Поиск осуществляется в пределах одного сообщения[manual]:
        - automation: MSSNGRFRONT-4760
        - description: |
              Если у нас два сообщения подряд “привет”, “как дела”, то результатом поиска по “привет как дела” будет 0 результатов
              У авторизованного пользователя есть приватный/групповой чат, в истории которого есть текстовые сообщения “привет” и “как дела” (если таких сообщений нет - отправить в чат эти два текстовых сообщения)
        - do: ввести в поле поиска сообщение “привет как дела”
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска не отображается число совпадений
              стрелки вверх/вниз неактивны

    Поиск работает по именам файлов[manual]:
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть файл с названием “file” (если таких нет - отправить в чат файл с таким названием)
        - do: вести в поле поиска слово “file”
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к самому свежему результату поиска (если результат поиска находится в пределах просматриваемого экрана - то подскролл не происходит)
              cообщение с файлом временно выделено

    Поиск работает при вводе в запрос спецсимволов[manual]:
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть сообщения со спецсимволами (если таких нет - отправить в чат такие сообщения)
        - do: ввести в поле поиска спецсимвол, который был использован в сообщениях ранее в чате
        - assert: |
              введенный спецсимвол отображен в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к сообщению, в котором есть введенный спецсимвол (если результат поиска находится в пределах просматриваемого экрана - то подскролл не происходит)
              сообщение со спецсимволом временно выделено

    В результатах поиска нет контента других чатов[manual]:
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть два приватных/групповых чата, в истории которых есть сообщения, которые дублируют друг друга (если таких нет - отправить в чаты одинаковые сообщения)
        - do: ввести в поле поиска слово, которое есть в первом и втором чате
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к самому свежему результату поиска (если результат поиска находится в пределах просматриваемого экрана - то подскролл не происходит)
              отображенный результат поиска временно выделен и оно только в рамках данного чата

    Количество результатов поиска ограничено 100[manual]:
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть более 100 сообщений с одинаковым словом, например “привет” (если их нет - отправить в чат более 100 сообщений со словом “привет”)
        - do: ввести в поле поиска слово “привет”
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов - 100
              чат проскроллил к самому свежему результату поиска (если результат поиска находится в пределах просматриваемого экрана - то подскролл не происходит)
              отображенный результат поиска временно выделен
              нажатием стрелки "Вверх" проверить, что результатов действительно ровно 100

    Поиск дает такие же результаты при транслитерации запроса[manual]:
        - automation: MSSNGRFRONT-4760
        - description: |
              Принцип работы дерево -> derevo
              У авторизованного пользователя есть приватный/групповой чат, в истории которого есть сообщение “привет” (если такого нет - отправить в чат слово “привет”)
        - do: ввести в поле поиска слово “privet”
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к сообщению “привет” (если результат поиска находится в пределах просматриваемого экрана - то подскролл не происходит)
              сообщение “привет” временно выделено

    Поиск дает такие же результаты при наборе запроса в другой раскладке клавиатуры[manual]:
        - automation: MSSNGRFRONT-4760
        - description: |
              Принцип работы дерево -> lthtdj
              У авторизованного пользователя есть приватный/групповой чат, в истории которого есть сообщение “привет” (если такого нет - отправить в чат слово “привет”)
        - do: ввести в поле поиска слово “ghbdtn”
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к сообщению “привет” (если результат поиска находится в пределах просматриваемого экрана - то подскролл не происходит)
              сообщение “привет” временно выделено

    Поиск не чувствителен к регистру[manual]:
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть сообщение “ПрИвЕт” (если такого нет - отправить в чат слово “ПрИвЕт”)
        - do: ввести в поле поиска слово “привет”
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к сообщению “ПрИвЕт” (если результат поиска находиться в пределах просматриваемого экрана - то подскролл не происходит);
              сообщение “ПрИвЕт” временно выделено

    Поиск не чувствителен к Е/Ё[manual]:
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть сообщение “свёкла” (если такого нет - отправить в чат слово “свёкла”)
        - do: ввести в поле поиска слово “свекла”
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к сообщению “свёкла” (если результат поиска находиться в пределах просматриваемого экрана - то подскролл не происходит)
              сообщение “свёкла” временно выделено

    Поиск работает при вводе 2 и более символов[manual]:
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть сообщение “привет” (если такого нет - отправить в чат слово “привет”)
        - do: ввести в поле поиска “п”
        - assert: |
              в панели поиска не отображается число совпадений
              стрелки вверх/вниз неактивны
        - do: ввести в поле поиска “пр”
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов, начинающихся с букв “пр”
              чат проскроллил к сообщению “привет” (если результат поиска находиться в пределах просматриваемого экрана - то подскролл не происходит)
              сообщение с “привет” временно выделено

    Поисковый запрос можно изменить[manual]:
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть сообщения “привет” и “пока” (если таких нет - отправить в чат эти два сообщения)
        - do: ввести с поле поиска слово “привет”
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к сообщению “привет” (если результат поиска находится в пределах просматриваемого экрана - то подскролл не происходит)
              сообщение “привет” временно выделено
        - do: удалить слово “привет” из поля поиска кнопкой “Backspace” на клавиатуре
        - assert: поле поиска очищено
        - do: вести в поле поиска слово “пока”
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к сообщению “пока” (если результат поиска находится в пределах просматриваемого экрана - то подскролл не происходит)
              сообщение “пока” временно выделено

    Поиск корректно работает, когда в результатах поиска нет ни одного совпадения[manual]:
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого нет сообщения следующего содержания:“Привет”
        - do: ввести в поле поиска слово, которого нет в истории данного чата
        - assert: |
              введенное слово отображается в поле поиска
              позиция в чате была сохранена
              в панели поиска не отображается число совпадений

    Поиск не выдает результатов в отсутствии интернет-соединения[manual]:
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть текстовое сообщение (если такого сообщения нет - отправить в чат любое текстовое сообщение)
        - do: отключить интернет-соединение на тестируемом устройстве
        - assert: интерент-соединение выелючено
        - do: ввести в поле поиска слово, которое есть в истории данного чата
        - assert: |
              введенное слово отображается в поле поиска
              позиция в чате была сохранена
              в панели поиска не отображается число совпадений

    Поиск не отдает результаты по сообщениям 18+ в публичных чатах, которое было удалено модератором[manual]:
        - automation: MSSNGRFRONT-4760
        - description: |
              В качестве слова категории 18+, которое было бы удалено модератором можно использовать слово “Экстези”
              Авторизованным пользователем присоединиться к чату https://yandex.ru/chat/#/join/7d18cd3a-0cb7-40d9-913e-feb3a0b65584 в истории которого есть текстовые сообщения категории 18+ (если таких сообщений нет - отправить в этот чат любым собеседником такое сообщение)
              Данный тест-кейс неактуален для Team-окружения (его необходимо скпипать, если ран проходится тимовскм аккаунтом)
        - do: в поле поиска ввести сообщение, которое было удалено модератором
        - assert: |
              введенное слово отображается в поле поиска
              позиция в чате была сохранена
              в панели поиска не отображается число совпадений

    Поиск отдает результаты по сообщениям 18+ в публичных чатах[manual]:
        - automation: MSSNGRFRONT-4760
        - description: |
              В качестве слова категории 18+ можно использовать слово “Сука”
              Авторизованным пользователем присоединиться к чату https://yandex.ru/chat/#/join/7d18cd3a-0cb7-40d9-913e-feb3a0b65584 в истории которого есть текстовые сообщения категории 18+ (если таких сообщений нет - отправить в этот чат любым собеседником такое сообщение)
              В окне чата сообщение категории 18+ скрыто
              Данный тест-кейс неактуален для Team-окружения (его необходимо скпипать, если ран проходится тимовскм аккаунтом)
        - do: ввести в поле поиска сообщение из description
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к самому свежему результату поиска (если результат поиска находиться в пределах просматриваемого экрана - то подскролл не происходит);
              найденное сообщение скрыто

    Поиск отдает результаты по сообщениям 18+ в не публичных чатах[manual]:
        - automation: MSSNGRFRONT-4760
        - description: |
              В качестве слова категории 18+ можно использовать слово “Сука”
              У авторизованного пользователя есть групповой чат (в котором отключен ползунок публичной ссылки), в истории которого есть текстовые сообщения категории 18+ (если таких сообщений нет - отправить в этот чат любым собеседником такое сообщение)
              Данный тест-кейс неактуален для Team-окружения (его необходимо скпипать, если ран проходится тимовскм аккаунтом)
        - do: ввести в поле поиска сообщение из description
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к самому свежему результату поиска (если результат поиска находиться в пределах просматриваемого экрана - то подскролл не происходит)

    Чат скроллится к самому свежему результату поиска[manual]:
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть несколько одинаковых текстовых сообщений от другого пользователя (если такого сообщения нет - отправить другим пользователем в чат любое текстовое сообщение)
        - do: ввести в поле поиска слово, которое использовалось в чате более одного раза
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к самому свежему результату поиска (если результат поиска находиться в пределах просматриваемого экрана - то подскролл не происходит)
              отображенный результат поиска временно выделен

    При переходе к результату поиска сообщение временно выделяется[manual]:
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть несколько одинаковых текстовых сообщений от другого пользователя (если такого сообщения нет - отправить другим пользователем в чат любое текстовое сообщение)
        - do: ввести в поле поиска слово, которое есть в истории чата
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к самому свежему результату поиска (если результат поиска находиться в пределах просматриваемого экрана - то подскролл не происходит)
              отображенный результат поиска временно выделен

    Возможно переходить между результатами поиска стрелочками на панели с количеством результатов[manual]:
        - tags: [advanced_smoke, b2b]
        - automation: MSSNGRFRONT-4760
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть несколько одинаковых текстовых сообщений от другого пользователя (если такого сообщения нет - отправить другим пользователем в чат любое текстовое сообщение)
        - do: ввести в поле поиска слово, которое использовалось в чате более одного раза
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к самому свежему результату поиска (если результат поиска находиться в пределах просматриваемого экрана - то подскролл не происходит)
              отображенный результат поиска временно выделен
        - do: на панели с количеством совпадений тапнуть на стрелку "Вверх"
        - assert: |
              чат проскроллил до второго совпадения
              отображенный результат поиска временно выделен
              цифра 1 на панели с количеством совпадений изменилась на 2
        - do: на панели с количеством совпадений тапнуть на стрелку "Вниз"
        - assert: |
              чат проскроллил до первого совпадения
              отображенный результат поиска временно выделен
              цифра 2 на панели с количеством совпадений изменилась на 1;
              стрелка Вниз стала неактивной

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
