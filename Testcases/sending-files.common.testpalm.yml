feature: Отправка медиафайлов

specs:

    Можно вызвать attach menu через панель ввода по кнопке со скрепкой[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат в списке чатов
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер

    Файлоовый менеджер можно закрыть[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат в списке чатов
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: Нажать кнопку "Отменить" (если тест-кейс проходится на мобильном девайсе, то нажать на пустую область выше аттач-меню)
        - assert: |
              Файловый менеджер закрывается
              Открыто окно чата

    Файлоовый менеджер можно закрыть с помощью кнопки "ESC"[manual]:
        - automation:
        - description: |
              У авторизованного пользователя есть приватный/групповой чат в списке чатов
              Данный тест-кейс неактуален для мобильного клиента
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: Нажать кнопку "ESC" на клавиатуре
        - assert: |
              Файловый менеджер закрывается
              Открыто окно чата

    Можно отменить загрузку изобаржений / файлов закрыв попап:
        - description: |
              Между пользователем А и Б есть общий чат (приватный/групповой)
              У Вас есть файл размером менее 50 МБ
        - do: Пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: В открывшемся менеджере файлов выбрать файл размером менее 50 МБ и нажать кнопку "Отправить"
        - assert: Открывается попап, в котором размещен файл и есть возможность добавить сообщениe
        - do: Нажать на крестик в шапке попапа
        - assert: |
              Попап закрыт
              Открыто окно чата

    Можно отменить загрузку изобаржений / файлов закрыв попап с помощью кнопки "ESC":
        - automation:
        - description: |
              Между пользователем А и Б есть общий чат (приватный/групповой)
              У Вас есть файл размером менее 50 МБ
              Данный тест-кейс неактуален для мобильного клиента
        - do: Пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: В открывшемся менеджере файлов выбрать файл размером менее 50 МБ и нажать кнопку "Отправить"
        - assert: Открывается попап, в котором размещен файл и есть возможность добавить сообщениe
        - do: Нажать на кнопку "ESC" на клавиатуре
        - assert: |
              Попап закрыт
              Открыто окно чата

    Можно удалить отправляемые файлы в попапе отправки:
        - description: |
              Между пользователем А и Б есть общий чат (приватный/групповой)
              У Вас есть файлы размером менее 50 МБ и минимум изображения
        - do: Пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: В открывшемся менеджере файлов выбрать файл размером менее 50 МБ, два изображений и нажать кнопку "Отправить"
        - assert: |
              Открывается попап, в котором размещен файл, изображения и есть возможность добавить сообщениe
        - do: Навести курсором на файл в попапе / нажать на файл в попапе
        - assert: Рядом с файлом появился "Крестик"
        - do: Нажать на "Крестик"
        - assert: Файл был удален из попапа
        - do: Навести курсором на изображение в попапе / нажать на изображение в попапе
        - do: Нажать на "Крестик"
        - assert: Изображение было удалено из попапа
        - do: Нажать на "Крестик" в самом попапе отправки
        - assert: |
              Попап отправки был закрыт
              Открыто окно чата

    Файл размером менее 50МБ можно выбрать и отправить[manual]:
        - tags: [advanced_smoke, b2b]
        - automation:
        - description: |
              Между пользователем А и Б есть общий чат (приватный/групповой)
              У Вас есть файл размером менее 50 МБ
        - do: Пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: В открывшемся менеджере файлов выбрать файл размером менее 50 МБ и нажать кнопку "Отправить"
        - assert: Открывается попап, в котором размещен файл и есть возможность добавить сообщениe
        - do: Нажать на кнопку отправки
        - assert: Файл отправляется
        - do: Авторизоваться Пользователем Б
        - assert: Пользователь авторизован
        - do: Открыть чат, куда отправлялся ранее файл размером менее 50 МБ
        - assert: Чат открыт
        - do: Проверить что файл доставлен и его можно скачать
        - assert: Файл доставлен и скачивается

    Нельзя отправить файл более 50МБ[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: |
              У авторизованного пользователя в списке чатов есть приватный / групповой чат
              У Вас есть файл размером  более 50 МБ
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: Выбрать файл размером более 50МБ и и нажать кнопку "Отправить"
        - assert: |
              Открывается попап, в котором размещен файл и есть возможность добавить сообщениe
              В попапе указан размер отправляемого файла
        - do: Нажать на кнопку отправки
        - assert: |
              Файл не отправляется
              Появляется тост "Можно загружать непустые файлы, размер которых не превышает 50,0 МБ"

    При отправке файла/видео есть индикатор загрузки[manual]:
        - automation:
        - description: |
              У авторизованного пользователя в списке чатов есть приватный / групповой чат
              У Вас есть файл / видео размером менее 50 МБ
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: Выбрать файл / видео менее 50 МБ и нажать кнопку "Отправить"
        - assert: |
              Открывается попап, в котором размещен файл / видео и есть возможность добавить сообщениe
              В попапе указан размер отправляемого файла
        - do: Нажать на кнопку отправки
        - assert: |
              Видео / файл отправляется
              Отображается троббер загрузки
        - do: Дождаться окончания загрузки.
        - assert: |
              Троббер пропадает
              Отправленный файл отображается в чате

    При отправке изображения есть троббер загрузки:
        - description: |
              У авторизованного пользователя в списке чатов есть приватный / групповой чат
              У Вас есть изображения
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: Выбрать любое изображение и нажать кнопку "Отправить"
        - assert: |
              Открывается попап, в котором размещено изображение и есть возможность добавить сообщениe
              В попапе отображается превью этого изображения
        - do: Нажать на кнопку отправки
        - assert: |
              Изображение отправлено
              В центре изображения отображается троббер загрузки
        - do: Дождаться окончания загрузки
        - assert: |
              Троббер пропадает
              Отправленное изображение отображается в чате
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: Выбрать несколько изображений и нажать кнопку "Отправить"
        - assert: |
              Открывается попап, в котором размещены изображения и есть возможность добавить сообщениe
              В попапе отображаются превью этих изображений
        - do: Нажать на кнопку отправки
        - assert: |
              Изображения отправлены
              В центре каждого изображения отображается троббер загрузки
        - do: Дождаться окончания загрузки
        - assert: |
              Тробберы пропадают у всех изображений
              Все отправленные изображения отображаются в чате

    Можно отменить загрузку видео/файла:
        - description: |
              У авторизованного пользователя в списке чатов есть приватный / групповой чат
              У Вас есть файл / видео размером менее 50 МБ
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: Выбрать файл / видео менее 50 МБ и нажать кнопку "Отправить"
        - assert: |
              Открывается попап, в котором размещен файл / видео и есть возможность добавить сообщениe
              В попапе указан размер отправляемого файла
        - do: Нажать на кнопку отправки
        - assert: |
              Видео / файл отправляется
              Отображается троббер загрузки
        - do: Нажать на троббер, пока файл/видео не загрузилось
        - assert: Загрузка файла / видео была отменена

    Можно отменить загрузку изображения:
        - description: |
              У авторизованного пользователя в списке чатов есть приватный / групповой чат
              У Вас есть изображения
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: Выбрать любое изображение и нажать кнопку "Отправить"
        - assert: |
              Открывается попап, в котором размещено изображение и есть возможность добавить сообщениe
              В попапе отображается превью этого изображения
        - do: Нажать на кнопку отправки
        - assert: |
              Изображение отправлено
              В центре изображения отображается троббер загрузки
        - do: Нажать на троббер, пока изображение не загрузилось
        - assert: Изображение пропало из чат

    Полученное изображение корректно отображается в окне чата[manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом можно авторизоваться в другом браузере
              Необходимо также иметь два аккаунта - пользователь А (проверяемый) авторизован, пользователь Б (вспомогательный)
              Между пользователем А и Б есть общий приватный / групповой чат
        - do: Пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Под  пользователем Б в чат из description отправить изображение
        - assert: У Пользователя А в окне чата отображается отправленное изображение (нет троббера и значка "скачать")

    Полученный файл корректно отображается в окне чата[manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом можно авторизоваться в другом браузере
              Необходимо также иметь два аккаунта - пользователь А (проверяемый) авторизован, пользователь Б (вспомогательный)
              Между пользователем А и Б есть общий приватный / групповой чат
        - do: Пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Под  пользователем Б в чат из description отправить файл размером менее 50 МБ
        - assert: У Пользователя А в окне чата отображается отправленный файл (нет троббера загрузки)

    Отправка файлов без сети при ее восстановлении[manual]:
        - automation:
        - description: |
              Между пользователем А и Б есть приватный / групповой чат
              Пользователем А и Б необходимо авторизовываться в одном браузере
              У Вас есть файл / видео размером менее 50 МБ
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Отключить интернет-соединение
        - assert: Интернет-соединение отключено
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: Выбрать файл / видео менее 50 МБ и нажать кнопку "Отправить"
        - assert: |
              Открывается попап, в котором размещен файл / видео и есть возможность добавить сообщениe
              В попапе указан размер отправляемого файла
        - do: Нажать на кнопку отправки
        - assert: |
              Файл был не отправлен в чат
              В окне чата рядом с файлом отображается красный круг с восклицательным знаком
              В балуне с файлом есть кнопка "Повторить попытку"
        - do: Восстановить интернет-соединение
        - assert: Интернет-соединение восстановлено
        - do: Нажать кнопку "Повторить попытку"
        - do: Файл был успешно загружен
        - do: Авторизоваться Пользователем Б
        - assert: Пользователь авторизован
        - do: Открыть чат, куда отправлялся ранее файл размером менее 50 МБ
        - assert: Чат открыт
        - do: Проверить что файл доставлен и его можно скачать
        - assert: Файл доставлен и скачивается

    Отправка изображений без сети при ее восстановлении[manual]:
        - automation:
        - description: |
              Между пользователем А и Б есть приватный / групповой чат
              Пользователем А и Б необходимо авторизовываться в одном браузере
              У Вас есть изображения
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Отключить интернет-соединение
        - assert: Интернет-соединение отключено
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: Выбрать любое изображение и нажать кнопку "Отправить"
        - assert: |
              Открывается попап, в котором размещено изображение и есть возможность добавить сообщениe
              В попапе отображается превью этого изображения
        - do: Нажать на кнопку отправки
        - assert: |
              Изображение было не отправлено в чат
              В окне чата рядом с изображением отображается красный круг с восклицательным знаком
              В превью изображения есть кнопка повторной отправки
        - do: Восстановить интернет-соединение
        - assert: Интернет-соединение восстановлено
        - do: Нажать кнопку повторной отправки
        - do: Изображение было успешно загружено
        - do: Авторизоваться Пользователем Б
        - assert: Пользователь авторизован
        - do: Откпыть чат, куда отправлялось ранее изображение
        - assert: Чат открыт
        - do: Проверить что изображение доставлено и отображается корректно
        - assert: Изображение доставлено и отображается корректно

    Не отправленные файлы/фото смещаются вниз, в порядке их добавления[manual]:
        - automation:
        - description: |
              у авторизованного пользователя в списке чатов есть приватный / групповой чат
              У Вас есть файл / видео размером менее 50 МБ, а также изображения
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Отключить интернет-соединение
        - assert: Интернет-соединение отключено
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: Выбрать файл / видео менее 50 МБ и нажать кнопку "Отправить"
        - assert: |
              Открывается попап, в котором размещен файл / видео и есть возможность добавить сообщениe
              В попапе указан размер отправляемого файла
        - do: Нажать на кнопку отправки
        - assert: |
              Файл был не отправлен в чат
              В окне чата рядом с файлом отображается красный круг с восклицательным знаком
              В балуне с файлом есть кнопка "Повторить попытку"
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: Выбрать любое изображение и нажать кнопку "Отправить"
        - assert: |
              Открывается попап, в котором размещено изображение и есть возможность добавить сообщениe
              В попапе отображается превью этого изображения
        - do: Нажать на кнопку отправки
        - assert: |
              Изображение было нео тправлено в чат
              В окне чата рядом с изображением отображается красный круг с восклицательным знаком
              В превью изображения есть кнопка повторной отправки
              Изображения смещается вниз располагется под файлом
        - do: Восстановить интернет-соединение
        - assert: Интернет-соединение восстановлено
        - do: Отправить любое сообщение в чат
        - assert: |
              Сообщение было отправлено
              Сообщение располагается выше ранее отправленных файла и изображения

    Можно отправить в чат сразу несколько видео / файлов[manual]:
        - automation:
        - description: |
              У авторизованного пользователя в списке чатов есть приватный / групповой чат
              У Вас есть файл / видео размером менее 50 МБ
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: Выбрать несколько видео / файлов размером менее 50 МБ и нажать кнопку "Отправить"
        - assert: |
              Открывается попап, в котором размещены выбранные файлы / видео и есть возможность добавить сообщениe
              В попапе указан размеры отправляемых файлов
        - do: Нажать на кнопку отправки
        - assert: Выбранные видео / файлы успешно загружены и корректно отображаются в окне чата

    Можно отправить файлы разных форматов[manual]:
        - automation:
        - description: |
              У авторизованного пользователя в списке чатов есть приватный / групповой чат
              У Вас есть файлы различных форматов (avi, ape, 7z, rar, pdf  и др.)
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: Выбрать файлы разных форматов из description и нажать кнопку "Отправить"
        - assert: |
              Открывается попап, в котором размещены выбранные файлы / видео и есть возможность добавить сообщениe
              В попапе указан размеры отправляемых файлов
        - do: Нажать на кнопку отправки
        - assert: Файлы отправляются корректно

    Файл размером менее 50МБ можно выбрать и отправить, добавив к нему подпись:
        - description: |
              Между пользователем А и Б есть общий чат (приватный/групповой)
              У Вас есть файл размером менее 50 МБ
        - do: Пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: В открывшемся менеджере файлов выбрать файл размером менее 50 МБ и нажать кнопку "Отправить"
        - assert: Открывается попап, в котором размещен файл и есть возможность добавить сообщениe
        - do: В поле ввода ввести любой текст и нажать на кнопку отправки
        - assert: |
              Файл отправляется
              Подпись к файлу отображается выше самого файла
        - do: Авторизоваться Пользователем Б
        - assert: Пользователь авторизован
        - do: Открыть чат, куда отправлялся ранее файл размером менее 50 МБ
        - assert: Чат открыт
        - do: Проверить что файл доставлен и его можно скачать
        - assert: |
              Файл доставлен и скачивается
              Отображется подпись к файлу

    Можно отправить изображение, добавив к нему подпись:
        - tags: [b2b]
        - description: |
              У авторизованного пользователя в списке чатов есть приватный / групповой чат
              У Вас есть изображения
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: Выбрать любое изображение и нажать кнопку "Отправить"
        - assert: |
              Открывается попап, в котором размещено изображение и есть возможность добавить сообщениe
              В попапе отображается превью этого изображения
        - do: В поле ввода ввести любой текст и нажать на кнопку отправки
        - assert: |
              Изображение отправлено
              В балуне с изобраежнием, под ним, отобржается подпись
        - do: Дождаться окончания загрузки
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: Выбрать несколько изображений и нажать кнопку "Отправить"
        - assert: |
              Открывается попап, в котором размещены изображения и есть возможность добавить сообщениe
              В попапе отображаются превью этих изображений
        - do: В поле ввода ввести любой текст и нажать на кнопку отправки
        - assert: |
              Изображения отправлены
              В балуне с изобраежниями, под ним, отобржается подпись

files:
  - tests/hermione/suites/messenger/attach-menu/sending-files.common.hermione.ts

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
