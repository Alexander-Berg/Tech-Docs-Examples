feature: Блокировка собеседника

specs:

    Пропадает приватный чат с собеседником в списке чатов, если его заблокировали через карточку чата[manual]:
        - automation: MSSNGRFRONT-5644
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно нигде не авторизоваться
              У пользователя А есть приватный чат с пользователем Б
        - do: Пользователем А открыть список чатов
        - assert: Список чатов открыт
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Кликнуть ЛКМ/Тапнуть по шапке чата
        - assert: Открылась карточка пользователя
        - do: Проскроллить до кнопки "Заблокировать и скрыть"
        - assert: Появилась кнопка "Заблокировать и скрыть" в информации о чате
        - do: Нажать на пункт “Заблокировать и скрыть”
        - assert: Показывается пермишен с кнопками "Отмена" и "Ок"
        - do: В пермишене выбрать "Ок"
        - assert: Закрылась карточка контакта и окно приватного чата
        - do: В списке чатов проверить наличие приватного чата с пользователем Б
        - assert: В списке чатов отсутствует приватный чат с пользователем Б

    Пропадает приватный чат с собеседником в списке чатов, если его заблокировали через меню в шапке чата[manual]:
        - automation: MSSNGRFRONT-5644
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно нигде не авторизоваться
              У пользователя А есть приватный чат с пользователем Б
        - do: Пользователем А открыть список чатов
        - assert: Список чатов открыт
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Кликнуть ЛКМ/Тапнуть по меню в виде трёх точек в шапке чата
        - assert: Открылось меню
        - do: Выбрать пункт “Заблокировать и скрыть”
        - assert: Показывается попап
        - do: В попапе выбрать "ОК"
        - assert: |
              Попап закрывается
              Окно приватного чата с пользователем Б закрывается
        - do: В списке чатов проверить наличие приватного чата с пользователем Б
        - assert: В списке чатов отсутствует приватный чат с пользователем Б

    Пропадает приватный чат с собеседником в списке чатов, если его заблокировали через список чатов[manual]:
        - automation: MSSNGRFRONT-5644
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно нигде авторизоваться
              У пользователя А есть приватный чат с пользователем Б
        - do: Пользователем А открыть список чатов
        - assert: Список чатов открыт
        - do: Кликнуть ПКМ/Лонгтапнуть на чат из description в списке чатов
        - assert: Открылось контекстное меню
        - do: Выбрать пункт “Заблокировать и скрыть”
        - assert: Показывается попап
        - do: В попапе выбрать "ОК"
        - assert: |
              Попап закрывается
              В списке чатов скрывается приватный чат с пользователем Б

    Заблокированного собеседника можно разблокировать в настройках[manual]:
        - tags: [advanced_smoke]
        - automation: MSSNGRFRONT-5644
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в другом браузере/на девайсе
              У пользователя А есть приватный чат с пользователем Б
              У пользователя А нет заблокированных пользователей
        - do: Пользователем А открыть список чатов
        - assert: Список чатов открыт
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Кликнуть ЛКМ/Тапнуть по шапке чата
        - assert: Открылась карточка пользователя
        - do: Проскроллить до кнопки "Заблокировать и скрыть"
        - assert: Появилась кнопка "Заблокировать и скрыть" в информации о пользователе
        - do: Нажать на пункт “Заблокировать и скрыть”
        - assert: Показывается пермишен с кнопками "Отмена" и "Ок"
        - do: В пермишене выбрать "Ок"
        - assert: Закрылась карточка контакта и окно приватного чата
        - do: Открыть настройки нажав на шестеренку в шапке списка чатов
        - assert: Открылось модальное окно настроек с пунктом "Заблокированные пользователи"
        - do: Нажать на пункт "Заблокированные пользователи"
        - assert: |
              Появилось модальное окно с заблокированными пользователями
              В списке отображается заблокированный пользователь Б
        - do: Кликнуть ЛКМ/Тапнуть на "Разблокировать"
        - assert: |
              Контакт удаляется из списка
              Окно с заблокированными пользователями пропадает и открывается список чатов
              В списке чатов отображается приватный чат с пользователем Б
        - do: Перейти в окно чата из description
        - assert: В окне чата есть поле ввода
        - do: Отправить сообщение
        - assert: Сообщение отправляется и корректно отображается в окне чата
        - do: Пользователем Б открыть список чатов
        - assert: Список чатов открыт
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить любое сообщение пользователю А
        - assert: Сообщение отправляется и корректно отображается в окне чата

    Заблокированного собеседника можно разблокировать через карточку чата[manual]:
        - automation: MSSNGRFRONT-5644
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в веб/в ферме/на втором девайсе.
              У пользователя А есть приватный чат с пользователем Б
              У пользователя А заблокирован пользователь Б
        - do: Пользователем А открыть список чатов
        - assert: Список чатов открыт
        - do: Нажать на шестеренку в шапке списка чатов
        - assert: |
              Открывается окно настроек
              В окне настроек есть пункт "Заблокированные пользователи"
        - do: Нажать на пункт "Заблокированные пользователи"
        - assert: |
              Открывается окно "Заблокированные пользователи"
              В данном окне есть пользователь Б
              Доступна копка "Разблокировать"
        - do: Нажать на пользователя Б
        - assert: Открывается карточка пользователя Б
        - do: Проскроллить до кнопки "Разблокировать"
        - assert: Появилась кнопка "Разблокировать" в информации о чате
        - do: Нажать на пункт “Разблокировать”
        - assert: В информации о пользователе вместо кнопки "Разблокировать" появилась кнопка "Заблокировать"
        - do: Перейти в окно чата из description,кликнув по кнопке "Написать" на экране "О пользователе"
        - assert: В окне чата есть поле ввода сообщений
        - do: Отправить сообщение
        - assert: Сообщение отправляется и корректно отображается в окне чата
        - do: Пользователем Б открыть список чатов
        - assert: Список чатов открыт
        - do: Открыть чат из description
        - assert: |
              Открывается чат из description
              В окне чата отображается сообщение от пользователя А
        - do: Отправить любое сообщение пользователю А
        - assert: Сообщение отправляется и корректно отображается в окне чата

    Заблокированного собеседника можно разблокировать через меню в шапке чата[manual]:
        - automation: MSSNGRFRONT-5644
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в веб/в ферме/на втором девайсе.
              У пользователя А есть приватный чат с пользователем Б
              У пользователя А заблокирован пользователь Б
        - do: Пользователем А открыть список чатов
        - assert: Список чатов открыт
        - do: Нажать на шестеренку в шапке списка чатов
        - assert: |
              Открывается окно настроек
              В окне настроек есть пункт "Заблокированные пользователи"
        - do: Нажать на пункт "Заблокированные пользователи"
        - assert: |
              Открывается окно "Заблокированные пользователи"
              В данном окне есть пользователь Б
              Доступна копка "Разблокировать"
        - do: Нажать на пользователя Б
        - assert: Открывается карточка пользователя Б
        - do: Нажать на кнопку "Написать"
        - assert: |
              Открывается чат из description
              В окне чата отображается кнопка "Разблокировать" вместо поля ввода сообщения
        - do: Кликнуть ЛКМ/Тапнуть по меню в виде трёх точек в шапке чата
        - assert: Открылось меню
        - do: Выбрать пункт “Разблокировать”
        - assert: |
              Меню закрывается
              В окне чата появляется поле ввода сообщения вместо кнопки "Разблокировать"
        - do: Отправить сообщение
        - assert: Сообщение отправляется и корректно отображается в окне чата
        - do: Пользователем Б открыть список чатов
        - assert: Список чатов открыт
        - do: Открыть чат из description
        - assert: |
              Открывается чат из description
              В окне чата отображается сообщение от пользователя А
        - do: Отправить любое сообщение пользователю А
        - assert: Сообщение отправляется и корректно отображается в окне чата

    Заблокированного собеседника можно разблокировать через меню в окне чата[manual]:
        - automation: MSSNGRFRONT-5644
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в веб/в ферме/на втором девайсе.
              У пользователя А есть приватный чат с пользователем Б
              У пользователя А заблокирован пользователь Б
        - do: Пользователем А открыть список чатов
        - assert: Список чатов открыт
        - do: Нажать на шестеренку в шапке списка чатов
        - assert: |
              Открывается окно настроек
              В окне настроек есть пункт "Заблокированные пользователи"
        - do: Нажать на пункт "Заблокированные пользователи"
        - assert: |
              Открывается окно "Заблокированные пользователи"
              В данном окне есть пользователь Б
              Доступна копка "Разблокировать"
        - do: Нажать на пользователя Б
        - assert: Открывается карточка пользователя Б
        - do: Нажать на кнопку "Написать"
        - assert: |
              Открывается чат из description
              В окне чата отображается кнопка "Разблокировать" вместо поля ввода сообщения
        - do: Кликнуть ЛКМ/Тапнуть по кнопке "Разблокировать" в окне чата
        - assert: |
              Пользователь Б разблокирован
              В окне чата появляется поле ввода сообщения вместо кнопки "Разблокировать"
        - do: Отправить сообщение
        - assert: Сообщение отправляется и корректно отображается в окне чата
        - do: Пользователем Б открыть список чатов
        - assert: Список чатов открыт
        - do: Открыть чат из description
        - assert: |
              Открывается чат из description
              В окне чата отображается сообщение от пользователя А
        - do: Отправить любое сообщение пользователю А
        - assert: Сообщение отправляется и корректно отображается в окне чата

    После разблокировки собеседника показывается чат и его история сообщений[manual]:
        - tags: [advanced_smoke]
        - automation: MSSNGRFRONT-5644
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно нигде не авторизоваться
              У пользователя А есть приватный чат с пользователем Б
              У пользователя А заблокирован пользователь Б
        - do: Пользователем А открыть список чатов
        - assert: Список чатов открыт
        - do: Нажать на шестеренку в шапке списка чатов
        - assert: |
              Открывается окно настроек
              В окне настроек есть пункт "Заблокированные пользователи"
        - do: Нажать на пункт "Заблокированные пользователи"
        - assert: |
              Открывается окно "Заблокированные пользователи"
              В данном окне есть пользователь Б
              Доступна копка "Разблокировать"
        - do: Нажать на конпку "Разблокировать"
        - assert: Пользователь Б разблокирован
        - do: Найти в списке чатов чат с пользователем Б и открыть его
        - assert: |
              Вместо кнопки "Разблокировать" отображается поле ввода сообщения
              Отображается окно чата с пользователем Б
        - do: Проскроллить вверх
        - assert: История сообщений скроллится

    Не приходят нотификации от заблокированного собеседника в приватный чат[manual]:
        - automation: MSSNGRFRONT-5644
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в другом браузере/на девайсе
              У пользователя А есть приватный чат с пользователем Б и включены нотификации для чата
        - do: Пользователем А открыть список чатов
        - assert: Список чатов открыт
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Кликнуть ЛКМ/Тапнуть по шапке чата
        - assert: Открылась карточка пользователя
        - do: Проскроллить до кнопки "Заблокировать и скрыть"
        - assert: Появилась кнопка "Заблокировать и скрыть" в информации о чате
        - do: Нажать на пункт “Заблокировать и скрыть”
        - assert: Показывается пермишен с кнопками "Отмена" и "Ок"
        - do: В пермишене выбрать "Ок"
        - assert: Закрылась карточка контакта и окно приватного чата
        - do: Открыть новую вкладку пользователем А
        - assert: Новая вкладка открыта
        - do: Пользователем Б отправить сообщение в чат из description
        - assert: Сообщение не отправляется
        - do: Убедиться, что пользователю А в приватный чат с Б не пришла нотификация
        - assert: Нотификации нет

    Приходят нотификации от заблокированного собеседника в групповой чат, где он есть[manual]:
        - automation: MSSNGRFRONT-5644
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в другом браузере/на девайсе
              У пользователя А есть приватный чат с пользователем Б
              У пользователя А есть групповой чат с пользователем Б, в котором включены уведомления
        - do: Пользователем А открыть список чатов
        - assert: Список чатов открыт
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Кликнуть ЛКМ/Тапнуть по шапке чата
        - assert: Открылась карточка пользователя
        - do: Проскроллить до кнопки "Заблокировать и скрыть"
        - assert: Появилась кнопка "Заблокировать и скрыть" в информации о чате
        - do: Нажать на пункт “Заблокировать и скрыть”
        - assert: Показывается пермишен с кнопками "Отмена" и "Ок"
        - do: В пермишене выбрать "Ок"
        - assert: Закрылась карточка контакта и окно приватного чата
        - do: Открыть новую вкладку пользователем А
        - assert: Новая вкладка открыта
        - do: Пользователем Б отправить сообщение в групповой чат из description
        - assert: Сообщение отправляется
        - do: Убедиться, что пришла нотификация в групповой чат из description
        - assert: Нотификация пришла
        - do: Кликнуть ЛКМ/тапнуть по нотификации из предыдущего пункта
        - assert: Открывается групповой чат из description

    Окно с заблокированными пользователями не пропадает, если в нем разблокировать одного из нескольких собеседников[manual]:
        - automation: MSSNGRFRONT-5644
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно нигде не авторизоваться
              У пользователя А есть приватный чат с пользователем Б и с пользователем В
              У пользователя А нет заблокированных пользователей
        - do: Пользователем А открыть список чатов
        - assert: Список чатов открыт
        - do: Открыть приватый чат с пользователем Б
        - assert: Открывается окно чата
        - do: Кликнуть ЛКМ/Тапнуть по шапке чата
        - assert: Открылась карточка пользователя
        - do: Проскроллить до кнопки "Заблокировать и скрыть"
        - assert: Появилась кнопка "Заблокировать и скрыть" в информации о чате
        - do: Нажать на пункт “Заблокировать и скрыть”
        - assert: Показывается пермишен с кнопками "Отмена" и "Ок"
        - do: В пермишене выбрать "Ок"
        - assert: Закрылась карточка контакта и окно приватного чата
        - do: Повторить пункты 1-6, но только для другого пользователя В
        - assert: Пользователь В заблокирован
        - do: Нажать на кнопку "Настройки" в виде шестерёнки вверху списка чатов
        - assert: Открываются настройки аккаунта
        - do: Нажать на "Заблокированные пользователи"
        - assert: В списке отображаются заблокированные пользователи Б и В
        - do: Кликнуть ЛКМ/Тапнуть на "Разблокировать" напротив пользователя Б
        - assert: |
              Контакт удаляется из списка
              Окно с заблокированными пользователями не пропадает и в нем отображается пользователь В

    Нельзя отправлять сообщения пользователю, который вас заблокировал[manual]:
        - tags: [advanced_smoke]
        - automation: MSSNGRFRONT-5644
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно нигде не авторизоваться
              У пользователя А есть приватный чат с пользователем Б
        - do: Пользователем А открыть список чатов
        - assert: Список чатов открыт
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Кликнуть ЛКМ/Тапнуть по шапке чата
        - assert: Открылась карточка пользователя
        - do: Проскроллить до кнопки "Заблокировать и скрыть"
        - assert: Появилась кнопка "Заблокировать и скрыть" в информации о чате
        - do: Нажать на пункт “Заблокировать и скрыть”
        - assert: Показывается пермишен с кнопками "Отмена" и "Ок"
        - do: В пермишене выбрать "Ок"
        - assert: Закрылась карточка контакта и окно приватного чата
        - do: Пользователем Б открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить любое сообщение
        - assert: |
              Сообщение не отправляется
              Рядом с сообщением показывается восклицательный знак

    Новый чат создается без пользователя, который вас заблокировал[manual]:
        - automation: MSSNGRFRONT-5644
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в другом браузере/на девайсе
              У пользователя А есть приватный чат с пользователем Б
        - do: Пользователем А открыть список чатов
        - assert: Список чатов открыт
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Кликнуть ЛКМ/Тапнуть по шапке чата
        - assert: Открылась карточка пользователя
        - do: Проскроллить до кнопки "Заблокировать и скрыть"
        - assert: Появилась кнопка "Заблокировать и скрыть" в информации о чате
        - do: Нажать на пункт “Заблокировать и скрыть”
        - assert: Показывается пермишен с кнопками "Отмена" и "Ок"
        - do: В пермишене выбрать "Ок"
        - assert: Закрылась карточка контакта и окно приватного чата
        - do: Пользователем Б открыть список чатов
        - assert: Список чатов открыт
        - do: Нажать на кпонку "Создать новый чат", которая находится над списком чатов
        - assert: |
              Открывается окно со списком контактов
              Над списком контактов есть кнопки "Новый груповой чат" и "Новый канал"
        - do: Нажать на "Новый групповой чат"
        - assert: |
              Отрывается окно создания группового чата
              Есть поля для ввода названия чата и описания чата
              Есть возможность загрузить аватар чата
        - do: Ввести название и описание чата. Загрузить аватар для чата и нажать кнопку "Добавить участников"
        - do: В поле поиска ввести имя пользователя А и выбрать его
        - assert: |
              Напротив пользователя А поставился чек-бокс
              Пользователь А был добавлен в карусель добавляемых участников
        - do: Нажать кнопку "Создать чат"
        - assert: |
              Групповой чат создан
              Окно чата открыто на странице
              В шапке чата под названием написано "1 участник"
        - do: Кликнуть ЛКМ/Тапнуть по шапке чата и посмотерть на участников чата
        - assert: Пользователя А нет в участниках чата

    При создании нового чата в списке контактов отсутствует заблокированный пользователь[manual]:
        - automation: MSSNGRFRONT-5644
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в другом браузере/на девайсе
              У пользователя А есть приватный чат с пользователем Б
        - do: Пользователем А открыть список чатов
        - assert: Список чатов открыт
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Кликнуть ЛКМ/Тапнуть по шапке чата
        - assert: Открылась карточка пользователя
        - do: Проскроллить до кнопки "Заблокировать и скрыть"
        - assert: Появилась кнопка "Заблокировать и скрыть" в информации о чате
        - do: Нажать на пункт “Заблокировать и скрыть”
        - assert: Показывается пермишен с кнопками "Отмена" и "Ок"
        - do: В пермишене выбрать "Ок"
        - assert: Закрылась карточка контакта и окно приватного чата
        - do: Нажать на кпонку "Создать новый чат", которая находится над списком чатов
        - assert: |
              Открывается окно со списком контактов
              Над списком контактов есть кнопки "Новый груповой чат" и "Новый канал"
        - do: Нажать на "Новый групповой чат"
        - assert: |
              Отрывается окно создания группового чата
              Есть поля для ввода названия чата и описания чата
              Есть возможность загрузить аватар чата
        - do: Ввести название и описание чата. Загрузить аватар для чата и нажать кнопку "Добавить участников"
        - do: В списке контактов найти пользователя Б
        - assert: Пользователь Б отсутствует в списке контактов
        - do: Нажать кнопку "Создать чат"
        - assert: |
              Групповой чат создан
              Окно чата открыто на странице
              В шапке чата под названием написано "1 участник"

    Пользователь не может заблокировать самого себя[manual]:
        - automation: MSSNGRFRONT-5644
        - description: У авторизованного пользователя в списке чатов есть чата "Сохраненные сообщения"
        - do: Открыть список чатов
        - assert: Список чатов открыт
        - do: Открыть чат из description
        - assert: Открывается чат
        - do: Кликнуть ЛКМ/Тапнуть по шапке чата
        - assert: Открылась карточка пользователя
        - do: Проскроллить до кнопки "Заблокировать и скрыть"
        - assert: В карточке пользователя нет кнопки "Заблокировать и скрыть"

    В настройках нет кнопки «Заблокированные пользователи», если нет заблокированных пользователей[manual]:
        - automation: MSSNGRFRONT-5644
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в другом браузере/на девайсе
              У пользователя А есть приватный чат с пользователем Б
              У пользователя А нет заблокированных пользователей
        - do: Пользователем А открыть список чатов
        - assert: Список чатов открыт
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Кликнуть ЛКМ/Тапнуть по шапке чата
        - assert: Открылась карточка пользователя
        - do: Проскроллить до кнопки "Заблокировать и скрыть"
        - assert: Появилась кнопка "Заблокировать и скрыть" в информации о чате
        - do: Нажать на пункт “Заблокировать и скрыть”
        - assert: Показывается пермишен с кнопками "Отмена" и "Ок"
        - do: В пермишене выбрать "Ок"
        - assert: Закрылась карточка контакта и окно приватного чата
        - do: Нажать на кнопку "Настройки" в виде шестерёнки вверху списка чатов
        - assert: Открываются настройки аккаунта
        - do: Нажать на "Заблокированные пользователи"
        - assert: В списке отображается заблокированный пользователь Б
        - do: Кликнуть ЛКМ/Тапнуть на "Разблокировать"
        - assert: |
              Контакт удаляется из списка
              Окно с заблокированными пользователями пропадает
              В списке чатов отображается приватный чат с пользователем Б
        - do: Нажать на кнопку "Настройки" в виде шестерёнки вверху списка чатов
        - assert: |
              Открываются настройки аккаунта
              В настройках аккаунта нет кнопки «Заблокированные пользователи»

    У пользователя не пропадает собеседник в списке чатов, если собеседник его заблокировал[manual]:
        - automation: MSSNGRFRONT-5644
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в другом браузере/на девайсе
              У пользователя А есть приватный чат с пользователем Б
              У пользователя А не заблокирован пользователь Б
        - do: Пользователем А открыть список чатов
        - assert: Список чатов открыт
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Кликнуть ЛКМ/Тапнуть по шапке чата
        - assert: Открылась карточка пользователя
        - do: Проскроллить до кнопки "Заблокировать и скрыть"
        - assert: Появилась кнопка "Заблокировать и скрыть" в информации о чате
        - do: Нажать на пункт “Заблокировать и скрыть”
        - assert: Показывается пермишен с кнопками "Отмена" и "Ок"
        - do: В пермишене выбрать "Ок"
        - assert: Закрылась карточка контакта и окно приватного чата
        - do: Пользователем Б открыть список чатов
        - assert: |
              Список чатов открыт
              В списке чата отображается приватный чат с пользователем А

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
