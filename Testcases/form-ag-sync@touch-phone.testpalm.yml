feature: Hotels / Синхронизация значений формы

specs:
  Оверлей с картой:
    beforeEach:
      - do: получить выдачу по запросу 'отели в ялте'
      - assert: появился колдунщик оргмн
    Проверка проброса дат в оверлей по кнопке "Все отели":
      - tags:
          - orgmn
          - hotels-form
          - dates
          - submit
          - sideblock
          - button
          - offers
          - datasync
      - assert: присутствует форма выбора дат и гостей
      - do: поменять дату выезда на 1-2 дня вперед, запомнить даты
      - do: нажать на кнопку "Все отели"
      - assert: открылся оверлей со списком отелей
      - do: закрыть оверлей, нажав на стрелочку "назад"
      - assert: оверлей закрылся
      - do: нажать на кнопку "Все отели"
      - assert: открылся оверлей со списком отелей
      - do: нажать на первый отель из списка
      - assert: открылся оверлей 1 отеля
      - assert: даты в форме 1 отеля соответствуют датам в форме на выдаче
    # баг https://st.yandex-team.ru/SERP-92560
    Пробрасываются в урл запроса пинов при драге карты:
      - tags:
          - no_assessors
      - do: нажать на карту
      - assert: открылся оверлей с картой
      - do: нажать на контрол зума "-"
      - tech: |
          выполнился запрос в /search/result
          в запросе присутствует параметр ag_dynamic c отельными фильтрами
  Карточка организации:
    beforeEach:
      - do: получить выдачу по запросу 'мрия резорт спа' _ALTERNATIVE_SEARCH_QUERIES_
      - assert: появился колдунщик 1org с блоком поиска номеров
    # баг https://st.yandex-team.ru/SERP-95192
    Пробрасываются при повторном открытии оверлея:
      - tags:
          - 1org
          - sideblock
          - offers
          - dates
          - datasync
          - high_priority
      - do: нажать на ссылку "Предложения партнеров"
      - assert: открылся оверлей на табе Номера
      - assert: список номеров загрузился
      - do: закрыть оверлей, нажав на стрелочку "назад"
      - assert: оверлей закрылся
      - do: поменять дату выезда на 1-2 дня вперед, запомнить даты
      - do: нажать на кнопку "Показать цены"
      - assert: открылся оверлей на табе Номера
      - assert: список номеров загрузился
      - assert: даты в форме 1 отеля соответствуют датам в форме на выдаче
    Проверяем цены в разделе "Предложения партнеров":
      - do: кликнуть в тайтл Предложения партнеров
      - assert: открылся таб Номера в сайдблоке
      - do: поменять дату и нажать "Показать цены"
      - assert: офферы в табе номера обновились на новую дату
      - do: кликнуть в таб Про отель
      - assert: в разделе "Предложения партнеров" новая дата

files:
  - features/companies/hotels/form/form-ag-sync@touch-phone.hermione.js

counter: /parallel/result/snippet/companies/travel_company/form/submit

v-team: KotTeam

tags:
  - skip_e2e_check

tlds: none
