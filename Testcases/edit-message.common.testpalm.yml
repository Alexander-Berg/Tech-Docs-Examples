feature: Контекстное меню(Редактировать)

import-steps:
    - tests/hermione/suites/messenger/shared-steps/open-messenger.testpalm.steps.yml

tlds: ru

specs:

    Редактирование сообщения:
        - tags: [smoke_automation]
        - attach: Авторизация и открытие чата yamb
        - do: отправить произвольное сообщение в любой чат
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на отправленное сообщение
        - do: в контекстном меню нажать на "Редактировать"
        - assert: |
            в поле ввода появился текст редактируемого сообщения
            редактируемое сообщение прикрепилось к полю ввода чата
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_11-05-59.png]
        - do: удалить любой символ в тексте в поле ввода
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_1_novoe_soobschenie_2019-02-06_16-45-54.png]
        - do: нажать на кнопку отправить
        - assert: справа от текста редактированного сообщения отображается иконка редактирования (в виде карандаша)
        - screenshot: пример внешнего вида [edited-message]

    При редактировании сообщения не вносим изменений в текст:
        - attach: Авторизация и открытие чата yamb
        - do: отправить произвольное сообщение в любой чат
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на отправленное сообщение
        - do: в контекстном меню нажать на "Редактировать"
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_11-05-59.png]
        - do: нажать на кнопку отправить
        - assert: |
            редактируемое сообщение не изменилось
            нет иконки редактирования
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-06_17-10-55.png]

    Редактирование сообщения с полным удалением текста:
        - attach: Авторизация и открытие чата yamb
        - do: отправить произвольное сообщение в чат c пользователем stas.mihailov666
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на отправленное сообщение
        - do: в контекстном меню нажать на "Редактировать"
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_11-05-59.png]
        - do: удалить текст в поле ввода
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_14-40-29.png]
        - do: нажать на кнопку отправить
        - assert: появилось модальное окно подтверждения удаления сообщения
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_11-03-49.png]
        - do: отменить удаление, нажав на кнопку "ОТМЕНА"
        - assert: |
            закрылось модальное окно
            вернулись к редактированию сообщения
            пустое поле ввода
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_14-40-29.png]

    Отмена редактирования:
        - attach: Авторизация и открытие чата yamb
        - do: отправить произвольное сообщение в чат c пользователем stas.mihailov666
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на отправленное сообщение
        - do: в контекстном меню нажать на "Редактировать"
        - assert: редактируемое сообщение прикрепилось к полю ввода чата
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_11-05-59.png]
        - do: удалить любой символ в тексте в поле ввода
        - do: отменить редактирования, нажав на кнопку в виде крестика в прикрепленном сообщении
        - assert: |
            закрылось прикрепленное сообщение к полю ввода чата
            редактирование сообщение отменилось

    При отмене редактирования не вносим изменений в текст:
        - attach: Авторизация и открытие чата yamb
        - do: отправить произвольное сообщение в чат c пользователем stas.mihailov666
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на отправленное сообщение
        - do: в контекстном меню нажать на "Редактировать"
        - assert: редактируемое сообщение прикрепилось к полю ввода чата
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_11-05-59.png]
        - do: отменить редактирования, нажав на кнопку в виде крестика в прикрепленном сообщении
        - assert: |
            закрылось прикрепленное сообщение к полю ввода чата
            редактирование сообщение отменилось

    Повторное редактирование после отмены редактирования:
        - attach: Авторизация и открытие чата yamb
        - do: отправить произвольное сообщение в чат c пользователем stas.mihailov666
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на отправленное сообщение
        - do: в контекстном меню нажать на "Редактировать"
        - assert: редактируемое сообщение прикрепилось к полю ввода чата
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_11-05-59.png]
        - do: удалить любой символ в тексте в поле ввода
        - do: отменить редактирования, нажав на кнопку в виде крестика в прикрепленном сообщении
        - assert: |
            закрылось прикрепленное сообщение к полю ввода чата
            редактирование сообщение отменилось
        - do: отправить произвольное сообщение в чат c пользователем stas.mihailov666
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на отправленное сообщение
        - do: в контекстном меню нажать на "Редактировать"
        - assert: редактируемое сообщение прикрепилось к полю ввода чата

files:
    - tests/hermione/suites/messenger/message-history/context-menu/edit-message.common.hermione.ts

v-team: Chat

tags:
    - chamb
    - yamb
    - y-team
    - no_assessors
