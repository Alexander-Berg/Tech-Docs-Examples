feature: Share

specs:
  Проверка клика по элементу more (новая вкладка):
    - do: открыть главную страницу Поиска, удалить все параметры кроме yandex.ru и добавить в адресную строку к URL '/turbo?stub=share/default.json'
    - screenshot: внешний вид соотвествует скриншоту [plain]
    - tech: сработал счетчик на клик по кнопке Еще (/turbo/social/link/more)
    - do: кликнуть на кнопку Еще
    - assert: Кнопка 'Еще' скрылась
    - screenshot: внешний вид соотвествует скриншоту [plain-expand]

  Проверка клика по элементу more (iframe):
    - params:
        foreverdata: '2278005759'
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета
    - assert: открывается турбо-страница в той же вкладке (в поисковом приложении Яндекс турбо-страница открывается в новой вкладке)
    - screenshot: внешний вид соотвествует скриншоту [plain]
    - tech: сработал счетчик на клик по кнопке Еще (/turbo/social/link/more)
    - do: кликнуть на кнопку Еще
    - assert: Кнопка 'Еще' скрылась
    - screenshot: внешний вид соотвествует скриншоту [plain-expand]

  Проверка на ширине окна браузера 728px (новая вкладка):
    - do: открыть главную страницу Поиска, удалить все параметры кроме yandex.ru и добавить в адресную строку к URL '/turbo?stub=share/default.json'
    - do: уменьшить размер браузера до 728px по ширине
    - screenshot: внешний вид соотвествует скриншоту [plain]
    - do: кликнуть на кнопку Еще
    - screenshot: внешний вид соотвествует скриншоту [plain-expand]

  Проверка на ширине окна браузера 728px (iframe):
    - params:
        foreverdata: '2278005759'
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета
    - assert: открывается турбо-страница в той же вкладке (в поисковом приложении Яндекс турбо-страница открывается в новой вкладке)
    - do: уменьшить размер браузера до 728px по ширине
    - screenshot: внешний вид соотвествует скриншоту [plain]
    - do: кликнуть на кнопку Еще
    - screenshot: внешний вид соотвествует скриншоту [plain-expand]

  Проверка copy (новая вкладка):
    - do: открыть главную страницу Поиска, удалить все параметры кроме yandex.ru и добавить в адресную строку к URL '/turbo?stub=share/default.json'
    - do: кликнуть на кнопку Еще
    - do: кликнуть на кнопку копирования
    - tech: сработал счетчик на клик по кнопке Скопировать (/turbo/social/link/copy)
    - assert: кнопка после клика видоизменяется (появляется галочка) и в буфер попадет ссылка (или появится поле с ссылкой для копирования)
    - screenshot: внешний вид соотвествует скриншоту [plain]

  Проверка copy (iframe):
    - params:
        foreverdata: '2278005759'
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета
    - assert: открывается турбо-страница в той же вкладке (в поисковом приложении Яндекс турбо-страница открывается в новой вкладке)
    - do: кликнуть на кнопку Еще
    - do: кликнуть на кнопку копирования
    - tech: сработал счетчик на клик по кнопке Скопировать (/turbo/social/link/copy)
    - assert: кнопка после клика видоизменяется (появляется галочка) и в буфер попадет ссылка (или появится поле с ссылкой для копирования)
    - screenshot: внешний вид соотвествует скриншоту [plain]

  Проверка fallback если не скопировалась ссылка (новая вкладка):
    - do: открыть главную страницу Поиска, удалить все параметры кроме yandex.ru и добавить в адресную строку к URL '/turbo?stub=share/copy-fallback.json'
    - assert: под кнопками соц. сетей видно поле с ссылкой для копирования
    - screenshot: внешний вид соотвествует скриншоту [copy-fallback]

  Проверка fallback если не скопировалась ссылка (iframe):
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета
    - assert: открывается турбо-страница в той же вкладке (в поисковом приложении Яндекс турбо-страница открывается в новой вкладке)
    - params:
        foreverdata: '179641271'
    - assert: под кнопками соц. сетей видно поле с ссылкой для копирования
    - screenshot: внешний вид соотвествует скриншоту [copy-fallback]

files:
  - features/desktop/blocks/share/share.hermione.js

v-team: Turbo

manager: tanzwuta

tlds: none
