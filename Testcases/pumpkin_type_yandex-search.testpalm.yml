feature: Тыква
type: Шапка
params:
  exp_flags:
    - pumpkin=1

specs:
  Запрос помещается в строку поиска. Пользователь НЕ авторизован.:
    beforeEach:
      - do: Открыть выдачу с запросом который помещается в строку поиска выдачи. Пользователь НЕ авторизован.

    Внешний вид и логотип в шапке:
      - assert: Внешний вид соответствует эталону в вертикальной ориентации. В шапке отсутствует кнопка войти.
      - screenshot: Внешний вид [short/no-auth/plain]
      - do: Проверить логотип в шапке.
      - asssert: Ссылка в шапке ведет на главную страницу Яндекса.
      - assertMetrics: "*"

    Внешний вид в альбомной ориентации:
      - assert: Внешний вид соответствует эталону в горизонтальной ориентации.
      - screenshot: Внешний вид [short/no-auth/landscape]

  Запрос НЕ помещается в строку поиска. Пользователь авторизован.:
    beforeEach:
      - do: Открыть выдачу с запросом который HE помещается в строку поиска выдачи. Пользователь авторизован.

    Внешний вид и перезапрос:
      - assert: Внешний вид соответствует эталону в вертикальной ориентации. В шапке отcутствует кнопка войти.
      - screenshot: Внешний вид [long/auth/plain]
      - do: Выполнить поисковый перезапрос из строки поиска.
      - assert: Выдача изменилась, в поисковой строке появился новый запрос.
      - assertMetrics: "*"

    Внешний вид в альбомной ориентации:
      - assert: Внешний вид соответствует эталону в горизонтальной ориентации.
      - screenshot: Внешний вид [short/no-auth/landscape]

  Пустой запрос:
    Внешний вид и перезапрос:
      - do: Открыть выдачу с пустым запросом.
      - assert: Внешний вид соответствует эталону.
      - screenshot: Внешний вид [empty/plain]
      - do: Тапнуть на строку поиска, отредактировать поисковый запрос, выполнить поисковый запрос.
      - assert: Выдача изменилась, в поисковой строке появился новый запрос.
      - assertMetrics: "*"

  Защита от XSS:
    Запрос экранируется, XSS не проходит:
      - do: Выполнить поисковый запрос содержащий запрещенные символы <script>alert(1)</script>.
      - assert: Появился результат поискового запроса для <script>alert(1)</script>, javascript не обработался.

files:
  - features/touch-phone/pumpkin/pumpkin_type_yandex-search.hermione.js

v-team: Beauty

tags:
  - reviewed

tlds: all

browsers:
  notFor:
    - searchapp-phone
