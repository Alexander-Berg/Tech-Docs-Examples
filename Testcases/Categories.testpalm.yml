feature: Categories

params:
  exp_flags:
    - analytics-disabled=1

browsers:
  - ios-safari-12-touch
  - ios-safari-11-touch
  - ios-safari-10-touch
  - ios-safari-9-touch

specs:
  Внешний вид блока:
    - do: открыть страницу карточки товара - ввести в адресную строку браузера yandex.ru/turbo?stub=categories/default.json
    - screenshot: внешний вид блока [plain]
    - do: кликнуть по первой ссылке
    - assert: в той же складке открылась страница с урлом `/turbo?stub=productspage/category.json`

  Разворачивание скрытых категорий:
    - do: открыть страницу карточки товара - ввести в адресную строку браузера yandex.ru/turbo?stub=categories/default.json
    - assert: |
        раскрыто 3 категории
        в «Показать еще» написано 16
    - do: нажать на кнопку «Показать ещё»
    - assert: |
        раскрылось еще 12 категорий
        в «Показать еще» написано 4

  Разворачивание скрытых категорий, заданное параметром:
    - do: открыть страницу карточки товара - ввести в адресную строку браузера yandex.ru/turbo?stub=categories/with-custom-params.json
    - assert: |
          раскрыто 2 категории
          в «Показать еще» написано 4
    - do: нажать на кнопку «Показать ещё»
    - assert: |
          раскрылось еще 2 категорий
          в «Показать еще» написано 2
    - do: нажать на кнопку «Показать ещё»
    - assert: |
        раскрылось еще 2 категорий
        ссылка «Показать еще» пропала
    - screenshot: внешний вид [plain]

  Восстановление количества развёрнутых категорий:
    - do: открыть страницу https://yandex.ru/turbo?stub=categories/with-custom-params.json
    - do: нажать на кнопку «Показать ещё» и перезагрузить страницу
    - assert: после перезагрузки страницы развёрнуто 4 категории]
    - do: нажать на кнопку «Показать ещё» и снова перезагрузить страницу
    - assert: после перезагрузки страницы развёрнуто 6 категорий

  Восстановление количества развёрнутых категорий в оверлее:
    - tags: no_assessors
    - do: открыть страницу https://yandex.ru/overlay?urls=/turbo?stub=categories/with-custom-params.json
    - do: открыть оверлей
    - do: нажать на кнопку «Показать ещё» и перезагрузить страницу
    - assert: в адресной строке должен добавиться параметр `&catcutlimit`

tags:
  - e-commerce
  - no_assessors #раскатили новый дизайн на 100%

files:
  - platform/components/Categories/__tests__/Categories.hermione.js

v-team: Turbo

manager: tanzwuta

tlds: none
