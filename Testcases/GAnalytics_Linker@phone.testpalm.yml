feature: GAnalytics Linker

tags: no_assessors

specs:
  aliases:
    - &CheckSearchGA
      - assert: в новой вкладке открылась страница магазина
      - assert: в query-параметрах присутствует параметр _ga
      - assert: в query-параметрах присутствует параметр fromTurbo=1
      - assert: в query-параметрах присутствует параметр dimension3=turbo
    - &CheckSearchTurbo
      - assert: в новой вкладке открылась страница магазина
      - assert: в query-параметрах присутствует параметр turboGaClientId

  Провязывание сессии стратегией "ga":
    Клик по ссылке в основном контенте страницы:
      - do: перейти на https://yandex.ru/turbo?stub=page/oc-turboext-linker-ga.json&exp_flags=analytics-disabled=0
      - do: нажать на строку информации о товаре
      - *CheckSearchGA

    Клик по ссылке в extras:
      - do: перейти на https://yandex.ru/turbo?stub=page/oc-turboext-linker-ga.json&exp_flags=analytics-disabled=0
      - do: нажать на кнопку добавления товара в корзину
      - *CheckSearchGA

    Отправка формы поиска:
      - do: перейти на https://yandex.ru/turbo?stub=page/oc-turboext-linker-ga.json&exp_flags=analytics-disabled=0
      - do: ввести поисковый запрос и отправить форму
      - *CheckSearchGA

  Провязывание сессии стратегией "turbo":
    Клик по ссылке в основном контенте страницы:
      - do: перейти на https://yandex.ru/turbo?stub=page/oc-turboext-linker-turbo.json&exp_flags=analytics-disabled=0
      - do: нажать на кнопку добавления товара в корзину
      - *CheckSearchTurbo

    Клик по ссылке в extras:
      - do: перейти на https://yandex.ru/turbo?stub=page/oc-turboext-linker-turbo.json&exp_flags=analytics-disabled=0
      - do: нажать на строку информации о товаре
      - *CheckSearchTurbo

    Отправка формы поиска:
      - do: перейти на https://yandex.ru/turbo?stub=page/oc-turboext-linker-turbo.json&exp_flags=analytics-disabled=0
      - do: ввести поисковый запрос и отправить форму
      - *CheckSearchTurbo

files:
  - platform/components/GAnalytics/__tests__/GAnalytics_Linker@phone.hermione.js

v-team: Turbo

manager: tanzwuta

tlds: none
