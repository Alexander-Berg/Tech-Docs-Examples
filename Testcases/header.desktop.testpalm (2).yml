feature: Шапка сервиса Я.Спорт

description: В сценарии описывается общий вид и компоненты шапки сервиса на десктопе. Проверяет корректное отображение шапки (с плюсом / без плюса) и пользовательского попапа

specs-integration:
  содержит основные рубрики:
    - do: открыть Спорт на странице рубрики "Главное"
    - assert: выделена рубрика "Главное"
    - do: посчитать кол-во рубрик в рубрикаторе
    - assert: список рубрик содержит перечень всех рубрик (13 рубрик включая главную)

specs:
  имеет внешний вид для залогиненного пользователя без подписки Плюс:
    - do: открыть главную страницу сервиса Яндекс.Спорт
    - do: авторизоваться под пользователем без подписки Яндекс.Плюс
    - assert: |
        отображается шапка сервиса Яндекс.Спорт,
        шапка содержит логотипы Яндекса и Спорта слева,
        иконку Яндекс.Новостей, иконку Яндекс.Плюс колокольчик уведомлений и юзерпик пользователя справа,
        при наличии уведомлений колокольчик черный, рядом каунтер непрочитанных уведомлений,
        при отсутствии уведомлений колокольчик серый,
        при наличии непрочитанных писем рядом с юзерпиком каунтер непрочитанных писем,
        шапка содержит табы спортивных рубрик
        внешний вид https://jing.yandex-team.ru/files/nightsonne/2021-09-16_22-56-53.png
    - do: выйти из аккаунта

  имеет внешний вид для залогиненного пользователя с подпиской Плюс:
    - do: авторизоваться под пользователем с подпиской Яндекс.Плюс (если нет своего аккаунта с подпиской, можно взять тестового https://wiki.yandex-team.ru/eva/testing/projects/nerpa/#loginyiparolidljatestovyxpolzovatelejjspodpiskojjpljusa)
    - assert: |
        отображается шапка сервиса Яндекс.Спорт,
        шапка содержит логотипы Яндекса и Спорта слева,
        иконку Яндекс.Новостей, колокольчик уведомлений и юзерпик пользователя с разноцветной обводкой справа,
        при наличии уведомлений колокольчик черный, рядом каунтер непрочитанных уведомлений,
        при отсутствии уведомлений колокольчик серый,
        при наличии непрочитанных писем рядом с юзерпиком каунтер непрочитанных писем,
        шапка содержит табы спортивных рубрик
        внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-10-22_15-11-37.png
    - do: ОБЯЗАТЕЛЬНО РАЗЛОГИНИТЬСЯ из тестового аккаунта с подпиской Яндекс.Плюс

  позволяет переходить по рубрикам:
    - do: навести курсор мыши на любую спортивную рубрику, кроме активной
    - assert: изменился стиль отображения рубрики в рубрикаторе и стиль курсора
    - do: кликнуть по любой рубрике, кроме активной
    - assert: произошел переход в рубрику
    - do: навести на троеточие
    - assert: открылся попап с оставшимися рубриками
    - do: навести на одну из них
    - assert: наименование рубрики прокрасилось красным
    - do: кликнуть по рубрике
    - assert: произошел переход в рубрику

  не перекрывает поп-апы пользователя и колокольчика:
    - do: залогиниться, если еще не залогинены
    - do: кликнуть по аватарке пользователя
    - assert: отобразился поп-ап, поп-ап не заезжает под портальную шапку
    - do: кликнуть по любой пустой области за пределами поп-апа
    - assert: поп-ап закрылся
    - do: кликнуть по иконке колокольчика
    - assert: отобразился поп-ап, поп-ап не заезжает под портальную шапку

  сохраняет вид при изменении окна браузера:
    - do: открыть главную страницу сервиса Яндекс.Спорт
    - do: изменить ширину окна браузера
    - assert: |
        отображается шапка сервиса Яндекс.Спорт,
        все элементы шапки не перекрывают друг друга
        таб спортивных рубрик не смещается и не изменяется в размере,
        спортивные рубрики скрываются в выпадающем списке под иконкой многоточия,
        внешний вид шапки со всеми рубриками - https://jing.yandex-team.ru/files/kossakovskaya/2021-10-22_15-14-23.png , 
        внешний вид шапки со скрытыми рубриками (количество отображаемых рубрик зависит от ширины вашего экрана и может отличаться то того, что на скрине) - https://jing.yandex-team.ru/files/kossakovskaya/2021-10-22_15-11-37.png

  позволяет перейти в другой сервис:
   - do: открыть главную страницу сервиса Яндекс.Спорт
   - do: тапнуть на иконку Я.Новостей в шапке - https://jing.yandex-team.ru/files/nightsonne/2021-09-16_23-03-02%20%282%29.png
   - assert: в новой вкладке происходит переход на главную страницу сервиса Я.Новости

  позволяет перейти в избранное пользователя:
    - browsers:
        notFor: win-ie11
    - do: авторизоваться и открыть главную страницу сервиса Яндекс.Спорт
    - do: кликнуть на аватар пользователя и в выпадушке нажать на пункт "Избранное"
    - assert: |
        в текущей вкладке открывается сервис Яндекс.Избранное,
        пользователь в избранном определен верно

files:
  - features/sport/header/header.desktop.hermione.js
  - features/sport/header/header.desktop.hermione.e2e.js

tags:
  - sport-neo
  - header

manager: mrwhite

qa-engineer: vasekerka

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
