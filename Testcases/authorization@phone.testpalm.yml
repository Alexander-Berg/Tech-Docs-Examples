feature: Ecom-tap

params:
  exp_flags:
    - analytics-disabled=1

specs:
  Авторизация:
    Логин и аватар в навигационной панели для авторизованного пользователя:
      - do: залогинется на yandex.ru
      - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/s/rnd/2lum7hf3?product_id=202
      - assert: в навигационной панели есть кнопка с аватаром и логином пользователя
      - screenshot: внешний вид соответствует скриншоту [plain]

    Разлогин:
      - do: залогинется на yandex.ru
      - do: открыть страницу https://yandex.ru/turbo/spideradio.github.io/s/rnd/2lum7hf3?product_id=202
      - do: нажать на кнопку пользователя в навигационной панели
      - do: нажать на кнопку "Выйти"
      - assert: |
          - произошло перенаправление на главную страницу магазина
          - аватар на кнопке профиля изменился на иконку
      - screenshot: внешний вид соответствует скриншоту [plain]

  Пользователь разлогинен:
    - automation: TURBOUI-5011
    - do: разлогиниться в Яндексе, если есть залогиненный пользователь
    - do: получить выдачу по запросу 'site:fulmar.ru каталог' (альтернативные запросы - site:kupicase.ru каталог, 'site:super01.ru каталог')'
    - assert: на выдаче присутствует сниппет(ы) с галереей карточек товаров [https://jing.yandex-team.ru/files/skurhanski/chrome_ziIi8LshqE.png]
    - do: при дальнейшем выполнении шагов обращать внимание на сохранение позиции при переходах туда-обратно кнопками на устройстве, пустые экраны при переходах (не должно быть пустых мест, дыр и т.п. больше секунды нигде), кривую верстку, прыгания элементов, неработающую функциональность
    - do: кликнуть по любой ссылке сниппета для перехода на страницу магазина
    - assert: открылась страница магазина
    - assert: внизу страницы присутствует навигационная панель, в которой есть пиктограмма Профиль [https://jing.yandex-team.ru/files/skurhanski/browser_i2kJYlmb91.png]
    - do: кликнуть по пиктограмме Профиль
    - assert: появилась страница (или попап) для ввода имени пользователя
    - do: залогиниться
    - assert: пользователь после залогина оказался на странице профиля
    - assert: в нижней навигационной панели появилось имя пользователя (и аватарка, если она установлена у пользователя)
    - do: покликать по другим пиктограммам в навигационной панели
    - assert: в пиктограмме профиля продолжает отображаться имя пользователя
    - do: кликнуть по пиктограмме профиля
    - assert: осуществился переход в раздер профиля [https://jing.yandex-team.ru/files/skurhanski/browser_U9FSn2NuTH.png]
    - do: проверить работу ссылок (кроме ссылки Выйти) на странице профиля
    - assert: ссылки ведут в соответствующие разделы Яндекс.Паспорта, а ссылка 'Избранные товары' - в соответствующий раздел сервиса Яндекс.Коллекции
    - assert: клик Назад или закрытие страницы, на которую перешли, снова возвращает в раздел профиля в магазине
    - do: кликнуть Выйти в разделе профиля
    - assert: на непродолжительное время появился спиннер
    - assert: после исчезновения спиннера осуществился переход в раздел Главная
    - assert: в пиктограмме профиля в навигационной панели исчезло имя пользователя
    - do: кликнуть по пиктограмме Профиль
    - assert: появилась страница (или попап) для ввода имени пользователя
    - do: закрыть страницу с магазином и перейти на страницу поиска
    - do: получить выдачу по запросу 'site:super01.ru каталог'
    - assert: на выдаче присутствует сниппет(ы) с галереей карточек товаров [https://jing.yandex-team.ru/files/skurhanski/chrome_ziIi8LshqE.png]
    - do: кликнуть по любой ссылке сниппета для перехода на страницу магазина
    - assert: открылась страница магазина
    - assert: внизу страницы присутствует навигационная панель, в которой есть пиктограмма Профиль (без имени пользователя)
    - do: кликнуть по пиктограмме Профиль
    - assert: появилась страница (или попап) для ввода имени пользователя

  Пользователь залогинен:
    - automation: TURBOUI-5011
    - do: залогиниться в Яндексе
    - do: получить выдачу по запросу 'получить выдачу по запросу 'site:fulmar.ru' (альтернативные запросы - site:kupicase.ru каталог, 'site:super01.ru')'
    - assert: на выдаче присутствует сниппет(ы) с галереей карточек товаров [https://jing.yandex-team.ru/files/skurhanski/chrome_ziIi8LshqE.png]
    - do: при дальнейшем выполнении шагов обращать внимание на сохранение позиции при переходах туда-обратно кнопками на устройстве, пустые экраны при переходах (не должно быть пустых мест, дыр и т.п. больше секунды нигде), кривую верстку, прыгания элементов, неработающую функциональность
    - do: кликнуть по любой ссылке сниппета для перехода на страницу магазина
    - assert: открылась страница магазина
    - assert: внизу страницы присутствует навигационная панель, в которой есть иконка с именем пользователя (и аватарка, если она установлена у пользователя) [https://jing.yandex-team.ru/files/skurhanski/browser_9Rvk1EAfL8.png]
    - do: кликнуть по иконке пользователя
    - assert: осуществился переход в раздер профиля [https://jing.yandex-team.ru/files/skurhanski/browser_U9FSn2NuTH.png]
    - do: проверить работу ссылок (кроме ссылки Выйти) на странице профиля
    - assert: ссылки ведут в соответствующие разделы Яндекс.Паспорта, а ссылка 'Избранные товары' - в соответствующий раздел сервиса Яндекс.Коллекции
    - assert: клик Назад или закрытие страницы, на которую перешли, снова возвращает в раздел профиля в магазине
    - do: кликнуть Выйти в разделе профиля
    - assert: на непродолжительное время появился спиннер
    - assert: после исчезновения спиннера осуществился переход в раздел Главная
    - assert: в пиктограмме профиля в навигационной панели исчезло имя пользователя
    - do: кликнуть по пиктограмме Профиль
    - assert: появилась страница (или попап) для ввода имени пользователя
    - do: кликнуть Назад
    - assert: осуществился переход на предыдущую страницу

  Залогинено несколько пользователей:
    - automation: TURBOUI-5011
    - do: залогиниться в Яндексе двумя разными пользователями
    - do: получить выдачу по запросу 'получить выдачу по запросу 'site:fulmar.ru' (альтернативные запросы - site:kupicase.ru каталог, 'site:super01.ru')'
    - assert: на выдаче присутствует сниппет(ы) с галереей карточек товаров [https://jing.yandex-team.ru/files/skurhanski/chrome_ziIi8LshqE.png]
    - do: при дальнейшем выполнении шагов обращать внимание на сохранение позиции при переходах туда-обратно кнопками на устройстве, пустые экраны при переходах (не должно быть пустых мест, дыр и т.п. больше секунды нигде), кривую верстку, прыгания элементов, неработающую функциональность
    - do: кликнуть по любой ссылке сниппета для перехода на страницу магазина
    - assert: открылась страница магазина
    - assert: внизу страницы присутствует навигационная панель, в которой есть иконка с именем пользователя №1 (и аватарка, если она установлена у пользователя) [https://jing.yandex-team.ru/files/skurhanski/browser_9Rvk1EAfL8.png]
    - do: кликнуть по иконке пользователя
    - assert: осуществился переход в раздер профиля [https://jing.yandex-team.ru/files/skurhanski/browser_U9FSn2NuTH.png]
    - do: проверить работу ссылок (кроме ссылки Выйти) на странице профиля
    - assert: ссылки ведут в соответствующие разделы пользователя №1 в Яндекс.Паспорте, а ссылка 'Избранные товары' - в соответствующий раздел сервиса Яндекс.Коллекции
    - assert: клик Назад или закрытие страницы, на которую перешли, снова возвращает в раздел профиля в магазине
    - do: перейти в разде Каталог и добавить несколько товаров в корзину
    - do: открыть несколько карточек товара и добавить их в избранное, нажав на иконку сердечка на изображении товара
    - assert: пример иконки добавления в избранное [https://jing.yandex-team.ru/files/skurhanski/bZOBBmhglM.png]
    - assert: на пиктограммах корзины и профиля пользователя есть красные тултипы с количеством добавленных товаров
    - do: перейти в раздел профиля и кликнуть Выйти
    - assert: после исчезновения спиннера осуществился переход в раздел Главная
    - assert: в пиктограмме профиля в навигационной панели отображается имя пользователя №2
    - assert: на пиктограммах корзины и профиля пользователя отсутствуют красные тултипы с количеством добавленных товаров
    - do: кликнуть по пиктограмме Корзина на нижней панели
    - assert: осуществился переход в раздел Корзина
    - assert: в корзине отсутствуют товары, добавленные первым пользователем
    - do: кликнуть по иконке пользователя
    - assert: осуществился переход в раздер профиля пользователя №2
    - do: проверить работу ссылок (кроме ссылки Выйти) на странице профиля
    - assert: ссылки ведут в соответствующие разделы пользователя №2 в Яндекс.Паспорте, а ссылка 'Избранные товары' - в соответствующий раздел сервиса Яндекс.Коллекции
    - do: открыть любую карточку товара и добавить его в корзину и в избранное
    - assert: на пиктограммах корзины и профиля пользователя №2 есть красные тултипы с количеством добавленных товаров

files:
    - __tests__/authorization@phone.hermione.js

tlds: ru

v-team: Turbo

tags:
  - ecom-tap
