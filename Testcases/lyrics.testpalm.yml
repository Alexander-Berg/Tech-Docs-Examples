feature: Музыкальный стихолюб

specs:
  Проверка ссылок:
    - do: получить выдачу Поиска по запросу 'песня винтаж делай мне больно текст' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: на выдаче есть колдунщик Музыкальный Стихолюб
    - screenshot: внешний вид по умолчанию [plain]
    - do: навести курсор мыши на первыю ссылку-источник
    - assert: ссылка прокрасилась красным
    - do: кликнуть в первую ссылку-источник
    - assert: |
        в новой вкладке открылся сайт-источник
        ссылка прокрасилась в фиолетовый после клика
    - do: кликнуть на ссылку 'Читать полностью'
    - assert: в новой вкладке открылся сайт-источник
    - tech: сработал счётчик /$page/$main/$result[@wizard_name="lyrics"]/full-link
    - do: кликнуть на тайтл плеера
    - assert: в новой вкладке открылась Музыка на плейлисте с искомым треком
    - tech: проверить счетчик у тайтла плеера
    - do: кликнуть на тайтл трека
    - assert: в новой вкладке открылась Музыка на плейлисте с искомым треком
    - tech: проверить счетчик у тайтла трека
    - do: кликнуть  на кнопку 'плей' трека
    - assert: в новой вкладке открылась Музыка на плейлисте с искомым треком, запустилось проигрывние трека
    - tech: проверить счетчик у кнопки 'плей'
    - assertMetrics: '-'
  
  Внешний вид когда на странице присутствует карточка ОО:
    - do: получить выдачу Поиска по запросу 'ARTPOP Леди Гага текст' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: на выдаче есть колдунщик Музыкальный Стихолюб
    - screenshot: внешний вид по умолчанию [plain]

specs-integration:
  Проверка наличия элементов:
    - do: получить выдачу по запросу 'песня винтаж делай мне больно текст' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: |
        на выдаче есть колдунщик Музыкальный Стихолюб
        в колдунщике есть ссылка на источник
        в колдунщике есть тайтл
        в колдунщике есть плеер
    - counter: /$page/$main/$result[@wizard_name="lyrics"]/play

files:
  - features/lyrics/lyrics@deskpad.hermione.js
  - features/lyrics/lyrics@deskpad.hermione.e2e.js

v-team: Facts

tlds:
  - ru
  - by
  - ua
  - kz
  - uz
  - com.tr
  - com

tags:
  - reviewed

counter: /$page/$main/$result[@wizard_name="lyrics"]
