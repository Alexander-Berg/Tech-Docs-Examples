feature: Подозрительность в групповых чатах/каналах

specs:

    Показывается плашка, если вас добавил пользователь не из вашей адресной книги сразу при создании чата[manual]:
        - automation:
        - description: |
              Пользователь Б yndx-mssngr-785/QazMssngr1 (+6283141559300) авторизован в браузере в обычной вкладке
              Пользователь А yndx-mssngr-888/QazMssngr1 (+6283174691854) авторизован в этом же браузере, но во вкладке инкогнито
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Создать новый групповой чат и сразу при создании добавить туда пользователя А
        - assert: Чат создан и в участниках есть пользователь А
        - do: Отправить туда сообщение
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат, в который его только что добавил пользователь Б
        - assert: Чат открыт и есть спам плашка

    Показывается плашка, если вас добавил пользователь не из вашей адресной книги в ранее созданный чат[manual]:
        - automation:
        - description: |
              Пользователь Б yndx-mssngr-785/QazMssngr1 (+6283141559300) авторизован в браузере в обычной вкладке
              Пользователь А yndx-mssngr-786/QazMssngr1 (+6283140549875) авторизован в этом же браузере, но во вкладке инкогнито
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Создать новый групповой чат и сразу при создании НЕ добавлять туда пользователя А
        - assert: Чат создан и в участниках НЕТ пользователя А
        - do: Отправить туда сообщение
        - assert: Сообщение отправлено
        - do: Зайти в настройки чата и добавить пользователя А
        - assert: Пользователь А добавлен в чат
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат, в который его только что добавил пользователь Б
        - assert: Чат открыт и есть спам плашка

    Показывается плашка, если вас добавил пользователь не из вашей адресной книги в ранее созданный канал[manual]:
        - automation:
        - description: |
              Пользователь Б yndx-mssngr-785/QazMssngr1 (+6283141559300) авторизован в браузере в обычной вкладке
              Пользователь А yndx-mssngr-786/QazMssngr1 (+6283140549875) авторизован в этом же браузере, но во вкладке инкогнито
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Создать новый канал
        - assert: Канал создан
        - do: Отправить в канал сообщение
        - assert: Сообщение отправлено
        - do: Зайти в Настройки канала и добавить туда пользователя А
        - assert: Пользователь А добавлен в канал
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть канал, в который его только что добавил пользователь Б
        - assert: Канал открыт и есть спам плашка

    Приходит замаскированная нотификация для подозрительного групповго чата[manual]:
        - automation:
        - description: |
              Пользователь Б yndx-mssngr-785/QazMssngr1 (+6283141559300) авторизован в браузере в обычной вкладке
              Пользователь А yndx-mssngr-786/QazMssngr1 (+6283140549875) авторизован в этом же браузере, но во вкладке инкогнито
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Создать новый групповой чат и сразу при создании добавить туда пользователя А
        - assert: Чат создан и в участниках есть пользователь А
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат, в который его только что добавил пользователь Б
        - assert: Чат открыт и есть спам плашка
        - do: Открыть любой другой чат
        - assert: Открыт другой чат
        - do: Зайти в Настройки и включить, если  надо "Получать уведомления", "Показывать текс собщений" и выключить "Получать фоновые уведомления" (если есть такой перключатель)
        - assert: Настройки уведомлений  выставлены верно
        - do: В браузере открыть новую вкладку
        - assert: Открыта новая вкладка и она активна
        - do: Пользователем Б отправить в созданный им чат сообщение
        - assert: Сообщение отправлено
        - do: Убедиться, что пользователю А пришла замаскированная нотификация
        - assert: |
              Пришла замаскированная нотификация
              В пуше указано следующее:
              Тайтл: Яндекс.Мессенджер от yandex.ru
              Текст: Новые сообщение

# Дублирует кейс выше
#     Показывается плашка, если вас добавил пользователь не из вашей адресной книги в ранее созданный канал[manual]:
#         - automation:
#         - description: |
#               Пользователь Б yndx-mssngr-785/QazMssngr1 (+6283141559300) - авторизован в браузере в обычной вкладке
#               Пользователь А yndx-mssngr-786/QazMssngr1 (+6283140549875) - авторизован в этом же браузере, но во вкладке инкогнито
#         - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
#         - assert: Авторизация прошла успешно.
#         - do: Создать новый канал
#         - assert: Канал создан
#         - do: Отправить в канал сообщение
#         - assert: Сообщение отправлено
#         - do: Зайти в Настройки канала и добавить туда пользователя А
#         - assert: Пользователь А добавлен в канал
#         - do: Авторизоваться пользователем А, введя корректные логин/пароль.
#         - assert: Авторизация прошла успешно.
#         - do: Открыть канал, в который его только что добавил пользователь Б
#         - assert: Канал открыт и есть спам плашка

    Корректно отрабатывает плашка, если жалуемся на спам[manual]:
        - automation:
        - description: |
              Пользователь А ваш личный аккаунт - авторизован в браузере в обычной вкладке
              Пользователь Б yndx-mssngr-785/QazMssngr1 (+6283141559300) - авторизован в этом же браузере, но во вкладке инкогнито
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Создать новый групповой чат и сразу при создании добавить туда пользователя А (найти по логину в поиске)
        - assert: Чат создан и в участниках есть пользователь А
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть чат, в который его только что добавил пользователь Б
        - assert: Чат открыт и есть спам плашка
        - do: Нажать в плашке на кнопку "Сообщить и заблокировать"
        - assert: Чат перестает быть активным видим тост "Жалоба принята" и чат пропадает из списков чата
        - do: Зайти пользователем Б в чат и убедиться что пользователь А вышел из него
        - assert: Пользователь А покинул чат

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
    - chamb
