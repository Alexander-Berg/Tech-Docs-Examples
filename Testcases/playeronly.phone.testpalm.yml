feature: Видео-плеер

description: Кейсы для проверки функциональностей НЕ новостей, а видео-плеера

specs:

  aliases:
    &goTo
    - do: открыть сервис Яндекс.Новости (Обратите внимание! В данном кейсе не важна верстка рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в самом сервисе что-то отображается не так!)
    - do: перейти в любой неспортивный сюжет с видео
    - assert: |
        в сюжете отображается медиа блок с 2 и более видео, пример - https://jing.yandex-team.ru/files/vasekerka/2021-11-24_12-21-31.png,
        внимание! понять, что перед вами видео можно, если в центре изображения есть иконка "плей",
        если в сюжете нет видео либо видео только одно, выбрать другой сюжет   
    - do: тапнуть на любое видео в медиаблоке
    - assert: открывается просмотрщик видео, видео запустилось автоматически, без звука
    - do: тапнуть по видео
    - assert: |
        включился звук, 
        Обратите внимание! Если вы проходите кейс на колхозе, также надо включить звук и в настройках колхоза - https://jing.yandex-team.ru/files/kossakovskaya/2022-03-23_19-51-06.png
    - do: тапнуть по видео еще раз
    - assert: отобразились контроллсы видео в просмотрщике - внешний вид https://jing.yandex-team.ru/files/vasekerka/2021-11-24_12-27-25.png
              Обратите внимание! Если вы проходите кейс на устройстве с небольшой шириной экрана до 340px, как на iphone se, 
              в плеере будет отсутствовать контролл шэринга видео, таймер в плеере будет в другом месте - внешний вид https://jing.yandex-team.ru/files/umansai5/Снимок%20экрана%202022-05-04%20в%2010.28.00.png   
  дает возможность запускать/останавливать видео [manual]:
    - *goTo
    - do: тапнуть по иконке паузы в центре видео
    - assert: воспроизведение остановилось
    - do: тапнуть по иконке запуска видео в центре видео
    - assert: видео запустилось

  дает возможность перематывать видео [manual]:
    - *goTo
    - assert: справа и слева на экране присутствуют кнопки перемотки видео на 10 сек вперед (справа) и назад (слева)
    - assert: внешний вид кнопок перемотки - https://jing.yandex-team.ru/files/volkhonov/PeremotraButtonTouch.png
    - do: тапнуть по правой кнопке перемотки
    - assert: видео перемоталось на 10 секунд вперед
    - do: тапнуть по левой кнопке перемотки
    - assert: видео перемоталось на 10 секунд назад
    - do: на прогресс-баре видео (снизу над панелью контроллсов) - тапнуть в любое место
    - assert: видео продолжило воспроизводиться с того места, куда тапнул юзер на прогресс-баре

  дает возможность включать/выключать звук в видео [manual]:
    - *goTo
    - assert: слева на панели контроллсов отображается иконка динамика
    - do: кликнуть по иконке звука на панели контроллсов
    - assert: если звук был выключен - он включился, звук видео слышно (если был включен - соответственно наоборот - выключился)

  дает возможность воспроизводить видео в фуллскрине [manual]:
    - browsers:
        notFor:
          - ios-safari-9-touch
          - ios-safari-10-touch
          - ios-safari-11-touch
          - ios-safari-12-touch
          - ios-safari-13-touch
          - ios-safari-14-touch
          - ios-safari-touch
          - ios-yandex-browser-17-touch
    - *goTo
    - do: |
        кликнуть по иконке фуллскрина (самая правая на панели контроллсов),
        Обратите внимание! В ios открывается нативный просмотрщик и иконка может перекрываться или вовсе отсутствовать - это ок! Заводить на такое баги не нужно
    - assert: видео отобразилось в фуллскрине, продолжает воспроизводиться
    - do: перевернуть устройство в альбомную ориентацию
    - assert: видео растянулось на весь экран в альбомной ориентации
    - do: вернуть устройство в книжную ориентацию и тапнуть по иконке фуллскрина на панели контроллсов. Обратите внимание! В ios открывается нативный просмотрщик и иконка может перекрываться или вовсе отсутствовать - это ок! Заводить на такое баги не нужно!
    - assert: видео отобразилось на странице без затемнения остальных элементов страниц (заголовка и прочих надписей)
    - do: тапнуть по иконке фуллскрина и затем перейти в альбомную ориентацию (Обратите внимание! В ios открывается нативный просмотрщик, и иконка может перекрываться или вовсе отсутствовать - это ок! В нативных андроидных браузерах кнопка перехода в фуллскрин из ландшафта тоже может быть недоступна. Заводить на такое баги не нужно!)
    - assert: видео растянулось на весь экран

  дает возможность настраивать в видео скорость воспроизведения, а так же сообщать о проблеме [manual]:
    - *goTo
    - do: тапнуть по кнопке шестеренки
    - assert: отобразился поп-ап с настройками качества, скорости, и возможностью сообщить о проблеме, внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-11-24_12-34-12.png
    - assert: (настройки качества отсутствуют на Ios)
    - do: тапнуть в поп-апе по настройке "Скорость"
    - assert: открылся поп-ап со списком скоростей воспроизведения видео
    - do: поскроллить список вниз и вверх
    - assert: список в поп-апе скроллится, при этом остальная страница остается неподвижной
    - do: изменить скорость на х2
    - assert: воспроизведение видео продолжилось, скорость воспроизведения видео сильно увеличилась относительно первоначальной (обычной)
    - do: выбрать скорость х0.25
    - assert: видео продолжает воспроизведение, но уже заметно медленнее, чем воспроизводилось первоначально
    - do: в поп-апе настроек тапнуть по "Сообщить о проблеме"
    - assert: произошел переход на страницу Службы поддержки

  дает возможность настраивать в видео качество [manual]:
    - browsers:
        notFor:
          - ios-safari-9-touch
          - ios-safari-10-touch
          - ios-safari-11-touch
          - ios-safari-12-touch
          - ios-safari-13-touch
          - ios-safari-14-touch
          - ios-safari-touch
          - ios-yandex-browser-17-touch
          - ios-pp-3.2-touch
          - ios_pp
    - *goTo
    - do: тапнуть по кнопке шестеренки
    - assert: |
        отобразился поп-ап с настройками качества, скорости, и возможностью сообщить о проблеме, внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-11-24_12-34-12.png
        Обратите Внимание! В iOS нет настройки качества в шестеренке, смените на смартфон с системой Android, Заводить Баг на это Не нужно
    - do: кликнуть по "Качество" и выбрать другое качество видео (настройки качества отсутствуют на Ios)
    - assert: в поп-апе отобразился список доступных разрешений видео
    - do: поскроллить список вниз и вверх
    - assert: список в поп-апе скроллится, при этом остальная страница остается неподвижной
    - do: выбрать любое, отличное от первоначального, разрешение видео и тапнуть по нему
    - assert: видео продолжило воспроизведение уже в выбранном разрешении

  дает возможность перейти на обратную связь [manual]:
    - *goTo
    - do: перевернуть устройство в альбомную ориентацию
    - assert: |
        на панели контроллсов отобразилась иконка "Знак вопроса" в кружке, около иконки шестеренки,
        обратите внимание! если знак вопроса не отображается около иконки шестеренки, откройте выпадашку настроек - в этом окошке будет расположен пункт "Сообщить о проблеме"
    - assert: внешний вид - https://jing.yandex-team.ru/files/volkhonov/touch-landscape-video-controls.png
    - do: тапнуть по кнопке со знаком вопроса (или по пунтку "Сообщить о проблеме")
    - assert: произошел переход на страницу Службы поддержки

  дает возможность перейти в сюжет кликом по аппаратной кнопке "Назад" [manual]:
    - *goTo
    - do: промотать к следующему элементу в просмотрщике (фото/видео или блок "Интересное")
    - assert: |
        если это видео - проигрывается следующее видео,
        если фото - отображается корректно фотография
    - do: нажать на аппаратную кнопку назад (как правило, она есть только у андроидов, поэтому, если у вас нет аппаратной кнопки назад - нажмите браузерную)
    - assert: |
        закрывается просмотрщик,
        Обратите внимание! В данном кейсе не важна верстка сюжета новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в самом сюжете что-то отображается не так!

  содержит рекламу в нетраурных карточках [manual]:
    - browsers:
        notFor:
          - ios-safari-9-touch
    - do: перейти в любую рубрику, кроме рубрик "Спорт" и "Происшествия" (Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в самом сюжете или рубрике что-то отображается не так!)
    - do: поскроллить ленту новостей рубрики до нетраурной карточки (не содержит информации о смерти/убийствах, а в самом сюжете будет отображена реклама)
    - do: открыть сюжет с видео длительностью > 40 сек (если таких нет, перейти в другую рубрику либо открыть другой сюжет)
    - do: нажать на кнопку "плей"
    - assert: открывается просмоторщик видео, видео воспроизводится автоматически, без звука
    - do: посмотреть 30 секунд видео (важно именно посмотреть, не промотать)
    - assert: на 30-ой секунде видео прерывается рекламой
    - do: дождаться окончания рекламы или тапнуть на "Пропустить"
    - assert: видео продолжает воспроизведение с места, на котором прервалось рекламой

  воспроизводит видео в траурных сюжетах [manual]:
    - do: перейти в рубрику "Происшествия"
    - assert: |
        произошел переход на страницу соответствующей рубрики,
        в рубрикаторе выделена рубрика "Происшествия",
        в ленте отображаются новости соответствующей рубрике тематики,
        Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в самом сюжете или рубрике что-то отображается не так!
    - do: тапнуть по наименованию траурного сюжета (траурный сюжет - это тот сюжет, который содержит информацию о смерти, убийствах, а под рубрикатором нет рекламы)
    - assert: |
        открылся соответствующий сюжет, который содержит медиаблок с видео,
        если в выбранном сюжете нет видео, необходимо найти другой траурный сюжет с видео
        Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в самом сюжете или рубрике что-то отображается не так!
    - do: тапнуть по кнопке "плей" на превью видео
    - assert: открывается просмотрщик, видео воспроизводится автоматически, без звука
    - do: проскроллить страницу вниз так, чтобы верхняя часть видео скрылась более, чем наполовину, палец с экрана не отпускайте (пропустить дальнейшие шаги, если проходите кейс на ферме)
    - assert: видео НЕ воспроизводится
    - do: проскроллить страницу обратно
    - assert: видео продолжает воспроизводиться, без звука

  в нетраурном сюжете сохраняет позицию видео при переключении между медиа-файлами [manual]:
    - *goTo
    - do: закрыть просмотрщик кликом на крестик
    - assert: |
        отображается открытый ранее сюжет,
        Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в просмотрщике с фото что-то отображается не так!
    - do: открыть видео, которое открывали ранее
    - assert: |
        открывается просмотщик с выбранным видео,
        видео воспроизводится без звука, сначала

  содержит ленту рекомендованного видео в просмотрщике [manual]:
    - do: открыть выдачу сервиса на странице рубрики "Главное"
    - do: перейти в любой сюжет с видео тапом по заголовку в новостной карточке (если в сюжете нет медиаблока с видео, открыть другой сюжет)
    - do: тапнуть по любому видео в сюжете
    - assert: |
        раскрывается окно просмотрщика с видео,
        воспроизодится видео, которое было выбрано в сюжете, автоматически, без звука,
        Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в просмотрщике с фото что-то отображается не так!
    - do: проскроллить ленту в просмотрщике до рекомендованных видео под заголовком "Интересное"
    - assert: |
        в ленте рекомендованных видео больше 1-2 видео,
        верхнее видео воспроизодится автоматически, без звука,
        перед воспроизведением может отображаться превью на пару секунд,
        Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в просмотрщике с фото что-то отображается не так!
    - do: тапнуть по заголовку под любым рекомендованным видео
    - assert: |
        происходит переход на страницу сюжета с видео из ленты,
        сюжет содержит медиаблок, видео не воспроизводится автоматически,
        Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в просмотрщике с фото что-то отображается не так!
    - do: тапнуть по аппартаной или браузерной кнопке "Назад"
    - assert: происходит переход к просмотрщику, в котором автоматически проигрывается видео из сюжета из шага 2 (в нативных браузерах может быть переход к видео из шага 7, это не баг)
    - do: нажать "Показать еще 3 видео" (если кнопки нет - найти другой сюжет с бОльшим количеством видео, кнопка "Показать еще видео" будет дублироваться до тех пор пока не отобразятся все видео сюжета). Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в просмотрщике с фото что-то отображается не так!
    - do: дождаться окончания проигрывания последнего видео из сюжета
    - assert: |
        после проигрывания последнего видео из сюжета происходит автоматический переход к блоку "Интересное" (Обратите внимание! Если в сюжете были фото, то перехода не произойдет! Видео дойдет до конца и воспроизводение остановится. Будет доступна иконка включения видео сначала - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-29_20-01-41.png),
        Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в просмотрщике с фото что-то отображается не так!

  в траурном сюжете не содержит рекламу в видео [manual]:
    - browsers:
        notFor:
          - ios-safari-9-touch
          - android-browser-5.1-touch
    - do: открыть выдачу сервиса на странице рубрики "Происшествия"
    - do: перейти в траурный сюжет тапом по заголовку в новостной карточке (траурный сюжет - это тот сюжет, который содержит информацию о смерти, убийствах, а под рубрикатором нет рекламы),
    - assert: |
        сюжет содержит медиаблок с видео (если в сюжете нет медиаблока с видео, открыть другой сюжет),
        Обратите внимание! В данном кейсе не важна верстка сюжета и рубрики Новостей - мы проверям исключительно работу видео-плеера, поэтому не нужно заводить баги, если в просмотрщике с фото что-то отображается не так!
    - do: тапнуть по любому видео, длительностью > 40сек (если видео длительностью < 40сек, включить другое видео сюжета или перейти в другой траурный сюжет)
    - assert: |
        раскрывается окно просмотрщика,
        воспроизводится видео автоматически либо по тапу на кнопку плей, без звука
    - do: подождать 30 секунд видео (надо именно подождать, перемотка не сработает)
    - assert: на 30-ой секунде видео НЕ прерывается рекламой
    - do: проскроллить до ленты рекомендованных видео в просмотрщике
    - assert: в рекомендованных видео присутствует реклама на 30-ой секунде

files: []

tags:
  - playeronly

browsers:
        notFor:
          - ios-safari-9-touch
          - android-browser-5.1-touch
          - android-miui-touch

manager: eksamoylova

qa-engineer: volkhonov

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
