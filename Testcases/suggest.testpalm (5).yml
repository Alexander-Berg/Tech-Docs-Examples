feature: Саджест

specs:
  Получить первый результат из саджеста:
    - tags:
        - smoke_extended
        - suggest_regress
    - do: получить выдачу по запросу "вконтакте" (альтернативные запросы vk, вк, вконтакт)
    - assert: кликнуть в инпут поисковой стрелки
    - assert: саджест открыт
    # временно вставляю джинг, так как асессоры ложно фейлят из-за устаревшего скриншота
    - screenshot: открытый саджест [https://jing.yandex-team.ru/files/etestova/STF_2021-04-02_14-08-08.png]
    - do: навести курсор на первый элемент саджеста
    - assert: первый элемент саджеста выделен цветным фоном
    # временно вставляю джинг, так как асессоры ложно фейлят из-за устаревшего скриншота
    - screenshot: ховер первого элемента саджеста [https://jing.yandex-team.ru/files/etestova/STF_2021-04-02_14-10-08.png]
    - do: навести курсор на последний элемент саджеста
    - assert: последний элемент саджеста выделен цветным фоном
    # временно вставляю джинг, так как асессоры ложно фейлят из-за устаревшего скриншота. Нет ничего более постоянного, чем временное
    - screenshot: ховер последнего элемента саджеста [https://jing.yandex-team.ru/files/etestova/STF_2021-04-02_14-11-08.png]
    - asssert: первым элементом в саджесте является навигационная подсказка с ссылкой
    - assertMetrics: '*'
  При клике на крестик появлется саджест:
    - tags:
        - smoke
        - smoke_extended
        - suggest_regress
    - do: открыть новую вкладку
    - do: получить выдачу по запросу "яндекс"
    - do: кликнуть на крестик в поисковом инпуте
    - assert: поисковая стрелка очищена
    - assert: саджест открыт
    - assertMetrics: '*'
  Клик в место, где был крестик:
    - do: получить выдачу по запросу "погода"
    - do: очистить поисковую стрелку с помощью крестика в инпуте
    - do: кликнуть в пустое место, где был крестик
    - assert: саджест остался открытым
    - assertMetrics: '*'
  При нажатии ctrl+z появляется крестик:
    - do: получить выдачу по запросу "погода"
    - do: очистить поисковую стрелку с помощью крестика в инпуте
    - assert: поисковая стрелка очищена
    - assert: крестик в инпуте исчез
    - do: нажать ctrl+z
    - assert: в поисковой стрелке вернулось значение "погода"
    - assert: отображается крестик в инпуте
    - assertMetrics: '*'
  Текст в инпуте заменяется на выбранный текст из саджеста:
    - tags:
        - smoke
        - smoke_extended
        - suggest_regress
    - do: получить выдачу по запросу "metallica"
    - assert: получена выдача по указанному запросу
    - do: кликнуть в инпут поисковой стрелки
    - assert: саджест открыт
    - do: нажать на клавиатуре несколько раз стрелку "Вниз"
    - assert: содержание поискового инпута совпадает с текстом выделенного элемента саджеста
    - do: нажать на клавиатуре несколько раз стрелку вверх
    - assert: содержание поискового инпута совпадает с текстом выделенного элемента саджеста
    - assertMetrics: '*'
  # Тест кейс по следам бага SERP-76899
  Проверка иконок флагов в исторических подсказках:
    - do: авторизоваться в Яндексе под своим аккаунтом
    - do: получить выдачу по запросу "флаг англии"
    - assert: получена выдача по указанному запросу
    - do: кликнуть в кнопку "x" поисковой стрелки
    - assert: поисковая стрелка очищена
    - assert: саджест открыт
    - assert: в саджесте присутствует историческая подсказка "флаг англии"
    - do: кликнуть в историческую подсказку "флаг англии"
    - assert: саджест закрылся
    - assert: выдача перезагрузилась
    - do: кликнуть в поисковую стрелку
    - assert: инпут активен
    - assert: саджест открыт
    - assert: в саджесте присутствует историческая подсказка "флаг англии" с иконкой флага
    - assert: текст исторической подсказки и иконка флага расположены на одном уровне
    - screenshot: пример внешнего вида подсказки с иконкой флага [personal-flag]
  Проверка отсутствия пустой строки после удаления исторической подсказки:
    - do: авторизоваться в Яндексе под своим аккаунтом
    - assert: логин в Яндекс выполнен
    - do: на странице настроек поиска включить показ истории поиска
    - assert: чекбокс показа истории поиска включен
    - screenshot: примерный внешний вид [https://jing.yandex-team.ru/files/etestova/STF_2021-02-08_17-22-08.png]
    - do: получить выдачу по запросу "как почистить кастрюли с помощью канцелярского клея и мыла соды"
    - assert: получена выдача по указанному запросу
    - do: скопировать в буфер обмена заданный посковой запрос
    - assert: текст поискового запроса скопирован
    - do: вставить из буфера обмена запрос в поисковую стрелку
    - assert: поисковой запрос отображается в поисковой стрелке
    - assert: в саджест присутстствует историческая подсказка, состоящая из поискового запроса
    - do: удалить историческую подсказку кликнув в кнопку "х" справа от нее
    - assert: историческая подсказка удалена
    - assert: под поисковой стрелкой нет пустой строки
  Саджест обновляется после ajax обновления выдачи и поисковой стрелки:
    - do: получить выдачу по запросу "7 смертных грехов аниме"
    - assert: получена выдача по указанному запросу
    - assert: в выдаче есть фактовый колдунщик с номерами сбербанка
    - do: кликнуть в поисковую стрелку
    - assert: инпут активен
    - assert: саджест открыт
    - assert: подсказки в саджесте соответствуют запросу в поисковой стрелке
    - do: кликнуть в связанный запрос в фактовом колдунщике
    - assert: поисковая выдача обновилась
    - assert: запрос в поисковой стрелке обновился
    - do: кликнуть в поисковую стрелку
    - assert: инпут активен
    - assert: саджест открыт
    - assert: подсказки в саджесте соответствуют новому запросу в поисковой стрелке
    - assertMetrics: '*'
  Саджест закрывается при клике на Esc:
    - do: получить выдачу по запросу "озера россии"
    - assert: получена выдача по указанному запросу
    - do: кликнуть в поисковую стрелку
    - assert: инпут активен
    - assert: саджест открыт
    - do: нажать на клавиатуре стрелку "Вниз"
    - assert: первая подсказка подсвечена
    - assert: значение первой подсказки подставилось в поисковую стрелку
    - do: нажать кнопку "Esc" на клавиатуре
    - assert: саджест закрылся
    - assert: инпут остался в фокусе
    - do: нажать на клавиатуре стрелку "Вниз"
    - assert: значение в поисковой стрелке не изменилось
    - do: кликнуть в поисковую стрелку
    - assert: инпут активен
    - assert: саджест открыт
    - assert: нет выбранных подсказок
    - assertMetrics: '*'
  Открытие nav с клавиатуры на Enter:
    - do: получить выдачу по запросу "яндекс муз"
    - do: кликнуть в инпут поисковой стрелки
    - assert: саджест открыт с навигационной подсказкой
    - do: выбрать первый элемент стрелкой вниз
    - assert: элемент выделен
    - do: нажать Enter на выбранном элементе
    - assert: открылась вкладка с адресом из выбранного элемента
    - assertMetrics: '*'
  Проверки с открытым саджестом:
    beforeEach:
      - do: получить выдачу по запросу "крым"
      - assert: получена выдача по указанному запросу
      - do: кликнуть в инпут поисковой стрелки
      - assert: саджест открыт
    Внешний вид:
      - screenshot: внешний вид (имеют значени только элементы саджста) [opened]
      - assert: внешний вид саджеста соответствует скриншоту
      - assertMetrics: '*'
    Ховер на первом элементе:
      - do: ввести в поисковую строку текст "тест"
      - do: навести мышь на первый элемент
      - screenshot: внешний вид соответствует скриншоту, выделенная подсказка не выходит за пределы инпута [hover]
      - assertMetrics: '*'
    Данные саджеста должны обновляться при изменении запроса:
      - tags:
        - smoke
        - smoke_extended
      - do: очистить поисковую стрелку
      - assert: поисковая стрелка очищена
      - do: ввести запрос "вконтакте" в поисковую стрелку
      - assert: данные в саджесте обновились
      - assertMetrics: '*'
    Саджест закрывается при клике вне блока:
      - tags:
        - smoke
        - smoke_extended
        - suggest_regress
      - do: кликнуть в свободное место вне поисковой стрелки
      - assert: саджест закрылся
      - assertMetrics: '*'
    Проверка прокликивания верхней заглушки:
      - tags:
          - smoke_extended
      - do: кликнуть в область над саджестом, но под поисковой стрелкой
      - screenshot: пример для клика [https://jing.yandex-team.ru/files/qwee/2020-02-21_11.16.07-6JWgg.png]
      - assert: ничего не происходит при клике в эту область
      - assert: клик не проходит в табы навигации
      - assertMetrics: '*'
    Выбор первого элемента саджеста:
      - tags:
          - smoke_extended
          - suggest_regress
      - do: изменить запрос в поисковой стрелке на "test" (если первый элемент саджеста - реклама или навигационная подсказка, то введите другой запрос. требуется, чтобы на первом месте была полнотекстовая подсказка)
      - do: нажать кнопку "Вниз" на клавиатуре
      - assert: первый элемент саджеста подсвечен
      - do: запомнить подсказку в выбранном элементе и кликнуть по ней
      - assert: в ссылке в адресной строке браузера есть параметр 'text='
      - assert: после знака равенства есть текст выбранной ранее подсказки (кириллица и часть символов в ссылке могут быть закодированы спецсимволами, например "%3D%25D0%25B2...". Для раскодирования можно воспользоваться сервисами типа "URL Decoder")
      - assertMetrics: '*'
    Правильное начальное значение при клавиатурном выборе подсказок:
      - do: навести на первую подсказку указателем мыши
      - assert: первая подсказка подсвечена
      - assert: значение первой подсказки не подставилось в поисковую стрелку
      - do: нажать кнопку "Вниз" на клавиатуре
      - assert: вторая подсказка подсвечена
      - assert: значение второй подсказки подставилось в поисковую стрелку
      - do: убрать наведение с подсказок
      - do: нажать кнопку "Вниз" на клавиатуре
      - assert: первая подсказка подсвечена
      - assert: значение первой подсказки подставилось в поисковую стрелку
      - do: нажать кнопку "Вверх" на клавиатуре
      - assert: в поисковой строке значение "крым"
      - assertMetrics: '*'
    Выбор клавиатурой после удаления исторической подсказки:
      - do: залогиниться в Яндекс
      - assert: логин в Яндекс выполнен
      - do: проверить, что на странице настроек поиска включен показ истории поиска
      - assert: показ истории поиска включен
      - do: получить выдачу по запросу "билеты в казань"
      - assert: получена выдача по указанному запросу
      - do: кликнуть в поисковую стрелку
      - assert: саджест открыт
      - assert: саджест содержит историческую подсказку "билеты в казань"
      - do: навести указатель на подсказку "билеты в казань"
      - assert: историческая подсказка "билеты в казань" подсвечена
      - do: кликнуть на крестик в исторической подсказке
      - assert: историческая подсказка "билеты в казань" исчезла
      - assert: подсвечена следующая по порядку после исторической подсказка
      - do: нажать кнопку "Вниз" на клавиатуре
      - assert: выбрана следующая по порядку подсказка
      - assertMetrics: '*'
    Исторические подсказки:
      - tags:
          - smoke_extended
          - suggest_regress
      - do: залогиниться в Яндекс
      - assert: логин в Яндекс выполнен
      - do: на странице настроек поиска включить показ истории поиска
      - assert: чекбокс показа истории поиска включен
      - screenshot: примерный внешний вид [https://jing.yandex-team.ru/files/etestova/STF_2021-02-08_17-22-08.png]
      - do: получить выдачу по запросу "vk"
      - assert: получена выдача по указанному запросу
      - do: кликнуть на крестик в инпуте
      - assert: поисковая стрелка очищена
      - assert: саджест открыт
      - assert: появился блок с поисковой историей
      - screenshot: открытый саджест [suggest/history/clear]
      - assert: историческая подсказка "vk" присутствует в саджесте
      - do: навести указатель на подсказку "vk"
      - assert: историческая подсказка "vk" подсвечена
      - do: кликнуть на крестик в исторической подсказке
      - assert: историческая подсказка 'vk' исчезла
      - assertMetrics: '*'
    Исторические подсказки - клик:
      - tags:
          - smoke_extended
          - suggest_regress
      - do: залогиниться в Яндекс
      - assert: логин в Яндекс выполнен
      - do: проверить, что на странице настроек поиска включен показ истории поиска
      - assert: показ истории поиска включен
      - do: получить выдачу по запросу "vk"
      - assert: получена выдача по указанному запросу
      - do: кликнуть на крестик в инпуте
      - assert: поисковая стрелка очищена
      - assert: саджест открыт
      - assert: появился блок с поисковой историей
      - screenshot: открытый саджест [suggest/history/clear]
      - assert: историческая подсказка "vk" присутствует в саджесте
      - do: ввести в поисковую стрелку запрос "Новости" и нажать кнопку "Найти"
      - assert: выдача перезагружена
      - assert: саджест закрыт
      - do: кликнуть в кнопку "х" поисковой стрелки
      - assert: поисковая стрелка очищена
      - assert: инпут активен
      - assert: саджест открыт
      - assert: в открытом саджесте присутствуют исторические подсказки "новости" и "vk" (порядок исторических подсказок может отличаться)
      - do: кликнуть в историческую подсказку "новости"
      - assert: выдача перезагружена
      - assert: саджест закрыт
      - assert: в поисковой стрелке отображается запрос "новости"
      - assert: получена релевантная запросу выдача
      - assertMetrics: '*'
    Полнотекстовые подсказки:
      - tags:
          - smoke
          - smoke_extended
          - suggest_regress
      - do: получить выдачу по запросу "test"
      - do: кликнуть в поисковую стрелку
      - assert: саджест открыт
      - do: кликнуть в полнотекстовую подсказку
      - assert: выдача обновилась
      - assert: саджест закрыт
      - assert: в поисковой стрелке присутствует запрос соответствующий выбранной полнотекстовой подсказке
      - assertMetrics: '*'
    Богатые фактовые подсказки:
      - tags:
          - smoke_extended
          - suggest_regress
      - do: изменить запрос в поисковой стрелке на "8 800"
      - assert: в саджесте присутствует богатая фактовая подсказка с номером телефона
      - screenshot: примерный внешний вид (номер может отличаться)[plain/fact]
      - do: выбрать богатую фактовую подсказку с помощью кнопки "Вниз" на клавиатуре
      - assert: в инпут подставился номер телефона из подсказки
      - assertMetrics: '*'
    Проверка длинных тайтлов и гринурлов в богатых подсказках:
      - do: изменить запрос в поисковой стрелке на "Яндекс переводчик"
      - assert: в саджесте присутствует навигационная подсказка
      - screenshot: примерный внешний вид [https://jing.yandex-team.ru/files/etestova/STF_2021-04-02_14-18-08.png]
      - assert: длинный тайтл и гринурл у подсказки корректно обработан и не распирает саджест
      - assertMetrics: '*'
    Переход по навигационной подсказке:
      - tags:
          - smoke
          - smoke_extended
          - suggest_regress
      - do: очистить поисковую стрелку
      - assert: поисковая стрелка очищена
      - assert: саджест открыт
      - do: ввести в поисковую стрелку запрос "вконтакте"
      - assert: на первом месте в саджесте присутствует навигационная подсказка с ссылкой и иконкой слева
      - screenshot: внешний вид [nav]
      - do: кликнуть в навигационную подсказку
      - assert: в новой вкладке открылся сайт по выбранной навигационной подсказке
      - assertMetrics: '*'
    Длинная фактовая подсказка:
      - do: изменить запрос в поисковой стрелке на "штабеля"
      - assert: в саджесте присутсвует длинная фактовая подсказка
      - screenshot: примерный внешний вид [long-fact]
      - do: уменьшить ширину окна браузера до 500-700px
      - assert: у фактовой подсказки уходит в троеточие первая часть
      - assertMetrics: '*'
    Богатый перевод:
      - do: получить выдачу по запросу "мишень по англ"
      - assert: получена выдача по указанному запросу
      - do: кликнуть в поисковую строку
      - assert: в выдаче саджеста присутствует богатый перевод с флагом и транскрипцией
      - screenshot: примерный вид [suggest_mt_fact]
  Саджест перекрывает табики:
    - tags:
        - smoke_extended
    - params:
        foreverdata: '2940329100'
    - do: получить выдачу по запросу 'foreverdata'
    - do: уменьшить ширину экрана до 800px и кликнуть в поисковый инпут
    - assert: саджест открыт
    - screenshot: Примерный внешний вид (важно, что саджест перекрывает табы поисковых вертикалей)[meduim-window-size]
    - assert: поисковые табы не выглядывают из под саджеста
    - assertMetrics: '*'
  Отмена ввода:
    beforeEach:
      - do: получить выдачу по запросу "lamb"
      - assert: получена выдача по указанному запросу
      - do: кликнуть в инпут поисковой стрелки
      - assert: саджест открыт
      - assert: в саджесте присутствуют полнотекстовые подсказки
    Отменяется первая подсказка:
      - do: выбрать первую подсказку с помощью кнопки "Вниз" на клавиатуре
      - assert: в инпут подставился текст первой подсказки
      - do: нажать ctrl+z
      - assert: текст в инпуте "lamb"
    Отменяется последняя подсказка и возвращается через ctrl+y:
      - do: выбрать последнюю подсказку с помощью кнопки "Вверх" на клавиатуре
      - assert: в инпут подставился текст последней подсказки
      - do: нажать ctrl+z
      - assert: текст в инпуте "lamb"
      - do: нажать ctrl+y
      - assert: в инпут подставился текст последней подсказки
    Отменяется третья подсказка:
      - do: выбрать третью подсказку с помощью трех нажатий кнопки "Вниз" на клавиатуре
      - assert: в инпут подставился текст третьей подсказки
      - do: нажать ctrl+z
      - assert: текст в инпуте "lamb"
  Стрелки для подстановки:
    beforeEach:
      - do: получить выдачу по запросу "аэрофлот"
      - assert: получена выдача по указанному запросу
      - do: кликнуть в инпут
      - assert: саджест открыт поверх серповой выдачи
    Проверка наличия стрелки:
      - assert: у полнотекстовых неистоических подсказок присутствуют стрелки для подстановки
      - screenshot: пример внешнего вида (навигационной подсказки может не быть, проверяем наличие стрелок для подстановки) [suggests]
    Внешний вид стрелки при наведении:
      - do: навести на стрелку для подстановки
      - assert: стрелка выделилась черным цветом
      - screenshot: пример внешнего вида [suggest-item-arrow-hover]
    Внешний вид подсказки с иконкой флага и стрелкой:
      - do: измениить значение поисковой стрелки на "флаг"
      - assert: саджест открыт поверх серповой выдачи
      - screenshot: пример внешнего вида [suggest-item-arrow-flag]
    Внешний вид подсказки с иконкой погоды и стрелкой:
      - do: измениить значение поисковой стрелки на "погод"
      - assert: саджест открыт поверх серповой выдачи
      - screenshot: пример внешнего вида [suggest-item-arrow-weather]
    Проверка подстановки при нажатии на стрелку:
      - do: кликнуть в стрелку в правой части полнотекстовой подсказки
      - assert: текст из подсказки подставился в инпут
      - assert: выдача не была перезагружена
  Внешний вид с шапкой в узком окне:
    - do: получить выдачу по запросу "районы"
    - assert: получена выдача по указанному запросу
    - do: уменьшить размер окна браузера до 764 пикселей в ширину
    - do: проскроллить страницу по горизонтали до правого края
    - do: кликнуть в инпут поисковой стрелки
    - assert: саджест открыт
    - assert: подсказки остались выровненные по краю поисковой стрелки
    - screenshot: пример внешнего вида саджеста и шапки [suggest-header-horizontal-scroll]
  XSS:
    Простая инжекция:
      - do: получить выдачу по запросу "погода"
      - assert: получена выдача по указанному запросу
      - do: очистить поисковую стрелку
      - do: ввести в поисковую стрелку запрос "\<script>alert(1)\</script>"
      - do: кликнуть по кнопке "Найти"
      - assert: выдача обновилась
      - assert: получена выдача по указанному запросу
      - assert: на экране не появилось попапа с ошибкой
      - assertMetrics: '*'
  Ховер мыши по наву не приводит к переходу при нажатии на Enter:
    - do: получить выдачу по запросу "вконтакт"
    - assert: получена выдача по указанному запросу
    - do: кликнуть в поисковую стрелку
    - assert: открылся саджест, в саджесте содержится навигационная подсказка vk.com
    - do: навести курсор мыши на навигационную подсказку и нажать Enter на клавиатуре
    - assert: страница перезагрузилась, сайт vk.com НЕ открыт в новой вкладке
    - do: получить выдачу по запросу "вкон"
    - assert: получена выдача по указанному запросу
    - do: кликнуть в поисковую строку
    - assert: появился саджест с навигационной подсказкой
  Выбор навигационной подсказки с помощью клавиатуры:
    - do: получить выдачу по запросу "вкон"
    - assert: получена выдача по указанному запросу
    - do: кликнуть в поисковую строку
    - assert: появился саджест с навигационной подсказкой
    - assert: атрибут "data-text" элемента подсказки содержит текст, отличный от тайтла навигационной подсказки
    - do: выбрать клавиатурной стрелкой "Вниз" навигационную подсказку
    - assert: в поле ввода подставилась текстовая подсказка со значением из атрибута "data-text" элемента подсказки
    - assertMetrics: '*'
  Закрытие по пустому запросу:
    При клике на кнопку Найти:
      - do: |
          очистить текст в инпуте
          нажать на кнопку 'Найти'
      - assert: |
          саджест закрыт
          не отправился запрос за пустой выдачей
    При нажатии на клавишу Enter:
      - do: |
          очистить текст в инпуте
          нажать на клавишу Enter на клавиатуре
      - assert: |
          саджест закрыт
          не отправился запрос за пустой выдачей

specs-integration:
  Получить первый результат из саджеста:
    - do: получить выдачу по запросу "вконтакте"
    - do: кликнуть в поисковый инпут
    - assert: саджест открыт
    - asssert: первым результатом в саджесте является навигационная подсказка с ссылкой
  При клике на крестик появлется саджест:
    - do: получить выдачу по запросу "яндекс"
    - do: кликнуть на крестик в инпуте
    - assert: поисковая стрелка очищена
    - assert: саджест открыт
  Текст в инпуте заменяется на выбранный текст из саджеста:
    - do: получить выдачу по запросу "metallica"
    - assert: получена выдача по указанному запросу
    - do: кликнуть в инпут поисковой стрелки
    - assert: саджест открыт
    - do: нажимать на клавиатуре стрелку "вверх"
    - assert: текст в инпуте совпадает с текстом выделенного элемента саджеста
  Навигационная подсказка:
    - do: получить выдачу по запросу "вконтакте"
    - assert: получена выдача по указанному запросу
    - do: кликнуть в инпут поисковой стрелки
    - assert: саджест открыт
    - assert: присутствует блок со ссылкой и фавиконкой
    - do: кликнуть по ссылке
    - assert: ссылка открылась в новой вкладке
  Богатый перевод:
    - do: получить выдачу по запросу "мишень по англ"
    - assert: получена выдача по указанному запросу
    - do: кликнуть в поисковую строку
    - assert: в выдаче саджеста присутствует богатый перевод с флагом и транскрипцией
  Открытие nav с клавиатуры на Enter:
    - do: получить выдачу по запросу "instagram" (альтернативные запросы "вконтакте" ,"фейсбук")
    - do: кликнуть в инпут поисковой стрелки
    - assert: саджест открыт с навигационной подсказкой
    - do: выбрать первый элемент стрелкой вниз
    - assert: элемент выделен
    - do: нажать Enter на выбранном элементе
    - assert: открылась вкладка с адресом из выбранного элемента
    - assertMetrics: '*'
  Проверки с открытым саджестом:
    beforeEach:
      - do: получить выдачу по запросу "крым"
      - assert: получена выдача по указанному запросу
      - do: кликнуть в поисковый инпут
      - assert: саджест открыт
    Данные саджеста должны обновляться при изменении запроса:
      - do: поменять запрос на "вконтакте"
      - assert: данные в саджесте обновились
    Саджест закрывается при клике на паранджу:
      - do: кликнуть на паранджу
      - assert: саджест закрылся
    Выбор первого элемента саджеста:
      - do: нажать на клавиатуре стрелку "Вниз" (если первый элемент саджеста - реклама или навигационная подсказка, то введите другой запрос. требуется, чтобы на первом месте была полнотекстовая подсказка)
      - assert: первый элемент саджеста выделен
      - do: кликнуть по выделенному элементу
      - assert: |
            первый элемент саджеста выбран
            выдача обновилась
            в ссылке в адресной строке браузера есть параметр 'text='
            после знака равенства есть текст выбранной ранее подсказки (кириллица и часть символов в ссылке могут быть закодированы спецсимволами, например "%3D%25D0%25B2...". Для раскодирования можно воспользоваться сервисами типа "URL Decoder")
    Проверка прокликивания верхней заглушки:
      - do: кликнуть в область над саджестом, но под поисковой стрелкой. пример для клика [https://jing.yandex-team.ru/files/likharad-m/test__Yandeks_nashlos_339mlnrezultatov_2019-01-30_16-50-43.png]
      - assert: ничего не происходит при клике в эту область, клик не проходит в табы навигации
  Стрелки для подстановки:
    Проверка подстановки при нажатии на стрелку:
      - do: получить выдачу по запросу "победа"
      - assert: получена выдача по указанному запросу
      - do: кликнуть в инпут
      - assert: саджест открыт поверх серповой выдачи
      - assert: у полнотекстовых неистоических подсказок присутствуют стрелки для подстановки
      - do: кликнуть в стрелку в правой части полнотекстовой подсказки
      - assert: текст из подсказки подставился в инпут
      - assert: выдача не была перезагружена

files:
  - features/desktop/suggest/suggest.hermione.js
  - features/desktop/suggest/suggest.hermione.e2e.js

tags:
  - suggest
  - input
  - reviewed

qa-engineer:
  - likharad-m
  - helm

v-team: Suggest

priority: high

tlds:
  - ru
  - by
  - ua
  - kz
  - uz
  - com
  - com.tr
