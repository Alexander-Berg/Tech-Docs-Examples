feature: Колдунщик новостей
type: Рубричный

specs:
  priority: high
  params:
    foreverdata: '2251010895'
  beforeEach:
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче есть колдунщик новостей
    - screenshot: внешний вид [news_rubric-{{PLATFORM}}-{{BROWSER_TYPE}} >> newsRubric]
  Внешний вид:
    - tags: smoke
    - label: news_rubric-{{PLATFORM}}-{{BROWSER_TYPE}}
    - screenshot: проверить внешний вид [newsRubric]
    - assertMetrics: '*'
  Заголовок:
    - tags: smoke
    - do: нажать на ссылку в заголовке колдунщика
    - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news" @subtype="rubric"]/title'
    - assert: в новой вкладке открылись 'Яндекс Новости' (открываются новости старой версии, это не ошибка)
    - assertMetrics: '*'
  2ая новость:
    Тумба:
      - do: нажать на картинку второй новости
      - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news" @subtype="rubric"]/item/video'
      - assert: ссылка открылась в новой вкладке (Страница/видео на странице могут отсутстовать, так как данные тестовые. Суть проверки заключается в корректности самого перехода по ссылке)
    Заголовок:
      - do: нажать на заголовок второй новости
      - tech: отправился счётчик  '/$page/$main/$result[@wizard_name="news" @subtype="rubric"]/item/doc'
      - assert: в новой вкладке открылся сайт выбранной новости
    Хост:
      - do: нажать на хост ссылку под заголовком второй новости
      - tech: отправился счётчик  '/$page/$main/$result[@wizard_name="news" @subtype="rubric"]/item/path/host'
      - assert: в новой вкладке открылся сайт выбранной новости
  Кнопка на все новости:
    - tags: smoke
    - do: нажать на кнопку 'Читать все новости'
    - tech: отправился счётчик '/$page/$main/$result[@wizard_name="news" @subtype="rubric"]/all'
    - assert: в новой вкладке открылись 'Яндекс Новости' (открываются новости старой версии, это не ошибка)

files:
  - features/touch-phone/news/news_rubric.hermione.js

tags:
  - reviewed
  - news
  - skip_e2e_check # выключили в проде

v-team: Freshness

counter: /$page/$main/$result[@wizard_name="news" and @subtype="rubric"]

tlds:
  - ru
  - by
  - ua
  - kz
  - uz
