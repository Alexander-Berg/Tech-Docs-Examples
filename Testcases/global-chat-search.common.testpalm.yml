feature: Глобальный поиск по чатам

specs:

    beforeEach:
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: |
              Открывается список чатов
              Над списком чатов есть поле ввода с заполнителем "Поиск"
        - do: Кликнуть / тапнуть в поле ввода
        - assert: Фокус курсора поместился в поле ввода

    Поиск осуществляется по названиям групповых чатов[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: У авторизованного пользователя в списке чатов есть групповой чат
        - do: Ввести в поле поиска название чата из description
        - assert: В секции "Люди и чаты" отображается название чата

    Поиск осуществляется по сообщениям в чатах в которых состоим[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: У авторизованного пользователя есть несколько приватных/групповых чатов в истории которых отправили **одинаковое сообщение** (если такого сообщения нет, то отправить его в эти чаты)
        - do: Ввести сообщение, которое отписано в description
        - assert: В секции “Сообщения” отображены все чаты с отправленным ранее сообщением

    Максимальное количество показываемых элементов в разделе "Чаты" равно 15[manual]:
        - automation:
        - description: У авторизованного пользователя есть **более 15** групповых чатов, у которых **первые несколько символов названия чата начинаются одинаково** (если таких чатов нет, то создать самим более 15 групповых чатов с одинаковым названием)
        - do: Начать вводить в поле поиска символы соответствующие description
        - assert: |
              В секции “Люди и чаты” отобразилось только 15 результатов поиска
              Результаты поиска ранжируются от более свежих к более старым

    Не показывается удаленный чат в выдаче при поиске его по названию[manual]:
        - automation:
        - description: У авторизованного пользователя групповой чат с историей сообщений (если истории нет, то самим отправить сообщения в чат)
        - do: Ввести в поле поиска название чата из description
        - assert: В секции "Люди и чаты" отображается название чата
        - do: Закрыть поиск и выйти из чата из description
        - assert: Чат пропадает из списка чатов
        - do: Кликнуть / тапнуть в поле ввода
        - assert: Фокус курсора поместился в поле ввода
        - do: Ввести название чата из description
        - assert: Чат из description не отображен в секции “Люди и чаты”

    Поиск работает по тексту Reply[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть **reply** (если такого сообщения нет - отправить самим в чат любой Reply)
        - do: Ввести в поле поиска текст reply из description
        - assert: В результатах поиска есть текст reply из description

    Тап по выданному элементу из раздела "Чаты" открывает чат на последнем сообщении, если это групповой чат[manual]:
        - tags: [b2b]
        - automation:
        - description: У авторизованного пользователя в списке чатов есть групповой чат
        - do: Ввести название чата из description
        - assert: В секции “Люди и чаты” отображено название чата
        - do: Нажать по найденному чату из секции “Люди и чаты”
        - assert: Открылся чат из description на последнем сообщении в чате

    Поиск корректно работает, когда в результатах поиска по названиям групповых чатов нет ни одного совпадения[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть групповой чат
        - do: Ввести название группового чата, которое бы не совпадало с названием имеющихся чатов в списке чатов
        - assert: |
              Cекция "Люди и чаты" не появилась
              Если введенное слово в поисковой запрос совпадает с сообщением в любом чате, то в секции "Сообщения" отображается данный результат, если введенное слово в поисковой запрос не совпадает ни с одним сообщением из чатов, то данная секция также не появляется в результатах поиска

    Поиск не чувствителен к регистру в названиях групповых чатов[manual]:
        - automation:
        - description: У авторизованного пользователя есть групповой чат **с названием "ГрУпПа"**
        - do: Ввести в поле поиска слово “группа”
        - assert: В результатах поиска в секции "Люди и чаты" отображен чат с названием из description

    Поиск не чувствителен к Е/Ё и пр.особенностям разных языков в названиях групповых чатов[manual]:
        - automation:
        - description: У авторизованного пользователя есть групповой чат **с названием "свёкла"**
        - do: Ввести в поле поиска слово “свекла”
        - assert: В результатах поиска в секции "Люди и чаты" отображен чат с названием "свёкла"

    Поиск дает такие же результаты, если это был поиск по названиям групповых чатов, при наборе запроса в другой раскладке клавиатуры[manual]:
        - automation:
        - description: У авторизованного пользователя есть групповой чат **с названием “привет”**
        - do: Ввести в поле поиска слово “ghbdtn”
        - assert: В результатах поиска в секции "Люди и чаты" отображен чат с названием "привет"

    Поиск дает такие же результаты, если это был поиск по названиям групповых чатов, при транслитерации запроса[manual]:
        - automation:
        - description: У авторизованного пользователя есть групповой чат **с названием “привет”**
        - do: Ввести в поле поиска слово “privet”
        - assert: В результатах поиска в секции "Люди и чаты" отображен чат с названием "привет"

    Чат "Сохраненные сообщения" корректно отображается в результатах поиска[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть чат с самим собой
        - do: Ввести в поле поиска текст "Сохраненные сообщения"
        - assert: В результатах поиска в блоке "Люди и чаты" отображается чат "Сохраненные сообщения"

    Поиск по описаниям чатов[manual]:
        - automation:
        - description: Создать групповой чат и добавить к нему описание (например "тестовый чат для проверки поиска по описанию")
        - do: В поле поиска ввести первые буквы слова из описания чата из description или любое слово целиком (Например "проверк")
        - assert: |
              В результатах поиска отображается название чата с целевым описанием
              В результатах поиска могут отображаться другие найденные совпадения

    Если название чата содержит цифры[manual]:
        - automation:
        - description: Для выполнения тест-кейса необходимо залогиниться аккаунтом yndx-mssngr-1@yandex.ru пароль QazMssngr1
        - do: Ввести в поле поиска цифру название чата содержащее цифру, например "чат 8"
        - assert: |
              Найдены чаты содержащие цифру 8, например "чат 8"
              Могут выводиться пользователи у которых имя, фамилия или никнейм начинаются на эти буквы, а так же сообщения и чаты с подходящими сообщениями

    Поиск выдает результаты после восстановления интернет-соединения, если это был поиск по названию группового чата[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть групповые чаты
        - do: Отключить интернет-соединение
        - assert: Соединение с интернетом выключено
        - do: В поле поиска ввести название чата из **description**
        - assert: |
              Введенное слово отображено в поле поиска
              Cекция "Люди и чаты" не появилась
        - do: Восстановить интернет-соединение
        - assert: |
              Введенное слово отображено в поле поиска
              Cекция "Сообщения" не появилась
        - do: Убрать один символ из поля ввода
        - assert: |
              Введенное слово отображено в поле поиска
              В секции “Люди и чаты” отображается чат из description

    Поиск не выдает результатов в отсутствии интернет-соединения, по названию группового чата[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть групповые чаты
        - do: Отключить интернет-соединение
        - assert: Соединение с интернетом выключено
        - do: В поле поиска ввести название чата из **description**
        - assert: |
              Введенное слово отображено в поле поиска
              Cекция "Люди и чаты" не появилась

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
    - chamb
