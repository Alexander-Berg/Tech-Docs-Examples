feature: Внешний оффер
type: Согласование

description: |
  установить у вакансии бюджетную позицию 'БП' (10001 ... 20000) /admin/vacancies/vacancy/
  после прохождения кейса 'Заполнение формы 'Отправка оффера на согласование' проверить, что статус JOB-тикета стал 'Согласование в HR'
  после прохождения кейса 'Заполнение формы 'Отправка оффера на согласование' проверить, что в JOB-тикете добавлен комментарий 'Предлагается согласовать оффер кандидату  ...'

specs:
    beforeEach:
        - do: открыть страницу оффера offers/<id_оффера>/ со статусом 'Готов к согласованию' и типом вывода 'Новый сотрудник'
        - screenshot: присутствуют кнопки 'Редактировать', 'На согласование', 'Удалить' [offer_actions]
        - do: нажать 'На согласование'
        - assert: открылось модальное окно 'Отправка оффера на согласование'
        - screenshot: пример внешнего вида модального окна 'Отправка оффера на согласование' [offer_form_approve]
    Проверка обязательных полей:
        - do: в модальном окне нажать 'На согласование'
        - screenshot: под обязательными полями появились ошибки [offer_form_approve_validation]
    Заполнение формы 'Отправка оффера на согласование':
        - do: в поле 'Сервисы ABC' указать 'Вики'
        - do: в поле 'Профессиональный уровень' выбрать значение на выбор
        - do: нажать 'На согласование'
        - assert: |
            модальное окно пропало
            данные соответствуют введенным в форме 'Отправка оффера на согласование'
            напротив 'Оффер' присутствуют кнопки 'Редактировать', 'Удалить', 'Отправить'
            оффер поменял статус на 'Согласование'
        - screenshot: пример внешнего вида шапки оффера [offer_form_approve_success]

tags:
  - reviewed

priority: blocker

files:
    - tests/hermione/suites/desktop/candidates/external_offers/external_offer_approve/external_offer_approve.hermione.js

browsers:
  - yandex-browser-desktop
  - firefox-desktop
  - safari-desktop
