feature: Спорт

specs:
  Матч не начался:
    Внешний вид - футбол:
      - params:
          foreverdata: '1882106462'
          user_time: '20190914'
      - tags:
          - smoke_extended
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик футбольного матча
      - screenshot: внешний вид [plain]
      - assert: внешний вид соответствует эталонному скриншоту (время матча может отсутствовать)
      - do: нажать на иконку второй команды
      - assert: выдача обновилась
      - assert: в поисковой стрелке отображается запрос "футбольный клуб Ростов"
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @suptype="football_match"]/team/p1'
      - assertMetrics: '*'
    Внешний вид - футбол - дефолтная вкладка:
      - params:
          foreverdata: '3548973311'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик футбольного матча с открытой вкладкой "Ход матча"
      - screenshot: внешний вид [default-tab]
    Внешний вид - хоккей:
      - params:
          foreverdata: '1413401205'
          user_time: '20160921'
      - tags:
          - smoke_extended
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик хоккейного матча
      - screenshot: внешний вид [plain-hockey]
      - assert: внешний вид соответствует эталонному скриншоту (время матча может отсутствовать)
      - do: нажать на иконку первой команды
      - assert: выдача обновилась
      - assert: в поисковой стрелке отображается запрос "сборная Финляндии по хоккею"
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="hockey_match"]/team/p0'
      - assertMetrics: '*'
    Внешний вид - баскетбол:
      - params:
          foreverdata: '3407478943'
      - tags:
          - smoke_extended
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик баскетбольного матча
      - screenshot: внешний вид [plain-basketball]
      - do: нажать на иконку первой команды
      - assert: выдача обновилась
      - assert: в поисковой стрелке отображается запрос "Баскетбольный клуб Торонто Рэпторс"
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="basketball_match"]/team/p0'
      - assertMetrics: '*'
    Внешний вид - баскетбол с новостями:
      - params:
          foreverdata: '2095995390'
      - tags:
          - smoke_extended
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик баскетбольного матча
      - screenshot: внешний вид [plain-basketball]
      - do: нажать на иконку первой команды
      - assert: выдача обновилась
      - assert: в поисковой стрелке отображается запрос "Баскетбольный клуб Торонто Рэпторс"
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="basketball_match"]/team/p0'
      - assertMetrics: '*'
    Купить билеты:
      - params:
          foreverdata: '225708088'
          user_time: '20171111'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик футбольного матча с кнопкой "Купить билеты"
      - screenshot: внешний вид [before/tickets]
      - assert: внешний вид соответствует эталонному скриншоту (время матча может отсутствовать)
      - do: нажать на кнопку 'Купить билеты'
      - assert: в новой вкладке открылся сервис Яндекс Афиша
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/ticket'
      - assertMetrics: '*'
    Известен только состав:
      - params:
          foreverdata: '317919890'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
      - assert: в колдунщике присутствует информация по расстановке команд на поле
      - do: нажать на кнопку разворачивания внизу колдунщика
      - assert: колдунщик развернулся
      - screenshot: внешний вид расстановки [before/only-livescore]
      - assert: внешний вид соответствует эталонному скриншоту
      - assertMetrics: '*'
    Время начала неизвестно:
      - params:
          foreverdata: '3149019742'
          user_time: '20180724'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча с неизвестным временем начала
      - assert: в колдунщике присутствует информация о чемпионате (НФЛ), дате и стадионе
      - screenshot: внешний вид [before/time-unknown]
      - assert: внешний вид соответствует эталонному скриншоту
      - assertMetrics: '*'
  Матч идет:
    - params:
        foreverdata: '1356851580'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик матча
    - assert: в колдунщике присутствует информация о чемпионате (Чемпионат Испании)
    - screenshot: внешний вид [match-goes]
    - assert: внешний вид соответствует эталонному скриншоту
    - assertMetrics: '*'
  Матч завершён:
    - params:
        foreverdata: '689886717'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик матча
    - assert: в колдунщике присутствует информация о статусе матча (матч завершен)
    - assert: таб меню "Видео" активен
    - assert: видео с лучшими моментами присутствуют в колдунщике
    - screenshot: внешний вид [after]
    - assert: внешний вид соответствует эталонному скриншоту
    - assertMetrics: '*'
  Матч отменен:
    - params:
        foreverdata: '3044698201'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик матча
    - assert: в колдунщике присутствует информация о статусе матча (матч отменен)
    - screenshot: внешний вид [cancelled]
    - assert: внешний вид соответствует эталонному скриншоту
    - assertMetrics: '*'
  Матч закончился в овертайме:
    - params:
        foreverdata: '703478581'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик матча
    - assert: в колдунщике присутствует информация о статусе матча (матч завершен в овертайме)
    - assert: таб меню "Видео" активен
    - assert: видео с лучшими моментами присутствуют в колдунщике
    - screenshot: внешний вид [overtime]
    - assert: внешний вид соответствует эталонному скриншоту
    - assertMetrics: '*'
  Матч закончился по буллитам:
    - params:
        foreverdata: '404961046'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик матча
    - assert: в колдунщике присутствует информация о статусе матча (матч завершен по буллитам)
    - assert: таб меню "Видео" активен
    - assert: видео с лучшими моментами присутствуют в колдунщике
    - screenshot: внешний вид [bullits]
    - assert: внешний вид соответствует эталонному скриншоту
    - assertMetrics: '*'
  Матч закончился по пенальти:
    - params:
        foreverdata: '3654696592'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик матча
    - assert: в колдунщике присутствует информация о статусе матча (матч завершен по пенальти)
    - screenshot: внешний вид [penalty]
    - assert: внешний вид соответствует эталонному скриншоту
    - do: нажать на таб "Ход матча"
    - assert: появилась информация о ходе матча
    - assert: внизу содержимого таба присутствует информация о серии пенальти
    - screenshot: внешний вид информации о серии пенальти [penalty-details]
    - assertMetrics: '*'
  Нет ссылки на матч:
    Прошедший матч:
      - params:
          foreverdata: '3548973311'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча c финальным счетом
      - screenshot: внешний вид [finished-no-link]
      - assert: внешний вид соответствует эталонному скриншоту
      - assert: счет матча не имеет ссылки
    Предстоящий матч:
      - params:
          foreverdata: '3553657125'
          user_time: '20190914'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
      - screenshot: внешний вид (время матча может отсутствовать) [future-no-link]
      - assert: время начала матча не имеет ссылки (вместо времени может быть прочерк)
  Плашка статуса трансляции:
    Внешний вид:
      - params:
          foreverdata: '1362511887'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча c синей плашкой статуса на трансляции
      - screenshot: внешний вид [translation_status]
      - assert: внешний вид соответствует эталонному скриншоту
    Длинный статус:
      - params:
          foreverdata: '3979564996'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча c синей плашкой статуса на трансляции
      - screenshot: внешний вид [translation_status_long]
      - assert: внешний вид соответствует эталонному скриншоту
    Статус скрыт:
      - params:
          foreverdata: '278527725'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча c синей плашкой статуса на трансляции
      - screenshot: внешний вид [translation_status_hidden]
      - assert: внешний вид соответствует эталонному скриншоту
  Команды:
    Ссылки на логотипах:
      beforeEach:
        - do: получить выдачу по запросу "foreverdata"
        - assert: на выдаче присутствует колдунщик матча
      params:
        foreverdata: '2825727328'
      tags:
        - smoke_extended
      Первая команда:
        - do: нажать на иконку первой команды
        - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/team/p0'
        - assert: поисковая выдача обновлена с запросом 'Футбольный клуб Спартак'
      Вторая команда:
        - do: нажать на иконку второй команды
        - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/team/p1'
        - assert: поисковая выдача обновлена с запросом 'Футбольный клуб Урал'
        - assertMetrics: '*'
    С маленькими флагами:
      - params:
          foreverdata: '3582600248'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
      - screenshot: внешний вид [small-flags]
      - assert: внешний вид соответствует эталонному скриншоту (время матча может отсутствовать)
      - assertMetrics: '*'
    Неизвестны:
      - params:
          foreverdata: '4202501788'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
      - screenshot: внешний вид [before/unknown]
      - assert: внешний вид соответствует эталонному скриншоту (время матча может отсутствовать)
      - assertMetrics: '*'
  Информация о тв-трансляции:
    Внешний вид сообщения о тв-трансляции - Трансляция будет на канале:
      - params:
          foreverdata: '1941738290'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча с информацией о тв-трансляции
      - screenshot: внешний вид [tv-live-broadcast-announcement]
    Внешний вид сообщения о тв-трансляции - Смотреть трансляцию:
      - params:
          foreverdata: '323794568'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча с информацией о тв-трансляции
      - screenshot: внешний вид верхней части колдунщика [tv-live-broadcast]
    Внешний вид сообщения о тв-трансляции - Смотреть трансляцию с узкой иконкой:
      - params:
          foreverdata: '3158706356'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча с информацией о тв-трансляции
      - screenshot: внешний вид верхней части колдунщика [tv-live-broadcast]
    Отправляется счетчик при клике на 'Смотреть трансляцию':
      - params:
          foreverdata: '323794568'
      - do: получить выдачу по запросу 'foreverdata'
      - do: нажать кнопку "Смотреть трансляцию"
      - assert: открылся сайт тв-канала с трансляциями
      - tech: сработал счетчик '/$page/$main/$result/broadcast'
  Подробности матча:
    Обычные (старый формат):
      - params:
          foreverdata: '3130855792'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
      - assert: в колдунщике присутствует информация с ходом матча
      - screenshot: внешний вид [match-goes-details]
      - assert: внешний вид соответствует эталонному скриншоту
      - assertMetrics: '*'
    Расширенные:
      - params:
          foreverdata: '3337918477'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
      - assert: в колдунщике присутствует информация с расширенным ходом матча
      - screenshot: внешний вид [match-goes-details-extended-folded]
      - do: нажать на кнопку разворачивания внизу колдунщика
      - assert: колдунщик развернулся
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/more'
      - screenshot: внешний вид информация о расширенном ходе матча [match-goes-details-extended]
      - assert: внешний вид соответствует эталонному скриншоту
      - assertMetrics: '*'
    Расширенные - видео:
      params:
        foreverdata: '1015234137'
      tags:
        - smoke_extended
      beforeEach:
        - do: получить выдачу по запросу 'foreverdata'
        - assert: на выдаче присутствует колдунщик матча
      Таб видео:
        - assert: таб меню "Видео" активен
        - screenshot: примерный внешний вид [video]
        - do: нажать на первую ссылку видео в нижней карусели
        - assert: открылся youtube-сервис (само видео может быть недоступно, важно, что открывается ссылка)
        - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tabs/tab_video/showcase-p0/item/thumb'
        - do: закрыть плеер
        - assertMetrics: '*'
      Таб ход матча:
        - do: нажать на таб меню "Ход матча"
        - assert: отобрализись данные с ходом матча
        - assert: таб меню "Ход матча" активен
        - assert: в таблице присутствует ссылка "Видео"
        - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tabs/controls/tab_match'
        - screenshot: внешний вид [match-goes-with-video]
        - do: нажать на ссылку "Видео"
        - assert: открылся youtube-сервис (само видео может быть недоступно, важно, что открывается ссылка)
        - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tabs/tab_match/events/body/p1/video/link'
        - assertMetrics: '*'
    Текстовые трансляции:
      - params:
          foreverdata: '2152149171'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
      - do: нажать на таб меню "Ход матча"
      - assert: отобрализись данные с ходом матча
      - assert: таб меню "Ход матча" активен
      - screenshot: внешний вид [match-goes-text-translation]
      - assert: примерный внешний вид соответствует скриншоту (может отличаться количество табов и их содержимое)
      - assertMetrics: '*'
  Новости:
    params:
      foreverdata: '3240431106'
    tags:
      - smoke_extended
    beforeEach:
      - do: получить выдачу по запросу "foreverdata"
      - assert: на выдаче присутствует колдунщик матча
      - do: нажать на таб 'Новости' в колдунщике матча
      - tech: сработал счетчик '/wiz/sport/livescore/football_match/tab_news'
      - assert: произошло переключение на таб 'Новости'
      - assert: у 4й новости отсутствует картинка
      - screenshot: внешний вид [sport-livecore-news-{{PLATFORM}}-{{BROWSER_TYPE}}__all >> news]
    Внешний вид:
      - label: sport-livecore-news-{{PLATFORM}}-{{BROWSER_TYPE}}__plain
      - screenshot: внешний вид [plain]
    Проверка заголовка:
      - do: кликнуть в заголовок первой новости
      - assert: открылся выбранный новостной сайт
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tabs/tab_news/card/doc'
      - assertMetrics: '*'
    Проверка картинки:
      - do: кликнуть на картинку первой новости
      - assert: открылся выбранный новостной сайт
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tabs/tab_news/card/image'
      - assertMetrics: '*'
    Проверка гринурла:
      - do: кликнуть в гринурл первой новости
      - assert: открылся выбранный новостной сайт
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tabs/tab_news/card/path/urlnav'
      - assertMetrics: '*'
    Нажатие на кнопку "Все новости":
      - label: sport-livecore-news-{{PLATFORM}}-{{BROWSER_TYPE}}__all
      - screenshot: внешний вид новостей в нижней части колдунщика [news]
      - do: кликнуть на кнопку "Все новости"
      - assert: открылись сервис Яндекс Новости
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tabs/tab_news/button'
      - assertMetrics: '*'
  Новости - гринурл со слэшем:
    - params:
        foreverdata: '226576585'
        user_time: '20190920'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: отобразился колдунщик матча
    - do: нажать на кнопку разворачивания внизу колдунщика
    - assert: колдунщик развернулся
    - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="hockey_match"]/more'
    - screenshot: примерный внешний вид 3ей новости в списке новостей [with-slashes-in-news]
  Видео:
    Трансляция:
      - params:
          foreverdata: '2865130512'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
      - screenshot: внешний вид [match-goes-translation]
      - assert: внешний вид соответствует эталонному скриншоту
      - do: нажать на тумбу с трансляцией
      - assert: в новой вкладке открылся сторонний ресурс с видео (само видео может быть недоступно так как это тестовые данные, главное отрабатывает переход на ресурс - суть проверки заключается в этом)
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tabs/tab_video/translation'
      - assertMetrics: '*'
    Запись трансляции:
      - params:
          foreverdata: '1189809730'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
      - screenshot: внешний вид [after/match-replay]
      - assert: внешний вид соответствует эталонному скриншоту
      - do: нажать на тумбу с записью трансляции
      - assert: в новой вкладке открылся сторонний ресурс с видео (само видео может быть недоступно так как это тестовые данные, главное отрабатывает переход на ресурс - суть проверки заключается в этом)
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tabs/tab_video/repeat-translation'
      - assertMetrics: '*'
    Трансляция не началась:
      - params:
          foreverdata: '785095392'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
      - screenshot: внешний вид [match-will-start]
      - assert: внешний вид соответствует эталонному скриншоту
    Платная трансляция:
      - params:
          foreverdata: '3577055527'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
      - screenshot: внешний вид [broadcast-is-paid]
      - assert: внешний вид соответствует эталонному скриншоту
    Одна маленькая видео-тумба:
      - params:
          foreverdata: '2336281537'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
      - assert: в к-ке только одна видео тумба, тайтл и гринурл расположены справа от тумбы
      - screenshot: внешний вид [match-goes-moment-v]
      - assert: внешний вид соответствует эталонному скриншоту
      - do: нажать на тумбу видео
      - assert: открылся видео-плеер (само видео может быть недоступно, важно что плеер открывается - суть проверки заключается в этом)
      - tech: сработал счетчик 'tab_video/p0/single/thumb'
      - do: закрыть плеер и нажать на гринурл видео
      - assert: открылся видео-плеер (само видео может быть недоступно, важно что плеер открывается - суть проверки заключается в этом)
      - tech: сработал счетчик 'tab_video/p0/single/urlnav'
      - assertMetrics: '*'
    Видео в один ряд:
      - params:
          foreverdata: '163763904'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
      - assert: таб меню "Видео" активен
      - assert: видеоролики расположены в один ряд
      - screenshot: внешний вид [match-goes-moment-h]
      - assert: внешний вид соответствует эталонному скриншоту
      - assertMetrics: '*'
    Трансляции и видео в один ряд:
      - params:
          foreverdata: '2855511547'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
      - assert: таб меню "Видео" активен
      - assert: на первом месте в блоке с видео расположена большая тумба онлайн трансляции
      - assert: под трансляцией присутствуют видеоролики, которые расположены в один ряд
      - screenshot: внешний вид [match-goes-translations-moments]
      - assert: внешний вид соответствует эталонному скриншоту
      - assertMetrics: '*'
    Видео в два ряда:
      params:
        foreverdata: '160316212'
      beforeEach:
        - do: получить выдачу по запросу 'foreverdata'
        - assert: на выдаче присутствует колдунщик матча
        - assert: видео располагается в 2 ряда, в обоих рядах по несколько тумб
      Внешний вид:
        - screenshot: внешний вид [video-2-rows]
        - assertMetrics: '*'
      Первый ряд - Проверка тумбы и счетчика:
        - do: нажать на тумбу первого видео в верхней карусели
        - assert: открылся Яндекс.Эфир (само видео может быть недоступно, важно, что открывается сервис Яндекс.Эфир - суть проверки заключается в этом)
        - tech: сработал счетчик '/tab_video/p0/showcase/item/thumb'
        - do: закрыть плеер
        - assertMetrics: '*'
      Первый ряд - Проверка гринурла и счетчика:
        - do: нажать на гринул первого видео в верхней карусели
        - assert: открылся Яндекс.Эфир (само видео может быть недоступно, важно, что открывается сервис Яндекс.Эфир - суть проверки заключается в этом)
        - tech: сработал счетчик '/tab_video/p0/showcase/item/urlnav'
        - do: закрыть плеер
        - assertMetrics: '*'
      Второй ряд - Проверка тумбы и счетчика:
        - do: нажать на тумбу первого видео в нижней карусели
        - assert: открылся Яндекс.Эфир (само видео может быть недоступно, важно, что открывается сервис Яндекс.Эфир - суть проверки заключается в этом)
        - tech: сработал счетчик '/tab_video/p1/showcase/item/thumb'
        - do: закрыть плеер
        - assertMetrics: '*'
      Второй ряд - Проверка гринурла и счетчика:
        - do: нажать на гринул первого видео в нижней карусели
        - assert: открылся Яндекс.Эфир (само видео может быть недоступно, важно, что открывается сервис Яндекс.Эфир - суть проверки заключается в этом)
        - tech: сработал счетчик '/tab_video/p1/showcase/item/urlnav'
        - assertMetrics: '*'
    Параметры для защищенного видео в плеере yandex:
      - tags:
          - no_assessors
      - params:
          foreverdata: '160316212'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
      - do: нажать на тумбу первого видео в верхней карусели
      - assert: открылся видео-плеер c iframe (само видео может быть недоступно, важно что плеер открывается - суть проверки заключается в этом)
      - assert: значение атрибута iframe должно быть 'encrypted-media; autoplay'
      - assertMetrics: '*'
  Кликабельная ссылка на турнир:
    - params:
        foreverdata: '1499478235'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик матча
    - screenshot: внешний вид [link-tournament-stadion]
    - assert: внешний вид соответствует эталонному скриншоту
    - do: нажать на название турнира
    - assert: должна открыться выдача с запросом "турнир"
    - assertMetrics: '*'
  Правильный вывод даты в другой таймзоне:
    - tlds: ru
    - params:
        foreverdata: '1958661815'
        lr: '57'
        user_time: '20180625'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик матча
    - screenshot: внешний вид [timezone]
    - assert: внешний вид соответствует эталонному скриншоту (время матча может отсутствовать)
    - assert: дата начала должна быть 'завтра в 04:00'
    - assertMetrics: '*'
  Наличие часового пояса:
    - params:
        foreverdata: '2476255640'
        user_time: '20210416'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик матча
    - screenshot: внешний вид верхней части колдунщика [has-timezone]
    - assert: часовой пояс должен быть указан 'Московское время'
  Расстановка:
    Размер поля и иконки:
      - params:
          foreverdata: '998354622'
      - do: получить выдачу на вечных данных по запросу 'foreverdata'
      - assert: на выдаче есть колдунщик матча
      - assert: в колдунщике есть таб 'Состав'
      - do: кликнуть на таб 'Состав'
      - assert: появилась схема футбольного поля с иконками игроков (игроки не соответствуют командам - данные тестовые)
      - screenshot: внешний вид расстановки игроков [lineups]
      - assert: в верхней половине поля игроки размещены в четыре горизонтальных ряда (если не считать вратаря)
      - assert: в нижней половине поля игроки размещены в три горизонтальных ряда (если не считать вратаря)
      - assert: верхняя и нижняя половины поля имеют одинаковый размер
      - assert: имя первого игрока в первом сверху ряду обрезается многоточием
      - assert: есть игрок с иконкой футбольного мяча и числовым счетчиком слева от нее
      - assert: есть игрок с иконкой желтой карточки
      - assert: есть игрок с иконкой красной карточки
      - assert: есть игрок с иконкой красной карточки через желтую
      - assertMetrics: '*'
  Наличие метки времени, если дата в виде объекта:
    - params:
        foreverdata: '978755000'
    - do: получить выдачу на вечных данных по запросу 'foreverdata'
    - assert: на выдаче есть колдунщик матча
    - assert: в колдунщике матча отображаются новости
    - assert: у новостей есть метка времени
    - assertMetrics: '*'
  Сокрытие счета матча:
    beforeEach:
      - do: почистить куки и получить выдачу по запросу 'foreverdata'
    Проверка работы:
      - params:
          foreverdata: '2306275960'
      - assert: на выдаче присутствует колдунщик матча
      - assert: в колдунщике матча присутствует кнопка для скрытия счета матча (правый верхний угол)
      - screenshot: внешний вид [with-hide-score-icon]
      - assert: отображается тултип с сообщением "Результаты матча можно скрывать"
      - assert: счет матча отображается
      - do: кликнуть в кнопку скрытия результатов матча
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="hockey_match"]/hide_goals'
      - assert: кнопка перешла во включенное состояние
      - assert: счет матча скрылся под звездочками
      - assert: тултип с сообщением закрылся
      - screenshot: внешний вид [with-hide-score-activated-icon]
      - do: обновить страницу
      - assert: на выдаче присутствует колдунщик матча
      - assert: отсутствует тултип с сообщением "Результаты матча можно скрывать"
      - assert: счет матча скрыт под звездочками
      - assert: кнопка скрытия счета матча во включенном состоянии
      - do: кликнуть в кнопку скрытия результатов матча
      - assert: кнопка перешла в выключенное состояние
      - assert: счет матча отображается
      - do: обновить страницу
      - assert: на выдаче присутствует колдунщик матча
      - assert: отсутствует тултип с сообщением "Результаты матча можно скрывать"
      - assert: счет матча отображается
      - assert: кнопка скрытия счета матча в выключенном состоянии
      - assertMetrics: '*'
    Когда нет табов:
      - params:
          foreverdata: '2153088763'
      - assert: на выдаче присутствует колдунщик матча
      - assert: в колдунщике матча присутствует кнопка для скрытия счета матча (правый верхний угол)
      - assert: счет матча отображается
      - screenshot: внешний вид [no-tabs-with-hide-score-icon]
      - do: кликнуть в кнопку скрытия результатов матча
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="basketball_match"]/hide_goals'
      - assert: кнопка перешла во включенное состояние
      - assert: счет матча скрылся под звездочками
      - screenshot: внешний вид [no-tabs-with-hide-score-activated-icon-step-2]
      - do: обновить выдачу (заново получить выдачу по тому же запросу)
      - assert: на выдаче присутствует колдунщик матча
      - assert: счет матча скрыт под звездочками
      - assert: кнопка скрытия счета матча во включенном состоянии
      - screenshot: внешний вид [no-tabs-with-hide-score-activated-icon-step-3]
      - do: кликнуть в кнопку скрытия результатов матча
      - assert: кнопка перешла в выключенное состояние
      - assert: счет матча отображается
      - screenshot: внешний вид [no-tabs-with-hide-score-icon-step-4]
      - do: обновить выдачу (заново получить выдачу по тому же запросу)
      - assert: на выдаче присутствует колдунщик матча
      - assert: счет матча отображается
      - assert: кнопка скрытия счета матча в выключенном состоянии
      - screenshot: внешний вид [no-tabs-with-hide-score-icon-step-5]
      - assertMetrics: '*'
    Деактивация табов:
      - params:
          foreverdata: '3255320596'
      - assert: на выдаче присутствует колдунщик матча
      - assert: в колдунщике матча присутствует кнопка для скрытия счета матча (правый верхний угол)
      - assert: счет матча отображается
      - do: кликнуть в кнопку скрытия результатов матча
      - assert: кнопка перешла во включенное состояние
      - do: обновить выдачу (заново получить выдачу по тому же запросу)
      - assert: на выдаче присутствует колдунщик матча
      - assert: кнопка скрытия счета матча во включенном состоянии
      - do: кликнуть на таб "Ход матча"
      - assert: счет матча отображается
      - do: кликнуть в кнопку скрытия результатов матча
      - assert: счет матча скрыт под звездочками
      - screenshot: внешний вид [hide-score-after-change-tab]
  Свернутые данные колдунщика:
    description: в браузерах на смартфонах iOS (не поисковое приложение) колокольчика справа сверху нет, несмотря на то что он может присутствовать на эталонном скриншоте
    Без вкладок - новости:
      - tags:
          - pp_new_core
      - params:
          foreverdata: '3949797802'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик спортивного матча
      - assert: в колдунщике видна кнопка для разворачивания колдунищка
      - screenshot: внешний вид свернутого колдунщика [only-news-folded]
      - do: нажать на кнопку разворачивания колдунщика
      - assert: содержимое колдунщика отображается полностью
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/more'
      - screenshot: внешний вид [only-news-unfolded]
      - do: нажать на кнопку сворачивания колдунщика
      - assert: колдунщик в свернутом состоянии [only-news-folded-final]
    Активная вкладка - новости:
      - params:
          foreverdata: '3343221585'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик спортивного матча
      - assert: в колдунщике видна кнопка для разворачивания колдунищка
      - screenshot: внешний вид свернутого колдунщика [news-folded]
      - do: нажать на кнопку разворачивания колдунщика
      - assert: содержимое колдунщика отображается полностью
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tabs/tab_news/more'
      - screenshot: внешний вид [news-unfolded]
      - do: нажать на кнопку сворачивания колдунщика
      - assert: колдунщик свернулся
      - do: кликнуть на второй табик
      - assert: отрисовались данные второго табика
      - assert: кнопка сворачивания/разворачивания отсутствует
      - do: нажать на первый табик
      - assert: содержимое колдунищка развернуто
      - assert: кнопка сворачивания отсутствует
      - screenshot: внешний вид [news-unfolded-final]
    Активная вкладка - ход матча:
      - params:
          foreverdata: '1493360909'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик спортивного матча
      - assert: в колдунщике видна кнопка для разворачивания колдунищка
      - screenshot: внешний вид свернутого колдунщика [timeline-folded]
      - do: нажать на кнопку разворачивания колдунщика
      - assert: содержимое колдунщика отображается полностью
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tabs/tab_news/more'
      - screenshot: внешний вид [timeline-unfolded]
      - do: нажать на кнопку сворачивания колдунщика
      - assert: колдунщик свернулся
      - do: кликнуть на второй табик
      - assert: отрисовались данные второго табика
      - assert: кнопка сворачивания/разворачивания отсутствует
      - do: нажать на первый табик
      - assert: содержимое колдунищка развернуто
      - assert: кнопка сворачивания отсутствует
      - screenshot: внешний вид [timeline-unfolded-final]
    Активная вкладка - статистика:
      - tags:
          - pp_new_core
      - params:
          foreverdata: '3881693684'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик спортивного матча
      - assert: в колдунщике видна кнопка для разворачивания колдунищка
      - screenshot: внешний вид свернутого колдунщика [stat-folded]
      - do: нажать на кнопку разворачивания колдунщика
      - assert: содержимое колдунщика отображается полностью
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tabs/tab_news/more'
      - screenshot: внешний вид [stat-unfolded]
      - do: нажать на кнопку сворачивания колдунщика
      - assert: колдунщик свернулся
      - do: кликнуть на второй табик
      - assert: отрисовались данные второго табика
      - assert: кнопка сворачивания/разворачивания отсутствует
      - do: нажать на первый табик
      - assert: содержимое колдунищка развернуто
      - assert: кнопка сворачивания отсутствует
      - screenshot: внешний вид [stat-unfolded-final]
    Активная вкладка - расстановка:
      - params:
          foreverdata: '3910972461'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик спортивного матча
      - assert: в колдунщике видна кнопка для разворачивания колдунищка
      - screenshot: внешний вид свернутого колдунщика [lineups-folded]
      - do: нажать на кнопку разворачивания колдунщика
      - assert: содержимое колдунщика отображается полностью
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tabs/tab_news/more'
      - screenshot: внешний вид [lineups-unfolded]
      - do: нажать на кнопку сворачивания колдунщика
      - assert: колдунщик свернулся
      - do: кликнуть на второй табик
      - assert: отрисовались данные второго табика
      - assert: кнопка сворачивания/разворачивания отсутствует
      - do: нажать на первый табик
      - assert: содержимое колдунищка развернуто
      - assert: кнопка сворачивания отсутствует
      - screenshot: внешний вид [lineups-unfolded-final]
    Дефолтная активная вкладка - ход матча:
      - params:
          foreverdata: '4286485194'
          exp_flags: sport_livescore_fold_tabs=1
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик спортивного матча
      - assert: в колдунщике есть кнопка для разворачивания колдунищка
      - screenshot: внешний вид [timeline-default-folded]
    Активная вкладка - видео:
      - params:
          foreverdata: '167116841'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик спортивного матча
      - assert: в колдунщике нет кнопки для разворачивания колдунищка
    Мало записей - ход матча:
      - params:
          foreverdata: '849141238'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик спортивного матча
      - assert: в колдунщике нет кнопки для разворачивания колдунищка
      - screenshot: внешний вид [timeline-few-records]
    Мало записей - новости:
      - params:
          foreverdata: '3670182510'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик спортивного матча
      - assert: в колдунщике нет кнопки для разворачивания колдунищка
      - screenshot: внешний вид [news-few-records]
  Видео в песочнице:
    params:
      foreverdata: '3155975454'
    beforeEach:
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
    Видео:
      - do: нажать на тумбу первого видео
      - assert: открылся фрейм/оверлей с видео (само видео может быть недоступно или не соответствовать матчу в колдунщике, проверка заключается в открытии фрейма/оверлея)
      - tech: src у фрейма содержит 'https://yastatic.net/video-player/0x7c14eb8199/pages-common/default/default.html'
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tabs/tab_video/single/video'
      - assertMetrics: '-'
    Трансляция:
      - do: нажать на тумбу трансляции
      - assert: открылся оверлей с видео (само видео может быть недоступно или не соответствовать матчу в колдунщике, проверка заключается в открытии фрейма/оверлея)
      - tech: src у фрейма содержит 'https://yastatic.net/video-player/0x7c14eb8199/pages-common/default/default.html'
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tabs/tab_video/repeat-translation'
      - assertMetrics: '-'
  Произвольная строка под основным счетом:
    - params:
        foreverdata: '529077450'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик матча
    - screenshot: внешний вид счета с произвольной подстрокой [custom-subtitle]
  Формирование урла на основе строки в данных:
    - params:
        foreverdata: '2241315287'
    - tags:
        - smoke_extended
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик матча
    - do: нажать на иконку второй команды
    - assert: выдача обновилась
    - assert: в поисковой стрелке отображается запрос "Джозеф Джойс"
    - tech: урл содержит параметр 'noreask=1'
    - tech: сработал счетчик '/$page/$main/$result/team/p1'
specs-integration:
  Присутствует на выдаче:
    beforeEach:
      - do: получить выдачу по запросу "спартак цска"
      - assert: на выдаче присутствует колдунщик матча
    Первая команда:
      - tags:
          - pp_new_core
      - assert: в колдунщике присутствует логотип первой команды, на который можно нажать
      - counter: /$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]
    Вторая команда:
      - assert: в колдунщике присутствует логотип второй команды, на который можно нажать
      - counter: /$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]

v-team: Sport

tags:
  - reviewed
  - sport

files:
  - features/common/sport/livescore/sport-livescore.hermione.js
  - features/common/sport/livescore/sport-livescore.hermione.e2e.js

counter: /$page/$main/$result[@wizard_name="sport/livescore"]

tlds:
  - ru
  - by
  - ua
  - kz
  - uz
