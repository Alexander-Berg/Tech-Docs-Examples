feature: Animation

specs:
  aliases:
    - &StartAnimationLoading
      - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок сниппета с названием 'Тестовая cтраница для Animation-loading — турбо'
      - assert: открывается турбо-страница в новой вкладке
    - &StartBlockAnimation
      - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок сниппета с названием 'Тестовая cтраница для Block-animation — турбо'
      - assert: открывается турбо-страница в новой вкладке
    - &StartAnimation
      - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок сниппета с названием 'Тестовая cтраница для Animation — турбо'
      - assert: открывается турбо-страница в новой вкладке

  Отображение при попадании в область видимости:
    - params:
        foreverdata: '4166736839'
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок сниппета с названием 'Тестовая cтраница для Animation-loading — турбо'
    - assert: открывается страница в новой вкладке
    - do: проскроллить страницу до гифки и подождать, пока она загрузится
    - assert: первью гифки загрузилось  [https://jing.yandex-team.ru/files/dmitriy96/gif%20preview.png]
    - do: проскроллить вниз до конца страницы
    - do: проскроллить обратно к гифке
    - assert: гифку видно

  Анимация по кнопке:
    - params:
        foreverdata: '4166736839'
    - *StartAnimationLoading
    - do: проскроллить страницу до гифки и подождать, пока она загрузится
    - assert: |
        превью загрузилось, анимации нет
        внешний вид аналогичен примеру [https://jing.yandex-team.ru/files/dmitriy96/gif%20preview.png]
    - do: нажать на картинку
    - assert: гифка загружается, внешний вид аналогичен примеру [https://jing.yandex-team.ru/files/dmitriy96/gif%20loading.png]
    - do: немного подождать
    - assert: гифка загрузилась и анимируется, внешний вид аналогичен примеру [https://jing.yandex-team.ru/files/dmitriy96/git%20animating.png]
    - do: нажать на картинку
    - assert: |
        показалось превью, анимации нет
        внешний вид аналогичен примеру [https://jing.yandex-team.ru/files/dmitriy96/gif%20preview.png]

  Гифка с бесконечным воспроизведением:
    - params:
        foreverdata: '4082948171'
    - *StartBlockAnimation
    - do: проскроллить до гифки "Малютка-дождик должен проигрываться сразу"
    - assert: гифка загрузилась и анимируется
    - do: нажать на картинку
    - assert: анимация на прекращается

  Гифка с автовоспроизведением:
    - params:
        foreverdata: '4082948171'
    - *StartBlockAnimation
    - do: проскроллить до гифки "Гифка 256 на 320 пикселей c autoplay=true"
    - assert: гифка загрузилась и анимируется
    - do: нажать на картинку
    - assert: |
        показалось превью, анимации нет
        внешний вид аналогичен примеру [https://jing.yandex-team.ru/files/dmitriy96/gif%20preview.png]

  Подложка под гифкой:
    - params:
        foreverdata: '3349275557'
    - *StartAnimation
    - do: подождать пока превью гифок загрузятся
    - do: изменить ориентацию телефона на горизонтальную
    - screenshot: первая гифка выровнена по левому краю и под гифкой нет серого фона, внешний вид соответствует скриншоту [no-background]
    - screenshot: вторая гифка выровнена по центру и по бокам есть серый фон, внешний вид соответствует скриншоту [no-background]

  Ошибка загрузки:
    - params:
        foreverdata: '3349275557'
    - *StartAnimation
    - do: проскролить страницу до шестой гифки
    - assert: шестая гифка (последняя) не загрузилась, а на ее месте серый прямоугольник с точками
    - screenshot: внешний вид соотвествует скриншоту [loading-error]

files:
  - features/blocks/animation/animation.hermione.js
# - features/blocks/animation/animation.ex-gemini.hermione.js

v-team: Turbo

manager: tanzwuta

tags: reviewed

tlds: none
