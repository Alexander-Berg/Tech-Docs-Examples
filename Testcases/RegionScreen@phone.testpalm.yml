feature: RegionScreen

params:
    exp_flags:
        - turbo-app-ask-user-city=1

specs:
  beforeEach:
    - do: при дальнейшей проверке указанных ожидаемых результатов обращайте внимание на любые некорректные на ваш взгляд поведения, основываясь на свой опыт использования web-приложений (например, сохранение позиции при переходах туда-обратно кнопками на устройстве, пустые экраны при переходах, кривая верстка, скачкИ элементов, плавность скролла, неработающая функциональность и т.п.)

  Переход на экран выбора города доставки:
    - do: открыть браузер в режиме инкогнито
    - do: залогиниться в Яндексе
    - do: перейти по ссылке https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/user/
    - do: дождаться попапа выбора города
    - do: нажать на серую подложку
    - assert: попап скрылся
    - assert: второй сверху пункт меню содержит название населенного пункта и иконку навигационной стрелочки
    - do: нажать на этот пункт
    - assert: открылась страница выбора города доставки
    - do: нажать на кнопку "Назад"
    - assert: произошел переход на страницу пользователя
    - screenshot: внешний вид пункта с названием города соответствует скриншоту (название города на скриншоте закрашено) [plain]

  Внешний вид экрана выбора города доставки:
    - do: открыть браузер в режиме инкогнит
    - do: перейти по ссылке https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/region/
    - assert: попап выбора города не показался
    - screenshot: внешний вид соответствует скриншоту [plain]

  Навигация по кнопке 'назад' на главную:
    - do: открыть браузер в режиме инкогнито
    - do: залогиниться в Яндексе
    - do: перейти по ссылке https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/main/
    - assert: показался попап выбора города
    - do: кликнуть по кнопке "Нет, другой"
    - assert: произошел переход на страницу выбора города доставки
    - do: нажать на кнопку "Назад"
    - assert: произошел переход назад на главную страницу

  Изменение города доставки:
    - do: открыть браузер в режиме инкогнито
    - do: залогиниться в Яндексе
    - do: перейти по ссылке https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/user/
    - assert: появился попап выбора города
    - do: нажать "Да, верно"
    - do: кликнуть по пункту с названием населенного пункта
    - do: изменить содержимое поля ввода на "abc"
    - do: кликнуть на заголовок страницы, чтобы убрать фокус из поля ввода
    - assert: кнопка "сохранить" не кликабельна
    - do: изменить содержимое поля ввода на "Челябинск"
    - do: выбрать первый предлагаемый пункт из предложенных
    - tech: отправилась цель метрики в счетчик 53911873 с названием "select-another-region-city-suggest-clicked"
    - assert: кнопка "сохранить" кликабельна
    - do: кликнуть по "сохранить"
    - tech: отправилась цель метрики в счетчик 53911873 с названием "select-another-region-save-clicked" и параметрами geoid = 56, name = "Челябинск"
    - assert: произошел переход на страницу пользователя
    - assert: пункт с названием населенного пункта содержит "Челябинск"

files:
  - experiments/turbo-app-ask-user-city/screens/RegionScreen/__tests__/RegionScreen@phone.hermione.js

tags: 
  - ecom-tap
  - no_assessors #экс не активен, пока исключу из запусков на асессоров

tlds: ru

v-team: Turbo
