feature: Колдунщик видео
type: Доступность

priority: minor

specs:
  Проверка на доступность однорядного колдунщика:
    - do: получить выдачу по запросу 'arch enemy clips' (альтернативные запросы 'видео', 'котики видео')
    - assert: отобразился однорядный колдунщик видео (если нет, сменить запрос и повторить сначала)
    - tech: |
        у ссылки с тумбой есть элемент a11y-descr с названием видео
        у метки времени есть aria-label с читаемой длительностью ролика
        ссылка с названием содержит аттрибут aria-hidden=true

  Навигация по tab в однорядном колдунщике:
    - automation: SERP-113406
    - tags:
      - skip_manual_check
      - manual
    - do: получить выдачу по запросу 'arch enemy clips' (альтернативные запросы 'видео', 'котики видео')
    - assert: появился колдунщик (если нет, сменить запрос и повторить сначала)
    - do: с помощью кнопки tab перейти на колдунщик видео
    - do: с помощью кнопки tab выделить первую тумбу в списке роликов колдуна видео
    - assert: скринридер прочитывает описание в формате "Видео {Название видео} Длительность {Длительность}"
    - do: переключиться на следующий элемент с помощью клавиши tab
    - assert: |
        ссылка на ролик пропущена
        фокус на источнике
        скринридер зачитывает источник в фомате "источник {имя хостинга}"

  Навигация по стрелкам:
    - automation: SERP-113406
    - tags:
      - skip_manual_check
      - manual
    - do: запустить скринридер nvda
    - do: получить выдачу по запросу 'arch enemy clips'
    - assert: открылся многорядный колдунщик (если нет, сменить запрос и повторить сначала)
    - do: с помощью стрелки вниз перейти на колдунщик видео
    - do: с помощью стрелки вниз выделить первую тумбу в списке роликов колдуна видео
    - assert: скринридер прочитывает описание в формате "Видео {Название видео} Длительность {Длительность}"
    - do: переключиться на следующий элемент с помощью стрелки вниз
    - assert: |
        ссылка на ролик пропущена
        фокус на источнике
        скринридер зачитывает источник в фомате "источник {имя хостинга}"

  Cценарные кейсы:
    tags:
      - a11y_scenario
      - skip_manual_check # исследовательский сценарий для незрячего ассессора
      - manual

    Общий сценарий:
      - automation: SERP-99999
      - tags: a11y_scenario_smoke
      - params:
          foreverdata: '2256663917'
      - do: получить выдачу по запросу 'foreverdata' (альтернативные запросы 'видео', 'котики видео')
      - do: найти на выдаче в колдунщике Видео любой видеоролик
      - do: найти источник этого ролика
      - do: найти дату публикации этого ролика (может отсутсвовать, это не баг)
      - do: тапнуть на этот ролик (или на его источник)
      - assert: произошёл переход на страницу с этим роликом

    Сценарий с фрагментом:
      - automation: SERP-99999
      - params:
          foreverdata: '1348214484'
      - do: получить выдачу по запросу 'foreverdata' (как варить борщ/как плавать брасом)
      - do: найти на выдаче в колдунщике Видео видеоролик с меткой "Ответ на вопрос" про приготовление борща (или про то, как плавать брассом)
      - do: тапнуть на этот ролик
      - assert: произошёл переход на страницу с этим роликом

    Сценарий с кейпоинтами:
      - automation: SERP-99999
      - tags: [empry_test, no_assessors, draft] # кейпоинты пока не готовы


files:
  - features/desktop/adapter-videowiz/adapter-videowiz_a11y.hermione.js

v-team: Video

tlds: [ru]

tags:
  - A11y_serp
  - skip_e2e_check
  - no_assessors
