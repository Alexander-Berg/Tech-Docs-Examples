feature: Эмбед

specs:
  aliases:
    - &embedAutoLoadedCheck
      - tech: Проверка серверного счетчика (/turbo/embed/loaded)
      - tech: Проверка серверного счетчика (/turbo/embed/failed)
      - do: Проскролить до каждого эмбеда и дождаться загрузки
      - tech: Проверка клиентского счетчика (/turbo/embed/loaded)
    - &embedAssertLoadedCheck
      - assert: Вместо блока загрузки появился блок с данными
    - &embedAssertVideoLoadedCheck
      - assert: Вместо блока загрузки появилось видео
    - &embedAssertError
      - assert: Вместо блока загрузки появилась заглушка

  vh-плеер:
    Горизонтальный:
      - do: открыть ссылку https://yandex.ru/turbo?stub=embed/vh.json
      - *embedAutoLoadedCheck
      - *embedAssertVideoLoadedCheck
      - assert: ширина эмбеда больше высоты

    Горизонтальный с ошибкой эмбеда:
      - do: открыть ссылку https://yandex.ru/turbo?stub=embed/vh-embed-error.json
      - *embedAutoLoadedCheck
      - *embedAssertVideoLoadedCheck
      - assert: ширина эмбеда больше высоты

    Горизонтальный с ошибкой эмбеда без фолбека:
      - do: открыть ссылку https://yandex.ru/turbo?stub=embed/vh-embed-error-no-fallback.json
      - *embedAssertError

    Горизонтальный с ошибками эмбеда и видео:
      - do: открыть ссылку https://yandex.ru/turbo?stub=embed/vh-video-error.json
      - *embedAssertError

    Вертикальный:
      - do: открыть ссылку https://yandex.ru/turbo?stub=embed/vh-long.json
      - *embedAutoLoadedCheck
      - *embedAssertVideoLoadedCheck
      - assert: ширина эмбеда больше высоты

    Вертикальный с ошибкой эмбеда:
      - do: открыть ссылку https://yandex.ru/turbo?stub=embed/vh-long-embed-error.json
      - *embedAutoLoadedCheck
      - *embedAssertVideoLoadedCheck
      - assert: ширина эмбеда больше высоты

files:
  - platform/components/Embed/__tests__/embed@desktop.hermione.js

v-team: Turbo

manager: tanzwuta

qa-engineer: olga0321, dakhetov

tlds: none

browsers:
  notFor:
    - edge-desktop # турбо не поддерживается в Edge
