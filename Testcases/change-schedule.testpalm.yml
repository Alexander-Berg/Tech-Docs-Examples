feature: Дежурства

specs:
  Положительные:
    1. Замена неназначенного дежурного через кнопку "Изменение расписания":
      - automation: ABC-10830
      - tech: залогиниться под пользователем robot-abc-002
      - do: (PREPARE) открыть сервис "autotest-change-schedule" (/services/autotest-change-schedule) 
      - do: (PREPARE) кликнуть на иконку карандашика рядом с надписью "Управляющие" 
      - screenshot: (PREPARE) карандашик рядом с надписью "Управляющие" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-05-27%2018-50-54.png]
      - do: (PREPARE) в модалке "Редактирование управляющих" в поле "Добавить сотрудника" ввести свои имя и фамилию 
      - do: (PREPARE) под полем появился выпадающий список вариантов 
      - do: (PREPARE) выбрать в выпадающем списке себя 
      - assert: (PREPARE) в блоке "Управляющие" появился выбранный сотрудник 
      - do: (PREPARE) кликнуть на кнопку "Сохранить"     
      - do: открыть график дежурств в сервисе "autotest-change-schedule" (/services/autotest-change-schedule/duty)
      - screenshot: над графиком дежурств есть кнопка "Изменение расписания" с некоторым числом в красном кружке [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-05-27%2018-53-55.png]
      - do: кликнуть на кнопку "Изменение расписания"
      - screenshot: открылось модальное окно "Расписание дежурств", в левой части которого выбран фильтр "Все дежурные", ниже есть "Дежурный не назначен" и "Диана Ли". Примерный вид модального окна [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-05-27%2018-56-50.png]
      - do: кликнуть в левой части модального окна на вариант "дежурный не назначен"
      - assert: в меню выбран "дежурный не назначен" (выделено серым цветом на фоне), даты смен в правой части написаны красным
      - do: навести курсор на любую смену в правой части
      - screenshot: в конце строки со сменой появился карандашик для редактирования [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-05-27%2018-59-17.png]
      - do: кликнуть на карандашик
      - screenshot: появилось окно "Редактирование дежурства" с полем для ввода имени дежурного и недоступными для редактирования полями "Даты"; выбранные даты соответствуют тем, которые были указаны на выбранной для редактирования смены [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-05-27%2019-00-08.png]
      - do: кликнуть в поле "Дежурный"
      - assert: появился выпадающий список с возможными дежурными, среди которых есть Диана Ли
      - do: кликнуть на вариант "Диана Ли"
      - screenshot: поле "Дежурный" заполнено значением "Диана Ли" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-05-27%2019-05-00.png]
      - do: кликнуть "Сохранить" в модальном окне
      - assert: |
             модальное окно скрылось
             смена, которую редактировали, пропала из списка
      - do: кликнуть в левой части модалки на дежурного "Диана Ли"
      - assert: открыты смены дежурного "Диана Ли" (написаны чёрным), в списке смен есть та, которую редактировали у неназначенного дежурного


files: []

priority: critical

tags:
  - reviewed
