feature: sandwich-menu
experiment: На react
params:
    exp_flags: 'force-react-sandwich-menu=1'

specs:
  Стандартное меню:
    beforeEach:
      - do: перейти на страницу https://yandex.ru/turbo?stub=sandwichmenu/default-react.json

    Открытие и закрытие меню:
      - screenshot: внешний вид кнопки открытия меню [button-open]
      - do: кликнуть на иконку меню
      - assert: выехало меню
      - screenshot: внешний вид после клика [menu]
      - do: кликнуть на серую зону
      - assert: меню скрылось
      - do: снова раскрыть меню нажатием на иконку
      - assert: меню раскрылось
      - do: кликнуть на иконку крестика
      - assert: меню скрылось

    Возможность скроллить меню:
      - do: кликнуть на иконку меню
      - assert: выехало меню
      - do: проскролить меню до конца
      - assert: видима ссылка с названием "Ссылка 29"

    Ссылка внутри меню:
      - do: кликнуть на иконку меню
      - do: кликнуть по любому пункту в открывшемся меню
      - assert: в новой вкладке открывается турбо-страница

    Отсутствие скролла по кнопке:
      - do: кликнуть на иконку меню
      - assert: выехало меню
      - do: провести пальцем вниз по серой зоне слева от меню
      - assert: страница под меню не скроллится
      - do: попробовать прокрутить меню вверх
      - assert: контент позади меню остался на месте
      - do: прокрутить меню в самый низ
      - do: попытаться прокрутить меню еще ниже
      - assert: меню осталось на месте

  Меню с якорями:
    Скрывает меню по клику на якорь:
      - do: открыть страницу https://yandex.ru/turbo?stub=sandwichmenu%2Fanchor-react.json
      - do: кликнуть на иконку меню
      - assert: справа выехало меню
      - do: нажать на первый элемент меню
      - assert: |
          меню закрылось
          cтраница проскроллилась до элемента "Кнопка - якорь"

  Меню с вложенными элементами:
    beforeEach:
      - do: открыть страницу https://yandex.ru/turbo?stub=sandwichmenu/deep-react.json
      - do: кликнуть на иконку меню
      - assert: справа выехало меню

    Внешний вид:
      - screenshot: внешний вид меню соответствует скриншоту [extended]

    Открытие и закрытие спойлера:
      - do: нажать на строку первый элемент меню, содержащий спойлер (черную стрелку справа)
      - assert: спойлер расскрылся, внутри видно содержимое
      - screenshot: внешний вид [accordion-expanded]
      - do: нажать на первую строку внутри спойлера, содержащую спойлер
      - assert: спойлер раскрылся, внутри видно содержимое
      - screenshot: внешний вид [accordion-expanded-inner]
      - do: нажать на пункт меню со спойлером, в который кликали ранее
      - assert: спойлер закрылся, содержимое скрылось
      - do: нажать на раскрытый спойлер
      - assert: спойлер закрылся, содержимое скрылось

    Внешний вид в горизонтальной ориентации:
      - do: сменить ориентацию на альбомную
      - screenshot: внешний вид меню соответствует скриншоту [extended-horizontal]

files:
  - platform/components/SandwichMenu/SandwichMenu.tests/SandwichMenu@phone.hermione.js

v-team: Turbo

manager: mviktorov

qa-engineer: narbutovich

tlds: none


