feature: Глобальный поиск по сообщениям

specs:

    beforeEach:
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: |
              Открывается список чатов
              Над списком чатов есть поле ввода с заполнителем "Поиск"
        - do: Кликнуть / тапнуть в поле ввода
        - assert: Фокус курсора поместился в поле ввода

    Поиск работает по названию переданных файлов[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть **файл с названием “file”** (если таких нет - отправить в чат файл с таким названием)
        - do: Ввести в поле поиска название файла из description
        - assert: В результатах поиска есть сообщение с файлом из description

    Поиск  отдает результаты по сообщениям 18+ в не публичных чатах[manual]:
        - automation:
        - description: |
              В качестве слова категории **18+** можно использовать слово “Сука”
              У авторизованного пользователя есть групповой чат (в котором **не включен** ползунок публичной ссылки), в истории которого есть текстовые сообщения **категории 18+** (если таких сообщений нет - отправить в этот чат любым собеседником такое сообщение)
        - do: Ввести сообщение, которое было в переписке с пользователем из description
        - assert: |
              Введенное сообщение отображено в секции “Сообщения”
              Содержание сообщение полностью отображается

    Тап по выданному элементу из раздела "Сообщения" открывается чат с позиционированием на найденном сообщении[manual]:
        - tags: [advanced_smoke, b2b]
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого **есть сообщения** (если таких сообщений нет - то отправить самим в чат)
        - do: Ввести сообщение, которое отписано в description
        - assert: В секции “Сообщения” отображен чат с отправленным ранее сообщением
        - do: Нажать по найденному сообщению из секции “Сообщения”
        - assert: |
              Открылся чат из description
              Позиционирование на найденном сообщении

    Максимальное количество показываемых элементов в разделе "Сообщения" равно 100[manual]:
        - automation:
        - description: У авторизованного пользователя есть несколько приватных/групповых чатов, в истории которых **в сумме** есть **более 100 сообщений с одинаковым словом**, например "привет" (если их нет - отправить в различные чаты слово "привет", чтобы общее количество этих сообщений было более 100 сообщений)
        - do: Ввести в поле поиска "привет"
        - assert: |
              Введенное сообщение отображено в секции “Сообщения”
              В секции "Сообщения" отобразилось только 100 результатов поиска;* Результаты поиска ранжируются от более свежих к более старым;

    Поиск работает по тексту сообщений в чатах\каналах[manual]:
        - automation:
        - description: У авторизованного пользователя есть групповой чат / канал, в истории которого есть **текстовое сообщение**
        - do: Ввести в поле поиска текстовое сообщение из description
        - assert: В результатах поиска есть сообщение из description

    Поиск работает по тексту Forward[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть **forward** (если такого сообщения нет - отправить самим в чат любой Forward)
        - do: Ввести в поле поиска текст Forward из description
        - assert: В результатах поиска есть текст Forward из description

    Поиск работает по меншенам @mentions[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть **меншен** (если меншена нет - призвать самим в чат любого пользователя)
        - do: Ввести в поле поиска меншен из description
        - assert: В результатах поиска есть меншен из description

    Поиск работает по специсимволам[manual]:
        - automation:
        - description: |
              В качестве спец. символа можно использовать "#"
              У авторизованного пользователя есть приватный/групповой чат, в истории которого есть **сообщение со спец. символами** (если сообщения нет - отправить самим в чат любой спец. символ)
        - do: Ввести в поле поиска спец. символ из description
        - assert: В результатах поиска есть спец. символ из description

    Поиск не чувствителен к регистру в секции "Сообщения"[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть **сообщение “ПрИвЕт”** (если такого нет - отправить в чат слово “ПрИвЕт”)
        - do: Ввести в поле поиска слово “привет”
        - assert: В секции “Сообщения” в результатах поиска отображены все чаты в истории, которых есть слово “ПрИвЕт”

    Поиск не чувствителен к Е/Ё и пр.особенностям языков в секции "Сообщения"[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть **сообщение “свёкла”** (если такого нет - отправить в чат слово “свёкла”)
        - do: Ввести в поле поиска слово “свекла”
        - assert: В секции “Сообщения” в результатах поиска отображены все чаты в истории, которых есть слово “свекла”

    Поиск корректно работает, когда в результатах поиска по сообщениям нет ни одного совпадения[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого **нет сообщения "Привет"
        - do: Ввести в поле поиска "Привет"
        - assert: |
              Cекция "Сообщения" не появилась
              Если введенное слово в поисковой запрос совпадает с любым названием чата, то в секции "Чаты" отображается данный результат, если введенное слово в поисковой запрос не совпадает ни с одним названием чата, то данная секция также не появляется в результатах поиска

    Поиск дает такие же результаты, в секции "Сообщения", при наборе запроса в другой раскладке клавиатуры[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого **есть сообщение “привет”** (если такого нет - отправить в чат слово “привет”)
        - do: Ввести в поле поиска слово “ghbdtn”
        - assert: В секции “Сообщения” в результатах поиска отображены все чаты в истории, которых есть слово “привет”

    Поиск дает такие же результаты, в секции "Сообщения", при транслитерации запроса[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого **есть сообщение “привет”** (если такого нет - отправить в чат слово “привет”)
        - do: Ввести в поле поиска слово “privet”
        - assert: В секции “Сообщения” в результатах поиска отображены все чаты в истории, которых есть слово “привет”

    Поиск отдает результаты по сообщениям 18+ в публичных чатах[manual]:
        - automation:
        - description: |
              В качестве слова категории **18+** можно использовать слово “Сука”
              У авторизованного пользователя есть групповой чат (в которых **включен** ползунок публичной ссылки), в истории которого есть текстовые сообщения **категории 18+** (если таких сообщений нет - отправить в этот чат любым собеседником такое сообщение)
        - do: Ввести сообщение, которое было в переписке с пользователем из description
        - assert: |
              Введенное сообщение отображено в секции “Сообщения”
              Содержание сообщение полностью отображается

    Поиск не отдает результаты по сообщениям 18+ в публичных чатах, которое было удалено модератором[manual]:
        - automation:
        - description: |
              В качестве слова категории **18+, которое было бы удалено модератором** можно использовать слово “Тварь”
              У авторизованного пользователя есть групповой чат (в которых **включен** ползунок публичной ссылки), в истории которого было сообщение **категории 18+, которое было удалено модератором** (если таких сообщений нет - отправить в этот чат такое сообщение)
        - do: В поле поиска ввести сообщение, которое было удалено модератором
        - assert: |
              Cекция "Сообщения" не появилась
              Искомое сообщение было не найдено;

    Поиск отдает результаты по названиям не публичных чатов, название которых содержит 18+ контент[manual]:
        - automation:
        - description: |
              В качестве слова категории **18+** можно использовать слово “Сука”
              У авторизованного пользователя есть групповой чат (в которых **выключен** ползунок публичной ссылки) с названием содержащим **18+ контент**
        - do: В поле поиска ввести название чата из description
        - assert: В результатах поиска в секции "Чаты" отображен чат с названием из description

    Поиск работает по тексту сообщений в чате с самим собой[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть чат с самим собой (сохраненные сообщения), в истории которого есть текстовое сообщение (если сообщения нет - отправить самим в чат любое текстовое сообщение)
        - do: Ввести в поле поиска текстовое сообщение из description
        - assert: В результатах поиска есть сообщение из description

    Поиск работает по сообщению типа "Галерея"[manual]:
        - automation:
        - description: перед поверкой необходимо присоединиться к каналу https://yandex.ru/chat/#/join/10a46dc7-d629-4cff-bcd3-353f8ab4edd6
        - do: Вести в поле поиска текст "Мы сегодня облажались"
        - assert: В результатах поиска есть канал "Sports.ru" и искомый текст
        - do: Нажать по каналу “Sports.ru”
        - assert: Открывается канал и нас скроллит к записи "Мы сегодня облажались – поставили отложенную запись о победе Медведева над Надалем в нашем паблике ВКонтакте.Простите нас. Больше так не будем. А вот альтернативная реальность СММ-щика @sports_ru"

    Не показывается удаленный чат в выдаче при поиске его по сообщению[manual]:
        - automation:
        - description: У авторизованного пользователя групповой чат с историей сообщений (если истории нет, то самим отправить сообщения в чат)
        - do: Ввести название чата из description
        - assert: В результатах поиска есть чат из description
        - do: Закрыть режим поиска и выйти из чата из description
        - assert: Пользователь Вышел из чата
        - do: Кликнуть / тапнуть в поле ввода
        - assert: Фокус курсора поместился в поле ввода
        - do: Ввести сообщение, которое описано в **description**
        - assert: Чат из **description** не отображен в секции "Чаты"

    Поиск не выдает результатов в отсутствии интернет-соединения, в секции "Сообщения"[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть **сообщение “Привет”** (если такого нет - отправить в чат слово “Привет”)
        - do: Отключить интернет-соединение
        - assert: Соединение с интернетом выключено
        - do: Ввести в поле поиска “Привет”
        - assert: |
              Введенное слово отображено в поле поиска
              Cекция "Сообщения" не появилась

    Поиск выдает результаты после восстановления интернет-соединения в секции "Сообщения"[manual]:
        - automation:
        - descrtioipn: У авторизованного пользователя есть приватный/групповой чат, в истории которого есть **сообщение “Привет”** (если такого нет - отправить в чат слово “Привет”)
        - do: Отключить интернет-соединение
        - assert: Соединение с интернетом выключено
        - do: Ввести в поле поиска “Привет”
        - assert: |
              Введенное слово отображено в поле поиска
              Cекция "Сообщения" не появилась
        - do: Восстановить интернет-соединение
        - assert: |
              Введенное слово отображено в поле поиска
              Cекция "Сообщения" не появилась
        - do: Убрать один символ из поля ввода
        - assert: |
              Введенное слово отображено в поле поиска
              В секции "Сообщения" есть сообщение из descrtioipn

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
    - chamb
