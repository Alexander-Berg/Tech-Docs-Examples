feature: Колдунщик погоды кликабельный
type: На сегодня

params:
  foreverdata: '661363645'

specs:
  Внешний вид:
    beforeEach:
      - params:
          exp_flags: 'weather_clickable=1'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: появился колдунщик погоды
    Портретная ориентация:
      - label: adapters/adapter-weather/today/plain-{{PLATFORM}}-{{BROWSER_TYPE}}
      - screenshot: колдунщик погоды соответствует виду [plain]
    Ландшафтная ориентация:
      - label: adapters/adapter-weather/today/horizontal-{{PLATFORM}}-{{BROWSER_TYPE}}
      - do: повернуть устройство в горизонтальную ориентацию
      - screenshot: колдунщик погоды соответствует виду [horizontal]
  Основная проверка:
    beforeEach:
      - params:
          exp_flags: 'weather_clickable=1'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: появился колдунщик погоды
      - screenshot: колдунщик погоды соответствует виду [adapters/adapter-weather/today/plain-{{PLATFORM}}-{{BROWSER_TYPE}} >> plain]
    Заголовок:
      - do: кликнуть в тайтл
      - tech: сработал счётчик path='/$page/$main/$result/title'
      - assert: в новой вкладке открылась главная страница Яндекс.Погоды
    Подробный прогноз:
      - do: кликнуть в подробный прогноз
      - tech: сработал счётчик path='/$page/$main/$result/detail'
      - assert: в новой вкладке открылась главная страница Яндекс.Погоды
    Количество прогнозов:
      - do: проверить количество дней, для которых строится прогноз внизу
      - assert: внизу должен быть виден прогноз на 7 дней
      - assert: текущий день выделен в прогноще на 7 дней
    Проверить свайп скроллера:
      - do: свайпнуть почасовой прогноз
      - assert: почасовой прогноза свайпается
      - tech: проверить ошибки на странице
    Первый день:
      - do: кликнуть в прогноз для первого дня
      - tech: сработал счётчик path='/$page/$main/$result/days'
      - assert: в новой вкладке открылась главная страница Яндекс.Погоды
    Второй день:
      - do: кликнуть в прогноз для второго дня
      - tech: сработал счётчик path='/$page/$main/$result/days'
      - assert: в новой вкладке открылась главная страница Яндекс.Погоды
    Кнопка:
      - do: кликнуть по кнопке Подробный прогноз
      - tech: сработал счётчик path='/$page/$main/$result/button'
      - assert: в новой вкладке открылась главная страница Яндекс.Погоды
    Спецсимволы в данных:
      - params:
          foreverdata: '3284928401'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче есть колдунщик погоды
      - assert: страница загружена без ошибок

files:
  - features/touch-phone/adapter-weather/exp_clickable/adapter-weather_type_today.hermione.js

v-team: Weather

tlds:
  - ru
  - by
  - ua
  - kz
  - com.tr

counter: /$page/$main/$result[@wizard_name="weather"]
