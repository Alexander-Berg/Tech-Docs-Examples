feature: Чат сервиса Новости

specs:

  можно открыть для любой карточки:
    при переходе с ленты [manual] :
      - automation: NERPA-8437
      - tags:
        - no_assessors
        - backend_news
#      - assert: Комментарии к карточкам писать строго ЗАПРЕЩЕНО (для асессоров)
      - do: открыть сервис Новости на странице любой рубрики в портретной ориентации устройства
      - do: найти в ленте любую карточку
      - assert: |
          карточка содержит иконку комментария,
          справа от иконки комментария может быть счетчик, если карточка содержит комментарии (счетчик может появиться только после открытия шторки - это не баг, а особенности тестинга комментатора)
      - do: тапнуть по иконке комментария
      - assert: |
          открывается шторка комментария снизу вверх (если в шторке бесконечный лоадер, закройте шторку и откройте еще раз),
          шторка комментария содержит пункт Подписатся на обновления, аватар, поле ввода c плейсхолдером, галочку закрытия шторки, может содержать комментарии других пользователей,
          шторка комментария не выходит за границы экрана, верстка элементов в шторке не едет,
          внешний вид Android https://jing.yandex-team.ru/files/terenandrevna/2020-03-30_17.20.09-eJEo4.png
          внешний вид iOS https://jing.yandex-team.ru/files/terenandrevna/2020-03-30_17.15.24-9ZUIK.png
      - do: тапнуть по галочке закрытия шторки комментария
      - assert: |
          шторка закрылась сверху вниз,
          отображается лента на той карточке, с которой был переход в шторку комментария
      - do: тапнуть по иконке комментария
      - assert: открывается шторка комментария снизу вверх
      - do: свайпнуть шторку комментария вниз
      - assert: |
          шторка закрылась сверху вниз,
          отображается лента на той карточке, с которой был переход в шторку комментария
      - do: Android - тапнуть по иконке комментария (iOS - пропустить 2 шага про кнопку Back)
      - assert: открывается шторка комментария снизу вверх
      - do: тапнуть аппаратную кнопку Back
      - assert: |
          шторка закрылась сверху вниз,
          отображается лента на той карточке, с которой был переход в шторку комментария
      - do: перевести устройство в ландшафтную ориентацию
      - do: тапнуть по иконке комментария
      - assert: |
          открывается шторка комментария снизу вверх,
          шторка комментария содержит пункт Подписатся на обновления, аватар, поле ввода c плейсхолдером, галочку закрытия шторки, может содержать комментарии других пользователей,
          шторка комментария не выходит за границы экрана, верстка элементов в шторке не едет,
      - do: тапнуть по галочке закрытия шторки комментария
      - assert: |
          шторка закрылась сверху вниз,
          отображается лента на той карточке, с которой был переход в шторку комментария
      - do: тапнуть по иконке комментария
      - assert: открывается шторка комментария снизу вверх
      - do: свайпнуть шторку комментария вниз
      - assert: |
          шторка закрылась сверху вниз,
          отображается лента на той карточке, с которой был переход в шторку комментария
      - do: Android - тапнуть по иконке комментария (iOS - пропустить 2 шага про кнопку Back)
      - assert: открывается шторка комментария снизу вверх
      - do: тапнуть аппаратную кнопку Back
      - assert: |
          шторка закрылась сверху вниз,
          отображается лента на той карточке, с которой был переход в шторку комментария

    на странице сюжета [manual] :
#      - assert: Комментарии писать строго ЗАПРЕЩЕНО (для асессоров)
      - automation: NERPA-8437
      - tags:
        - no_assessors
        - backend_news
      - do: открыть сервис Новости на странице любой рубрики в портретной ориентации
      - do: найти в ленте любую карточку
      - do: перейти в сюжет тапом по заголовку карточки
      - assert: |
          на страницы сюжета есть есть кнопка 'Комментировать',
          справа от кнопки расположена иконка комментария,
      - do: тапнуть по иконке комментария
      - assert: |
          открывается шторка комментария снизу вверх,
          шторка комментария содержит пункт Подписатся на обновления, аватар, поле ввода c плейсхолдером, галочку закрытия шторки, может содержать комментарии других пользователей,
          шторка комментария не выходит за границы экрана
      - do: тапнуть по галочке закрытия шторки комментария
      - assert: |
          шторка закрылась сверху вниз,
          отображается турбостраница на том месте, с которой был переход в шторку комментария
      - do: тапнуть по кнопке 'Комментировать'
      - assert: открывается шторка комментария снизу вверх
      - do: свайпнуть шторку комментария вниз
      - assert: |
          шторка закрылась сверху вниз,
          отображается турбостраница на том месте, с которой был переход в шторку комментария
      - do: перевести устройство в ландшафтную ориентацию
      - do: тапнуть по кнопке 'Комментировать'
      - assert: |
          открывается шторка комментария снизу вверх,
          шторка комментария содержит пункт Подписатся на обновления, аватар, поле ввода c плейсхолдером, галочку закрытия шторки, может содержать комментарии других пользователей,
          шторка комментария не выходит за границы экрана
      - do: тапнуть по галочке закрытия шторки комментария
      - assert: |
          шторка закрылась сверху вниз,
          отображается турбостраница на том месте, с которой был переход в шторку комментария
      - do: тапнуть по кнопке 'Комментировать'
      - assert: открывается шторка комментария снизу вверх
      - do: свайпнуть шторку комментария вниз
      - assert: |
          шторка закрылась сверху вниз,
          отображается турбостраница на том месте, с которой был переход в шторку комментария

  позволяет переходить по истории от модального окна комментариев:
    назад к рубрике [manual] :
      - automation: NERPA-8437
      - tags:
        - brow_only
        - no_assessors
#      - assert: Комментарии к карточкам писать строго ЗАПРЕЩЕНО (для асессоров)
      - do: открыть сервис Новости на странице любой рубрики (к примеру, на Главное)
      - do: перейти в любую другую рубрику
      - do: в любой другой рубрике тапнуть по иконке комментариев любой карточки в правом нижнем углу карточки
      - assert: открылось модальное окно комментариев
      - do: тапнуть по стрелке вниз в самом верху модального окна комментариев
      - assert: модальное окно закрылось
      - do: тапнуть по браузерной или аппаратной кнопку "Назад"
      - assert: произошел переход в первоначальную рубрику (из первого шага)
    вперед к комментариям [manual] :
      - automation: NERPA-8437
      - tags:
        - brow_only
        - no_assessors
#      - assert: Комментарии к карточкам писать строго ЗАПРЕЩЕНО (для асессоров)
      - do: открыть сервис Я.Зеркало на странице любой рубрики (к примеру, на Главной)
      - do: перейти в любую другую рубрику
      - do: в любой другой рубрике тапнуть по иконке комментариев любой карточки в правом нижнем углу карточки
      - assert: открылось модальное окно комментариев
      - do: тапнуть по стрелке вниз в самом верху модального окна комментариев
      - assert: модальное окно закрылось
      - do: тапнуть по браузерной кнопке "Вперед" (в панели навигации браузера или в меню браузера)
      - assert: открылось модальное окно комментариев

# кейсы не для асессоров до решения https://st.yandex-team.ru/NEWS-13549 и https://st.yandex-team.ru/NERPA-9231
#
  позволяет оставить комментарий:
    при переходе с ленты [manual]:
      - tags:
        - no_assessors
        - backend_news
      - automation: NERPA-8437
      - do: открыть сервис Новости на странице любой рубрики
      - do: найти в ленте любую карточку, кроме карточки видео и Я.Коллекций
      - assert: |
          карточка содержит иконку комментария,
          справа от иконки комментария может быть счетчик, если карточка содержит комментарии (счетчик может появиться только после открытия шторки - это не баг, а особенности тестинга комментатора)
      - do: тапнуть по иконке комментария
      - assert: |
          открывается шторка комментария снизу вверх (если в шторке бесконечный лоадер, закройте шторку и откройте еще раз),
          шторка комментария содержит пункт Подписатся на обновления, аватар, поле ввода c плейсхолдером, галочку закрытия шторки, может содержать комментарии других пользователей,
          шторка комментария не выходит за границы экрана,
          скрин https://jing.yandex-team.ru/files/terenandrevna/2020-03-30_17.20.09-eJEo4.png
      - do: тапнуть по полю ввода комментария
      - assert: |
          появился курсор,
          появилась кнопка отправки комментария со стрелкой справа от поля ввода,
          поднялась экранная клавиатура
      - do: написать комментарий
      - assert: |
          плейсхолдер исчезает при наборе текста,
          комментарий корректно отображен в поле ввода,
          кнопка отправки комментария изменила стиль
      - do: тапнуть кнопку отправки комментария
      - assert: комментарий отображен в шторке, в консоли нет ошибок
      - do: закрыть шторку комментария любым способом
      - assert: счетчик рядом с иконкой комментария увеличился на 1    #

    в сюжете [manual]:
      - tags:
        - no_assessors
        - backend_news
      - automation: NERPA-8437
      - do: открыть сервис Новости на странице любой рубрики
      - do: найти в ленте любую карточку
      - do: перейти в сюжет тапом по заголовку карточки
      - assert: |
          в сюжете есть есть кнопка 'Комментировать',
          справа от кнопки расположена иконка комментария,
      - do: тапнуть по кнопке 'Комментировать'
      - assert: |
          открывается шторка комментария снизу вверх,
          шторка комментария содержит пункт Подписатся на обновления, аватар, поле ввода c плейсхолдером, галочку закрытия шторки, может содержать комментарии других пользователей,
          шторка комментария не выходит за границы экрана,
          скрин https://jing.yandex-team.ru/files/terenandrevna/2020-03-30_17.20.09-eJEo4.png
      - do: тапнуть по полю ввода комментария
      - assert: |
          появился курсор,
          появилась кнопка отправки комментария со стрелкой справа от поля ввода,
          поднялась экранная клавиатура
      - do: написать комментарий
      - assert: |
          плейсхолдер исчезает при наборе текста,
          комментарий корректно отображен в поле ввода,
          кнопка отправки комментария изменила стиль
      - do: тапнуть кнопку отправки комментария
      - assert: комментарий отображен в шторке, в консоли нет ошибок

  позволяет оставить комментарий на нацдоменах by,com:
    при переходе с ленты [manual]:
      - tags:
        - no_assessors
        - backend_news
      - automation: NERPA-8437
      - do: открыть сервис Новости на странице любой рубрики
      - do: найти в ленте любую карточку, кроме карточки видео и Я.Коллекций
      - assert: |
          карточка содержит иконку комментария,
          справа от иконки комментария может быть счетчик, если карточка содержит комментарии (счетчик может появиться только после открытия шторки - это не баг, а особенности тестинга комментатора)
      - do: тапнуть по иконке комментария
      - assert: |
          открывается шторка комментария снизу вверх (если в шторке бесконечный лоадер, закройте шторку и откройте еще раз),
          шторка комментария содержит пункт Подписатся на обновления, аватар, поле ввода c плейсхолдером, галочку закрытия шторки, может содержать комментарии других пользователей,
          шторка комментария не выходит за границы экрана,
          скрин https://jing.yandex-team.ru/files/terenandrevna/2020-03-30_17.20.09-eJEo4.png
      - do: тапнуть по полю ввода комментария
      - assert: |
          появился курсор,
          появилась кнопка отправки комментария со стрелкой справа от поля ввода,
          поднялась экранная клавиатура
      - do: написать комментарий
      - assert: |
          плейсхолдер исчезает при наборе текста,
          комментарий корректно отображен в поле ввода,
          кнопка отправки комментария изменила стиль
      - do: тапнуть кнопку отправки комментария
      - assert: комментарий отображен в шторке, в консоли нет ошибок
      - do: закрыть шторку комментария любым способом
      - assert: счетчик рядом с иконкой комментария увеличился на 1

    в сюжете [manual]:
      - tags:
        - no_assessors
        - backend_news
      - automation: NERPA-8437
      - do: открыть сервис Новости на странице любой рубрики
      - do: найти в ленте любую карточку
      - do: перейти в сюжет тапом по заголовку карточки
      - assert: |
          в сюжете есть есть кнопка 'Комментировать',
          справа от кнопки расположена иконка комментария,
      - do: тапнуть по кнопке 'Комментировать'
      - assert: |
          открывается шторка комментария снизу вверх,
          шторка комментария содержит пункт Подписатся на обновления, аватар, поле ввода c плейсхолдером, галочку закрытия шторки, может содержать комментарии других пользователей,
          шторка комментария не выходит за границы экрана,
          скрин https://jing.yandex-team.ru/files/terenandrevna/2020-03-30_17.20.09-eJEo4.png
      - do: тапнуть по полю ввода комментария
      - assert: |
          появился курсор,
          появилась кнопка отправки комментария со стрелкой справа от поля ввода,
          поднялась экранная клавиатура
      - do: написать комментарий
      - assert: |
          плейсхолдер исчезает при наборе текста,
          комментарий корректно отображен в поле ввода,
          кнопка отправки комментария изменила стиль
      - do: тапнуть кнопку отправки комментария
      - assert: комментарий отображен в шторке, в консоли нет ошибок

  не отображается на нацдоменах kz,ua,uz:
    - tags:
      - no_assessors
      - backend_news
    - automation: NERPA-8437
    - do: открыть сервис Новости на странице любой рубрики
    - do: найти в ленте любую карточку
    - assert: в карточке нет комментариев
    - do: перейти в любой сюжет
    - assert: в сюжете нет комментариев

files: []

v-team: News

qa-engineer: nightsonne

tlds:
  - ru
  - by
  - com
