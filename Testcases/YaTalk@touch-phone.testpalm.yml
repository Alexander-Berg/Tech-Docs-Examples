feature: Спецсниппет Яндекс.Толк

specs:
  beforeEach:
    - do: получить выдачу Поиска по запросу 'foreverdata'
  aliases:
    - &turboIframeInOverlayChecks
      - assert: открылся сайд-блок с контентом страницы
      - tech: в сайд-блоке есть iframe
      - assert: |
          в сайд-блоке показывается Турбо-страница (с ракетой в заголовке),
          в сайд-блоке есть кнопка 'Назад',
          в сайд-блоке есть метка турбо-страницы (иконка с ракетой),
      - do: тапнуть на кнопку 'Назад'
      - tech: проверить, что сработал счетчик кнопки 'Назад' - path = '/web/item/turbo/sideblock/back' ; vars = '-adapter=snippet-with-extended-preview,-source=hqcg_saas,preview=true,action=dynamic_click' (могут быть и другие переменные, они не значимы)
      - tech: проверить, что сработал счетчик кнопки закрытия всех оверлеев - path = '/web/item/turbo/sideblock/back' ; vars = '-adapter=snippet-with-extended-preview,-source=hqcg_saas,preview=true,action=dynamic_click' (могут быть и другие переменные, они не значимы)
      - assert: сайд-блок турбо закрылся

  Основные проверки:
    Обязательные проверки:
      - params:
          foreverdata: '1543017841'
      - screenshot: на выдаче есть хотя бы один спецсниппет я.Толк [plain]
      - do: кликнуть в имя автора под сниппетом
      - assert: в новой вкладке открылась страница https://yandex.ru/talk/user/a-plakhov

  Проверка гринурла с данными:
    Внешний вид:
      - params:
          foreverdata: '3400514339'
      - do: получить выдачу Поиска по запросу 'foreverdata'
      - screenshot: на выдаче есть хотя бы один спецсниппет я.Толк [plain]

files:
  - src/features/YaTalk/YaTalk.test/YaTalk@touch-phone.hermione.js

v-team: Turbo

counter: /web/item/turbo_text

tags:
  - reviewed
  - skip_e2e_check #эксперимент
  - react
  - no_assessors #приостановлена работа сервиса ЯТолк

browsers:
  notFor:
    - android-uc-browser-11-touch
    - android-uc-browser-touch

tlds: [ru, by, ua, uz, kz, com.tr, com]
