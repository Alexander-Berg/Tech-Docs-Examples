feature: Уведомления и пуши

import-steps:
    - tests/hermione/suites/messenger/shared-steps/open-messenger.testpalm.steps.yml

specs:

  Получение пуш-уведомлений в чатах[manual]:
    - automation: MSSNGRFRONT-3218
    - attach: Авторизация и открытие чата yamb
    - do: нажать на шестеренку настроек чата справа от поиска над списком чатов
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/ismateush/uhura_2019-06-11T14:03:56.jpg]
    - do: в открывшемся диалоге включить кнопку "Получать фоновые уведомления"
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/antalovc/push%20notifications%20on%20input%202019-05-30%20%D0%B2%2019.28.49.png]
    - do: закрыть вкладку браузера с чатом
    - do: в другом браузере в режиме инкогнито авторизоваться пользователем stas.mihailov666 пароль pazone
    - do: написать любое сообщение в чат с fobshitelniy
    - assert: из первого браузера приходит пуш
    - screenshot: пример внешнего вида (может меняться в зависимости от браузера) [https://jing.yandex-team.ru/files/ismateush/uhura_2019-06-10T18:16:15.jpg]
    - do: кликнуть на пуш
    - assert: открывается чат с fobshitelniy, курсор мигает в поле ввода

  Отключение пуш-уведомлений в чатах[manual]:
    - automation: MSSNGRFRONT-3218
    - attach: Авторизация и открытие чата yamb
    - do: нажать на шестеренку настроек чата справа от поиска над списком чатов
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/ismateush/uhura_2019-06-11T14:03:56.jpg]
    - do: в открывшемся диалоге отключить кнопку "Получать фоновые уведомления"
    - do: проверить что кнопка "получать уведомления" включена
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/ismateush/uhura_2019-06-10T18:19:57.jpg]
    - do: перейти на новую вкладку браузера
    - do: в другом браузере в режиме инкогнито авторизоваться пользователем stas.mihailov666 пароль pazone
    - do: написать любое сообщение в чат с fobshitelniy
    - assert: из первого браузера приходит уведомление
    - screenshot: пример внешнего вида (может меняться в зависимости от браузера) [https://jing.yandex-team.ru/files/ismateush/uhura_2019-06-10T18:16:15.jpg]
    - do: кликнуть на уведомление
    - assert: открывается чат с fobshitelniy, курсор мигает в поле ввода
    - do: закрыть вкладку браузера с чатом
    - do: пользователем stas.mihailov666 написать еще одно сообщение в чат с fobshitelniy
    - assert: пушей или уведомлений нет

  Выключение пуш-уведомлений в чате с пользователем[manual]:
    - automation: MSSNGRFRONT-1927
    - attach: Авторизация и открытие чата yamb
    - do: нажать на шестеренку настроек чата справа от поиска над списком чатов
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/ismateush/uhura_2019-06-11T14:03:56.jpg]
    - do: в открывшемся диалоге включить "Получать уведомления" и "Получать фоновые уведомления"
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/ismateush/uhura_2019-06-17T18:00:25.jpg]
    - do: в списке чатов нажать правой кнопкой мыши на чат с пользователем stas.mihailov666
    - assert: открылось контекстное меню
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/ismateush/uhura_2019-06-11T13:50:44.jpg]
    - do: в контекстном меню выбрать пункт "Выключить уведомления"
    - assert: у чата в списке справа отображается иконка выключенных уведомлений
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/ismateush/uhura_2019-06-11T13:50:54.jpg]
    - do: закрыть вкладку браузера
    - do: в другом браузере в режиме инкогнито авторизоваться пользователем stas.mihailov666 пароль pazone
    - do: написать любое сообщение в чат с fobshitelniy
    - assert: пушей или уведомлений нет
    - do: отправить меншн (написать в поле ввода сообщения @ и в саджесте выбрать Федор О.)
    - assert: из первого браузера приходит пуш
    - screenshot: пример внешнего вида (может меняться в зависимости от браузера) [https://jing.yandex-team.ru/files/ismateush/uhura_2019-06-17T17:44:31.jpg]
    - do: вернуться в первый браузер с fobshitelniy
    - assert: у чата в списке справа отображается количество новых сообщений серого цвета
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/ismateush/uhura_2019-06-11T13:51:45.jpg]
    - do: в списке чатов нажать правой кнопкой мыши на чат с пользователем stas.mihailov666
    - do: в контекстном меню выбрать пункт "Включить уведомления"
    - assert: у чата в списке справа отображается количество новых сообщений синего цвета

  Выключение пуш-уведомлений группового чата из меню[manual]:
    - automation: MSSNGRFRONT-1927
    - attach: Авторизация и открытие чата yamb
    - do: нажать на шестеренку настроек чата справа от поиска над списком чатов
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/ismateush/uhura_2019-06-11T14:03:56.jpg]
    - do: в открывшемся диалоге включить "Получать уведомления" и "Получать фоновые уведомления"
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/ismateush/uhura_2019-06-17T18:00:25.jpg]
    - do: открыть групповой чат "пуши и уведомления"
    - do: в шапке чата кликнуть на троеточие меню
    - do: выбрать пункт "Выключить уведомления"
    - assert: у чата в списке справа отображается иконка выключенных уведомлений
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/ismateush/uhura_2019-06-17T18:16:16.jpg]
    - do: закрыть вкладку браузера
    - do: в другом браузере в режиме инкогнито авторизоваться пользователем stas.mihailov666 пароль pazone
    - do: написать любое сообщение в групповой чат "пуши и уведомления"
    - assert: пушей или уведомлений нет
    - do: отправить меншн (написать в поле ввода сообщения @ и в саджесте выбрать Федор О.)
    - assert: из первого браузера приходит пуш
    - screenshot: пример внешнего вида (может меняться в зависимости от браузера) [https://jing.yandex-team.ru/files/ismateush/uhura_2019-06-17T17:44:31.jpg]
    - do: кликнуть на пуш
    - assert: открывается групповой чат "пуши и уведомления", курсор мигает в поле ввода

files: []

v-team: Chat

tags:
  - release
  - yamb
  - no_assessors

tlds: ru

browsers:
  notFor:
    - ie11