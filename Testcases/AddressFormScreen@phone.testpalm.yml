feature: Пользовательские адреса
type: Вебмастерские доставки

params:
  exp_flags:
    - analytics-disabled=1
    - turbo-app-cart-city-suggest=1
    - turbo-app-cart-market-delivery=1

specs:
  beforeEach:
    - do: разлогиниться в Яндексе, если есть залогиненные пользователи
    - do: перейти по ссылке https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/ (не забыть про слешь в конце ссылки, без него не откроется страница)
    - do: добавить любой товар в корзину
    - do: перейти в корзину и нажать кнопку "Оформить заказ"
    - assert: произошел переход к оформлению заказа
    - assert: сверху страницы отсутствует поле с городом доставки [https://jing.yandex-team.ru/files/skurhanski/chrome_aj2S2SRRMx.png]
    - do: если внизу страницы есть сохраненные адреса доставки - удилить их (Изменить -> Удалить), если нет сохраненных адресов - идем дальше по шагам
    - assert: вризу страницы отсутствуют сохраненные адреса доставки [https://jing.yandex-team.ru/files/skurhanski/6G6ez15t39.png]
    - assert: внизу страницы отображаются поля для ввода адреса доставки [https://jing.yandex-team.ru/files/skurhanski/chrome_6rJp9fyZOD.png]
    - assert: в качестве города указан город фактического нахождения пользователя
  Заполнение адреса на странице чекаута:
    - automation: SERPTEST-1719
    - do: ввести произвольные данные в полях раздела Получатель
    - do: если выбран тип доставки не курьером, то выбрать Курьером
    - do: удалить город доставки и начать вводить другой населенный пункт
    - assert: появился саджест с подсказками [https://jing.yandex-team.ru/files/skurhanski/chrome_WGgzL4Ta9k.png]
    - do: выбрать из саджеста искомый населенный пункт
    - assert: выбранный населенный пункт отображается в поле ввода
    - do: начать вводить улицу
    - assert: появился саджест с подсказками улиц, соответствующих ранее выбранному населенному пункту [https://jing.yandex-team.ru/files/skurhanski/chrome_AkNcs8sqAc.png]
    - do: выбрать из саджеста искомую улицу
    - do: заполнить оставшиеся поля адреса произвольными данными и нажать 'Отправить'
    - assert: появилось страница с сообщением о том, что заказ успешно отправлен
  Заполнение адреса в новом окне:
    - automation: SERPTEST-1719
    - do: заполнить все незаполненные поля в блоке 'Получатель' произвольными корректными данными
    - do: если выбран тип доставки не курьером, то выбрать Курьером
    - do: удалить город доставки и ввести другой населенный пункт
    - do: заполнить оставшиеся поля в блоке 'Адрес доставки' произвольными корректными данными и нажать 'Отправить'
    - do: вернуться к списку товаров и добавить любой товар в корзину
    - do: перейти в корзину и нажать кнопку "Оформить заказ"
    - assert: произошел переход к оформлению заказа
    - assert: в блоке адрес доставки сохранен и выбран ранее введенный адрес [https://jing.yandex-team.ru/files/skurhanski/chrome_nbrzHYUkds.png]
    - do: нажать по ссылке 'Добавить новый адрес'
    - assert: с анимацией справа налево открылась страница для ввода нового адреса [https://jing.yandex-team.ru/files/skurhanski/chrome_mStbFIabxB.png]
    - assert: в поле для ввода города указан город ранее сохраненного адреса
    - do: удалить город доставки и начать вводить другой населенный пункт
    - assert: появился саджест с подсказками [https://jing.yandex-team.ru/files/skurhanski/chrome_dG917HEJv1.png]
    - do: выбрать из саджеста искомый населенный пункт
    - assert: выбранный населенный пункт отображается в поле ввода
    - do: начать вводить улицу
    - assert: появился саджест с подсказками улиц, соответствующих ранее выбранному населенному пункту [https://jing.yandex-team.ru/files/skurhanski/chrome_tFDLOo4N4C.png]
    - do: выбрать из саджеста искомую улицу
    - do: заполнить поле с номером дома и нажать 'Сохранить'
    - assert: с анимацией слева направо закрылась страница для ввода нового адреса и отображается страница оформления заказа
    - assert: в блоке 'Адрес доставки' отображается два адреса и выбран только что добавленный [https://jing.yandex-team.ru/files/skurhanski/chrome_wltze03tVQ.png]
    - do: нажать 'Отправить'
    - assert: появилось страница с сообщением о том, что заказ успешно отправлен
  Изменение адреса:
    - automation: SERPTEST-1719
    - do: заполнить все незаполненные поля в блоке 'Получатель' произвольными корректными данными
    - do: если выбран тип доставки не курьером, то выбрать Курьером
    - do: заполнить все незаполненные поля в блоке 'Адрес доставки' произвольными корректными данными и нажать 'Отправить'
    - do: вернуться к списку товаров и добавить любой товар в корзину
    - do: перейти в корзину и нажать кнопку "Оформить заказ"
    - assert: произошел переход к оформлению заказа
    - assert: в блоке адрес доставки сохранен и выбран ранее введенный адрес [https://jing.yandex-team.ru/files/skurhanski/chrome_nbrzHYUkds.png]
    - do: нажать по ссылке 'Изменить'
    - assert: с анимацией справа налево открылась страница для редактирования адреса [https://jing.yandex-team.ru/files/skurhanski/chrome_pD9TqSoYH9.png]
    - do: изменить все поля новыми данными и нажать 'Сохранить'
    - assert: отображается страница оформления заказа
    - assert: в блоке 'Адрес доставки' отсутствует старый адрес доставки и выбран адрес, который соответствует отредактированным данным
    - do: нажать 'Отправить'
    - assert: появилось страница с сообщением о том, что заказ успешно отправлен
  Удаление адреса:
    - automation: SERPTEST-1719
    - do: заполнить все незаполненные поля в блоке 'Получатель' произвольными корректными данными
    - do: если выбран тип доставки не курьером, то выбрать Курьером
    - do: заполнить все незаполненные поля в блоке 'Адрес доставки' произвольными корректными данными и нажать 'Отправить'
    - do: вернуться к списку товаров и добавить любой товар в корзину
    - do: перейти в корзину и нажать кнопку "Оформить заказ"
    - assert: произошел переход к оформлению заказа
    - assert: в блоке адрес доставки сохранен и выбран ранее введенный адрес
    - do: нажать по ссылке 'Изменить'
    - assert: с анимацией справа налево открылась страница для редактирования адреса
    - do: нажать на иконку удаления адреса
    - assert: появился предупреждающий попап [https://jing.yandex-team.ru/files/skurhanski/chrome_njkp0swpuZ.png]
    - do: нажать 'Нет'
    - assert: попап закрылся, адрес не удалился
    - do: снова нажать на иконку удаления адреса
    - do: в предупреждающем попапе нажать 'Да'
    - assert: с анимацией слева направо закрылась страница для редактирования адреса и отображается страница оформления заказа
    - assert: на странице оформления заказа отсутствуют сохраненные адреса и отображается форма для ввода адреса доставки [https://jing.yandex-team.ru/files/skurhanski/chrome_i9Xw3XuNKa.png]
    - assert: в поле для ввода города указан город удаленного адреса
  Изменение адреса из списка:
    - automation: SERPTEST-1719
    - do: заполнить все незаполненные поля в блоке 'Получатель' произвольными корректными данными
    - do: если выбран тип доставки не курьером, то выбрать Курьером
    - do: заполнить все незаполненные поля в блоке 'Адрес доставки' произвольными корректными данными и нажать 'Отправить'
    - do: вернуться к списку товаров и добавить любой товар в корзину
    - do: перейти в корзину и нажать кнопку "Оформить заказ"
    - do: нажать по ссылке 'Добавить новый адрес'
    - do: указать новый адрес доставки (в т.ч. и новый город) и нажать 'Сохранить'
    - assert: осуществился переход на страницу оформления заказа
    - assert: в блоке 'Адрес доставки' отображается два адреса и выбран только что добавленный
    - do: в первом добавленном адресе, который не выбран, нажать 'Изменить'
    - assert: открылась страница для редактирования адреса
    - do: изменить все поля новыми данными (город тоже указать отличный от первых двух адресов) и нажать 'Сохранить'
    - assert: отображается страница оформления заказа
    - assert: в блоке 'Адрес доставки' отображается два адреса и выбран только что измененный
    - do: нажать 'Отправить'
    - assert: появилось страница с сообщением о том, что заказ успешно отправлен
  Удаление адреса с одинаковыми городами из списка:
    - automation: SERPTEST-1719
    - do: заполнить все незаполненные поля в блоке 'Получатель' произвольными корректными данными
    - do: если выбран тип доставки не курьером, то выбрать Курьером
    - do: заполнить все незаполненные поля в блоке 'Адрес доставки' произвольными корректными данными и нажать 'Отправить'
    - do: вернуться к списку товаров и добавить любой товар в корзину
    - do: перейти в корзину и нажать кнопку "Оформить заказ"
    - do: нажать по ссылке 'Добавить новый адрес'
    - do: указать новый адрес доставки (город оставить в соответствии с первым адресом) и нажать 'Сохранить'
    - assert: осуществился переход на страницу оформления заказа
    - assert: в блоке 'Адрес доставки' отображается два адреса и выбран только что добавленный
    - do: в только что добавленном адресе, который выбран, нажать 'Изменить'
    - assert: открылась страница для редактирования адреса
    - do: удалить адрес
    - assert: осуществился возврат на страницу оформления заказа
    - assert: в блоке 'Адрес доставки' отображается один адрес и он выбран
    - do: нажать 'Отправить'
    - assert: появилось страница с сообщением о том, что заказ успешно отправлен
  Удаление адреса с разными городами из списка:
    - automation: SERPTEST-1719
    - do: заполнить все незаполненные поля в блоке 'Получатель' произвольными корректными данными
    - do: если выбран тип доставки не курьером, то выбрать Курьером
    - do: заполнить все незаполненные поля в блоке 'Адрес доставки' произвольными корректными данными и нажать 'Отправить'
    - do: вернуться к списку товаров и добавить любой товар в корзину
    - do: перейти в корзину и нажать кнопку "Оформить заказ"
    - do: нажать по ссылке 'Доавить Новый адрес'
    - do: указать новый адрес доставки (в т.ч. и новый город) и нажать 'Сохранить'
    - assert: осуществился переход на страницу оформления заказа
    - assert: в блоке 'Адрес доставки' отображается два адреса и выбран только что добавленный
    - do: в только что добавленном адресе, который выбран, нажать 'Изменить'
    - assert: открылась страница для редактирования адреса
    - do: удалить адрес
    - assert: осуществился возврат на страницу оформления заказа
    - assert: в блоке 'Адрес доставки' отображается один адрес и он выбран
    - do: нажать 'Отправить'
    - assert: появилось страница с сообщением о том, что заказ успешно отправлен
  Выбор адреса из списка:
    - automation: SERPTEST-1719
    - do: заполнить все незаполненные поля в блоке 'Получатель' произвольными корректными данными
    - do: если выбран тип доставки не курьером, то выбрать Курьером
    - do: заполнить все незаполненные поля в блоке 'Адрес доставки' произвольными корректными данными и нажать 'Отправить'
    - do: вернуться к списку товаров и добавить любой товар в корзину
    - do: перейти в корзину и нажать кнопку "Оформить заказ"
    - do: нажать по ссылке 'Добавить новый адрес'
    - do: указать новый адрес доставки (в т.ч. и новый город) и нажать 'Сохранить'
    - assert: осуществился переход на страницу оформления заказа
    - assert: в блоке 'Адрес доставки' отображается два адреса и выбран только что добавленный
    - do: выбрать другой адрес в списке
    - assert: выбран другой адрес
    - do: нажать 'Отправить'
    - assert: появилось страница с сообщением о том, что заказ успешно отправлен
  Отмена изменений:
    - automation: SERPTEST-1719
    - do: заполнить все незаполненные поля в блоке 'Получатель' произвольными корректными данными
    - do: если выбран тип доставки не курьером, то выбрать Курьером
    - do: заполнить все незаполненные поля в блоке 'Адрес доставки' произвольными корректными данными и нажать 'Отправить'
    - do: вернуться к списку товаров и добавить любой товар в корзину
    - do: перейти в корзину и нажать кнопку "Оформить заказ"
    - do: нажать по ссылке 'Добавить новый адрес'
    - do: указать новый адрес доставки (в т.ч. и новый город) и нажать 'Сохранить'
    - assert: осуществился переход на страницу оформления заказа
    - assert: в блоке 'Адрес доставки' отображается два адреса и выбран только что добавленный
    - do: в первом добавленном адресе, который не выбран, нажать 'Изменить'
    - assert: открылась страница для редактирования адреса
    - do: изменить любые данные, но не сохранять изменения
    - do: вернуться назад
    - assert: на странице оформления заказа адрес не изменился, но оказался первым в списке и активным (адрес выбран)
    - do: нажать 'Отправить'
    - assert: появилось страница с сообщением о том, что заказ успешно отправлен
  Адрес не из саджеста:
    - automation: SERPTEST-1719
    - do: ввести произвольные данные в полях раздела Получатель
    - do: если выбран тип доставки не курьером, то выбрать Курьером
    - do: в разделе 'Адрес доставки' в поле 'Улица' ввести строку 'qwerty1234'
    - do: заполнить оставшиеся поля адреса произвольными данными и нажать 'Отправить'
    - assert: появилось страница с сообщением о том, что заказ успешно отправлен
    - do: вернуться к списку товаров и добавить любой товар в корзину
    - do: перейти в корзину и нажать кнопку "Оформить заказ"
    - assert: произошел переход к оформлению заказа
    - assert: в блоке адрес доставки сохранен и выбран ранее введенный адрес
    - do: нажать по ссылке 'Изменить'
    - assert: открылась страница для редактирования адреса
    - assert: указать другой город, выбрав его из саджеста
    - do: в качестве названия улицы указать 'йцукен1234', изменить оставшиеся поля новыми данными и нажать 'Сохранить'
    - assert: отображается страница оформления заказа
    - assert: в блоке 'Адрес доставки' отсутствует старый адрес доставки и выбран адрес, который соответствует отредактированным данным
    - do: нажать 'Отправить'
    - assert: появилось страница с сообщением о том, что заказ успешно отправлен

files: []

v-team: Turbo

tlds: ru

tags:
  - ecom-tap
  - no_assessors # пока исключу из запусков, экспы не активны
