feature: Эмбед

specs:
  aliases:
    - &embedAutoLoadedCheck
      - tech: Проверка серверного счетчика (/turbo/embed/loaded)
      - tech: Проверка серверного счетчика (/turbo/embed/failed)
      - do: Проскролить до каждого эмбеда и дождаться загрузки
      - tech: Проверка клиентского счетчика (/turbo/embed/loaded)
    - &embedAssertLoadedCheck
      - assert: Вместо блока загрузки появился блок с данными
    - &embedAssertError
      - assert: Блок загрузки схлопнулся

  default-src:
    Загрузка:
      - do: открыть ссылку https://yandex.ru/turbo?stub=embed/default-src.json
      - *embedAutoLoadedCheck
      - *embedAssertLoadedCheck

    Схлопывается при ошибке:
      - do: открыть ссылку https://yandex.ru/turbo?stub=embed/default-src-error.json
      - *embedAssertError

    Проверка подписи под эмбедом:
      - do: открыть ссылку https://yandex.ru/turbo?stub=embed/default-src.json
      - assert: подпись для эмбеда отрисовалась
      - screenshot: внешний вид соответствует скриншоту [caption]
      - do: нажать на ссылку в подписи
      - assert: ccылка с адресом http://glassmoon.ru/ открылась в новой вкладке

files:
  - platform/components/Embed/__tests__/embed.hermione.js

v-team: Turbo

manager: tanzwuta

qa-engineer: olga0321, dakhetov

tlds: none
