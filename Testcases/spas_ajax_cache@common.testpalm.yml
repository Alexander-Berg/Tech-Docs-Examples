feature: СПАС
experiment: Кеширование аякс запросов

params:
  exp_flags: 'spas_ajax_cache=1'

specs:
  При backward навигации:
    - do: получить выдачу по запросу 'яндекс'
    - assert: выдача появилась
    - tech: выполнить в консоли `BEM.blocks['serp-request'].navigateTo('?text=погода')`
    - assert: выдача перезагрузилась
    - tech: выполнить в консоли `BEM.blocks['serp-request'].navigateTo('?text=погода в москве')`
    - assert: выдача перезагрузилась
    - do: нажать кнопку "назад" в браузере
    - assert: выдача перезагрузилась
  При backward навигации без учета extra-content в кеше:
    - do: получить выдачу по запросу 'яндекс'
    - assert: выдача появилась
    - tech: выполнить в консоли `BEM.blocks['serp-request'].navigateTo('?text=погода')`
    - assert: выдача перезагрузилась
    - tech: выполнить в консоли `BEM.blocks['serp-request'].navigateTo('?text=казань')`
    - assert: выдача перезагрузилась
    - do: нажать кнопку "назад" в браузере
    - assert: выдача перезагрузилась

files:
  - features/spas_ajax_cache/spas_ajax_cache@common.hermione.js

tags:
  - skip_e2e_check
  - no_assessors

tlds: all

v-team: SPAS
