feature: Добавление в чат по инвайт линке

specs:

    Можно добавить собеседника в групповой чат по ссылке[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, можно авторизоваться в другом браузере\инкогнито-окне)
              Есть групповой чат, в котором пользователь Б администратор, нет пользователя А и в настройках чата включен «Публичная ссылка»
              Между пользователем А и Б есть любой другой чат
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь Б, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт
        - do: Нажать по шапке чата
        - assert: |
              Открылось окно управления чатом
              Есть кнопка "Скопировать ссылку"
        - do: Нажать кнопку "Скопировать ссылку"
        - assert: Появилось сообщение "Ссылка скопирована"
        - do: Открыть чат с пользователем А
        - assert: Открылось окно чата
        - do: Вставить ссылку из буфера обмена и отправить ее в чат с пользователем А
        - assert: Сообщение отправилось и отображается в окне чата
        - do: Пользователем А зайти в чат с инвайт ссылкой от пользователя Б
        - assert: Открылось окно чата, в нем отображается сообщение с инвайт ссылкой от пользователя Б
        - do: Нажать на ссылку в сообщении
        - assert: |
              Произошел переход в том же окне в групповой чат, созданный пользователем Б
              Доступна кнопка “Присоединиться”
        - do: Нажать на кнопку "Присоединиться"
        - assert: |
              Пользователь присоединился к чату
              Появилась панель ввода
              Доступна отправка сообщений

    При выключении и включении обратно публичной ссылки, ссылка обновляется, по старой публичной ссылке нельзя добавиться в чат[manual]:
        - tags: [b2b]
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, можно авторизоваться в другом браузере\инкогнито-окне)
              Есть групповой чат, в котором пользователь Б администратор, нет пользователя А и в настройках чата включен «Публичная ссылка»
              между пользователем А и Б есть любой другой чат
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь Б, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт
        - do: Нажать по шапке чата
        - assert: |
              Открылось окно управления чатом
              Есть кнопка "Скопировать ссылку"
        - do: Нажать кнопку "Скопировать ссылку"
        - assert: Появилось сообщение "Ссылка скопирована"
        - do: Нажать на кнопку "Настройки чата"
        - assert: |
              Открыты настройки канала
              Ползунок "Публичная ссылка" включен
              Есть кнопка "Скопировать ссылку"
              Есть кнопка "Обновить ссылку"
        - do: Нажать кнопку "Обновить ссылку"
        - assert: Адрес ссылки поменялся
        - do: Зайти в чат с пользователем А
        - assert: Открылось окно чата
        - do: Вставить ссылку из буфера обмена и отправить ее в чат с пользователем А
        - assert: Сообщение отправилось и отображается в окне чата
        - do: Пользователем А зайти в чат с инвайт ссылкой от пользователя Б
        - assert: Открылось окно чата, в нем отображается сообщение с инвайт ссылкой от пользователя Б
        - do: Нажать на ссылку в сообщении
        - assert: |
              Появился тост с ошибкой "не удалось присоедениться к чату"
              Открыт список чатов

    Можно добавиться в чат по новой публичной ссылке, которая была сформирована после того как публичную ссылку выключили и включили [manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, можно авторизоваться в другом браузере\инкогнито-окне)
              Есть групповой чат, в котором пользователь Б администратор, нет пользователя А и в настройках чата включен переключатель "Публичная ссылка"
              между пользователем А и Б есть любой чат
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь Б, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт
        - do: Нажать на шапку чата
        - assert: |
              Открылось окно управления чатом
              Есть кнопка "Скопировать ссылку"
        - do: Нажать на кнопку "Настройки чата"
        - assert: |
              Открыты настройки канала
              Ползунок "Публичная ссылка" включен
              Есть кнопка "Скопировать ссылку"
              Есть кнопка "Обновить ссылку"
        - do: Нажать на переключатель "Публичная ссылка" и нажать кнопку "Сохранить"
        - assert: |
              Открыта карточка чата
              В карточке чата отсутствует кнопка "Скопировать ссылку"
        - do: Нажать на кнопку "Настройки чата"
        - assert: |
              Открыты настройки канала
              Ползунок "Публичная ссылка" выключен
              Нет кнопок "Скопировать ссылку" и "Обновить ссылку"
        - do: Нажать на переключатель "Публичная ссылка" и нажать кнопку "Сохранить"
        - assert: |
              Открыта карточка чата
              В карточке чата есть кнопка "Скопировать ссылку"
        - do: Нажать "Скопировать ссылку"
        - assert: Появилось сообщение "Ссылка скопирована"
        - do: Открыть чат с пользователем А
        - assert: Открылось окно чата
        - do: Вставить ссылку из буфера обмена и отправить ее в чат с пользователем А
        - assert: Сообщение отправилось и отображается в окне чата
        - do: Пользователем А зайти в чат с инвайт ссылкой от пользователя Б
        - assert: Открылось окно чата, в нем отображается сообщение с инвайт ссылкой от пользователя Б
        - do: Нажать на ссылку в сообщении
        - assert: |
              Произошел переход в том же окне в групповой чат, созданный пользователем Б
              Доступна кнопка “Присоединиться”
        - do: Нажать кнопку "Присоединиться"
        - assert: |
              Появилась панель ввода
              Доступна отправка сообщений

    При выключении тумблера для создания публичной ссылки  последняя активная ссылка отзывается и по ней нельзя добавиться в чат[manual]:
        - tags: [advanced_smoke, b2b]
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, можно авторизоваться в другом браузере\инкогнито-окне)
              Есть групповой чат, в котором пользователь Б администратор, нет пользователя А и в настройках чата включен переключатель "Публичная ссылка"
              Между пользователем А и Б есть любой чат
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь Б, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт
        - do: Нажать на шапку чата
        - assert: |
              Открылось окно управления чатом
              Есть кнопка "Скопировать ссылку"
        - do: Нажать на кнопку "Скопировать ссылку"
        - assert: Появилось сообщение "Ссылка скопирована"
        - do: Нажать на кнопку "Настройки чата"
        - assert: |
              Открыты настройки канала
              Ползунок "Публичная ссылка" включен
              Есть кнопка "Скопировать ссылку"
              Есть кнопка "Обновить ссылку"
        - do: Выключить переключатель “Публичная ссылка” и нажать кнопку "Сохранить"
        - assert: |
              Открыта карточка чата
              В карточке чата отсутствует кнопка "Скопировать ссылку"
        - do: Открыть чат с пользователем А
        - assert: Открылось окно чата
        - do: Вставить ссылку из буфера обмена и отправить ее в чат с пользователем А
        - assert: Сообщение отправилось и отображается в окне чата
        - do: Пользователем А зайти в чат с инвайт ссылкой от пользователя Б
        - assert: Открылось окно чата, в нем отображается сообщение с инвайт ссылкой от пользователя Б
        - do: Нажать на ссылку в сообщении
        - assert: |
              Появился тост с ошибкой "Не удалось присоедениться к чату"
              Открыт список чатов

    При переходе из стороннего приложения по публичной ссылке в браузере открывается окно чата куда нас приглашают[manual]:
        - tags: [advanced_smoke, b2b]
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) авторизован в браузере и пользователь Б (вспомогательный, можно авторизоваться в другом браузере\инкогнито-окне)
              Есть групповой чат, в котором пользователь Б администратор, нет пользователя А (и ранее пользователь в этом чате не состоял) и в настройках чата включен переключатель "Публичная ссылка"
              Между пользователем А и Б есть любой чат
              Действия обоими пользователями проводим в одном браузере
              Первым в браузере залогинен пользователь Б
              Для десктопного приложения данный тест-кейс неактуален
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь Б, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт
        - do: Нажать на шапку чата
        - assert: |
              Открылось окно управления чатом
              Есть кнопка "Скопировать ссылку"
        - do: Нажать на кнопку "Скопировать ссылку"
        - assert: Появилось сообщение "Ссылка скопирована"
        - do: Пользователем Б разлогиниться из чата и залогиниться пользоваелем А
        - assert: Открыт список чатов пользователя А
        - do: Переключиться на любое другое приложение, в которое можно вставить текст (почта, сторонний мессенджер...)
        - assert: Открылось стороннее приложение, в котором есть поле ввода и можно сохранить/отправить текст
        - do: Вставить ранее скопированную ссылку в стороннее приложение и отправить ее
        - assert: В приложении появилась отправленная активная ссылка по которой можно перейти
        - do: Нажать на инвайтссылку в открытом окне. (на мобильном устройстве выбрать приложение для открытия ссылки - проверяемый браузер, в котором залогинен пользователь А)
        - assert: |
              Открылось новое окно браузера, с активным чатом на который вела ссылка
              Доступна кнопка "Присоедениться"

    После обновления ссылки в чат можно попасть по прямому приглашению[manual]:
        - tags: [advanced_smoke]
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, можно авторизоваться в другом браузере\инкогнито-окне)
              Есть групповой чат, в котором пользователь А администратор, нет пользователя Б и в настройках чата включен переключатель "Публичная ссылка"
              Между пользователем А и Б есть любой чат
              Пользователь Б должен быть в контакт-листе пользователя А
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь А, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт.
        - do: Нажать на шапку чата
        - assert: |
              Открылось окно управления чатом
              Есть кнопка "Скопировать ссылку"
        - do: Нажать на кнопку "Настройки чата"
        - assert: |
              Открыты настройки канала
              Ползунок "Публичная ссылка" включен
              Есть кнопка "Скопировать ссылку"
              Есть кнопка "Обновить ссылку"
        - do: Нажать на кнопку "Обновить ссылку"
        - assert: Адрес ссылки поменялся
        - do: Нажать кнопку "Сохранить"
        - assert: |
              Открыта карточка чата
              В карточке чата есть кнопка "Скопировать ссылку"
        - do: Нажать на блок "Участники"
        - assert: Открывается блок участники
        - do: Нажать на кнопку "Добавить участников"
        - assert: Открывается страница "Добавить участников" со списком контактов
        - do: Найти в списке контактов пользователя Б и выбрать его
        - assert: Логин пользователя перенесся в поле "добавленные участники"
        - do: Нажать кнопку "Добавить"
        - assert: |
              Окно настроек чата закрылось
              Участник Б добавился в чат
        - do: Под пользователем Б открыть список чатов
        - assert: В списке чатов есть групповой чат с пользователем А из description

    Не удаляются собеседники пришедшие по инвайт линке, если добавить любого собеседника в чат[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, можно авторизоваться в другом браузере\инкогнито-окне)
              Есть групповой чат, в котором пользователь А администратор, в настройках чата включен переключатель "Публичная ссылка"
              В чате есть пользователь Б добавленый в чат по инвайт ссылке
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь А, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт.
        - do: Нажать на шапку чата
        - assert: |
              Открылось окно управления чатом
              Есть кнопка "Скопировать ссылку"
        - do: Нажать на блок "Участники"
        - assert: Открывается блок участники
        - do: Нажать на кнопку "Добавить участников"
        - assert: Открывается страница "Добавить участников" со списком контактов
        - do: Выбрать любого пользователя кроме А и Б, нажать "Добавить"
        - assert: |
              Окно со списком контактов закрылось
              В чате появился выбранный пользователь
        - do: Пользователем Б открыть чат из description
        - assert: |
              Панель ввода доступна
              Пользователь Б не исключен из чата

    Не удаляются собеседники пришедшие по инвайт линке, если удалить любого собеседника из чата[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, можно авторизоваться в другом браузере\инкогнито-окне)
              Есть групповой чат, в котором пользователь А администратор, в настройках чата включен переключатель "Публичная ссылка"
              В чате есть пользователь Б добавленый в чат по инвайт ссылке
              Есть любой другой участник в этом чате
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь А, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт
        - do: Нажать на шапку чата
        - assert: |
              Открылось окно управления чатом
              Есть кнопка "Скопировать ссылку"
              Есть блок "Участники"
        - do: Нажать на блок "Участники"
        - assert: Открыт блок участники
        - do: Нажать по трем точкам справа у контакта любого другого пользователя, кроме А и Б
        - assert: |
              Открылось контекстное меню
              Есть пункты “Сделать администратором” и “Удалить из чата”
        - do: Нажать кнопку "Удалить из группы" и подтвердить выбор нажатием "ОК" в появившемся всплывающем окошке
        - assert: Пользователь удалится из списка участников
        - do: Пользователем Б открыть час из description
        - assert: |
              Панель ввода доступна
              Пользователь Б не исключен из чата

    Собеседники пришедшие по инвайт линке отображаются в карточке чата[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, можно авторизоваться в другом браузере\инкогнито-окне)
              Есть групповой чат, в котором пользователь Б администратор, пользователь А присоеденен по инвайт ссылке
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь А, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт
        - do: Нажать на шапку чата
        - assert: |
              Открылось окно управления чатом
              Есть кнопка "Скопировать ссылку"
              Есть блок "Участники"
        - do: Нажать на "Участники"
        - assert: |
              Открыт блок участники
              В блоке отображаются участники, в том числе пользователь А, присоеденившийся к чату по инвайт ссылке

    Администратор может удалить собеседника, пришедшего по инвайт линке[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, можно авторизоваться в другом браузере\инкогнито-окне)
              Есть групповой чат, в котором пользователь А администратор, пользователь Б добавлен по публичной ссылке
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь А, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт
        - do: Нажать на шапку чата
        - assert: |
              Открылось окно управления чатом
              Есть кнопка "Скопировать ссылку"
              Есть блок "Участники"
        - do: Нажать на "Участники"
        - assert: Открыт блок участники
        - do: Нажать на три точки справа у контакта пользователя Б
        - assert: |
              Открылось контекстное меню
              Есть пункты "Сделать администратором" и "Удалить из чата"
        - do: Нажать кнопку "Удалить из чата" и подтвердить выбор нажатием "ОК" в появившемся всплывающем окошке
        - assert: Пользователь Б исчез из списка участников
        - do: Пользователем Б открыть окно чатов
        - assert: |
              Если пользователь Б был в окне группового чат из description, то панель ввода сменилась на кнопку "Присоединиться"
              Если был открыт список чатов или закрыт браузер, то чат из description пропал из списка чатов

    Собеседника, пришедшего по инвайт линке, можно назначить администратором[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, можно авторизоваться в другом браузере\инкогнито-окне)
              Есть групповой чат, в котором пользователь А администратор, пользователь Б добавлен по публичной ссылке
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь А, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт
        - do: Нажать на шапку чата
        - assert: |
              Открылось окно управления чатом
              Есть кнопка "Скопировать ссылку"
              Есть блок "Участники"
        - do: Нажать на "Участники"
        - assert: Открыт блок "Участники"
        - do: Нажать на три точки справа у контакта пользователя Б
        - assert: |
              Открылось контекстное меню
              Есть пункты "Сделать администратором" и "Удалить из чата"
        - do: Нажать по кнопке “Сделать администратором”
        - assert: |
              Контекстное меню закрылось
              Пользователь Б отображается в блоке Администраторы
        - do: Пользователем Б открыть блок "Участники" в данном чате
        - assert: Пользователь Б отображается в блоке Администраторы

    Собеседники, пришедшие по инвайт линке, но не присоединившиеся к чату, не могут напрямую приглашать участников[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, можно авторизоваться в другом браузере\инкогнито-окне)
              есть групповой чат, в котором пользователь Б администратор, нет пользователя А и в настройках чата включен «Публичная ссылка»
              между пользователем А и Б есть любой другой чат
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь Б, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт
        - do: Нажать по шапке чата
        - assert: |
              Открылось окно управления чатом
              Есть кнопка "Скопировать ссылку"
        - do: Нажать кнопку "Скопировать ссылку"
        - assert: Появилось сообщение "Ссылка скопирована"
        - do: Открыть чат с пользователем А
        - assert: Открылось окно чата
        - do: Вставить ссылку из буфера обмена и отправить ее в чат с пользователем А
        - assert: Сообщение отправилось и отображается в окне чата
        - do: Пользователем А зайти в чат с инвайт ссылкой от пользователя Б
        - assert: Открылось окно чата, в нем отображается сообщение с инвайт ссылкой от пользователя Б
        - do: Нажать на ссылку в сообщении
        - assert: |
              Произошел переход в том же окне в групповой чат, созданный пользователем Б
              Доступна кнопка “Присоединиться”
        - do: Не нажимая кнопку "Присоедениться" нажать на шапку чата
        - assert: |
              Открылось окно "Информация о чате"
              Есть блок "Участники"
        - do: Открыть блок "Участники"
        - assert: |
              Открыт блок участники
              Отсутствует кнопка "Добавить участников"

    При переходе из стороннего приложения по неактивной публичной ссылкe выводится ошибка присоединения[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, можно авторизоваться в другом браузере\инкогнито-окне)
              Есть групповой чат, в котором пользователь Б администратор, нет пользователя А и в настройках чата включен переключатель "Публичная ссылка"
              Между пользователем А и Б есть любой чат
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь Б, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт
        - do: Нажать на шапку чата
        - assert: |
              Открылось окно управления чатом
              Есть кнопка "Скопировать ссылку"
        - do: Нажать на кнопку "Скопировать ссылкут"
        - assert: Появилось сообщение "Ссылка скопирована"
        - do: Нажать на "Настройки чата"
        - assert: |
              Открыты настройки чата
              Включен ползунок "Публичная ссылка"
              Есть кнопки "Скопировать ссылку" и "Обновить ссылку"
        - do: Выключить переключатель “Публичная ссылка” и нажать кнопку "Сохранить"
        - assert: |
              Открыта карточка чата
              В карточке чата отсутствует кнопка "Скопировать ссылку"
        - do: Пользователем Б разлогиниться из чата и залогиниться пользователем А
        - assert: Открыт список чатов пользователя А
        - do: Переключиться на любое другое приложение, в которое можно вставить текст (почта, сторонний мессенджер...).
        - assert: Открылось стороннее приложение, в котором есть поле ввода и можно сохранить/отправить текст
        - do: Вставить ранее скопированную ссылку в стороннее приложение и отправить ее
        - assert: В приложении появилась отправленная активная ссылка по которой можно перейти
        - do: Нажать на инвайтссылку в открытом окне. (на мобильном устройстве выбрать приложение для открытия ссылки - проверяемый браузер, в котором залогинен пользователь А)
        - assert: |
              Появился тост с ошибкой "не удалось присоедениться к чату"

    Можно присоединиться по публичной ссылке, сформированной другим клиентом (Яндекс.чаты десктоп) на той же ОС[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, в приложении Яндекс.чаты десктоп)
              Есть групповой чат, в котором пользователь Б администратор, нет пользователя А и в настройках чата включен переключатель "Публичная ссылка"
              между пользователем А и Б есть любой чат, куда пользователем Б отправлена инвайт ссылка на групповой чат, описанный выше
              Ссылку необходимо отправить с другого клиента, например с (Яндекс.чаты десктоп)
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Пользователем А зайти в чат с инвайт ссылкой от пользователя Б
        - assert: Открылось окно чата, в нем отображается сообщение с инвайт ссылкой от пользователя Б
        - do: Открыть инвайт сслыку
        - assert: |
              Произошел переход в том же окне в групповой чат, созданный пользователем Б
              Доступна кнопка “Присоединиться”
        - do: Нажать кнопку "Присоединиться"
        - assert: |
              Появилась панель ввода
              Доступна отправка сообщений

    Можно присоединиться к чату по публичной ссылке, перейдя по ссылки, через адресную строку браузера[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, в приложении Яндекс.чаты десктоп)
              Есть групповой чат, в котором пользователь Б администратор, нет пользователя А и в настройках чата включен переключатель "Публичная ссылка"
              между пользователем А и Б есть любой чат, куда пользователем Б отправлена инвайт ссылка на групповой чат, описанный выше
              Ссылку необходимо отправить с другого клиента, например с (Яндекс.чаты десктоп)
              Данный тест-кейс неактуален для десктопного приложения
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Пользователем А зайти в чат с инвайт ссылкой от пользователя Б
        - assert: Открылось окно чата, в нем отображается сообщение с инвайт ссылкой от пользователя Б
        - do: Пользователем А скопировать ссылку из d**escription**
        - assert: Ссылка была скопирована
        - do: Открыть новую вкладку в барузере и вставить в адресную строку ранее скопированную ссылку
        - assert: Ранее скопированная ссылка вставлена в адресную строку барузера
        - do: Перейти на эту страницу
        - assert: |
              В этой же вкладке открылся мессенджер
              Открыто окно группового чата из **description**
              Доступна кнопка “Присоединиться”
        - do: Нажать кнопку "Присоединиться"
        - assert: |
              Появилась панель ввода
              Доступна отправка сообщений

#     Можно присоединиться к чату по ссылку скопированной в адресной строке, перейдя по ссылки, через адресную строку браузера[manual]:
#         - automation: MSSNGRFRONT-5023
#         - description: |
#               Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, в приложении Яндекс.чаты десктоп)
#               Есть групповой чат, в котором пользователь Б администратор, нет пользователя А и в настройках чата включен переключатель "Публичная ссылка"
#               между пользователем А и Б есть любой чат, куда пользователем Б отправлена ссылка скопированная с адреснной строки браузера, когда групповой чат описанный выше октрыт
#               Ссылку необходимо отправить с другого клиента, например с (Яндекс.чаты десктоп)
#               Данный тест-кейс неактуален для десктопного приложения
#               **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
#         - do: Пользователем А зайти в чат с инвайт ссылкой от пользователя Б
#         - assert: Открылось окно чата, в нем отображается сообщение с ссылкой от пользователя Б
#         - do: Пользователем А скопировать ссылку из d**escription**
#         - assert: Ссылка была скопирована
#         - do: Открыть новую вкладку в барузере и вставить в адресную строку ранее скопированную ссылку
#         - assert: Ранее скопированная ссылка вставлена в адресную строку барузера
#         - do: Перейти на эту страницу
#         - assert: |
#               В этой же вкладке открылся мессенджер
#               Открыто окно группового чата из **description**
#               Доступна кнопка “Присоединиться”
#         - do: Нажать кнопку "Присоединиться"
#         - assert: |
#               Появилась панель ввода
#               Доступна отправка сообщений

    Открывается окно чата и фокус ставится в поле ввода если перейти в чат по ссылке через адресную строку браузера[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              У авторизованного пользователя в списке чатов есть групповой чат в настройках которого включен переключатель "Публичная ссылка"
              Данный тест-кейс неактуален для десктопного приложения
        - do: Открыть чат из **description**
        - assert: Открылось окно чата из **description**
        - do: Скопировать текущую ссылку в адресной строке браузера
        - assert: Ссылка была скопирована
        - do: Открыть новую вкладку в барузере и вставить в адресную строку ранее скопированную ссылку
        - assert: Ранее скопированная ссылка вставлена в адресную строку барузера
        - do: Перейти на эту страницу
        - assert: |
              В этой же вкладке открылся мессенджер
              Открыто окно группового чата из **description**
              Фокус курсора вставлен в поле ввода

    Можно присоединиться по публичной ссылке, сформированной клиентом на другой ОС (iOS/Android)[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, в приложении Яндекс.Чаты (iOS/Android))
              Есть групповой чат, в котором пользователь Б администратор, нет пользователя А и в настройках чата включен переключатель "Публичная ссылка"
              Между пользователем А и Б есть любой чат, куда пользователем Б отправлена инвайт ссылка на групповой чат, описанный выше
              Ссылку необходимо отправить с другого клиента, например с Яндекс.Чаты (iOS/Android)
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Пользователем А зайти в чат с инвайт ссылкой от пользователя Б
        - assert: Открылось окно чата, в нем отображается сообщение с инвайт ссылкой от пользователя Б
        - do: Открыть инвайт сслыку
        - assert: |
              Произошел переход в том же окне в групповой чат, созданный пользователем Б
              Доступна кнопка “Присоединиться”
        - do: Нажать кнопку "Присоединиться"
        - assert: |
              Появилась панель ввода
              Доступна отправка сообщений

    Можно повторно присоединиться к чату по публичной ссылке[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, можно авторизоваться в другом браузере\инкогнито-окне)
              Есть групповой чат, в котором пользователь Б администратор, пользователь А добавлен по инвайт ссылке
              Между пользователем А и Б есть любой чат, куда пользователем Б отправлена инвайт ссылка на групповой чат, описанный выше
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Под пользователем А открыть браузер и зайти в чат из description
        - assert: Открывается чат из description
        - do: Нажать на три точки в правом верхнем углу чата и выбрать "Покинуть чат" и подтвердить нажатием "Ок" на всплывающем окне.
        - assert: Вместо поля ввода появилась кнопка "Присоединитьсяf"
        - do: Пользователем А зайти в чат из description с инвайт ссылкой от пользователя Б
        - assert: Открыт чат с ссылкой от пользователя Б
        - do: Перейти по ссылке
        - assert: |
              Произошел переход в групповой чат из description
              Есть кнопка "Присоедениться"
        - do: Нажать кнопку "Присоедениться"
        - assert: |
              Появилась панель ввода
              Доступна отправка сообщений

    Переход из стороннего приложения по публичной ссылке проходит корректно при возобновлении интернета[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, можно авторизоваться в другом браузере\инкогнито-окне)
              Есть групповой чат, в котором пользователь Б администратор, нет пользователя А и в настройках чата включен переключатель "Публичная ссылка"
              Между пользователем А и Б есть любой чат
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь Б, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт
        - do: Нажать на шапку чата
        - assert: |
              Открылось окно управления чатом
              Есть кнопка "Скопировать ссылку"
        - do: Нажать на кнопку "Скопировать ссылку"
        - assert: Появилось сообщение "Ссылка скопирована"
        - do: Пользователем Б разлогиниться из чата и залогиниться пользователем А
        - assert: Открыт список чатов пользователя А
        - do: Переключиться на любое другое приложение, в которое можно вставить текст (почта, сторонний мессенджер...).
        - assert: Открылось стороннее приложение, в котором есть поле ввода и можно сохранить/отправить текст
        - do: Вставить ранее скопированную ссылку в стороннее приложение и отправить ее.
        - assert: В приложении появилась отправленная активная ссылка по которой можно перейти
        - do: Отключить на устройстве сеть(выключить вайфай\вытащить эзернет кабель и тп.)
        - assert: Соединение с интернетом выключено.
        - do: Нажать на инвайтссылку в открытом окне. (на мобильном устройстве выбрать приложение для открытия ссылки - проверяемый браузер, в котором залогинен пользователь А)
        - assert: |
              Открылось новое окно браузера
              Ошибка "Нет подключения к интернету"
              Страница чатов не открыта
        - do: Включить сеть на устройстве
        - assert: |
              Появилось соединение с интернетом
              В шапке чата появилось название чата и количество участников
              В окне чата подгрузилась история
              Появилась кнопка "Присоединиться"
        - do: Нажать кнопку "Присоедениться"
        - assert: |
              Пользователь А присоеденен к чату
              Доступна строка для ввода сообщений

    Переход по публичной ссылке проходит корректно при возобновлении интернета[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере, пользователь Б (дополнительный, можно авторизоваться в другом браузере\инкогнито-окне)
              Есть групповой чат, в котором пользователь Б администратор, нет пользователя А и в настройках чата включен переключатель "Публичная ссылка"
              Между пользователем А и Б есть любой чат куда пользователь Б отправил инвайт ссылку на групповой чат из description
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Пользователем А зайти в чат с инвайт ссылкой от пользователя Б.
        - assert: Открылось окно чата, в нем отображается сообщение с инвайт ссылкой от пользователя Б.
        - do: Отключить на устройстве сеть(выключить вайфай\вытащить эзернет кабель и тп.)
        - assert: Соединение с интернетом выключено
        - do: Нажать на инвайтссылку в открытом окне
        - assert: |
              Открылось окно чата и вместо истории чата отображается спинер
              В левом углу, появилсь надпись об повтором подключении
        - do: Включить сеть на устройстве (если требуется нажать на кнопку "подключиться")
        - assert: |
              Появилось соединение с интернетом
              В шапке чата появилось название чата и количество участников
              В окне чата подгрузилась история
              Появилась кнопка "Присоединиться"

    Присоединения к чату по публичной ссылке L пользователем[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Авторизованы пользователем А
              Есть групповой чат, в котором пользователь А администратор и включена публичная ссылка
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь А, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт
        - do: Нажать на шапку чата
        - assert: |
              Открылось окно "Информация о чате"
              Есть кнопка "Скопировать ссылку"
        - do: Нажать на кнопку "Скопировать ссылку"
        - assert: |
              Появляется сообщение "Ссылка скопирована"
              Ссылка скопирована в буфер обмена
        - do: Открыть окно инкогнито в этом же браузере и вставить в него скопированную ранее ссылку, перейти по ссылке
        - assert: |
              Открывается окно чата из description
              Видна история чата
              Внизу чата есть кнопка "Войдите, что бы присоединиться"

    Присоединения к чату по публичной ссылке LU пользователем[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь два аккаунта - пользователь А (проверяемый) - авторизован в браузере аккаунтом LU (аккаунт без привязанного номера телефона)
              Пользователь Б (дополнительный, можно авторизоваться в другом браузере\инкогнито-окне)
              Есть групповой чат, в котором пользователь Б администратор, нет пользователя А
              Между пользователем А и Б есть приватный чат, куда пользователем Б отправлена инвайт ссылка на групповой чат, описанный выше
              Для авторизации пользователем А необходимо использовать данный аккаунт - minsktest170 / QazMssngr1 (привязывать номер телефона к аккаунту нельзя)
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь А, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть чат, в который пользователь Б отправил ссылку на групповой чат из description
        - assert: Чат открыт
        - do: Перейти по ссылке которую отправил пользователь Б
        - assert: |
              Открывается окно группового чата из description
              Видна история чата
              Внизу чата есть кнопка "Присоединиться"
        - do: Нажать на кнопку "Присоединиться"
        - assert: Появляется окно "Введите номер телефона"

    Можно самостоятельно выйти из чата после присоединения по публичной ссылке[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Необходимо иметь один аккаунт - пользователь А (проверяемый) авторизован в браузере
              Есть групповой чат в который пользователь А добавлен по инвайт ссылке
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь А, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт
        - do: Нажать на меню (три точки) в шапке чата
        - assert: Открылось контекстное меню управления чатом
        - do: Нажать пункт "Покинуть чат"
        - assert: Появляется всплывающее окно "Вы действительно хотите покинуть чат?"
        - do: Нажать кнопку "Ок"
        - assert: Вместо поля ввода появилась кнопка "Присоединиться"

    Можно скопировать ссылку на чат без интернета[manual]:
        - automation: MSSNGRFRONT-5023
        - description: |
              Авторизованы пользователем А
              Есть групповой чат, в котором пользователь А администратор и включена публичная ссылка
              **Важно:** Один пользователь может присоединиться к одному чату по ссылке только три раза
        - do: Открыть браузер где авторизован пользователь А, открыть список чатов
        - assert: Открывается окно списка чатов
        - do: Открыть групповой чат, который описан в description
        - assert: Чат открыт
        - do: Отключить на устройстве сеть(выключить вайфай\вытащить эзернет кабель и тп.)
        - assert: Соединение с интернетом выключено.
        - do: Нажать на шапку чата
        - assert: |
              Открылось окно "Информация"
              Есть кнопка "Скопировать ссылку"
        - do: Нажать на кнопку "Скопировать ссылку"
        - assert: |
              Появляется сообщение "Ссылка скопирована"
              Ссылка скопирована в буфер обмена
        - do: Вставить ссылку в поле ввода
        - assert: Ссылка успешно вставлена

files: []

v-team: Chat

tlds: ru

tags:
        - yamb
        - y-team