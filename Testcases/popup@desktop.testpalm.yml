feature: Одна организация
experiment: Большой адаптивный попап для организаций

specs:
  aliases:
    - &OpenPopup
      - do: получить выдачу поиска по запросу 'lets rock bar'
      - assert: на выдаче в правой колонке присутствует колдунщик одной организации (если получена тачевая верстка изменить в Toggle Device Toolbar тип устройства на декстоп)
      - do: кликнуть в заголовок Отзывы
      - assert: открылся попап с табом отзывы
      - do: кликнуть в таб главное
      - assert: в попапе открылся таб 'Главное'
  Экран шириной 1920 пикселей:
    Проверяем внешний вид главного таба:
      - do: установить ширину окна браузера 1920
      - *OpenPopup
      - screenshot: пример внешнего вида [about]
    Проверяем внешний вид таба отзывов:
      - do: установить ширину окна браузера 1920
      - *OpenPopup
      - do: кликнуть в таб 'N отзывов'
      - assert: загрузились отзывы
    Проверяем внешний вид таба фото:
      - do: установить ширину окна браузера 1920
      - *OpenPopup
      - do: кликнуть в таб 'Фото'
      - assert: загрузились фотографии в табе 'Фото'
      - screenshot: пример внешнего вида [photo]
    Проверяем внешний вид таба с ценами:
      - do: установить ширину окна браузера 1920
      - *OpenPopup
      - do: кликнуть в таб 'Меню'
      - assert: загрузились цены в табе 'Меню'
      - screenshot: пример внешнего вида [prices]
  Экран шириной 1152 пикселя:
    Проверяем внешний вид главного таба:
      - do: установить ширину окна браузера 1152
      - *OpenPopup
      - screenshot: пример внешнего вида [about]
    Проверяем внешний вид таба отзывов:
      - do: установить ширину окна браузера 1152
      - *OpenPopup
      - do: кликнуть в таб 'N отзывов'
      - assert: загрузились отзывы
    Проверяем внешний вид таба фото:
      - do: установить ширину окна браузера 1152
      - *OpenPopup
      - do: кликнуть в таб 'Фото'
      - assert: загрузились фотографии в табе 'Фото'
      - screenshot: пример внешнего вида [photo]
    Проверяем внешний вид таба с ценами:
      - do: установить ширину окна браузера 1152
      - *OpenPopup
      - do: кликнуть в таб 'Меню'
      - assert: загрузились цены в табе 'Меню'
      - screenshot: пример внешнего вида [prices]
  Экран шириной 1024 пикселя:
    Проверяем внешний вид главного таба:
      - do: установить ширину окна браузера 1024
      - *OpenPopup
      - screenshot: пример внешнего вида [about]
    Проверяем внешний вид таба отзывов:
      - do: установить ширину окна браузера 1024
      - *OpenPopup
      - do: кликнуть в таб 'N отзывов'
      - assert: загрузились отзывы
    Проверяем внешний вид таба фото:
      - do: установить ширину окна браузера 1024
      - *OpenPopup
      - do: кликнуть в таб 'Фото'
      - assert: загрузились фотографии в табе 'Фото'
      - screenshot: пример внешнего вида [photo]
    Проверяем внешний вид таба с ценами:
      - do: установить ширину окна браузера 1024
      - *OpenPopup
      - do: кликнуть в таб 'Меню'
      - assert: загрузились цены в табе 'Меню'
      - screenshot: пример внешнего вида [prices]
  Экран шириной 800 пикселей:
    Проверяем внешний вид главного таба:
      - do: установить ширину окна браузера 800
      - *OpenPopup
      - screenshot: пример внешнего вида [about]
    Проверяем внешний вид таба отзывов:
      - do: установить ширину окна браузера 800
      - *OpenPopup
      - do: кликнуть в таб 'N отзывов'
      - assert: загрузились отзывы
    Проверяем внешний вид таба фото:
      - do: установить ширину окна браузера 800
      - *OpenPopup
      - do: кликнуть в таб 'Фото'
      - assert: загрузились фотографии в табе 'Фото'
      - screenshot: пример внешнего вида [photo]
    Проверяем внешний вид таба с ценами:
      - do: установить ширину окна браузера 800
      - *OpenPopup
      - do: кликнуть в таб 'Меню'
      - assert: загрузились цены в табе 'Меню'
      - screenshot: пример внешнего вида [prices]
  Общие проверки:
    Проверяем внешний вид, когда мало данных:
      - do: получить выдачу поиска по запросу 'Французский Пекарь екатеринбург куйбышева 48'
      - assert: на выдаче в правой колонке присутствует колдунщик одной организации
      - do: кликнуть в заголовок Отзывы
      - assert: открылся попап с табом отзывы
      - do: кликнуть в таб главное
      - assert: в попапе открылся таб 'Главное'
      - screenshot: пример внешнего вида [about]
    Проверяем счётчик видимости:
      - do: получить выдачу поиска по запросу 'lets rock bar'
      - do: кликнуть в заголовок Отзывы
      - assert: открылся попап с табом отзывы
      - do: кликнуть в таб главное
      - assert: в попапе открылся таб 'Главное'
      - tech: |
          открылся попап
          сработал счетчик видимости path='/tech/web/companies/org/adaptive/show',
          vars='pos=*,wizard=true,-adapters=companies,popup=inside'
    Проверка листания фоток с клавиатуры:
      - do: получить выдачу поиска по запросу 'lets rock bar'
      - do: кликнуть на вторую картинку в галерее
      - assert: |
          открылся попап,
          в попапе активен таб 'Фото',
          в табе открыт просмотрщик с кликнутой фотографией
      - do: нажать на клавиатуре клавишу "стрелка вправо"
      - assert: фотография в просмотрщике переключилась на следующую
      - tech: сработал счетчик /parallel/result/snippet/companies/company/popup/photo/viewer/right
      - do: нажать на клавиатуре клавишу "стрелка влево"
      - assert: фотография в просмотрщике переключилась на предыдущую
      - tech: сработал счетчик /parallel/result/snippet/companies/company/popup/photo/viewer/left
      - assertMetrics: '*'
    Проверяем внешний вид, когда одна фича:
      - do: установить размер окна браузера 1800*1600
      - do: получить выдачу поиска по запросу 'нотариус горбатенко н в'
      - assert: на выдаче в правой колонке присутствует колдунщик одной организации
      - do: кликнуть в заголовок карточки организации
      - assert: |
          открылся попап,
          в попапе активен таб 'Главное'
      - screenshot: пример внешнего вида [about]

files:
  - features/companies/popup/popup@desktop.hermione.js

v-team: VanillaGeo

tlds: all

tags:
  - skip_e2e_check
