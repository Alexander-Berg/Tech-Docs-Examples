feature: Работа в каналах

specs:

    Есть возможность создать канала через кнопку создания нового чата[manual]:
        - tags: [advanced_smoke]
        - automation: MSSNGRFRONT-5017
        - description: Авторизованы пользователем с привязанным номером телефона
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Нажать на кнопку "Создания нового чата", которая находится рядом с поиском над списоком чатов
        - assert: |
              Открывается окно со списком контактов
              Над списком контактов есть кнопки "Новый груповой чат" и "Новый канал"
        - do: Нажать "Создать канал"
        - assert: Появляется окно создания канала
        - do: Ввести корректное название и нажать кнопку "Создать канал"
        - assert: |
              Открывается окно канала, где - вверху название канала
              Под названием канала количество участников канала( 1 подписчик)
              В окне канала техническое сообщение **Канал "Название канала" создан**
              Есть поле ввода

    Нельзя создать канал с пустым названием[manual]:
        - automation: MSSNGRFRONT-5017
        - description: Авторизованы пользователем с привязанным номером телефона
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Нажать на кнопку "Создания нового чата", которая находится рядом с поиском над списоком чатов
        - assert: |
              Открывается окно со списком контактов
              Над списком контактов есть кнопки "Новый груповой чат" и "Новый канал"
        - do: Нажать "Создать канал"
        - assert: Появляется окно создания канала
        - do: Ввести пустое название канала (только пробелы)
        - assert: В интерфейсе не появилась возможность создать канал

    Из окна создания канала можно вернуться на предыдущий экран с помощью стрелки "Назад"[manual]:
        - automation: MSSNGRFRONT-5017
        - description: Авторизованы пользователем с привязанным номером телефона
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Нажать на кнопку "Создания нового чата", которая находится рядом с поиском над списоком чатов
        - assert: |
              Открывается окно со списком контактов
              Над списком контактов есть кнопки "Новый груповой чат" и "Новый канал"
        - do: Нажать "Создать канал"
        - assert: Появляется окно создания канала
        - do: В поле ввода "Название" ввести несоклько символов
        - assert: |
              Введенный символы отображаются в поле ввода
              Стала доступна кнопка "Создать канал"
        - do: Нажать на стрелку "Назад"
        - assert: |
              Появляется попап подтверждения отмены создания канала
              В попапе есть кнопки "Не отменять" и "Отменить"
        - do: Нажать на кнопку "Не отменять"
        - assert: |
              Попап был закрыт
              Открыто окно создания канала
        - do: Нажать на стрелку "Назад"
        - assert: |
              Появляется попап подтверждения отмены создания канала
              В попапе есть кнопки "Не отменять" и "Отменить"
        - do: Нажать на кнопку "Отменить"
        - assert: |
              Попап был закрыт
              Открывается окно со списком контактов
              Над списком контактов есть кнопки "Новый груповой чат" и "Новый канал"

    Можно закрыть окно создания канала с помощью кнопки "ESC"[manual]:
        - automation: MSSNGRFRONT-5017
        - description: |
              Авторизованы пользователем с привязанным номером телефона
              Данный тест-кейс неактуален для мобильного клиента
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Нажать на кнопку "Создания нового чата", которая находится рядом с поиском над списоком чатов
        - assert: |
              Открывается окно со списком контактов
              Над списком контактов есть кнопки "Новый груповой чат" и "Новый канал"
        - do: Нажать "Создать канал"
        - assert: Появляется окно создания канала
        - do: В поле ввода "Название" ввести несоклько символов
        - assert: |
              Введенный символы отображаются в поле ввода
              Стала доступна кнопка "Создать канал"
        - do: Нажать на кнопку "ESC"
        - assert: |
              Появляется попап подтверждения отмены создания канала
              В попапе есть кнопки "Не отменять" и "Отменить"
        - do: Нажать на кнопку "Не отменять"
        - assert: |
              Попап был закрыт
              Открыто окно создания канала
        - do: Нажать на кнопку "ESC"
        - assert: |
              Появляется попап подтверждения отмены создания канала
              В попапе есть кнопки "Не отменять" и "Отменить"
        - do: Нажать на кнопку "Отменить"
        - assert: |
              Попап был закрыт
              Окно создания канала было закрыто

    Корректное название кнопок в контекстном меню в списке чатов[manual]:
        - automation: MSSNGRFRONT-5017
        - description: |
              Авторизованы пользователем с привязанным номером телефона
              У пользователя имеются подписки на каналы (если нет, подписаться на канал или создать)
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Вызвать в списке чатов контекстное меню для канала кликом ПКМ / лонгтапом
        - assert: Появилось контекстное меню, в котором есть следующие пункты - "Информация о чате", "Закрепить чат" / "Открепить чат", "Отключить уведомления" / "Включить уведомления", "Отписаться" и для внешнего окружения "Пожаловаться"

    Корректное название кнопок в контекстном меню в окне чатов[manual]:
        - automation: MSSNGRFRONT-5017
        - description: |
              Авторизованы пользователем с привязанным номером телефона
              У пользователя имеются подписки на каналы (если нет, подписаться на канал или создать)
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть канал из description
        - assert: Открывается окно канала
        - do: Нажать на троеточие вверху окна каналов
        - assert: Выпадает контекстное меню со следующими пунктами - "Информация о чате", "Отключить уведомления" / "Включить уведомления", "Отписаться" и для внешнего окружения "Пожаловаться"

    Корректный экран "Информация о канале для админа":
        - tags: [advanced_smoke]
        - description: |
              Авторизованы пользователем с привязанным номером телефона
              У пользователя имеются канал, в котором он является администратором
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть канал из description
        - assert: Открывается окно канала
        - do: Перейти по троеточию а меню канала и нажать на вкладку “Информация о чате”
        - assert: |
              Открывается окно с информацией о канале
              В данном окне есть название канала и его описание (если есть) и аватар
              Отображается количество подписчиков
              Есть ползунок "Уведомления"
              Есть раздел "Настройки канала"
              Есть кнопка "Скопировать ссылку" (если публичная ссылка включена)
              Есть кнопка "Поиск по записям"
              Есть раздел "Подписчики и администраторы"
              Есть кнопка "Пожаловаться" и "Отписаться"

    Корректный экран "Информация о канале для подписчика":
        - tags: [advanced_smoke]
        - description: |
              Авторизованы пользователем с привязанным номером телефона
              У пользователя имеются канал, в котором он является подписчиком
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть канал из description
        - assert: Открывается окно канала
        - do: Перейти по троеточию а меню канала и нажать на вкладку “Информация о чате”
        - assert: |
              Открывается окно с информацией о канале
              В данном окне есть название канала и его описание (если есть) и аватар
              Отображается количество подписчиков
              Есть ползунок "Уведомлениия"
              Кнопка "Скопировать ссылку" (если публичная ссылка включена)
              Есть кнопка "Поиск по записям"
              Есть кнопка "Пожаловаться" и "Отписаться"

    Канал можно закрепить в списке чатов[manual]:
        - automation: MSSNGRFRONT-5017
        - description: |
              Авторизованы пользователем с привязанным номером телефона
              У пользователя имеются подписки на каналы (если нет, подписаться на канал или создать)
              Данный канал не закреплен у пользователя в списке чатов
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: В списке чатов найти канал из description
        - assert: Канал найден
        - do: Вызвать для него контекстное меню для канала кликом ПКМ / лонгтапом
        - assert: Появляется контекстное меню для этого канала
        - do: Выбрать "Закрепить чат"
        - assert: Канал закреплен в списке чатов

    Каналы не пропадают у админа после разлогина[manual]:
        - automation: MSSNGRFRONT-5017
        - description: |
              Авторизованы пользователем с привязанным номером телефона
              У пользователя имеются в списке чатов каналы, в которых он является администратором
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Разлогиниться из приложения и закрыть браузер
        - assert: Был осуществлен выход из аккаунта и закрыть сам браузер
        - do: Открыть тестовый браузер и авторизоваться тестовым аккаунтом в https://passport.yandex.ru
        - assert: Авторизация прошла успешно
        - do: Открыть в браузере мессенджер
        - assert: Все каналы, которые были у пользователя ранее остались в списке чатов

    Каналы не пропадают у подписчика после разлогина[manual]:
        - automation: MSSNGRFRONT-5017
        - description: |
              Авторизованы пользователем с привязанным номером телефона
              У пользователя имеются в списке чатов каналы, в которых он подписчиком
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Разлогиниться из приложения и закрыть браузер
        - assert: Был осуществлен выход из аккаунта и закрыт сам браузер
        - do: Открыть тестовый браузер и авторизоваться тестовым аккаунтом в https://passport.yandex.ru
        - assert: Авторизация прошла успешно
        - do: Открыть в браузере мессенджер
        - assert: Все каналы, которые были у пользователя ранее остались в списке чатов

    Канал можно распинить в списке чатов[manual]:
        - automation: MSSNGRFRONT-5017
        - description: |
              Авторизованы пользоваателем с привязанным номером телефона
              У пользователя имеются подписки на каналы (если нет, подписаться на канал или создать)
              Данный канал закреплен у пользователя в списке чатов
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: В списке чатов найти закрепленный канал
        - assert: Канал найден
        - do: Вызвать для него контекстное меню для канала кликом ПКМ / лонгтапом
        - assert: Появляется контекстное меню для этого канала
        - do: Выбрать "Открепить чат"
        - assert: Канал откреплен и происходит его сортировка в списке чатов согласно времени последнего сообщения

files:
    - tests/hermione/suites/messenger/channels/channel-work.common.hermione.ts

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
