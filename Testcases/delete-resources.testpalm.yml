feature: Удаление ресурсов
type: Страница ресурсов сервиса

specs:
  beforeEach:
    - do: залогиниться под пользователем robot-internal-003
    - do: открыть страницу ресурсов сервиса "Мой тестовый сервис 020 (автотесты)" с предустановленными фильтрами (/services/zanartestservice020/resources/?view=consuming&layout=table&supplier=14&type=54)
    - do: кликнуть на кнопку "Запросить ресурс"
    - assert: открылось модальное окно "Запрос ресурса"; в поле "Для какого сервиса" предзаполнено значение "Мой тестовый сервис 020 (автотесты)"
    - do: кликнуть в поле "Выберите тип ресурса из категории"
    - assert: появился выпадающий список с типами ресурсов
    - do: кликнуть в списке на вариант "Паспорт - TVM-приложение"
    - screenshot: в модальном окне появилась форма для запроса ресурса; в поле "Выберите действие" предзаполнено значение "Создать новое TVM-приложение" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-25%2014-07-35.png] 
    - do: в форме в поле "Название" ввести "test-tvm"
    - do: кликнуть на кнопку "Отправить"
    - assert: в форме появилась надпись "Ресурс запрошен"
    - do: закрыть модально окно с формой для запроса ресурса
    - assert: в списке ресурсов появился ресурс с названием "test-tvm" в статусе "Выдаётся"
    - do: обновить страницу 
    - screenshot: ресурс перешёл в статус "Выдан" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-25%2014-12-01.png]

  Положительные:
    1. Удаление ресурсов через попап:
      - automation: ABC-5985
      - do: кликнуть на строчку с выданным ресурсом "test-tvm"
      - screenshot: открылось модальное окно с информацией про ресурс; в правом нижнем углу есть надпись "Удалить" с иконкой корзины [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-25%2014-14-10.png]
      - do: кликнуть на "Удалить"
      - screenshot: появилось всплывающее окно с заголовком "Подтвердите действие", текстом "Вы уверены что хотите удалить ресурс?" и кнопками "Отмена" и "Подтвердить" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-25%2014-16-12.png]
      - do: кликнуть на кнопку "Подтвердить"
      - assert: всплывающее окно закрылось
      - screenshot: ресурс "test-tvm" перешёл в статус "Отозван" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-25%2014-16-46.png]

    2. Удаление ресурсов через таблицу ресурсов:
      - automation: ABC-5985
      - do: нажать на многоточие в конце строки с выданным ресурсом "test-tvm"
      - screenshot: появился попап с меню управления ресурсом [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-09-09%2015-10-03.png]
      - do: кликнуть на пункт "Удалить"
      - screenshot: появилось всплывающее окно с заголовком "Подтвердите действие", текстом "Вы уверены что хотите удалить ресурс?" и кнопками "Отмена" и "Подтвердить" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-25%2014-22-28.png]
      - do: нажать кнопку "Подтвердить"
      - assert: окно с подтверждением пропало
      - screenshot: ресурс "test-tvm" перешёл в статус "Отозван" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-06-25%2014-24-13.png]

files: []

priority: normal

tags:
  - reviewed
  - no_assessors
