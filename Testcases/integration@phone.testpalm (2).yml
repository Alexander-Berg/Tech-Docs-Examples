feature: Ecom-tap
type: интеграция переходов

params:
    exp_flags:
        - analytics-disabled=1
        - turbo-app-any-ua=1

aliases:
  - &before
      - do: получить выдачу по запросу 'site:fulmar.ru' (альтернативные запросы - site:kupicase.ru каталог, 'site:super01.ru')
      - assert: на выдаче присутствует турбо-сниппет(ы) с серой иконкой ракеты справа от гринурла
      - do: кликнуть по любой ссылке турбо-сниппета для перехода на страницу магазина
      - assert: открылась страница магазина с активной кнопкой Каталог на нижней панели
      - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_Gw9upIcJ8I.png]
  - &checksMainCatalog
    - do: при дальнейшем выполнении шагов обращать внимание на сохранение позиции при переходах туда-обратно кнопками на устройстве, пустые экраны при переходах (не должно быть пустых мест, дыр и т.п. больше секунды нигде), кривую верстку, прыгания элементов, неработающую функциональность
    - do: проверить скролл страницы и элементов на ней
    - do: проверить отображение картинок и новых карточек при скроллах
    - do: проверить работу ссылок в разделе со списком категорий
    - assert: раздел со списком категорий выглядит примерно так [https://jing.yandex-team.ru/files/skurhanski/chrome_vavQteDlDy.png]
    - do: проверить, что товар добавляется в корзину
    - do: проверить, что карточки кликаются и открываются
    - do: проверить прочие кликабельные элементы на корректность их работы
  - &main
      - do: перейти в раздел "Главная", кликнув по соответствующей пиктограмме на нижней панели
      - assert: открылся раздел Главная
      - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_QolpXlMm2b.png]
  - &catalog
      - do: кликнуть по пиктограмме "Каталог" на нижней панели
      - assert: осуществился переход в корень каталога
      - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_thqWLCtJMb.png]
  - &cart
      - do: кликнуть по пиктограмме "Каталог" на нижней панели
      - assert: осуществился переход в корень каталога
      - assert: цветовое оформление может отличаться в зависимости от магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_thqWLCtJMb.png]
      - do: при дальнейшем выполнении шагов обращать внимание на сохранение позиции при переходах туда-обратно кнопками на устройстве, пустые экраны при переходах (не должно быть пустых мест, дыр и т.п. больше секунды нигде), кривую верстку, прыгания элементов, неработающую функциональность
      - do: добавьте около десятка произвольных товаров в корзину и перейдите в нее
      - assert: все добавленные товары присутствуют в корзине
      - assert: примерный внешний вида заполненной корзины [https://jing.yandex-team.ru/files/skurhanski/chrome_rlU48iCl15.png]
      - assert: при изменении количества или удаленнии товара соответственно изменяется итоговая сумма
      - do: проверить, что карточки кликаются и открываются
      - do: при нажатии на кнопку "Оформить заказ" появляется страница с формой для заполнения данных покупателя
      - assert: если пользователь незалогинен, поля не будут заполнены [https://jing.yandex-team.ru/files/skurhanski/chrome_8noo8e8A7i.png]
      - assert: если пользователь залогинен, то поля будут предзаполнены [https://jing.yandex-team.ru/files/skurhanski/chrome_RAo84ltbjk.png]
      - do: проверить прочие кликабельные элементы на корректность их работы в разделе Корзина (не стоит только выполнять отправку заказа в магазин)
  - &detail
      - do: кликнуть по любой карточке товара
      - assert: открылась карточка товара
      - do: проверить, что картинки и кнопки в карточке кликаются и работают корректно
      - do: при нажатии на кнопку 'Быстрый заказ' (при ее наличии) появляется страница с формой для заполнения данных покупателя
  - &about
      - assert: открылся раздел Каталог
      - do: при дальнейшем выполнении шагов обращать внимание на сохранение позиции при переходах туда-обратно кнопками на устройстве, пустые экраны при переходах (не должно быть пустых мест, дыр и т.п. больше секунды нигде), кривую верстку, прыгания элементов, неработающую функциональность
      - assert: кликнуть на нижней панели по пиктограмме "О магазине"
      - assert: открылась страница с информацией о магазине
      - assert: объем информации о магазине может отличаться [https://jing.yandex-team.ru/files/skurhanski/chrome_fbtEhSGMxv.png]
      - do: при наличии данных о магазине попробовать покликать по их ссылкам и проверить корректность их работы

specs:
  Серп:
    beforeEach:
      - *before
    Главная:
      - automation: SERPTEST-1719
      - *main
      - *checksMainCatalog
    Каталог:
      - automation: SERPTEST-1719
      - *catalog
      - *checksMainCatalog
    Карточка товара:
      - automation: SERPTEST-1719
      - *catalog
      - *detail
    Корзина:
      - automation: SERPTEST-1719
      - *cart
    О магазине:
      - automation: SERPTEST-1719
      - *about
    Оплата картой (ошибка оплаты):
      - automation: SERPTEST-1719
      - do: добавить любой товар в корзину (без метки 'Под заказ')
      - do: перейти в корзину и нажать кнопку "Оформить заказ"
      - assert: произошел переход к оформлению заказа
      - do: заполнить все поля корректными данными
      - do: выбрать способ оплаты картой
      - do: проскроллить страницу таким образом, чтобы кнопка оплаты была расположена максимально внизу экрана
      - assert: пример позиции кнопки оплаты [https://jing.yandex-team.ru/files/skurhanski/browser_xqmatMDdKx.png]
      - do: кликнуть по кнопке оплаты
      - assert: |
          появилась форма для ввода данных платежной карты
          форма выглядит корректно
      - do: ввести номер карты - 5555555555554576
      - do: в качестве срока действия укажите любую дату (но больше текущей), CVC - любые числа (при тестировании в Колхозе, в поле CVC клавиатура может скрываться, должен быть доступен ввод CVC с клавиатуры компьютера)
      - do: нажмите Оплатить
      - assert: появился спиннер, обозначающий процесс оплаты
      - assert: появилось сообщение об ошибке оплаты заказа
      - do: вернуться в корзину
      - assert: в корзине присутствует ранее добавленный товар
  Маркет (android):
    beforeEach:
      - do: получить выдачу по запросу 'яндекс маркет'
      - do: перейти на сервис Яндекс.Маркет, кликнув по названию сервиса в таббаре либо по гринурлу сниппета 'Яндек.Маркет' в результатах выдачи
      - assert: осуществился переход на сервис Яндекс.Маркет
      - do: в поисковой строке сервиса Яндекс.Маркет ввести запрос '101wow.ru' (альтернативные запросы - 'farkop.ru')
      - assert: появились результаты поиска с кнопкой 'В магазин' (если отсутствуют кнопки, используйте альтернативные запросы - 'bealab.ru', '101wow.ru') [https://jing.yandex-team.ru/files/skurhanski/Telegram_xZiM8C4sGH.png]
      - do: кликнуть по желтой кнопке
      - assert: |
          открылся оверлей с карточкой товара
          внизу присутствует навигационная панель с разделами магазина (цветовое оформление может отличаться в зависимости от магазина) [https://jing.yandex-team.ru/files/skurhanski/ApplicationFrameHost_FYJZieXOfl.png]
    Главная:
      - tags:
          - ecom-tap-market
          - no_assessors # пока отключу, в маркете ссылки ведут на оригинал
      - browsers:
          notFor:
            - ios-touch-group
      - automation: SERPTEST-1719
      - *main
      - *checksMainCatalog
    Каталог:
      - tags:
          - ecom-tap-market
          - no_assessors # пока отключу, в маркете ссылки ведут на оригинал
      - browsers:
          notFor:
            - ios-touch-group
      - automation: SERPTEST-1719
      - *catalog
      - *checksMainCatalog
    Карточка товара:
      - tags:
          - ecom-tap-market
          - no_assessors # пока отключу, в маркете ссылки ведут на оригинал
      - browsers:
          notFor:
            - ios-touch-group
      - automation: SERPTEST-1719
      - *catalog
      - *detail
    Корзина:
      - tags:
          - ecom-tap-market
          - no_assessors # пока отключу, в маркете ссылки ведут на оригинал
      - browsers:
          notFor:
            - ios-touch-group
      - automation: SERPTEST-1719
      - *cart
    О магазине:
      - tags:
          - ecom-tap-market
          - no_assessors # пока отключу, в маркете ссылки ведут на оригинал
      - browsers:
          notFor:
            - ios-touch-group
      - automation: SERPTEST-1719
      - *about
    Оплата картой (ошибка оплаты):
      - tags:
          - ecom-tap-market
          - no_assessors # пока отключу, в маркете ссылки ведут на оригинал
      - browsers:
          notFor:
            - ios-touch-group
      - automation: SERPTEST-1719
      - do: перейти в раздел Каталог
      - do: добавить любой товар в корзину (без метки 'Под заказ')
      - do: перейти в корзину и нажать кнопку "Оформить заказ"
      - assert: произошел переход к оформлению заказа
      - do: заполнить все поля корректными данными
      - do: выбрать способ оплаты картой
      - do: проскроллить страницу таким образом, чтобы кнопка оплаты была расположена максимально внизу экрана
      - assert: пример позиции кнопки оплаты [https://jing.yandex-team.ru/files/skurhanski/browser_xqmatMDdKx.png]
      - do: кликнуть по кнопке оплаты
      - assert: |
          появилась форма для ввода данных платежной карты
          форма выглядит корректно
              - do: ввести номер карты - 5555555555554576
      - do: в качестве срока действия укажите любую дату (но больше текущей), CVC - любые числа
      - do: нажмите Оплатить
      - assert: появился спиннер, обозначающий процесс оплаты
      - assert: появилось сообщение об ошибке оплаты заказа
      - do: вернуться в корзину
      - assert: в корзине присутствует ранее добавленный товар
  Маркет (ios):
    beforeEach:
      - do: получить выдачу по запросу 'яндекс маркет'
      - do: перейти на сервис Яндекс.Маркет, кликнув по названию сервиса в таббаре либо по гринурлу сниппета 'Яндек.Маркет' в результатах выдачи
      - assert: осуществился переход на сервис Яндекс.Маркет
      - do: в поисковой строке сервиса Яндекс.Маркет ввести запрос 'gipfel.ru'
      - assert: среди результатов имеются те, что с желтой кнопкой 'В магазин' (если отсутствуют желтые кнопки, используйте альтернативные запросы - 'bealab.ru', '101wow.ru') [https://jing.yandex-team.ru/files/skurhanski/chrome_feBTQIIflB.png]
      - do: кликнуть по желтой кнопке
      - assert: |
          в НОВОЙ вкладке открылась страница магазина с карточкой товара
          внизу присутствует навигационная панель с разделами магазина (цветовое оформление может отличаться в зависимости от магазина) [https://jing.yandex-team.ru/files/skurhanski/chrome_paKIKv3m0s.png]
    Главная:
      - tags:
          - ecom-tap-market
          - no_assessors # пока отключу, в маркете ссылки ведут на оригинал
      - browsers: ios-touch-group
      - automation: SERPTEST-1719
      - *main
      - *checksMainCatalog
    Каталог:
      - tags:
          - ecom-tap-market
          - no_assessors # пока отключу, в маркете ссылки ведут на оригинал
      - browsers: ios-touch-group
      - automation: SERPTEST-1719
      - *catalog
      - *checksMainCatalog
    Карточка товара:
      - tags:
          - ecom-tap-market
          - no_assessors # пока отключу, в маркете ссылки ведут на оригинал
      - browsers: ios-touch-group
      - automation: SERPTEST-1719
      - *catalog
      - *detail
    Корзина:
      - tags:
          - ecom-tap-market
          - no_assessors # пока отключу, в маркете ссылки ведут на оригинал
      - browsers: ios-touch-group
      - automation: SERPTEST-1719
      - *cart
    О магазине:
      - tags:
          - ecom-tap-market
          - no_assessors # пока отключу, в маркете ссылки ведут на оригинал
      - browsers: ios-touch-group
      - automation: SERPTEST-1719
      - *about
    Оплата картой (ошибка оплаты):
      - tags:
          - ecom-tap-market
          - no_assessors # пока отключу, в маркете ссылки ведут на оригинал
      - browsers: ios-touch-group
      - automation: SERPTEST-1719
      - do: перейти в раздел Каталог
      - do: добавить любой товар в корзину (без метки 'Под заказ')
      - do: перейти в корзину и нажать кнопку "Оформить заказ"
      - assert: произошел переход к оформлению заказа
      - do: заполнить все поля корректными данными
      - do: выбрать способ оплаты картой
      - do: проскроллить страницу таким образом, чтобы кнопка оплаты была расположена максимально внизу экрана
      - assert: пример позиции кнопки оплаты [https://jing.yandex-team.ru/files/skurhanski/browser_xqmatMDdKx.png]
      - do: кликнуть по кнопке оплаты
      - assert: |
          появилась форма для ввода данных платежной карты
          форма выглядит корректно
              - do: ввести номер карты - 5555555555554576
      - do: в качестве срока действия укажите любую дату (но больше текущей), CVC - любые числа
      - do: нажмите Оплатить
      - assert: появился спиннер, обозначающий процесс оплаты
      - assert: появилось сообщение об ошибке оплаты заказа
      - do: вернуться в корзину
      - assert: в корзине присутствует ранее добавленный товар
  Письмо о заказе:
    beforeEach:
      - do: перейти по ссылке https://yandex.ru/turbo/spideradio.github.io/n/yandexturbocatalog/
      - do: добавить несколько товаров в корзину, в том числе и со скидкой, чтобы общая сумма заказа была в пределах от 5000р до 10000р
      - do: перейти в корзину
      - assert: добавленные товары присутствуют в корзине
      - assert: итоговая сумма в пределах от 5000р до 10000р
      - do: нажать 'Оформить заказ'
      - assert: осуществился переход на страницу оформления заказа
      - do: заполнить все текстовые поля корректными данными (в поле 'Email' указать реальную почту, т.к. на нее придет тестовое письмо о заказе)
    Самовывоз:
      - automation: SERPTEST-1719
      - do: выбрать тип доставки 'Самовывоз' и нажать 'Отправить'
      - assert: появилось соощение об успешном заказе
      - assert: в сообщении указан номер заказа и почта, на которую отправлена информация о заказе
      - assert: на указанную при заказе почту пришло письмо о заказе (возможна задержка в пару минут)
      - assert: в письме указаны ФИО покупателя, номер заказа, состав и стоимость заказа с учетом скидок, а также способ оплаты
      - assert: тип доставки - самовывоз, стоимость доставки - 0 руб.
      - assert: внейшний вид [https://jing.yandex-team.ru/files/skurhanski/browser_0VR9iPMgbi.png]
      - do: кликнуть по ссылке с названием товара в письме
      - assert: открылась карточка товара в магазине, в котором осуществлялся заказ
    Бесплатно курьером:
      - automation: SERPTEST-1719
      - do: выбрать первый тип доставки 'Курьером' и нажать 'Отправить'
      - assert: появилось соощение об успешном заказе
      - assert: в сообщении указан номер заказа и почта, на которую отправлена информация о заказе
      - assert: на указанную при заказе почту пришло письмо о заказе (возможна задержка в пару минут)
      - assert: в письме указаны ФИО покупателя, номер заказа, состав заказа, стоимость заказа с учетом скидок, а также способ оплаты
      - assert: тип доставки - курьером, стоимость доставки - 0 руб.
      - assert: внейшний вид [https://jing.yandex-team.ru/files/skurhanski/browser_OgtJZaL3WO.png]
    Платно курьером:
      - automation: SERPTEST-1719
      - do: выбрать второй тип доставки 'Курьером' и нажать 'Отправить'
      - assert: появилось соощение об успешном заказе
      - assert: в сообщении указан номер заказа и почта, на которую отправлена информация о заказе
      - assert: на указанную при заказе почту пришло письмо о заказе (возможна задержка в пару минут)
      - assert: в письме указаны ФИО покупателя, номер заказа, состав заказа, стоимость заказа с учетом скидок, а также способ оплаты
      - assert: тип доставки - курьером, стоимость доставки - 500 руб.
      - assert: внейшний вид [https://jing.yandex-team.ru/files/skurhanski/browser_WrkbQ2qpgs.png]

files: []

v-team: Turbo

tlds: ru

tags:
  - ecom-tap
