feature: Вики
type: Фасеты Вики

specs:
  Проверка функциональности [manual]:
    - automation: ISEARCH-6516
    - do: открыть страницу поиска /wikisearch?text=<поисковый_запрос>
    - assert: |
        открылась страница на вкладке 'Вики'
        на странице отображаются вики страницы
        справа от сниппетов присутствует колонка фасетов
        в фасетах присутствует блок 'Поиск в кластере' и может присутствовать 'Тип страницы'
        рядом с каждым значением фасета присутвует количество найденных результатов
        если значений в блоке больше 5, остальные остаются свернутыми
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/grikyan91/testirovanie__Poisk_po_Viki_nashlos_64997_2020-07-01_13-03-45.png]
    - do: выбрать значение в блоке 'Тип страницы'
    - assert: |
        выдача обновилась
        в выдаче присутствуют только вики страницы с выбранным типом страницы
        под поисковой строкой появилась кнопка с названием выбранного фасета
        выбранный фасет отмечен галочкой в группе
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/grikyan91/test__Poisk_po_Viki_nashlos_6_2020-07-01_13-15-19.png]
    - do: в блоке 'Поиск в кластере' выбрать любое значение
    - assert: |
        выдача обновилась
        в выдаче присутствуют только страницы из выбранного кластера и с выбранным типом страницы
        под поисковой строкой появилась кнопка с названием выбранного фасета
        выбранный фасет отмечен галочкой в группе
        появился новый фасет 'На уровень ниже'
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/grikyan91/test__Poisk_po_Viki_nashlos_3_2020-07-01_13-16-23.png]
    - do: выбрать любое значение в блоке 'На уровень ниже'
    - assert: |
        выдача обновилась
        в выдаче присутствуют только вики страницы соответствующие выбранным фасетам
        на странице присутствует фасет 'На уровень ниже'
        на странице появился фасет 'На уровень выше'
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/grikyan91/test__Poisk_po_Viki_nashlos_3_2020-07-01_13-20-11.png]
    - do: перезадать поисковый запрос
    - assert: |
        выбранные фасеты не сбросились
        в выдаче присутствуют только вики страницы соответствующие выбранным фасетам
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/grikyan91/QA__Poisk_po_Viki_nashlos_1_2020-07-01_13-21-33.png]
    - do: клик на кретик кнопки с названием фасета под поисковой строкой
    - assert: |
        поисковая выдача обновилась
        под поисковой строкой пропала кнопка фасета
        варианты значений вернулись в удаленный фасет
    - do: навести курсор на галочку в фасете
    - assert: появился иконка крестика
    - do: клик на крестик в фасете
    - assert: |
        поисковая выдача обновилась
        под поисковой строкой пропала кнопка фасета
        варианты значений вернулись в удаленный фасет
    - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/grikyan91/QA__Poisk_po_Viki_nashlos_10905_2020-07-01_13-22-54.png]

tags:
  - reviewed

priority: normal

browsers:
  - yandex-browser-desktop
  - firefox-desktop
  - safari-desktop
