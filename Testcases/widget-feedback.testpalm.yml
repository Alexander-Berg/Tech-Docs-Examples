feature: Виджет обратной связи

specs:
  Прокрутка кнопок чатов:
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета (название заголовка Тестовая cтраница для Widget-feedback — турбо)
    - params:
        foreverdata: '1574825535'
    - assert: открывается турбо-страница в той же вкладке (в поисковом приложении Яндекс турбо-страница открывается в новой вкладке)
    - do: проскроллить кнопки сверху влево
    - assert: кнопки скроллятся, видна последняя кнопка
    - do: проскроллить кнопки сверху вправо
    - assert: кнопки скроллятся, видна первая кнопка

  Проверка ссылок телефона и почты:
    - tags: no_assessors
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета (название заголовка Тестовая cтраница для Widget-feedback — турбо)
    - params:
        foreverdata: '1574825535'
    - assert: открывается турбо-страница в той же вкладке (в поисковом приложении Яндекс турбо-страница открывается в новой вкладке)
    - do: тапнуть в первую синюю кнопку сверху с иконкой трубки
    - assert: происходит звонок по указанному номеру или происходит переход в раздел Звонки с введенным номером (поведение может меняться в зависимости от девайса)

  Счетчики в стики-версии:
    - tags: no_assessors
    - do: получить выдачу по запросу '/turbo?stub=widget-feedback/sticky.json'
    - assert: на странице есть фиксированный виджет обратной связи с левом нижнем углу
    - tech: в баобаб-дереве есть узел '$page.extras.widget-feedback.call'
    - tech: по клику на кнопку звонка отправляется правильный баобаб-id для узла '$page.extras.widget-feedback.call'

  Счетчики в форме обратной связи через порталы:
    - tags: no_assessors
    - do: получить выдачу по запросу '/turbo?stub=widget-feedback/form-custom.json'
    - assert: на странице есть виджет обратной связи
    - tech: в баобаб-дереве есть узел '$page.$main.$result.widget-feedback.callback.modal.button'
    - do: кликнуть на кнопку заказа обратного звонка
    - tech: сработает счетчик узла '$page.$main.$result.widget-feedback.callback'
    - assert: должна показаться форма обратного звонка
    - do: кликнуть на кнопку 'Закрыть'
    - tech: отработает счетчик узла '$page.$main.$result.widget-feedback.callback.modal.button'

files:
# - features/blocks/widget-feedback/widget-feedback.ex-gemini.hermione.js
  - features/blocks/widget-feedback/widget-feedback.hermione.js

v-team: Turbo

manager: tanzwuta

qa-engineer: olga0321, dakhetov

tlds: none
