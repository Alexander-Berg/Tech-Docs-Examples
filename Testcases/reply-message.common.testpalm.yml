feature: Контекстное меню (Ответить)

import-steps:
    - tests/hermione/suites/messenger/shared-steps/open-messenger.testpalm.steps.yml

tlds: ru

specs:

    Пустой ответ на сообщение:
        - attach: Авторизация и открытие чата yamb
        - do: отправить произвольное сообщение в чат c пользователем stas.mihailov666
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на отправленное сообщение
        - do: в контекстном меню нажать "Ответить"
        - assert: reply сообщение прикрепилось к полю ввода чата
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_14-45-27.png]
        - do: нажать на кнопку отправить
        - assert: сообщение отправлено и отобразилось в чате как "Пересланное сообщение"
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_14-46-16.png]

    Ответ с текстом на сообщение:
        - attach: Авторизация и открытие чата yamb
        - do: отправить произвольное сообщение в чат c пользователем stas.mihailov666
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на сообщение
        - do: в контекстном меню нажать "Ответить"
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_14-45-27.png]
        - do: ввести произвольный текст в поле ввода чата
        - do: нажать на кнопку отправить
        - assert: сообщение отправлено и отобразилось в чате
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_19_novyh_soobschenii_2019-02-05_00-40-20.png]

    Подскролл к reply сообщению:
        - automation:
        - attach: Авторизация и открытие чата yamb
        - do: отправить то количество сообщений c пользователем stas.mihailov666, что бы был доступен скролл в контейнере
        - do: дождаться сообщений от бота
        - do: открыть контекстное меню первого отправленного сообщения, нажав правой кнопкой мыши(desktop) или тапнув(touch) на сообщение
        - do: в контекстном меню нажать "Ответить"
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_14-45-27.png]
        - do: ввести произвольный текст в поле ввода чата
        - do: нажать на кнопку отправить
        - assert: сообщение отправлено и отобразилось в чате
        - do: нажать на текст reply сообщения
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_19_novyh_soobschenii_2019-02-05_00-51-54.png]
        - assert: |
            произошел подскролл к reply сообщению
            reply сообщение находится в самом верху видимой части чата

    Ответ на файл [manual]:
        - automation: MSSNGRFRONT-3609
        - attach: Авторизация и открытие чата yamb
        - do: отправить любой файл (весом < 50 МБ) в чат c пользователем stas.mihailov666
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на пустую область слева от отправленного файла
        - do: в контекстном меню нажать "Ответить"
        - assert: reply сообщение прикрепилось к полю ввода чата
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_11-30-34.png]
        - do: ввести произвольный текст в поле ввода чата
        - do: нажать на кнопку отправить
        - assert: сообщение отправлено и отобразилось в чате
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_11-33-55.png]

    Ответ на изображение [manual]:
        - automation: MSSNGRFRONT-3609
        - attach: Авторизация и открытие чата yamb
        - do: отправить любое изображение в чат c пользователем stas.mihailov666
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на пустую область слева от отправленного изображения
        - do: в контекстном меню нажать "Ответить"
        - assert: reply сообщение прикрепилось к полю ввода чата
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_11-27-38.png]
        - do: ввести произвольный текст в поле ввода чата
        - do: нажать на кнопку отправить
        - assert: сообщение отправлено и отобразилось в чате
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_11-28-47.png]

    Ответ на отправленный стикер:
        - attach: Авторизация и открытие чата yamb
        - do: отправить любой стикер в чат c пользователем stas.mihailov666
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на пустую область слева от отправленного стикера
        - do: в контекстном меню нажать "Ответить"
        - assert: reply сообщение прикрепилось к полю ввода чата
        - screenshot: пример отображения поля ввода [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_11-37-13.png]
        - do: ввести произвольный текст в поле ввода чата
        - do: нажать на кнопку отправить
        - assert: ответ отправлен и отобразился в чате
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_11-37-30.png]

    Отмена ответа с введенным текстом в поле ввода:
        - attach: Авторизация и открытие чата yamb
        - do: отправить произвольное сообщение в чат c пользователем stas.mihailov666
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на сообщение
        - do: в контекстном меню нажать "Ответить"
        - assert: reply сообщение прикрепилось к полю ввода чата
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_14-45-27.png]
        - do: ввести произвольное сообщение в поле ввода чата
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-06_18-12-37.png]
        - do: нажать на кнопку в виде крестика в прикрепленном reply сообщении к полю ввода чата
        - assert: |
            закрылось прикрепленное reply сообщение к полю ввода чата
            отменилось действие "Ответить" на сообщение
            сохранился введенный в поле ввода текст
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-06_18-15-22.png]

files:
    - tests/hermione/suites/messenger/message-history/context-menu/reply-message.common.hermione.ts

v-team: Chat

tags:
    - chamb
    - yamb
    - y-team
    - no_assessors
