feature: Основные проверки смоука виджет

specs:

    Авторизованным пользователем можно открыть чаты нажав на кнопку виджета[manual]:
        - automation:
        - description: Авторизованы в паспорте аккаунтом с привязанным номером телефона
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта

    Корректно открывается чат с непрочитанными сообщениями[manual]:
        - automation:
        - description: |
              Авторизованы в паспорте аккаунтом с привязанным номером телефона
              У данного пользователя в списке чатов есть чаты в которых есть непрочитанные сообщения (как в замьюченных чатах, так и в чатах в которых включены уведолмения)
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
              В превью чатов отображаются счетчики непрочитанных сообщений
        - do: Открыть любой чат с непрочитанными сообщениями в котором включены уведолмения и прочитать все непрочитанные
        - assert: |
              Открыто окно чата
              Все непрочитанные сообщения прочтены
        - do: Открыть любой чат с непрочитанными сообщениями в котороых выключены уведолмения и прочитать все непрочитанные
        - assert: |
              Открыто окно чата
              Все непрочитанные сообщения прочтены

#     На странице с поиском нет кнопки виджета[manual]:
#         - automation:
#         - description: Авторизованы в паспорте аккаунтом с привязанным номером телефона
#         - do: Открыть тестовый стенд
#         - assert: |
#               Тестовый стенд открыт
#               На странице есть кнопка "Мессенджер"
#         - do: В поле поиска ввести любой валидный запрос и нажать кнопку "Найти"
#         - assert: |
#               Открывается страница с результатами поиска
#               В правом нижнем углу отсутствует кнопка "Мессенджер"

    Не авторизованным пользователем можно открыть чаты нажав на кнопку виджета[manual]:
        - automation:
        - description: Не авторизованы в паспорте
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов отображается стандартный экран для начала общения
              Если в списке чатов есть диалоги с бизнесами, то отображаются эти чаты и есть кнопка "Войдите в аккаунт"

    Можно закрыть виджет с чатами нажатием на "Крестик" в шапке списка чатов[manual]:
        - automation:
        - description: |
              Данный тест-кейс можно проходить в авторизованном состоянии и не авторизованном состоянии
              При открытии виджета может появится Онбординг с кнопкой "Попробовать"
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта или отобразился экран для неавторизованного пользовател
        - do: Нажать на "Крестик" в шапке ввиджет
        - assert: Виджет с чатами был закрыт

    Можно закрыть виджет с чатами нажатием на кнопку "ESC"[manual]:
        - automation:
        - description: |
              Данный тест-кейс можно проходить в авторизованном состоянии и не авторизованном состоянии
              При открытии виджета может появится Онбординг с кнопкой "Попробовать"
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта или отобразился экран для неавторизованного пользовател
        - do: Нажать на область между надписью "Мессенджер" и кнопокй настроек в виде "шестеренки" в шапке
        - assert: В поле ввода был установлен фокус
        - do: Нажать на кнопку "ESC" на клавиатуре
        - assert: Виджет с чатами был закрыт

    Регистрация нового пользователя с подтверждением номера телефона и корректными данными, с установкой аватара[manual]:
        - automation:
        - description: |
              Пользователь не авторизован
              При октрытии виджета - может появится онбординг с кнопкой "Попробовать" (в этом случае нужно нажимать на данную кнопку)
              Важно, после нажатия на кнопку "Зарегестироваться" регистрация может быть завершена - это является ожидаемым поведением
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет со списокм чатов в неавторизованном состоянии
              Есть баннер "Войдите в аккаунт"
        - do: Нажать кнопку "Войти в аккаунт"
        - assert: Открыт экран авторизации (если открывается список контактов, есть кнопка "Войти в другой аккаунт")
        - do: Нажать "Создать ID" (если необходимо то перед этим нажаать кнопку "Войти в другой аккаунт")
        - assert: Открывается страница паспорта для регистрации нового пользователя
        - do: Заполнить корректно все поля и подтвержить номер телефона, после чего нажать кнопку "Зарегестрироваться"
        - assert: |
              Отркывается следующий эктан паспорта
              Есть надпись "Ваш аккаунт готов"
              Есть возможнос установить аватар новому пользователю, доступны кнопки "Выбрать фото" и "Пропустить"
        - do: Нажать на "Выбрать фото"
        - assert: Открывается файловый менеджер
        - do: Выбрать любое изобраежние и нажать "Выбрать"
        - assert: |
              Аватар выбран, можно изенять размер аватара
              Доступны кнопки "Сохрнаить фото" и "Пропустить"
        - do: Нажать на "Сохрнаить фото"
        - assert: |
              Пользователь зарегестрирован и авторизован
              В виджете открылся мессенджер
        - do: Нажать на "Шестеренку" в шапке списка чатов
        - assert: |
              Открылись настройки профиля
              Отображается аватар установленный на этапе регистрации
              Корректно отображается имя и фамилия вводимые на этапе регистрации

    Область под виджетом тапабельна, после закрытия виджета[manual]:
        - automation:
        - description: |
              Данный тест-кейс можно проходить в авторизованном состоянии и не авторизованном состоянии
              При прохождении тест-кейса необходимо уменьшить размеры браузера так, чтобы при открытии виджета, он закрывал какие-либо тапабельные ссылки или элементы страницы
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Уменьшить размер браузера согласно описанию в description
        - assert: Размер окна браузера был уменьшен
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Нажать на "Крестик" в шапке ввиджет
        - assert: Виджет с чатами был закрыт
        - do: Нажать на любую ссылку / элемент находившийся под виджетом
        - assert: Осуществляется корректный переход по ссылке / элементу

#     В авторизованном состоянии можно открыть чат с организацией[manual]:
#         - automation:
#         - description: Авторизованы в паспорте аккаунтом с привязанным номером телефона
#         - do: Открыть тестовый стенд
#         - assert:  Тестовый стенд открыт
#         - do: В поле поиска ввести "Квалифицированный сертификат электронной подписи" (если нет кнопи, но попробовать ввести "Цветы Москва" / "Цветы Новосибирск") и нажать кнопку "Найти"
#         - assert: |
#               Открывается страница с результатами поиска
#               В правом нижнем углу есть кнопка "Мессенджер"
#         - do: Найти в выдаче результатов результат где есть кнопка "Онлайн консультант" и нажать ее
#         - assert: |
#               Открывается виджет с чатами
#               Открыто окно с данной организацией

#     LU пользователем можно открыть чат с организацией[manual]:
#         - automation:
#         - description: Авторизованы в паспорте аккаунтом без привязанного номером телефона
#         - do: Открыть тестовый стенд
#         - assert:  Тестовый стенд открыт
#         - do: В поле поиска ввести "Квалифицированный сертификат электронной подписи" (если нет кнопи, но попробовать ввести "Цветы Москва" / "Цветы Новосибирск") и нажать кнопку "Найти"
#         - assert: |
#               Открывается страница с результатами поиска
#               В правом нижнем углу есть кнопка "Мессенджер"
#         - do: Найти в выдаче результатов результат где есть кнопка "Онлайн консультант" и нажать ее
#         - assert: |
#               Открывается виджет с чатами
#               Открыто окно с данной организацией

#     В не авторизованном состоянии можно открыть чат с организацией[manual]:
#         - automation:
#         - description: Данный тест-кейс необходимо проходить в не авторизовнном состоянии
#         - do: Открыть тестовый стенд
#         - assert:  Тестовый стенд открыт
#         - do: В поле поиска ввести "Квалифицированный сертификат электронной подписи" (если нет кнопи, но попробовать ввести "Цветы Москва" / "Цветы Новосибирск") и нажать кнопку "Найти"
#         - assert: |
#               Открывается страница с результатами поиска
#               В правом нижнем углу есть кнопка "Мессенджер"
#         - do: Найти в выдаче результатов результат где есть кнопка "Онлайн консультант" и нажать ее
#         - assert: |
#               Открывается виджет с чатами
#               Открыто окно с данной организацией

    Виджет закрывается после обновления страницы браузера[manual]:
        - automation:
        - description: |
              Данный тест-кейс можно проходить в авторизованном состоянии и не авторизованном состоянии
              При открытии виджета может появится Онбординг с кнопкой "Попробовать"
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта или отобразился экран для неавторизованного пользовател
        - do: Обновить страницу браузера
        - assert: |
              Страница обновлена
              Виджет с чатами закрыт

#     Виджет закрывается после введение нового запроса в поле поиска[manual]:
#         - automation:
#         - description: Данный тест-кейс можно проходить в авторизованном состоянии и не авторизованном состоянии
#         - do: Открыть тестовый стенд
#         - assert: Тестовый стенд открыт
#         - do: В поле поиска ввести любой валидный запрос и нажать кнопку "Найти"
#         - assert: |
#               Открывается страница с результатами поиска
#               В правом нижнем углу есть кнопка "Мессенджер"
#         - do: Нажать на кнопку "Мессенджер"
#         - assert: |
#               Открывается виджет с чатами
#               В списке чатов загрузились все чаты данного аккаунта или отобразился экран для неавторизованного пользователя
#         - do: В поле поиска ввести любой валидный запрос и нажать кнопку "Найти"
#         - assert: |
#               Страница обновлена и отображааются обновленые результаты поиска
#               Виджет с чатами закрыт

    В приватном чате при выключенных уведомлениях  нотификации не приходят и нет звуковых уведомлений, если это текстовое сообщение [manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом можно авторизоваться в вебе в любом другом браузере
              Необходимо также иметь два аккаунта - пользователь А (проверяемый) авторизован в основном браузере, пользователь Б (вспомогательный) - авторизован во втором браузере
              Между пользователями есть приватный чат, в котором выключены уведомления
              Создать чат между пользователем можно тут https://yandex.ru/chat
        - do: Под пользователем А открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть другую вкладку браузера
        - assert: Открыта новая вкладка браузера
        - do: В другом браузере под пользователем Б в приватном чате отправить сообщение пользователю А. Сообщение отправляется
        - assert: Пользователь А не получает уведомлений/нотификаций

    Групповой чат можно открепить, если он был закреплен [manual]:
        - automation:
        - description: |
              У авторизованного пользователя есть групповой чат в списке чатов
              Создать чат между пользователем можно тут https://yandex.ru/chat
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Кликнуть ПКМ / нажать лонгтапом по любому группповому чату
        - assert: Показывается контекстное меню этого чата
        - do: Нажать "Закрепить чат"
        - assert: Чат закреплен
        - do: Кликнуть ПКМ / нажать лонгтапом по закрепленному групповому чату
        - assert: Показывается контекстное меню этого чата
        - do: Нажать “Открепить чат”
        - assert: Чат откреплен и помещается в истории в зависимости от того, какое последнее сообщение было в нем

    Собственное текстовое сообщение можно переслать в другой чат добавив сообщение к самому Forward [manual]:
        - automation:
        - description: |
              У авторизованного пользователя есть приватный/групповой чат, в истории которого есть собственные сообщения (если таких сообщений нет - то отправить их в чат)
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Кликнуть ПКМ / тапнуть по сообщению из description
        - assert: Появляется контекстное меню для этого сообщения
        - do: Выбрать "Переслать"
        - assert: Появляется список чатов для пересылки сообщения
        - do: Выбрать любой чат, кроме чата из которого мы пересылаем сообщения
        - assert: |
              Открывается окно выбранного чата
              Фокус курсора находится в поле ввода
              Над полем ввода появилась плашка пересылаемого сообщения
        - do: В поле ввода ввести несколько символов и нажать кнопку “Отправить” на панели ввода сообщения
        - assert: Forward отправляется и отображается в окне чата
        - do: Авторизоваться другим участником чата, куда делался Forward
        - assert: Пользователь авторизован
        - do: Под пользователем Б открыть чат, куда делался Forward и проветрить его отображение
        - assert: Сообщение корректно отображается в окне чата

    При клике по текстовому сообщению в Reply нас скроллит до цитируемого текстового сообщения [manual]:
        - automation:
        - description: |
              У авторизованного пользователя есть приватный/групповой чат с историей в несколько экранов, в начале истории которого имеются текстовые сообщения (если такого чата нет - отправить в любой чат не менее 100 текстовых сообщений)
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Проскроллить историю чата в начало
        - assert: История чата проскроллена в начало
        - do: Кликнуть ПКМ / тпнуть по сообщению из description
        - assert: Появляется контекстное меню
        - do: Выбрать “Ответить”
        - assert: Фокус курсора находится в поле ввода и над полем ввода показывается reply на сообщение (если ран проходится на мобильном девайсе, то фокус курсора в поле ввода не поставится)
        - do: В поле ввода ввести несколько символов и нажать кнопку “Отправить” на панели ввода сообщения
        - assert: |
              Reply отправляется и отображается в окне чата
              Происходит проскролл в конец истории
        - do: Кликнуть по сообщению в reply
        - assert: |
              Произошел подскролл к цитируемому сообщению
              Сообщение было временно выделено
        - do: Авторизоваться другим участником чата из description
        - assert: Пользователь авторизован
        - do: Открыть чат из description
        - assert: Открывается окно данного чата
        - do: Кликнуть по сообщению в reply
        - assert: |
              Произошел подскролл к цитируемому сообщению
              Сообщение было временно выделено

    Собственное текстовое сообщение можно переслать в другой чат не добавляя сообщение к самому Forward [manual]:
        - automation:
        - description: |
              У авторизованного пользователя есть приватный/групповой чат, в истории которого есть собственные сообщения (если таких сообщений нет - то отправить их в чат)
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Кликнуть ПКМ / тапнуть по сообщению из description
        - assert: Появляется контекстное меню для этого сообщения
        - do: Выбрать "Переслать"
        - assert: Появляется список чатов для пересылки сообщения
        - do: Выбрать любой чат, кроме чата из которого мы пересылаем сообщения
        - assert: |
              Открывается окно выбранного чата
              Фокус курсора находится в поле ввода
              Над полем ввода появилась плашка пересылаемого сообщения
        - do: Нажать кнопку “Отправить” на панели ввода сообщения
        - assert: Forward отправляется и отображается в окне чата
        - do: Авторизоваться другим участником чата, куда делался Forward
        - assert: Пользователь авторизован
        - do: Под пользователем Б открыть чат, куда делался Forward и проветрить его отображение
        - assert: Сообщение корректно отображается в окне чата

    Можно удалить свое сообщение с текстом [manual]:
        - automation:
        - description: |
              У авторизованного пользователя А есть приватный/групповой чат с историей (в чате есть собственное текстовое сообщение)
              Пользователь Б находится в том же чате (У Вас есть доступ к данному пользователю - логин и пароль)
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Кликнуть ПКМ / тапнуть по своему текстовому сообщению
        - assert: Открылось контекстное меню сообщения
        - do: В контекстном меню выбрать "Удалить" и подтвердить удаление
        - assert: |
              Сообщение удаляется
              Вместо сообщения появился текст "Сообщение было уделено"
        - do: Пользователем Б посмотреть на сообщение, которое удаляли
        - assert: Вместо сообщения появился текст "Сообщение было уделено"

    Можно отредактировать собственное текстовое сообщение [manual]:
        - automation:
        - description: |
              У авторизованного пользователя А есть приватный/групповой чат с историей (в чате есть собственное текстовое сообщение)
              Пользователь Б находится в том же чате (У Вас есть доступ к данному пользователю - логин и пароль)
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Кликнуть ПКМ / тапнуть по своему текстовому сообщению
        - assert: Открылось контекстное меню сообщения
        - do: Выбрать “Редактировать”
        - assert: |
              Текст редактируемого сообщения находится в поле ввода
              Над полем ввода отображается плашка редактируемого сообщения
        - do: Ввести в поле ввода несколько символов
        - assert: В поле ввода к тексту добавляются вводимые символы
        - do: Нажать кнопку “Отправить” в панели ввода сообщения
        - assert: |
              Текст исходного сообщения меняется на то, которое мы изменили
              В баллуне данного сообщения появляется “карандаш”
        - do: Авторизоваться другим участником чата из description
        - assert: Пользователь авторизован
        - do: Открыть чат из description
        - assert: Открывается окно данного чата
        - do: Посмотреть на отредактированное текстовое сообщение
        - assert: |
              Текстовое сообщение было изменено
              В баллуне данного сообщения есть“карандаш”

    Вызываются коллекции эмодзи/стикерпаков при клике / тапе по кнопке смайлика [manual]:
        - automation:
        - description: |
              У авторизованного пользователя есть приватный/групповой чат
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат из списка чатов, кликнув / тапнув на чат
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть на иконку "смайлика" в поле ввода.
        - assert: Появляется панель Стикеров
        - do: Кликнуть / тапнуть на любой стикер в панели стикеров
        - assert: Стикер отправился в чат и корректно отображается

    Текстовое сообщение отправляется по кнопке Ввод на панели ввода сообщения [manual]:
        - automation:
        - description: |
              У авторизованного пользователя есть приватный/групповой чат
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат из списка чатов, кликнув / тапнув на чат
        - assert: Открывается окно чата
        - do: В поле ввода сообщения ввести несколько символов
        - assert: Вводимые символы отражаются в поле ввода
        - do: Нажать на кнопку "отправить" на панели ввода сообщения
        - assert: Сообщение отправляется и отображается в окне чата

    Через поле ввода можно призвать человека, который состоит в чате [manual]:
        - automation:
        - description: |
              У авторизованного пользователя есть общий групповой чат с пользователем А
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Ввести в поле ввода @ и начало имени пользователя А
        - assert: Над полем ввод появляется саджест, в котором есть пользователь А
        - do: Выбрать из саджеста пользователя А
        - assert: В поле ввода показывается меншен с отображаемым именем пользователя А
        - do: Отправить сообщение
        - assert: Сообщение отправилось

    Администратор чата может закрепить текстовое сообщение [manual]:
        - automation:
        - description: |
              У авторизованного пользователя есть групповой чат в истории которого есть собственное текстовое сообщение
              Авторизованный пользователь является администратором этого чата
              В данном чате состоят и другие пользователи
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Кликнуть ПКМ / тапнуть по сообщению из description
        - assert: Появляется контекстное меню
        - do: Выбрать "Закрепить сообщение"
        - assert: |
              Сообщение закреплено
              В окне чата появляется техническая запись содержащая имя администратора, закрепившего сообщение, и текст "обновил(а) информацию о чате"
        - do: Авторизоваться другим участником чата из description
        - assert: Пользователь авторизован
        - do: Открыть чат из description
        - assert: Открывается окно данного чата
        - do: Проверить отображение закрепленного сообщения
        - assert: |
            Сообщение закреплено
            В окне чата отображается техническая запись содержащая имя администратора и текст "обновил(а) информацию о чате"

    Удалить одного собеседника из группового чата может администратор [manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом можно авторизоваться в вебе в любом другом браузере
              Пользователь А (проверяемый) авторизован в основном браузере, пользователь Б (вспомогательный) - авторизован во втором браузере
              Между пользователями есть групповой чат, в котором пользователь А - администратор, пользователь Б - обычный участник
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Под пользователем А открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Кликнуть / Тапнуть по шапке чата
        - assert: Открылось окно управления чатом
        - do: Нажать на "Участники"
        - assert: Открыт блок участники
        - do: Удалить пользователя Б из чата нажатием по иконке с тремя точками напротив имени нужного участника в блоке участники и выбрав пункт удалить из чата
        - assert: Появляется окно подтверждения удаления пользователя из чата
        - do: Нажать на "Ок"
        - do: Авторизоваться Пользотваелем Б и октрыть список чатов
        - assert: |
              Открывается список чатов
              Чат из description отсутствует в списке чатов

    Можно добавить собеседника в групповой чат по ссылке [manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом можно авторизоваться в вебе в любом другом браузере
              Пользователь А (проверяемый) авторизован в основном браузере, пользователь Б (вспомогательный) - авторизован во втором браузере
              Пользователь А состоит в групповом чате, в котором является администратором и в котором не состоит пользователь Б (Важно, чтобы данный пользователь и ранее не состоял в этом чате). В данном чате включен ползунок Публичная ссылка
              Между пользователями есть общий чат
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Под пользователем А открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Кликнуть / Тапнуть по шапке чата
        - assert: |
              Открылось окно управления чатом
              Есть кнопка "Скопировать ссылку"
        - do: Нажать по кнопке "Скопировать ссылку"
        - assert: Появилось сообщение "Ссылка скопирована"
        - do:  Открыть общий чат с пользователем Б
        - assert: Чат открыт
        - do: Отправить в чат скопированную ранее ссылку
        - assert: Ссылка отправилась
        - do: Пользователем Б открыть виджет с чатами и открыть чат с инвайт ссылкой от пользователя А
        - assert: Открылось окно чата, в нем отображается сообщение с инвайт ссылкой от пользователя А
        - do: Нажат на инвайт-ссылку
        - assert: |
              Произошел переход в групповой чат
              В окне чат отображается история чата
              Доступна кнопка “Присоединиться”
        - do: Нажать на кнопку "Присоединиться"
        - assert: Появилась панель ввода, доступна отправка сообщений

    Пользователя не вылогинивает после авторизации и последующего обновления страницы браузера [manual]:
        - automation:
        - description: Необходимо быть не авторизованным в мессенджере и в яндекс.паспорте
        - do: Открыть https://passport.yandex.ru/ и авторизовааться
        - assert: Авторизация прошла успешно
        - do: В новой вкладке открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Обновить страницу браузера
        - assert: |
              Страница успешно обновлена
              Виджет с чатами закрыт
        - do: Нажать на кнопку "Чаты"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Закрыть вкладку в браузере, где был открыт виджет с чатами
        - assert: Браузер был закрыт
        - do: Открыть браузер и открыть в нем чаты в виджете
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта

    Файл размером менее 50МБ можно выбрать и отправить [manual]:
        - automation:
        - description: |
              Между пользователем А и Б есть общий чат (приватный/групповой)
              У Вас есть файл размером менее 50 МБ
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Пользователем А открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Открывается окно чата
        - do: Кликнуть / тапнуть по кнопке со скрепкой
        - assert: Открывается файловый менеджер
        - do: В открывшемся менеджере файлов выбрать файл размером менее 50 МБ и нажать кнопку отправки
        - assert: Открывается попап, в котором размещен файл и есть возможность добавить сообщение
        - do: Нажать кнопку отправки
        - assert: Файл отправляется
        - do: Авторизоваться Пользователем Б
        - assert: Пользователь авторизован
        - do: Открыть чат, куда отправлялся ранее файл размером менее 50 МБ
        - assert: Чат открыт
        - do: Проверить что файл доставлен и его можно скачать
        - assert: Файл доставлен и он скачивается

    Список чатов можно скроллить [manual]:
        - automation:
        - description: |
              У авторизованного пользователя в списке чатов более 20 чатов
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Проскроллить список чатов сверху вниз
        - assert: Список чатов корреткно скроллится
        - do: Проскроллить список чатов снизу вверх
        - assert: Список чатов корреткно скроллится

    В окне чата можно скроллить историю [manual]:
        - automation:
        - description: |
              У авторизованного пользователя есть приватный/групповой чат с историей сообщений в несколько экранов
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Проскроллить историю чата в самое начало переписки
        - assert: История чата корректно скроллится
        - do: Проскроллить историю чата в конец переписки
        - assert: История чата корректно скроллится

    Клик / Тап по уведомлению из приватного чата открывает нужный чат [manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2-ым вспомогательным аккаунтом можно авторизоваться в вебе в любом другом браузере
              Необходимо также иметь два аккаунта - пользователь А (проверяемый) авторизован в основном браузере, пользователь Б (вспомогательный) - авторизован во втором браузере
              Между пользователями есть приватный чат, в котором включены уведомления
              В настройках браузера включены уведомления, но выключен переключатель Получать фоновые уведомления
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Под пользователем А открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: В другом браузере под пользователем Б в приватном чате отправить сообщение пользователю А
        - assert: |
              Сообщение отправляется
              Пользователь А получает уведомление
        - do: Пользователем А Кликнуть / Тапнуть по уведомлению
        - assert: Открывается чат, из которого пришло уведомление

    Собеседника можно заблокировать через карточку контакта [manual]:
        - automation:
        - description: |
              У авторизованного пользователя А в списке чатов есть приватный чат с пользователем Б
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Под пользователем А открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Кликнуть ЛКМ/Тапнуть по шапке чата
        - assert: Открылась карточка пользователя
        - do: Проскроллить до кнопки "Заблокировать и скрыть"
        - assert: Появилась кнопка "Заблокировать и скрыть" в информации о чате
        - do: Нажать на пункт “Заблокировать и скрыть”
        - assert: Показывается пермишен с кнопками "Отмена" и "Ок"
        - do: В пермишене выбрать "Ок"
        - assert: |
              Закрылась карточка контакта и окно приватного чата
              Приватный чат с пользователем Б был скрыт в списке чатов
        - do: Открыть настройки нажав на шестеренку в шапке списка чатов
        - assert: Открылось модальное окно настроек с пунктом "Заблокированные пользователи"
        - do: Нажать на пункт "Заблокированные пользователи"
        - assert: |
              Появилось модальное окно с заблокированными пользователями,
              одним из них должен быть пользователь которого мы заблокировали ранее

    Сообщение 18+ в публичных чатах скрывается для собеседников [manual]:
        - automation:
        - description: |
              В качестве недопустимого контента можно использовать слово “Хуй”
              Авторизованным пользователем присоединиться к чату https://yandex.ru/chat/#/join/7d18cd3a-0cb7-40d9-913e-feb3a0b65584 в истории которого есть текстовые сообщения категории 18+ (если таких сообщений нет - отправить в этот чат любым собеседником такое сообщение)
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Посмотреть в окно чата на сообщение с неподобающим содержанием от другого пользователя или отправить такое соощение в чат
        - assert: Сообщение с шокирующим контентом скрыто балуном с надписью "Сообщение скрыто" (модерация может проходить не мгновенно)

    Сообщение удаляется в публичном чате, если модерация удалила данное сообщение [manual]:
        - automation:
        - description: |
              В качестве недопустимого контекнта можно использовать слово “купить героин в Москве”
              Авторизованным пользователем присоединиться к чату https://yandex.ru/chat/#/join/7d18cd3a-0cb7-40d9-913e-feb3a0b65584 в истории которого есть текстовые сообщения категории 18+ (если таких сообщений нет - отправить в этот чат любым собеседником такое сообщение)
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: Чат открыт
        - do: Отправить в чат сообщение с неподобающим содержанием из description
        - assert: |
              Сообщение отправлено
              Сообщение было удалено и вместо сообщение отображается техническая запись "Сообщение удалено модератором в связи с нрушением правил сообщества"

    Нельзя удалить сообщение собеседника [manual]:
        - automation:
        - description: |
              У авторизованного пользователя есть приватный/групповой чат с историей в котором он НЕ ЯВЛЯЕТСЯ АДМИНИСТРАТОРОМ
              В истории чата есть сообщения от другого пользователя следующего типа:текстовое, с изображением, с видео, с файлом, со ссылкой, с эмоджи, со стикером, с forward'ом (пересланным сообщением), c reply (процитированным сообщением)
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - do: Вызвать контекстное меню кликом ПКМ / тапом по текстовому сообщению от другого пользователя.
        - assert: В контекстном меню сообщения нет пункта "Удалить".
        - do: Вызвать контекстное меню кликом ПКМ / тапом по области изображения от другого пользователя.
        - assert: В контекстном меню сообщения нет пункта “Удалить”.
        - do: Вызвать контекстное меню кликом ПКМ / тапом по области с видео от другого пользователя.
        - assert: В контекстном меню сообщения нет пункта “Удалить”.
        - do: Вызвать контекстное меню кликом ПКМ / тапом по области сообщения с файлом от другого пользователя.
        - assert: В контекстном меню сообщения нет пункта “Удалить”.
        - do: Вызвать контекстное меню кликом ПКМ / тапом по области сообщения с ссылкой от другого пользователя (не по самой ссылке).
        - assert: В контекстном меню сообщения нет пункта “Удалить”.
        - do: Вызвать контекстное меню кликом ПКМ / тапом по сообщению с эмоджи от другого пользователя.
        - assert: В контекстном меню сообщения нет пункта “Удалить”.
        - do: Вызвать контекстное меню кликом ПКМ / тапом по области стикера от другого пользователя.
        - assert: В контекстном меню сообщения нет пункта “Удалить”.
        - do: Вызвать контекстное меню кликом ПКМ / тапом области сообщения с forward от другого пользователя.
        - assert: В контекстном меню сообщения нет пункта “Удалить”.
        - do: Вызвать контекстное меню кликом ПКМ / тапом на подпись к reply от другого пользователя.
        - assert: В контекстном меню сообщения нет пункта “Удалить”.

    Выход реализован через паспорт [manual]:
        - automation:
        - description: |
              Авторизованы в мессенджере и на сайте https://passport.yandex.ru/
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть в новой вкладке сайт https://passport.yandex.ru/
        - assert: Открывается страница Яндекс.Паспорта с данными авторизованного аккаунта из description
        - do: Осуществить выход из Яндекc.Паспорта (выход из аккаунта)
        - assert: Выход осуществлен успешно
        - do: Открыть вкладку с чатами
        - assert: |
              В мессенджере произошел логаут
              В списке чатов отсутствуют все чаты ранее авторизованного аккаунта

    Собственное текстовое сообщение можно открепить тапнув по крестику в плашке [manual]:
        - automation: MSSNGRFRONT-4859
        - description: |
              У авторизованного пользователя есть групповой чат в истории которого есть собственное закрепленное текстовое сообщение
              Авторизованный пользователь является администратором этого чата
              Помимо Вас в чате состоять другие пользователи
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Открыть любой чат, который соответствует описанию указанному в description
        - assert: |
              Чат открыт
              В окне чата отображается плашка с закрепленным сообщением
              В плашке справа отображается крестик
        - do: Кликнуть / тапнуть по крестику и подтвердить открепление сообщения
        - assert: Плашка с закрепленным сообщением не отображается
        - do: Авторизоваться другим участником этого чата и открыть список чатов
        - assert: Открывается список чатов
        - do: Открыть чат из description и проверить отсутствие плашки с закрепленным сообщением
        - assert: Плашка не отображается

    Поиск по чату. Поиск работает по тексту сообщений [manual]:
        - automation:
        - description: |
              У авторизованного пользователя есть приватный/групповой чат, в истории которого есть несколько одинаковых текстовых сообщений от другого пользователя (если такого сообщения нет - отправить другим пользователем в чат любое текстовое сообщение)
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: открыть чат из description
        - assert: чат открылся
        - do: Нажать на меню три точки в шапке чата
        - assert: Появилось контекстное меню
        - do: Нажать на "Поиск"
        - assert: |
              под шапкой чата появилась панель поиска с полем ввода
              в поле ввода плейсхолдер "Поиск" и фокус курсора находится в поле ввода (если ран проходится на мобильном девайсе, то фокус курсора в поле ввода не поставится)
              рядом с полем ввода есть стрелки переключения результатов поиска и "крестик" закрытия режима поиска
        - do: ввести в поле поиска слово, которое использовалось в чате более одного раза
        - assert: |
              введенное слово отображается в поле поиска
              в панели поиска отображается число найденных результатов
              чат проскроллил к самому свежему результату поиска (если результат поиска находится в пределах просматриваемого экрана - то подскролл не происходит)
              отображенный результат поиска временно выделен

    В списке чатов есть поиск [manual]:
        - automation:
        - description: |
              Создать чат между пользователями можно тут https://yandex.ru/chat
              У авторизованного пользователя в списке чатов есть групповые чаты
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
        - do: Проверить наличие поиска над списокм чатов
        - assert: |
              Над списком чатов есть поле поиска
              В поле ввода есть заполнитель с текстом "Поиск"
        - do: Ввести в поле ввода название любого чата, в котором Вы состоите
        - assert: В секции "Чаты" в результатах поиска есть искомый чат

    После восстановления интернет-соедиенния список чатов остается неизменным[manual]:
        - automation:
        - description: |
              У авторизованного пользователя в списке чатов есть более 10 чатов
              Среди этих чатов часть чатов закрепленные чаты
              Создать чат между пользователями можно тут https://yandex.ru/chat
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
              Закрепленные чаты разделены разделительной линией
        - do: Отключить интернет-соединение
        - assert: |
              интернет-соединение отключено
              в списке чатов, в левом углу, появилась надпись об повтором подключении
        - do: Восстановить интернет-соединение
        - assert: |
              Интернет-соединение было восстановлено
              Все закрепленные чаты в списке чатов остались закрепленными
              Все остальные чаты в списке чатов сортируются согласно последнему сообщению в чате
              **Важно:** Если тест-кейс проходится на Яндекс.Услугах, то услуги могут перезагрузить страницу браузера - это ожидаемое поведение

    Можно создать групповой чат[manual]:
        - automation:
        - description: У авторизованного пользователя А в списке контактов есть пользователь Б
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
              На списке чатов есть кнопка создания нового чата
        - do: Нажать на кнопку "Создать новый чат"
        - assert: |
              Открывается окно со списком контактов
              Над списком контактов есть кнопки "Новый груповой чат" и "Новый канал"
        - do: Нажать на "Новый групповой чат"
        - assert: |
              Отрывается окно создания группового чата
              Есть поля для ввода названия чата и описания чата
              Есть возможность загрузить аватар чата
        - do: Ввести название и описание чата. Загрузить аватар для чата и нажать кнопку "Добавить участников"
        - assert: Открывается окно добавления участников
        - do: Выбрать в списке контактов пользователя Б и нажать кнопку "Создать чат"
        - assert: |
              Создался групповой чат с введенным названием и описанием
              Аватар у чата совпадает с тем, который загружался ранее в шагах
              Участники созданного группового чата - Вы и Пользователь Б

    Можно перейти в полноэкранную версию чатов со списка чатов[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть другие чаты
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
              В шапке списка чатов есть кнопка перехода в полноэкранный режим
        - do: Нажать на кнопку перехода в полноэкранный режим
        - assert: |
              В браузере в новой вкладке открылся мессенджер
              В списке чатов загрузились все чаты данного аккаунта

    Можно перейти в полноэкранную версию чатов с окна чата[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть другие чаты
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
              В шапке списка чатов есть кнопка перехода в полноэкранный режим
        - do: Отркыть любой чат
        - assert: |
              Открылось окно чата
              В шапке чата есть кнопка перехода в полноэкранный режим
        - do: Нажать на кнопку перехода в полноэкранный режим
        - assert: |
              В браузере в новой вкладке открылся мессенджер
              Открыто окно чата в котором мы был в виджете

    Можно открыть настройки профиля[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть другие чаты
        - do: Открыть тестовый стенд
        - assert: |
              Тестовый стенд открыт
              На странице есть кнопка "Мессенджер"
        - do: Нажать на кнопку "Мессенджер"
        - assert: |
              Открывается виджет с чатами
              В списке чатов загрузились все чаты данного аккаунта
              В шапке списка чатов есть кнопка настроек
        - do: Нажать на "шестеренку"
        - assert: Открывается страница с настройками профиля

files: []

v-team: Chat

tags:
  - release

tlds: none
