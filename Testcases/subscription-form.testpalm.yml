feature: Ввод платежных реквизитов

specs:
  beforeEach:
    - do: авторизоваться под администратором и перейти по ссылке "/portal/balance/contract"
  Положительные:
    1. Внешний вид страницы с формой создания нового плательщика:
      - do: выбрать "Новый плательщик" из списка плательщиков
      - assert: по-умолчанию выбран раздел "Физическое лицо"
      - screenshot: внешний вид страницы ввода реквизитов [plain]

    2. Ссылка на оферту:
      - assert: ссылка на оферту есть
      - assert: ссылка ведет на "https://yandex.ru/legal/oferta_connect"

    3. Ссылка на помощь:
      - assert: ссылка на помощь есть
      - assert: ссылка ведет на "https://yandex.ru/support/connect/troubleshooting.html"

    4. Юридическое лицо без промокода:
      - do: выбрать "Новый плательщик" из списка плательщиков
      - do: выбрать вкладку "юридическое лицо"
      - screenshot: внешний вид формы [plain]
      - do: |
          в поле "полное название организации" ввести "ООО "ромашка"",
          в поле "телефон" ввести "1234567"
          в поле "электронный адрес" ввести "111@mail.ru"
          в поле "почтовый индекс" ввести "192076"
          в поле "адрес для корреспонденции" ввести "СПБ, Литейный 50"
          в поле "юридический адрес" ввести "СПБ, Литейный 50"
          в поле "ИНН" ввести "7826125214",
          в поле "КПП" ввести "784001001",
          в поле "БИК" ввести "044030653",
          в поле "р/с" ввести "40703810955000100001"
      - screenshot: внешний вид заполненной формы [form-filled]
      - do: нажать на кнопку "Сохранить"
      - assert: произошел переход на страницу с полем пополнения баланса

    5. Физическое лицо без промокода:
      - do: выбрать "Новый плательщик" из списка плательщиков
      - do: выбрать вкладку "физическое лицо"
      - screenshot: внешний вид формы [plain]
      - do: |
          в поле "фамилия" ввести "Иванов"
          в поле "имя" ввести "Иван"
          в поле "отчество" ввести "Иванович"
          в поле "телефон" ввести "123456"
          в поле "электронная почта" ввести "111@mail.ru"
      - screenshot: внешний вид заполненной формы [form-filled]
      - do: нажать на кнопку "Сохранить"
      - assert: произошел переход на страницу с полем пополнения баланса

    6. Внешний вид страницы с плательщиками:
      - assert: по-умолчанию выбран первый плательщик из списка
      - screenshot: внешний вид страницы [plain]

  Отрицательные:
    1. Юридическое лицо, обязательные поля не заполнены:
      - do: выбрать "Новый плательщик" из списка плательщиков
      - do: выбрать вкладку "юридическое лицо"
      - do: нажать на кнопку "Сохранить"
      - assert: появились подсказки о незаполненных полях
      - screenshot: внешний вид формы с ошибками [form-errors]
      - assert: переход не произошел

    2. Физическое лицо, обязательные поля не заполнены:
      - do: выбрать "Новый плательщик" из списка плательщиков
      - do: выбрать вкладку "физическое лицо"
      - do: нажать на кнопку "Сохранить"
      - assert: появились подсказки о незаполненных полях
      - screenshot: внешний вид формы с ошибками [form-errors]
      - assert: переход не произошел

files:
  - tests/hermione/suites/payment/subscription-form.js

priority: blocker

tlds:
 - ru
 - com

tags:
  - smoke_test_assessors
  - regression
  - smoke_test
  - reviewed
  - smoke_test_mini
