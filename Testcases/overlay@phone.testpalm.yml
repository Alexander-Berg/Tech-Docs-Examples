feature: Шторка

params:
  exp_flags:
    - analytics-disabled=0
    - turbo-overlay-drawer=1
    - turbo-single-overlay-force=1
    - turbo-app-morda-redesign=1

browsers:
  notFor:
    - ios-safari-9-touch
    - ios-safari-10-touch
    - ios-safari-11-touch
    - ios-safari-12-touch
    - searchapp

specs:
  aliases:
    - &before
      - do: получить выдачу по запросу 'site:super01.ru каталог'
      - assert: на выдаче присутствует турбо-сниппет с серой иконкой ракеты справа от гринурла 
      - do: кликнуть по любой ссылке турбо-сниппета
      - assert: открылась страница магазина в 'шторке' [https://jing.yandex-team.ru/files/skurhanski/SbagBdO7r8.png]
      - do: при дальнейшей проверке указанных ожидаемых результатов обращайте внимание на любые некорректные на ваш взгляд поведения, основываясь на свой опыт использования web-приложений (например, сохранение позиции при переходах туда-обратно кнопками на устройстве, пустые экраны при переходах, кривая верстка, скачкИ элементов, плавность скролла, неработающая функциональность и т.п.)
      - assert: нижняя панель видна не полностью [https://jing.yandex-team.ru/files/skurhanski/chrome_GkNaVFOmRC.png]
      - do: кликнуть по пиктограмме Главная (в виде домика) на нижней панели
      - assert: открыласть главная страница магазина
    - &fasets
      - assert: на странице отображается список категорий [https://jing.yandex-team.ru/files/skurhanski/chrome_EoPP1eT2Dn.png] 
      - assert: клик по кнопке "Ещё N разделов" (при ее наличии) раскрывает спрятанный список
      - assert: клик названию раздела ведет в соответствующий раздел магазина [https://jing.yandex-team.ru/files/skurhanski/chrome_85lGJS9q4H.png]
    - &recommendation
      - assert: на странице отображается галерея с рекомендуемыми товарами [https://jing.yandex-team.ru/files/skurhanski/chrome_vj3dLgUZqv.png]
      - assert: галерея скроллится корректно в разные стороны
      - assert: клик по кнопке "В корзину" на карточке галереи кладет товар в корзину
      - assert: клик по карточке в галерее открывает страницу выбранного товара [https://jing.yandex-team.ru/files/skurhanski/chrome_Fwb5cNtgSU.png]
      - do: перейти в корзину и удалить товары оттуда
    - &discountOrPopularGallery
      - assert: на странице отображается галерея с серыми большими карточками ("Товары со скидками" либо "Популярные категории") [https://jing.yandex-team.ru/files/skurhanski/chrome_4wRNaEp5G5.png]
      - assert: галерея скроллится корректно в разные стороны
      - assert: клик по карточке в галерее ведет в соответствующий раздел магазина
    - &about
      - assert: на странице отображается блок "О магазине" (кол-во информации в блоке может различаться в зависимости от магазина) [https://jing.yandex-team.ru/files/skurhanski/chrome_MxXTOZ3SgN.png]
      - do: проверить ссылки в блоке "О магазине" на корректность их работы
      - assert: кликабельные элементы в блоке "О магазине" работают ожидаемо
    - &popular
      - assert: на странице отображается галерея с популярными товарами [https://jing.yandex-team.ru/files/skurhanski/chrome_WQ39Z2SCZb.png]
      - assert: галерея скроллится корректно в разные стороны
      - assert: клик по кнопке "В корзину" на карточке галереи кладет товар в корзину
      - assert: клик по карточке в галерее открывает страницу выбранного товара [https://jing.yandex-team.ru/files/skurhanski/chrome_OMMjcv1aSg.png]
      - do: перейти в корзину и удалить товары оттуда
    - &cheapToday
      - assert: на странице отображается галерея с выгодными товарами [https://jing.yandex-team.ru/files/skurhanski/chrome_nggbpkU4J9.png]
      - assert: галерея скроллится корректно в разные стороны
      - assert: клик по кнопке "В корзину" на карточке галереи кладет товар в корзину
      - assert: клик по карточке в галерее открывает страницу выбранного товара [https://jing.yandex-team.ru/files/skurhanski/chrome_3OEUi2VfEv.png]
      - do: перейти в корзину и удалить товары оттуда
    - &allProducts
      - assert: в конце страницы есть блок "Все товары" [https://jing.yandex-team.ru/files/skurhanski/chrome_P6e4eUWWqp.png]
      - do: проскроллить странницу вверх, чтобы подгружались новые товары в разделе "Все товары"
      - assert: подгружаются новые карточки товаров по мере скролла страницы
      - do: в любой из подгруженных карточек кликнуть по кнопке "В корзину"
      - assert: выбранный товар добавился в корзину
      - do: кликнуть по любой подгруженной карточке
      - assert: открылась карточка выбранного товара [https://jing.yandex-team.ru/files/skurhanski/chrome_ral0fVr5FY.png]
      - do: перейти в корзину и удалить товары оттуда
    - &checksCatalog
      - do: кликнуть по пиктограмме "Каталог" на нижней панели
      - assert: осуществился переход в корень каталога
      - do: проверить скролл страницы и элементов на ней
      - do: проверить отображение картинок и новых карточек при скроллах
      - do: проверить работу ссылок в разделе со списком категорий
      - assert: раздел со списком категорий выглядит примерно так [https://jing.yandex-team.ru/files/skurhanski/chrome_bCTQtgX2x0.png]
      - do: проверить, что товар добавляется в корзину
      - do: проверить, что карточки кликаются и открываются
      - do: проверить прочие кликабельные элементы на корректность их работы
    - &cart
      - do: добавьте около десятка произвольных товаров в корзину и перейдите в нее
      - assert: все добавленные товары присутствуют в корзине
      - assert: примерный внешний вида заполненной корзины [https://jing.yandex-team.ru/files/skurhanski/chrome_IxfURmhJye.png]
      - assert: при изменении количества или удалении товара соответственно изменяется итоговая сумма
      - do: проверить, что карточки кликаются и открываются
      - do: при нажатии на кнопку "Оформить заказ" появляется страница с формой для заполнения данных покупателя
      - assert: если пользователь незалогинен, поля не будут заполнены
      - assert: если пользователь залогинен, то поля будут предзаполнены [https://jing.yandex-team.ru/files/skurhanski/chrome_WNLHoFveK9.png]
      - do: проверить прочие кликабельные элементы на корректность их работы в разделе Корзина (не стоит только выполнять отправку заказа в магазин)
      - do: удалить все товары из корзины
    - &detail
      - do: кликнуть по любой карточке товара
      - assert: открылась карточка товара
      - do: проверить, что картинки и кнопки в карточке кликаются и работают корректно
      - do: проверить, что картинки товара перелистываются (в случае наличия в карточке слайдера из картинок)
      - do: при нажатии на кнопку 'Быстрый заказ' (при ее наличии) появляется страница с формой для заполнения данных покупателя

  Магазин 'super01.ru':
    beforeEach:
      - *before
    Категории:
      - automation: SERPTEST-1719
      - *fasets
    Рекомендации:
      - automation: SERPTEST-1719
      - *recommendation
    Большие карточки:
      - automation: SERPTEST-1719
      - *discountOrPopularGallery
    О магазине:
      - automation: SERPTEST-1719
      - *about
    Популярные товары:
      - automation: SERPTEST-1719
      - *popular
    Выгодно сегодня:
      - automation: SERPTEST-1719
      - *cheapToday
    Все товары:
      - automation: SERPTEST-1719
      - *allProducts
    Каталог:
      - automation: SERPTEST-1719
      - *checksCatalog
    Корзина:
      - automation: SERPTEST-1719
      - *cart
    Карточка товара:
      - automation: SERPTEST-1719
      - *detail

  Закрытие шторки:
    beforeEach:
      - do: получить выдачу по запросу 'site:super01.ru каталог'
      - assert: на выдаче присутствует турбо-сниппет с серой иконкой ракеты справа от гринурла 
      - do: кликнуть по любой ссылке турбо-сниппета
      - assert: открылась страница магазина в 'шторке' [https://jing.yandex-team.ru/files/skurhanski/SbagBdO7r8.png]

    Свайпом вниз:
      - automation: SERPTEST-1719
      - do: свайпнуть шторку вниз
      - assert: шторка закрылась, отображаются результаты поисковой выдачи

    Крестиком:
      - automation: SERPTEST-1719
      - do: кликнуть на крестик в шторке в правом верхнем углу
      - assert: шторка закрылась, отображаются результаты поисковой выдачи

    Крестиком из фулскрина:
      - automation: SERPTEST-1719
      - do: свайпнуть шторку вверх
      - assert: шторка растянулась на весь экран
      - do: кликнуть на крестик в шторке в правом верхнем углу
      - assert: шторка закрылась, отображаются результаты поисковой выдачи

    Отсутствие крестика:
      - automation: SERPTEST-1719
      - do: обновить страницу
      - assert: страница магазина растянулась на весь экран
      - assert: в правом верхнем углу отсутствует крестик
      - do: попытаться свайпнуть страницу вниз, как бы закрывая шторку
      - assert: страница магазина не закрылась после свайпа

files: []

v-team: Turbo

tlds: ru

tags: 
 - ecom_spa
 - spa_drawer
