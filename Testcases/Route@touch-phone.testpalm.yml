feature: Колдунщик маршрутов

specs-integration:
  Проверка наличия элементов:
    - do: получить выдачу по запросу 'как добраться'
    - assert: |
        Появился колдунщик маршрутов,
        в колдунщике есть тайтл, описание, кнопки "На машине" и "Транспортом"

specs:
  Проверка внешнего вида:
    - tags: 
        - smoke
        - pp_new_core
    - do: получить выдачу по запросу 'как добраться'
    - assert: появился маршрутный сниппет
    - screenshot: пример внешнего вида [transport]

  Проверка ссылок и счетчиков:
    - do: получить выдачу по запросу 'как добраться'
    - assert: появился маршрутный сниппет
    - do: тапнуть на тайтл колдуншика
    - assert: В новой вкладке открылись Яндекс.Карты с открытой пустой формой построения маршрута
    - tech: сработал счетчик path= /$page/$main/$result/title
    - assertMetrics: '*'

  Проверка кнопок с простым запросом:
    - do: получить выдачу по запросу 'как добраться'
    - assert: появился маршрутный сниппет
    - do: тапнуть по кнопке 'на машине'
    - assert: В новой вкладке открылись Яндекс.Карты с открытой пустой формой построения маршрута
    - do: заполнить поля "откуда" и "куда"
    - assert: |
        На карте отобразился город, в котором находится пользователь
        Способ передвижения указан 'На машине'
    - tech: сработал счетчик path= /$page/$main/$result/actions/go-auto
    - do: вернуться на страницу выдачи запроса 'как добраться' и тапнуть по кнопке 'на транспорте'
    - assert: В новой вкладке открылись Яндекс.Карты с открытой пустой формой построения маршрута
    - do: заполнить поля "откуда" и "куда"
    - assert: |
        На карте отобразился город, в котором находится пользователь
        Способ передвижения указан 'На транспорте'
    - tech: сработал счетчик path= /$page/$main/$result/actions/go-mt
    - assertMetrics: '*'

  Проверка кнопок с указанием точек маршрута:
    - do: получить выдачу по запросу 'маршрут из балашихи в москву'
    - assert: появился маршрутный сниппет
    - do: тапнуть по кнопке 'на машине'
    - assert: |
        В новой вкладке открылись Яндекс.Карты с заполненной формой построения маршрута,
        Способ передвижения указан 'На машине',
        Присутствует построенный маршрут
    - tech: сработал счетчик path= /$page/$main/$result/actions/go-auto
    - do: вернуться на страницу выдачи запроса 'маршрут из балашихи в москву' и тапнуть по кнопке 'на транспорте'
    - assert: |
        В новой вкладке открылись Яндекс.Карты с заполненной формой построения маршрута,
        Способ передвижения указан 'На транспорте',
        Присутствует построенный маршрут
    - tech: сработал счетчик path= /$page/$main/$result/actions/go-mt
    - assertMetrics: '*'

files:
  - src/features/Route/Route.test/Route@touch-phone.hermione.js
  - src/features/Route/Route.test/Route@touch-phone.hermione.e2e.js

tlds: all

v-team: VanillaGeo

regions:
  ru: 213
  by: 157
  kz: 163
  ua: 143

counter: /$page/$main/$result[@wizard_name="route"]/title

tags: hasE2E
