feature: beruSearchList

specs:
  Внешний вид блока:
    - do: открыть страницу примера блока beruSearchList (/turbo?stub=berusearchlist/default.json)
    - assert: должны быть виден блок со сниппетами
    - screenshot: внешний вид соответствует скриншоту [plain]

  Проверка кликабельности cниппета:
    - do: открыть страницу примера блока beruSearchList (/turbo?stub=berusearchlist/default.json)
    - do: найти первый сниппет и кликнуть по нему
    - assert: должна открыться страница КМ в этой же вкладке
  Проверка кликабельности кнопки "В коризну":
    - do: открыть страницу примера блока beruSearchList (/turbo?stub=berusearchlist/default.json)
    - do: найти первый сниппет
    - do: в нем найти кнопку "В корзину"
    - assert: должна открыться страница в новой вкладке ведущая на 'https://market-click2.yandex.ru/test'
  Клик по сниппету должен инициировать отправку гола в метрику:
    - do: открыть страницу примера блока beruSearchList (/turbo?stub=berusearchlist/default.json&exp_flags=analytics-disabled=0)
    - do: кликнуть по первому сниппету
    - assert: "цель 'SNIPPET-NAVIGATE' должна отправится в счетчик '47628343' c параметрами {isTest: true, skuId: '100131944742', offerId: 'f239fk3', marketSkuCreator: 'market', price: 4800, oldPrice: 9473, showPlaceId: 'dfjsf7'}"
  Клик по кнопке "В корзину" должен инициировать отправку гола в метрику:
    - do: открыть страницу примера блока beruSearchList (/turbo?stub=berusearchlist/default.json&exp_flags=analytics-disabled=0)
    - do: кликнуть по кнопке "В корзину" в первом сниппете
    - assert: "цель 'ADD-TO-CART' должна отправится в счетчик '47628343' c параметрами {isTest: true, skuId: '100131944742', offerId: 'f239fk3', marketSkuCreator: 'market', price: 4800, oldPrice: 9473, showPlaceId: 'dfjsf7'}"
  При попадании сниппета в видимую область экрана, должен отправлять гол видимости элемента:
    - do: открыть страницу примера блока beruSearchList (/turbo?stub=berusearchlist/default.json&exp_flags=analytics-disabled=0)
    - assert: "цель 'SNIPPET-VISIBLE' должна отправится в счетчик '47628343' c параметрами {isTest: true, skuId: '100131944742', offerId: 'f239fk3', marketSkuCreator: 'market', price: 4800, oldPrice: 9473, showPlaceId: 'dfjsf7'}"
    - assert: "цель 'SNIPPET-VISIBLE' должна отправится в счетчик '47628343' c параметрами {isTest: true, skuId: '100131944741', offerId: '32dfs234', marketSkuCreator: 'market', price: 9473, showPlaceId: 'dfjsf7'}"
files:
    - platform/components/BeruSearchList/__tests__/BeruSearchList@phone.hermione.js

v-team: Beru

manager: seoshnik

tlds: none
