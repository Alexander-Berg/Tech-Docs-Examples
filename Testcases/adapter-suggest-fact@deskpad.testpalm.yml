feature: Факт
type: Саджест

specs:
  Ссылки в карточке:
    - do: получить выдачу Поиска по запросу 'символ олимпийских игр 2018' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: на первой позиции выдачи есть Фактовый ответ
    - screenshot: внешний вид [plain]
    - assertMetrics: '*'
    - do: кликнуть на синий тайтл Фактового ответа
    - assert: в новой вкладке открылся сайт-источник информации
    - tech: проверить счетчик на синем тайтле
    - assertMetrics: '*'

  Карточка с определением, тайтлом и гринурлом:
    - do: получить выдачу Поиска по запросу 'Кто такой прокурор' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: появляется белая карточка с фактом
    - screenshot: Карточка без картинок [plain]

  Карточка с галереей и описанием:
    - do: получить выдачу Поиска по запросу 'кит' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: появляется белая карточка с фактом
    - screenshot: Факт с галереей [plain]

  Карточка с горизонтальной картинкой - 1:
    - params:
        foreverdata: '1113257440'
    - do: получить выдачу Поиска по запросу 'foreverdata'
    - assert: появляется белая карточка с фактом
    - do: кликнуть на тумбу Фактового ответа
    - assert: в новой вкладке открылся сервис Яндекс.Картинки
    - tech: проверить счетчик на тумбе
    - screenshot: На планшетах факт с галереей [plain]

  Официальный сайт:
    - params:
        foreverdata: '1307901333'
    - do: получить выдачу Поиска по запросу 'foreverdata'
    - assert: появляется белая карточка с фактом, рядом с адресом сайта есть синяя галка
    - screenshot: пример внешнего вида [verified]

  ЦБ РФ:
    - params:
        foreverdata: '887165590'
    - do: получить выдачу Поиска по запросу 'foreverdata'
    - assert: появляется белая карточка с фактом, рядом с адресом сайта есть синяя галка с подписью "ЦБ РФ"
    - screenshot: пример внешнего вида [cbrf]

  Кириллический домен:
    - do: получить выдачу Поиска по запросу 'где находится мвд зао москвы'
    - assert: появляется белая карточка с фактом, рядом с адресом сайта отображается иконка сайта
    - screenshot: пример внешнего вида [cyrillic]

  Шторка обратной связи:
    - do: получить выдачу по запросу 'сколько живут попугаи'
    - assert: на первой позиции выдачи есть фактовый ответ
    - do: кликнуть по ссылке "Сообщить об ошибке"
    - assert: открылось модальное окно для обратной связи
    - screenshot: внешний вид модального окна для обратной связи [feedback-drawer]

specs-integration:
  Проверка наличия элементов:
    - do: получить выдачу по запросу 'принятие великой хартии вольностей в англии год' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: на первой позиции выдачи есть Фактовый ответ
    - counter: /$page/$main/$result[@wizard_name="suggest_fact"]/title

  Проверка наличия факта c википедии:
    - counter: /$page/$main/$result[@wizard_name="suggest_fact" and @subtype="wikipedia_fact"]/title
    - do: получить выдачу по запросу 'субд' _ALTERNATIVE_SEARCH_QUERIES_
    - assert: |
        на первой позиции выдачи есть быстрый ответ с сайта wikipedia.org
        в быстром ответе есть синий тайтл
        в быстром ответе есть гринурл

files:
  - features/adapter-suggest-fact/adapter-suggest-fact@deskpad.hermione.js
  - features/adapter-suggest-fact/adapter-suggest-fact@common.hermione.e2e.js

v-team: Facts

tags: ['smoke']

tlds:
  - ru
  - by
  - ua
  - kz
  - uz
  - com.tr
  - com

counter: /$page/$main/$result[@wizard_name="suggest_fact"]

priority: high
