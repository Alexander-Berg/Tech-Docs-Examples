feature: Экстралинки

params:
  exp_flags:
    - beauty_kebab=1

specs:
  Проверка присутствия в органическим сниппете:
    - tags: pp_new_core
    - params:
        foreverdata: '3457278179'
        exp_flags: 'beauty_kebab=1'
        data_filter: 'achievement'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: у сниппета присутствует кебаб-меню (три точки)

  Проверка открытия и закрытия меню:
    - tags: pp_new_core
    - do: получить выдачу по запросу 'собачки' и кликнуть на кнопку кебаб-меню (три точки рядом с заголовком)
    - assert: открылось меню
    - screenshot: внешний вид соответствует скриншоту [open]
    - do: кликнуть на кнопку кебаб-меню повторно
    - assert: выпадающее меню закрылось

  Проверка закрытия меню при скролле:
    - do: получить выдачу по запросу 'починить кондиционер дома не дорого' и кликнуть на кнопку кебаб-меню (три точки)
    - assert: открылось меню
    - do: проскролить страницу вниз
    - assert: выпадающее меню закрылось

  Проверка присутствия ссылки "Информация о сайте" в кебаб-меню:
    - do: получить выдачу по запросу 'починить кондиционер дома не дорого' и кликнуть на кнопку кебаб-меню (три точки)
    - assert: |
        открылось меню
        в меню присутствует пункт "Информация о сайте"
    - screenshot: внешний вид соответствует скриншоту [siteinfo]
    - do: кликнуть в пункт меню "Информация о сайте"
    - assert: открылась страница Вебмастера с информацией о сайте

  Проверка отсутствия турбо в ссылке "Информация о сайте" в кебаб-меню у сниппета с турбо:
    - do: получить выдачу по запросу 'совы' и кликнуть на кнопку кебаб-меню (три точки) в сниппете с турбо
    - assert: |
        открылось меню
        в меню присутствует пункт "Информация о сайте"
    - do: кликнуть в пункт меню "Информация о сайте"
    - assert: открылась страница Вебмастера с информацией о сайте сниппета, а не информация о yandex.ru

  Проверка ссылки "Ещё с сайта":
    - do: получить выдачу по запросу 'покерок сайт' и кликнуть на кнопку кебаб-меню первого сниппета
    - assert: |
        открылось меню
        в меню присутствует пункт "Ещё с сайта"
    - do: кликнуть в пункт меню "Ещё с сайта"
    - assert: открылась выдача с запросом site:<адрес первого выбранного сайта на предыдущем шаге> покерок сайт

  Отсутствует горизонтальный скролл на странице при наличии сниппета без экстралинков:
    - params:
        foreverdata: '3895717564'
    - do: получить выдачу по запросу 'мотилиум'
    - assert: на странице нет горизонтального скролла

files:
  - features/touch-phone/organic/organic-extralinks.hermione.js

tlds: all

v-team: Beauty

tags:
  - organic
  - reviewed
  - extralink
