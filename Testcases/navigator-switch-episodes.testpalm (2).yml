feature: Объектный ответ
type: Сериальный навигатор

priority: normal 

description: 
    Кейсы ТОЛЬКО для прохождения на территории РФ, иначе пропустите кейс. (Если вы на территории РФ может отсутствовать вкладка Сезоны и кнопка Смотреть в плеере ОО - это не баг)
    При прохождении с фермы Колхоз в плеере может быть черный экран - это не баг, а специфика фермы. 
    Авторизацию выполнять без сохранения пароля и после выйти из учетной записи (разлогиниться).

specs:
  Залогин с подпиской Плюс, Выбор сезона в сайдблоке [manual]:
    - automation: SERP-144163
    - do: авторизоваться под пользователем с подпиской Плюс (логин test-serp-assessors-plus, пароль hL5-tYe-VGX-fzg)
    - assert: авторизация выполнена
    - do: получить выдачу по запросу "маша и медведь" ("рик и морти", "время приключений", "друзья")
    - assert: на выдаче есть карточка ОО (может не быть на первой позиции)
    - do: кликнуть на таб "Сезоны"
    - assert: открылся сайдблок со списком серий и сезонов
    - do: выбрать 2-й сезон и кликнуть на любую серию (запомнить на какую кликаем; запомнить можно например по длительности серии - отображается на тумбе сниппета)
    - assert: |
        сайдблок закрылся
        появилась шторка с выбором кинотеатра
    - do: выбрать кинотеатр "Кинопоиск"
    - assert: начала проигрываться выбранная серия (длительность, отображаемая на сниппете может отличаться от длительности в таймлайне плеера на 1 секунду - это не баг)

  Залогин без подписки, переход на сайт кинотеатра [manual]:
    - tags:
        - skip_manual_check
    - automation: SERP-139925
    - do: авторизоваться под аккаунтом test-serp-assessors-plus/hL5-tYe-VGX-fzg
    - assert: пользователь авторизован
    - do: получить выдачу по запросу "маша и медведь" ("рик и морти", "время приключений", "друзья")
    - assert: на выдаче есть карточка сериала
    - do: кликнуть на таб 'Сезоны'
    - assert: открылся сайдблок с карточкой сериала
    - do: нажать на вторую серию сезона
    - assert: |
        сайдблок закрылся
        появилась шторка с выбором кинотеатра
    - do: выбрать кинотеатр "Кинопоиск"
    - assert: произошел переход на сайт онлайн-кинотеатра

  Переключение серий, подписка Плюс+Амедиатека, контент Амедиатека [manual]:
    - tags:
        - skip_manual_check
    - automation: SERP-139925
    - do: авторизоваться под аккаунтом  test-serp-assessors-amedia/XPw-QXu-bcH-3XW
    - assert: пользователь авторизован
    - do: получить выдачу по запросу 'игра престолов' (альтернативные 'почему женщины убивают')
    - assert: на выдаче есть карточка сериала
    - do: кликнуть на таб 'Сезоны'
    - assert: открылся сайдблок с карточкой сериала
    - do: нажать на любую серию сезона
    - assert: |
        сайдблок закрылся
        появилась шторка с выбором кинотеатра
    - do: выбрать кинотеатр "Кинопоиск"
    - assert: началось воспроизведение выбранной серии в плеере

  Переключение серий, подписка Плюс+Море.тв, контент Море.тв [manual]:
    - tags:
        - skip_manual_check
    - automation: SERP-139925
    - do: авторизоваться под аккаунтом test-serp-assessors-more/kAd-XRd-dkH-4Wp
    - assert: пользователь авторизован
    - do: получить выдачу по запросу 'рассказ служанки' (альтернативные запросы 'фарго сериал')
    - assert: на выдаче есть карточка сериала
    - do: кликнуть на таб 'Сезоны'
    - assert: открылся сайдблок с карточкой сериала
    - do: нажать на любую серию сезона
    - assert: |
        сайдблок закрылся
        появилась шторка с выбором кинотеатра
    - do: выбрать кинотеатр "Кинопоиск"
    - assert: началось воспроизведение выбранной серии в плеере

  Дозапрос серий при скролле в сайдблоке [manual]:
    - tags:
        - skip_manual_check
    - automation: SERP-139925
    - do: авторизоваться под аккаунтом test-serp-assessors-plus/hL5-tYe-VGX-fzg
    - assert: пользователь авторизован
    - do: получить выдачу по запросу сериал "маша и медведь" ("рик и морти", "время приключений", "друзья")
    - assert: |
        на выдаче есть карточка ОО с тумбой и сериальным навигатором
        в карточке есть табы 
    - do: нажать на таб 'сезоны'
    - assert: |
        открылся сайдблок с карточкой
        загрузился таб Сезоны с сериальным навиатором
    - do: проскролить карточку вниз до конца
    - assert: |
        появился спиннер (может не появиться при быстром интернете - это не баг)
        дозагрузились новые серии

  Переход в сайдблок по кнопке "Весь список" [manual]:
    - tags:
        - skip_manual_check
    - automation: SERP-139925
    - do: авторизоваться под аккаунтом test-serp-assessors-plus/hL5-tYe-VGX-fzg
    - assert: пользователь авторизован
    - do: получить выдачу по запросу сериал "маша и медведь" ("рик и морти", "время приключений", "друзья")
    - assert: |
        на выдаче есть карточка ОО с плеером и сериальным навигатором
        в карточке под плеером есть карусель серий выбранного сезона
    - do: проскроллить карусель до конца влево и нажать кнопку 'Весь список'
    - assert: |
        открылся сайдблок с карточкой
        загрузился таб Сезоны с сериальным навиатором
    - do: выбрать любой сезон и серию
    - assert: |
        сайдблок закрылся
        появилась шторка с выбором кинотеатра

v-team: Video

files: []

tags:
  - oo_smoke_navigator
  - oo_overlay
  - oo_soap
  - skip_manual_check #проводится эксп с отрывом навигатора, возможно скоро фича не будет в проде

tlds: [ru]
