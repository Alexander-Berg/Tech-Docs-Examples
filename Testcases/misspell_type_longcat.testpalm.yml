feature: Опечатка и Ко
type: Длинный запрос

specs:
  Ограничение до 400 символов:
    beforeEach:
      - do: получить выдачу по любому запросу
      - do: в адресную строку браузера в параметр "&text=" скопировать и вставить значение "11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111"
      - do: нажать "Enter" на клавиатуре
      - assert: на странице присутствует сообщение "Запрос слишком длинный, сокращён до первых 400 символов"
    Внешний вид:
      - browsers:
          notFor:
            - searchapp-phone
      - screenshot: Пример внешнего вида [longcat-letters]
      - assertMetrics: '*'
    Значение в поисковой стрелке:
      - browsers:
          notFor:
            - searchapp-phone
      # 401 символ - решено не чинить https://st.yandex-team.ru/MISSPELLSERP-3
      - assert: в поисковой стрелке запрос состоит из 400 символов (не считается ошибкой, если символов 401)
      - assertMetrics: '*'
  Ограничение до 40 слов:
    Внешний вид:
      - do: получить выдачу по запросу "раз два три три два раз раз два три раз раз два три три два раз раз два три раз раз два три три два раз раз два три раз раз два три три два раз раз два три раз раз раз"
      - assert: на странице присутствует сообщение "Запрос слишком длинный, сокращён до первых 40 слов"
      - screenshot: Пример внешнего вида [longcat-words]
      - assertMetrics: '*'

specs-integration:
  Ограничение до 400 символов:
    - counter: /wiz/request_filter/too_long
    - params:
        l10n: ru
        tld: ru
    - tags:
        - no_assessors
    - do: получить выдачу по любому запросу
    - do: в адресную строку браузера в параметр "&text=" скопировать и вставить значение "11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111"
    - do: нажать "Enter" на клавиатуре
    - assert: на странице присутствует сообщение "Запрос слишком длинный, сокращён до первых 400 символов"
  Ограничение до 40 слов:
    - counter: /wiz/request_filter/too_many_words
    - params:
        l10n: ru
        tld: ru
    - do: получить выдачу по запросу "раз два три три два раз раз два три раз раз два три три два раз раз два три раз раз два три три два раз раз два три раз раз два три три два раз раз два три раз раз раз"
    - assert: на странице присутствует сообщение "Запрос слишком длинный, сокращён до первых 40 слов"

files:
  - features/common/misspell/misspell_type_longcat.hermione.js
  - features/common/misspell/misspell_type_longcat.hermione.e2e.js

v-team: Freshness

tags:
  - longlongrequest
  - searchresults
  - granny
  - spok_id
  - wizard
  - misprint
  - reviewed

counter: /wiz/request_filter

tlds:
  - ru
  - by
  - ua
  - kz
  - uz
