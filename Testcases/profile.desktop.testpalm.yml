feature: Страница "Данные об издании"

description: В кейсах описываются компоненты и общий вид элементов на странице данных об издании.

specs:
  содержит блок "Информация об издании", который:
    имеет внешний вид:
      - do: открыть страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=182900757
      - assert: |
          отображается блок "Информация об издании",
          блок содержит 4 инпута - "Название издания", "Адрес сайта", "Синонимичные названия", "Краткое описание",
          инпуты "Название издания" и "Адрес сайта" со звездочкой являются обязательными,
          справа от инпута "Синонимичные название" находится знак вопроса,
          внешний вид https://jing.yandex-team.ru/files/kossakovskaya/2021-11-29_13-49-33.png
      - do: навести курсор мыши на любой инпут
      - assert: по ховеру у соответствующего поля появляется желтая обводка
      - do: кликнуть по знаку вопроса
      - assert: появляется всплывающее окно с подсказкой "Добавьте возможные варианты названия вашего издания, и алгоритм засчитает все упоминания."
      - do: кликнуть за пределами тултипа
      - assert: тултип пропадает
      - do: кликнуть по инпуту "Синонимичные названия"
      - assert: по клику в инпуте появляется плейсхолдер "Через запатую"

    содержит ограничения на количество символов для инпутов:
      - do: открыть страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=182900757
      - do: ввести в инпут "Название издания" 51 символ и кликнуть за пределы инпута
      - assert: |
          инпут и наименования инпута выделились красным,
          под инпутом есть надпись красным - "Название не может превышать 50 символов"
      - do: ввести в инпут "Синонимичные названия" 101 символ и кликнуть за пределы инпута
      - assert: |
          инпут и наименования инпута выделились красным,
          под инпутом есть надпись красным - "Поле не может превышать 100 символов"
      - do: ввести в инпут "Краткое описание" 501 символ и кликнуть за пределы инпута
      - assert: |
          инпут и наименования инпута выделились красным,
          под инпутом есть надпись красным - "Поле не может превышать 500 символов"

  содержит блок "Руководитель", который:
    имеет внешний вид:
      - do: открыть страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=182900757
      - assert: |
          под блоком "Информация об издании" отображается блок "Руководитель",
          блок содержит 2 инпута - "ФИО руководителя" и "Должность руководителя",
          инпуты содержат звездочку и являются обязательными

  содержит блок "Контакты редакции", который:
    имеет внешний вид:
      - do: открыть страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=182900757
      - assert: |
          под блоком "Руководитель" отображается блок "Контакты редакции",
          блок содержит 4 инпута - "Адрес редакции", "Индекс" "Телефон редакции" и "E-mail",
          все инпуты содержат звездочку и являются обязательными

  валидирует пустые обязательные поля ввода:
    - do: открыть страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=79005240&agencyid=2528
    - do: удалить символы из любого обязательного поля (например, поля "Название издания ") и кликнуть за пределы инпута
    - assert: |
        инпут и наименования инпута выделились красным,
        под инпутом есть надпись красным - "Это поле является обязательным"

  валидирует поле ввода индекса:
    - do: открыть страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=79005240&agencyid=2528
    - do: в поле "Индекс" (блок "Контакты редакции") ввести буквенное значение и кликнуть за пределы инпута
    - assert: |
        инпут и наименования инпута выделились красным,
        под инпутом есть надпись красным - "Некорректный почтовый индекс"
    - do: в поле "Индекс" ввести любые три цифры и кликнуть за пределы инпута
    - assert: |
        инпут и наименования инпута остались красными,
        под инпутом есть надпись красным - "Некорректный почтовый индекс"
    - do: добавить в поле "Индекс" еще одну цифру и кликнуть за пределы инпута
    - assert: инпут и наименования инпута серые, ошибок валидации нет

  валидирует поле ввода телефона редакции:
    - do: открыть страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=79005240&agencyid=2528
    - do: в поле "Телефон редакции" (блок "Контакты редакции") ввести буквенное значение и кликнуть за пределы инпута
    - assert: |
        инпут и наименования инпута выделились красным,
        под инпутом есть надпись красным - "Некорректный формат"
    - do: удалить символы из поля "Телефон редакции", ввести любые 6 цифр и кликнуть за пределы инпута
    - assert: |
        инпут и наименования инпута остались красными,
        под инпутом есть надпись красным - "Некорректный формат"
    - do: добавить в поле "Телефон редакции" еще одну цифру и кликнуть за пределы инпута
    - assert: инпут и наименования инпута серые, ошибок валидации нет

  валидирует поле ввода электронной почты:
    - do: открыть страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=79005240&agencyid=2528
    - do: в поле "E-mail" (блок "Контакты редакции") ввести 'email' и кликнуть за пределы инпута
    - assert: |
        инпут и наименования инпута выделились красным,
        под инпутом есть надпись красным - "Некорректный E-mail адрес"
    - do: добавить к введенному значению '@ya' и кликнуть за пределы инпута
    - assert: |
        инпут и наименования инпута остались красными,
        под инпутом есть надпись красным - "Некорректный E-mail адрес"
    - do: добавить к введенному значению '.ru' и кликнуть за пределы инпута
    - assert: инпут и наименования инпута серые, ошибок валидации нет

  активирует кнопку "Сохранить" при изменении значений полей в блоке "Основные сведения":
    - do: открыть страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=79005240&agencyid=2528
    - assert: кнопка "Сохранить" под блоком "Основные сведения" серая и не кликабельна
    - do: вести в любое поле (например, поле "Синонимичные названия") символ
    - assert: |
        кнопка "Сохранить" под блоком "Основные сведения" становится активной и кликабельной,
        по ховеру меняет стиль и стиль курсора

  позволяет сохранить изменения значений полей в блоке "Основные сведения" [manual]:
    - do: открыть страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=521917854&agencyid=1310
    - assert: на странице агентства может быть бейджик "Анкета на модерации"/"Изменения отклонены"/"Информация проверена"
    - do: вести в любое поле (например, поле "Синонимичные названия") символ
    - do: кликнуть на кнопку "Сохранить"
    - assert: |
        появился поп-ап с результатом действия,
        скрин https://jing.yandex-team.ru/files/nightsonne/2022-01-17_16-47-50.png ,
        через некоторое время поп-ап сам исчезает,
        одновременно с поп-апом над заголовком "Основные сведения" появляется бейджик "Анкета на модерации" (если был другой бейджик или его не было совсем)
    - do: открыть тестовую админку и перейти на страницу "Анкеты" https://jing.yandex-team.ru/files/nightsonne/2022-01-17_17-34-10.png
    - do: найти в списке свое изменение и нажать "Отклонить"
    - do: обновить страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=521917854&agencyid=1310
    - assert: на странице агентства появился бейджик "Изменения отклонены"
    - do: снова вести в любое поле (например, поле "Синонимичные названия") символ
    - do: кликнуть на кнопку "Сохранить"
    - assert: |
        появился поп-ап с результатом действия,
        скрин https://jing.yandex-team.ru/files/nightsonne/2022-01-17_16-47-50.png ,
        одновременно с поп-апом над заголовком "Основные сведения" появляется бейджик "Анкета на модерации"
    - do: кликнуть крестик закрытия поп-апа
    - assert: поп-ап закрылся
    - do: открыть тестовую админку и перейти на страницу "Анкеты"
    - do: найти в списке свое изменение и нажать "Принять"
    - do: обновить страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=521917854&agencyid=1310
    - assert: на странице агентства появился бейджик "Информация проверена"

  содержит блок "Контакты по вопросам партнерства", который:
    имеет внешний вид для агентства c сохраненными контактами:
      - do: открыть страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=521917854&agencyid=1310
      - assert: |
          на странице есть блок "Контакты по вопросам партнерства" с двумя сохраненными контактами,
          блоки свернуты, в заголовке каждого блока ФИО контакта,
          внизу блока есть кнопка "Сохранить",
          внешний вид https://jing.yandex-team.ru/files/nightsonne/2022-01-19_13-49-40.png
      - do: кликнуть по галочке возле ФИО в любом блоке контактов
      - assert: |
          по клику блок с данными разворачивается
          по ховеру на блок у соответствующего блока появляется кнопка-троеточие справа

    позволяет удалить данные сотрудника:
      - do: открыть страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=521917854&agencyid=1310
      - assert: |
          на странице есть блок "Контакты по вопросам партнерства",
          для нового издательства блок содержит 2 шаблона для данных сотрудников, кнопку "Добавить еще сотрудника" и 4 инпута,
      - do: кликнуть по галочке возле ФИО в любом блоке контактов
      - do: навести курсор мыши на кнопку-троеточие
      - assert: по ховеру кнопка меняет фон
      - do: кликнуть на кнопку-троеточие
      - assert: появляется всплывающее меню с пунктом "Удалить контакт"
      - do: навести курсор мыши на пункт "Удалить контакт"
      - assert: по ховеру пункт меню меняет фон
      - do: кликнуть за пределами меню
      - assert: меню пропадает
      - do: снова вызвать меню и кликнуть "Удалить контакт"
      - assert: |
          один блок данных исчезает,
          кнопка "Сохранить" становится активной,
          рядом с кнопкой "Сохранить" появляется надпись "Должно быть не меньше двух контактов"

    позволяет добавить данные нового сотрудника:
      - do: открыть страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=521917854&agencyid=1310
      - assert: |
          на странице есть блок "Контакты по вопросам партнерства",
          для нового издательства блок содержит 2 шаблона для данных сотрудников, кнопку "Добавить еще сотрудника" и 4 инпута,
      - do: навести курсор мыши на кнопку "Добавить еще сотрудника"
      - assert: по ховеру шрифт кнопки меняет стиль
      - do: кликнуть на кнопку "Добавить еще сотрудника"
      - assert: |
          появляется новый развернутый блок контактов,
          кнопка "Сохранить" становится активной

    не позволяет сохранить изменения, если в блоке осталось меньше 2х контактов [manual]:
      - do: открыть страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=521917854&agencyid=1310
      - assert: |
          на странице есть блок "Контакты по вопросам партнерства" с двумя сохраненными контактами,
          блоки свернуты, в заголовке каждого блока ФИО контакта
      - do: навести курсор мыши на любой блок
      - do: кликнуть на кнопку-троеточие справа и кликнуть на пункт "Удалить контакт" во всплывающем меню
      - assert: |
          один блок данных исчезает,
          кнопка "Сохранить" становится активной,
          рядом с кнопкой "Сохранить" появляется надпись "Должно быть не меньше двух контактов"
      - do: кликнуть на кнопку "Сохранить"
      - assert: |
          один блок данных исчезает,
          справа вверху появился поп-ап с предупреждением,
          внешний вид https://jing.yandex-team.ru/files/nightsonne/2022-01-19_13-56-52.png ,
          бейджик "Анкета на модерации" не появился (если его не было)
      - do: обновить страницу
      - assert: в блоке "Контакты по вопросам партнерства" с отображается 2 контакта

  содержит блок "Логотип издания", который:
    имеет внешний вид:
      - do: открыть страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=669854589&agencyid=254168396
      - assert: |
          на странице есть блок "Логотип издания",
          в блоке есть превью, описание и кнопка "Выбрать другое изображение",
          внизу блока есть кнопка "Сохранить",
          внешний вид https://jing.yandex-team.ru/files/nightsonne/2022-01-19_19-50-52.png
      - do: навести курсор мыши на кнопку "Выбрать другое изображение"
      - assert: по ховеру шрифт кнопки меняет стиль

    позволяет изменить лого [manual]:
      - do: открыть страницу данных об издании https://partner-tst.news.yandex.ru/v2/profile?userid=669854589&agencyid=254168396
      - assert: |
          на странице есть блок "Логотип издания",
          в блоке есть превью, описание и кнопка "Выбрать другое изображение",
          внизу блока есть кнопка "Сохранить",
          внешний вид https://jing.yandex-team.ru/files/nightsonne/2022-01-19_19-50-52.png
      - do: кликнуть по кнопке "Выбрать другое изображение" и выбрать картинку, которая не отвечает требованиям (справа)
      - assert: |
          справа вверху появился поп-ап с предупреждением,
          кнопка "Сохранить" становится активной,
          внешний вид https://jing.yandex-team.ru/files/nightsonne/2022-01-19_19-57-35.png
      - do: кликнуть по кнопке "Сохранить"
      - assert: справа вверху снова появился поп-ап с предупреждением
      - do: кликнуть по кнопке "Выбрать другое изображение" и выбрать картинку, которая отвечает требованиям (справа)
      - do: кликнуть по кнопке "Сохранить"
      - assert: |
          логотип сохранен,
          не слетает после обновления страницы

files:
  - features/news-partners/profile/profile.desktop.hermione.js

qa-engineer: kossakovskaya

manager: halilu

tags:
  - news-partners

tlds:
  - ru
