feature: Отправка голосовых сообщений

specs:

    Можно вызвать контролл голосового ввода нажатием по кнопке микрофона[manual]:
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"

    Запись сообщения происходит, если нажата кнопка микрофона[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись

    Если нажать кнопку отправить, во время записи сообщения, то запись сразу отправляется[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Нажать на кнопку Отправить
        - assert: Запись голосового сообщения отправляется в чат

    Можно отменить отправку голосового сообщения с помощью кнопки Отменить[manual]:
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Нажать на кнопку Отменить
        - assert: Запись прекращается и голосовое сообщение не отправляется

    При записи голосового сообщения виден таймер[manual]:
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: продиктовать любой текст на секунд 20-30
        - assert: Видим как таймер работает корректно без рывков

    Можно приостановить запись голосового сообщения нажатием по кнопке Остановить запись[manual]:
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Продиктовать текст в несколько секунд и нажать по кнопке Стоп
        - assert: |
              Запись приостанавливается
              В поле ввода есть кнопка закрытия голосового сообщения Х и рядом кнопка Play
              В поле ввода есть гистограмма и таймер сколько мы успели записать голосового сообщения
              Доступна кнопка Отправки

    Можно прослушать голосовое сообщение перед отправкой, если запись была остановлена по кнопке Остановить запись[manual]:
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Продиктовать текст в несколько секунд и нажать по кнопке Стоп
        - assert: |
              Запись приостанавливается
              В поле ввода есть кнопка закрытия голосового сообщения Х и рядом кнопка Play
              В поле ввода есть гистограмма и таймер сколько мы успели записать голосового сообщения
              Доступна кнопка Отправки
        - do: Нажать по кнопке Play
        - assert: |
              Проигрывается запись
              прокрашивается гистограмма
              Работает таймер

    Можно отправить голосовое сообщения из режима прослушивания по кнопке Отправка сообщения, если само сообщение не прослушивали[manual]:
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Продиктовать текст в несколько секунд и нажать по кнопке Стоп
        - assert: |
              Запись приостанавливается
              В поле ввода есть кнопка закрытия голосового сообщения Х и рядом кнопка Play
              В поле ввода есть гистограмма и таймер сколько мы успели записать голосового сообщения
              Доступна кнопка Отправки
        - do: Нажать по кнопке Отправить
        - assert: Голосовое сообщение отправляется в чат

    Можно отправить голосовое сообщения из режима прослушивания по кнопке Отправка сообщения, если само сообщение прослушивали[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Продиктовать текст в несколько секунд и нажать по кнопке Стоп
        - assert: |
              Запись приостанавливается
              В поле ввода есть кнопка закрытия голосового сообщения Х и рядом кнопка Play
              В поле ввода есть гистограмма и таймер сколько мы успели записать голосового сообщения
              Доступна кнопка Отправки
        - do: Прослушать сообщение в поле ввода
        - assert: Сообщение прослушано
        - do: Отправить голосовое сообщение
        - assert: Сообщение отправляется в чат

    Можно удалить голосовое сообщения из режима прослушивания по кнопке Крестик, если само сообщение не прослушали[manual]:
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Продиктовать текст в несколько секунд и нажать по кнопке Стоп
        - assert: |
              Запись приостанавливается
              В поле ввода есть кнопка закрытия голосового сообщения Х и рядом кнопка Play
              В поле ввода есть гистограмма и таймер сколько мы успели записать голосового сообщения
              Доступна кнопка Отправки
        - do: Удалить голосовое сообщение, нажав по кнопке Х
        - assert: Голосовое сообщение удаляется

    Можно удалить голосовое сообщения из режима прослушивания по кнопке Крестик, если само сообщение прослушали[manual]:
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Продиктовать текст в несколько секунд и нажать по кнопке Стоп
        - assert: |
              Запись приостанавливается
              В поле ввода есть кнопка закрытия голосового сообщения Х и рядом кнопка Play
              В поле ввода есть гистограмма и таймер сколько мы успели записать голосового сообщения
              Доступна кнопка Отправки
        - do: Прослушать сообщение в поле ввода
        - assert: Сообщение прослушано
        - do: Удалить голосовое сообщение, нажав по кнопке Х
        - assert: Голосовое сообщение удаляется

    Можно отправить последовательно несколько голосовых сообщений[manual]:
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Записать голосовое сообщение в несколько секунд и нажать кнопку Отправить
        - assert: Голосовое сообщение отправляется
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Записать голосовое сообщение в несколько секунд и нажать кнопку Отправить
        - assert: Голосовое сообщение отправляется

    Можно отправить новое голосовое сообщение, если до этого отказались от отправки предыдущего голосового сообщения[manual]:
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Записать голосовое сообщение в несколько секунд и нажать кнопку Отменить
        - assert: |
              Запись прекращается и голосовое сообщение не отправляется
              Показывается пустое поле ввода
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Записать голосовое сообщение в несколько секунд и нажать кнопку Отправить
        - assert: Голосовое сообщение отправляется
        - do: Убедиться что оправилось последнее записанное голосовое сообщение
        - assert: Было отправлено последнее голосовое сообщение

    Не отправляется голосовое сообщение, если достигли лимита на отправку сообщений Rate Limiter[manual]:
        - automation:
        - description: Для проверки следует присоединиться к данному чату - https://yandex.ru/chat/#/join/66763107-e3dc-4447-80e6-16b7c52a40ca
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Отправить голосовое сообщение
        - assert: Сообщение отправляется
        - do: Сразу же отправить следом второе голосовое сообщение
        - assert: При отправке второго сообщения появляется ошибка, кнопка микрофона отображается

    Максимальная длинна голосового сообщения 10:01 минут[manual]:
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Надиктовать текст более 10 минут
        - assert: |
              При достижении лимита в 10:01 минут запись прекращается
              В поле ввода есть кнопка закрытия голосового сообщения Х и рядом кнопка Play
              В поле ввода есть гистограмма и таймер сколько мы успели записать голосового сообщения
              Доступна кнопка Отправки

    Проверка отправки голосового более 10:01 минут[manual]:
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Надиктовать текст более 10 минут
        - assert: |
              При достижении лимита в 10:01 минут запись прекращается
              В поле ввода есть кнопка закрытия голосового сообщения Х и рядом кнопка Play
              В поле ввода есть гистограмма и таймер сколько мы успели записать голосового сообщения
              Доступна кнопка Отправки
        - do: Отправить голосовое сообщение
        - assert: Отправляется голосовое сообщение в 10 минут

    проверка отправки голосового менее 10 минут[manual]:
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Надиктовать текст около 5 минут и отправить его
        - assert: Голосовое сообщение отправляется

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
    - chamb
