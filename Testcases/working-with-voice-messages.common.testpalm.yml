feature: Работа с голосовым сообщением

specs:

    Можно прослушать голосовые сообщения идущие подряд[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть чат, в истории которого есть два голосовых сообщения, которые идут подряд - голосовое сообщение 1 и голосовое сообщение 2
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Начать прослушивать первое голосовое сообщение, нажав по Play
        - assert: Идет прослушивание голосового сообщения
        - do: Убедиться что когда закончится проигрывание первого голосового сообщения, начнется автоматом проигрывание второго
        - assert: Начинается проигрывание второго голосового сообщения

    Во время прослушивания голосового сообщения, можно отправлять сообщения[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: У авторизованного пользователя в списке чатов есть чат, в истории которого есть несколько голосовых сообщений (собственные и от других пользователей)
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Начать слушать голосовое сообщение, нажав на Play
        - assert: |
              Кнопка Play меняется на Пауза
              Сообщение проигрывается
              Гистограмма прокрашивается, согласно прослушанности записи
              Таймер прослушанности уменьшается
        - do: Во время проигрывания, отправить в чат любое сообщение
        - assert: |
              Сообщение было отправлено
              Проигрываемое голосовое сообщение не ставится на паузу и продолжает играть

    Во время прослушивания голосового сообщения, можно получать сообщения[manual]:
        - automation:
        - description: |
              У авторизованного пользователя А в списке чатов есть чат, в истории которого есть несколько голосовых сообщений (собственные и от других пользователей)
              Кроме пользователя А в чате есть еще пользователь Б
        - do: Под пользователем А открыть чат из description
        - assert: Открывается чат из description
        - do: Начать слушать голосовое сообщение, нажав на Play
        - assert: |
              Кнопка Play меняется на Пауза
              Сообщение проигрывается
              Гистограмма прокрашивается, согласно прослушанности записи
              Таймер прослушанности уменьшается
        - do: Во время проигрывания, пользователем Б отправить в чат из description
        - assert: |
              Сообщение отпраавлено и доставлено до пользователя А
              У пользователя А проигрываемое голосовое сообщение не ставится на паузу и продолжает играть

    Нельзя прослушать голосовые сообщения подрят, если между ними есть текстовое сообщение[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть чат, в истории которого есть два голосовых сообщения, между которыми есть любое сообщение - голосовое сообщение 1 - текстовое сообщение - голосовое сообщение 2
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Начать прослушивать первое голосовое сообщение, нажав по Play
        - assert: Идет прослушивание голосового сообщения
        - do: Дождаться окончания проигрывания первого голосового сообщения
        - assert: После окончания проигрывания первого голосового сообщения, второе не проигрывается

    Ставится на паузу текущее голосовое сообщение, если стали слушать другое[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть чат, в истории которого есть несколько голосовых сообщений (собственные и от других пользователей)
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Начать слушать голосовое сообщение, нажав на Play
        - assert: |
              Кнопка Play меняется на Пауза
              Сообщение проигрывается
              Гистограмма прокрашивается, согласно прослушанности записи
              Таймер прослушанности уменьшается
        - do: Нажать по кнопке Play другого голосового сообщения
        - assert: |
              Проигрывание первого голосового сообщения прекращается
              Кнопка пауза меняется на Play
              Прокрашивание гистограммы сбрасывается
              Таймер сбрасывается
              Начинается проигрываться второе голосовое сообщение
              Кнопка Play меняется на Пауза
              Гистограмма прокрашивается, согласно прослушанности записи
              Таймер прослушанности уменьшается

    Не ставится на паузу проигрываемый войс, если нажать на гистограмму другого войса[manual]:
        - automation:
        - description: У авторизованного пользователя в списке чатов есть чат, в истории которого есть несколько голосовых сообщений (собственные и от других пользователей)
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Начать слушать голосовое сообщение, нажав на Play
        - assert: |
              Кнопка Play меняется на Пауза
              Сообщение проигрывается
              Гистограмма прокрашивается, согласно прослушанности записи
              Таймер прослушанности уменьшается
        - do: Во время проигрывания, нажать по гистограмме другого голосового сообщения
        - assert: Проигрываемое голосовое сообщение не ставится на паузу и продолжает играть

    Не сбрасывается запись голосового сообщения если открыть другую вкладку в браузере[manual]:
        - automation:
        - description: |
              У пользователя есть приватный/групповой чат
              Данный тест-кейс не актуален для приложения
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Открыть другую вкладку браузера
        - assert: Открыта другая вкладка браузера
        - do: Вернуться на вкладку где открыт мессенджер
        - assert: |
              Открыто окно чата из description
              Запись голосового сообщеня не прервана

    Не сбрасывается запись голосового сообщения если свернуть браузере[manual]:
        - automation:
        - description: |
              У пользователя есть приватный/групповой чат
              Данный тест-кейс не актуален для приложения
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Свернуть браузер
        - assert: Браузер был свернут
        - do: Вернуться обратно в окно чата
        - assert: |
              Открыто окно чата из description
              Запись голосового сообщеня не прервана

    Сбрасывается запись голосового сообщения при открытии другого чата[manual]:
        - automation:
        - description: У пользователя есть приватный/групповой чат
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон
        - assert: |
              Кнопка микрофона заменилась на кнопку отправки и появился крансый индикатор
              Слева есть кнопка "Стоп" рядом с которой есть таймер
              Вместо поля ввода есть кнопка "Отменить"
              Видим как работает таймер и идет запись
        - do: Открыть любой другой чат
        - assert: Открыто окно этого чата
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Посмотреть что произошло с записью голосового сообщения
        - assert: Запись была сброшена

    Можно прослушать только что отправленное голосовое сообщение[manual]:
        - automation:
        - description: Между пользователем А и Б есть приватный/групповой чат
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать на микрофон и надиктовать текст на 20 - 30 сек
        - assert: Голосовое сообщение надиктовано
        - do: Нажать на кнопку Отпрваить
        - assert: |
              Сообщение отправляется
              Расшифрованный текст отображается в три строки (может быть больше, в зависимости от размеров окна проверяемого оркужения)
              Видим что в бабле сообщения есть кнопка Еще
        - do: Нажать по кнопке Play, чтобы прослушать голосовое сообщение
        - assert: |
              Сообщение проигрывается
              Гистограмма прокрашивается, согласно прослушанности записи
              Таймер прослушанности уменьшается
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать по кнопке Play, чтобы прослушать голосовое сообщение
        - assert: |
              Сообщение проигрывается
              Гистограмма прокрашивается, согласно прослушанности записи
              Таймер прослушанности уменьшается

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
    - chamb
