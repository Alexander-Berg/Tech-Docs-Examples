feature: Связанные запросы
type: Доступность

browsers: chrome-phone

specs:
  Проверка на доступность:
    Под выдачей:
      - do: получить выдачу по запросу 'котики'
      - assert: |
          в конце выдачи отображается блок со связанными запросами,
          внутри блока отображается заголовок с текстом 'Люди ищут',
          в блоке отображаются ссылки на связанные запросы
          (на доменах отличных от ru может осуществляться перевод текста 'Люди ищут')
      - tech: |
          заголовок в блоке должен быть h2
          у связанных запросов должен быть атрибут role='navigation'
          у списка связанных запросов должен быть атрибут role='list'
          у первого элемента списка связанных запросов должен быть атрибут role='listitem'
          у связанных запросов должен быть атрибут aria-labelledby с id, указывающим на заголовок h2
          у всех ссылок на связанные запросы нет атрибута tabindex
          у всех ссылок на связанные запросы должен присутствовать атрибут href
      - assertMetrics: '*'
    При отскролле назад:
      - do: |
          получить выдачу по запросу 'котики',
          cкролл вниз до конца выдачи,
          cкролл обратно на самый верх
      - assert: |
          над выдачей отображается блок с переформулировками,
          в блоке отображаются ссылки на переформулировки
      - tech: |
          у блока переформулировок должен быть атрибут role='list'
          у первого элемента переформулировок должен быть атрибут role='listitem'
          у всех ссылок блока переформулировок нет атрибута tabindex
          у всех ссылок блока переформулировок должен присутствовать атрибут href
      - assertMetrics: '*'
    При возврате:
      - do: |
          получить выдачу Поиска по запросу 'привет'
          нажать на первый органик сниппет
          вернуться обратно на выдачу
      - assert: появились переформулировки под этим сниппетом
      - tech: |
          у блока переформулировок (.scroller__wrap) должен быть атрибут role='list'
          у первого элемента переформулировок должен быть атрибут role='listitem'
          у всех ссылок блока переформулировок нет атрибута tabindex
          у всех ссылок блока переформулировок должен присутствовать атрибут href
      - assertMetrics: '*'
    При переходе из запросов по доскроллу:
      - do: |
          получить выдачу Поиска по запросу 'польша'
          cкролл вниз до конца выдачи
          cкролл обратно на самый верх
      - assert: над выдачей отображается блок с переформулировками,
      - do: кликнуть на первую переформулировку над выдачей
      - assert: на новой выдаче появились переформулировки над выдачей
      - tech: |
          у блока переформулировок (.scroller__wrap) должен быть атрибут role='list'
          у первого элемента переформулировок должен быть атрибут role='listitem'
          у всех ссылок блока переформулировок нет атрибута tabindex
          у всех ссылок блока переформулировок должен присутствовать атрибут href
      - assertMetrics: '*'
files:
  - features/touch-phone/related/related.a11y.hermione.js

v-team: UniAnswer

tlds:
  - ru

tags:
  - a11y_serp
  - skip_e2e_check
  - no_assessors
  - uni_answer
