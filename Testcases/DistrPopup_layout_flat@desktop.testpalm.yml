feature: Popup на СЕРПе
type: Плоский дизайн

params:
  foreverdata: '465425020'
  srcskip: 'YABS_DISTR'

specs:
  beforeEach:
    - do: в режиме Инкогнито открыть ссылку из задания
    - do: получить выдачу по запросу 'foreverdata'
    - assert: попап-блок дистрибуции присутствует на выдаче
  Внешний вид:
    - screenshot: пример внешнего вида попап-блока дистрибуции [flat]
  Клик на кнопку отмены:
    - do: клик на кнопку 'Нет, спасибо'
    - tech: сработал счетчик клика на кнопку 'Нет, спасибо' /$page/promo_popup/close
    - assert: попап-блок дистрибуции скрылся
    - assertMetrics: "*"
  Клик на кнопку установки:
    - do: открыть консоль разработчика
    - assert: в href ссылки кнопки 'Установить' содержит browser.yandex.ru
    - do: клик на кнопку 'Установить'
    - tech: сработал счетчик клика на кнопку 'Установить' /$page/promo_popup/install
    - tech: записалась кука клика на кнопку 'Установить' (в yp появился пар-р p_clc)
    - assert: в новом окне открылся таб, url которого содержит yandex.ru/promo/browser
    - assert: попап-блок дистрибуции скрылся
    - assertMetrics: "*"
  Изменение разрешения экрана:
    - do: изменить разрешение экрана до 450px ширины
    - assert: попап-блок дистрибуции скрылся
    - do: изменить разрешение экрана до 1000px ширины
    - assert: попап-блок дистрибуции снова показался на выдаче
  Отображение попап-блока при скролле:
    - do: сделать скролл страницы вниз
    - assert: попап-блок должен оставаться на одном месте на экране
    - do: сделать скролл страницы вверх
    - assert: попап-блок должен оставаться на одном месте на экране

files:
  - src/features/DistrPopup/DistrPopup.test/_layout/DistrPopup_layout_flat@desktop.hermione.js

tags:
  - skip_e2e_check
  - distribution
  - popup

v-team: Distribution

tlds: [ru, by]
