feature: Мои роли. Таб "Запросы"

specs:
  Мои роли. Таб "Запросы". Различные способы фильтрации и сортировки:
    - do: запустить в Runner сценарий "Мои роли. Таб "Запросы"" (https://github.yandex-team.ru/pixel/idm-runner)
    - do: отправить запрос "Вкладка запросы. Данные по запросу роли" с токеном "robot-cat-leopold"
    - assert: пришёл ответ со статусом "200"
    - screenshot: ответ на запрос "Вкладка запросы. Данные по запросу роли" должен содержать поля [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-02-03%2019-59-45.png]
    - do: кликнуть по табе "Test Results" в Response части postman UI
    - assert: на табе "Test Results" все тесты со статусом "PASS"
    - do: отправить запрос "Вкладка запросы. Фильтрация по обработанным" с токеном "robot-cat-leopold"
    - assert: пришёл ответ со статусом "200"
    - screenshot: ответ на запрос "Вкладка запросы. Фильтрация по обработанным" должен содержать поля [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-02-03%2020-01-44.png]
    - do: кликнуть по табе "Test Results" в Response части postman UI
    - assert: на табе "Test Results" все тесты со статусом "PASS"
    - do: отправить запрос "Вкладка запросы. Фильтрация по неосновным" с токеном "robot-cat-leopold"
    - assert: пришёл ответ со статусом "200"
    - screenshot: ответ на запрос "Вкладка запросы. Фильтрация по неосновным" должен содержать поля [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-02-03%2020-02-40.png]
    - do: кликнуть по табе "Test Results" в Response части postman UI
    - assert: на табе "Test Results" все тесты со статусом "PASS"
    - do: отправить запрос "Вкладка запросы. Фильтры "Сотрудник" + "Система"" с токеном "robot-cat-leopold"
    - assert: пришёл ответ со статусом "200"
    - screenshot: ответ на запрос "Вкладка запросы. Фильтры "Сотрудник" + "Система"" должен содержать поля [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-02-03%2020-04-11.png]
    - do: кликнуть по табе "Test Results" в Response части postman UI
    - assert: на табе "Test Results" все тесты со статусом "PASS"
    - do: отправить запрос "Вкладка запросы. Фильтр "Система"" с токеном "robot-cat-leopold"
    - assert: пришёл ответ со статусом "200"
    - screenshot: ответ на запрос "Вкладка запросы. Фильтр "Система"" должен содержать поля [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-02-03%2020-04-11.png]
    - do: кликнуть по табе "Test Results" в Response части postman UI
    - assert: на табе "Test Results" все тесты со статусом "PASS"
    - do: отправить запрос "Вкладка запросы. Фильтр по id роли" с токеном "robot-cat-leopold"
    - assert: пришёл ответ со статусом "200"
    - screenshot: ответ на запрос "Вкладка запросы. Фильтр по id роли" должен содержать записи только с id=12837638 в "role" [https://jing.yandex-team.ru/files/pixel/Screenshot%20from%202021-02-03%2020-05-34.png]
    - do: кликнуть по табе "Test Results" в Response части postman UI
    - assert: на табе "Test Results" все тесты со статусом "PASS"

priority: blocker

files:
  - idm/tests/api/frontend/test_approverequest.py

tags:
  - reviewed
  - no_assessors
  - postman_automation
  - fitcher:idm-www:test/auto/requests/**
  - fitcher:idm-www:test/e2e/requests/**
  - fitcher:idm-www:blocks/desktop/filters/**
  - fitcher:idm-www:blocks/desktop/table/**
  - fitcher:idm_backend_palmsync:idm/tests/api/frontend/test_approverequest.py
  - fitcher:idm_backend_palmsync:idm/core/constants/role.py
  - fitcher:idm_backend_palmsync:idm/core/models/role.py
  - fitcher:idm_backend_palmsync:idm/core/models/rolenode.py
  - fitcher:idm_backend_palmsync:idm/core/models/approverequest.py
  - fitcher:idm_backend_palmsync:idm/core/models/approve.py
  - fitcher:idm_backend_palmsync:idm/core/models/transfer.py
  - fitcher:idm_backend_palmsync:idm/inconsistencies/models.py
  - fitcher:idm_backend_palmsync:idm/tests/utils.py
  - fitcher:idm_backend_palmsync:idm/users/models.py
  - fitcher:idm_backend_palmsync:idm/utils/curl.py
