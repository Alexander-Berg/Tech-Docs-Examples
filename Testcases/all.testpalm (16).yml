feature: popup2

description: Абстрактный popup – компонент, предназначенный для создания как выпадающего элемента (контекстный попап), так и модального окна. Блок отображается на первом плане и перекрывает остальные элементы на странице. Может служить основой для других блоков. Например, Домик, Саджест. Попап может быть вызван различными элементами страницы, например, иконками, псевдо-ссылками. При использовании хвостика он всегда будет указывать на вызвавший его элемент, что делает очевидной их взаимосвязь. ВНИМАНИЕ! Элементы примера в шапке могут некорректно работать при скролле страницы(могут смешиваться с другими примерами или текст и кнопки будут отображаться поверх элементов шапки) это ожидаемая ошибка.

specs:
  Проверить корректность работы примера №1(Owner in fixed):

    - do: перезагрузить страницу
    - do: кликнуть на кнопочку 'owner in fixed'
    - assert: под кнопкой появился попап
    - assert: у попапа есть 'хвостик' (заострённый выступ на одной из сторон), указывающий на кнопку
    - do: проскроллить страничку вниз до конца
    - assert: при скролле страницы положение кнопки и попапа на экране не меняется
    - assert: при скролле страницы попап не дёргается, остается на месте относительно кнопки
    - do: кликнуть на кнопку 'Хвостик Вкл/Выкл' (наверху справа)
    - assert: хвостик у попапа пропал
    - do: снова кликнуть на кнопку 'Хвостик Вкл/Выкл'
    - assert: хвостик у попапа снова появился 
    - do: кликнуть на попап под кнопкой 'owner in fixed'
    - assert: ничего не произошло, вид кнопки и попапа не изменился
    - do: снова кликнуть на кнопочку 'owner in fixed'
    - assert: попап под кнопкой пропал 
    - do: проскроллить страничку вниз до конца
    - assert: при скролле страницы положение кнопки на экране не меняется
    - do: снова кликнуть на кнопку 'owner in fixed'
    - assert: под кнопкой снова появился попап

#    - assert: Если выключить или включить хвостики для попапчика нажатием на кнопку в правом верхнем углу, то верстка примера остается корректной?

  Проверить корректность работы примера №2(Направления раскрытия):

    - do: перезагрузить страницу
    - do: кликнуть кнопку 'Открыть все'
    - assert: при всех элементах примера (кроме самой кнопки 'Открыть все') открылись попапы в различных положениях без хвостиков (названия положений перепутаны и это ожидаемо)
    - do: кликнуть на кнопку 'Хвостик Вкл/Выкл' (наверху справа)
    - assert: у всех попапов появились хвостики, все хвостики корректно указывают на элементы, к которым относятся попапы
    - do: с помощью контрола 'Размер' (наверху справа) установить максимальный размер хвостиков ('20')
    - assert: хвостики попапов по-прежнему корректно указывают на элементы, к которым относятся попапы
    - do: с помощью контрола 'Размер' (наверху справа) установить размер хвостиков ('10')
    - assert: хвостики попапов по-прежнему корректно указывают на элементы, к которым относятся попапы
    - do: рядом с контролом 'Размер' (наверху справа) кликнуть по кнопке "-5"
    - assert: хвостики для правых попапов (right-top, right-center, right-bottom) и для левых попапов (left-top, left-center, left-bottom) сместились вверх относительно своего предыдущего состояния
    - assert: хвостики для верхних попапов (bottom-left, bottom-center, bottom-right) и для нижних попапов (top-left, top-center, top-right) сместились влево относительно своего предыдущего состояния
    - do: рядом с контролом 'Размер' (наверху справа) кликнуть по кнопке "+5"
    - assert: хвостики для правых попапов (right-top, right-center, right-bottom) и для левых попапов (left-top, left-center, left-bottom) сместились вниз относительно своего предыдущего состояния
    - assert: хвостики для верхних попапов (bottom-left, bottom-center, bottom-right) и для нижних попапов (top-left, top-center, top-right) сместились вправо относительно своего предыдущего состояния
    - do: снова кликнуть на кнопку 'Хвостик Вкл/Выкл' 
    - assert: хвостики у всех попапов пропали
    - do: кликнуть на любой попап в примере
    - assert: ничего не произошло, вид элементов и попапов при них не изменился
    - do: проскроллить страничку так, чтобы элементы с попапами приблизились к верхней границе экрана
    - assert: при скролле страницы попапы не дёргаются, остаются на месте относительно элементов, к которым они относятся
    - do: снова кликнуть кнопку 'Открыть все'
    - assert: все попапы пропали

#    - assert: Если включении хвостиков для попапчиков верстка примера остается корректной, изменение размеров хвостика так же не приводит к деградации внешнего вида примеров?
#    - assert: При скролле страницы попапчики не дергаются, верстка примера ведет себя корректно?

  Проверить корректность работы примера №3(C большой целью):

    - do: перезагрузить страницу
    - do: кликнуть на большую кнопку 'Открыть все'
    - assert: с каждой из 4 сторон кнопки появляется по три попапчика без хвостиков
    - do: кликнуть на кнопку 'Хвостик Вкл/Выкл' (наверху справа)
    - assert: у всех попапов появились хвостики, все хвостики корректно указывают на большую кнопку 'Открыть все'
    - do: снова кликнуть на кнопку 'Хвостик Вкл/Выкл'
    - assert: хвостики у всех попапов пропали
    - do: кликнуть на любой попап в примере
    - assert: ничего не произошло, вид кнопки 'Открыть все' и попапов при ней не изменился
    - do: проскроллить страничку так, чтобы попапы в верхнем ряду приблизились к верхней границе экрана
    - assert: при скролле страницы кнопка 'Открыть все' и попапы смещаются вместе со всей страницей
    - assert: при скролле страницы попапы не дёргаются, остаются на месте относительно кнопки 'Открыть все'
    - do: снова кликнуть на большую кнопку 'Открыть все'
    - assert: все попапы пропали

#    - assert: Если открыть попапчики и проскроллить страницу, то верстка корректная?
#    - assert: При скролле страницы попапчики не дергаются, верстка примера ведет себя корректно?

  Проверить корректность работы примера №4(_target_position):

    - tags: no_assessors

    - tech: При нажатии на кнопку в примере появляется popup по заданным координатам?
    - tech: При скролле страницы popup остается на том месте где его вызвали?

#    - do: Жамкнуть на кнопку Открыть попап в точке 300x700 в примере, проверить что попапчик открывается в строго заданной позиции, и не смещается при скролле страницы.
#    - assert: При нажатии на кнопку в примере появляется popup по заданным координатам?
#    - assert: При скролле страницы popup остается на том месте где его вызвали?


  Проверить корректность работы примера №5(_motionless_yes):

    - do: перезагрузить страницу
    - do: кликнуть на кнопку 'Меняющий направление'
    - assert: под кнопкой появился попап
    - do: проскроллить страничку так, чтобы попап приблизился к нижней границе экрана
    - assert: при приближении к нижней границе экрана попап скачком смещается вверх
    - do: проскроллить страничку в первоначальное положение
    - do: снова кликнуть на кнопку 'Меняющий направление'
    - assert: попап под кнопкой  'Меняющий направление' пропал
    - do: кликнуть на кнопку 'Закреплённое положение'
    - assert: под кнопкой появился попап
    - do: проскроллить страничку так, чтобы попап приблизился к нижней границе экрана (и далее)
    - assert: при приближении к нижней границе экрана попап не смещается относительно кнопки, спокойно уходит за границу экрана
    - do: снова кликнуть на кнопку 'Закреплённое положение'
    - assert: попап под кнопкой 'Закреплённое положение' пропал
    - do: кликнуть по очереди на кнопки 'Меняющий направление' и 'Закреплённое положение'
    - assert: под каждой кнопкой появился свой попап
    - do: проскроллить страничку так, чтобы попапы приблизились к нижней границе экрана (и далее)
    - assert: при приближении к нижней границе экрана попап при кнопке 'Меняющий направление' скачком смещается вверх, а попап при кнопке 'Закреплённое положение' не смещается относительно своей кнопки и спокойно уходит за границу экрана

#    - do: Проверить что только одна из выпадушек будет менять свое положение при скролле страницы.
#    - assert: При скролле страницы только первый popup будет перемещаться наверх от кнопки если для него не будет хватать места, положение второго попапа не меняется т.к. закрепляется при создании?

  Проверить корректность работы примера №6(Nested):

   (1):

    - do: перезагрузить страницу
    - do: кликнуть на кнопку 'nested popups'
    - assert: под кнопкой появился попап, внутри которого есть кнопка 'open nested popup'
    - do: кликнуть на кнопку 'open nested popup'
    - assert: под первым попапом появился ещё один попап, внутри которого есть кнопка с надписью 'Охотник'
    - do: кликнуть на кнопку 'Охотник'
    - assert: под кнопкой 'Охотник' появилось меню с несколькими пунктами, один из которых помечен галочкой, и ещё один неактивен
    - do: кликнуть в один из активных пунктов меню, не помеченных галочкой
    - assert: меню исчезло, надпись 'Охотник' в кнопке заменилась на текст выбранного пункта меню

   (2):

    - do: перезагрузить страницу
    - do: кликнуть на кнопку 'nested popups'
    - assert: под кнопкой появился попап, внутри которого есть кнопка 'open nested popup'
    - do: кликнуть на кнопку 'open nested popup'
    - assert: под первым попапом появился ещё один попап, внутри которого есть кнопка с надписью 'Охотник'
    - do: кликнуть в любое место страницы примера вне кнопок и попапов
    - assert: все попапы пропали
    - do: снова кликнуть на кнопку 'nested popups'
    - assert: под кнопкой появился попап, внутри которого есть кнопка 'open nested popup'
    - do: кликнуть на кнопку 'open nested popup'
    - assert: под первым попапом появился ещё один попап, внутри которого есть кнопка с надписью 'Охотник'
    - do: нажать на клавиатуре клавишу 'Esc'
    - assert: попап c кнопкой 'Охотник' исчез, попап с кнопкой 'open nested popup' остался
    - do: снова нажать на клавиатуре клавишу 'Esc'
    - assert: попап с кнопкой 'open nested popup' исчез

   (3):

    - do: перезагрузить страницу
    - do: кликнуть на кнопку 'popup1 in popup2'
    - assert: под кнопкой появился попап, внутри которого есть кнопка 'open popup1'
    - do: кликнуть на кнопку 'open popup1'
    - assert: под первым попапом появился ещё один попап (с надписью 'popup1', без кнопки)
    - do: кликнуть в любое место страницы примера вне кнопок и попапов
    - assert: все попапы пропали
    - do: снова кликнуть на кнопку 'popup1 in popup2'
    - assert: под кнопкой появился попап с кнопкой 'open popup1'
    - do: кликнуть на кнопку 'open popup1'
    - assert: под первым попапом появился ещё один попап (без кнопки)
    - do: нажать на клавиатуре клавишу 'Esc'
    - assert: попап без кнопки исчез, попап с кнопкой 'open popup1' остался
    - do: снова нажать на клавиатуре клавишу 'Esc'
    - assert: попап с кнопкой 'open popup1' исчез

   (4):

    - do: перезагрузить страницу
    - do: кликнуть на кнопку 'popup2 in popup1'
    - assert: под кнопкой появился попап, внутри которого есть кнопка 'open popup2'
    - do: кликнуть на кнопку 'open popup2'
    - assert: под первым попапом появился ещё один попап (с надписью 'popup2', без кнопки)
    - do: кликнуть в любое место страницы примера вне кнопок и попапов
    - assert: все попапы пропали
    - do: снова кликнуть на кнопку 'popup2 in popup1'
    - assert: под кнопкой появился попап с кнопкой 'open popup2'
    - do: кликнуть на кнопку 'open popup2'
    - assert: под первым попапом появился ещё один попап (без кнопки)
    - do: нажать на клавиатуре клавишу 'Esc'
    - assert: попап без кнопки исчез, попап с кнопкой 'open popup2' остался
    - do: снова нажать на клавиатуре клавишу 'Esc'
    - assert: попап с кнопкой 'open popup2' исчез

  Проверить корректность работы примера №7(Other):

   (1):

    - do: перезагрузить страницу
    - do: кликнуть на кнопку 'destructing popup'
    - assert: под кнопкой появился попап, внутри которого есть кнопка 'destruct parent of my anchor'
    - do: кликнуть на кнопку 'destruct parent of my anchor' в попапе
    - assert: попап исчез
    - assert: кнопка 'destructing popup' исчезла

   (2):

    - do: перезагрузить страницу
    - do: кликнуть по очереди обе кнопки с надписью 'open popup'
    - assert: под каждой кнопкой 'open popup' появился попап с кнопкой 'summon popup to me'
    - do: кликнуть по кнопке 'summon popup to me' в попапе под левой кнопкой с надписью 'open popup'
    - assert: под кликнутой кнопкой появился попап с надписью 'summoned popup'
    - do: кликнуть по кнопке 'summon popup to me' в попапе под правой кнопкой с надписью 'open popup'
    - assert: попап с надписью 'summoned popup' под левой кнопкой с надписью 'open popup' исчез
    - assert: попап с надписью 'summoned popup' появился под кликнутой кнопкой 
    - do: кликнуть по кнопке 'summon popup to me', расположенной вне попапов, справа от обеих кнопок 'open popup'
    - assert: попап с надписью 'summoned popup' под правой кнопкой с надписью 'open popup' исчез
    - assert: попап с надписью 'summoned popup' появился под кликнутой кнопкой 
    - do: снова кликнуть по кнопке 'summon popup to me' в попапе под левой кнопкой с надписью 'open popup'
    - assert: попап с надписью 'summoned popup' под отдельной кнопкой 'summon popup to me' (расположенной вне попапов) исчез
    - assert: попап с надписью 'summoned popup' появился под кликнутой кнопкой 

  Проверить корректность работы примера №8(requestFullscreen):
#    - do: Пропустите этот тест если выполняете его на IE младше 11 версии. Проверить, что popup-ы корректно отображаются в полноэкранном режиме. Для того что бы перевести пример в полноэкранный режим, надо кликнуть на кнопку toggle fullscreen

## на самом деле, похоже, не работает и в FF, пока закрываю от асессоров - vechernov@

    - tags: no_assessors

    - do: перезагрузить страницу
    - do: кликнуть по кнопке с надписью 'toggle fullscreen'
    - assert: пример перешёл в полноэкранный режим
    - do: кликнуть по кнопке 'open popup2'

#    - assert: В полноэкранном режиме по клику на кнопку open popup2, открывается выпадушка с кнопкой popup1?
#    - assert: В полноэкранном режиме по клику на кнопку popup1, внутри вложенного попапчика открывается еще один popup с кнопкой popup2?
#    - assert: В полноэкранном режиме по клику на кнопку popup2, открывается еще один попапчик с кнопкой popup1, по клику на которую открывается последней попап с надписью Fin?
#    - assert: Если кликнуть за пределами попапов, то они закрываются?
#    - assert: Если кликнуть кнопочку Esc, то полноэкранный режим закрывается, все выпадушки закрываются?

  Проверить корректность работы примера №9(Visible):

    - tags: no_assessors

  Проверить корректность работы примера №10(Hides on scroll):
    - do: перезагрузить страницу
    - do: кликнуть на кнопку 'open popup'
    - assert: под кнопкой появился попап, внутри которого есть кнопка 'open nested popup'
    - do: кликнуть на кнопку 'open nested popup'
    - assert: под первым попапом появился ещё один попап
    - do: проскроллить страницу вверх
    - assert: попапы должны скрыться

files: []

v-team: lego

example: /all/all.html

manager:
  - kuznecov

qa-engineer:
  - spiker

priority:
  - high

tags:
  - bem
