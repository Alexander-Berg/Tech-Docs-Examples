feature: Совместный просмотр

specs:

    Проверка чата при разлогине[manual]:
        - automation:
        - description: |
              Если в кейсах не указано иных условий, то чтобы попасть на страницу совместного просмотра, необходимо залогиненым в Яндекс, перейти в просмотрщик с фильмом или видеороликом, источник которого видеохостинг Яндекса (Яндекс.Эфир или Кинопоиск) и под плеером нажать на кнопку перехода в совместный просмотр
              ВАЖНО Все переходы в режим инкогнито должны сопровождаться последующим залипанием по ссылке из кейса
        - do: Залогиниться в Яндекс и перейти на страницу совместного просмотра
        - assert: |
              Авторизация прошла успешно
              в чате появилось сообщение от бота "Вы начинаете смотреть..."
        - do: Написать что-нибудь в чат
        - assert: Сообщение было отправлено
        - do: В новой вкладке Яндекс.Видео разлогиниться из Яндекс
        - assert: |
              Во вкладке с совместным просмотром скрылись сообщения чата
              Вместо чата отображается заглушка
        - do: нажать на кнопку Попробовать еще раз (согласиться, если браузер попросит подтверждения перезагрузки страницы)
        - assert: |
              Страница обновилась
              Видео не воспроизводится (стоит на паузе или скрыто заглушкой)
              Предыдущие сообщения чата видны
              В панели чатов внизу есть кнопка с предложением войти, чтобы присоединиться к совместному просмотру

    Поделиться ссылкой Переход по ссылке для незалогина[manual]:
        - automation:
        - description: |
              Если в кейсах не указано иных условий, то чтобы попасть на страницу совместного просмотра, необходимо залогиненым в Яндекс, перейти в просмотрщик с фильмом или видеороликом, источник которого видеохостинг Яндекса (Яндекс.Эфир или Кинопоиск) и под плеером нажать на кнопку перехода в совместный просмотр
              ВАЖНО Все переходы в режим инкогнито должны сопровождаться последующим залипанием по ссылке из кейса
        - do: Залогиниться в Яндекс и перейти на страницу совместного просмотра
        - assert: |
              Авторизация прошла успешно
              в чате появилось сообщение от бота "Вы начинаете смотреть..."
        - do: Написать что-нибудь в чат
        - assert: Сообщение было отправлено
        - do: Нажать на кнопку "Пригласить"
        - do: В новом окне браузера войти в режим инкогнито, залипнуть на стенд по ссылке из кейса
        - do: Разлогиниться (убедиться, что разлогинен) и перейти по ранее скопированной ссылке
        - assert: |
              Открылась страница совместного просмотра, с которой была скопирована ссылка (тот же видеоролик и тот же чат)
              В чате отсутствует поле для ввода сообщений
              В чате присутствует кнопка "Войдите, чтобы присоединиться"
        - do: Нажать на кнопку "Войдите, чтобы присоединиться" и залогиниться на Яндекс под аккаунтом отличным от того, с которого была скопирована ссылка
        - do: Нажать на кнопку "Присоединиться"
        - assert: |
              Открылась страница совместного просмотра, с которой была скопирована ссылка (тот же видеоролик и тот же чат)
              В чате присутствует поле для ввода сообщений
              В чате отсутствует кнопка "Присоединиться"

    Поделиться ссылкой Количество участников[manual]:
        - automation:
        - description: |
              Если в кейсах не указано иных условий, то чтобы попасть на страницу совместного просмотра, необходимо залогиненым в Яндекс, перейти в просмотрщик с фильмом или видеороликом, источник которого видеохостинг Яндекса (Яндекс.Эфир или Кинопоиск) и под плеером нажать на кнопку перехода в совместный просмотр
              ВАЖНО Все переходы в режим инкогнито должны сопровождаться последующим залипанием по ссылке из кейса
        - do: Залогиниться в Яндекс и перейти на страницу совместного просмотра
        - assert: |
              Авторизация прошла успешно
              в чате появилось сообщение от бота "Вы начинаете смотреть..."
        - do: Написать что-нибудь в чат
        - assert: Сообщение было отправлено
        - do: Нажать на кнопку "Пригласить"
        - do: В новом окне браузера войти в режим инкогнито
        - do: Залогиниться на Яндекс под аккаунтом отличным от того, с которого была скопирована ссылка и перейти по ранее скопированной ссылке
        - assert: |
              Открылась страница совместного просмотра, с которой была скопирована ссылка (тот же видеоролик и тот же чат)
              Под заголовком чата указано количество участников
              Количество равно 2
        - do: Нажать на кнопку "Присоединиться"
        - assert: Количество участников равно 3 (пригласивший, приглашенный и бот совместного просмотра)

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
    - chamb

