feature: modal

specs:
  Модальные окна не должны мешать друг другу:
    - params:
        foreverdata: '944177069'
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета (название заголовка Тестовая cтраница для test_modal — турбо)
    - assert: открывается турбо-страница в той же вкладке (в поисковом приложении Яндекс турбо-страница открывается в новой вкладке)
    - do: кликнуть на иконку меню
    - assert: должно выехать меню
    - screenshot: внешний вид соответствует примеру [plain]
    - do: кликнуть на иконку крестика
    - assert: меню скрылось

  Модальное окно должно закрываться при переходе назад по истории:
    - params:
        foreverdata: '944177069'
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета (название заголовка Тестовая cтраница для test_modal — турбо)
    - assert: открывается турбо-страница в той же вкладке (в поисковом приложении Яндекс турбо-страница открывается в новой вкладке)
    - do: кликнуть на иконку телефона справа внизу
    - assert: должно появиться модально окно обратного звонка
    - do: нажать кнопку назад на устройстве
    - assert: модально окно обратного звонка должно скрыться
    - do: нажать кнопку вперёд на устройстве
    - assert: модально окно должно вновь появиться

  Модальное окно должно закрываться при переходе назад по истории после обновления страницы:
    - params:
        foreverdata: '944177069'
    - do: получить выдачу по запросу 'foreverdata' и кликнуть в заголовок первого сниппета (название заголовка Тестовая cтраница для test_modal — турбо)
    - assert: открывается турбо-страница в той же вкладке (в поисковом приложении Яндекс турбо-страница открывается в новой вкладке)
    - do: кликнуть на иконку телефона справа внизу
    - assert: должно появиться модально окно обратного звонка
    - do: обновить страницу
    - do: кликнуть на иконку телефона справа внизу
    - assert: должно появиться модально окно обратного звонка
    - do: нажать кнопку назад на устройстве
    - assert: модально окно обратного звонка должно скрыться

  Внешний вид модального окна без кнопки 'Закрыть':
    - tags: no_assessors
    - do: открыть страницу 'https://yandex.ru/turbo?stub=modal/default.json'
    - do: в консоли браузера нужно выполнить код `modules.require(['i-bem-dom', 'modal'], function(bemDom, Modal) {bemDom.getEntity(document.querySelector('.modal'), Modal).open();});`
    - assert: должно появиться модальное окно, внешний вид соответствует скриншоту [opened]
    - do: кликнуть за пределами модального окна
    - assert: модальное окно должно исчезнуть

  Внешний вид модального окна с кнопкой 'Закрыть':
    - tags: no_assessors
    - do: открыть страницу 'https://yandex.ru/turbo?stub=modal/has-close.json'
    - do: в консоли браузера нужно выполнить код `modules.require(['i-bem-dom', 'modal'], function(bemDom, Modal) {bemDom.getEntity(document.querySelector('.modal'), Modal).open();});`
    - assert: должно появиться модальное окно, внешний вид соответствует скриншоту [opened]
    - do: кликнуть на кнопку 'Закрыть'
    - assert: модальное окно должно исчезнуть

  landscape вид модального окна без кнопки 'Закрыть':
    - tags: no_assessors
    - do: открыть страницу 'https://yandex.ru/turbo?stub=modal/default.json'
    - do: повернуть устройство в горизонтальную ориентацию
    - do: в консоли браузера нужно выполнить код `modules.require(['i-bem-dom', 'modal'], function(bemDom, Modal) {bemDom.getEntity(document.querySelector('.modal'), Modal).open();});`
    - assert: должно появиться модальное окно, внешний вид соответствует скриншоту [opened]
    - do: кликнуть за пределами модального окна
    - assert: модальное окно должно исчезнуть

  landscape вид модального окна с кнопкой 'Закрыть':
    - tags: no_assessors
    - do: открыть страницу 'https://yandex.ru/turbo?stub=modal/default.json'
    - do: повернуть устройство в горизонтальную ориентацию
    - do: в консоли браузера нужно выполнить код `modules.require(['i-bem-dom', 'modal'], function(bemDom, Modal) {bemDom.getEntity(document.querySelector('.modal'), Modal).open();});`
    - assert: должно появиться модальное окно, внешний вид соответствует скриншоту [opened]
    - do: кликнуть на кнопку 'Закрыть'
    - assert: модальное окно должно исчезнуть

files:
  - features/touch-phone/blocks/modal/modal.hermione.js

v-team: Turbo

manager: tanzwuta

tlds: none
