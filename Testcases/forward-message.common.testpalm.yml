feature: Контекстное меню (Переслать)

import-steps:
    - tests/hermione/suites/messenger/shared-steps/open-messenger.testpalm.steps.yml

tlds: ru

specs:

    Пересылка отправленного сообщения:
        - tags: [smoke_automation]
        - attach: Авторизация и открытие чата yamb
        - do: отправить произвольное сообщение в чат c пользователем stas.mihailov666
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на отправленное сообщение
        - do: в контекстном меню нажать на "Переслать"
        - assert: открылось модальное окно с выбором чатов для пересылки сообщения
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_12-50-28.png]
        - do: в модальном окне нажать на любой другой чат
        - assert: |
            закрылось модальное окно
            открылся выбранный чат
            forward сообщение прикрепилось к полю ввода выбранного чата
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_14-45-27.png]
        - do: ввести произвольный текст в поле ввода чата
        - do: нажать на кнопку отправить
        - assert: сообщение отправлено и отобразилось в чате
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_15-33-08.png]

    Пересылка полученного сообщения в новый чат [manual]:
        - automation: MSSNGRFRONT-3609
        - attach: Авторизация и открытие чата yamb
        - do: отправить произвольное сообщение в чат c пользователем Mock providermock
        - do: дождаться сообщения от бота
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на полученное сообщение
        - do: в контекстном меню нажать на "Переслать"
        - assert: открылось модальное окно с выбором чатов для пересылки сообщения
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_12-50-28.png]
        - do: в модальном окне нажать на поле "Поиск по чатам"
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_13-09-46.png]
        - do: ввести любое имя (например Ольга)
        - do: нажать на любого пользователя с которым нет чата
        - assert: |
            открылся выбранный чат
            forward сообщение прикрепилось к полю ввода чата
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_14-45-27.png]

    Пересылка файла [manual]:
        - automation: MSSNGRFRONT-3609
        - attach: Авторизация и открытие чата yamb
        - do: отправить любой файл (весом < 50 МБ) в чат c пользователем stas.mihailov666
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на пустую область слева от отправленного файла
        - do: в контекстном меню нажать на "Переслать"
        - assert: открылось модальное окно с выбором чатов для пересылки файла
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_12-50-28.png]
        - do: в модальном окне нажать на любой другой чат
        - assert: forward сообщение прикрепилось к полю ввода чата
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_11-30-34.png]
        - do: ввести произвольный текст в поле ввода открывшегося чата
        - do: нажать на кнопку отправить
        - assert: сообщение отправлено и отобразилось в чате
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-08_13-10-21.png]

    Пересылка изображения [manual]:
        - automation: MSSNGRFRONT-3609
        - attach: Авторизация и открытие чата yamb
        - do: отправить любое изображение в чат c пользователем stas.mihailov666
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на пустую область слева от отправленного изображения
        - do: в контекстном меню нажать на "Переслать"
        - assert: открылось модальное окно с выбором чатов для пересылки изображения
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_12-50-28.png]
        - do: в модальном окне нажать на любой другой чат
        - assert: forward сообщение прикрепилось к полю ввода чата
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_11-27-38.png]
        - do: ввести произвольный текст в поле ввода открывшегося чата
        - do: нажать на кнопку отправить
        - assert: сообщение отправлено и отобразилось в чате
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-15_09-43-37.png]

    Пересылка стикера:
        - attach: Авторизация и открытие чата yamb
        - do: отправить любой стикер в чат c пользователем stas.mihailov666 (если у Вас нет стикеров, найти в чате, добавить по клику)
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на пустую область слева от отправленного стикера
        - do: в контекстном меню нажать на "Переслать"
        - assert: открылось модальное окно с выбором чатов для пересылки стикера
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_12-50-28.png]
        - do: в модальном окне нажать на любой другой чат
        - assert: forward сообщение прикрепилось к полю ввода чата
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-14_11-37-13.png]
        - do: ввести произвольный текст в поле ввода открывшегося чата
        - do: нажать на кнопку отправить
        - assert: сообщение отправлено и отобразилось в чате
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-01-15_09-51-29.png]

    Отмена пересылки сообщения:
        - attach: Авторизация и открытие чата yamb
        - do: отправить произвольное сообщение в чат c пользователем stas.mihailov666
        - do: открыть контекстное меню, нажав правой кнопкой мыши(desktop) или тапнув(touch) на отправленное сообщение
        - do: в контекстном меню нажать на "Переслать"
        - assert: открылось модальное окно с выбором чатов для пересылки сообщения
        - screenshot: пример внешнего вида [https://jing.yandex-team.ru/files/joshuan/Messenger_2019-02-07_12-50-28.png]
        - do: отменить пересылку сообщения, нажав за пределы модального окна(desktop) или нажав на кнопку назад(в левом верхнем углу модального окна)(touch)
        - assert: |
            закрылось модальное окно
            отменилась пересылка сообщения

files:
    - tests/hermione/suites/messenger/message-history/context-menu/forward-message.common.hermione.ts

v-team: Chat

tags:
    - chamb
    - yamb
    - y-team
    - no_assessors
