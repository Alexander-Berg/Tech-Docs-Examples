feature: Карточка контакта, переходы внутри
tlds: ru

import-steps:
    - tests/hermione/suites/messenger/contact-card/shared-steps/open-private-chat.testpalm.steps.yml
    - tests/hermione/suites/messenger/contact-card/shared-steps/open-groupe-chat.testpalm.steps.yml

specs:
    Отключение уведомлений о сообщениях по тумблеру:
        - attach: Открытие личного чата
        - do: вызвать карточку контакта, кликнув на аватарку или имя собеседника из верхней части окна сообщений или из окна переписки
        - assert: открылась карточка, в нижней части карточки тумблер Уведомления, по дефолту он активен, синего цвета
        - screenshot: карточка контакта [https://jing.yandex-team.ru/files/nadyaos/Messenger%202019-07-24%2014-42-47.png]
        - do: нажать на тумблер
        - assert: уведомления отключились, тумблер изменил положение, стал серым
        - do: открыть список чатов
        - assert: в чате с этим собеседником появился значок перечеркнутого динамика
        - screenshot: изменения при отключении уведомлений [https://jing.yandex-team.ru/files/lapkinakris/Messenger_2019-02-15_12-50-07.png]

    Переход по ссылке на стафф [manual]:
        - automation: MSSNGRFRONT-4915
        - attach: Открытие группового чата
        - do: вызвать карточку контакта, кликнув на аватарку или имя собеседника из окна переписки
        - assert: открылась карточка, ссылки на стафф, электронную почту, телефон и внутренний номер выделены синим и кликабельны
        - screenshot: пример внешнего вида карточки [https://jing.yandex-team.ru/files/lapkinakris/Messenger_2019-02-15_12-58-19.png]
        - do: навести курсор на ссылку, указанную в разделе Стафф
        - assert: у ссылки появилось подчеркивание
        - do: нажать на ссылку, указанную в разделе Стафф
        - screenshot: ссылка на Стафф [https://jing.yandex-team.ru/files/lapkinakris/Messenger_2019-02-15_12-59-26.png]
        - assert: произошел переход на Стафф в новой вкладке активного браузера

    Переход по ссылке на электронную почту [manual]:
        - automation: MSSNGRFRONT-4915
        - attach: Открытие личного чата
        - do: вызвать карточку контакта, кликнув на аватарку или имя собеседника из окна переписки
        - assert: открылась карточка, ссылки на стафф, электронную почту, телефон и внутренний номер выделены синим и кликабельны
        - do: навести курсор на ссылку, указанную в разделе электронная почта
        - screenshot: ссылка на элпочту [https://jing.yandex-team.ru/files/lapkinakris/Messenger_2019-02-15_13-06-41.png]
        - assert: у ссылки появилось подчеркивание
        - do: нажать на ссылку
        - assert: произошел переход по ссылке в новой вкладке

    Переход по ссылке в разделе Телефон [manual]:
        - automation: MSSNGRFRONT-4915
        - attach: Открытие группового чата
        - do: вызвать карточку контакта, кликнув на аватарку или имя собеседника из окна переписки
        - assert: открылась карточка контакта, ссылки на стафф, электронную почту, телефон и внутренний номер выделены синим и кликабельны
        - do: навести курсор на ссылку, указанную в разделе Телефон
        - screenshot: ссылка на телефон [https://jing.yandex-team.ru/files/lapkinakris/Messenger_2019-02-15_13-09-42.png]
        - assert: у ссылки появилось подчеркивание
        - do: нажать на ссылку
        - assert: ссылка кликабельна

    Переход по ссылке в разделе Внутренний номер [manual]:
        - automation: MSSNGRFRONT-4915
        - attach: Открытие личного чата
        - do: вызвать карточку контакта, кликнув на аватарку или имя собеседника из окна переписки
        - assert: открылась карточка контакта, ссылки на стафф, электронную почту, телефон и внутренний номер выделены синим и кликабельны
        - do: навести курсор на ссылку, указанную в разделе Внутренний номер
        - screenshot: ссылка на внутренний номер [https://jing.yandex-team.ru/files/lapkinakris/Messenger_2019-02-15_13-11-34.png]
        - assert: у ссылки появилось подчеркивание
        - do: нажать на ссылку
        - assert: ссылка кликабельна

    Переход через карточку контакта из группового чата в личный:
        - attach: Открытие группового чата
        - do: вызвать карточку контакта, кликнув на аватарку или имя собеседника из верхней части окна сообщений или из окна переписки
        - assert: открылась карточка контакта, внизу карточки есть кнопка Отправить сообщение
        - screenshot: кнопка отправить сообщение [https://jing.yandex-team.ru/files/lapkinakris/Messenger_2019-02-15_13-14-42.png]
        - do: нажать кнопку Отправить сообщение
        - assert: совершен переход в личный чат с этим собеседником

    Отображение и смена статуса собеседника [manual]:
        - automation: MSSNGRFRONT-4915
        - do: в одном браузере или устройстве залогиниться под аккаунтом А
        - assert: открылся мессенджер аккаунта А
        - do: в другом браузере или на другом устройстве залогиниться под аккаунтом В
        - assert: открылся мессенджер аккаунта В
        - do: в аккаунте В открыть карточку контакта А
        - assert: открылась карточка контакта A, в верхней части карточки отображается статус "В сети"
        - do: разлогиниться из аккаунта А
        - assert: произошел разлогин аккаунта А
        - do: через минуту в аккаунте В открыть карточку контакта А
        - assert: открылась карточка, статус сменился на 'Был в сети минуту назад'
        - do: не закрывая карточку контакта А, залогиниться под аккаунтом А в другом браузере или на другом устройстве, перейти на браузер с аккаунтом В и подождать минуту
        - assert: статус аккаунта А сменился на статус 'В сети'

    Отправка сообщения из карточки контакта самому себе:
        - attach: Открытие группового чата
        - do: в правом верхнем углу через контексное меню открыть Посмотреть информацию о чате
        - assert:  открылась карточка чата
        - do: в участниках чата найти себя, кликнуть на имя или аватар
        - assert: открылась карточка своего контакта
        - do: нажать на кнопку Отправить сообщение в нижней части экрана
        - assert: произошел переход в Сохраненные сообщения

tags:
    - no_assessors
    - y-team

files:
    - tests/hermione/suites/messenger/contact-card/contact-card-inside.common.hermione.ts

v-team: Chat
