feature: Возможности подпиcчика канала

specs:

    Подписчик канала не может отправлять сообщения в канал:
        - tags: [b2b]
        - description: У авторизованного пользователя в списке чатов есть канал, в котором он является подписчиком
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой канал, который соответствует описанию указанному в description
        - assert: Канал открыт
        - do: Удостовериться, что нет поля ввода и кнопок стикеров/файлов/отправки
        - assert: В окне канала вместо поля ввода есть кнопка "Поделиться каналом" (самолетик) и "Отключить уведомления" (колокольчик)
        - do: Нажать на кнопку "Отключить уведомления"
        - assert: Название кнопки меняется на "Включить уведомления" и не показывается поле ввода
        - do: Нажать на кнопку "Поделиться каналом"
        - assert: Открывается окно со списком контактов / чатов для перессылки сообщения

    В канал можно попасть по действующей инвайт линке[manual]:
        - automation: MSSNGRFRONT-5014
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом нужно будет авторизовываться в другом браузере
              Пользователь Б состоят в канале с историей сообщений и является администратором канала
              Между пользователем А и Б есть общий приватный чат
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Отправить инвайтлинку Пользователю А на канал, предварительно скопировав ее на экране "Информация о чате"
        - assert: Инвайтлинка отправлена
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Перейти по инвайтлинке  от пользователя А
        - assert: Открывается окно канала
        - do: Нажать кнопку "Подписаться на канал"
        - assert: |
              Надпись "подписаться на канал" заменилась на кнопки "Поделиться каналом" (самолетик) и "Отключить уведомления" (колокольчик)
              Отображается история канала
        - do: Проверить наличие канала в списке чатов
        - assert: В списке чатов видим канал, к которому присоединились

    В канал нельзя попасть, по неактуальной инвайт-линке[manual]:
        - automation: MSSNGRFRONT-5014
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом нужно будет авторизовываться в другом браузере
              Пользователь Б состоят в канале с историей сообщений и является администратором канала, в котором ползунок "Публичная ссылка" включен
              Между пользователем А и Б есть общий приватный чат
              На данный момент этот тест-кейс является неактуальным
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Отправить инвайтлинку Пользователю А на канал, предварительно скопировав ее на экране "Информация о чате"
        - assert: Инвайтлинка отправлена
        - do: Обновить ссылку на канал зайдя в настройки канала и нажав соотвествующую кнопку
        - assert: Адрес ссылки поменялся
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Перейти по инвайтлинке  от пользователя А
        - assert: Появился тост с ошибкой "не удалось присоедениться к чату"

    Участнику канала не доступен список участников канала:
        - tags: [advanced_smoke]
        - description: У авторизованного пользователя в списке чатов есть канал, в котором он является подписчиком
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой канал, который соответствует описанию указанному в description
        - assert: Канал открыт
        - do: Открыть окно "Информация о канале" кликом / тапом по шапке канала
        - assert: Окно открыто
        - do: Убедиться что нет раздела "Подписчики и администраторы"
        - assert: Раздел "Подписчики и администраторы" отсутствует

    Подписчик для себя может вкл/выкл уведомления для канала[manual]:
        - tags: [advanced_smoke]
        - automation: MSSNGRFRONT-5014
        - description: |
              У авторизованного пользователя А в списке чатов есть канал, в котором он является подписчиком
              Пользователь Б в этом же канале явлется администратором и он авторизован в мессенджере в другом браузере (не основном)
              В канале у пользователя А "включены" уведомления
              В браузере, где авторизован пользователь А, в настройках включены уведомления (как в настрйоках мессенджера, так и в настройках самого браузера)
        - do: Под пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть любой канал, который соответствует описанию указанному в description
        - assert: |
              Канал открыт
              В окне канала вместо поля ввода кнопка "Отключить уведомления"
        - do: Нажать на кнопку "Отключить уведомления"
        - assert: |
              Кнопка меняется на "Включить уведомления"
              В списке чатов в превью канала появился значок перечеркнутого колокольчика
        - do: Свернуть браузер
        - assert: Браузер был свернут
        - do: Под пользователем Б отправить сообщение в канал
        - assert: |
              Сообщение отправлено
              Пользователю А не пришло уведомление
        - do: Под пользователем А открыть браузер, который ранее сворачивали
        - assert: Открывается окно канала
        - do: Нажать на кнопку "Включить уведомления"
        - assert: Кнопка меняется на "Отключить уведомления"
        - do: Свернуть браузер
        - assert: Браузер был свернут
        - do: Под пользователем Б отправить сообщение в канал
        - assert: |
              Сообщение отправлено
              Пользователю А пришло уведомление
        - do: Перейти по пришедшему уведомлению
        - assert: Открываетяс окно канала, откуда пришло сообщение

    Сообщения в канале отображаются слева для подписчика[manual]:
        - automation: MSSNGRFRONT-5014
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, Пользователь А основной аккаунт авторизован в проверяемом браузере, пользователь Б вспомогательным аккаунт - авторизован в другом браузере
              Пользователь А и Б состоят в канале
              Пользователь А - подписчик, Пользователь Б - администратор
        - do: Под пользователем Б открыть канал из description
        - assert: Открывается окно канала
        - do: Отправить текстовое сообщение в канал
        - assert: Сообщение отправлено и отображается слева
        - do: Отправить файл в канал
        - assert: Файл отправлен и отображается слева
        - do: Отправить стикер в канала
        - assert: Стикер отравляется и отображается слева
        - do: Отправить эмоджи в канал
        - assert: Эмоджи отправлено и отображается слева
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть канал из description
        - assert: Открывается канал из description
        - do: Проверить сообщения в канале
        - assert: Все сообщения отображаются слева

    Подписчик канала  не может сделать Reply на сообщение через контекстное меню:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, Пользователь А основной аккаунт авторизован в проверяемом браузере, пользователь Б вспомогательным аккаунт - авторизован в другом браузере
              Пользователь А и Б состоят в канале
              Пользователь А - подписчик, Пользователь Б - администратор
        - do: Под пользователем Б открыть канал из description
        - assert: Открывается канал из description
        - do: Отправить текстовое сообщение в канал
        - assert: Сообщение отправлено и отображается слева
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть канал из description
        - assert: Открывается канал из description
        - do: Кликнуть / Тапнуть по сообщению из канала
        - assert: Появляется контекстное меню
        - do: Убедиться, что нет Пункта "Ответить"
        - assert: Пункта нет

    Подписчик канала не может отправить Forward в канал[manual]:
        - automation: MSSNGRFRONT-5014
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, Пользователь А основной аккаунт авторизован в проверяемом браузере, пользователь Б вспомогательным аккаунт - авторизован в другом браузере
              Пользователь А и Б состоят в канале
              Пользователь А - подписчик, Пользователь Б - администратор
        - do: Под пользователем Б открыть канал из description
        - assert: Открывается канал из description
        - do: Отправить текстовое сообщение в канал
        - assert: Сообщение отправлено и отображается слева
        - do: Авторизоваться пользователем А, введя корректные логин/пароль.
        - assert: Авторизация прошла успешно.
        - do: Открыть канал из description
        - assert: Открывается канал из description
        - do: Кликнуть / Тапнуть по сообщению из канала
        - assert: Появляется контекстное меню
        - do: Выбрать пункт "Переслать"
        - assert: Открылся экран пересылки сообщения в чаты
        - do: Проскроллить список предлагаемых чатов и найти канал из description
        - assert: Канала в списке нет
        - do: Открыть окно поиска и вбить название канала
        - assert: Канал не находится

    Подписчик не приобретает права администратора, если открыл канал через Глобальный поиск[manual]:
        - automation: MSSNGRFRONT-5014
        - description: Авторизованы пользователем, который является подписчиком канала
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть глобальный поиск и ввести в поиск название Канала из description
        - assert: Канал найден
        - do: Открыть канал
        - assert: У пользователя вместо поля есть кнопки "Поделиться каналом" (самолетик) и "Отключить уведомления" (колокольчик)
        - do: Тапнуть по шапке канала
        - assert: Пользователь не  видит участников канала

    Подписчик может Пожаловаться на канал[manual]:
        - tags: [advanced_smoke]
        - automation: MSSNGRFRONT-5014
        - description: Авторизованы пользователем, который является подписчиком канала
        - do: Запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Открыть канал из description
        - assert: Открывается канал из description
        - do: Открыть окно "Информация о чате" кликом / тапом по шапке канала
        - assert: Окно открыто
        - do: Нажать на кнопку "Пожаловаться"
        - assert: Показывается окно указания причины жалобы
        - do: Проверить работоспособность каждой кнопки, а также работу "крестика"
        - assert: Все кнопки отрабатывают

    Подписчик может покинуть канал через экран "Информация о чате"[manual]:
        - automation: MSSNGRFRONT-5014
        - description: Авторизованы пользователем, который является подписчиком канала
        - do: Открыть канал из description
        - assert: Открывается канал из description
        - do: Открыть окно "Информация о чате" кликом / тапом по шапке канала
        - assert: Окно открыт
        - do: Нажать на "Отписаться”
        - assert: Показывается пермишен с выбором - "Ок" и "Отмена"
        - do: Выбрать "Отмена"
        - assert: Подписчик не покидает канал
        - do: Нажать на "Отписаться”
        - assert: Показывается пермишен с выбором - "Ок" и "Отмена"
        - do: Выбрать "Ок"
        - assert: |
              Крточкак канала октрыта
              Вместо кнопок "Поделиться каналом" (самолетик) и "Отключить уведомления" (колокольчик) появилась кнопка "Подписаться на канал"

    Подписчик канала не может сделать Reply на сообщение через двойной клик ЛКМ[manual]:
        - automation: MSSNGRFRONT-5014
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, Пользователь А основной аккаунт авторизован в проверяемом браузере, пользователь Б вспомогательным аккаунт - авторизован в другом браузере
              Пользователь А и Б состоят в канале
              Пользователь А - подписчик, Пользователь Б - администратор
              Данный тест-кейс неакутален для мобильных девайсов
        - do:  Под пользователем Б открыть канал из description
        - assert: Открывается канал из description
        - do: Отправить текстовое сообщение в канал
        - assert: Сообщение отправлено и отображается слева
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть канал из description
        - assert: Открывается канал из description
        - do: Сделать двойной клик ЛКМ  по сообщению в канале
        - assert: Ничего не произошло

    Подписчик может сделать поиск по каналу:
        - description: |
              Авторизованный пользователь является подписчиком канала, где много сообщений
              есть сообщение А которое глубоко в истории более 50 сообщений отправлено после него
              есть сообщение Б, которое свежее и после него отправлено не более 10 сообщений
        - do: Открыть канал из description
        - assert: Открывается канал из description
        - do: кликнуть / нажать на значок поиска "Лупу" в правом верхнем углу
        - assert: |
              под шапкой канала появилась панель поиска с полем ввода
              в поле ввода плейсхолдер "Поиск" и фокус курсора находится в поле ввода
              рядом с полем ввода есть стрелки переключения результатов поиска и "крестик" закрытия режима поиска
        - do: Ввести в поиск текст сообщения Б
        - assert: Сообщение находится
        - do: Ввести в поиск текст сообщения А
        - assert: Сообщение находится

    Подписчик может покинуть канал через контекстное меню канала[manual]:
        - automation: MSSNGRFRONT-5014
        - description: |
              Авторизованный пользователь является подписчиком канала, где много сообщений
        - do: Открыть канал из description
        - assert: Открывается канал из description
        - do: Открыть по троеточию меню канала.
        - assert: Меню открывается
        - do: Нажать по разделу “Отписаться”
        - assert: Показывается пермишен с выбором Отмена/Ок
        - do: Выбрать Отмена
        - assert: Подписчик не покидает канал
        - do: Открыть по троеточию меню канала.
        - assert: Меню открывается
        - do: Нажать по разделу “Отписаться”
        - assert: Показывается пермишен с выбором Отмена/Ок
        - do: Выбрать Ок
        - assert: Вместо кнопок "Поделиться каналом" (самолетик) и "Отключить уведомления" (колокольчик) появилась кнопка "Подписаться на канал"

    Подтягивается вся история сообщений канала при присоединении[manual]:
        - automation: MSSNGRFRONT-5014
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, Пользователь А основной аккаунт авторизован в проверяемом браузере, пользователь Б вспомогательным аккаунт - авторизован в другом браузере
              Пользователь Б состоит в тестовом канале (в истории которого более 60 сообщений), пользователь А - нет
              Между пользователем А и Б есть приватный чат
        - do: Пользователем Б запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Отправить инвайтлинку пользователю А в приватный чат на канал, предварительно скопировав ее на экране "Информация о канале"
        - assert: Инвайтлинка отправлена
        - do: Пользователем А запустить тестовое приложениие и октрыть список чатов
        - assert: Открывается список чатов
        - do: Перейти по инвайтлинке  от пользователя Б
        - assert: Открывается экран канала
        - do: Нажать кнопку "Подписаться на канал"
        - assert: В окне канала вместо поля ввода есть кнопка "Поделиться каналом" (самолетик) и "Отключить уведомления" (колокольчик)
        - do: Проверить, что  подтянулась вся история сообщений канала, проскроллив к самому первому сообщению
        - assert: В канале отображается вся история сообщений, никаких ошибок нет дозагрузке сообщений

    Подписчик может поделиться ссылкой на канал[manual]:
        - tags: [advanced_smoke]
        - automation: MSSNGRFRONT-5014
        - description: |
              Пользователь А является подписчиком канала
              Пользователь Б не являетя подписчиком этого же канала
              Между пользователем А и Б есть общий групповой чат
        - do: Пользователем А открыть канал из description
        - assert: |
              Открывается канал из description
              Есть кнопка "Поделиться каналом" (самолетик) и "Отключить уведомления" (колокольчик)
        - do: Нажать на кнопку "Поделиться каналом"
        - assert: Открывается окно со списком контактов / чатов для перессылки сообщения
        - do: Нажать на чат из description
        - assert: |
              Открывается окно этого чата
              В поле ввода ссылка на канал
        - do: Нажать кнопку "Отправить"
        - assert: Ссылка отправляется и корреткно отображается в окне чата
        - do: Под пользователем Б открыть чат из description и перейти по ссылке
        - assert: |
              Открывается окно канала из description
              Есть кнопка "Подписаться на канал"
        - do: Нажать на кнопку "Подписаться на канал"
        - assert: |
              Пользователь Б подписан на канал
              Надпись "подписаться на канал" заменилась на кнопки "Поделиться каналом" (самолетик) и "Отключить уведомления" (колокольчик)

files:
    - tests/hermione/suites/messenger/channels/subscriber-features.common.hermione.ts

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
