feature: Связанные запросы

specs:
  Две колонки:
    - tags:
        - smoke_extended
    - do: получить выдачу по запросу 'тест' (альтернативные запросы 'миэт, 'тз это')
    - assert: появился блок связанных запросов внизу страницы
    - screenshot: пример внешнего вида (данные могут отличаться) [plain]
    - do: нажать на первую ссылку
    - assert: выдача обновилась с запросом соответствующим первой ссылке
  Проверка экранирования html:
    - tags:
        - no_assessors
    - do: получить выдачу по запросу '<html>'
    - tech: появился блок связанных запросов внизу страницы
    - screenshot: связанные запросы [plain]
    - assertMetrics: '-'
  При возврате на серп:
    - tags:
        - smoke_extended
    - do: |
        открыть браузер в режиме инкогнито
        получить выдачу по запросу 'холодильник купить' (альтернативные запросы 'госуслуги личный кабинет', 'инвестиционный счет')
        кликнуть по первому органическому сниппету
        вернуться на СЕРП
    - assert: появился колдунщик рекомендаций под первым сниппетом
    - screenshot: внешний вид [plain]
    - do: нажать на первую ссылку
    - assert: выдача обновилась с запросом соответствующим первой ссылке
    - tech: проверить счётчик первый ссылки
    - assertMetrics: '*'
  При возврате на серп - длинный запрос:
    - tags:
        - no_assessors
    - do: открыть браузер в режиме инкогнито
    - do: получить выдачу Поиска по запросу 'Для вас, души моей царицы, Красавицы, для вас одних Времен минувших небылицы, В часы досугов золотых, Под шепот старины болтливой, Рукою верной я писал; Примите ж вы мой труд игривый! Ничьих не требуя похвал, Счастлив уж я надеждой сладкой, Что дева с трепетом любви Посмотрит, может быть, украдкой На песни грешные мои.'
    - do: нажать на первый органик сниппет
    - screenshot: примерный вид такой [https://jing.yandex-team.ru/files/alek-2020/uhura_2020-04-29T17%3A36%3A09.676273.jpg]
    - do: вернуться обратно на выдачу
    - assert: появились переформулировки под этим сниппетом
    - screenshot: переформулировки под сниппетом [related_long]
  Нечетное количество переформулировок:
    - tags:
        - no_assessors
    - params:
        foreverdata: '2960739379'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: появился блок связанных запросов внизу страницы
    - screenshot: внешний вид [plain]
    - assertMetrics: '-'
  # Добавить кейс с пустым/отсутствующим блоком связанных запросов
  # Добавить кейс сравнения блока связанных запросов на первой и следующей странице выдачи
  # Добавить кейс с длинным запросом - блок связанных запросов содержит 1 столбик, а не два (прикрепить скриншот)
  Балансировка длины строк:
    - do: |
        открыть браузер в режиме инкогнито
        получить выдачу по запросу 'законы россии об охране животного мира'
        кликнуть по первому сниппету
        вернуться на СЕРП
    - assert: появился колдунщик рекомендаций под первым сниппетом
    - do: проскроллить колдунщик вправо
    - assert: строки сбалансированы по длине
    - screenshot: внешний вид [balanced]
  В одну строку:
    - tags:
        - no_assessors
    - do: |
        получить выдачу по запросу 'тт и тз'
        кликнуть по первому сниппету
        вернуться на СЕРП
    - assert: появился колдунщик рекомендаций под первым сниппетом
    - assert: в колдунщике одна строка
    - screenshot: внешний вид [oneline]

specs-integration:
  Должен присутствовать на выдаче:
    - do: открыть выдачу с запросом 'боль'
    - assert: появился блок связанных запросов внизу страницы
    - counter: /$page/$main/related

files:
  - features/related/related@deskpad.hermione.js
  - features/related/related@deskpad.hermione.e2e.js

v-team: UniAnswer

tags:
  - uni_answer

tlds:
  - ru
  - by
  - ua
  - kz
  - uz
  - com.tr
  - com

priority: high
