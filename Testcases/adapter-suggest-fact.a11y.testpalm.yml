feature: Факт-саджест
type: Доступность

browsers: chrome-desktop

specs:
  Колдунщик отображается на выдаче:
    - do: получить выдачу по запросу 'Adware что это означает'
    - assert: на выдаче есть колдунщик фактового ответа
    - tech: |
        в блоке фактового ответа есть скрытый заголовок h2 с текстом "Мгновенный ответ",
        у фактового ответа есть атрибут aria-labelledby с id, указывающим на заголовок h2
    - tech: у фактового ответа есть атрибут role="region"

  Связанные факты:
    - do: получить выдачу по запросу 'состав слова заморозки'
    - assert: на выдаче есть колдунщик фактового ответа со связанными фактами
    - tech: у блока связанных фактов есть атрибуты aria-label="Также спрашивают" role="complementary"

  #С картинкой:
  #  - do: получить выдачу по запросу 'программа для монтирования образа'
  #  - assert: на выдаче есть колдунщик фактового ответа с картинкой
  #  - tech: у картинки фактового ответа есть атрибуты aria-hidden="true" tabindex="-1"

  С галереей:
    - do: получить выдачу по запросу 'водевиль' ('заявление', 'мрот в москве с 1 мая 2018 года')
    - assert: на выдаче есть колдунщик фактового ответа с галереей
    - tech: у галереи есть атрибут aria-hidden="true"
    - tech: у картинок в галерее есть атрибут tabindex="-1"

  Доступность:
    tags: [manual, skip_manual_check]
    beforeEach:
      - do: включить скринридер

    Навигация по tab:
      Фокус переходит на заголовок:
        - automation: SERP-98391
        - do: получить выдачу по запросу 'Adware что это означает'
        - do: с помощью клавиши tab перейти на Мгновенный ответ
        - assert: |
            фокус перешел на заголовок фактового ответа
            скринридер озвучил: 'Результаты поиска, основной ориентир. Мгновенный ответ, область. Adware википедия ссылка.'

      Связанные факты:
        - automation: SERP-98391
        - do: получить выдачу по запросу 'состав слова заморозки'
        - do: с помощью клавиши tab перейти на Мгновенный ответ
        - assert: |
            фокус перешел на первый связанный факт
            скринридер озвучил: 'Результаты поиска, основной ориентир. Мгновенный ответ, область. Также спрашивают, навигация ориентир, состав слова подорожник ссылка.'

      С картинкой:
        - automation: SERP-98391
        - do: получить выдачу по запросу 'как сделать скриншот на маке'
        - do: с помощью клавиши tab перейти на Мгновенный ответ
        - assert: |
            произошел переход на первый органический сниппет,
            перехода по картинке не происходит

      С галереей:
        - automation: SERP-98391
        - do: получить выдачу по запросу 'водевиль'
        - do: с помощью клавиши tab перейти на Мгновенный ответ
        - assert: |
            произошел переход на связаные факты,
            перехода по галерее не происходит

    Навигация по стрелкам:
      Фокус переходит на скрытый заголовок:
        - automation: SERP-98391
        - do: получить выдачу по запросу 'Adware что это означает'
        - do: с помощью клавиши 'стрелка вниз' перейти на Мгновенный ответ
        - assert: |
            фокус перешел на скрытый заголовок колдунщика фактового ответа
            скринридер озвучил: 'Результаты поиска, основной ориентир. Мгновенный ответ, заголовок уровень 2'
        - do: с помощью клавиши 'стрелка вниз' перейти на текст фактового ответа
        - assert: |
            фокус перешел на текст фактового ответа
            скринридер озвучил: 'Мгновенный ответ область' + текст фактового ответа

      Связанные факты:
        - automation: SERP-98391
        - do: получить выдачу по запросу 'состав слова заморозки'
        - do: с помощью клавиши 'стрелка вниз' перейти до первого связанного факта
        - assert: |
            фокус перешел на первый связанный факт
            скринридер озвучил: 'Также спрашивают, навигация ориентир, ссылка состав слова подорожник'

      С картинкой:
        - automation: SERP-98391
        - do: получить выдачу по запросу 'как сделать скриншот на маке'
        - do: с помощью клавиши 'стрелка вниз' перейти на Мгновенный ответ
        - assert: |
            произошел переход на текст фактового ответа
            скринридер озвучил: 'Мгновенный ответ область' + текст фактового ответа
        - do: нажать клавишу 'стрелка вниз' еще два раза
        - assert: |
            произошел переход на первый органический сниппет,
            перехода по картинке не происходит

      С галереей:
        - automation: SERP-98391
        - do: получить выдачу по запросу 'водевиль'
        - do: с помощью клавиши 'стрелка вниз' перейти на Мгновенный ответ
        - assert: |
            произошел переход на текст фактового ответа,
            скринридер озвучил: 'Мгновенный ответ область' + текст фактового ответа
            перехода по галерее не происходит

files:
  - features/desktop/adapter-suggest-fact/adapter-suggest-fact.a11y.hermione.js

v-team: Facts

tlds: [ru]

tags:
  - A11y_serp
  - skip_e2e_check # a11y
  - no_assessors # a11y
