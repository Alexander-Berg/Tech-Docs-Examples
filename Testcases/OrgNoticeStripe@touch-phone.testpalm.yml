feature: Колдунщик 1орг
type: Новый признак для переехавших

specs-integration:
  Проверка статуса "Больше не работает":
    - counter: /$page/$main/$result[@wizard_name="companies" and @subtype="company"]/composite/notice-stripe[@type="close/unlimited"]
    - do: получить выдачу по запросу 'прокондитер ру' (альтернативные запросы 'социализм русские ооо саратов', 'теленэт байкальск слюдянка')
    - assert: |
        появился колдунщик одной организации,
        под заголовком есть красный лейбл с тектом 'Больше не работает'
  Проверка статуса "Адрес изменился":
    - counter: /$page/$main/$result[@wizard_name="companies" and @subtype="company"]/composite/notice-stripe[@type="move/somewhere"]
    - do: получить выдачу по запросу 'росаккредитация официальный сайт' (альтернативные запросы 'шаляпин отель москва', 'деловой клуб эталон Почтамтская ул., 2/9, Санкт-Петербург')
    - assert: |
        появился колдунщик одной организации,
        под заголовком есть красный лейбл с тектом 'Адрес изменился'
  Проверка статуса "Организация переехала" со ссылкой на новый:
    - counter: /$page/$main/$result/composite/notice-stripe[@type="move/to"]
    - do: получить выдачу по запросу 'делимобиль ленинский проспект'
    - assert: |
        появился колдунщик одной организации,
        под заголовком есть красный лейбл со ссылкой 'Организация переехала'

specs:
  Проверка статуса "Больше не работает":
    - params:
        foreverdata: '4117313303'
    - do: Получить выдачу по запросу 'foreverdata'
    - tech: /$page/$main/$result/composite/notice-stripe[@type="close/unlimited"]
    - assert: |
        В выдаче есть блок 1орг
        Под заголовком есть полоска с текстовым статусом 'Больше не работает'
    - screenshot: Полоска с текстовым статусом 'Больше не работает' [plain]

  Проверка статуса "Временно не работает":
    - params:
        foreverdata: '1537543778'
    - do: Получить выдачу по запросу 'foreverdata'
    - tech: /$page/$main/$result/composite/notice-stripe[@type="close/short"]
    - assert: |
        В выдаче есть блок 1орг
        Под заголовком есть полоска с текстовым статусом 'Временно не работает'
    - screenshot: Полоска с текстовым статусом 'Временно не работает' [plain]

  Проверка статуса "Возможно, не работает":
    - params:
        foreverdata: '3493815061'
    - do: Получить выдачу по запросу 'foreverdata'
    - tech: /$page/$main/$result/composite/notice-stripe[@type="close/maybe"]
    - assert: |
        В выдаче есть блок 1орг
        Под заголовком есть полоска с текстовым статусом 'Возможно, не работает'
    - screenshot: Полоска с текстовым статусом 'Возможно, не работает' [plain]

  Проверка статуса "Адрес изменился":
    - params:
        foreverdata: '4121264134'
    - do: Получить выдачу по запросу 'foreverdata'
    - tech: /$page/$main/$result/composite/notice-stripe[@type="move/somewhere"]
    - assert: |
        В выдаче есть блок 1орг
        Под заголовком есть полоска с текстовым статусом 'Адрес изменился'
    - screenshot: Полоска с текстовым статусом 'Адрес изменился' [plain]

  Проверка статуса "Организация переехала" со ссылкой на новый:
    - params:
        foreverdata: '4160373552'
    - do: Получить выдачу по запросу 'foreverdata'
    - assert: |
        В выдаче есть блок 1орг
        Под заголовком есть полоска со статусом-ссылкой 'Организация переехала'
    - screenshot: Полоска со статусом-ссылкой 'Организация переехала' [plain]
    - do: Кликнуть на ссылку 'Организация переехала'
    - tech: Сработал счетчик path = '/$page/$main/$result/composite/notice-stripe[@type="move/to"]/link
    - assert: В новой вкладке открылась страница Яндекс.Карт с новым адресом организации

  Вход по QR-коду:
    - params:
        oid: 'b:229842109311'
    - do: Получить выдачу по запросу 'кофейня на братиславской'
    - assert: |
        В выдаче есть блок 1орг
        Под картой есть полоска со статусом '"Вход по QR-коду"'
    - screenshot: Пример внешнего вида [plain]

files:
- src/features/Companies/Companies.features/OrgNoticeStripe/OrgNoticeStripe.test/OrgNoticeStripe@touch-phone.hermione.js
- src/features/Companies/Companies.features/OrgNoticeStripe/OrgNoticeStripe.test/OrgNoticeStripe@touch-phone.hermione.e2e.js

v-team: VanillaGeo

counter: /$page/$main/$result[@wizard_name="companies" and @subtype="company"]/composite/notice-stripe

tlds: all
