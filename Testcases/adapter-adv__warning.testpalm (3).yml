feature: Адаптер рекламы
type: Дисклеймер

specs:
  Проверка клиентских счётчиков:
    - params:
        foreverdata: '2733905165'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче появились спец. размешения с дисклеймерами
    - do: нажать "Читать ещё" в третьем сниппете
    - assert: появился полный текст дисклеймера и ссылка "Скрыть"
    - tech: сработал клиентский счетчик path='/tech/direct/ad/disclaimer/more'
    - do: нажать "Скрыть" в третьем сниппете
    - assert: текст сниппета сократился и появилась ссылка "Читать ещё"
    - tech: сработал клиентский счетчик path='/tech/direct/ad/disclaimer/close'

  Корректная обработка пустой строки в дисклеймере:
    - params:
        foreverdata: '851922750'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: нет клиентских ошибок

  Внешний вид:
    - tags:
        - smoke
        - pp_new_core
    - params:
        foreverdata: '3488240904'
    - do: получить выдачу по запросу 'foreverdata'
    - screenshot: пример внешнего вида текста 1-го сниппета [plain-1]
    - screenshot: пример внешнего вида БАД дисклеймера 2-го сниппета [plain-2]
    - screenshot: пример внешнего вида БАД дисклеймера 3-го сниппета [plain-3]
    - screenshot: пример внешнего вида медицинского дисклеймера 4-го сниппета [plain-4]
    - do: кликнуть на медицинский дисклеймер 4-го сниппета
    - screenshot: пример внешнего вида медицинского дисклеймера 4-го сниппета [plain-4-expanded]
    - screenshot: пример внешнего вида медицинского 5-го сниппета [plain-5]
    - screenshot: пример внешнего вида медицинского 6-го сниппета [plain-6]

  Внешний вид сниппетов с ворнингами:
    - params:
        foreverdata: '2550294555'
    - do: получить выдачу по запросу 'foreverdata'
    - screenshot: пример внешнего вида текста 1-го сниппета [warning-1]
    - screenshot: пример внешнего вида медицинского дисклеймера 2-го сниппета [warning-2]
    - screenshot: пример внешнего вида текста 3-го сниппета [warning-3]
    - screenshot: пример внешнего вида текста 4-го сниппета [warning-4]

  Внешний вид сниппетов с возрастными метками:
    - tags:
        - smoke
        - pp_new_core
    - params:
        foreverdata: '2983328002'
    - do: получить выдачу по запросу 'foreverdata'
    - screenshot: пример внешнего вида текста 1-го сниппета [age-1]
    - screenshot: пример внешнего вида текста 2-го сниппета [age-2]
    - screenshot: пример внешнего вида текста 3-го сниппета [age-3]
    - screenshot: пример внешнего вида текста 4-го сниппета [age-4]

  Внешний вид сниппетов с ворнингами и возрастными метками:
    - params:
        foreverdata: '2733905165'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: у сниппетов есть предупреждения про проектную декларацию или "Не является лекарством" и возрастная метка 18+
    - screenshot: пример внешнего вида текста 1-го сниппета [warning-and-age-1]
    - screenshot: пример внешнего вида медицинского дисклеймера 2-го сниппета [warning-and-age-2]
    - screenshot: пример внешнего вида текста 3-го сниппета [warning-and-age-3]
    - screenshot: пример внешнего вида текста 4-го сниппета [warning-and-age-4]

  Внешний вид сниппетов-аскетов с ворнингами:
    - tags: [trafaret]
    - params:
        foreverdata: '1583906216'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: у сниппетов есть предупреждения про проектную декларацию или "Не является лекарством" и возрастная метка 18+
    - screenshot: пример вида по умолчанию [asket-warning]

  Внешний вид турбо-рекламы c ворнингом:
    - tags: [turbo]
    - params:
        foreverdata: '1802276111'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: у сниппета есть предупреждение "Проконсультируйтесь со специалистом"
    - screenshot: пример вида текста сниппета [turbo-and-warning]
    - do: нажать "Читать ещё" в сниппете
    - screenshot: пример вида развернутого текста сниппета [turbo-and-warning-extended]

  Трансформация БНО-сайтлинков в обычные для БАД-ов:
    - tags:
        - BNO
        - smoke
    - params:
        foreverdata: '285179817'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: первый рекламный сниппет содержит сайтлинки
    - screenshot: пример внешнего вида сайтлинков и дисклеймера [sitelinks]

files:
  - features/touch-phone/adapter-adv/__warning/adapter-adv__warning.hermione.js

tags:
  - skip_e2e_check
  - adv
  - disclaimer

v-team: Distribution

tlds:
  - ru
