feature: Адресный
type: Сети/рубрики

specs:
  beforeEach:
    - do: Получить выдачу по запросу 'аптеки' ('пятерочка адреса' или любой другой запрос про популярную сеть магазинов)
    - assert: На странице присутствует колдунщик сетей/рубрик с картой и тремя организациями под ней, а также кнопкой 'Ещё адреса' (Карта на широких экранах приклеена к левому краю)
    - screenshot: на экране присутствует подобный колдунщик (запрос может отличаться от скриншота) [adapters/adapter-companies/multiple-138-{{PLATFORM}} >> plain]
  Проверка ссылок и счётчиков:
    - tags: winphone7
    - do: нажать на заголовок колдунщика
    - assert: |
        в новой вкладке открылся сервис Яндекс.Карты или открылось приложение с картами
        запрос в Картах совпадает с введеным в поиске запросом
    - tech: проверить счётчик ссылки на заголовке
    - do: нажать на карту в колдунщике
    - assert: |
        в новой вкладке открылся сервис Яндекс.Карты или открылось приложение с картами
        запрос в Картах совпадает с введеным в поиске запросом
    - tech: проверить счётчик на карте
    - do: нажать на кнопку 'Еще адреса'
    - assert: |
        в новой вкладке открылся сервис Яндекс.Карты или открылось приложение с картами
        запрос в Картах совпадает с введеным в поиске запросом
    - tech: проверить счётчик ссылки «Еще адреса»
    - do: нажать на первую организацию предложенную колдунщиком
    - assert: в новой вкладке открылся сервис Яндекс.Карты или открылось приложение с картами
    - assert: на странице присутствует информация об организации
    - tech: проверить счётчик ссылки в первом тайтле в списке под картой
    - do: нажать на значок с телефоном, справа от первой предложенной организации
    - assert: происходит набор номера (зависит от модели телефона, возможна другая реакция на нажатие, главное чтобы он пытался позвонить или выдавал меню с предложением сделать это)
    - tech: проверить счётчик ссылки с иконкой телефона
    - do: переверните телефон в горизонтальное положение
    - assert: |
        колдунщик хорошо вписывается в общую выдачу
        кнопки с набором телефона не залезают за край экрана
    - tech: hermione в очень старых телефонах без svg [adapters/adapter-companies/multiple-138-{{PLATFORM}} >> nosvg]
    - tech: hermione в очень старых телефонах без телефона без svg [adapters/adapter-companies/multiple-no-phones-139-{{PLATFORM}} >> nosvg]
    - tech: hermione в очень старых телефонах без метро без svg [adapters/adapter-companies/multiple-no-subway-140-{{PLATFORM}} >> nosvg]
    - tech: hermione в очень старых телефонах без телефона и метро без svg [adapters/adapter-companies/multiple-no-subway-no-phones-141-{{PLATFORM}} >> nosvg]
    - tech: hermione в очень старых телефонах без телефона и метро без svg [adapters/adapter-companies/multiple-no-subway-no-phones-141-{{PLATFORM}} >> nosvg]
    - tech: hermione в очень старых телефонах с расстоянием без svg [adapters/adapter-companies/multiple-with-location-142-{{PLATFORM}} >> nosvg]
  Проверка расстояния до организации если есть разрешение на определение геолокации [manual]:
    - automation: SERP-74717
    - tags: no_assessors
    - screenshot: до выполнения теста в настройках телефона стоит разрешение определения местоположения, а внешний вид с информацией о расстоянии до организации [adapters/adapter-companies/multiple-with-location-142-{{PLATFORM}} >> plain]

files:
# - features/touch-phone/adapters/adapter-companies.autogenerated.hermione.js
  - hermione/test-suites/touch-phone/adapters/adapter-companies/adapter-companies_type_multiple.hermione.js

manager:
  - podnebesnaya

v-team: VanillaGeo

tags:
  - button
  - address
  - maps
  - smoke
  - smoke_extended
  - rating
  - meta
  - metro
  - reviewed

selector: .t-construct-adapter__companies

counter: /$page/$main/$result[@wizard_name="companies"]/teaser

tlds: none
