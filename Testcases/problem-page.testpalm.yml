feature: Страница задания

description: для перехода на страницу задачи вставьте номер задачи в адресе, пример формата номера T811, урл '/tutor/subject/problem/?problem_id=T811'

specs:
    Переход на страницу задачи:
        - tags: smoke
        - do: перейти на главную страницу сервиса Яндекс.Репетитор
        - assert: открыта главная страница сервиса Яндекс.Репетитор
        - do: перейти на страницу задачи "T811", номер задачи в параметре урла problem_id '/tutor/subject/problem/?problem_id=T811'
        - assert: открыта страница задания
    Breadcrumbs:
        beforeEach:
            - do: перейти на страницу задачи любого предмета
        Первая ссылка:
            - do: кликнуть по первой ссылке содержащей название экзамена
            - assert: произошло перенаправление на главную страницу /tutor
            - assert: адрес содержит параметр 'exam_id'
        Вторая ссылка:
            - do: кликнуть по второй ссылке содержащей название предмета
            - assert: произошло перенаправление на страницу предмета /tutor/subject
            - assert: адрес содержит параметр 'subject_id'
        Третья ссылка:
            - do: кликнуть по третьей ссылке содержащей название топика
            - assert: произошло перенаправление на страницу топика /tutor/subject/tag/problems
            - assert: адрес содержит параметры 'ege_number_id' и 'tag_id'
        Четвертая ссылка:
            - do: кликнуть по четвертой серой ссылке содержащей номер задания
            - assert: ничего не произошло (ссылка неактивна)
        Проверка внешнего вида:
            - do: сделать скриншот страницы
            - assert: на скриншоте у второго элемента хлебных крошек должна быть иконка предмета
            - screenshot: внешний вид эл-та BreadCrumbs [plain]
    Карточка связанных разделов/вариантов:
        beforeEach: 
            - do: перейти на страницу задачи любого предмета
            - assert: открыта страница задания
        Переход на страницу раздела:
            - screenshot: внешний вид карточки связанных разделов и вариантов содержащих задание [plain]
            - do: кликнуть по ссылке в списке разделов
            - assert: произошло перенаправление на страницу топика (темы/раздела) /tutor/subject/tag/problems
            - assert: адрес содержит параметры 'ege_number_id' и 'tag_id'
        Переход на страницу варианта:
            - do: кликнуть по ссылке в списке вариантов
            - assert: произошло перенаправление на страницу варианта /tutor/subject/variant
            - assert: адрес содержит параметр 'variant_id'
    Аналоги:
        - tags: smoke
        - do: перейти на страницу задачи T269, номер задачи в параметре урла problem_id '/tutor/subject/problem/?problem_id=T269'
        - assert: открыта Страница задания T269
        - do: кликнуть по "Показать 1 аналогичное задание" в карточке задания
        - assert: страница не обновилась
        - assert: появился блок "Аналогичные задания" содержащий карточку/ки задач-аналогов
        - do: клинкуть по "Скрыть 1 аналогичное задание" в карточке задания
        - assert: страница не обновилась
        - assert: блок "Аналогичные задания" отсутствует на странице
    Задача из контрольной работы:
        До открытия ответов:
            - tags: no_assessors
            - do: перейти на страницу задачи T7730, добавив в адрес параметр "server_time=1556259200"
            - assert: задача не видна на странице
            - assert: в карточке заголовок "Ошибка 404. Нет такой страницы"
        После открытия ответов:
            - tags: no_assessors
            - do: перейти на страницу задачи T7730
            - assert: открыта страница задания
    Блок ближайшего достижения:
        Без авторизации:
            - do: перейти на страницу задания T1, номер задачи в параметре урла problem_id '/tutor/subject/problem/?problem_id=T1'
            - do: убедиться, что пользователь не залогинен (очистить cash и cookies браузера)
            - assert: пользователь не залогинен - чистая сессия
            - assert: блок с ближайшим достижением отсутствует на странице
        С авторизацией:
            - tags: no_assessors
            - do: авторизоваться на yandex.ru
            - do: перейти на страницу задания T1, добавив в адресную строку "&passport_uid=hermione_achievement_progress&server_time=1573042084&testing_achievements=1"
            - assert: на странице присутствует блок с достижением
            - do: навести курсор / кликнуть на иконку достижения
            - assert: появился попап с текстом "8 / 10"
            - screenshot: внешний вид блока с достижением [first]
            - do: ввести в поле ответа 25
            - do: кликнуть в кнопку "Проверить ответ"
            - assert: в поле ввода ответа указано в правой части "Верно"
            - do: навести курсор / кликнуть на иконку достижения
            - assert: появился попап с текстом "9 / 10"
            - screenshot: внешний вид блока с достижением [second]
    Рекомендации:
        Без авторизации:
            - tags: smoke
            - do: убедиться, что пользователь не авторизован, либо разлогиниться
            - do: перейти на страницу любой задачи предмета Физика
            - assert: |
                открыта страница задачи
                пользователь не авторизован
                на странице присутствует блок рекомендаций
            - screenshot: внешний вид блока рекомендаций без данных [plain]
        С авторизацией:
            - tags: 
                - smoke
                - no_assessors
            - do: убедиться, что пользователь авторизован, либо залогинитьсья
            - do: перейти на страницу любой задачи предмета Физика
            - assert: |
                открыта страница задачи
                пользователь авторизован
                на странице пристуствует блок рекомендаций с задачами
            - screenshot: внешний вид блока рекомендаций с данными [plain]
        Не перекрывают попап комментатора YOUNGLINGS-2792 [manual]:
            - automation: YOUNGLINGS-2911
            - tags: 
                - smoke
                - no_assessors
            - do: убедиться, что пользователь авторизован, либо залогинитьсья
            - do: перейти на страницу любой задачи предмета Физика
            - assert: |
                открыта страница задачи
                пользователь авторизован
                на странице пристуствует блок рекомендаций с задачами
                ниже присустствует блок комментатора
            - do: нажать на кнопку фильтрации в комментаторе
            - assert: развернутый попап фильтрации комментатора не должен перекрываться блоком рекоммендаций
            

v-team: Younglings

qa-engineer:
    - helm

platform:
    - common

tags:
    - edu-front
    - problem-page

files:
    - tests/hermione/suites/common/problem-page/problem-page.hermione.js
