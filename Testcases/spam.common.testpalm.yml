feature: Спам плашка

specs:

    Показывается спам саджест, если пользователю впервые написал собеседник в приватный чат и его нет в адресной книге[manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в другом браузере
              Пользователь А в данном тест-кейсе является основным (необходимо авторизовываться им в проверяемом браузере)
              У аккаунтов нет между собой приватного чата
              У пользователя А, нет в контактах пользователя Б (Пользователя Б лучше зарегистрировать нового)
              Пользователь Б знает логин пользователя А
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Ввести в поле ввода логин пользователя А
        - assert: В результатах поиска есть пользователь А
        - do: Нажать на него
        - assert: Открылось окно чата с пользователем А
        - do: В поле ввода ввести несколько символов и нажать кнопку "Отправить"
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть через список чатов приватный чат с пользователем Б
        - assert: |
              Открыто окно чата
              Видим плашку спам саджеста

    Спам саджест пропадает и не показывается больше для данного приватного чата, если закрыть по X[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в другом браузере
              Пользователь А в данном тест-кейсе является основным (необходимо авторизовываться им в проверяемом браузере)
              У аккаунтов нет между собой приватного чата
              У пользователя А, нет в контактах пользователя Б (Пользователя Б лучше зарегистрировать нового)
              Пользователь Б знает логин пользователя А
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Ввести в поле ввода логин пользователя А
        - assert: В результатах поиска есть пользователь А
        - do: Нажать на него
        - assert: Открылось окно чата с пользователем А
        - do: В поле ввода ввести несколько символов и нажать кнопку "Отправить"
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть через список чатов приватный чат с пользователем Б
        - assert: |
              Открыто окно чата
              Видим плашку спам саджеста
        - do: Закрыть плашку по кнопке Х
        - assert: Плашка пропадает из окна чата
        - do: Обновить страницу браузера
        - assert: |
              Страница браузера обновлена
              Открыто окно чата с пользователем Б
              Нет плашки спам саджеста

    Спам саджест  и чат скрывается, если выбрали заблокировать пользователя[manual]:
        - tags: [advanced_smoke]
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в другом браузере
              Пользователь А в данном тест-кейсе является основным (необходимо авторизовываться им в проверяемом браузере)
              У аккаунтов нет между собой приватного чата
              У пользователя А, нет в контактах пользователя Б (Пользователя Б лучше зарегистрировать нового)
              Пользователь Б знает логин пользователя А
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Ввести в поле ввода логин пользователя А
        - assert: В результатах поиска есть пользователь А
        - do: Нажать на него
        - assert: Открылось окно чата с пользователем А
        - do: В поле ввода ввести несколько символов и нажать кнопку "Отправить"
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть через список чатов приватный чат с пользователем Б
        - assert: |
              Открыто окно чата
              Видим плашку спам саджеста
        - do: Нажать по "Сообщить и заблокировать"
        - assert: |
              На экране появилась надпись "Жалоба принята"
              Вместо поля ввода появилась кнопка "Разблокировать"

    Проверить что пользователь попадает в список заблокированных, если заблокировали через спам саджест[manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в другом браузере
              Пользователь А в данном тест-кейсе является основным (необходимо авторизовываться им в проверяемом браузере)
              У аккаунтов нет между собой приватного чата
              У пользователя А, нет в контактах пользователя Б (Пользователя Б лучше зарегистрировать нового)
              Пользователь Б знает логин пользователя А
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Ввести в поле ввода логин пользователя А
        - assert: В результатах поиска есть пользователь А
        - do: Нажать на него
        - assert: Открылось окно чата с пользователем А
        - do: В поле ввода ввести несколько символов и нажать кнопку "Отправить"
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть через список чатов приватный чат с пользователем Б
        - assert: |
              Открыто окно чата
              Видим плашку спам саджеста
        - do: Нажать по "Сообщить и заблокировать"
        - assert: |
              На экране появилась надпись "Жалоба принята"
              Вместо поля ввода появилась кнопка "Разблокировать"
        - do: Нажать на шестеренку в шапке списка чатов
        - assert: Открывается экран настроек профиля
        - do: Найти блок "Заблокированные пользователи" и нажать на него
        - assert: |
              Открывается экран "Заблокированные пользователи"
              В списке заблокированных пользователей есть пользователь Б

    Спам саджест не пропадает для данного приватного чата, если его не закрыли одним и способов[manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в другом браузере
              Пользователь А в данном тест-кейсе является основным (необходимо авторизовываться им в проверяемом браузере)
              У аккаунтов нет между собой приватного чата
              У пользователя А, нет в контактах пользователя Б (Пользователя Б лучше зарегистрировать нового)
              Пользователь Б знает логин пользователя А
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Ввести в поле ввода логин пользователя А
        - assert: В результатах поиска есть пользователь А
        - do: Нажать на него
        - assert: Открылось окно чата с пользователем А
        - do: В поле ввода ввести несколько символов и нажать кнопку "Отправить"
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть через список чатов приватный чат с пользователем Б
        - assert: |
              Открыто окно чата
              Видим плашку спам саджеста
        - do: Обновить страницу браузера
        - assert: |
              Страница браузера обновлена
              Открыто окно чата с пользователем Б
              Есть плашка спам саджеста
        - do: Закрыть вкладку в браузере с мессенджером
        - assert: Вкладка с браузером закрыта
        - do: Открыть в браузере мессенджер
        - assert: Мессенджер в браузере открыт
        - do: Открыть чат с пользователем Б
        - assert: |
              Открыто окно чата
              В окне чата отображается спам плашка

    Показывается спам саджест, если пользователя заблокировали и потом разблокировали[manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в другом браузере
              Пользователь А в данном тест-кейсе является основным (необходимо авторизовываться им в проверяемом браузере)
              У аккаунтов нет между собой приватного чата
              У пользователя А, нет в контактах пользователя Б (Пользователя Б лучше зарегистрировать нового)
              Пользователь Б знает логин пользователя А
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Ввести в поле ввода логин пользователя А
        - assert: В результатах поиска есть пользователь А
        - do: Нажать на него
        - assert: Открылось окно чата с пользователем А
        - do: В поле ввода ввести несколько символов и нажать кнопку "Отправить"
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть через список чатов приватный чат с пользователем Б
        - assert: |
              Открыто окно чата
              Видим плашку спам саджеста
        - do: Нажать по "Сообщить и заблокировать"
        - assert: |
              На экране появилась надпись "Жалоба принята"
              Вместо поля ввода появилась кнопка "Разблокировать"
        - do: Нажать на кнопку "Разблокировать"
        - assert: |
              Вместо кнопки "Разблокировать" появилось поле ввода
              В окне чата появилась спам плашка

    Спам саджест не скрывается, если написать в данный чат пользователем[manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в другом браузере
              Пользователь А в данном тест-кейсе является основным (необходимо авторизовываться им в проверяемом браузере)
              У аккаунтов нет между собой приватного чата
              У пользователя А, нет в контактах пользователя Б (Пользователя Б лучше зарегистрировать нового)
              Пользователь Б знает логин пользователя А
        - do: Авторизоваться пользователем Б, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Ввести в поле ввода логин пользователя А
        - assert: В результатах поиска есть пользователь А
        - do: Нажать на него
        - assert: Открылось окно чата с пользователем А
        - do: В поле ввода ввести несколько символов и нажать кнопку "Отправить"
        - assert: Сообщение отправлено
        - do: Авторизоваться пользователем А, введя корректные логин/пароль
        - assert: Авторизация прошла успешно
        - do: Открыть через список чатов приватный чат с пользователем Б
        - assert: |
              Открыто окно чата
              Видим плашку спам саджеста
        - do: Пользователем А отправить в чат сообщение
        - assert: |
              Сообщение было отправлено
              В окне чата не пропала спам-плашка

    Не показывается спам саджест, если пользователя, который есть в адресной книге, заблокировали и потом разблокировали[manual]:
        - automation:
        - description: |
              Для прохождения кейса необходимо 2 аккаунта, 2м вспомогательным аккаунтом можно авторизоваться в другом браузере
              Пользователь А в данном тест-кейсе является основным (необходимо авторизовываться им в проверяемом браузере)
              Пользователь А и Пользователь Б есть друг у друга в списке контактов
              Между пользователем А и Б есть общий приватный чат
        - do: Под пользователем А Открыть список чатов 
        - assert: Открывается окно списка чатов
        - do: Открыть чат из description
        - assert: Открывается чат из description
        - do: Нажать по шапке чата
        - assert: Открылась карточка контакта
        - do: Выбрать пункт “Заблокировать и скрыть” и подтвердить блокировку
        - assert: |
              Закрылась карточка контакта и окно приватного чата
              Открыт нулевой экран мессенджера
              В списке  чатов пропал приватный чат с пользователем Б
        - do: Нажать на кнопку "Настройки" в виде шестерёнки вверху списка чатов
        - assert: Открываются настройки аккаунта
        - do: Нажать на "Заблокированные пользователи"
        - assert: В списке отображается заблокированный пользователь Б
        - do: Кликнуть ЛКМ/Тапнуть на "Разблокировать"
        - assert: |
              Контакт удаляется из списка
              Окно с заблокированными пользователями пропадает
              В списке чатов отображается приватный чат с пользователем Б
        - do: Открыть приватный чат с пользователем Б
        - assert: |
              Открыто окно чата
              В окне чата не появилась спам плашка

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
    - chamb

