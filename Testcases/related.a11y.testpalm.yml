feature: Связанные запросы
type: Доступность

browsers: chrome-desktop

specs:
  Проверка на доступность:
    Под выдачей:
      - do: получить выдачу по запросу 'котики'
      - assert: |
          в конце выдачи отображается блок со связанными запросами,
          внутри блока отображается заголовок с текстом 'Люди ищут',
          в блоке отображаются ссылки на связанные запросы
          (на доменах отличных от ru может осуществляться перевод текста 'Люди ищут')
      - tech: |
          заголовок в блоке должен быть h2
          у связанных запросов должен быть атрибут role='navigation'
          у первой колонки связанных запросов должен быть атрибут role='list'
          у первого элемента первой колонки связанных запросов должен быть атрибут role='listitem'
          у второй колонки связанных запросов должен быть атрибут role='list'
          у первого элемента второй колонки связанных запросов должен быть атрибут role='listitem'
          у связанных запросов должен быть атрибут aria-labelledby с id, указывающим на заголовок h2
          у первой колонки связанных запросов должен быть атрибут aria-labelledby с id, указывающим на заголовок h2
          у второй колонки связанных запросов должен отсутствовать атрибут aria-labelledby
          у всех ссылок на связанные запросы нет атрибута tabindex
          у всех ссылок на связанные запросы должен присутствовать атрибут href
          у всех иконок ссылок на связанные запросы должен присутствовать атрибут aria-hidden='true'
      - do: нажать на любую ссылку связанного запроса
      - assert: |
          выдача обновилась в той же вкладке,
          выдача сформировалась по выбранному связанному запросу,
          в поисковой стрелке отображается текст выбранного связанного запроса
      - assertMetrics: '*'
    При отскролле назад:
      - do: |
          получить выдачу по запросу 'котики',
          cкролл вниз до конца выдачи,
          cкролл обратно на самый верх
      - assert: |
          над выдачей отображается блок с переформулировками,
          в блоке отображаются ссылки на переформулировки
      - tech: |
          у блока переформулировок должен быть атрибут role='list'
          у первого элемента переформулировок должен быть атрибут role='listitem'
          у обертки списка переформулировок должен быть атрибут role='presentation'
          у всех ссылок на связанные запросы нет атрибута tabindex
          у всех ссылок на связанные запросы должен присутствовать атрибут href
      - assertMetrics: '*'
    При возврате:
      - do: |
          получить выдачу Поиска по запросу 'привет'
          нажать на первый органик сниппет
          вернуться обратно на выдачу
      - assert: появились переформулировки под этим сниппетом
      - tech: |
          у блока переформулировок (.scroller__wrap) должен быть атрибут role='list'
          у первого элемента переформулировок должен быть атрибут role='listitem'
          у всех ссылок на связанные запросы нет атрибута tabindex
          у всех ссылок на связанные запросы должен присутствовать атрибут href
          у первой строки связанных запросов должен быть атрибут role='presentation'
          у второй строки связанных запросов должен быть атрибут role='presentation'
      - assertMetrics: '*'
  Две колонки:
    tags:
      - manual
      - skip_manual_check
    beforeEach:
      - do: получить выдачу по запросу 'вконтакте'
      - assert: |
          в поисковой строке есть текст 'вконтакте'
          поисковая выдача содержит результаты поиска
      - do: включить скринридер
    Навигация по tab:
      - automation: SERP-100101
      - do: с помощью кнопки tab найти первый элемент блока поиска по похожим запросам
      - assert: |
          при навигации на первый элемент поиска по похожим запросам, ридер зачитывает:
          люди ищут + список из 5 элементов + текст ссылки + ссылка
      - do: с помощью кнопки tab пройти по всем элементам блока поиска по похожим запросам
      - assert: |
          при навигации на остальные элементы кроме первого из второго списка, ридер зачитывает:
          текст ссылки + ссылка
          при навигации на первый элемент второго списка, ридер зачитывает:
          список из 5 элементов + текст ссылки + ссылка
          в двух списках 10 элементов
    Навигация по горящим клавишам:
      - automation: SERP-100101
      - do: с помощью горячих клавиш для навигации найти первый элемент блока поиска по похожим запросам
      - assert: |
          при навигации на первый элемент поиска по похожим запросам, ридер зачитывает:
          люди ищут + список из 5 элементов + текст ссылки + ссылка
      - do: с помощью горячих клавиш для навигации пройти по всем элементам блока поиска по похожим запросам
      - assert: |
          при навигации на остальные элементы кроме первого из второго списка, ридер зачитывает:
          текст ссылки + ссылка
          при навигации на первый элемент второго списка, ридер зачитывает:
          список из 5 элементов + текст ссылки + ссылка
          в двух списках 10 элементов
  Одна колонка:
    tags:
      - manual
      - skip_manual_check
    beforeEach:
      - do: получить выдачу по запросу 'что посетить в москве'
      - assert: |
          в поисковой строке есть текст 'что посетить в москве'
          Поисковая выдача содержит результаты поиска
      - do: включить скринридер
    Навигация по tab:
      - automation: SERP-100101
      - do: с помощью кнопки tab найти первый элемент блока поиска по похожим запросам
      - assert: |
          при навигации на первый элемент поиска по похожим запросам, ридер зачитывает:
          люди ищут + список из 10 элементов + текст ссылки + ссылка
      - do: с помощью кнопки tab пройти по всем элементам блока поиска по похожим запросам
      - assert: |
          при навигации на остальные элементы, ридер зачитывает:
          текст ссылки + ссылка
          в списке 10 элементов
    Навигация по горящим клавишам:
      - automation: SERP-100101
      - do: с помощью горячих клавиш для навигации найти первый элемент блока поиска по похожим запросам
      - assert: |
          при навигации на первый элемент поиска по похожим запросам, ридер зачитывает:
          люди ищут + список из 10 элементов + текст ссылки + ссылка
      - do: с помощью горячих клавиш для навигации по ссылкам пройти по всем элементам блока поиска по похожим запросам
      - assert: |
          при навигации на остальные элементы, ридер зачитывает:
          текст ссылки + ссылка
          в списке 10 элементов

files:
  - features/desktop/related/related.a11y.hermione.js

v-team: UniAnswer

tlds:
  - ru

tags:
  - a11y_serp
  - skip_e2e_check
  - no_assessors
  - uni_answer
