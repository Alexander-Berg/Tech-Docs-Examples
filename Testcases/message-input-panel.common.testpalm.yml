feature: Поле ввода

specs:

    beforeEach:
        - do: Перейти по ссылке "https://passport.yandex.ru" и авторизоваться.
        - assert: Авторизация прошла успешно.
        - do: В соседней вкладке открыть мессенджер (Для десктопного приложения - запустить приложение)
        - assert: Открылся список чатов.
        - do: В списке чатов открыть любой чат, который соответствует описанию из description.
        - assert: Чат открыт.

    В поле ввода отображается текст, набранный с клавиатуры[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат
        - do: Тапнуть/Кликнуть ЛКМ на поле ввода в чате из description.
        - assert: Курсор находится в поле ввода (если тест-кейс проходится на мобильном девайсе - то поднимается клавиатура)
        - do: В поле ввода сообщения ввести несколько символов.
        - assert: Вводимые символы отображаются в поле ввода.

    В поле ввода отображаются символовы, цифры и т.д.[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат
        - do: Тапнуть/Кликнуть ЛКМ на поле ввода в чате из description.
        - assert: Курсор находится в поле ввода (если тест-кейс проходится на мобильном девайсе - то поднимается клавиатура)
        - do: В поле ввода ввести цифры
        - assert: Вводимые цифры отображаются в поле ввода
        - do: В поле ввода ввести специальные символы
        - assert: Вводимые специальные символы отображаются в поле ввода

    Текстовое сообщение отправляется по кнопке Ввод на панели ввода сообщения[manual]:
        - tags: [advanced_smoke, b2b]
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат
        - do: В поле ввода сообщения ввести несколько символов в чате из description.
        - assert: Вводимые символы отображаются в поле ввода.
        - do: Нажать на кнопку "отправить" на панели ввода сообщения.
        - assert: Сообщение отправляется.

    В поле ввода можно вставить ранее скопированный текст[manual]:
        - automation:
        - description: |
              В буфере обмена есть ранее скопированный текст.
              У авторизованного пользователя есть приватный/групповой чат
        - do: В чате нажать лонгтапом/кликнуть ПКМ в поле ввода и нажать "вставить".
        - assert: В поле ввода появился текст из буфера обмена.
        - do: Нажать кнопку "Отправить".
        - assert: |
              Сообщение отправилось
              В баллуне отправленного сообщения видим одну галочку.

    Поле ввода расширяется до n строк[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат
        - do: В поле ввода сообщения ввести несколько символов в чате из description.
        - assert: Вводимые символы отражаются в поле ввода.
        - do: Перейти на новую строку в поле воода.
        - assert: Курсор перенесен на новую строку.
        - do: В поле ввода сообщения ввести несколько символов
        - assert: Вводимые символы отражаются в поле ввода
        - do: Повторить шаги 9-11 еще 10 раз.
        - assert: Поле ввода каждый раз расширяется.
        - do: Перейти на новую строку и в поле ввода сообщения ввести несколько символов.
        - assert: Первая строка уезжает под верхнюю часть поля ввода, пользователь видит курсор ввода и то, что мы вводим.

    Кнопка "Backspace" удаляет ранее введенный текст:
        - tags: [advanced_smoke]
        - description: У авторизованного пользователя есть приватный/групповой чат
        - do: В поле ввод сообщения ввести несколько символов
        - assert: |
              Вводимые символы отражаются в поле ввода.
              Вместо кнопки микрофона появилась кнопка отправки
        - do: Нажать один раз на кнопку "Backspace".
        - assert: Удалился последний введенный символ.
        - do: Нажать кнопку "Backspace" столько раз, сколько символов вы ввели ранее, чтобы все введенные символы удалились.
        - assert: |
              Все символы удалены
              Всесто кнопки отправки появилась кнопка микрофона

    В панели ввода есть возможность отправлять стикер и прикреплять файлы[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат
        - do: Посмотреть на панель ввода в чате из description.
        - assert: |
              Панель ввода содержит кнопки "прикрепить файл" (скрепка) и "стикеры" (иконка смайлика)
              В панели ввода есть кнопка "микрофона" (или кнопка отправки)
              Если это приватный или групповой чат, то в поле ввода также есть кнопка выставления важности (звездочка)

    Нельзя отправить сообщение, состоящее из пробелов:
        - description: У авторизованного пользователя есть приватный/групповой чат
        - do: Тапнуть/Кликнуть ЛКМ в поле ввода в чате из description.
        - assert: Фокус курсора ставиться в поле ввода.
        - do: В поле ввода ввести одни пробелы.
        - assert: Кнопка "Микрофона" не меняется на кнопку "Отпрвить"
        - do: Убрать пробелы из поля ввода.
        - assert: |
              Пробелы убраны из поля ввода.
              В поле ввода появляется плейсхолдер с надписью "Напишите сообщение...".
        - do: В поле ввода сообщения ввести несколько символов.
        - assert: |
              Вводимые символы отображаются в поле ввода.
              Кнопка "Микрофона" заменилась на кнопку "Отправить".
        - do: Тапнуть по кнопке “Отправить” справа от поля ввода.
        - assert: Сообщение отправилось и отображается в окне чата.

    Если в поле ввода ничего не введено, то в поле ввода отображается плейсхолдер со следующим текстом “Напишите сообщение..."[manual]:
        - automation:
        - description: У авторизованного пользователя есть приватный/групповой чат
        - do: Тапнуть/Кликнуть ЛКМ в поле ввода в чате из description.
        - assert: |
              Фокус курсора ставиться в поле ввода.
              В поле ввода надпись "Напишите сообщение...".
        - do: В поле ввода сообщения ввести несколько символов.
        - assert: Вводимые символы отображаются в поле ввода.
        - do: Нажать кнопку “Backspace” столько раз, сколько символов вы ввели ранее, чтобы все введенные символы удалились.
        - assert: После удаления последнего символа в поле ввода появилась надпись "Напишите сообщение..."

    Текстовое сообщение доставляется до адресата[manual]:
        - automation:
        - description: |
              У аккаунта А и Б есть общий приватный/групповой чат.
              Аккаунтом А авторизованы в одном браузере, аккаунтом Б - в том же либо в другом браузере.
        - do: Под аккаунтом А в чате из description в поле ввода сообщения ввести несколько символов.
        - assert: Вводимые символы отображаются в поле ввода.
        - do: Нажать на кнопку "отправить" на панели ввода сообщения.
        - assert: Сообщение отправляется и отображается в окне чата.
        - do: Под аккаунтом Б открыть чат из description.
        - assert: Сообщение доставлено.

    Авторизованный пользователь может отправлять сообщения в чаты с бизнесом[manual]:
        - automation:
        - description: |
              Для авторизации пользователем А использовать аккаунт minsktest150/QazMssngr1.
              Сообщения нужно отправлять в чат "yambot-6nqk4qsu"
        - do: Отправить текстовое сообщение в чат из description.
        - assert: |
              Сообщение отправляется.
              Через пару секунд  приходит зеркальный ответ.

files:
    - tests/hermione/suites/messenger/chat-window/message-input-panel.common.hermione.ts

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
