feature: Страница "Инстори"

description: Страница со списком новостей по сюжету (instory на таче)

specs-integration:
  подгружает выдачу по кнопке "Больше результатов":
    - tags:
      - backend_news
      - smoke_zen
    - do: Открыть Яндекс Новости на странице рубрики "Главное"
    - do: Перейти на сюжет с большим колличеством источников (такой сюжет можно найти, как правило, в топ-5 - это должно быть не самое свежее событие, о котором с большой вероятностью написали все сми. Обратите внимание! Сюжет не должен быть траурным!)
    - do: Тапнуть по заголовку "Подробнее о событии" - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-23_18-05-16.png
    - assert: |
       В текущей вкладке открывается страница, которая содержит 'instory' (без кавычек) в адресной строке (то есть, ссылка должна начинаться вот так - https://yandex.ru/news/instory/ и далее продолжение ссылки с различными параметрами),
       у каждого источника на странице есть иконка, название и дата/время публикации
    - do: Проскроллить страницу вниз до конца
    - assert: перед футером присутствует кнопка "Больше результатов" (если кнопки нет найти другой сюжет)
    - do: Тапнуть на кнопку "Больше результатов"
    - assert: |
        загружается вторая страница выдачи,
        страница отделена от первой номером и разделителем,
        карточки со второй страницы не дублируют карточки на первой странице,
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-07-22_17-34-17.png
    - do: Проскроллить вторую страницу выдачи и тапнуть на кнопку "Больше результатов"
    - assert: |
        загружается третья страница выдачи,
        страница отделена от второй номером и разделителем,
        нет бесконечного спиннера при попытке загрузить страницу,
        все карточки загружаются сразу, карточки третьей страницы не дублируют карточки второй и первой страницы

  содержит рекламу:
    - tags:
      - advertisement
      - backend_news
      - smoke_zen
    - do: Открыть Яндекс Новости на странице рубрики "Главное"
    - do: Перейти на сюжет с большим колличеством источников (такой сюжет можно найти, как правило, в топ-5 - это должно быть не самое свежее событие, о котором с большой вероятностью написали все сми. Обратите внимание! Сюжет не должен быть траурным!)
    - do: Тапнуть по заголовку "Подробнее о событии" - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-23_18-05-16.png
    - assert: |
       в новой вкладке открывается страница, которая содержит 'instory' (без кавычек) в адресной строке (то есть, ссылка должна начинаться вот так - https://yandex.ru/news/instory/ и далее продолжение ссылки с различными параметрами),
       у каждого источника на странице есть иконка, название и дата/время публикации
    - do: Проскроллить страницу вниз до кнопки "Больше результатов"
    - assert: |
        на странице есть реклмные блоки,
        первый рекламный блок - над заголовком сюжета, внешний вид https://jing.yandex-team.ru/files/nightsonne/2021-09-16_22-26-55.png ,
        последующие рекламные блоки расположены в ленте так - 2й - после 5 источников, далее через каждые 6 источников, последний - перед футером,
        рекламный блок перед футером расположен в любом случае, даже если перед ним меньше 6-ти источников, внешний вид https://jing.yandex-team.ru/files/nightsonne/2021-09-16_22-31-52.png
        реклама в блоках прогружается, верстка не едет
    - do: Тапнуть по кнопке "Больше результатов" и проскроллить страницу
    - assert: |
         нет бесконечного спиннера при попытке загрузить страницу,
         загружается вторая страница выдачи,
         рекламные блоки присутствуют, реклама в них прогружается, верстка не едет

specs:
  позволяет перейти на новость на странице источника:
    - do: Открыть Новости на странице рубрики "Главная"
    - do: Перейти на сюжет с большим колличеством источников (такой сюжет можно найти, как правило, в топ-5 - это должно быть не самое свежее событие, о котором с большой вероятностью написали все сми. Обратите внимание! Сюжет не должен быть спортивным, а также сюжет не должен быть траурным!)
    - do: Тапнуть по заголовку "Подробнее о событии" - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-23_18-05-16.png
    - assert: |
       в той же вкладке открывается страница, которая содержит 'instory' (без кавычек) в адресной строке (то есть, ссылка должна начинаться вот так - https://yandex.ru/news/instory/ и далее продолжение ссылки с различными параметрами),
       у каждого источника на странице есть иконка, название и дата/время публикации
    - do: Тапнуть по заголовку любой новости (не сюжета! около новости будет иконка)
    - assert: |
        в новой вкладке открывается сюжет на странице источника,
        в адресной строке есть utm_source и utm_medium,
        если переход произошел по турбо-источнику, то открываться сюжет будет в той же вкладке
        (в таком случае в адресной строке будет присутствовать 'turbo', без кавычек, а также будут присутствовать умт-метки tm_source, utm_medium, а также utm_referrer)

  позволяет вернуться к сюжету:
    - do: Открыть Новости на странице рубрики "Главная"
    - do: Перейти на сюжет с большим колличеством источников (такой сюжет можно найти, как правило, в топ-5 - это должно быть не самое свежее событие, о котором с большой вероятностью написали все сми. Обратите внимание! Сюжет не должен быть спортивным, а также сюжет не должен быть траурным!)
    - do: Тапнуть по заголовку "Подробнее о событии" - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-23_18-05-16.png
    - assert: |
       в той же вкладке открывается страница, которая содержит 'instory' (без кавычек) в адресной строке (то есть, ссылка должна начинаться вот так - https://yandex.ru/news/instory/ и далее продолжение ссылки с различными параметрами),
       у каждого источника на странице есть иконка, название и дата/время публикации
    - do: Тапнуть на заголовок сюжета https://jing.yandex-team.ru/files/vasekerka/2021-07-22_17-44-42.png
    - assert: осуществился переход на страницу сюжета

  корректно отображается в темной теме:
    - do: открыть страницу инстори
    - assert: в темной теме все элементы отображаются корректно

files:
  - features/news/instory/instory.phone.hermione.js
  - features/news/instory/instory.phone.hermione.e2e.js

manager: tatten

qa-engineer: vasekerka

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
