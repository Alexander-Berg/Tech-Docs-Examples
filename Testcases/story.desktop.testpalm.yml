feature: Cюжет Яндекс.Новостей

description: Сюжет - это основная сущность сервиса, которая обладает несколькими блоками. Блоки заголовка, аннотации и медиаблок позволяют пользователю ознакомиться с кратким содержанием сюжета, блок 'Подробнее о событии' предоставляют пользователю выбор лицензированного информационного агентства для полного ознакомления с сюжетом. Траурный сюжет - сюжет об убийстве, смерти, тяжелых травмах, захвате заложников, теракте.

specs-integration:
  подгружает под сюжетом ленту новостей:
    - tags:
      - smoke
    - do: открыть выдачу сервиса на странице рубрики 'Главное'
    - do: перейти в любой неспортивный сюжет из топ-5 кликом по заголовку в новостной карточке
    - do: проскроллить сюжет ниже блока 'Подробнее о событии'
    - assert: под блоком отображается новостная лента
    - do: проскроллить ленту ниже
    - assert: при скролле появляется спиннер, подгружается новая порция карточек, карточки отображаются корректно
    - do: проскроллить ленту еще несколько раз, подгрузив несколько (3-4) порций карточек
    - assert: при скролле появляется спиннер, подгружается новая порция карточек, карточки отображаются корректно

  должен открываться:
      - do: перейти по ссылке https://yandex.ru/news/rubric/politics
      - assert: страница открылась
      - do: тапнуть по первой карточке в рубрике
      - assert: открылась страница сюжета

  архивный должен открываться:
      - do: перейти по ссылке https://yandex.ru/news/story/a--a84a4edbf9cae6a9cd7ea71b63883423
      - assert: открылась страница архивного сюжета

  архивный битый урл не должен пятисотить:
      - do: перейти по ссылке https://yandex.ru/news/story/a--1
      - assert: открылась страница с "Не удалось отобразить сюжет"

  архивный из поиска не должен пятисотить:
      - do: перейти по ссылке https://yandex.ru/news/yandsearch?cl4url=www.interfax.ru/sport/419977&lang=ru&lr=10747
      - assert: открылась страница с "Не удалось отобразить сюжет"

  архивный траурный не должен пятисотить:
      - do: перейти по ссылке https://yandex.ru/news/story/V_Karelii_nakanune_Dnya_vlyublennykh_muzhchina_napal_s_nozhom_na_druga_zastav_ego_u_sebya_doma--759e143203cc60ccb0bdcb0b865f9a26?flags=yxnews_nerpa_story__new-related-path%3D1;yxnews_new_format_for_related_stories%3D1&from=region&lang=ru&lr=18
      - assert: открылась страница с сюжетом

  несуществующий не должен пятисотить:
      - do: перейти по ссылке https://yandex.ru/news/story/aaaa-1
      - assert: открылась страница с "Не удалось отобразить сюжет"

  должен открываться под кукой адблока:
      - do: перейти по ссылке https://yandex.ru/news
      - assert: открылась страница рубрикаи Главное
      - do: установить куку "bltsr=1"
      - do: тапнуть по первой карточке в рубрике
      - assert: открылась страница сюжета

  только с аннотацией и точкой в ссыли открывается без пятисоток:
      - do: перейти на https://yandex.ru/news/story/Loki._Nachalo--95e8347dfff99f7c478f79aceaff3d00?lang=ru&t=1577177299&persistent_id=82973291
      - assert: произошел переход без ошибок

  только с аннотацией без медия открывается без пятисоток:
      - do: перейти на https://yandex.ru/news/story/Sevastopol_mogut_perevesti_na_pochasovuyu_podachu_vody--477f51f6e403c15e260efc3313256660?persistent_id=81518858
      - assert: произошел переход без ошибок

  404 не должен пятисотить:
      - do: перейти по ссылке https://yandex.ru/news/404
      - assert: открылась страница с "Не удалось отобразить сюжет"

specs:
  с фото:
    - do: открыть страницу 'https://yandex.ru/news/story/a--249fedd2c4a439c5726cf384ef1263e4'
    - screenshot: внешний вид соответствует скриншоту [picture]

  с видео:
    - do: открыть страницу 'https://yandex.ru/news/story/a--567d67d40798fc2d3e9f6bdc3961fbf1'
    - screenshot: внешний вид соответствует скриншоту [video]

  с блоком «С чего все начиналось»:
    - do: открыть страницу 'https://yandex.ru/news/story/a--c9d75b180ca14478f19d081d431593dc'
    - screenshot: внешний вид соответствует скриншоту [origin]

  с блоком «С чего все начиналось» со ссылкой на документ:
    - do: открыть страницу 'https://yandex.ru/news/story/a--f7be2f2f635fc13402f5a2cee157e126'
    - screenshot: внешний вид соответствует скриншоту [origin-with-doc]

  с заголовком и аннотацией:
    - do: открыть страницу 'https://yandex.ru/news/story/a--f86610ef744cd9405052ca213201ae38'
    - screenshot: внешний вид соответствует скриншоту [plain]

  с цитатой:
    - do: открыть страницу 'https://yandex.ru/news/story/u--5322174032117e7f5b8f52a7b2820a16'
    - screenshot: внешний вид соответствует скриншоту [quote]

  с новым медиа-блоком (фото и видео):
    - do: открыть страницу 'https://yandex.ru/news/story/a--77d38dcccca81e002706fea41199dd94'
    - screenshot: внешний вид соответствует скриншоту [plain]

  с новым медиа-блоком (больше 2-х фото):
    - do: открыть страницу 'https://yandex.ru/news/story/a--21187bb0963dbc66f9f4271498c45594'
    - do: навести мышкой на карусель с фото
    - screenshot: внешний вид соответствует скриншоту [plain]

  с новым медиа-блоком (2 фото):
    - do: открыть страницу 'https://yandex.ru/news/story/a--879deedfb7efee823cf4cf44139f44be'
    - screenshot: внешний вид соответствует скриншоту [plain]

  с новым медиа-блоком (1 фото):
    - do: открыть страницу 'https://yandex.ru/news/story/a--f88ae1aa0e782c981cd6f2bf38c3a0b4'
    - screenshot: внешний вид соответствует скриншоту [plain]

  с блоком "Официальный комментарий":
    - do: открыть страницу 'https://yandex.ru/news/story/a--3d3956cd8c550b4708096f79a4d380f6'
    - screenshot: внешний вид соответствует скриншоту [official]

  с "Официальными комментариями":
    - params:
        flags:
          - yxnews_official_statement_multiple_comments=1
          - yxnews_official_statement_inverted_sort_order=0
    - do: открыть страницу 'https://yandex.ru/news/story/o--3c5b053ec0a6b0fe298db61513f1320e?flags=yxnews_official_statement_multiple_comments=1;yxnews_official_statement_inverted_sort_order=0'
    - screenshot: внешний вид блока Официальных комментариев соответствует скриншоту [plain]

  с двумя "Официальными комментариями":
    - params:
        flags:
          - yxnews_official_statement_multiple_comments=1
          - yxnews_official_statement_inverted_sort_order=0
    - do: открыть страницу 'https://yandex.ru/news/story/o--29df6da38f3b5eaa28987eddef0fc988?flags=yxnews_official_statement_multiple_comments=1;yxnews_official_statement_inverted_sort_order=0'
    - screenshot: внешний вид блока Официальных комментариев соответствует скриншоту [plain]

  с "Официальными комментариями" в хвосте:
    - params:
        flags:
          - yxneo_news_story_official-in-tail=1
    - do: открыть страницу 'https://yandex.ru/news/story/a--60a98ca177e6b761eac073c4b80eb89e?flags=yxneo_news_story_official-in-tail=1'
    - screenshot: вид блока "Подробнее о событии" соответствует скриншоту [plain]

  имеет внешний вид:
    - params:
        flags:
          - yxneo_news_desktop_story_summarization=0
    - browsers:
        notFor:
          - win-ie11
    - tags:
      - smoke
      - backend_news
    - do: открыть выдачу сервиса на странице рубрики "Главное"
    - do: перейти в любой неспортивный сюжет кликом по заголовку в новостной карточке
    - assert: |
        в той же вкладке открылся сюжет,
        на странице сюжета отображается заголовок с источником над ним,
        присутствует суммаризация в сюжете, соответствующая заголовку,
        сюжет может содержать медиаблок с фото и/или видео,
        ниже находится блок "Подробнее о событии" с источниками и кнопкой "Показать еще", если источников больше трех
        далее расположен социальный блок с иконками "Оценить", иконкой "Поделиться" и настройкой-троеточием с выпадающим меню,
#        сюжет может содержать цитату
# тут NERPA-12283 флаг с новым дизайном цитаты, эта строка позже может пригодиться

  инициализирует рекламу на странице:
    - do: открыть страницу 'https://yandex.ru//news/story/a--60a98ca177e6b761eac073c4b80eb89e'
    - assert: рекламные блоки должны быть проинициализированы

  должен содержать ссылки на источник:
    - tags:
      - smoke
      - backend_news
    - do: открыть выдачу сервиса на странице рубрики "Главное" в авторизованном состоянии
    - do: перейти в любой неспортивный сюжет кликом по заголовку в новостной карточке
    - assert: |
        в той же вкладке открылся сюжет,
        на странице сюжета отображается заголовок с источником над ним,
        присутствует суммаризация в сюжете, соответствующая заголовку,
        сюжет может содержать медиаблок с фото и/или видео,
        ниже находится блок "Подробнее о событии" с источниками и кнопкой "Показать еще", если источников больше трех
        далее расположен социальный блок с иконками "Оценить", иконкой "Поделиться" и настройкой-троеточием с выпадающим меню,
#        сюжет может содержать цитату
# тут NERPA-12283 флаг с новым дизайном цитаты, эта строка позже может пригодиться
    - do: навести курсор на название источника над заголовком
    - assert: по ховеру курсор меняет стиль
    - do: кликнуть на название источника над заголовком
    - assert: |
        в новой вкладке открывается новость от источника,
        в урле прокинуты параметры utm_source=yxnews и utm_medium=desktop
    - do: вернуться на страницу сюжета Яндекс.Новости
    - do: навести курсор на заголовок сюжета
    - assert: по ховеру ссылка и курсор меняют стиль
    - do: кликнуть на заголовок сюжета
    - assert: |
        в новой вкладке открывается та же новость от источника,
        в урле прокинуты параметры utm_source=yxnews и utm_medium=desktop

  должен скроллиться к рекламе под сюжетом или ленте под сюжетом:
    - tags:
      - smoke
    - do: открыть выдачу сервиса на странице рубрики 'Главное'
    - do: перейти в любой неспортивный сюжет кликом по заголовку в новостной карточке
    - assert: в той же вкладке открылся сюжет
    - do: кликнуть на название источника над заголовком
    - assert: в новой вкладке открывается новость от источника
    - do: вернуться на страницу сюжета Яндекс.Новости
    - assert: |
          страница сюжета проскроллена к рекламе под сюжетом (или к ленте под сюжетом для трагичного сюжета),
          скрин - подскролл для нетрагичного сюжета https://jing.yandex-team.ru/files/nightsonne/2020-12-30_12-05-28.png ,
          рекламный блок не заезжает под рубрикатор,
          скрин - подскролл для трагичного сюжета https://jing.yandex-team.ru/files/nightsonne/2020-12-30_12-06-16.png
    - do: проскроллить вверх к началу сюжета
    - do: кликнуть на название источника в суммаризации (пункты под заголовком сюжета)
    - assert: в новой вкладке открывается новость от источника
    - do: вернуться на страницу сюжета Яндекс.Новости
    - assert: страница сюжета проскроллена к рекламе под сюжетом (или к ленте под сюжетом для трагичного сюжета)
    - do: проскроллить вверх к началу сюжета
    - do: кликнуть по ссылке 'Показать еще'
    - assert: разворачивается полный список источников
    - do: кликнуть по заголовку любого источника
    - assert: в новой вкладке открывается новость от источника
    - do: вернуться на страницу сюжета Яндекс.Новости
    - assert: страница сюжета проскроллена к рекламе под сюжетом (или к ленте под сюжетом для трагичного сюжета)

  может содержать блок Подробнее о событии:
    - tags:
      - smoke
      - backend_news
    - do: открыть выдачу сервиса на странице рубрики 'Главное' в авторизованном состоянии
    - do: перейти в любой неспортивный сюжет кликом по заголовку в новостной карточке
    - assert: |
        открылся сюжет в той же вкладке,
        в сюжете под аннотацией может присутствовать блок 'Подробнее о событии' с источниками по сюжету (если в данном сюжете нет блока 'Подробнее о событии', открыть другой сюжет),
        источники содержат логотип издательства,
        рядом с заголовком источника может быть иконка турбо,
        рядом с заголовком источника расположено название издательства, время и/или дата публикации, которые переносятся на другую строку, если не помещаются в одну строку с заголовком,
    - do: навести курсор на любой заголовок в списке 'Подробнее о событии'
    - assert: курсор и текст меняет стиль по ховеру
    - do: кликнуть по любому источнику в списке
    - assert: |
        в новой вкладке открывается новость от источника,
        в урле прокинуты параметры utm_source=yxnews и utm_medium=desktop

  может содержать кнопку Показать еще:
    - tags:
      - smoke
      - backend_news
    - do: открыть выдачу сервиса на странице рубрики "Главное"
    - do: перейти в любой неспортивный сюжет из топ—5 кликом по заголовку в новостной карточке
    - assert: |
        открылся сюжет в той же вкладке,
        в сюжете под аннотацией может присутствовать блок "Подробнее о событии" с источниками по сюжету (если в данном сюжете нет блока "Подробнее о событии", открыть другой сюжет),
        в блоке "Подробнее о событии" отображены от 2 до 4 источников, остальные скрыты за кнопкой "Показать еще"
        внешний вид https://jing.yandex-team.ru/files/an-smirn0v/shot_201112_162153.png
    - do: навести курсор на кнопку "Показать еще"
    - assert: курсор и кнопка меняет стиль по ховеру
    - do: кликнуть по кнопке "Показать еще"
    - assert: |
        кнопка пропадает,
        в блоке "Подробнее о событии" появляются другие источники,
        под списком источником есть ссылка "Показать все источники"

  может содержать иконку турбо-страницы в блоке Подробнее о событии [manual]:
    - tags:
      - backend_news
    - Case Type: CH
    - reasonNotToAuto:
      - Данный кейс включает ХП
    - do: открыть выдачу сервиса на странице рубрики "Главное"
    - do: тапнуть по любому неспортивному сюжету из топ-5
    - assert: |
        открылся сюжет в той же вкладке,
        в сюжете есть блок "Подробннее о событии" с источникамим,
        рядом с источником присутствует иконка турбо-страницы в виде ракеты,
        пример внешнего вида - https://jing.yandex-team.ru/files/vasekerka/2022-03-11_18-17-35.png

  может содержать ссылку на все источники по сюжету:
    - tags:
      - smoke
      - backend_news
    - do: открыть выдачу сервиса на странице рубрики 'Главное'
    - do: разлогиниться на сервисе
    - do: перейти в любой неспортивный сюжет из топ-5 кликом по заголовку в новостной карточке
    - assert: |
        открылся сюжет в той же вкладке,
        в сюжете под аннотацией может присутствовать блок 'Подробнее о событии' с источниками по сюжету (если в данном сюжете нет блока 'Подробнее о событии', открыть другой сюжет),
        в блоке 'Подробнее о событии' отображены три источника, остальные скрыты за кнопкой 'Показать еще'
    - do: навести курсор на 'Подробнее о событии'
    - assert: стиль курсора меняется
    - do: кликнуть по заголовку 'Подробнее о событии'
    - assert: в той же вкладке осуществляется переход на страницу со всеми источниками по сюжету
    - do: вернуться к сюжету с помощью браузерной кнопки 'Назад'
    - do: кликнуть по кнопке 'Показать еще'
    - assert: |
        кнопка пропадает,
        в блоке 'Подробнее о событии' появляются другие источники,
        под списком источником есть ссылка 'Показать все источники'
    - do: навести курсор на 'Показать все источники'
    - assert: курсор и текст меняет стиль по ховеру
    - do: кликнуть на 'Показать все источники'
    - assert: в той же вкладке осуществляется переход на страницу со всеми источниками по сюжету

  #убрали блок вот тут - NEWREL-2394
  может содержать блок "С чего все началось" с официальным источником:
    - do: чтобы быстро найти сюжет, который содержит блок 'С чего все началось' с заголовком и иконкой издательства, нужно поискать его на таче по шагам ниже
    - do: после перехода на тестовый стенд открыть DevTools и включить эмуляцию тача (общая инструкция тут https://wiki.yandex-team.ru/eva/testing/tech/DevTools/#kakperekljuchitotobrazheniesajjtavmobilnyjjvid)
    - do: обновить страницу
    - assert: отображается мобильная версия сервиса Яндекс Новости на странице рубрики 'Главное'
    - do: перейти в любой сюжет тапом по заголовку карточки
    - assert: открывается сюжет
    - do: скроллить ленту сюжетов, пока не попадется сюжет с блоком  'С чего все началось' с официальным источником
    - assert: |
        отображается  сюжет с блоком 'С чего все началось' с официальным источником,
        скрин https://jing.yandex-team.ru/files/nightsonne/2020-08-27_18-41-20.png
    - do: убедиться, что сюжет расположен на экране так, что урл совпадает с заголовком сюжета
    - assert: скрин https://jing.yandex-team.ru/files/nightsonne/2020-08-27_18-44-56.png
    - do: выключить эмуляцию тача, закрыть консоль и обновить страницу
    - assert: открыт тот же сюжет, что и на таче, но в десктопной версии (может измениться заголовок на похожий заголовок и источник)
    - do: поскроллить до блока 'С чего все началось'
    - assert: |
        отображается  сюжет с блоком 'С чего все началось' с официальным источником,
        блок 'С чего все началось' располагается над блоком 'Подробнее о событии',
        блок может содержать иконку издания, заголовок, аннотацию, название источника, время публикации,
        внешний вид с иконкой издания - https://jing.yandex-team.ru/files/nightsonne/2020-08-27_18-49-56.png ,
        внешний вид без иконки издания - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-23_16-21-25.png
    - do: навести курсор на любой элемент блока под его названием 'С чего все началось'
    - assert: меняется стиль курсора, заголовок новости по ховеру на блок меняет шрифт на красный - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-08_14-12-03.png
    - do: кликнуть на любой элемент блока
    - assert: |
        в новой вкладке открывается новость от источника,
        в урле прокинуты параметры utm_source=yxnews и utm_medium=desktop
    - do: вернуться на вкладку с сюжетом Яндекс.Новости
    - assert: сюжет проскроллен к рекламе под сюжетом (для трагичных - к ленте)

#убрали блок вот тут - NEWREL-2394
  может содержать блок "С чего все началось" с неофициальным источником:
#    - do: чтобы быстро найти сюжет, который содержит блок 'С чего все началось' без заголовка и иконки издательства, нужно поискать его на таче по шагам ниже
#    - do: после перехода на тестовый стенд открыть DevTools и включить эмуляцию тача (общая инструкция тут https://wiki.yandex-team.ru/eva/testing/tech/DevTools/#kakperekljuchitotobrazheniesajjtavmobilnyjjvid)
#    - do: обновить страницу
#    - assert: отображается мобильная версия сервиса Яндекс Новости на странице рубрики 'Главное'
#    - do: перейти в любой сюжет тапом по заголовку карточки
#    - assert: открывается сюжет
#    - do: скроллить ленту сюжетов, пока не попадется сюжет с блоком 'С чего все началось' с неофициальным источником
#    - assert: |
#        отображается  сюжет с блоком "С чего все началось" с неофициальным источником - без заголовка и иконки издательства,
#        скрин https://jing.yandex-team.ru/files/nightsonne/2020-08-27_18-56-27.png
#    - do: убедиться, что сюжет расположен на экране так, что урл совпадает с заголовком сюжета
#    - assert: скрин https://jing.yandex-team.ru/files/nightsonne/2020-08-27_18-57-04.png
#    - do: выключить эмуляцию тача, закрыть консоль и обновить страницу
#    - assert: открыт тот же сюжет, что и на таче, но в десктопной версии (может измениться заголовок на похожий заголовок и источник)
    - do: открыть сюжет https://yandex.ru/news/story/m--da25b73c2908d6c7f5b99334cbce853e с блоком "С чего все началось" с неофициальным источником
    - do: поскроллить до блока "С чего все началось"
    - assert: |
        отображается  сюжет с блоком "С чего все началось" с неофициальным источником,
        блок "С чего все началось" располагается над блоком "Подробнее о событии",
        блок содержит аннотацию и в тексте ссылку на неофициальный источник (может отображаться логотип),
        название ссылающегося источника, время публикации,
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-10-14_19-49-27.png
    - do: навести курсор на название неофициального источника в тексте аннотации
    - assert: меняется стиль курсора, название источника поменяет шрифт на красный
    - do: кликнуть на название неофициального источника в тексте аннотации
    - assert: |
        в новой вкладке открывается новость на сайте неофициального источника,
        в урле прокинуты параметры utm_source=yxnews и utm_medium=desktop
    - do: вернуться на вкладку с сюжетом Яндекс.Новости
    - assert: сюжет проскроллен к рекламе под сюжетом (для трагичных - к ленте)
    - do: кликнуть по названию источника с отображенным временем публикации
    - assert: |
        в новой вкладке открывается новость от источника,
        в урле прокинуты параметры utm_source=yxnews и utm_medium=desktop,
    - do: вернуться на вкладку с сюжетом Яндекс.Новости
    - assert: сюжет проскроллен к рекламе под сюжетом (для трагичных - к ленте)

  может содержать:
# тут NERPA-12283 флаг с новым дизайном цитаты, этот кейс может позже пригодиться
#    цитату:
#      - tags:
#        - backend_news
#      - do: открыть любую рубрику, где могут встречаться карточки с цитатой - 'Экономика', 'Политика'
#      - do: найти карточку с цитатой и перейти в сюжет кликом по заголовку карточки (если карточек с цитатой нет в обеих рубриках - пропустить кейс)
#      - assert: |
#          сюжет содержит цитату - серый фон, скругленные углы,
#          под социальным блоком отображается фио автора(после фио может отображаться деятельность автора цитаты) и цитата на сером фоне,
#          рядом с блоком цитаты присутствует аватарка автора,
#          после текста цитаты есть источник цитаты,
#          внешний вид - https://jing.yandex-team.ru/files/nightsonne/2021-09-16_22-04-33.png
#      - do: навести курсор на имя атора цитаты
#      - assert: стиль курсора и текста меняется
#      - do: кликнуть по имени автора цитаты
#      - assert: в отдельной вкладке открылась страница с поисковой выдачей по запросу имени автора цитаты

    медиаблок с видео и фото, который:
#     в нетраурном сюжете содержит настройку 'Автовоспроизведение' [manual]:
#       - tags:
#         - smoke
#         - backend_news
#         - player
#       - browsers:
#           notFor:
#             - win-ie11
#       - do: открыть выдачу сервиса на странице рубрики 'Главное'
#       - do: перейти в любой нетраурный сюжет кликом по заголовку в новостной карточке
#       - assert: |
#           сюжет содержит медиаблок с видео и фото (если в сюжете нет медиаблока с видео, открыть другой сюжет),
#           по умолчанию активен медиаблок с видео, видео воспроизводится автоматически, без звука,
#           слева от основного видео есть карусель с иконками источников где есть видео подобного сюжета, над основным видео есть 'Видео', 'Фото', 'Интересное видео',
#           справа в углу есть переключатель "Автовоспроизведение"
#           внешний вид - https://jing.yandex-team.ru/files/nightsonne/2020-12-30_12-13-50.png
#       - do: включить звук у видео
#       - assert: видео вопроизводится со звуком
#       - do: кликнуть на переключатель "Автовоспроизведение"
#       - do: обновить страницу
#       - assert: обновляется страница сюжета, видео не воспроизводится автоматически
#       - do: кликнуть по кнопке Плей посередине видео
#       - assert: видео воспроизводится, со звуком
#       - do: кликнуть на переключатель "Автовоспроизведение", включить автовспроизведение видео
#       - do: обновить страницу
#       - assert: видео воспроизводится автоматически, без звука

      в нетраурном сюжете содержит карусель с рекомендованными видео [manual]:
        - tags:
          - smoke
          - backend_news
          - smoke_zen
        - browsers:
            notFor:
              - win-ie11
        - reasonNotToAuto:
          - Требуется ручная проверка медиаблока
        - do: открыть выдачу сервиса на странице рубрики "Главное"
        - do: перейти в любой нетраурный сюжет кликом по заголовку в новостной карточке
        - assert: |
            сюжет содержит медиаблок с видео и фото (если в сюжете нет медиаблока с видео, открыть другой сюжет),
            по умолчанию на первом место отображаются видео (изображения с кнопкой плей посредине), видео не воспроизводится автоматически,
            слева внизу отображается источник видео,
            внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-01_13-25-25.png
            ВНИМАНИЕ! В IE11 вместо видео заглушка (видео не воспроизводится) - это НЕ баг, заводить баг не нужно!
        - do: проскролить карусель вправо до конца
        - assert: |
            карусель скролится корректно, без рывков,
            изображения подгружаются для каждого видео/фото,
            видео отобажаются с кнопкой плей, фото - без кнопки плей,
            в конце карусели отображается блок "Интересное в СМИ",
            ОБРАТИТЕ ВНИМАНИЕ! Не во всех региональных сюжетах может появляться блок "Интересное в СМИ",
            если блока нет - посмотрите другие сюжеты либо откройте сюжет в крупном регионе, например, МСК или СПб,
            внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-01_13-25-49.png
        - do: нажать на блок "Интересное в СМИ"
        - assert: |
            открылся просмотрщик и заставка "Интересное в СМИ" воспроизвелась автоматически,
            затем открылось видео, видео воспроизводится без звука, сначала (видео может воспроизводится автоматически или нет, зависит от вашего предыдущего взаимодействия с плеером. Оба эти варианты (автоматически и нет - ок)),
            внешний вид https://jing.yandex-team.ru/files/kossakovskaya/2021-07-01_13-28-26.png

      в нетраурном сюжете переключает видео из карусели:
        - tags:
          - smoke
          - backend_news
        - browsers:
            notFor:
              - win-ie11
        - do: открыть выдачу сервиса на странице рубрики 'Главное'
        - do: перейти в любой нетраурный сюжет кликом по заголовку в новостной карточке
        - assert: |
            сюжет содержит медиаблок с видео и фото (если в сюжете нет медиаблока с видео, открыть другой сюжет),
            по умолчанию на первом место отображаются видео (изображения с кнопкой плей посредине), видео не воспроизводится автоматически,
            слева внизу отображается источник видео,
            внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-01_13-25-25.png
        - do: навести курсор на вторую карточку в карусели
        - assert: |
            по ховеру курсор меняет стиль,
            если вторая карточка это превью видео, то по ховеру также увеличивается кнопка плей. Если ховер убрать - кнопка плей уменьшается обратно
        - do: кликнуть по второй карточке в карусели
        - assert: |
            открывается просмотрщик с выбранным видео,
            видео воспроизводится автоматически,
            видео содержит наименование, источник, кнопку Плей, длительность и контроллы плеера,
            внещний вид - https://jing.yandex-team.ru/files/kossakovskaya/Screen%20Shot%202021-08-31%20at%2020.37.51.png

# хотела убрать [manual], так как кейс выглядит избыточным - кажется, нет смысла проверять эту функциональность раздельно для трауного и нетраурного сюжета, но это нужно делать в отдельной задаче - придется переписывать гермиону под новый медиаблок
      в нетраурном сюжете сохраняет позицию видео при переключении на фото [manual]:
        - tags:
          - smoke
          - smoke_zen
        - browsers:
            notFor:
              - win-ie11
        - do: открыть выдачу сервиса на странице рубрики 'Главное'
        - do: перейти в любой нетраурный сюжет кликом по заголовку в новостной карточке
        - assert: |
            сюжет содержит медиаблок с видео и фото (если в сюжете нет медиаблока с видео, открыть другой сюжет),
            по умолчанию на первом место отображаются видео (изображения с кнопкой плей посредине), видео не воспроизводится автоматически,
            слева внизу отображается источник видео,
            внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-01_13-25-25.png
        - do: нажать на кнопку плей на последнем видео в карусели (последнее - значит, что следующим медиа-файлом, который идет справа от видео, идет фото (картинка без кнопки плей посредине))
        - assert: |
            ВНИМАНИЕ! В IE11 вместо видео заглушка (видео не воспроизводится) - это НЕ баг, заводить баг не нужно!
            открылся просмотрщик,
            видео воспроизводится сначала, без звука
        - do: включить звук у видео
        - assert: видео воcпроизводится со звуком
        - do: навести курсор на стрелочку справа от видео
        - assert: по ховеру курсор меняет стиль и стрелочка слегка сдвигается вправо
        - do: кликнуть на стрелочку
        - assert: |
            открывается фото,
            на фото карточке отображается источник слева вверху,
            фото соответствует тематике сюжета,
            звук видео прекращается
        - do: закрыть просмотрщик кликом на крестик
        - assert: отображается открытый ранее сюжет
        - do: поскроллить медиа-карусель и открыть другие фото
        - assert: по клику на фото открывается соответствующее тематике сюжета фото
        - do: закрыть просмотрщик и открыть видео, которое открывали ранее
        - assert: |
            открывается просмотщик с выбранным видео,
            видео воспроизводится со звуком, сначала

      в нетраурном сюжете содержит рекламу в видео [manual]:
        - tags:
          - advert
          - smoke_zen
        - browsers:
            notFor:
              - win-ie11
        - reasonNotToAuto:
          - Требуется ручная проверка рекламы в медиаблоке
        - do: открыть выдачу сервиса на странице рубрики 'Главное'
        - do: перейти в любой нетраурный сюжет кликом по заголовку в новостной карточке
        - assert: |
            сюжет содержит медиаблок с видео и фото (если в сюжете нет медиаблока с видео, открыть другой сюжет),
            по умолчанию на первом место отображаются видео (изображения с кнопкой плей посредине), видео не воспроизводится автоматически,
            слева внизу отображается источник видео,
            внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-01_13-25-25.png
        - do: нажать на иконку плей на любом видео, продолжительностью >40 сек
        - assert: |
            ВНИМАНИЕ! В IE11 вместо видео заглушка (видео не воспроизводится) - это НЕ баг, заводить баг не нужно!
            открылся просмотрщик,
            видео воспроизводится без звука, сначала (видео может воспроизводится автоматически или нет, зависит от вашего предыдущего взаимодействия с плеером. Оба эти варианты (автоматически и нет - ок)),
            если видео не воспроизвелось автоматически - нажмите на кнопку плей, чтобы оно начало воспроизведение
        - do: подождать 30 секунд видео (если видео длительностью < 40сек, переключиться на другое видео сюжета или перейти в другой нетраурный сюжет)
        - do: надо именно подождать, перемотка не сработает
        - assert: на 30ой секунде видео прерывается рекламой
        - do: дождаться окончания рекламы или тапнуть Пропустить
        - assert: видео продолжает воспроизведение с места, на котором прервалось рекламой

      позволяет управлять громкостью [manual]:
        - browsers:
            notFor:
              - win-ie11
        - reasonNotToAuto:
          - Требуется ручная проверка элементов плеера
        - do: перейти в любой нетраурный сюжет с видео
        - assert: |
            сюжет содержит медиаблок с видео и фото,
            видео не воспроизводится автоматически,
            видео отображается с кнопкой плей по центру изображения, а фото - без этой кнопки,
            в левом нижнем углу отображается наименование источника,
            внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-03_17-37-31.png
        - do: нажать на кнопку плей на любом видео
        - assert: |
            открылся просмотрщик видео,
            у видео снизу отображаются контролсы, их внешний вид - https://jing.yandex-team.ru/files/volkhonov/video-controls.png,
            Обратите внимание! Иконки "Отправить на устройство" может не быть - https://jing.yandex-team.ru/files/kossakovskaya/2022-06-22_06-20-41.png, это ок. Если иконки нет - проверьте еще 2-3 других видео, если на них тоже нет иконки - только тогда заводите баг
        - do: запустить видео кликом по кнопке play и кликнуть по иконке звука на панели контроллсов
        - assert: если звук был выключен - он включился, звук видео слышно (если был включен - соответственно наоборот - выключился)
        - do: увеличить-уменьшить громкость звука
        - assert: громкость звука соответственно увеличивается или уменьшается, видео продолжает проигрываться

    медиаблок с видео , который:
#     в нетраурном сюжете после 2-ух видео переключается на "Интересное видео" [manual]:
#       - tags:
#         - smoke
#         - backend_news
#         - player
#       - browsers:
#           notFor:
#             - win-ie11
#       - do: открыть выдачу сервиса на странице рубрики 'Главное'
#       - do: перейти в любой нетраурный сюжет кликом по заголовку в новостной карточке
#       - assert: |
#           сюжет содержит медиаблок с видео и фото (если в сюжете нет медиаблока с видео, открыть другой сюжет),
#           по умолчанию активен медиаблок с видео, видео воспроизводится автоматически, без звука,
#           слева от основного видео есть карусель с иконками источников где есть видео подобного сюжета, над основным видео есть 'Видео', 'Фото', 'Интересное видео',
#           справа в углу есть переключатель "Автовспроизведение"
#           внешний вид - https://jing.yandex-team.ru/files/nightsonne/2020-12-30_12-13-50.png
#       - do: кликнуть на переключатель "Автовоспроизведение"
#       - do: обновить страницу
#       - assert: обновляется страница сюжета, видео не воспроизводится автоматически
#       - do: кликнуть на переключатель "Автовоспроизведение"
#       - do: обновить страницу
#       - assert: обновляется страница сюжета, видео воспроизводится автоматически
#       - do: досмотреть видео до конца
#       - assert: автоматически происходит переключение на второе видео в карусели (если видео только одно в карусели, то происходит переключение в "Интересное видео")
#       - do: досмотреть видео до конца
#       - assert: автоматически происходит переключение на вкладку "Интересное видео", самое первое видео в карусели воспроизводится автоматически, кнопка "Интересное видео" выделена белым

# закомментировала пока кейс, так как на данный момент он не несет в себе никакого смысла, на мой взгляд - настройки автовоспроизведения нет, но при этом видео воспроизводится автоматически при открытии просмотрщика. поэтому не вижу смысл проверять отсутствие этой настройки
#     в траурном сюжете не содержит настройку 'Автовоспроизведение'[manual]:
#        - tags:
#          - smoke
#          - backend_news
#        - browsers:
#            notFor:
#              - win-ie11
#        - do: открыть выдачу сервиса на странице рубрики 'Происшествия'
#        - do: перейти в любой траурный сюжет кликом по заголовку в новостной карточке (траурный сюжет это тот сюжеты который не имеет рекламу в правом блоке)
#        - assert: |
#            сюжет содержит медиаблок с видео и фото (если в сюжете нет медиаблока с видео, открыть другой траурный сюжет),
#            видео не воспроизводится автоматически,
#            видео отображается с кнопкой плей по центру изображения, а фото - без этой кнопки,
#            в левом нижнем углу отображается наименование источника,
#            внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-03_17-37-31.png
#        - do: прокликать карусель с видео и фото
#        - assert: все видео и фото относятся к сюжету

      в сюжете сохраняет позицию видео при повторном открытии видео [manual]:
        - browsers:
            notFor:
              - win-ie11
        - do: открыть выдачу сервиса на странице любой рубрики, кроме 'Спорт'
        - do: перейти в любой сюжет кликом по заголовку в новостной карточке
        - assert: |
            сюжет содержит медиаблок с видео и фото (если в сюжете нет медиаблока с видео, открыть другой сюжет),
            видео отображается с кнопкой плей по центру изображения, а фото - без этой кнопки,
            в левом нижнем углу отображается наименование источника,
            внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-03_17-37-31.png
        - do: кликнуть по иконке Плей на любом видео в медиаблоке
        - assert: |
            открывается просмотрщик,
            видео воспроизводится без звука
        - do: навести курсор на стрелку справа от видео
        - assert: по ховеру курсор меняет стиль и стрелка сдвигается немного вправо
        - do: кликнуть на стрелку
        - assert: |
            включается следующий медиафайл (видео или фото, зависит от того, что было следующим по порядку в карусели медиа в сюжета),
            если это видео - оно воспроизводится без звука, если фото - отображается статичная картинка, которая относится к теме сюжета
        - do: покликать стрелки карусели вперед-назад
        - assert: |
            включается следующий медиафайл (видео или фото, зависит от того, что было следующим по порядку в карусели медиа в сюжета),
            если это видео - оно воспроизводится без звука, если фото - отображается статичная картинка, которая относится к теме сюжета,
            все медиа-файлы отображаются корректно
        - do: пролистать карусель до видео в любую сторону и включить звук в видео
        - do: закрыть просмотрщик кликом по крестику
        - assert: |
            просмотрщик закрывается, отображается сюжет,
            звук из видео не проигрывается
        - do: кликнуть на иконку плей в видео, которое проигрывалось последним в просмотрщике (видео из предыдущего шага)
        - assert: |
            открылся просмотрщик,
            видео воспроизводится с момента, на котором остановили воспроизведение при закрытии просмотрщика,
            видео воспроизводится со звуком

      в траурном сюжете не содержит рекламу в видео [manual]:
        - tags:
          - advert
          - smoke_zen
        - browsers:
            notFor:
              - win-ie11
        - reasonNotToAuto:
          - Требуется ручная проверка рекламы в медиаблоке
        - do: открыть выдачу сервиса на странице рубрики 'Происшествия'
        - do: перейти в траурный сюжет кликом по заголовку в новостной карточке (траурный сюжет это тот сюжеты который не имеет рекламу в правом блоке)
        - assert: |
            сюжет содержит медиаблок с видео и фото (если в сюжете нет медиаблока с видео, открыть другой траурный сюжет),
            видео не воспроизводится автоматически,
            видео отображается с кнопкой плей по центру изображения, а фото - без этой кнопки,
            в левом нижнем углу отображается наименование источника,
            внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-03_17-37-31.png
        - do: кликнуть по иконке Плей на видео в медиаблоке, видео должно быть длительностью >40сек (если видео длительностью < 40сек, включить другое видео сюжета или перейти в другой траурный сюжет)
        - assert: |
            видео воспроизводится со звуком,
            ВНИМАНИЕ! В IE11 вместо видео заглушка (видео не воспроизводится) - это НЕ баг, заводить баг не нужно!
        - do: подождать 30 секунд видео (надо именно подождать, перемотка не сработает)
        - assert: на 30ой секунде видео НЕ прерывается рекламой

    медиаблок с фото:
      - tags:
        - smoke
      - browsers:
            notFor:
              - win-ie11
      - do: открыть выдачу сервиса на странице рубрики 'Главное'
      - do: перейти в любой нетраурный сюжет кликом по заголовку в новостной карточке
      - assert: |
          сюжет содержит медиаблок с видео и фото или только с фото (если медиаблока нет, открыть другой сюжет),
          внешний вид с видео  - https://jing.yandex-team.ru/files/nightsonne/2020-12-30_12-21-02.png ,
          внешний вид с фото - https://jing.yandex-team.ru/files/an-smirn0v/shot_210113_150856.png
      - do: (для сюжета с фото и видео) кликнуть по иконке фото над каруселью видео для переключения на блок с фото
      - assert: |
            в основном медиаблоке отображено первое фото с источником,
            первое превью фото в карусели имеет серую обводку,
            все превью содержат источник на черном фоне
      - do: навести курсор на превью фото в карусели
      - assert: |
            в основном блоке медиаблока появляется стрелка вправо на сером фоне,
            внешний вид с ховером https://jing.yandex-team.ru/files/nightsonne/2020-12-30_12-24-54.png
      - do: прокликать карусель
      - assert: |
            карусель прокликивается (элементы в разных браузерах могут выглядеть по-разному)
      - do: навести курсор мыши на правую часть (область кликабельности примерно 70% от фото) фото в основном блоке
      - assert: в основном блоке медиаблока по ховеру затемняется стрелка вправо
      - do: покликать по фото в карусели
      - assert: фото в основном блоке переключаются
      - do: полистать фото, покликав на правую (70%) и левую(30%) части фото или с помощью стрелок вправо-влево
      - assert: |
            фото в основном блоке переключаются, превью фото в карусели скроллятся,
            область кликабельности стрелок - половина фото (правая или левая),
            на первом фото нет стрелки 'Влево', на последнем - стрелки 'Вправо'

  архивный отображается корректно:
    - tags:
      - smoke
      - backend_news
    - do: открыть архивный сюжет (например, https://yandex.ru/news/story/a--a84a4edbf9cae6a9cd7ea71b63883423 )
    - assert: |
        сюжет отображается корректно,
        присутствуют заголовок, аннотация сюжета и ссылка В источнике
        над заголовком присутствует источник,
        фото в архивном сюжете не содержат ссылки на источник,
        присутствует иконка поделения и три точки с выпадающим меню,
        источники в блоке 'Подробнее о событии' сожержат не только время публикации, но и дату,
        внешний вид - https://jing.yandex-team.ru/files/nightsonne/2020-12-30_12-27-01.png,
        Обратите внимание! - в блоке подробнее о событии может быть 3-4 источника


  архивный содержит ссылку на источник в аннотации:
    - tags:
      - smoke
      - backend_news
      - smoke_zen
    - do: открыть архивный сюжет (например, https://yandex.ru/news/story/a--a84a4edbf9cae6a9cd7ea71b63883423 )
    - do: перейти по ссылке 'В источнике'
    - assert: |
        в новой вкладке открывается новость от источника
        в урле присутствуют параметры utm_source=yxnews, utm_medium=desktop,
        Обратите внимание! При переходе по некоторым источникам в адресной строке utm-меток может не быть, т.к. источник может их скрыть. В таком случае проверяем наличие utm-меток в девтулзах, для этого выполните следующие шаги
    - do: кликаем правой кнопкой мыши на нужную нам ссылку и в выпадающем меню выбираем "Исследовать элемент" (в разных браузерах может называть по разному) - https://jing.yandex-team.ru/files/vasekerka/2022-01-27_12-41-47.png
    - assert: в открытой панельке девтулзов открывается вкладка Elements, в которой выделена нужная ссылка - https://jing.yandex-team.ru/files/vasekerka/2022-01-27_12-43-43.png

  архивный содержит ссылку на источник в блоке Подробнее о событии:
    - tags:
      - smoke
      - backend_news
    - do: открыть архивный сюжет (например, https://yandex.ru/news/story/a--a84a4edbf9cae6a9cd7ea71b63883423 )
    - do: кликнуть по любому источнику из блока Подробнее о событии
    - assert: |
        в новой вкладке открывается новость от источника
        в урле присутствуют параметры utm_source=yxnews, utm_medium=desktopОбратите внимание! При переходе по некоторым источникам в адресной строке utm-меток может не быть, т.к. источник может их скрыть. В таком случае проверяем наличие utm-меток в девтулзах, для этого выполните следующие шаги
    - do: кликаем правой кнопкой мыши на нужную нам ссылку и в выпадающем меню выбираем "Исследовать элемент" (в разных браузерах может называть по разному) - https://jing.yandex-team.ru/files/vasekerka/2022-01-27_12-41-47.png
    - assert: в открытой панельке девтулзов открывается вкладка Elements, в которой выделена нужная ссылка - https://jing.yandex-team.ru/files/vasekerka/2022-01-27_12-43-43.png

  архивный позволяет настроить избранное:
    - tags:
      - smoke
      - backend_news
    - do: открыть архивный сюжет (например, https://yandex.ru/news/story/a--a84a4edbf9cae6a9cd7ea71b63883423 )
    - do: кликнуть по трем точкам
    - assert: появляется поп-ап с пунктом Настроить источники
    - do: для незалогина - авторизоваться, потапать по звездочкам добавления в избранное, обновить страницу
    - assert: |
        звездочка добавленного в избранное источника становится желтой,
        после обновления страницы добавленные в избранное источники перемещаются в верх списка источников

  архивный подгружает ленту новостей:
    - tags:
      - smoke
      - backend_news
      - smoke_zen
    - do: открыть архивный сюжет (например, https://yandex.ru/news/story/a--a84a4edbf9cae6a9cd7ea71b63883423 )
    - do: проскроллить сюжет ниже блока 'Подробнее о событии'
    - assert: под сюжетом присутствует лента новостей
    - do: прокроллить ленту ниже
    - assert: при скролле появляется спиннер, подгружается новая порция карточек, карточки отображаются корректно

  cодержит иконку поделения:
    - tags:
      - smoke
    - do: перейти в любой сюжет
    - assert: |
        иконка поделения располагается внизу сюжета,
        кнопка не наезжает на другие элементы социального блока
    - do: навести курсор мыши на иконку поделения
    - assert: по ховеру меняется стиль курсора
    - do: кликнуть по кнопке Поделиться
    - assert: |
        появляется меню со списком сервисов, в которых можно поделиться сюжетом,
        скрин https://jing.yandex-team.ru/files/an-smirn0v/shot_201229_154620.png,
        выпадающее меню при скролле скрывается под шапкой и рубрикатором (то есть не наезжает поверх рубрикатора)

  cодержит иконку, позволяющую поделиться новостью:
    - tags:
      - smoke
    - do: перейти в любой сюжет
    - do: кликнуть по кнопке Поделиться внизу сюжета рядом с эмоджи
    - do: поделиться новостью на любом сервисе из списка (может потребоваться авторизоваться на сервисе)
    - assert: на внешнем сервисе отобразится новая запись с ссылкой на сюжет сервиса Яндекс.Новости
    - do: на внешнем сервисе кликнуть по ссылке на сюжет сервиса Яндекс.Новости
    - assert: открывается сюжет Яндекс.Новостей

  должен содержать персональную ленту новостей [manual]:
    - reasonNotToAuto:
      - Необходима ручная проверка персонализации
    - tags:
      - personal_feed
      - smoke
      - backend_news
      - smoke_zen
    - do:
          залогиниться на сервисе под пользователем Александр Овечкин (логин и пароль взять со страницы-инструкции на вики - https://wiki.yandex-team.ru/eva/testing/projects/nerpa/#loginyiparolidljatestovyxpolzovatelejj)
          если возникла проблема с авторизацией - залогиниться под любым другим пользователем из таблицы - Ольга Бузова или Стив Джобс
    - do: открыть любой сюжет
    - do: проскроллить ленту новостей ниже первого сюжета
    - assert:
          если вы залогинены под пользователем Александр Овечкин - в ленте большинство сюжетов - спортивные сюжеты (могут встречаться сюжеты и другой тематики, но в меньшинстве)
          если вы залогинены под пользователем Ольга Бузова - в ленте большинство сюжетов про шоу-бизнес (могут встречаться сюжеты и другой тематики, но в меньшинстве)
          если вы залогинены под пользователем Стив Джобс - в ленте большинство сюжетов про технологии (могут встречаться сюжеты и другой тематики, но в меньшинстве)
    - do: ОБЯЗАТЕЛЬНО выйти из тестового аккаунта

  позволяет пользователю авторизоваться с помощью избранного:
    - tags:
        - backend_news
    - do: зайти на сервис без залогина
    - do: перейти в любой сюжет
    - do: доскроллить до блока 'Подробнее о событии' и ниже самого блока кликнуть на кнопку 'Троеточие' (внешний вид кнопки - https://jing.yandex-team.ru/files/kossakovskaya/2021-09-22_16-46-48.png)
    - do: выбрать 'Настроить источники'
    - assert: |
        отображается кнопка 'Войти', на фоне кнопки отбражается некликабельный список источников,
        внешний вид - https://jing.yandex-team.ru/files/an-smirn0v/shot_210413_180844.png
    - do: нажать на кнопку 'Войти'
    - assert: открылась страница паспорта с предложением авторизации
    - do: авторизоваться на сервисе
    - assert: произошел возврат к сюжету, открыто окно 'Настройка источников', кнопки у источников для добавления в избранные и нежелательные становяться каликабельными

  содержит рекламу:
    без блокировщика рекламы [manual]:
      - tags:
        - smoke
        - advertisement
      - reasonNotToAuto:
        - Необходима ручная проверка ховеров по элементам рекламы, загрузки рекламных блоков
      - do: открыть выдачу сервиса на странице рубрики 'Главное'
      - do: перейти в любой нетраурный сюжет кликом по заголовку в новостной карточке
      - do: отключить блокировщик рекламы и обновить страницу
      - assert: |
            на странице сюжета блок рекламы отображается справа в 4й колонке при ширине окна браузера больше 1250px (большая карточка сюжета считается за 2 колонки),
            на странице сюжета блок рекламы отображается справа в 3й колонке при ширине окна браузера меньше 1250px
      - do: начать скроллить страницу вниз
      - assert: реклама залипает и скроллится вниз за страницей
      - do: проскроллить страницу ниже блока 'Подробнее о событии'
      - assert: |
            под сюжетом есть реклама,
            скрин https://jing.yandex-team.ru/files/nightsonne/2020-12-30_12-35-54.png
      - do: навести курсор мыши на рекламную карточку под сюжетом
      - assert: изменяется стиль отображения курсора и тайтла у рекламы
      - do: проскроллить страницу вниз
      - assert: |
            новостные карточки рубрики перемежаются рекламными карточками,
            рекламные карточки располагаются после 4 новостных карточек,
            все рекламные карточки содержат рекламу (нет незагружающихся рекламных блоков с лоадером),
            могут встречаться рекламные карточки с надписью "Рекламы нет", но они должны быть единичными

    с блокировщиком рекламы [manual]:
      - tags:
        - smoke
        - advertisement
        - smoke_zen
      - reasonNotToAuto:
        - Необходима ручная проверка ховеров по элементам рекламы, загрузки рекламных блоков
      - do: открыть выдачу сервиса на странице рубрики 'Главное'
      - do: перейти в любой нетраурный сюжет кликом по заголовку в новостной карточке
      - do: включить блокировщик рекламы и обновить страницу
      - assert: |
            на странице сюжета блок рекламы отображается справа в 4й колонке при ширине окна браузера больше 1250px (большая карточка сюжета считается за 2 колонки),
            на странице сюжета блок рекламы отображается справа в 3й колонке при ширине окна браузера меньше 1250px
      - do: начать скроллить страницу вниз
      - assert: реклама залипает и скроллится вниз за страницей
      - do: проскроллить страницу ниже блока 'Подробнее о событии'
      - assert: |
            под сюжетом есть реклама,
            скрин https://jing.yandex-team.ru/files/nightsonne/2020-12-30_12-35-54.png
      - do: навести курсор мыши на рекламную карточку под сюжетом
      - assert: изменяется стиль отображения курсора и тайтла у рекламы
      - do: проскроллить страницу вниз
      - assert: |
            новостные карточки рубрики перемежаются рекламными карточками,
            рекламные карточки располагаются после 4 новостных карточек,
            все рекламные карточки содержат рекламу (нет незагружающихся рекламных блоков с лоадером),
            могут встречаться рекламные карточки с надписью "Рекламы нет", но они должны быть единичными

  содержит рекламный блок справа при проскролле к ленте:
    в траурном сюжете:
      - tags:
        - smoke
        - advertisement
        - backend_news
        - smoke_zen
      - do: открыть выдачу сервиса на странице рубрики 'Происшествия'
      - do: открыть любой траурный сюжет кликом по заголовку в новостной карточке
      - do: отключить блокировщик рекламы и обновить страницу
      - do: порастягивать окно браузера так, чтобы ширина окна была то меньше, то больше 1250px
      - assert: на странице сюжета нет рекламного блока в 4й колонке при любой ширине окна браузера, если сюжет не скроллить вниз
      - do: проскроллить страницу ниже блока 'Подробнее о событии'
      - assert: |
          под сюжетом нет рекламного блока,
          справа появляется рекламный блок при проскролле первых карточек в ленте под сюжетом
      - do: поскроллить страницу вниз
      - assert: |
            в ленте под трагичным сюжетом есть рекламные карточки,
            все рекламные карточки содержат рекламу (нет незагружающихся рекламных блоков с лоадером),
            могут встречаться рекламные карточки с надписью "Рекламы нет", но они должны быть единичными

  содержит правую колонку с виджетами, которая:
    залипает при скролле:
      - tags:
        - smoke
      - do: открыть выдачу сервиса на странице рубрики 'Главное'
      - do: перейти в сюжет из топ 5 новостей кликом по заголовку в новостной карточке
      - do: растянуть окно браузера так, чтобы ширина окна была больше 1250px (иначе правая колонка в сюжете не будет отображаться)
      - assert: |
          справа присутствует колонка с виджетами,
          должен присутствовать виджет 'Главное',
          над виджетом 'Главное' может присутствовать виджет 'Еще по теме' или виджет с наименованием темы. если этих виджетов нет - заводить баги не нужно!
          справа от правой колонки в нетраурном сюжете есть рекламный блок, в траурном - нет рекламного блока,
          внешний вид виджетов темы и 'Главное' - https://jing.yandex-team.ru/files/an-smirn0v/shot_201228_150432.png ,
          внешний вид виджетов 'Еще по теме' и 'Главное' https://jing.yandex-team.ru/files/an-smirn0v/shot_201228_150606.png
      - do: поскроллить сюжет вниз
      - assert: правая колонка залипает внизу страницы и остается в зоне видимости пользователя
      - do: поскроллить сюжет вверх
      - assert: |
          правая колонка залипает вверху страницы и остается в зоне видимости пользователя,
          внешний вид https://jing.yandex-team.ru/files/an-smirn0v/shot_201228_150805.png

    позволяет перейти в сюжет:
      - tags:
        - smoke
        - backend_news
      - do: открыть выдачу сервиса на странице рубрики 'Главное'
      - do: перейти в сюжет из любого блока под топ 5 новостей, кроме георубрики, блоков 'Интересное' и 'Спорт' (например, из блока 'Политика')
      - do: растянуть окно браузера так, чтобы ширина окна была больше 1250px (иначе правая колонка в сюжете не будет отображаться). Обязательно проверить это, выполнив в консоли команду "window.innerWidth" (копировать и вставить текст без скобок). скрин - https://jing.yandex-team.ru/files/kossakovskaya/2021-07-02_15-59-06.png
      - assert: |
          справа присутствует колонка с виджетами,
          должен присутствовать виджет рубрики, из блока которой перешли в сюжет (например, 'Политика'),
          над виджетом 'Политика' может присутствовать виджет 'Еще по теме' или виджет с наименованием темы. Если этих виджетов нет - заводить баги не нужно!
          справа от правой колонки в нетраурном сюжете есть рекламный блок,
          ВНИМАНИЕ! в траурном сюжете справа от сюжета блока не будет, но если проскроллить страницу ниже сюжета, то рекламный блок появится - это ок, заводить баг не нужно!
          внешний вид виджетов темы и виджета рубрики - https://jing.yandex-team.ru/files/an-smirn0v/shot_201228_143640.png,
          внешний вид виджетов 'Еще по теме' и виджета рубрики https://jing.yandex-team.ru/files/an-smirn0v/shot_201228_143604.png
      - do: навести курсор мыши на любую новость в правой колонке
      - assert: изменяется стиль отображения курсора, заголовок становится красным
      - do: поскроллить правую колонку вниз
      - assert: |
          у каждой новости есть заголовок, наименование издания, время и (или) дата,
          длинные название источников корректно обрезаются многоточием, элементы не наползают друг на друга,
          внешний вид https://jing.yandex-team.ru/files/an-smirn0v/shot_201228_143835.png
      - do: кликнуть по любому заголовку в правй колонке
      - assert: осуществляется переход на страницу соответствующего сюжета в этой же вкладке
      - do: нажать кнопку 'Назад' браузера
      - assert: осуществляется возврат к изначальному сюжету

    позволяет перейти в рубрику Главное:
      - tags:
        - smoke
        - backend_news
      - do: открыть выдачу сервиса на странице рубрики 'Интересное'
      - do: растянуть окно браузера так, чтобы ширина окна была больше 1250px (иначе правая колонка в сюжете не будет отображаться)
      - do: перейти в любой сюжет кликом по заголовку в новостной карточке
      - assert: |
          справа присутствует колонка с виджетами,
          должен присутствовать виджет 'Главное',
          справа от правой колонки в нетраурном сюжете есть рекламный блок, в траурном - нет рекламного блока,
          над виджетом 'Главное' может присутствовать виджет 'Еще по теме' или виджет с наименованием темы (Обратите внимание! Виджетов 'Еще по теме' или виджета с наименованием темы может не быть! Эти блоки опциональны! Если их нет - заводить баги не нужно!),
          внешний вид виджетов темы и 'Главное' - https://jing.yandex-team.ru/files/an-smirn0v/shot_201228_150432.png ,
          внешний вид виджетов 'Еще по теме' и 'Главное' https://jing.yandex-team.ru/files/an-smirn0v/shot_201228_150606.png
      - do: навести курсор мыши на название виджета 'Главное'
      - assert: изменяется стиль отображения курсора, название виджета становится красным
      - do: кликнуть по названию виджета 'Главное'
      - assert: осуществляется переход на главную страницу сервиса

    позволяет перейти на страницу темы:
      - tags:
        - smoke
        - backend_news
        - smoke_zen
      - do: перейти в любую тему, например, https://yandex.ru/news/theme/Ukrainskij_krizis--137
      - do: перейти в сюжет, который относится к теме, кликом по заголовку в первой карточке на странице темы
      - do: растянуть окно браузера так, чтобы ширина окна была больше 1250px (иначе правая колонка в сюжете не будет отображаться)
      - assert: |
          справа присутствует колонка с виджетами,
          должен присутствовать виджет 'Главное',
          над виджетом есть виджет с наименованием темы,
          справа от правой колонки в нетраурном сюжете есть рекламный блок, в траурном - нет рекламного блока,
          внешний вид - https://jing.yandex-team.ru/files/kossakovskaya/2021-08-17_14-14-40.png
      - do: навести курсор мыши на название виджета темы
      - assert: изменяется стиль отображения курсора, название виджета становится красным
      - do: кликнуть по названию виджета темы
      - assert: осуществляется переход на страницу соответствующей темы

    не отображается на экранах меньше 1250px в нетраурных сюжетах:
      - tags:
        - smoke
      - do: открыть выдачу сервиса на странице рубрики 'Главное'
      - do: перейти в нетраурный сюжет из топ 5 новостей кликом по заголовку в новостной карточке
      - do: уменьшить окно браузера так, чтобы ширина окна была меньше 1250px
      - assert: |
          правая колонка с виджетами отображается под рекламным блоком,
          на странице нет горизонтального скролла
      - do: поскроллить сюжет вниз
      - assert: при скроле рекламный блок уходит вверх и становится невидимым

  должен содержать настройку-троеточие, которая:
    позволяет открыть попап статистики для неархивного сюжета:
      - tags:
          - backend_news
      - do: открыть выдачу сервиса на странице рубрики 'Главное'
      - do: перейти в первый сюжет из топ-5 новостей кликом по заголовку в новостной карточке. Обратите внимание! Сюжет должен быть НЕ спортивным! Если первый сюжет спортивный - откройте любой другой НЕ спортивный сюжет из топа новостей.
      - do: навести мышку на иконку с тремя точками в блоке сюжета и кликнуть на нее
      - assert: |
          по ховеру меняется стиль курсора, иконка становится красной,
          после клика раскрывается выпадающее меню с пунктом 'Статистика сюжета' https://jing.yandex-team.ru/files/kossakovskaya/2021-08-11_19-29-41.png
      - do: кликнуть по пункту меню 'Статистика сюжета'
      - assert: |
          раскрывается окно с заголовком 'Статистика' и информационной таблицей по сюжету,
          в таблице присутствуют обязательные пункты Документы в сюжете, Документы за час, Сюжеты в теме, Общий интерес, Вес сюжета, Позиция в топе,
          в таблице могут присутствовать пункты (только для региональных сюжетов) Позиция в региональном топе, Региональный интерес,
          в графе 'Общий интерес' стоит значение 'Высокий', выделенное зеленым цветом, в графе 'Вес сюжета' стоит значение 'Большой', выделенное черным цветом (в редких случаях значения могут отличаться),
          в графе 'Позиция в топе' стоит значение '1', имеется указание раздела топа - 'Россия',
          имеется блок "Интерес СМИ" с перечнем источников, которые содержат похожую новость,
          в конце таблицы отображается ссылка на справочную информацию,
          внешний вид https://jing.yandex-team.ru/files/kossakovskaya/2021-11-16_15-54-45.png
      - do: закрыть окно Статистики по крестику и перейти на страницу рубрики Авто
      - do: открыть любой сюжет рубрики и раскрыть в нем попап статистики из трех точек
      - assert: |
          раскрывается окно с заголовком 'Статистика' и информационной таблицей по сюжету,
          в графе 'Общий интерес' и 'Вес сюжета' могут стоять значения, выделенные соотвествующими цветами: низкий (красный), средний (желтый), высокий (зеленый), большой (черный),
          у каждого пункта в таблице имеется свое цифровое или буквенное значение,
          имеется блок "Интерес СМИ",
          в конце таблицы отображается ссылка на справочную информацию

    позволяет открыть попап статистики для регионального сюжета:
      - tags:
          - backend_news
          - smoke_zen
      - do: открыть выдачу сервиса на странице региональной рубрики
      - do: перейти в любой сюжет из топ-5 новостей кликом по заголовку в новостной карточке
      - do: кликнуть на икноку с тремя точками в блоке сюжета и далее по пункту меню 'Статистика сюжета'
      - assert: |
          раскрывается окно с заголовком 'Статистика' и информационной таблицей по сюжету,
          в таблице присутствуют обязательные пункты Документы за час, Документы в сюжете, Сюжеты в теме, Общий интерес, Вес сюжета, Позиция в топе,
          в таблице присутствуют пункты Позиция в региональном топе, Региональный интерес,
          в графах 'Общий интерес', 'Вес сюжета' и 'Региональный интерес' могут стоять значения, выделенные соотвествующими цветами: низкий (красный), средний (желтый), высокий (зеленый), большой (черный),
          в графе 'Позиция в региональном топе' стоит значение от '1' до '5',
          у пунктов 'Позиция в региональном топе' и 'Региональный интерес' имеется указание раздела топа - <название региона>,
          внешний вид https://jing.yandex-team.ru/files/kossakovskaya/2021-11-16_15-58-23.png
      - do: перейти на страницу https://yandex.ru/news/region/syktyvkar
      - do: перейти в любой сюжет из топ-5 новостей кликом по заголовку в новостной карточке
      - assert: |
          таблица соответствует требованиям, описанным в шаге выше,
          у пунктов 'Позиция в региональном топе' и 'Региональный интерес' имеется указание раздела топа - Сыктывкар

# тут NERPA-12283 флаг с новым дизайном цитаты, этот кейс может позже пригодиться
#  отображает источник возле цитаты:
#    - tags:
#        - backend_news
#    - do: |
#        открыть любой сюжет с цитатой,
#        проще всего найти цитату в рубрике Политика,
#        или открыть любой сюжет, включить эмуляцию тача в браузере, пролистать ленту сюжетов, пока не найдется сюжет с цитатой,
#        открыть найденный на таче сюжет с цитатой уже без эмуляции в десктопной верстке
#    - assert: после текста цитаты отображается источник
#    - do: навести курсор источник цитаты
#    - assert: стиль курсора и текста меняется
#    - do: кликнуть по источнику цитаты
#    - assert: |
#        в отдельной вкладке открылась страница источника,
#        в урле прокинуты параметры utm_source=yxnews и utm_medium=desktop

  содержит суммаризацию, скрывающуюся по кнопке "Свернуть":
    - params:
        flags:
          - yxnews_yt_request_summary=1,
          - yxneo_news_story_blocks-sequence=summarization,
          - yxneo_news_desktop_story_summarization=4,
          - yxneo_news_story_summarization_collapse=1,
          - yxneo_news_story_summarization_auto-expand=1,
    - do: открыть страницу 'https://yandex.ru/news/story/a--a20794917f9d7ab0b95d74bbd1018ad8?flags=yxnews_yt_request_summary=1;yxneo_news_story_blocks-sequence=summarization;yxneo_news_desktop_story_summarization=4;yxneo_news_story_summarization_collapse=1;yxneo_news_story_summarization_auto-expand=1'
    - screenshot: внешний вид соответствует скриншоту [summarization-expanded]
    - do: тапнуть "Свернуть"
    - screenshot: внешний вид соответствует скриншоту [summarization-collapsed]
    - do: тапнуть "Читать далее"
    - screenshot: внешний вид соответствует скриншоту [summarization-expanded-v1]

  содержит саджест источников, открывающий попап с настройками избранного:
    - params:
        flags:
          - yxneo_news_desktop_favorites-suggest=1,
          - yxnews_optout_counter_treshold=0,
          - yxnews_optout_hot_size=1,
          - yxnews_optout_candidate_size=50,
          - yxnews_optout_min_count=1,
          - yxnews_optout_max_count=5,
          - yxnews_optout_show_count=1000,
          - yxnews_optout_show_delay=0,
          - yxnews_optout_disable_delay=0,
          - yxnews_enable_api_favorites=1,
          - yxnews_arranged_flags_patch={"default":{"desktop":{"news_story":{"arranged.modules":"from_rubrics_top,uniq_filter,recommender,similarity_filter,user_settings"}}}}
    - do: открыть страницу 'https://yandex.ru/news/story/a--659c5ddd55b93649509a47d3a08f20bc?userid=448850646&flags=yxneo_news_desktop_favorites-suggest=1;yxnews_optout_counter_treshold=0;yxnews_optout_hot_size=1;yxnews_optout_candidate_size=50;yxnews_optout_min_count=1;yxnews_optout_max_count=5;yxnews_optout_show_count=1000;yxnews_optout_show_delay=0;yxnews_optout_disable_delay=0;yxnews_enable_api_favorites=1;yxnews_arranged_flags_patch={"default":{"desktop":{"news_story":{"arranged.modules":"from_rubrics_top,uniq_filter,recommender,similarity_filter,user_settings"}}}}'
    - screenshot: внешний вид соответствует скриншоту [favorites-suggest]

  содержит саджест источников (2ой вариант дизайна):
    - params:
        flags:
          - yxneo_news_desktop_favorites-suggest=2,
          - yxnews_optout_counter_treshold=0,
          - yxnews_optout_hot_size=1,
          - yxnews_optout_candidate_size=50,
          - yxnews_optout_min_count=1,
          - yxnews_optout_max_count=5,
          - yxnews_optout_show_count=1000,
          - yxnews_optout_show_delay=0,
          - yxnews_optout_disable_delay=0,
          - yxnews_enable_api_favorites=1,
          - yxnews_arranged_flags_patch={"default":{"desktop":{"news_story":{"arranged.modules":"from_rubrics_top,uniq_filter,recommender,similarity_filter,user_settings"}}}}
    - do: открыть страницу 'https://yandex.ru/news/story/a--659c5ddd55b93649509a47d3a08f20bc?userid=448850646&flags=yxneo_news_desktop_favorites-suggest=2;yxnews_optout_counter_treshold=0;yxnews_optout_hot_size=1;yxnews_optout_candidate_size=50;yxnews_optout_min_count=1;yxnews_optout_max_count=5;yxnews_optout_show_count=1000;yxnews_optout_show_delay=0;yxnews_optout_disable_delay=0;yxnews_enable_api_favorites=1;yxnews_arranged_flags_patch={"default":{"desktop":{"news_story":{"arranged.modules":"from_rubrics_top,uniq_filter,recommender,similarity_filter,user_settings"}}}}'
    - screenshot: внешний вид соответствует скриншоту [favorites-suggest-high]

  не перерисовывается рекламный блок в сюжете в рекомендованных новостях [manual]:
    - reasonNotToAuto:
      - Необходима ручная проверка рекламного блока
    - tags:
      - rareCase
    - do: перейти в любой сюжет, проскроллить страницу вниз чуть ниже рекламы до рекомендованных новостей
    - assert: |
        под рекламным блоком под сюжетом отображаются рекомендованные новости вместе с рекламными карточками,
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/reklama.png,
        после загрузки страницы реклама в блоке рекомендованных новостей не перерисовывается (не моргает и не меняется)

  содержит видео в сюжетах топ-5 [manual]:
    - tags:
      - backend_news
    - browsers:
        notFor:
          - win-ie11
    - reasonNotToAuto:
      - Необходима ручная проверка наличия видео в сюжетах топ-5 (для бэка)
    - do: открыть главную страницу новостей https://yandex.ru/news
    - assert: |
        главная страница содержит топ-5,
        внешний вид https://jing.yandex-team.ru/files/nightsonne/2021-05-24_14-03-39.png
    - do: кликнуть по заголовку первой новости в топ-5 (если новость спортивная - перейти к шагу 8)
    - assert: |
        в той же вкладке открывается сюжет,
        в сюжете может быть видеоблок
    - do: запустить видео, если оно есть в сюжете (если нет, пропустить этот шаг)
    - assert: |
        видео воспроизводится,
        ВНИМАНИЕ! В IE11 вместо видео заглушка (видео не воспроизводится) - это НЕ баг, заводить баг не нужно!
    - do: вернуться на главную страницу новостей
    - do: кликнуть по заголовку второй новости в топ-5 (если новость спортивная - перейти к шагу 13)
    - assert: |
        в той же вкладке открывается сюжет
        в сюжете может быть видеоблок
    - do: запустить видео, если оно есть в сюжете (если нет, пропустить этот шаг)
    - assert: видео воспроизводится
    - do: вернуться на главную страницу новостей
    - do: кликнуть по заголовку третьей новости в топ-5 (если новость спортивная - перейти к шагу 18)
    - assert: |
        в той же вкладке открывается сюжет
        в сюжете может быть видеоблок
    - do: запустить видео, если оно есть в сюжете (если нет, пропустить этот шаг)
    - assert: видео воспроизводится
    - do: вернуться на главную страницу новостей
    - do: кликнуть по заголовку четвертой новости в топ-5 (если новость спортивная - перейти к шагу 23)
    - assert: |
        в той же вкладке открывается сюжет
        в сюжете может быть видеоблок
    - do: запустить видео, если оно есть в сюжете (если нет, пропустить этот шаг)
    - assert: видео воспроизводится
    - do: вернуться на главную страницу новостей
    - do: кликнуть по заголовку пятой новости в топ-5 (если новость спортивная - перейти к шагу 25)
    - assert: |
        в той же вкладке открывается сюжет
        в сюжете может быть видеоблок
    - do: запустить видео, если оно есть в сюжете (если нет, пропустить этот шаг)
    - assert: видео воспроизводится
    - do: посчитать количество сюжетов с видео из 5 открытых сюжетов
    - assert: |
        в нескольких открытых в кейсе сюжетах из топ-5 есть видео,
        отсутствие видео во всех сюжетах топ-5 - это баг

  обрезает троеточием слишком длинный домен в рекламном блоке [manual]:
  - tags:
    - rareCase
    - smoke_zen
  - reasonNotToAuto:
    - Необходима ручная проверка внутри рекламного блока с использованием devtools
  - do: перейти в любой сюжет, проскроллить страницу до рекламного блока под сюжетом
  - do: открыть консоль и дописать к рекламному домену несколько символов. Обратите внимание! Дописать символы нужно именно к домену, это url в рекламном блоке - https://jing.yandex-team.ru/files/kossakovskaya/2022-04-26_14-30-25.1b8b9b7.png
  - assert: |
      рекламный домен обрезается многоточием,
      верстка рекламного блока не едет, элементы не наслаиваются друг на друга
      внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-06-28_19-04-02%20%282%29.png

  содержит суммаризацию с фильтрацией нежелательных источников [manual]:
    - tags:
      - backend_news
      - smoke_zen
    - reasonNotToAuto:
      - Необходима ручная проверка фильтрации нежелательных источников
    - do: зайти в любой неспортивный сюжет
    - do: запомнить, какие источники указаны у сниппетов, пример https://jing.yandex-team.ru/files/vasekerka/2021-08-10_13-26-33.png
    - do: зайти в настройки источников и добавить 1 источник из шага 2 в нежелательные, закрыть окно и обновить страницу
    - assert: |
        верстка не едет,
        отображаются сниппеты только тех источников, которые НЕ добавлены в нежелательные,
        пример - https://jing.yandex-team.ru/files/vasekerka/2021-08-10_13-31-06.png
    - do: снова зайти в настройки источников любым способом
    - do: добавить оставшиеся в суммаризации источники в нежелательные и обновить страницу
    - assert: |
        верстка не едет, показывается аннотация без суммаризации,
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-08-10_13-35-41.png,
        ВАЖНО: если после обновления страницы все еще отображается суммаризация, нужно еще раз добавить источники из суммаризации в избранное,
        когда все источники из суммаризации добавлены в нежелательные - отображается аннотация без суммаризации

  доскролливается до бэнгера под сюжетом после перехода на любой источник в суммаризации:
    - do: зайти в любой неспортивный сюжет и кликнуть на источник в любом сниппете суммаризации, например, https://jing.yandex-team.ru/files/vasekerka/2021-08-10_13-49-57.png
    - assert: |
        в новой вкладке происходит переход на страницу источника,
        (не баг: переход также может быть в этой же вкладке (если это турбо-источник) - заводить баг не надо в таком случае)
    - do: вернуться на страницу сюжета
    - assert: |
        вверху страницы сразу под рубрикатором отображается рекламный блок,
        внешний вид - https://jing.yandex-team.ru/files/vasekerka/2021-08-10_13-52-53.png
    - do: проскроллить страницу вверх
    - assert: |
        страница скроллится, верстка не едет,
        выше рекламного блоко отображается тот же самый сюжет

  содержит блок  "С чего все началось" в хвосте за флагом:
    - params:
        flags:
          - yxnews_add_origin=1
    - do: открыть страницу https://yandex.ru/news/story/a--e33ba3000031e824bbdfe4424dbfdf87?flags=yxnews_add_origin=1
    - screenshot: внешний вид соответствует скриншоту [origin-in-tail]

  содержит внешние ссылки в суммаризации:
    - params:
        flags:
          - yxneo_news_desktop_story_external-link-in-summarization=1
    - do: открыть страницу https://yandex.ru/news/story/title--9cca8ed21295f1121a3a85a940318a5c?persistent_id=160143379&fan=1&flags=yxneo_news_desktop_story_external-link-in-summarization=1
    - screenshot: внешний вид соответствует скриншоту [summarization-ext-link]

  содержит объектный ответ в суммаризации, который открывается по клику:
    - params:
        flags:
          - yxneo_news_desktop_story_entity-object-in-summarization=1
    - do: открыть страницу https://yandex.ru/news/story/news/story/j--3a371a1f7047d7b35cc2f17e158f75d8?flags=yxneo_news_desktop_story_entity-object-in-summarization=1
    - screenshot: внешний вид соответствует скриншоту [entity-object-in-summarization]
    - do: нажать на любой объектный ответ в суммаризации
    - assert: открылся объектный ответ, который не выезжает за границу сюжета
    - screenshot: внешний вид соответствует скриншоту [entity-object-in-summarization-opened]

  содержит карусель "Ещё по теме" перед хвостом:
    - params:
        flags:
          - yxneo_news_story_blocks-sequence=mediaBlock,related,tail
          - yxneo_news_desktop_story_related-type=1
          - yxneo_news_desktop_story_hide-more-column=1
          - yxneo_news_desktop_story_scroll-to-related=1
    - do: открыть страницу https://yandex.ru/news/story/a--87380cb20d57b7b14505af1c1c2640d5?flags=yxneo_news_story_blocks-sequence=mediaBlock,related,tail;yxneo_news_desktop_story_related-type=1;yxneo_news_desktop_story_hide-more-column=1;yxneo_news_desktop_story_scroll-to-related=1
    - do: кликнуть на название источника над заголовком сюжета, закрыть открывшуюся новую вкладку в браузере.
    - assert: страница сюжета проскроллена до блока "Ешё по теме"
    - screenshot: внешний вид сюжета соответствует скриншоту [related-before-tail]

  содержит карусель "Ещё по теме" после хвоста:
    - params:
        flags:
          - yxneo_news_story_blocks-sequence=tail,related,socials
          - yxneo_news_desktop_story_related-type=2
          - yxneo_news_desktop_story_hide-more-column=1
    - do: открыть страницу https://yandex.ru/news/story/a--87380cb20d57b7b14505af1c1c2640d5?flags=yxneo_news_story_blocks-sequence=tail,related,socials;yxneo_news_desktop_story_related-type=2;yxneo_news_desktop_story_hide-more-column=1
    - screenshot: внешний вид сюжета соответствует скриншоту [related-after-tail]

  содержит карусель "Ещё по теме" перед последним сниппетом суммаризации:
    - params:
        flags:
          - yxneo_news_story_blocks-sequence=summarization
          - yxneo_news_desktop_story_related-type=1
          - yxneo_news_desktop_story_related-title=0,
          - yxneo_news_desktop_story_related-in-text=1
          - yxneo_news_desktop_story_hide-more-column=1
    - do: открыть страницу https://yandex.ru/news/story/a--87380cb20d57b7b14505af1c1c2640d5?flags=yxneo_news_story_blocks-sequence=summarization;yxneo_news_desktop_story_related-type=1;yxneo_news_desktop_story_related-title=0;yxneo_news_desktop_story_related-in-text=1;yxneo_news_desktop_story_hide-more-column=1
    - screenshot: внешний вид сюжета соответствует скриншоту [related-in-summarization]

  показывает первые два сниппета суммаризации при поделении сюжетом:
    - do: перейти в рубрику "Культура"
    - do: полистать рубрику до загрузки 2 порции
    - do: кликнуть в любой сюжет из второй порции (важно, чтобы сюжет не принадлежал топ-5 рубрики, поэтому открываем сюжет из второй порции)
    - assert: |
        в той же вкладке открывается страница сюжета,
        в сюжете присутствует суммаризация, внешний вид https://jing.yandex-team.ru/files/nightsonne/2021-09-24_19-21-52.png ,
        если в сюжете нет суммаризации, вернуться ко 2й порции карточек рубрики "Культура" и попробовать открыть другой сюжет
    - do: кликнуть на кнопку "Поделиться" рядом с блоком эмоджи внизу сюжета
    - assert: появилось всплывающее окно поделения
    - do: поделиться сюжетом через меню поделения в любом мессенджере, например, в Telegram
    - do: сравнить аннотацию в мессенджере и первые два блока суммаризации сюжета
    - assert: |
        в мессенджере под ссылкой на сюжет и заголовком присутствует аннотация,
        аннотация включает в себя первые 2 сниппета суммаризации сюжета,
        Обратите внимание! Суммаризация может не прорасти по многим причинам - если оказалось, что ее нет - попробуйте другой сюжет. Если у двух сюжетов ее нет - только тогда заводите баг,
        внешний вид для Telegram - https://jing.yandex-team.ru/files/nightsonne/2021-09-24_19-30-57.png,
        если первый сниппет большой, второй может не отобразиться или отобразиться частично,
        аннотация может содержать ссылки на источник из суммаризации, если имя источника == доменному имени (например, справедливо для источника Lenta.ru),
        внешний вид для аннотации со ссылкой - https://jing.yandex-team.ru/files/nightsonne/2021-09-24_19-39-06.png

  логирует просмотренные карточки в ленте в redirlog и сохраняет в localStorage:
    - tags:
        - no_assessors
    - params:
        flags:
          - yxneo_news_desktop_filter-shown-cards=1
    - do: открыть страницу https://yandex.ru/news/story/a--e649157d999144a39835c92e4f5a9b62?flags=yxneo_news_desktop_filter-shown-cards=1
    - do: проскроллить до ленты новостей
    - assert: карточки, попавшие во вьюпорт, записались в redirlog и сохранились в localStorage

# Теперь в асессорском экспе всегда отображаются комменты - временно убираю эту логику из кейсов
#    может содержать пункт с комментариями [manual]:
#      - tags:
#          - backend_news
#      - do: открыть выдачу сервиса на странице Главное без залогина в режиме инкогнито
#      - do: перейти в любой сюжет кликом по заголовку в новостной карточке
#      - assert: |
#          в блоке сюжета не отображается иконка комментариев,
#          иконка поделения отображается под аннотацией с надписью Поделиться,
#          иконка с тремя точками отображается под аннотацией
#      - do: кликнуть на икноку с тремя точками в блоке сюжета
#      - assert: |
#          раскрывается выпадающее меню с пунктами Статистика сюжета и Комментировать,
#          рядом с кнопкой Комментировать отображается счетчик комментариев (при нуле счетчик не отображается),
#          скрин https://jing.yandex-team.ru/files/terenandrevna/20201019_21%3A06%3A21.png
#      - do: кликнуть по кнопке Комментировать
#      - assert: открывается модальное окно комментариев

  содержит метку иноагента в суммаризации:
    - do: открыть https://yandex.ru/news/story/Ros--c3c4ea8e930f1ee118654d74a326a067?persistent_id=166689400
    - assert: возле источника-иноагент отображается свернутая плашка со стрелочкой
    - do: нажать на стрелочку
    - assert: развенулось сообщение об иноагенте

  содержит метку иноагента в хвосте:
    - do: открыть https://yandex.ru/news/story/Vra--bd06c897561cfb68db7fc8b25f50ddad?persistent_id=4544236297233736557
    - do: промотать к источникам
    - assert: возле источника-иноагент отображается свернутая плашка со стрелочкой
    - do: нажать на стрелочку
    - assert: развенулось сообщение об иноагенте

  содержит метку иноагента в заголовке:
    - do: открыть https://yandex.ru/news/story/Vra--bd06c897561cfb68db7fc8b25f50ddad?persistent_id=4544236297233736557
    - do: промотать к источникам
    - assert: возле источника-иноагент отображается свернутая плашка со стрелочкой
    - do: нажать на стрелочку
    - assert: развенулось сообщение об иноагенте

  содержит метку "Самое цитируемое" в хвосте:
    - do: открыть https://yandex.ru/news/story/a--7e64ac51d640f1c9a06eb2101262f585?persistent_id=167793959
    - assert: 2й источник в хвосте содержит метку "Самое цитируемое"

  не содержит рекламу для пользователей с подпиской Плюс:
    - do: открыть https://yandex.ru/news/story/a--050da104f517a6a266e68bf3e82ca642?flags=yxneo_news_story_disable-plus-users-advert=1
    - assert: реклама отсутствует

  содержит favicon:
    - do: открыть рубрику "Главное" новостей
    - assert: |
        вкладка браузера отображает фавиконку,
        внешний вид - https://jing.yandex-team.ru/files/nightsonne/2021-10-26_15-42-51.png
    - do: в той же вкладке открыть главную Яндекса https://yandex.ru
    - do: из блока "Сейчас в СМИ" перейти в любой сюжет
    - assert: |
        открывается сюжет новостей,
        вкладка браузера с сюжетом отображает фавиконку,
        внешний вид - https://jing.yandex-team.ru/files/nightsonne/2021-10-26_15-42-51.png

  содержит внешние ссылки в блоке суммаризации [manual]:
    - tags:
        - backend_news
        - smoke_zen
    - do: чтобы быстро найти сюжет, в суммаризации которого содержится ссылка на внешние первоисточники, нужно поискать его на таче по шагам ниже
    - do: после перехода на тестовый стенд открыть DevTools и включить эмуляцию тача (общая инструкция тут https://wiki.yandex-team.ru/eva/testing/tech/DevTools/#kakperekljuchitotobrazheniesajjtavmobilnyjjvid)
    - do: обновить страницу
    - assert: отображается мобильная версия сервиса Яндекс Новости на странице рубрики 'Главное'
    - do: зайти в любой неспортивный сюжет, раскрыть (если не раскрыта) суммаризацию тапом по кнопке "Читать далее"
    - do: скроллить ленту сюжетов и в каждом тапать на кнопку "Читать далее", пока не попадется сюжет в суммаризации которого содержится ссылка на внешние первоисточники (внешний - это значит, что у нас не подключен как партнер и от него нет новостей на сервисе)
    - assert: отображается сюжет в суммаризации которого содержится ссылка на внешние первоисточники - https://jing.yandex-team.ru/files/weberxks/Screen%20Shot%202022-03-02%20at%2017.16.20.png
    - do: убедиться, что сюжет расположен на экране так, что урл совпадает с заголовком сюжета
    - assert: скрин https://jing.yandex-team.ru/files/weberxks/Screen%20Shot%202022-03-02%20at%2017.23.18.png
    - do: выключить эмуляцию тача, закрыть консоль и обновить страницу
    - assert: открыт тот же сюжет, что и на таче, но в десктопной версии (может измениться заголовок на похожий заголовок и источник)
    - do: кликнуть правой кнопкой мышки на ссылку внешнего первоисточника в суммаризации и нажать на "Inspect element code"
    - assert: ссылка отображается корректно - https://jing.yandex-team.ru/files/kossakovskaya/Screen%20Shot%202021-10-20%20at%2018.25.17.png
    - do: нажать на ссылку в суммаризации сюжета
    - assert: в новом окне браузера открылась статья от внешнего источника

  при поделении сокращает ссылку:
    - do: открыть любой неспортивный сюжет
    - do: кликнуть по ссылке поделения и поделиться в любом мессенджере/скопировать и вставить ссылку на поделение
    - assert: ссылка на поделение сокращена и имеет вид https://yandex.ru/news/-/GwAA

# 07.04.22 выяснили, что Фильтрация сейчас отключена, yxnews_save_dj_filter_to_yt = 0 - флаг на проде
#  не показывает просмотренные сюжеты в рекомендательной ленте [manual]:
#    - tags:
#      - backend_news
#    - do: авторизоваться на сервисе горячим пользователем, например, Ольгой Бузовой (инструкция https://wiki.yandex-team.ru/eva/testing/projects/nerpa/#loginyiparolidljatestovyxpolzovatelejj)
#    - do: зайти в любой неспортивный сюжет 
#    - do: проскролить ниже рекламного блока до ленты “По вашим интересам"
#    - do: открыть любой сюжет из ленты “По вашим интересам”
#    - assert: открылся сюжет в этой же вкладке
#    - do: открыть рубрику “Коронавирус” и перейти в любой сюжет из рубрики 
#    - do: проскроллить к ленте “По вашим интересам”
#    - assert: в ленте отсутствует сюжет, который вы открывали на шаге 4

files:
  - features/news/story/story.desktop.hermione.js
  - features/news/story/story.desktop.hermione.e2e.js

tags:
  - neo
  - story
  - neodesktop

manager: glushneva

qa-engineer: nightsonne

tlds:
  - ru
  - by
  - kz
  - uz
  - ua
  - com
