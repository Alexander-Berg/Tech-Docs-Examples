feature: Спорт

specs:
  Видео - проверка листалки:
    - params:
        foreverdata: '160316212'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик футбольного матча
    - assert: в колдунщике присутствует 2 ряда видеороликов
    - assert: у каждого ряда видео присутствует листалка "вправо"
    - screenshot: внешний вид [plain]
    - assert: внешний вид соответствует эталонному скриншоту
    - do: нажать на стрелку "вправо" первого ряда
    - assert: тумбы проскроллились справа налево
    - tech: сработал счетчик '/tab_video/p0/showcase/scroll_right'
    - assert: в первом ряду видео появилась листалка "влево"
    - do: проскроллить первый ряд видео до конца по клику в листалку "вправо"
    - assert: тумбы проскроллились справа налево
    - assert: листалка "вправо" исчезла
    - do: нажать на стрелку "влево" первого ряда
    - tech: сработал счетчик '/tab_video/p0/showcase/scroll_left'
    - assert: тумбы проскроллились слева направо
    - assert: появилась листалка "вправо"
    - do: проскроллить первый ряд видео до конца по клику в листалку "влево"
    - assert: тумбы проскроллились слева направо
    - assert: листалка "влево" исчезла
    - do: нажать на листалку "вправо" второго ряда
    - assert: тумбы проскроллились справо налево
    - assert: во втором ряду видео появилась листалка "влево"
    - tech: сработал счетчик '/tab_video/p0/showcase/scroll_right'
    - do: нажать на стрелку "влево" второго ряда
    - assert: тумбы проскроллились слева направо
    - tech: сработал счетчик '/tab_video/p0/showcase/scroll_left'
    - assertMetrics: '*'
  Кликабельная ссылка на стадион:
    - params:
        foreverdata: '1499478235'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик футбольного матча
    - do: нажать на название стадиона
    - assert: получена выдача по новому запросу
    - assert: на выдаче присутствует информация о стадионе
    - assertMetrics: '*'
  Подробности матча:
    Расширенные - ссылки на игроков:
      - params:
          foreverdata: '4067186827'
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик футбольного матча
      - do: нажать на таб 'Ход матча'
      - assert: контент таба переключился
      - do: нажать на первую ссылку игрока
      - assert: получена выдача по новому запросу
      - assert: на выдаче есть информация про игрока
      - assertMetrics: '*'
  Расстановка игроков. Проверка переходов по ссылкам:
    params:
      foreverdata: '2266234889'
    tags:
      - smoke_extended
    beforeEach:
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик матча
      - assert: в колдунщике присутствует информация по расстановке команд на поле
      - do: нажать на кнопку разворачивания внизу колдунщика
      - assert: колдунщик развернулся
      - screenshot: внешний вид [sport-livescore-lineups-{{PLATFORM}} >> plain]
    Внешний вид:
      - label: sport-livescore-lineups-{{PLATFORM}}
      - screenshot: внешний вид [plain]
    Турнир:
      - do: в шапке колдунщика нажать на ссылку 'Евро-2020'
      - assert: получена выдача по запросу 'Евро-2020'
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tournament'
    Игрок:
      - do: нажать на майку игрока
      - assert: получена выдача по запросу, который соответствует выбранному игроку
      - tech: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/tabs/lineups/player'
  Внешний вид ссылки на внешний источник - по данным ФИФА:
    - params:
        foreverdata: '609843696'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: колдунщик присутствует на выдаче
    - assert: справа снизу под колдунщиком видна ссылка "По данным ФИФА"
    - screenshot: внешний вид [with-source-link]
    - do: нажать на ссылку
    - assert: открылась новая страница с соответствующим сайтом
    - teсh: сработал счетчик '/$page/$main/$result[@wizard_name="sport/livescore" and @subtype="football_match"]/source'
    - assertMetrics: '*'
  Настраиваемый внешний вид иконок команд:
    - params:
        foreverdata: '307910780'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик матча
    - screeenshot: примерный внешний вид [with-customized-icons]
    - assertMetrics: '-'
  Произвольная строка под основным счетом с отображением тултипа:
    - params:
        foreverdata: '4050000554'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик матча
    - do: навести на строку под основным счетом "по сетам"
    - assert: отобразился тултип с детальным счетом
    - screenshot: внешний вид матча с тултипом [with-detailed-score-tooltip]
  Гонка с длинным тайтлом:
    - params:
        foreverdata: '4026991367'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик одной гонки
    - screenshot: внешний вид колдунщика [long-title]
  Внешний вид с кликабельными названиями команд:
    - params:
        foreverdata: '1562755333'
    - do: получить выдачу по запросу 'foreverdata'
    - assert: колдунщик присутствует на выдаче
    - screenshot: внешний вид [with-title-links]
    - do: нажать на фамилию спортсмена в заголовке матча
    - assert: открылась новая страница с соответствующим сайтом
    - teсh: сработал счетчик '/$page/$main/$result/titleLink'

v-team: Sport

tags:
  - reviewed
  - sport
  # e2e написан на common уровне features/common/sport/livescore/sport-livescore.hermione.e2e.js
  - skip_e2e_check

files:
  - features/sport/livescore/sport-livescore@deskpad.hermione.js

counter: /$page/$main/$result[@wizard_name="sport/livescore"]

tlds:
  - ru
  - by
  - kz
  - ua
  - uz
