feature: Вакансии
type: Смена статуса вакансии

specs:
  aliases:
    - &OpenVacancies
      - do: открыть страницу вакансий /vacancies/?member=&status=on_approval
      - assert: |
          выбран таб 'Вакансии'
          появился список вакансий в статусе 'На согласовании'
          пример внешнего вида [https://jing.yandex-team.ru/files/grikyan91/Vakansii__Femida_2018-12-13_13-15-31.png]
      - do: выбрать любую вакансию из списка
    - &ChangeTicket
      - do: перейти по ссылке 'Тикет в Стартреке'
      - assert: открылся тикет на создание вакансии
      - do: клик на кнопку 'Согласовать вакансию'
      - assert: открылась форма [https://jing.yandex-team.ru/files/grikyan91/TJOB-775_Stazhirovka_Razrabotchik_bekenda_Stazher__Treker_TESTING_2018-12-11_16-43-39.png]
      - do: в поле 'Исполнитель' указать 'Марат Январев'
      - do: клик 'Применить'
      - assert: |
          форма закрылась
          статус тикета стал 'Ждем подтверждения'
      - do: клик на кнопку 'Подтверждено'
      - assert: открылась форма [https://jing.yandex-team.ru/files/grikyan91/TJOB-775_Stazhirovka_Razrabotchik_bekenda_Stazher__Treker_TESTING_2018-12-11_16-48-51.png]
      - do: в поле 'Номер БП' ввести значение от 1 до 10000
      - do: клик 'Применить'
      - assert: |
          форма закрылась
          статус тикета перешел в 'В работе'
      - do: вернуться на страницу /vacancies/<id вакансии>

  Перевод статуса вакансии "В работу":
    - *OpenVacancies
    - assert: |
        открылась страница /vacancies/<id вакансии>/
        в шапке есть кнопки '...' и 'редактировать'
        рядом с названием вакансии статус 'На согласовании'
    - screenshot: пример внешнего вида шапки вакансии [status_on_approval]
    - *ChangeTicket
    - do: клик на кнопку '...'
    - assert: открылась выпадушка c кнопкой 'В работу'
    - screenshot: внешний вид выпадушки [actions]
    - do: клик в выпадушке на 'В работу'
    - screenshot: открылась форма 'Назначение вакансии в работу' [workflow_form]
    - do: ввести в поле 'ID бюджетной позиции' значение от 1 до 10000
    - do: в поле 'Основной рекрутер' выбрать 'Оксана Мидори'
    - do: клик на кнопку 'Назначить'
    - assert: |
        форма закрылась
        в информации о вакансии установилось введенное значение в поле 'ID бюджетной позиции'
        в информации о вакансии установилось значение 'Оксана Мидори' в поле 'Рекрутеры'
        статус рядом с названием вакансии изменился на 'В работе'
    - screenshot: пример внешнего вида [status_in_progress]

files:
  - tests/hermione/suites/desktop/vacancies/vacancies_in_progress/vacancies_in_progress.hermione.js

tags:
  - reviewed

priority: blocker

browsers:
  - yandex-browser-desktop
  - firefox-desktop
  - safari-desktop
