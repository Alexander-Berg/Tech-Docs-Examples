feature: Специальные события
type: Коронавирус

specs:
  beforeEach:
    - do: получить выдачу по запросу 'foreverdata'
    - assert: на выдаче присутствует колдунщик коронавируса
  Внешний вид:
    - params:
        foreverdata: '4198688006'
    - screenshot: примерный внешний вид [plain]
  С картой:
    params:
      foreverdata: '3947390034'
    Внешний вид:
      - screenshot: внещний вид колдунщика [with-map]
    Проверка ссылки на карте:
      - do: нажать на картинку в таблице 'Карта'
      - assert: ссылка открылась в новой вкладке
      - tech: сработал счетчик '/wiz/special/event/sport/team/table/cell'
  С картой без кнопки:
    params:
      foreverdata: '2636623967'
    beforeEach:
      - do: получить выдачу по запросу 'foreverdata'
      - assert: на выдаче присутствует колдунщик коронавируса
    Внешний вид:
      - screenshot: внещний вид колдунщика [map-without-button]
    Проверка ссылки на карте:
      - do: нажать на картинку в таблице 'Карта'
      - assert: ссылка открылась в новой вкладке
      - tech: сработал счетчик '/wiz/special/event/sport/team/table/cell'
  Неработающий аякс:
    - params:
        foreverdata: '1603865055'
    - do: нажать на второй таб в колдунщике коронавируса
    - assert: |
        содержимое колдунщика обновилось
        видно сообщение об ошибке загрузки
    - screenshot: примерный внешний вид [tabs-api-error]
  Внешний вид при одном табе:
    - params:
        foreverdata: '2042612508'
    - screenshot: примерный внешний вид [one-tab]


specs-integration:
  Проверка наличия элементов:
    - tags: smoke
    - do: получить выдачу по запросу 'коронавирус'
    - assert: на выдаче присутствует колдунщик коронавируса
    - assert: колдунщик имеет блок с гистограммой распространения
    - assert: колдунщик имеет блок с новостями (новостей как минимум две)
    - assert: колдунщик имеет табики
  Загрузка содержимого табов аяксом:
    - tags: smoke
    - do: получить выдачу по запросу 'коронавирус'
    - assert: на выдаче присутствует колдунщик коронавируса с табами
    - do: нажать на второй таб
    - assert: |
        содержимое колдунщика обновилось
        колдунщик содержит данные, соответствующие активному табику
tags:
  - covid

counter: /$page/$main/$result[@wizard_name="special/event" and @subtype="coronavirus"]

files:
  - features/adapter-special-event/adapter-special-event_type_other/adapter-special-event_type_covid@deskpad.hermione.e2e.js
  - features/adapter-special-event/adapter-special-event_type_other/adapter-special-event_type_covid@deskpad.hermione.js

v-team: Freshness

tlds:
  - ru
