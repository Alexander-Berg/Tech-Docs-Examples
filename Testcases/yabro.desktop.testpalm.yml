feature: Тестирование мессенджера в Яндекс Браузере

specs:

    Логаут из чатов[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv` и открыть чат в боковой панели нажатием на кнопку Q
        - assert: Подгрузились чаты и каналы
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-08_16.55.50-yGJg5.png]
        - do: Разлогиниться любым способом
        - assert: В вебвью чатов боковой панели нет чатов, отображаются только рекомендуемые каналы и Алиса
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-08_17.02.41-KWPbL.png]

    Пуши не появляются, если настройка уведомлений отключена[manual]:
        - automation:
        - do: Запустить браузер с ключом `--enable-features="YaPush<xyz" --force-fieldtrials=xyz/1 --force-fieldtrial-params=xyz.1:yandex_push_subscriber_start_delay/1 --ya-server-configuration-delay=1` для ускоренной подписки на пуши
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Залогиниться в другой аккаунт я.почты на другом устройстве или в окне инкогнито.
        - assert: Есть залогин на другом устройстве/окне Инкогнито ( **клиент 2** )
        - do: На **клиенте 2** добавиться в чат ``MuteGroup`` по ссылке https://yandex.ru/chat/#/join/fec49af2-f770-4124-80ae-940cb628b27b **Важно:** Убедиться что для этой группе на **клиенте 1** уведомления отключены ( есть перечеркнутый колокольчик, при отсутствии непрочитанных сообщений. Иначе выключить уведомления через настройки чата
        - screenshot: Перечеркнутый колокольчик [https://jing.yandex-team.ru/files/iutkin/2020-05-08_13.00.54-vfqfQ.png]
        - screenshot: Выключение уведомлений через настройки чата [https://jing.yandex-team.ru/files/iutkin/2020-05-08_13.11.30-euS7t.gif]
        - do: Отправить сообщение **с клиента 2**
        - assert: |
              На **клиенте 1** не отображаются пуш-уведомления
              Не меняется счетчик на кнопке мессенджера в панели
              **Примечание** в счетчике непрочитанных не указываются сообщения из чатов/каналов, в которых уведомления отключены
        - screenshot: кнопка мессенджера в панели [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Открыть чат в боковой панели **клиента 1** по кнопке в боковой панели
        - assert: Счетчик сообщений серый
        - screenshot: счетчик [https://jing.yandex-team.ru/files/iutkin/2020-03-26_19.38.06-B8C7i.png]
        - screenshot: кнопка в боковой панели [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Включить уведомления для чата
        - assert: Счетчик на кнопке боковой панели появился/увеличился на количество сообщений в чате
        - screenshot: кнопка в боковой панели со счетчиком [https://jing.yandex-team.ru/files/iutkin/2020-07-22_16.50.17-vtduA.png]
        - do: Выключить уведомления для чата
        - assert: Счетчик на кнопке боковой панели уменьшился на количество сообщений в чате/исчез

    Отправка сообщений (по кнопке/enter)[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Кликнуть в кнопку мессенджера в боковой панели
        - assert: Открылось меню чатов
        - screenshot: кнопка мессенджера [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Кликнуть в шестеренку в верхнем правом углу и в открывшемся меню настроек включить тумблер "отправлять сообщение по Enter"
        - assert: Тумблер отмечен
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-07_18.35.32-2Y4og.png]
        - do: Вернуться в меню чатов и открыть любой чат
        - do: Ввести любое текстовое сообщение и нажать enter
        - assert: Сообщение отправлено
        - do: Ввести любое тестовое сообщение и кликнуть по кнопке отправления
        - screenshot: кнопка отправления [https://jing.yandex-team.ru/files/iutkin/2020-05-07_18.36.43-EXytJ.png]
        - assert: Сообщение отправлено
        - do: Ввести любое сообщение и нажать `Shift+Enter`
        - assert: Происходит перенос строки, сообщение не отправляется
        - do: Отключить тумблер `Отправлять сообщение по Enter` в настройках
        - assert: Тумблер отключен
        - do: Открыть любой чат, ввести текст и проверить события при нажатии Enter, Shift+Enter, при клике по кнопке отправления
        - assert: Событие отправки сообщения происходит только при нажатии на кнопку или Shift+EnterПо Enter происходит перенос строки

    Превью стикеров[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка мессенджера [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Перейти в любой чат
        - assert: Присутствует кнопка "смайлики" в строке ввода
        - screenshot: кнопка "смайлики" [https://jing.yandex-team.ru/files/iutkin/2020-05-08_12.48.11-xCKko.png]
        - do: Кликнуть по кнопке
        - assert: Открывается балун со стикерами
        - screenshot: балун со стикерами [https://jing.yandex-team.ru/files/iutkin/2020-05-08_12.49.13-S2jI0.png]
        - do: Сделать длинный клик по любому стикеру (не отпускать лкм)
        - assert: Появляется превью, стикер при этом не отправляется
        - screenshot: превью [https://jing.yandex-team.ru/files/iutkin/2020-05-08_12.50.58-Kn7cV.png]
        - do: Отпустить ЛКМ
        - assert: Превью скрывается, стикер не отправляется
        - do: Сделать длинный клик по любому стикеру (не отпускать лкм) и после появления превью смещать курсор по другим стикерам
        - assert: |
              Превью меняются
              После отпускания ЛКМ стикер не отправляется, балун со стикерами не закрывается
        - screenshot: изменение превью [https://jing.yandex-team.ru/files/iutkin/2020-05-08_12.51.55-XtG9E.gif]

    Отправка стикеров[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке (см. скриншот)
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Перейти в любой чат
        - assert: Присутствует кнопка "смайлики" в строке ввода
        - screenshot: кнопка "смайлики" [https://jing.yandex-team.ru/files/iutkin/2020-05-08_12.48.11-xCKko.png]
        - do: Кликнуть по кнопке
        - assert: Открывается балун со стикерами
        - screenshot: балун [https://jing.yandex-team.ru/files/iutkin/2020-05-08_12.49.13-S2jI0.png]
        - do: Повторно кликнуть по иконке "смайлик"
        - assert: Балун скрывается
        - do: Повторно открыть балун со стикерами и кликнуть по любому стикеру (короткий клик)
        - assert: |
              Сразу отправляется стикер
              Балун со стикерами скрылся

    Аттач файлов[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - do: Выложить на локальный диск файлы по ссылке https://yadi.sk/d/tl8x6I6PR0f3yA
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Открыть любой чат
        - assert: В поле ввода отображается "скрепка" в левой части
        - screenshot: скрепка [https://jing.yandex-team.ru/files/iutkin/2020-03-27_18.17.31-cKHry.png]
        - do: Нажать на скрепку
        - assert: Открывается проводник для выбора файлов для прикрепления
        - do: Выбрать файл `50_less.zip`
        - assert: Отображается окно загрузки
        - screenshot: окно загрузки [https://jing.yandex-team.ru/files/iutkin/2020-05-07_18.18.54-P9qKl.png]
        - do: Нажать "Отмена"
        - assert: Происходит возврат в чат, отправки файла не происходит
        - do: Повторно выбрать файл 50_less.zip и нажать "Загрузить"
        - assert: Происходит отправка файла (см скриншот). По клику на "скачать" можно скачать файл
        - screenshot: отправка файла [https://jing.yandex-team.ru/files/iutkin/2020-05-07_18.20.45-Zp2Od.gif]
        - do: Выбрать через меню скрепки файл `50mb.zip`
        - assert: Отображается окно загрузки
        - screenshot: окно загрузки [https://jing.yandex-team.ru/files/iutkin/2020-09-01_14.54.09-mUVco.png]
        - do: Вписать любое сообщение в поле `Добавить сообщение` и нажать `Загрузить`
        - assert: Отправляется файл вместе с сообщением. По клику на “скачать” можно скачать файл.
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-07_18.31.59-LuU8f.png]
        - do: Выбрать через меню загрузки `50_more.zip`
        - assert: Выдается сообщение о невозможности загрузки файла, файл не загружается.
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-07_18.33.23-FTmY9.png]
        - do: Создать пустой текстовый файл и попытаться отправить его
        - assert: Выдается сообщение о невозможности загрузки файла, файл не загружается

    Публичные ссылки[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Найти в списке чатов `TestPublicLinkChat` и открыть его
        - do: Перейти в меню "Информация о чате"
        - screenshot: где это? [https://jing.yandex-team.ru/files/iutkin/2020-05-08_12.23.56-hbvHl.png]
        - do: Кликнуть по пункту "Настройки чата"
        - do: Включить тумблер "Публичная ссылка" или если он включен, выключить и включить тумблер и сохранить изменения
        - assert: После применения произошел возврат в меню информации о чате. При переключении тумблера сгенерированная ссылка не изменяется. Ссылка на чат отображается и работает
        - do: перейти обратно в "Настройки чата"
        - do: Кликнуть по пункту "Обновить ссылку"
        - assert: после нажатия на кнопку "Обновить" - ссылка обновляется, отображается тултип "Ссылка обновлена"
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-10-08_10.47.49-B5STc.gif]
        - do: Кликнуть по ссылке
        - assert: Выдается сообщение "Ссылка скопирована"
        - do: Перейти в общий список чатов и открыть чат "Сохраненные сообщения"
        - assert: Чат открыт
        - do: Вставить ссылку (ctrl+v) и отправить ее в чат
        - assert: Отображается превью чата с кнопкой "Перейти в чат"
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-10-01_14.19.03-9GMfF.png]
        - do: Кликнуть по кнопке "Перейти в чат"
        - assert: Происходит открытие чата `TestPublicLinkChat` в вебвью боковой панели. Новая вкладка в браузере НЕ открывается
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-03-27_20.12.28-ySNHY.gif]
        - do: Вернуться в настройки чата "TestPublicLinkChat" и отключить тумблер "Публичная ссылка". Применить изменения.
        - assert: Тумблер отключен, сгенерированная ссылка не отображается в "Настройках чата" и "Информации о чате"
        - do: Вернуться в чат "Сохраненные сообщения” и кликнуть по ранее отправленной в данный чат ссылке
        - assert: Отображается сообщение о невозможности подключения к чату, происходит переход в общий список чатов
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-03-27_20.12.59-xNjTW.gif]
        - do: Вернуться в меню "Информация о чате" и проверить, что публичная ссылка и кнопка "Обновить" отображаются только при включенном тумблере после сохранения изменений.
        - assert: Публичная ссылка и кнопка "Обновить" отображаются только при включенном тумблере и только после сохранения изменений
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-10-01_14.26.11-Ena1r.gif]
        - do: Проверить работу кнопки "Обновить"

    установка аватаров[manual]:
        - automation:
        - description: |
              Примеры
              [gif](https://jing.yandex-team.ru/files/iutkin/Uzga.gif)
              [jpeg](https://jing.yandex-team.ru/files/iutkin/risovach.ru.jpg)
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Найти в списке чатов `AvatarTestChannel` и открыть его (или создать любой **канал** )
        - do: Перейти в меню "Информация о чате"
        - screenshot: КМ "информация о чате" [https://jing.yandex-team.ru/files/iutkin/2020-05-08_12.23.56-hbvHl.png]
        - assert: Отображается меню информации о канале
        - screenshot: скриншот [https://jing.yandex-team.ru/files/iutkin/2020-10-01_10.53.48-TkJLi.png]
        - do: Кликнуть по пункту "Настройки канала"
        - assert: Происходит переход в меню настроек
        - do: Навести курсор на аватар в верхней части меню
        - assert: По ховеру на аватар меняется цвет текста "Сменить фото" под ним
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-10-01_11.08.02-9bZdH.gif]
        - do: Выбрать jpeg файл (можно взять из description)
        - assert: |
              Открывается окно для выбора области изображения
              Можно произвести сдвиг и уменьшение/увеличение области изображения
        - screenshot: область изображения [https://jing.yandex-team.ru/files/iutkin/2020-10-01_11.14.48-sRgNn.png]
        - do: Нажать "Отмена"
        - assert: |
              Произошел возврат в меню настроек
              Аватар не изменился
              Затенение убрано
        - do: Снова перейти в установку аватара и выбрать jpeg файл
        - assert: Открыта зона выбора отображаемой области аватара
        - do: Изменить размер и положение отображаемой области (произвольно) и нажать "Сохранить"
        - assert: |
              Происходит возврат в меню настроек
              Аватар устанавливается/изменяется согласно выбранной отображаемой зоне в меню настроек чата
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-10-01_11.23.24-v2kQr.png]
        - do: Убедиться, что аватар применяется к чату только, если покуинуть меню настроек с сохранением изменений
        - assert: |
              Если покинуть меню настроек без изменений, то аватар сбросится на исходную версию и его надо будет установить заново
              Если сохранить изменения - аватар устанавливается/изменяется согласно выбранной отображаемой зоне в меню настроек чата как в меню настроек, так и в самом чате
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-10-01_11.24.09-2A7Ba.png]
        - do: Проверить, что можно установить gif файл в роли аватара
        - assert: Аватар устанавливается, отображается первый кадр из gif
        - do: Проверить, что при приложении файла иного формата (например, https://yadi.sk/d/qzFEwJBT4xGpHQ ) не возникает критических ошибок
        - assert: |
              Открывается диалог применения аватара без превью кнопка "сохранить" задизейблена, нажатие на нее не дает эффекта
              По нажатию на кнопку "Отмена" происходит возврат в меню информации о чате
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-10-01_11.25.06-5apKC.png]
        - do: Повторить проверку только на примере jpeg для `AvatarTestChat` (или создать любой новый групповой чат).
        - assert: Можно установить аватар для группового чата в слзданном чате в меню "информация о чате"
        - do: Найти в списке чатов "Сохраненные сообщения" и убедиться, что аватар изменить нельзя
        - assert: |
              Перейти к установке аватара нельзя

    Авторизация при попытке добавления канала или чата[manual]:
        - automation:
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Нажать на кнопку создания чата
        - screenshot: кнопка создания чата [https://jing.yandex-team.ru/files/iutkin/2020-04-10_16.57.51-SeBQN.png]
        - assert: Фон затемняется и открывается диалог, уведомляющий о необходимости авторизации
        - screenshot: диалог [https://jing.yandex-team.ru/files/iutkin/2020-05-08_12.20.11-VcmG7.png]
        - do: Проверить взаимодействие с диалогом
        - assert: |
              При нажатии на кнопку "Отмена" диалог закрывается, затенение убирается* Аналогично при миссклике
              При нажатии на кнопку "Авторизоваться" чат в боковой панели скрывается и открывается таб авторизации прямо в балуне боковой панели (НЕ в отдельном табе)

    Подтягивание авторизации с Я.Почты, если пользователь уже был авторизован[manual]:
        - automation:
        - do: Авторизоваться в почте `tetes2906/000000Rfv`
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Обратить внимание, что подгрузился список пользовательских чатов
        - screenshot: Пример списка чатов [https://jing.yandex-team.ru/files/iutkin/2020-05-08_12.10.51-Yqh31.png]
        - do: Нажать на шестеренку в шапке окошка с чатами
        - screenshot: шестеренка [https://jing.yandex-team.ru/files/iutkin/2020-05-08_11.40.29-cKxOJ.png]
        - assert: Открывается меню настроек, в которое подтянут аватар, имя и фамилия в я.почте

    Запрос номера телефона для пользователя без привязанного телефона[manual]:
        - automation:
        - do: Зарегистрировать новую почту на https://passport.yandex.ru
        - do: Залогиниться под почтой
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Убедиться, что подписка на каналы происходит без дополнительных условий (напр кликом по кнопке "плюса" напротив рекомендованного канала)
        - screenshot: кнопка "плюс" [https://jing.yandex-team.ru/files/iutkin/2020-05-08_11.54.10-8vN2Y.png]
        - assert: При клике по "плюсу" сразу происходит подписка на канал
        - do: Вернуться в список чатов и кликнуть по иконке создания чата
        - screenshot: кнопка создания чата [https://jing.yandex-team.ru/files/iutkin/2020-05-08_12.00.15-bh6cO.png]
        - assert: Открывается диалог запроса номера телефона
        - screenshot: диалог [https://jing.yandex-team.ru/files/iutkin/2020-05-08_11.59.00-LrhYU.png]
        - do: Ввести валидный номер телефона через 8 или +7 и в следующем диалоге ввести код подтверждения
        - assert: Функционал чатов разблокирован, через кнопку создания чатов (см. скрин выше) можно создавать каналы и чаты, отправлять сообщения
        - do: Перезапустить браузер и убедиться, что функционал чатов по-прежнему разблокирован

    Добавление канала из списка популярных[manual]:
        - automation:
        - description: |
              Проверка добавления популярных каналов
              Пользователь НЕ авторизован
        - do: Запустить браузер с ключом `--enable-features=DisablePassportTransparency`
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - assert: |
              Представлен список рекомендуемых каналов под пунктом Алисы.
              Есть заголовок "рекомендуемые каналы" (если не отображается - включить настройку "Блок "Популярные каналы" в настройках (шестеренка в верхнем правом углу))
              Около каждого пункта с каналом есть кнопка "плюсик"
        - screenshot: кнопка "плюсик" [https://jing.yandex-team.ru/files/iutkin/2020-05-08_11.44.09-FaDmf.png]
        - do: Навести курсор на любой канал и кнопку с плюсом
        - assert: Есть ховер как для пункта, так и для кнопки "+" при наведении курсора
        - screenshot: ховер [https://jing.yandex-team.ru/files/iutkin/2020-05-08_11.45.03-pSCnb.gif]
        - do: Кликнуть на строчку с каналом (НЕ плюсик)
        - assert: Происходит открытие канала, внизу кнопка "Войти, чтобы подписаться"
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-08_11.46.27-2csPj.png]
        - do: Кликнуть по кнопке "Войти, чтобы подписаться"
        - assert: Открывается меню авторизации прямо в балуне боковой панели
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-10-01_12.26.27-VP9kQ.png]
        - do: Не производя логин вернуться в список чатов в боковой панели по кнопке назад в верхнем левом углу и нажать на кнопку "+" рядом с любым каналом
        - screenshot: кнопка "назад" [https://jing.yandex-team.ru/files/iutkin/2020-05-21_14.54.10-iTYSl.png]
        - assert: Открывается меню авторизации прямо в балуне боковой панели
        - screenshot: авторизация [https://jing.yandex-team.ru/files/iutkin/2020-10-01_12.26.27-VP9kQ.png]
        - do: Залогиниться под учеткой `tetes2906/000000Rfv`
        - assert: |
              Происходит вход, открывается канал в балуне боковой панели с уже оформленной подпиской
              Внизу канала кнопка "поделиться каналом"
        - screenshot: кнопка "поделиться каналом" [https://jing.yandex-team.ru/files/iutkin/2020-05-21_15.02.15-Tvbaa.png]
        - do: Закрыть таб с чатом и открыть список чатов в боковой панели
        - assert: Отображаются чаты из аккаунта и рекомендованные каналы под чатами
        - screenshot: пример вида чатов [https://jing.yandex-team.ru/files/iutkin/2020-05-08_11.51.46-w45cl.png]
        - do: Кликнуть по кнопке с плюсиком напротив любого канала
        - assert: Открывается канал и сразу оформляется подписка (снизу кнопка "Отключить уведомления")
        - do: Перейти в контекстное меню канала и выбрать "Отписаться"
        - assert: |
              Открывается диалог отписки (см. скриншот ниже)
              При нажатии на "Отмена" или миссклике - диалог закрывается, отписки не происходит
              При нажатии на "ОК" происходит отписка и возврат в список чатов
        - screenshot: диалог отписки [https://jing.yandex-team.ru/files/iutkin/2020-05-08_11.52.25-2iCPR.png]
        - do: Убедиться, что канал убран из списка пользовательских чатов
        - assert: |
              Канал отсутствует в списке пользовательских чатов
              Канал может отображаться в разделе "Рекомендуемые каналы"

    Зона настроек (шестеренка)/нет логина[manual]:
        - automation:
        - do: Запустить браузер с ключом `--enable-features=DisablePassportTransparency`
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка мессенджера [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - assert: Открывается список чатов в боковой панели
        - do: Нажать на шестеренку в правой верхней части
        - screenshot: шестеренка [https://jing.yandex-team.ru/files/iutkin/2020-05-22_11.42.39-HecKU.png]
        - assert: |
              Открывается меню настроек
              НЕТ пункта "настройки уведомлений"
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2021-12-20T13:11:51Z.b1476d0.png]
        - do: Кликнуть по пункту "Справка"
        - assert: |
              Вебвью скрывается
              Открывается страница справки https://yandex.ru/support/messenger/index.html?form-client=Web&form-page=https%3A%2F%2Fyandex.ru%2Fchat%2Fyabro%3Fflags%3Dmessenger%253D1%23%2F%40%2F%20Яндекс.Мессенджер&form-referrer=&form-browser=Mozilla%2F5.0%20(Macintosh%3B%20Intel%20Mac%20OS%20X%2010_15_7)%20AppleWebKit%2F537.36%20(KHTML%2C%20like%20Gecko)%20Chrome%2F94.0.4606.85%20YaBrowser%2F21.11.0.2054%20Yowser%2F2.5%20Safari%2F537.36&form-screen=1440×900×30&form-window=388×709&form-app_version=2.80.1&form-reqid=1640005805405593-15842651326510620012-sas0-8329-080-sas-l7-balancer-8080-BAL-7959
        - do: Вернуться в меню настроек и нажать на кнопку "Задать вопрос"
        - assert: |
               В вебвью открывается чат поддержки мессенджера. Доступна отправка сообщений без авторизации
        - do: Вернуться в меню настроек и нажать на кнопку "Яндекс"
        - assert: |
               Вебвью скрывается
               Открывается морда https://yandex.ru/
        - do:  Перейти в меню настроек и кликнуть по стрелке "назад" в верхнем левом углу
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.18.59-JN4Ll.png]
        - assert: Происходит возврат в список чатов
        - do: Вернуться в меню настроек и кликнуть по кнопке "войти в аккаунт"
        - screenshot: кнопка "войти в аккаунт" [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.20.06-9KDYg.png]
        - assert: Открывается меню авторизации прямо в балуне боковой панели
        - screenshot: меню авторизации [https://jing.yandex-team.ru/files/iutkin/2020-10-01_12.26.27-VP9kQ.png]
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Происходит авторизация. Отображаются пользовательские чаты в боковой панели
        - screenshot: чаты [https://jing.yandex-team.ru/files/iutkin/2020-05-13_10.30.53-EwZoU.png]

    Поиск по чатам[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка мессенджера [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - assert: |
              Открылся список чатов
              Отображается строка поиска (см. скриншот ниже)
        - screenshot: кнопка мессенджера [https://jing.yandex-team.ru/files/iutkin/2020-03-28_17.05.27-g5iqE.png]
        - do: Ввести первые буквы из названия любого чата на кириллице, например `со`
        - assert: Отображаются результаты поиска, вверху чат "Сохраненные сообщения" под заголовком "Чаты", ниже могут быть прочие совпадения под заголовком "Сообщения"
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-03-28_18.04.17-gveaO.png]
        - do: Кликнуть по результату "Сохраненные сообщения"
        - assert: Открывается чат "Сохраненные сообщения"
        - do: Повторить поиск из списка чатов для чата на латинице, например ввести `ch`
        - assert: Отображается результат по запросу, по клику открывается соответствующий чат
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-08_11.13.33-y7clb.png]

    Пуши при получении сообщений[manual]:
        - automation:
        - do: Запустить браузер с ключом `--enable-features="YaPush<xyz" --force-fieldtrials=xyz/1 --force-fieldtrial-params=xyz.1:yandex_push_subscriber_start_delay/1 --ya-server-configuration-delay=1` для ускоренной подписки на пуши
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Залогиниться в другой аккаунт я.почты на другом устройстве или в окне инкогнито
        - assert: Есть залогин на другом устройстве/окне Инкогнито ( **клиент 2** )
        - do: |
              На **клиенте 2** добавиться в чат `NoMuteGroup` по ссылке https://yandex.ru/chat/#/join/6d5e24bf-87f2-4b27-8ef2-b0e2610f3bb4
              **Важно:** Убедиться что для этой группе на **клиенте 1** уведомления включены ( НЕТ перечеркнутого динамика или серого фона у счетчика как на скриншоте ниже). Иначе включить уведомления через настройки чата (как это сделать см. ниже)
        - screenshot: пример перечеркнутого динамика [https://jing.yandex-team.ru/files/iutkin/2020-03-26_19.35.49-iMBwV.png]
        - screenshot: включение уведомлений [https://jing.yandex-team.ru/files/iutkin/2020-03-27_16.35.11-kws9r.gif]
        - do: Закрыть вебвью мессенджера **в клиенте 1**, например мисскликом
        - do: Подождать не менее минуты минуту и отправить сообщение **с клиента 2** на **клиент 1**
        - assert: |
              На **клиенте 1** отображается пуш-уведомление (скрин ниже)
              Увеличивается счетчик на кнопке мессенджера
        - screenshot: пуш-уведомление [https://jing.yandex-team.ru/files/iutkin/2020-03-27_16.40.09-M3vGR.png]
        - screenshot: счетчик на кнопке [https://jing.yandex-team.ru/files/iutkin/2020-05-08_17.07.12-RZGXd.png]
        - do: Кликнуть по пушу
        - assert: |
              Открывается соответствующий чат в боковой панели браузера
              Обновляется (обнуляется, если нет непрочитанных в других чатах) счетчик непрочитанных сообщений в боковой панели
              **Примечание:** в счетчике непрочитанных не указываются сообщения из чатов/каналов, в которых уведомления отключены
        - screenshot: отсуствие счетчика [https://jing.yandex-team.ru/files/iutkin/2020-05-08_17.09.28-6ep6v.png]

    Поиск внутри чата[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - assert: Открылся список чатов
        - do: Открыть чат `test`
        - do: Нажать на значок "лупы" в верхней части чата
        - assert: Раскрывается строка поиска
        - screenshot: строка поиска [https://jing.yandex-team.ru/files/iutkin/2020-05-08_11.16.45-Nq2Q6.png]
        - do: Написать в строку поиска `при` (кириллица)
        - assert: |
              Подсвечиваются соответствующие результаты, по стрелками можно перемещаться у более верхнему или более нижнему
              Отображается порядковый номер результата и количество совпадений* По клику по стрелочкам происходит переход между результатами
              Поиск регистронезависим
        - screenshot: строка поиска [https://jing.yandex-team.ru/files/iutkin/2020-05-08_11.15.53-GLL3T.gif]
        - do: Написать в строку поиска `Sa` (латиница)
        - assert: Аналогично предыдущему шагу ищутся результаты на латинице. Допустимы результаты на кириллице при совпадении по транслитерации.
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-03-31_14.07.50-nycF4.gif]
        - do: Произвести поиск по смешанному запросу (латиница + кириллица) `Qа`
        - assert: |
              Отображаются результаты
              Найденный результат кратковременно подсвечивается
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-03-31_14.27.02-bsXMf.png]
        - do: Нажать на крестик справа от строки поиска
        - assert: Панель поиска скрывается
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-03-31_18.06.32-8KRpc.gif]

    Поиск по сообщениям[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - assert: Открылся список чатов. Отображается строка поиска
        - screenshot: чат со строкой поиска [https://jing.yandex-team.ru/files/iutkin/2020-03-28_17.05.27-g5iqE.png]
        - do: Ввести буквы из сообщения в любом чате на кириллице, например `пример1`
        - assert: |
              Отображаются результаты на кириллице
              По клику на любой из них - происходит открытие соответствующего чата с соответствующим сообщением в видимой зоне
              Поиск нерегистрозависим
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-08_11.19.18-CjcSy.gif]
        - do: Ввести первые буквы из названия любого чата на латинице, например `sample`
        - assert: Аналогично предыдущему шагу ищутся результаты на латинице
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-08_11.20.46-nHc76.png]
        - do: Вмести смешанный запрос`QAр`
        - assert: Аналогично предыдущему шагу находятся "смешанные запросы"
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-08_11.26.57-mLs4o.png]
        - do: Нажать на крестик в правой части строки поиска
        - assert: |
              Поисковой запрос стирается, открывается список чатов
              В поисковой строке плейсхолдер "Поиск"
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-08_11.28.06-H8F6i.png]
        - do: Повторить шаг 7 и кликнуть по результату
        - assert: |
              Происходит переход в чат, искомое сообщение в фокусе в видимой части
              Результат кратковременно подсвечивается

    Зона настроек (шестеренка)/есть логин[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - assert: Открывается список чатов в боковой панели
        - do: Нажать на шестеренку в правой верхней части
        - screenshot: кнопка шестеренки [https://jing.yandex-team.ru/files/iutkin/2020-05-18_14.13.28-iq6u3.png]
        - assert: |
              Открывается окно настроек (см скриншот ниже)
              Отображается аватар, имя пользователя
              Есть ссылка "Изменить имя и фото"
              Есть ссылка "Настройка уведомлений"
        - screenshot: окно настроек [https://jing.yandex-team.ru/files/iutkin/2021-04-27_11.32.54-NvEK5.png]
        - do: Кликнуть по ссылке "Настройка уведомлений"
        - assert: |
              Вебвью закрывается
              Открывается страница настройки уведомлений (нет 404 ошибки и прочих) https://yandex.ru/tune/desktopnotifications/messenger?from=push
        - do: Вернуться в меню настроек и кликнуть по ссылке "Изменить имя и фото"
        - assert: |
              Вебвью закрывается
              Открывается https://passport.yandex.ru/profile/public?origin=messenger_web
        - do: Выйти из яндекс аккаунта любым способом
        - assert: Произведен разлогин
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - assert: Чаты, отображаемые в залогиненном состоянии - исчезли. Отображаются "популярные каналы"
        - do: Нажать на шестеренку в правой верхней части
        - assert: |
              Открывается меню настроек
              НЕТ пункта "настройки уведомлений" и прочих настроек, кроме "Отправлять сообщение по Enter"
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2021-04-27_11.57.31-ZfxhS.png]

    Закрепление/открепление чата в списке чатов[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Через КМ закрепить любой чат, а также любой канал
        - assert: Канал и чат закрепляются и помещаются в блок с Алисой, отделенный от остальных чатов
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-08_17.15.49-bQU49.gif]
        - do: Перезапустить браузер и убедиться, что чаты по-прежнему закреплены в списке чатов в боковой панели
        - assert: Ранее закрепленные чаты - закреплены
        - do: Открепить чат и канал через КМ
        - assert: Чат и канал открепляются, но по-прежнему отображаются в списке чатов (не удаляются)
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-08_17.16.30-VJb4L.gif]

    Кнопка отключения/включения уведомлений в списке каналов[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Кликнуть в канал, в котором пользователь не является админом (напр `Пикабу` или `Channel`)
        - assert: Если в канале уведомления изначально были включены - отображается кнопка НЕперечеркнутого колокольчика (состояние настройки можно проверить в меню "Информация о чате". Если в меню "Информация о чате" уведомления отключены - включить их и продолжить проверки.
        - screenshot: переключение настройки в настройках чата [https://jing.yandex-team.ru/files/iutkin/2020-04-10_18.44.11-BPXko.gif]
        - screenshot: неперечеркнутый колокольчик [https://jing.yandex-team.ru/files/iutkin/2020-05-08_17.24.29-khUGZ.png]
        - do: Нажать на кнопку "Отключить уведомления"
        - assert: Кнопка меняется на "Включить уведомления". При еще одном нажатии - обратно на  "Отключить уведомления"
        - do: Убедиться, что меняется настройка уведомлений в меню "Информация о чате" при нажатии по кнопке
        - assert: Настройка меняется в соответствиями с нажатиями кнопки
        - screenshot: переключение настройки [https://jing.yandex-team.ru/files/iutkin/2020-04-10_18.51.29-u8TEn.gif]
        - do: Убедиться, что при переключении тумблера в меню  “Информация о чате” - меняется текст кнопки
        - assert: При отключении тумблера уведомлений - текст кнопки меняется на  “Включить уведомления”При включении тумблера уведомлений - текст кнопки меняется на  “Отключить уведомления”

    Создание канала/группы и выход из них[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Нажать на "карандаш" в шапке списка чатов
        - screenshot: карандаш [https://jing.yandex-team.ru/files/iutkin/2020-04-10_19.42.04-7CCgJ.png]
        - do: Кликнуть по пункту "новый групповой чат" и создать чат
        - assert: Создан произвольный групповй чат
        - do: Аналогично войти в меню "карандаша" и создать канал через пункт "Новый канал"
        - do: В списке чатов вниз до заголовка "Популярные каналы" и добавь любой из них (кликом в "+")
        - assert: Итого создан новый чат, канал и оформлена подписка на еще один сторонний канал
        - do: Вызвать КМ при помощи ПКМ по созданному каналу и кликнуть по "Отписаться"
        - screenshot: пункт в КМ [https://jing.yandex-team.ru/files/iutkin/2020-04-10_19.48.47-fSFu2.png]
        - assert: |
              Открывается диалог подтверждения удаления, фон затеняется
              По миссклику или клику по кнопке "Отмена" - затенение убирается и диалог скрывается, канал не удаляется
              По клику на "ОК" происходит отписка от канала (канал удаляется из списка чатов)
        - screenshot: диалог отписки [https://jing.yandex-team.ru/files/iutkin/2020-05-08_18.10.02-pqRPB.png]
        - do: Повторить проверку диалога отписки для стороннего канала, добавленного ранее
        - assert: Аналогично преыдущей проверке, диалог работает корректно
        - do: Вызвать КМ при помощи ПКМ по созданному групповому чату и кликнуть “Покинуть чат”
        - assert: |
              Открывается диалог подтверждения удаления, фон затеняется
              По миссклику или клику по кнопке "Отмена" - затенение убирается и диалог скрывается, канал не удаляется
              По клику на "ОК" происходит выход из чата (канал удаляется из списка чатов)
        - screenshot: диалог удаления чата [https://jing.yandex-team.ru/files/iutkin/2020-07-14_17.07.45-RBMbW.png]

    Создание нового канала[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Нажать на "карандащ" в шапке списка чатов
        - screenshot: карандаш [https://jing.yandex-team.ru/files/iutkin/2020-04-10_19.42.04-7CCgJ.png]
        - do: Кликнуть по пункту "Новый канал"
        - assert: Открывается диалог создания нового канала
        - do: |
             Убедиться, что кнопка создания канала присутствует только тогда, когда есть хотя бы один символ в названии
             Уюедиьбся, что кнопка снова убирается, если стереть называние
             Кнопка не появляется, если заполнить только описание
             Перещелкивается радиобаттон "Публичный канал"
        - screenshot: Пример [https://jing.yandex-team.ru/files/iutkin/2020-05-08_18.29.45-gvWlW.gif]
        - do: Ввести произвольное называние и описание и нажать "Создать канал"
        - assert: |
              Сразу создается канал
              В новом канале пользователь в режиме администратора (можно отправлять сообщения)
        - screenshot: Пример процесса создания канала [https://jing.yandex-team.ru/files/iutkin/2020-05-08_18.42.07-umDfo.gif]
        - do: Перейти в окно информации
        - screenshot: Пункт в КМ [https://jing.yandex-team.ru/files/iutkin/2020-04-13_15.20.44-LLZet.png]
        - assert: Отображается заданное название и описание
        - screenshot: Пример [https://jing.yandex-team.ru/files/iutkin/2020-04-13_15.21.17-57L49.png]

    Создание нового чата[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Нажать на "карандащ" в шапке списка чатов
        - screenshot: карандаш [https://jing.yandex-team.ru/files/iutkin/2020-04-10_19.42.04-7CCgJ.png]
        - do: Кликнуть по пункту "Новый групповой чат"
        - assert: |
              Открывается диалог создания чата
              Есть уведомление о необходимости задания названия чата
              Нет кнопки создания чата
        - screenshot: диалог создания чата [https://jing.yandex-team.ru/files/iutkin/2020-05-08_18.10.57-X35X9.png]
        - do: Навести курсор на иконку фотоаппарата
        - assert: Есть ховер
        - screenshot: ховер [https://jing.yandex-team.ru/files/iutkin/2020-04-13_12.39.36-a4Hod.png]
        - do: Кликнуть по кнопке
        - assert: Открывается системный диалог выбора картинки для аватара
        - do: Выбрать картинку (пример можно скачать отсюда https://yadi.sk/i/7Euowa2YM2VOSA )
        - assert: Открылся диалог выбора отображаемой зоны
        - screenshot: диалог выбора отображаемой зоны [https://jing.yandex-team.ru/files/iutkin/2020-05-08_18.12.06-dfF4o.png]
        - do: Проверить возможность изменения размера зоны и ее местоположения при помощи ползунков
        - assert: Размер и местоположение зоны изменяются
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-04-13_12.44.11-U4pXr.png]
        - do: Подтвердить изменения по кнопке "сохранить"
        - assert: |
              Происходит возврат в диалог создания чат, применяется аватар
              Есть уведомление о необходимости задания названия чата
              Нет кнопки создания чата
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-08_18.12.57-i2wni.png]
        - do: Написать произвольное название чата
        - assert: Появляется кнопка "добавить участников" после ввода первой буквы(см скриншот ниже). Если убрать название, то кнопка снова исчезает
        - screenshot: скриншот с кнопкой [https://jing.yandex-team.ru/files/iutkin/2020-05-08_18.16.12-9Pgib.png]
        - do: Нажать на кнопку "Добавить участников"
        - assert: Открывается диалог добавления участников
        - screenshot: диалог добавления участников [https://jing.yandex-team.ru/files/iutkin/2020-05-20_18.06.09-eqmWy.png]
        - do: Нажать "Назад"
        - assert: Происходит возврат в диалог создания чата, заполнено поле названия и применен аватар
        - do: Вернуться в диалог добавления участников и поставить чекбокс напротив `Default-Имя D.
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-20_18.07.06-mw9EX.png]
        - do: Нажать кнопку "Создать чат"
        - assert: Открылся созданный канал с двумя участниками
        - screenshot: созданный канал [https://jing.yandex-team.ru/files/iutkin/2020-04-13_12.47.02-3BdnD.png]

    КМ чатов в списке чатов[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Найти в списке чатов канал `test 1.55.0` и открыть КМ кликом ПКМ по нему
        - screenshot: Пример [https://jing.yandex-team.ru/files/iutkin/2020-04-13_16.24.09-Fvro6.png]
        - do: Проверить пункты КМ
        - assert: |
              При нажатии на пункт "Информация о чате" происходит открытие соответствующего окна (скриншот ниже)
              При нажатии на "закрепить чат" - канал закрепляется в верхней части списка чатов
              В КМ закрепленного чата пункт заменяется на "Открепить чат", при нажатии на который чат открепляется
              При нажатии на "Отключить уведомления" - уведомления отключаются, появляется значок перечеркнутого динамика (или **серый** каунтер при наличии сообщений). После этого пункт в КМ заменяется на "Включить уведомления", при нажатии на который уведомления включаются
              При нажатии на "Пожаловаться" открывается список причин жалобы
              При нажатии на "Покинуть чат" появляется диалог подтверждения удаления чата
        - screenshot: окно информации о чате [https://jing.yandex-team.ru/files/iutkin/2020-09-01_10.44.48-hNMAo.png]

    Назначение ролей в чате[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Найти в списке и перейти в чат `ChatRoleTest` (при затруднениях найти по ссылке https://yandex.ru/chat/#/join/44a84aa8-f83b-4690-b9ed-301fb8b705a4)
        - do: Перейти в окно информации
        - screenshot:  соответствующий пункт в КМ [https://jing.yandex-team.ru/files/iutkin/2020-04-13_15.20.44-LLZet.png]
        - do: |
              На примере аккаунта `Default-Имя D.`  убедиться, что
              Его можно назначить администратором и убрать из них
              Можно удалить аккаунт из чата
              Можно повторно добавить аккаунт в чат
              Также убедиться, что нельзя снять роль администратора с самого себя(в примере ниже другой аккаунт, не обращать внимания, **использовать вышеуказанный** )
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-08_19.12.13-dGXk7.gif]
        - assert: визуально интерефейс на примере выше может немного отличаться, это пример процесса

    КМ чата в окне чата[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Найти в списке чатов канал `test 1.55.0` и перейти в чат
        - do: Открыть КМ кликом по кнопке в правом верхнем углу
        - screenshot: Пример [https://jing.yandex-team.ru/files/iutkin/2020-04-13_17.26.03-7GJki.png]
        - do: Проверить пункты КМ
        - assert: |
              При нажатии на пункт "Информация о чате" происходит открытие соответствующего окна (см. скрин)
              При нажатии на "Отключить уведомления" - уведомления отключаются (отключается чекбокс уведомлений в меню "Информация о чате"). После этого пункт заменяется на "Включить уведомления", при нажатии на который уведомления включаются
              При нажатии на "Добавить участников" открывается диалог добавления участников (см. скрин)
              При нажатии на "Пожаловаться" открывается список причин жалобы- При нажатии на "Покинуть чат" появляется диалог подтверждения удаления чата
        - screenshot: Окно "информация о чате" [https://jing.yandex-team.ru/files/iutkin/2020-09-01_10.44.48-hNMAo.png]
        - screenshot: диалог добавления участников [https://jing.yandex-team.ru/files/iutkin/2020-04-13_17.33.04-G7ngg.png]

    КМ канала в окне канала[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Подписаться на канал https://yandex.ru/chat/#/join/2c2f0d72-27c3-4c75-87ca-caa99e5b7906 (если уже есть подписка - доп. действий не требуется)
        - assert: Есть подписка на канал https://yandex.ru/chat/#/join/2c2f0d72-27c3-4c75-87ca-caa99e5b7906
        - do: Перейти в диалог в канале
        - screenshot: диалог [https://jing.yandex-team.ru/files/iutkin/2020-05-08_19.18.33-c5W8O.png]
        - do: |
              Проверить, что
              При нажатии на пункт "Информация о чате" происходит открытие соответствующего окна
              При нажатии на "Отключить уведомления" - уведомления отключаются (отключается чекбокс уведомлений в меню "Информация о чате"). После этого пункт заменяется на "Включить уведомления", при нажатии на который уведомления включаются
              При нажатии на "Пожаловаться" открывается список причин жалобы
              При нажатии на "Отписаться" появляется диалог подтверждения отписки
        - screenshot: окно информации о чате [https://jing.yandex-team.ru/files/iutkin/2020-09-01_10.43.18-3PpfB.png]

    КМ каналов в списке чатов[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Подписаться на канал https://yandex.ru/chat/#/join/2c2f0d72-27c3-4c75-87ca-caa99e5b7906(если уже есть подписка - доп. действий не требуется)
        - assert: Есть подписка на канал https://yandex.ru/chat/#/join/2c2f0d72-27c3-4c75-87ca-caa99e5b7906
        - do: Вернуться в общий список чатов в боковой панели и взывать КМ по добавленному каналу
        - screenshot: Пример [https://jing.yandex-team.ru/files/iutkin/2020-05-08_19.15.22-XnWVy.png]
        - do: |
              Проверить, что
              При нажатии на пункт "Информация о чате" происходит открытие соответствующего окна ( см скриншот ниже )
              При нажатии на "закрепить чат" - канал закрепляется в верхней части списка чатов. В КМ закрепленного чата пункт заменяется на "Открепить чат", при нажатии на который чат открепляется
              При нажатии на "Отключить уведомления" - уведомления отключаются, появляется значок перечеркнутого динамика (или **серый** каунтер при наличии сообщений). После этого пункт в КМ  заменяется на "Включить уведомления", при нажатии на который уведомления включаются
              При нажатии на "Пожаловаться" открывается список причин жалобы
              При нажатии на "Отписаться" появляется диалог подтверждения отписки
        - screenshot: меню информации о чате [https://jing.yandex-team.ru/files/iutkin/2020-09-01_10.43.18-3PpfB.png]

    КМ сообщения в чате[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Найти в списке чатов канал `test 1.55.0` и перейти в него
        - do: Вызвать КМ по "чужому" сообщению
        - assert: Отображается КМ
        - screenshot: КМ [https://jing.yandex-team.ru/files/iutkin/2020-10-01_12.46.34-7aXKB.png]
        - do: Проверить работу пунктов КМ
        - assert: |
              При нажатии на "Выбрать" - сообщение выделяется. Можно выделять кликами другие сообщения. По "Х" происходит отмена выделения. По кнопке (см скриншот ниже) - копирование текста всех выделенных сообщений. По кнопке открывается список чатов для пересылки сообщения (убедиться, что пересылка работает)
              При нажатии на пункт "Ответить" - следующее сообщение будет ответом на выбранное сообщение (см. скриншот ниже)
              При нажатии на "Добавить в сохраненные" - отображается тултип "Сообщение сохранено", сообщение сохраняется в чат "Сохраненные сообщения" (можно найти в списке чатов)
              При нажатии на "Переслать" - активируется диалог пересылки сообщения
              При нажатии на "Скопировать текст" - текст копируется в буфер обмена
              При нажатии на "Поделиться ссылкой" - в буфер обмена копируется прямая ссылка на сообщение формата https://yandex.ru/chat/#/join/0ade8fb4-bd98-4b5d-a3c0-a733e678b42e/1586789568182001
              При нажатии на "Сделать важным" - сообщение отмечается как важное
              При нажатии на "Пожаловаться" открывается диалог с причинами жалобы
        - screenshot: кнопка копирования теста [https://jing.yandex-team.ru/files/iutkin/2020-04-13_17.49.53-Yc3Lq.png]
        - screenshot: ответ на сообщение [https://jing.yandex-team.ru/files/iutkin/2020-05-08_19.34.39-gFbwo.gif]
        - do: Вызвать КМ по "своему" сообщению
        - assert: Отображается КМ (см. ниже)
        - screenshot: КМ [https://jing.yandex-team.ru/files/iutkin/2020-04-13_17.36.55-kV9rG.png]
        - do: Проверить работу пунктов "Редактировать" и "Удалить"
        - assert: |
              При нажатии на "редактировать" - включается диалог редактирования сообщения. После редактирования - сообщение изменяется, появляется пиктограмма "карандашика" в его нижней части
              При нажатии на крестик - редактирование отменяется. (пример см. ниже)
              При нажатии на "Удалить" - фон затемняется и открывается (пример см. ниже)
              При миссклике или нажатии на "Отмена" - сообщение не удаляется, затенение убирается, диалог скрывается
              При нажатии на "Ок" - сообщение удаляется, вместо него отображается "сообщение было удалено"(пример см. ниже)
        - screenshot: пример редактирования [https://jing.yandex-team.ru/files/iutkin/2020-04-13_18.11.12-9P2nE.gif]
        - screenshot: диалог удаления [https://jing.yandex-team.ru/files/iutkin/2020-05-08_19.40.55-Sqnfc.png]
        - screenshot: удаленное сообщение [https://jing.yandex-team.ru/files/iutkin/2020-04-13_18.15.10-tArju.png]

    Реакции[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Подписаться на канал https://yandex.ru/chat/#/join/2c2f0d72-27c3-4c75-87ca-caa99e5b7906(если уже есть подписка - доп. действий не требуется)
        - assert: Есть подписка на канал https://yandex.ru/chat/#/join/2c2f0d72-27c3-4c75-87ca-caa99e5b7906
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Перейти в канал из шага 3
        - do: Проверить функционал реакций
        - assert: |
              При наведении на любое сообщение отображается "веер" реакций, если нет ни одной реакции на сообщение
              Если какая-либо реакция есть - то отображаются наиболее популярные реакции с общим счетчиком
              При нажатии на "веер" или кнопку со счетчиком можно выбрать реакцию. Отображаются счетчики напротив каждой реакции- Если у сообщения уже есть реакции - они отображаются рядом с сообщением, даже если меню реакций закрыто
              При выборе реакции - счетчик реакции увеличивается
              При повторном нажатии на реакцию - она снимается
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2021-04-27_15.26.18-suZCn.gif]
        - do: Выйти из чата канала и зайти снова
        - assert: Реакции сохранились и отображаются
        - do: Повторить проверки шагов 6-7 для любого чата (не канала), например `test`
        - assert: Аналогично 6-7
        - do: Повторить проверки шагов 6-7 для любого канала, на который НЕТ подписки (раздел "Популярные каналы" в списке чатов)
        - assert: Аналогично 6-7

    Отметка сообщения как важного[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Найти в списке чатов канал `test 1.55.0` и перейти в него
        - do: Вызвать КМ по "чужому" сообщению
        - assert: Отображается КМ
        - screenshot: КМ [https://jing.yandex-team.ru/files/iutkin/2020-10-01_12.46.34-7aXKB.png]
        - do: Выбрать пункт "Сделать важным"
        - assert: сообщение получило обводку и плашку "ВАЖНОЕ" со звездочкой. КМ закрылось
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-10-01_12.55.31-wirkF.png]
        - do: Выйти из чата в общий список чатов и зайти в чат повторно
        - assert: Сообщение по-прежнему отмечено как важное
        - do: добавиться в чат под другим аккаунтом (напр, личным)
        - assert: Сообщение, ранее отмеченное важным - отображается важным и для этого аккаунта
        - do: Вызвать КМ по важному сообщению
        - assert: Отображается КМ, в КМ есть пункт "Убрать из важных"
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-10-01_14.08.52-VqePs.png]
        - do: Кликнуть по "убрать из важных"
        - assert: С сообщения снимается статус важного, визуально становится таким же, как остальные сообщения на всех аккаунтах в чате
        - do: проверить возможность установки и снятия важности по "своему" сообщению
        - assert: можно установить и снять важность для "своего" сообщения, нет визуальных артефактов]

    Меншены[manual]:
        - automation:
        - description: Кейс описывает функционал меншенов - упоминаний определенного собеседника в чате
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Перейти в чат `test` (можно добавиться по ссылке https://yandex.ru/chat/#/join/2e7933aa-a2d0-439e-b8bd-2b12d0a62301)
        - do: Ввести символ @ в поле ввода
        - assert: |
              Отображается список участников чата, которых можно "упомянуть"
              Верстка балуна **не искажается** (например, не съезжает шапка)
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-14_16.57.09-UPDa7.png]
        - do: Выбрать в списке аккаунт `test t.` и отправить сообщение
        - assert: |
              Отправляется сообщение в формате ссылки
              При клике на имя пользователя - открывается его профиль
        - screenshot: как выглядит [https://jing.yandex-team.ru/files/iutkin/2020-05-14_17.03.24-nbMQu.png]

    Сброс счетчика при прочтении сообщений[manual]:
        - automation:
        - description: После прочтения сообщений - счетчик в панели должен сброситься
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть окно Инкогнито и залогиниться под другим аккаунтом ( **клиент 2** ). Из профиля в основном окне ( **клиент 1** ) - не разлогиниваться
        - assert: Есть логин под другим аккаунтом в окне Инкогнито
        - do: Отправить несколько сообщений в чат https://yandex.ru/chat/#/join/2e7933aa-a2d0-439e-b8bd-2b12d0a62301 c **клиента 2** (Инкогнито)
        - do: Перейти в основное окно ( **клиент 1** ) и обратить внимание на счетчик в боковой панели
        - assert: Счетчик увеличился на количество полученных сообщений и отображает сумму непрочитанных сообщений (кроме чатов с отключенными уведомлениями)
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-14_18.42.52-eatZV.png]
        - do: Кликнуть по иконке чатов в боковой панели и прочитать полуенные сообщения в чате `test`
        - assert: Счетчик в боковой панели обнулился
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-14_18.43.48-8giuE.png]

    Сброс счетчика при логауте[manual]:
        - automation:
        - description: После логаута - счетчик в панели должен сброситься
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть окно Инкогнито и залогиниться под другим аккаунтом ( **клиент 2** ). Из профиля в основном окне ( **клиент 1** ) - не разлогиниваться
        - assert: Есть логин под другим аккаунтом в окне Инкогнито
        - do: Отправить несколько сообщений в чат https://yandex.ru/chat/#/join/2e7933aa-a2d0-439e-b8bd-2b12d0a62301 c **клиента 2** (Инкогнито)
        - do: Перейти в основное окно ( **клиент 1** ) и обратить внимание на счетчик в боковой панели
        - assert: Счетчик увеличился на количество полученных сообщений и отображает сумму непрочитанных сообщений (кроме чатов с отключенными уведомлениями)
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-14_18.42.52-eatZV.png]
        - do: Разлогиниться из почты tetes2906 (на **клиенте 1** )
        - assert: Счетчик в боковой панели обнулился
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-14_18.43.48-8giuE.png]

    Восстановление синхронизации данных при дисконнекте[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Открыть любой чат
        - assert: Чат открыт
        - do: Отключить интернет и отправить сообщение
        - assert: |
              Сообщение отображается, но не отправляется
              Внизу балуна в боковой панели отображается плашка "Ожидание сети" с кнопкой "Подключиться"
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2021-12-20T12%3A52%3A58Z.f9dba51.png]
        - do: Тапнуть по "Подключиться"
        - assert: |
              Сообщение отображается, но не отправляется, отображается восклицательный знак
              Внизу балуна в боковой панели отображается плашка "Ожидание сети" с кнопкой "Подключиться" и обратным отсчетом до повторной попытки
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-09-10_19.07.25-hqLMW.png]
        - do: Нажать на "Подключиться"
        - assert: |
              Происходит попытка подключения, но плашка появляется повторно
              Нет прочих уведомлений об ошибках
        - screenshot: взаимодейтвие с плашкой [https://jing.yandex-team.ru/files/iutkin/2020-05-14_18.53.34-bp6JN.gif]
        - do: Включить сеть и сразу нажать на "Подключиться" в плашке "Ожидание сети"
        - assert: |
              Происходит восстановление сети, можно отправлять сообщения в чат
              Сообщений об ошибке не возникает
              При отправке сообщений нет восклицательного знака, напротив сообщений отображаются "галочки"
        - do: Кликнуть по восклицательному знаку у сообщения  из шага 4
        - assert: Сообщение отправляется
        - screenshot: пример отправки [https://jing.yandex-team.ru/files/iutkin/2020-05-14_18.56.05-KWJFv.gif]
        - do: Отключить интернет, дождаться появления плашки и снова включить интернет
        - assert: |
              Через некоторое время плашка исчезает сама
              Можно успешно отправлять сообщения
              Сообщений об ошибке не возникает

    Отправка голосовых сообщений[manual]:
        - automation:
        - description: Необходимо наличие микрофона
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Перейти в любой чат (не канал), например, `test`
        - do: Нажать по иконке микрофона в нижнем правом углу и сказать несколько слов. После чего повторно нажать по кнопке "Отменить"
        - assert: |
              Сообщение НЕ отправляется
              Во время записи иконка меняется на красный "самолетик", пульсирующий согласно громкости звука
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-14_19.12.17-crCfT.gif]
        - do: Повторно нажать на микрофон, сказать несколько слов и подтвердить отправку кликом в "самолетик"
        - assert: |
              Сообщение отправляется, отображается звуковая развертка сообщения
              Отображается **распознанный текст** из голосового сообщения
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-14_19.12.01-VVxKU.gif]
        - do: Повторно нажать на микрофон, сказать несколько слов и нажать на кнопку "стоп" (квадрат)
        - assert: |
              Сообщение останавливается, но не отправляется. Отображается длина сообщения и его развертка в области ввода
              При клике по "самолетику" - сообщение отсылаетсяю При клике по "крестику" слева сообщения - сообщение удаляется и не отправляется.
        - screenshot: пример отправки [https://jing.yandex-team.ru/files/iutkin/2020-05-14_19.11.43-UmWPA.gif]
        - screenshot: пример отмены отправки [https://jing.yandex-team.ru/files/iutkin/2020-05-14_19.11.19-wG9iG.gif]
        - do: Нажать на кнопку проигрывания в любом голосовом сообщении
        - screenshot: кнопка проигрывания [https://jing.yandex-team.ru/files/iutkin/2020-05-14_19.19.29-NHDEU.png]
        - assert: Сообщение воспроизводится
        - do: Проверить отправку сообщения без слов (шум/тишина)
        - assert: |
              Сообщение отправляется, отображается звуковая развертка
              Нет распознанного текста сообщения
              Нет сообщений об ошибках

    Режим фуллскрина при клике по картинке[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть любую страницу (Не NTP)
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Перейти в чат `PictureTestChat` (при затруднении можно найти по ссылке https://yandex.ru/chat/#/join/1cbf6f5f-e6c5-4b29-8b9a-77aff4533379)
        - assert: Открыт чат в **боковой панели**
        - screenshot: скриншот [https://jing.yandex-team.ru/files/iutkin/2020-05-15_18.48.37-XeFR7.png]
        - do: Кликнуть по картинке
        - assert: Картинка отображается на весь экран
        - screenshot: картинка на весь экран [https://jing.yandex-team.ru/files/iutkin/2020-05-15_18.52.16-vQctH.png]
        - do: Поменять ширину окна
        - assert: Изображение остается по центру
        - screenshot: пример изменения ширины [https://jing.yandex-team.ru/files/iutkin/2020-05-15_18.53.46-ndBpt.gif]
        - do: Навести курсор в область окна и увести его за пределы окна
        - assert: |
              При наведении курсора в нижнем левом углу отображается информация о пользователе, отправившем картинку и его аватар, а также время отправки
              Отображаются контролы в правой части (кнопка скачки, крестик)
              По клику по крестику - происходит выход из полноэкранного просмотра, отображается чат в боковой панели
              По клику по кнопке загрузки - происходит скачивание файла. Выхода и полноэкранного режима не происходит
              Если увести курсор за пределы окна - информация и контролы скрывается через несколько секунд
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-15_18.55.03-XWK3w.gif]
        - do: Кликнуть в область экрана
        - assert: |
              Происходит выход из полноэкранного режима
              Отображается чат в боковой панели
        - do: Проверить отображение картинки из чата на весь экран в фуллскрине (F11)
        - assert: |
              При клике картинка отображается на весь экран, по центру
              Отображается информация об отправителе и время отправки
              При повторном клике изображение на весь экран скрывается и отображается исходный чат в боковой панели
        - do: Повторить вышеуказанные проверки проверки, но **в NTP** и на примере канала `PictureTestChannel` (при затруднении можно найти по ссылке https://yandex.ru/chat/#/join/06324a9b-7404-42c5-a94a-9b36fcc96dfa)
        - assert: Аналогичный вышеуказанным проверкам результат - картинка разворачивается на весь экран, не обрезается, центруется.

    Настройки приватности[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - do: Нажать на "шестеренку" в правой верхней части вебвью
        - screenshot: шестеренка [https://jing.yandex-team.ru/files/iutkin/2020-05-18_14.13.28-iq6u3.png]
        - assert: Открывается меню настроек, отображается блок настроек приватности
        - screenshot: настройки приватности [https://jing.yandex-team.ru/files/iutkin/2020-07-15_15.33.21-FEukc.png]
        - do: Кликнуть по настройке "Кто может найти меня в Мессенджере"
        - assert: Отобажается КМ с вариантами настройки
        - screenshot: КМ [https://jing.yandex-team.ru/files/iutkin/2020-05-18_14.18.18-tYcji.png]
        - do: Кликнуть по варианту "Только мои контакты" или "Никто"
        - assert: Настройка применяется
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-18_14.19.59-WCtvm.png]
        - do: Проверить возможность изменения прочих настроек
        - assert: Настройки переключаются
        - do: Залогиниться в окне Инкогнито под другим аккаунтом (например `yandex-team-75338.02379 / zUEt.QFsC` ). **Из основного окна не разлогиниваться**
        - do: в окне Инкогнито открыть чат в боковой панели
        - do: Через строку поиска попробовать найти пользователя tetes2906
        - assert: Пользователь не обнаруживается
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-18_14.23.11-xS2xk.gif]
        - do: Вернуться в основное окно (аккаунта tetes2906) и вернуть настройку "Кто может найти меня в Мессенджере" в состояние "Все пользователи"
        - assert: В аккаунте "tetes2906" настройка приватности в состоянии "Кто может найти меня в Мессенджере" - "Все пользователи"
        - do: Вернуться в **окно Инкогнито** и повторить поиск учетки `tetes2906`
        - assert: Пользователь снова видим
        - screenshot: пользователь видим [https://jing.yandex-team.ru/files/iutkin/2020-05-18_14.25.09-jGLc8.gif]

    Онбординг[manual]:
        - automation:
        - description: Онбординг отображается при первом показе балуна. Далее не - показывается
        - do: Создать новый профиль в браузере
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - assert: Отображается онбординг на затемненном фоне (см пример в шаге ниже)
        - do: Убедиться, что верстка онбординга не искажена, можно переключаться между слайдами и при клике по "Попробовать" - онбординг убирается вместе с затемнением
        - screenshot: Пример [https://jing.yandex-team.ru/files/iutkin/2020-05-20_19.02.07-NhR1R.gif]
        - do: Перезапустить браузер и снова открыть мессенджер в боковой панели
        - assert: Онбординг не отображается
        - screenshot: нет онбординга [https://jing.yandex-team.ru/files/iutkin/2020-05-20_19.05.57-SXLfJ.png]
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv` и перезапустить браузер
        - assert: Есть логин, браузер перезапущен
        - do: Убедиться, что при открытии чатов нет онбординга
        - assert: Онбординг не отображается, отображается только список чатов
        - do: Разлогиниться из почты и снова открыть чаты в боковой панели
        - assert: Онбординг не отображается

    Проверка настроек уведомлений (морда)[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - assert: Есть логин в тестируемом браузере ( **клиент 1** )
        - do: Залогиниться в другой аккаунт я.почты на другом устройстве или в окне инкогнито
        - assert: Есть залогин на другом устройстве/окне Инкогнито ( **клиент 2** )
        - do: |
              На **клиенте 2** добавиться в чат `NoMuteGroup` по ссылке https://yandex.ru/chat/#/join/6d5e24bf-87f2-4b27-8ef2-b0e2610f3bb4
              **Важно:** Убедиться что для этой группе на **клиенте 1** уведомления включены ( НЕТ перечеркнутого динамика или серого фона у счетчика как на скриншоте ниже (https://jing.yandex-team.ru/files/iutkin/2020-03-26_19.35.49-iMBwV.png) ).
              Иначе включить уведомления через настройки чата (как это сделать - на скриншоте ниже)
        - screenshot: Пример отключенных уведомлений [https://jing.yandex-team.ru/files/iutkin/2020-03-26_19.35.49-iMBwV.png]
        - screenshot: включение уведомлений через настройки [https://jing.yandex-team.ru/files/iutkin/2020-03-27_16.35.11-kws9r.gif]
        - do: На **клиенте 1** перейти по ссылке https://yandex.ru/tune/desktopnotifications/messenger?from=push
        - assert: Отркылся таб настроек уведомлений
        - screenshot: скриншот [https://jing.yandex-team.ru/files/iutkin/2020-04-13_13.32.24-ZNrHa.png]
        - do: Отщелкнуть чекбокс `Показывать текст уведомления Яндекс.Чатов` и нажать кнопку "Сохранить"
        - assert: |
              Чекбокс `Показывать текст уведомления Яндекс.Чатов` снят
              Чекбокс `Уведомления Яндекс.Чатов` остался чекнутым
        - do: Отправить сообщение в чат с **клиента 2**
        - assert: |
              На **клиенте 1** отображается пуш-уведомление БЕЗ текста сообщения
              Увеличивается счетчик на кнопке мессенджера
        - screenshot: пуш без текста сообщения [https://jing.yandex-team.ru/files/iutkin/2020-04-13_13.32.24-ZNrHa.png]
        - screenshot: счетчик [https://jing.yandex-team.ru/files/iutkin/2020-05-08_17.07.12-RZGXd.png]
        - do: На https://yandex.ru/tune/desktopnotifications/messenger?from=push в **клиенте 1** сделать следующее
        - do: |
              Установить чекбокс  `Показывать текст уведомления Яндекс.Чатов`
              Отщелкнуть чекбокс `Уведомления Яндекс.Чатов`
              Нажать кнопку "Сохранить"
        - assert: |
              Чекбокс `Показывать текст уведомления Яндекс.Чатов` установлен
              Чекбокс `Уведомления Яндекс.Чатов` снят
        - do: Отправить сообщение в чат с **клиента 2**
        - assert: |
              На **клиенте 1** пуш-уведомления не отображаются
              Увеличивается счетчик на кнопке
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-05-08_17.07.12-RZGXd.png]
        - do: На https://yandex.ru/tune/desktopnotifications/messenger?from=push в **клиенте 1** сделать следующее
        - do: |
              Установить чекбокс  `Показывать текст уведомления Яндекс.Чатов`
              Установить чекбокс `Уведомления Яндекс.Чатов`
              Нажать кнопку "Сохранить"
        - assert: |
              Чекбокс Показывать текст уведомления Яндекс.Чатов установлен
              Чекбокс Уведомления Яндекс.Чатов установлен
        - do: Отправить сообщение в чат с **клиента 2**
        - assert: |
              На **клиенте 1** отображается пуш-уведомление **с текстом** сообщения
              Увеличивается счетчик на кнопке мессенджера
        - screenshot: пуш с текстом сообщения [https://jing.yandex-team.ru/files/iutkin/2020-03-27_16.40.09-M3vGR.png]

    Настройка отображения рекомендуемых каналов и знакомых[manual]:
        - automation:
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - do: Нажать на шестеренку в шапке окошка с чатами
        - screenshot: шестеренка [https://jing.yandex-team.ru/files/iutkin/2020-05-08_11.40.29-cKxOJ.png]
        - assert: Открывается меню настроек. Присуствуют переключатели `Блок "Популярные каналы"` и `Блок "Ваши друзья и знакомые"` под настройками приватности. Включены по-умолчанию
        - screenshot: Настройки [https://jing.yandex-team.ru/files/iutkin/2020-07-15_15.12.29-CqxCo.png]
        - do: проверить с различной комбинацией настроек, что отображение/скрытие блоков соответсвует состоянию радиобаттонов
        - assert: При отмеченном радиобаттоне блок отображается, при снятом - не отображается
        - screenshot: пример проверки [https://jing.yandex-team.ru/files/iutkin/2020-07-15_15.22.21-J3RL4.gif]
        - do: ВАЖНО включить настройки отображения блоков "Популярные каналы" и "Ваши друзья и знакомые"
        - assert: Настройки включены

    Бесшовное открытие вебью[manual]:
        - automation:
        - do: Открыть чат в боковой панели по кнопке мессенджера
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-05-07_17.15.49-WAE6k.png]
        - assert: вевбью с чатами открывается корректно, без артефактов. При первом открытии возможен кратковременный троббер.
        - screenshot: вебвью [https://jing.yandex-team.ru/files/iutkin/2020-07-15_16.06.22-eKy7v.png]
        - do: понажимать на кнопку чатов в боковой панели, перейти в в какие-либо зоны чатов
        - assert: При нажатии на кнопку чатов вебвью закрывается/открывается. При переходах по чатам - возможна подгрузка содержимого чатов, но **полностью** вебвью НЕ перезагружается
        - screenshot: пример [https://jing.yandex-team.ru/files/iutkin/2020-07-15_16.06.54-35KqY.gif]
        - do: Залогиниться в аккаунт `tetes2906/000000Rfv`
        - do: Повторить вышеуказанные проверки
        - assert: результат аналогичен, открытие вебью происходит без артефактов и подзагрузок

    Непрочитанные сообщения от скрытых чатов не увеличивают каунтер[manual]:
        - automation:
        - description: |
              Зарегистрирован личный неанонимный аккаунт, с которого можно отправлять сообщения (`аккаунт А`)
        - do: Залогиниться в тестовый аккаунт `tetes2906/000000Rfv` (`аккаунт Б`)
        - do: В `аккаунте Б` прочитать сообщения из всех чатов с цветным каунтером (незамьюченных)
        - assert: Сообщения прочитаны, каунтер у кнопки боковой панели пропал
        - screenshot: кнопка [https://jing.yandex-team.ru/files/iutkin/2020-09-11_13.44.48-mmyy1.png]
        - do: Залогиниться под личным аккаунтом из предусловия (`аккаунт А`) во вкладке Инкогнито браузера
        - do: В `аккаунте А` найти через поиск тестовый `аккаунт Б` (ввести `tetes2906` в поисковую строку)
        - screenshot: скриншот [https://jing.yandex-team.ru/files/iutkin/2020-09-10_19.59.30-yN8uB.png]
        - do: Написать сообщение аккаунту `tetes2906` (`Аккаунт Б`) и проверить каунтер в панели для аккаунта `tetes2906` (`Аккаунт Б`)
        - assert: Появился каунтер непрочитанных на кнопке мессенджера в боковой панели в `аккаунте Б`
        - screenshot: скриншот [https://jing.yandex-team.ru/files/iutkin/2020-09-11_13.56.35-KiyQO.png]
        - do: В `аккаунте Б` открыть чаты по кнопке в боковой панели и скрыть чат с личным аккаунтом `А`. Закрыть и снова открыть вебвью с чатами в `аккаунте Б`.
        - screenshot: скриншот [https://jing.yandex-team.ru/files/iutkin/2021-12-20T12:46:25Z.2b6f37f.png]
        - assert: Чат с `аккаунтом А` скрылся и не отображается в списке чатов `аккаунта Б`. Каунтер непрочитанных сообщений для `аккаунта Б` на кнопке - исчез. Если каунтер присутствует - убедиться, что нет непрочитанных сообщений из других чатов.
        - do: Из личного аккаунта `А` попробовать отправить еще одно сообщение в чат с пользователем `tetes2906` (`аккаунт Б`)
        - assert: НЕ появляется/увеличивается каунтер непрочитанных на кнопке мессенджера в боковой панели в окне аккаунта `tetes2906` (`Аккаунт Б`). Личный аккаунт `А` не отображается в списке чатов аккаунта `Б`, тк сообщение не доставлено.

files: []

v-team: Chat

tlds: ru

tags:
    - yamb
    - y-team
